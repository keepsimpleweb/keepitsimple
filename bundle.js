/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var e,t,r={585:(e,t,r)=>{"use strict";e.exports=r.p+"public/9ccae7274ac239747f88.svg"},504:(e,t,r)=>{"use strict";e.exports=r.p+"public/b6f33df1e9689ce31197.svg"},289:(e,t,r)=>{"use strict";e.exports=r.p+"public/ba60443ec3346f1299b5.svg"},359:(e,t,r)=>{"use strict";e.exports=r.p+"public/7c5083cac0e10dc19490.svg"},877:(e,t,r)=>{"use strict";e.exports=r.p+"public/e2b4ddb998d8d7978dde.svg"},370:(e,t,r)=>{"use strict";e.exports=r.p+"public/dd2c75ecce1827f9fee8.svg"},479:(e,t,r)=>{"use strict";e.exports=r.p+"public/74b6f64385bd55256fb5.svg"},712:(e,t,r)=>{"use strict";e.exports=r.p+"public/fc83be33764a51652ea7.svg"},351:(e,t,r)=>{"use strict";e.exports=r.p+"public/fc83be33764a51652ea7.svg"},980:(e,t,r)=>{"use strict";r.d(t,{M:()=>$M}),e=r.hmd(e);var n,i,a=Object.create,o=Object.defineProperty,s=Object.defineProperties,l=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,d=Object.getPrototypeOf,p=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,m=(e,t,r)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,g=(e,t)=>{for(var r in t||(t={}))p.call(t,r)&&m(e,r,t[r]);if(h)for(var r of h(t))f.call(t,r)&&m(e,r,t[r]);return e},v=(e,t)=>s(e,u(t)),y=(n=(e,t)=>{var n,i;n=e,i=function(e){e.SVD=function(e,t,r,n,i){if(t=void 0===t||t,r=void 0===r||r,i=1e-64/(n=n||Math.pow(2,-52)),!e)throw new TypeError("Matrix a is not defined");var a,o,s,l,u,c,h,d,p,f,m,g,v=e[0].length,y=e.length;if(y<v)throw new TypeError("Invalid matrix: m < n");for(var x=[],b=[],w=[],S="f"===t?y:v,_=f=h=0;_<y;_++)b[_]=new Array(S).fill(0);for(_=0;_<v;_++)w[_]=new Array(v).fill(0);var A,M=new Array(v).fill(0);for(_=0;_<y;_++)for(a=0;a<v;a++)b[_][a]=e[_][a];for(_=0;_<v;_++){for(x[_]=h,p=0,s=_+1,a=_;a<y;a++)p+=Math.pow(b[a][_],2);if(p<i)h=0;else for(d=(c=b[_][_])*(h=c<0?Math.sqrt(p):-Math.sqrt(p))-p,b[_][_]=c-h,a=s;a<v;a++){for(p=0,o=_;o<y;o++)p+=b[o][_]*b[o][a];for(c=p/d,o=_;o<y;o++)b[o][a]=b[o][a]+c*b[o][_]}for(M[_]=h,p=0,a=s;a<v;a++)p+=Math.pow(b[_][a],2);if(p<i)h=0;else{for(d=(c=b[_][_+1])*(h=c<0?Math.sqrt(p):-Math.sqrt(p))-p,b[_][_+1]=c-h,a=s;a<v;a++)x[a]=b[_][a]/d;for(a=s;a<y;a++){for(p=0,o=s;o<v;o++)p+=b[a][o]*b[_][o];for(o=s;o<v;o++)b[a][o]=b[a][o]+p*x[o]}}f<(m=Math.abs(M[_])+Math.abs(x[_]))&&(f=m)}if(r)for(_=v-1;0<=_;_--){if(0!==h){for(d=b[_][_+1]*h,a=s;a<v;a++)w[a][_]=b[_][a]/d;for(a=s;a<v;a++){for(p=0,o=s;o<v;o++)p+=b[_][o]*w[o][a];for(o=s;o<v;o++)w[o][a]=w[o][a]+p*w[o][_]}}for(a=s;a<v;a++)w[_][a]=0,w[a][_]=0;w[_][_]=1,h=x[_],s=_}if(t){if("f"===t)for(_=v;_<y;_++){for(a=v;a<y;a++)b[_][a]=0;b[_][_]=1}for(_=v-1;0<=_;_--){for(s=_+1,h=M[_],a=s;a<S;a++)b[_][a]=0;if(0!==h){for(d=b[_][_]*h,a=s;a<S;a++){for(p=0,o=s;o<y;o++)p+=b[o][_]*b[o][a];for(c=p/d,o=_;o<y;o++)b[o][a]=b[o][a]+c*b[o][_]}for(a=_;a<y;a++)b[a][_]=b[a][_]/h}else for(a=_;a<y;a++)b[a][_]=0;b[_][_]=b[_][_]+1}}for(n*=f,o=v-1;0<=o;o--)for(var E=0;E<50;E++){for(A=!1,s=o;0<=s;s--){if(Math.abs(x[s])<=n){A=!0;break}if(Math.abs(M[s-1])<=n)break}if(!A)for(u=0,l=s-(p=1),_=s;_<o+1&&(c=p*x[_],x[_]=u*x[_],!(Math.abs(c)<=n));_++)if(h=M[_],M[_]=Math.sqrt(c*c+h*h),u=h/(d=M[_]),p=-c/d,t)for(a=0;a<y;a++)m=b[a][l],g=b[a][_],b[a][l]=m*u+g*p,b[a][_]=-m*p+g*u;if(g=M[o],s===o){if(g<0&&(M[o]=-g,r))for(a=0;a<v;a++)w[a][o]=-w[a][o];break}for(f=M[s],c=(((m=M[o-1])-g)*(m+g)+((h=x[o-1])-(d=x[o]))*(h+d))/(2*d*m),h=Math.sqrt(c*c+1),c=((f-g)*(f+g)+d*(m/(c<0?c-h:c+h)-d))/f,_=s+(p=u=1);_<o+1;_++){if(h=x[_],m=M[_],d=p*h,h*=u,g=Math.sqrt(c*c+d*d),c=f*(u=c/(x[_-1]=g))+h*(p=d/g),h=-f*p+h*u,d=m*p,m*=u,r)for(a=0;a<v;a++)f=w[a][_-1],g=w[a][_],w[a][_-1]=f*u+g*p,w[a][_]=-f*p+g*u;if(g=Math.sqrt(c*c+d*d),c=(u=c/(M[_-1]=g))*h+(p=d/g)*m,f=-p*h+u*m,t)for(a=0;a<y;a++)m=b[a][_-1],g=b[a][_],b[a][_-1]=m*u+g*p,b[a][_]=-m*p+g*u}x[s]=0,x[o]=c,M[o]=f}for(_=0;_<v;_++)M[_]<n&&(M[_]=0);return{u:b,q:M,v:w}},e.VERSION="1.1.1",Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof e&&typeof t<"u"?i(e):"function"==typeof define&&r.amdO?define(["exports"],i):i((n=typeof globalThis<"u"?globalThis:n||self).SVDJS={})},()=>(i||n((i={exports:{}}).exports,i),i.exports)),x="139",b=100,w=301,S=302,_=306,A=1e3,M=1001,E=1002,C=1003,T=1006,D=1008,L=1009,P=1012,R=1014,O=1015,k=1016,I=1020,B=1023,z=1026,N=1027,F=33776,U=33777,j=33778,H=33779,V=2300,G=2301,W=2302,q=2400,Y=2401,X=2402,Q=3e3,J=3001,Z=3200,K="srgb",$="srgb-linear",ee=7680,te=35044,re=35048,ne="300 es",ie=1035,ae=class{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});let r=this._listeners;void 0===r[e]&&(r[e]=[]),-1===r[e].indexOf(t)&&r[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;let r=this._listeners;return void 0!==r[e]&&-1!==r[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;let r=this._listeners[e];if(void 0!==r){let e=r.indexOf(t);-1!==e&&r.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;let t=this._listeners[e.type];if(void 0!==t){e.target=this;let r=t.slice(0);for(let t=0,n=r.length;t<n;t++)r[t].call(this,e);e.target=null}}},oe=[];for(let e=0;e<256;e++)oe[e]=(e<16?"0":"")+e.toString(16);var se=1234567,le=Math.PI/180,ue=180/Math.PI;function ce(){let e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,r=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return(oe[255&e]+oe[e>>8&255]+oe[e>>16&255]+oe[e>>24&255]+"-"+oe[255&t]+oe[t>>8&255]+"-"+oe[t>>16&15|64]+oe[t>>24&255]+"-"+oe[63&r|128]+oe[r>>8&255]+"-"+oe[r>>16&255]+oe[r>>24&255]+oe[255&n]+oe[n>>8&255]+oe[n>>16&255]+oe[n>>24&255]).toLowerCase()}function he(e,t,r){return Math.max(t,Math.min(r,e))}function de(e,t){return(e%t+t)%t}function pe(e,t,r){return(1-r)*e+r*t}function fe(e){return 0==(e&e-1)&&0!==e}function me(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}var ge=Object.freeze({__proto__:null,DEG2RAD:le,RAD2DEG:ue,generateUUID:ce,clamp:he,euclideanModulo:de,mapLinear:function(e,t,r,n,i){return n+(e-t)*(i-n)/(r-t)},inverseLerp:function(e,t,r){return e!==t?(r-e)/(t-e):0},lerp:pe,damp:function(e,t,r,n){return pe(e,t,1-Math.exp(-r*n))},pingpong:function(e,t=1){return t-Math.abs(de(e,2*t)-t)},smoothstep:function(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t))*e*(3-2*e)},smootherstep:function(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){void 0!==e&&(se=e);let t=se+=1831565813;return t=Math.imul(t^t>>>15,1|t),t^=t+Math.imul(t^t>>>7,61|t),((t^t>>>14)>>>0)/4294967296},degToRad:function(e){return e*le},radToDeg:function(e){return e*ue},isPowerOfTwo:fe,ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:me,setQuaternionFromProperEuler:function(e,t,r,n,i){let a=Math.cos,o=Math.sin,s=a(r/2),l=o(r/2),u=a((t+n)/2),c=o((t+n)/2),h=a((t-n)/2),d=o((t-n)/2),p=a((n-t)/2),f=o((n-t)/2);switch(i){case"XYX":e.set(s*c,l*h,l*d,s*u);break;case"YZY":e.set(l*d,s*c,l*h,s*u);break;case"ZXZ":e.set(l*h,l*d,s*c,s*u);break;case"XZX":e.set(s*c,l*f,l*p,s*u);break;case"YXY":e.set(l*p,s*c,l*f,s*u);break;case"ZYZ":e.set(l*f,l*p,s*c,s*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}},normalize:function(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}},denormalize:function(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}}),ve=class{constructor(e=0,t=0){this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){let t=this.x,r=this.y,n=e.elements;return this.x=n[0]*t+n[3]*r+n[6],this.y=n[1]*t+n[4]*r+n[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){let r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,r){return void 0!==r&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){let r=Math.cos(t),n=Math.sin(t),i=this.x-e.x,a=this.y-e.y;return this.x=i*r-a*n+e.x,this.y=i*n+a*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}};ve.prototype.isVector2=!0;var ye=class{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,t,r,n,i,a,o,s,l){let u=this.elements;return u[0]=e,u[1]=n,u[2]=o,u[3]=t,u[4]=i,u[5]=s,u[6]=r,u[7]=a,u[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){let t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){let t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let r=e.elements,n=t.elements,i=this.elements,a=r[0],o=r[3],s=r[6],l=r[1],u=r[4],c=r[7],h=r[2],d=r[5],p=r[8],f=n[0],m=n[3],g=n[6],v=n[1],y=n[4],x=n[7],b=n[2],w=n[5],S=n[8];return i[0]=a*f+o*v+s*b,i[3]=a*m+o*y+s*w,i[6]=a*g+o*x+s*S,i[1]=l*f+u*v+c*b,i[4]=l*m+u*y+c*w,i[7]=l*g+u*x+c*S,i[2]=h*f+d*v+p*b,i[5]=h*m+d*y+p*w,i[8]=h*g+d*x+p*S,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){let e=this.elements,t=e[0],r=e[1],n=e[2],i=e[3],a=e[4],o=e[5],s=e[6],l=e[7],u=e[8];return t*a*u-t*o*l-r*i*u+r*o*s+n*i*l-n*a*s}invert(){let e=this.elements,t=e[0],r=e[1],n=e[2],i=e[3],a=e[4],o=e[5],s=e[6],l=e[7],u=e[8],c=u*a-o*l,h=o*s-u*i,d=l*i-a*s,p=t*c+r*h+n*d;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);let f=1/p;return e[0]=c*f,e[1]=(n*l-u*r)*f,e[2]=(o*r-n*a)*f,e[3]=h*f,e[4]=(u*t-n*s)*f,e[5]=(n*i-o*t)*f,e[6]=d*f,e[7]=(r*s-l*t)*f,e[8]=(a*t-r*i)*f,this}transpose(){let e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){let t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,n,i,a,o){let s=Math.cos(i),l=Math.sin(i);return this.set(r*s,r*l,-r*(s*a+l*o)+a+e,-n*l,n*s,-n*(-l*a+s*o)+o+t,0,0,1),this}scale(e,t){let r=this.elements;return r[0]*=e,r[3]*=e,r[6]*=e,r[1]*=t,r[4]*=t,r[7]*=t,this}rotate(e){let t=Math.cos(e),r=Math.sin(e),n=this.elements,i=n[0],a=n[3],o=n[6],s=n[1],l=n[4],u=n[7];return n[0]=t*i+r*s,n[3]=t*a+r*l,n[6]=t*o+r*u,n[1]=-r*i+t*s,n[4]=-r*a+t*l,n[7]=-r*o+t*u,this}translate(e,t){let r=this.elements;return r[0]+=e*r[2],r[3]+=e*r[5],r[6]+=e*r[8],r[1]+=t*r[2],r[4]+=t*r[5],r[7]+=t*r[8],this}equals(e){let t=this.elements,r=e.elements;for(let e=0;e<9;e++)if(t[e]!==r[e])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){let r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return(new this.constructor).fromArray(this.elements)}};function xe(e){for(let t=e.length-1;t>=0;--t)if(e[t]>65535)return!0;return!1}ye.prototype.isMatrix3=!0;var be={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function we(e,t){return new be[e](t)}function Se(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function _e(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function Ae(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}var Me={[K]:{[$]:_e},[$]:{[K]:Ae}},Ee={legacyMode:!0,get workingColorSpace(){return $},set workingColorSpace(e){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(e,t,r){if(this.legacyMode||t===r||!t||!r)return e;if(Me[t]&&void 0!==Me[t][r]){let n=Me[t][r];return e.r=n(e.r),e.g=n(e.g),e.b=n(e.b),e}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this.workingColorSpace)}},Ce={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Te={r:0,g:0,b:0},De={h:0,s:0,l:0},Le={h:0,s:0,l:0};function Pe(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+6*(t-e)*(2/3-r):e}function Re(e,t){return t.r=e.r,t.g=e.g,t.b=e.b,t}var Oe=class{constructor(e,t,r){return void 0===t&&void 0===r?this.set(e):this.setRGB(e,t,r)}set(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=K){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,Ee.toWorkingColorSpace(this,t),this}setRGB(e,t,r,n=$){return this.r=e,this.g=t,this.b=r,Ee.toWorkingColorSpace(this,n),this}setHSL(e,t,r,n=$){if(e=de(e,1),t=he(t,0,1),r=he(r,0,1),0===t)this.r=this.g=this.b=r;else{let n=r<=.5?r*(1+t):r+t-r*t,i=2*r-n;this.r=Pe(i,n,e+1/3),this.g=Pe(i,n,e),this.b=Pe(i,n,e-1/3)}return Ee.toWorkingColorSpace(this,n),this}setStyle(e,t=K){function r(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let n;if(n=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let e,i=n[1],a=n[2];switch(i){case"rgb":case"rgba":if(e=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(e[1],10))/255,this.g=Math.min(255,parseInt(e[2],10))/255,this.b=Math.min(255,parseInt(e[3],10))/255,Ee.toWorkingColorSpace(this,t),r(e[4]),this;if(e=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(e[1],10))/100,this.g=Math.min(100,parseInt(e[2],10))/100,this.b=Math.min(100,parseInt(e[3],10))/100,Ee.toWorkingColorSpace(this,t),r(e[4]),this;break;case"hsl":case"hsla":if(e=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){let n=parseFloat(e[1])/360,i=parseInt(e[2],10)/100,a=parseInt(e[3],10)/100;return r(e[4]),this.setHSL(n,i,a,t)}}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(e)){let e=n[1],r=e.length;if(3===r)return this.r=parseInt(e.charAt(0)+e.charAt(0),16)/255,this.g=parseInt(e.charAt(1)+e.charAt(1),16)/255,this.b=parseInt(e.charAt(2)+e.charAt(2),16)/255,Ee.toWorkingColorSpace(this,t),this;if(6===r)return this.r=parseInt(e.charAt(0)+e.charAt(1),16)/255,this.g=parseInt(e.charAt(2)+e.charAt(3),16)/255,this.b=parseInt(e.charAt(4)+e.charAt(5),16)/255,Ee.toWorkingColorSpace(this,t),this}return e&&e.length>0?this.setColorName(e,t):this}setColorName(e,t=K){let r=Ce[e.toLowerCase()];return void 0!==r?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=_e(e.r),this.g=_e(e.g),this.b=_e(e.b),this}copyLinearToSRGB(e){return this.r=Ae(e.r),this.g=Ae(e.g),this.b=Ae(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=K){return Ee.fromWorkingColorSpace(Re(this,Te),e),he(255*Te.r,0,255)<<16^he(255*Te.g,0,255)<<8^he(255*Te.b,0,255)<<0}getHexString(e=K){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=$){Ee.fromWorkingColorSpace(Re(this,Te),t);let r,n,i=Te.r,a=Te.g,o=Te.b,s=Math.max(i,a,o),l=Math.min(i,a,o),u=(l+s)/2;if(l===s)r=0,n=0;else{let e=s-l;switch(n=u<=.5?e/(s+l):e/(2-s-l),s){case i:r=(a-o)/e+(a<o?6:0);break;case a:r=(o-i)/e+2;break;case o:r=(i-a)/e+4}r/=6}return e.h=r,e.s=n,e.l=u,e}getRGB(e,t=$){return Ee.fromWorkingColorSpace(Re(this,Te),t),e.r=Te.r,e.g=Te.g,e.b=Te.b,e}getStyle(e=K){return Ee.fromWorkingColorSpace(Re(this,Te),e),e!==K?`color(${e} ${Te.r} ${Te.g} ${Te.b})`:`rgb(${255*Te.r|0},${255*Te.g|0},${255*Te.b|0})`}offsetHSL(e,t,r){return this.getHSL(De),De.h+=e,De.s+=t,De.l+=r,this.setHSL(De.h,De.s,De.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(De),e.getHSL(Le);let r=pe(De.h,Le.h,t),n=pe(De.s,Le.s,t),i=pe(De.l,Le.l,t);return this.setHSL(r,n,i),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),!0===e.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}};Oe.NAMES=Ce,Oe.prototype.isColor=!0,Oe.prototype.r=1,Oe.prototype.g=1,Oe.prototype.b=1;var ke,Ie=class{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===ke&&(ke=Se("canvas")),ke.width=e.width,ke.height=e.height;let r=ke.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=ke}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){let t=Se("canvas");t.width=e.width,t.height=e.height;let r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);let n=r.getImageData(0,0,e.width,e.height),i=n.data;for(let e=0;e<i.length;e++)i[e]=255*_e(i[e]/255);return r.putImageData(n,0,0),t}if(e.data){let t=e.data.slice(0);for(let e=0;e<t.length;e++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[e]=Math.floor(255*_e(t[e]/255)):t[e]=_e(t[e]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}},Be=class{constructor(e=null){this.uuid=ce(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){let t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];let r={uuid:this.uuid,url:""},n=this.data;if(null!==n){let e;if(Array.isArray(n)){e=[];for(let t=0,r=n.length;t<r;t++)n[t].isDataTexture?e.push(ze(n[t].image)):e.push(ze(n[t]))}else e=ze(n);r.url=e}return t||(e.images[this.uuid]=r),r}};function ze(e){return typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap?Ie.getDataURL(e):e.data?{data:Array.prototype.slice.call(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}Be.prototype.isSource=!0;var Ne=0,Fe=class extends ae{constructor(e=Fe.DEFAULT_IMAGE,t=Fe.DEFAULT_MAPPING,r=M,n=M,i=T,a=D,o=B,s=L,l=1,u=Q){super(),Object.defineProperty(this,"id",{value:Ne++}),this.uuid=ce(),this.name="",this.source=new Be(e),this.mipmaps=[],this.mapping=t,this.wrapS=r,this.wrapT=n,this.magFilter=i,this.minFilter=a,this.anisotropy=l,this.format=o,this.internalFormat=null,this.type=s,this.offset=new ve(0,0),this.repeat=new ve(1,1),this.center=new ve(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new ye,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=u,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){let t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];let r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case A:e.x=e.x-Math.floor(e.x);break;case M:e.x=e.x<0?0:1;break;case E:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case A:e.y=e.y-Math.floor(e.y);break;case M:e.y=e.y<0?0:1;break;case E:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}};Fe.DEFAULT_IMAGE=null,Fe.DEFAULT_MAPPING=300,Fe.prototype.isTexture=!0;var Ue=class{constructor(e=0,t=0,r=0,n=1){this.x=e,this.y=t,this.z=r,this.w=n}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,n){return this.x=e,this.y=t,this.z=r,this.w=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){let t=this.x,r=this.y,n=this.z,i=this.w,a=e.elements;return this.x=a[0]*t+a[4]*r+a[8]*n+a[12]*i,this.y=a[1]*t+a[5]*r+a[9]*n+a[13]*i,this.z=a[2]*t+a[6]*r+a[10]*n+a[14]*i,this.w=a[3]*t+a[7]*r+a[11]*n+a[15]*i,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);let t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,n,i,a=e.elements,o=a[0],s=a[4],l=a[8],u=a[1],c=a[5],h=a[9],d=a[2],p=a[6],f=a[10];if(Math.abs(s-u)<.01&&Math.abs(l-d)<.01&&Math.abs(h-p)<.01){if(Math.abs(s+u)<.1&&Math.abs(l+d)<.1&&Math.abs(h+p)<.1&&Math.abs(o+c+f-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;let e=(o+1)/2,a=(c+1)/2,m=(f+1)/2,g=(s+u)/4,v=(l+d)/4,y=(h+p)/4;return e>a&&e>m?e<.01?(r=0,n=.707106781,i=.707106781):(r=Math.sqrt(e),n=g/r,i=v/r):a>m?a<.01?(r=.707106781,n=0,i=.707106781):(n=Math.sqrt(a),r=g/n,i=y/n):m<.01?(r=.707106781,n=.707106781,i=0):(i=Math.sqrt(m),r=v/i,n=y/i),this.set(r,n,i,t),this}let m=Math.sqrt((p-h)*(p-h)+(l-d)*(l-d)+(u-s)*(u-s));return Math.abs(m)<.001&&(m=1),this.x=(p-h)/m,this.y=(l-d)/m,this.z=(u-s)/m,this.w=Math.acos((o+c+f-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){let r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,r){return void 0!==r&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}};Ue.prototype.isVector4=!0;var je=class extends ae{constructor(e,t,r={}){super(),this.width=e,this.height=t,this.depth=1,this.scissor=new Ue(0,0,e,t),this.scissorTest=!1,this.viewport=new Ue(0,0,e,t);let n={width:e,height:t,depth:1};this.texture=new Fe(n,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==r.generateMipmaps&&r.generateMipmaps,this.texture.internalFormat=void 0!==r.internalFormat?r.internalFormat:null,this.texture.minFilter=void 0!==r.minFilter?r.minFilter:T,this.depthBuffer=void 0===r.depthBuffer||r.depthBuffer,this.stencilBuffer=void 0!==r.stencilBuffer&&r.stencilBuffer,this.depthTexture=void 0!==r.depthTexture?r.depthTexture:null,this.samples=void 0!==r.samples?r.samples:0}setSize(e,t,r=1){(this.width!==e||this.height!==t||this.depth!==r)&&(this.width=e,this.height=t,this.depth=r,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0,this.texture.image=Object.assign({},e.texture.image),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}};je.prototype.isWebGLRenderTarget=!0;var He=class extends Fe{constructor(e=null,t=1,r=1,n=1){super(null),this.image={data:e,width:t,height:r,depth:n},this.magFilter=C,this.minFilter=C,this.wrapR=M,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}};He.prototype.isDataArrayTexture=!0,class extends je{constructor(e,t,r){super(e,t),this.depth=r,this.texture=new He(null,e,t,r),this.texture.isRenderTargetTexture=!0}}.prototype.isWebGLArrayRenderTarget=!0;var Ve=class extends Fe{constructor(e=null,t=1,r=1,n=1){super(null),this.image={data:e,width:t,height:r,depth:n},this.magFilter=C,this.minFilter=C,this.wrapR=M,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}};Ve.prototype.isData3DTexture=!0,class extends je{constructor(e,t,r){super(e,t),this.depth=r,this.texture=new Ve(null,e,t,r),this.texture.isRenderTargetTexture=!0}}.prototype.isWebGL3DRenderTarget=!0,class extends je{constructor(e,t,r,n={}){super(e,t,n);let i=this.texture;this.texture=[];for(let e=0;e<r;e++)this.texture[e]=i.clone(),this.texture[e].isRenderTargetTexture=!0}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let n=0,i=this.texture.length;n<i;n++)this.texture[n].image.width=e,this.texture[n].image.height=t,this.texture[n].image.depth=r;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this.texture.length=0;for(let t=0,r=e.texture.length;t<r;t++)this.texture[t]=e.texture[t].clone();return this}}.prototype.isWebGLMultipleRenderTargets=!0;var Ge=class{constructor(e=0,t=0,r=0,n=1){this._x=e,this._y=t,this._z=r,this._w=n}static slerp(e,t,r,n){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),r.slerpQuaternions(e,t,n)}static slerpFlat(e,t,r,n,i,a,o){let s=r[n+0],l=r[n+1],u=r[n+2],c=r[n+3],h=i[a+0],d=i[a+1],p=i[a+2],f=i[a+3];if(0===o)return e[t+0]=s,e[t+1]=l,e[t+2]=u,void(e[t+3]=c);if(1===o)return e[t+0]=h,e[t+1]=d,e[t+2]=p,void(e[t+3]=f);if(c!==f||s!==h||l!==d||u!==p){let e=1-o,t=s*h+l*d+u*p+c*f,r=t>=0?1:-1,n=1-t*t;if(n>Number.EPSILON){let i=Math.sqrt(n),a=Math.atan2(i,t*r);e=Math.sin(e*a)/i,o=Math.sin(o*a)/i}let i=o*r;if(s=s*e+h*i,l=l*e+d*i,u=u*e+p*i,c=c*e+f*i,e===1-o){let e=1/Math.sqrt(s*s+l*l+u*u+c*c);s*=e,l*=e,u*=e,c*=e}}e[t]=s,e[t+1]=l,e[t+2]=u,e[t+3]=c}static multiplyQuaternionsFlat(e,t,r,n,i,a){let o=r[n],s=r[n+1],l=r[n+2],u=r[n+3],c=i[a],h=i[a+1],d=i[a+2],p=i[a+3];return e[t]=o*p+u*c+s*d-l*h,e[t+1]=s*p+u*h+l*c-o*d,e[t+2]=l*p+u*d+o*h-s*c,e[t+3]=u*p-o*c-s*h-l*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,n){return this._x=e,this._y=t,this._z=r,this._w=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");let r=e._x,n=e._y,i=e._z,a=e._order,o=Math.cos,s=Math.sin,l=o(r/2),u=o(n/2),c=o(i/2),h=s(r/2),d=s(n/2),p=s(i/2);switch(a){case"XYZ":this._x=h*u*c+l*d*p,this._y=l*d*c-h*u*p,this._z=l*u*p+h*d*c,this._w=l*u*c-h*d*p;break;case"YXZ":this._x=h*u*c+l*d*p,this._y=l*d*c-h*u*p,this._z=l*u*p-h*d*c,this._w=l*u*c+h*d*p;break;case"ZXY":this._x=h*u*c-l*d*p,this._y=l*d*c+h*u*p,this._z=l*u*p+h*d*c,this._w=l*u*c-h*d*p;break;case"ZYX":this._x=h*u*c-l*d*p,this._y=l*d*c+h*u*p,this._z=l*u*p-h*d*c,this._w=l*u*c+h*d*p;break;case"YZX":this._x=h*u*c+l*d*p,this._y=l*d*c+h*u*p,this._z=l*u*p-h*d*c,this._w=l*u*c-h*d*p;break;case"XZY":this._x=h*u*c-l*d*p,this._y=l*d*c-h*u*p,this._z=l*u*p+h*d*c,this._w=l*u*c+h*d*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){let r=t/2,n=Math.sin(r);return this._x=e.x*n,this._y=e.y*n,this._z=e.z*n,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){let t=e.elements,r=t[0],n=t[4],i=t[8],a=t[1],o=t[5],s=t[9],l=t[2],u=t[6],c=t[10],h=r+o+c;if(h>0){let e=.5/Math.sqrt(h+1);this._w=.25/e,this._x=(u-s)*e,this._y=(i-l)*e,this._z=(a-n)*e}else if(r>o&&r>c){let e=2*Math.sqrt(1+r-o-c);this._w=(u-s)/e,this._x=.25*e,this._y=(n+a)/e,this._z=(i+l)/e}else if(o>c){let e=2*Math.sqrt(1+o-r-c);this._w=(i-l)/e,this._x=(n+a)/e,this._y=.25*e,this._z=(s+u)/e}else{let e=2*Math.sqrt(1+c-r-o);this._w=(a-n)/e,this._x=(i+l)/e,this._y=(s+u)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(he(this.dot(e),-1,1)))}rotateTowards(e,t){let r=this.angleTo(e);if(0===r)return this;let n=Math.min(1,t/r);return this.slerp(e,n),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){let r=e._x,n=e._y,i=e._z,a=e._w,o=t._x,s=t._y,l=t._z,u=t._w;return this._x=r*u+a*o+n*l-i*s,this._y=n*u+a*s+i*o-r*l,this._z=i*u+a*l+r*s-n*o,this._w=a*u-r*o-n*s-i*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);let r=this._x,n=this._y,i=this._z,a=this._w,o=a*e._w+r*e._x+n*e._y+i*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=r,this._y=n,this._z=i,this;let s=1-o*o;if(s<=Number.EPSILON){let e=1-t;return this._w=e*a+t*this._w,this._x=e*r+t*this._x,this._y=e*n+t*this._y,this._z=e*i+t*this._z,this.normalize(),this._onChangeCallback(),this}let l=Math.sqrt(s),u=Math.atan2(l,o),c=Math.sin((1-t)*u)/l,h=Math.sin(t*u)/l;return this._w=a*c+this._w*h,this._x=r*c+this._x*h,this._y=n*c+this._y*h,this._z=i*c+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){let e=Math.random(),t=Math.sqrt(1-e),r=Math.sqrt(e),n=2*Math.PI*Math.random(),i=2*Math.PI*Math.random();return this.set(t*Math.cos(n),r*Math.sin(i),r*Math.cos(i),t*Math.sin(n))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}};Ge.prototype.isQuaternion=!0;var We=class{constructor(e=0,t=0,r=0){this.x=e,this.y=t,this.z=r}set(e,t,r){return void 0===r&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Ye.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Ye.setFromAxisAngle(e,t))}applyMatrix3(e){let t=this.x,r=this.y,n=this.z,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6]*n,this.y=i[1]*t+i[4]*r+i[7]*n,this.z=i[2]*t+i[5]*r+i[8]*n,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){let t=this.x,r=this.y,n=this.z,i=e.elements,a=1/(i[3]*t+i[7]*r+i[11]*n+i[15]);return this.x=(i[0]*t+i[4]*r+i[8]*n+i[12])*a,this.y=(i[1]*t+i[5]*r+i[9]*n+i[13])*a,this.z=(i[2]*t+i[6]*r+i[10]*n+i[14])*a,this}applyQuaternion(e){let t=this.x,r=this.y,n=this.z,i=e.x,a=e.y,o=e.z,s=e.w,l=s*t+a*n-o*r,u=s*r+o*t-i*n,c=s*n+i*r-a*t,h=-i*t-a*r-o*n;return this.x=l*s+h*-i+u*-o-c*-a,this.y=u*s+h*-a+c*-i-l*-o,this.z=c*s+h*-o+l*-a-u*-i,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){let t=this.x,r=this.y,n=this.z,i=e.elements;return this.x=i[0]*t+i[4]*r+i[8]*n,this.y=i[1]*t+i[5]*r+i[9]*n,this.z=i[2]*t+i[6]*r+i[10]*n,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){let r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){let r=e.x,n=e.y,i=e.z,a=t.x,o=t.y,s=t.z;return this.x=n*s-i*o,this.y=i*a-r*s,this.z=r*o-n*a,this}projectOnVector(e){let t=e.lengthSq();if(0===t)return this.set(0,0,0);let r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return qe.copy(this).projectOnVector(e),this.sub(qe)}reflect(e){return this.sub(qe.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;let r=this.dot(e)/t;return Math.acos(he(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,r=this.y-e.y,n=this.z-e.z;return t*t+r*r+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){let n=Math.sin(t)*e;return this.x=n*Math.sin(r),this.y=Math.cos(t)*e,this.z=n*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){let t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),n=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=n,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,r){return void 0!==r&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(t),this.y=r*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}};We.prototype.isVector3=!0;var qe=new We,Ye=new Ge,Xe=class{constructor(e=new We(1/0,1/0,1/0),t=new We(-1/0,-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,r=1/0,n=1/0,i=-1/0,a=-1/0,o=-1/0;for(let s=0,l=e.length;s<l;s+=3){let l=e[s],u=e[s+1],c=e[s+2];l<t&&(t=l),u<r&&(r=u),c<n&&(n=c),l>i&&(i=l),u>a&&(a=u),c>o&&(o=c)}return this.min.set(t,r,n),this.max.set(i,a,o),this}setFromBufferAttribute(e){let t=1/0,r=1/0,n=1/0,i=-1/0,a=-1/0,o=-1/0;for(let s=0,l=e.count;s<l;s++){let l=e.getX(s),u=e.getY(s),c=e.getZ(s);l<t&&(t=l),u<r&&(r=u),c<n&&(n=c),l>i&&(i=l),u>a&&(a=u),c>o&&(o=c)}return this.min.set(t,r,n),this.max.set(i,a,o),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let r=Je.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);let r=e.geometry;if(void 0!==r)if(t&&null!=r.attributes&&void 0!==r.attributes.position){let t=r.attributes.position;for(let r=0,n=t.count;r<n;r++)Je.fromBufferAttribute(t,r).applyMatrix4(e.matrixWorld),this.expandByPoint(Je)}else null===r.boundingBox&&r.computeBoundingBox(),Ze.copy(r.boundingBox),Ze.applyMatrix4(e.matrixWorld),this.union(Ze);let n=e.children;for(let e=0,r=n.length;e<r;e++)this.expandByObject(n[e],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Je),Je.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(it),at.subVectors(this.max,it),Ke.subVectors(e.a,it),$e.subVectors(e.b,it),et.subVectors(e.c,it),tt.subVectors($e,Ke),rt.subVectors(et,$e),nt.subVectors(Ke,et);let t=[0,-tt.z,tt.y,0,-rt.z,rt.y,0,-nt.z,nt.y,tt.z,0,-tt.x,rt.z,0,-rt.x,nt.z,0,-nt.x,-tt.y,tt.x,0,-rt.y,rt.x,0,-nt.y,nt.x,0];return!(!lt(t,Ke,$e,et,at)||(t=[1,0,0,0,1,0,0,0,1],!lt(t,Ke,$e,et,at)))&&(ot.crossVectors(tt,rt),t=[ot.x,ot.y,ot.z],lt(t,Ke,$e,et,at))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Je.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=.5*this.getSize(Je).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(Qe[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Qe[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Qe[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Qe[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Qe[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Qe[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Qe[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Qe[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Qe)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}};Xe.prototype.isBox3=!0;var Qe=[new We,new We,new We,new We,new We,new We,new We,new We],Je=new We,Ze=new Xe,Ke=new We,$e=new We,et=new We,tt=new We,rt=new We,nt=new We,it=new We,at=new We,ot=new We,st=new We;function lt(e,t,r,n,i){for(let a=0,o=e.length-3;a<=o;a+=3){st.fromArray(e,a);let o=i.x*Math.abs(st.x)+i.y*Math.abs(st.y)+i.z*Math.abs(st.z),s=t.dot(st),l=r.dot(st),u=n.dot(st);if(Math.max(-Math.max(s,l,u),Math.min(s,l,u))>o)return!1}return!0}var ut=new Xe,ct=new We,ht=new We,dt=new We,pt=class{constructor(e=new We,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){let r=this.center;void 0!==t?r.copy(t):ut.setFromPoints(e).getCenter(r);let n=0;for(let t=0,i=e.length;t<i;t++)n=Math.max(n,r.distanceToSquared(e[t]));return this.radius=Math.sqrt(n),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){let t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){let r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){dt.subVectors(e,this.center);let t=dt.lengthSq();if(t>this.radius*this.radius){let e=Math.sqrt(t),r=.5*(e-this.radius);this.center.add(dt.multiplyScalar(r/e)),this.radius+=r}return this}union(e){return!0===this.center.equals(e.center)?ht.set(0,0,1).multiplyScalar(e.radius):ht.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(ct.copy(e.center).add(ht)),this.expandByPoint(ct.copy(e.center).sub(ht)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}},ft=new We,mt=new We,gt=new We,vt=new We,yt=new We,xt=new We,bt=new We,wt=class{constructor(e=new We,t=new We(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,ft)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);let r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(r).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){let t=ft.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(ft.copy(this.direction).multiplyScalar(t).add(this.origin),ft.distanceToSquared(e))}distanceSqToSegment(e,t,r,n){mt.copy(e).add(t).multiplyScalar(.5),gt.copy(t).sub(e).normalize(),vt.copy(this.origin).sub(mt);let i,a,o,s,l=.5*e.distanceTo(t),u=-this.direction.dot(gt),c=vt.dot(this.direction),h=-vt.dot(gt),d=vt.lengthSq(),p=Math.abs(1-u*u);if(p>0)if(i=u*h-c,a=u*c-h,s=l*p,i>=0)if(a>=-s)if(a<=s){let e=1/p;i*=e,a*=e,o=i*(i+u*a+2*c)+a*(u*i+a+2*h)+d}else a=l,i=Math.max(0,-(u*a+c)),o=-i*i+a*(a+2*h)+d;else a=-l,i=Math.max(0,-(u*a+c)),o=-i*i+a*(a+2*h)+d;else a<=-s?(i=Math.max(0,-(-u*l+c)),a=i>0?-l:Math.min(Math.max(-l,-h),l),o=-i*i+a*(a+2*h)+d):a<=s?(i=0,a=Math.min(Math.max(-l,-h),l),o=a*(a+2*h)+d):(i=Math.max(0,-(u*l+c)),a=i>0?l:Math.min(Math.max(-l,-h),l),o=-i*i+a*(a+2*h)+d);else a=u>0?-l:l,i=Math.max(0,-(u*a+c)),o=-i*i+a*(a+2*h)+d;return r&&r.copy(this.direction).multiplyScalar(i).add(this.origin),n&&n.copy(gt).multiplyScalar(a).add(mt),o}intersectSphere(e,t){ft.subVectors(e.center,this.origin);let r=ft.dot(this.direction),n=ft.dot(ft)-r*r,i=e.radius*e.radius;if(n>i)return null;let a=Math.sqrt(i-n),o=r-a,s=r+a;return o<0&&s<0?null:o<0?this.at(s,t):this.at(o,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){let t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;let r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){let r=this.distanceToPlane(e);return null===r?null:this.at(r,t)}intersectsPlane(e){let t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,n,i,a,o,s,l=1/this.direction.x,u=1/this.direction.y,c=1/this.direction.z,h=this.origin;return l>=0?(r=(e.min.x-h.x)*l,n=(e.max.x-h.x)*l):(r=(e.max.x-h.x)*l,n=(e.min.x-h.x)*l),u>=0?(i=(e.min.y-h.y)*u,a=(e.max.y-h.y)*u):(i=(e.max.y-h.y)*u,a=(e.min.y-h.y)*u),r>a||i>n||((i>r||r!=r)&&(r=i),(a<n||n!=n)&&(n=a),c>=0?(o=(e.min.z-h.z)*c,s=(e.max.z-h.z)*c):(o=(e.max.z-h.z)*c,s=(e.min.z-h.z)*c),r>s||o>n)||((o>r||r!=r)&&(r=o),(s<n||n!=n)&&(n=s),n<0)?null:this.at(r>=0?r:n,t)}intersectsBox(e){return null!==this.intersectBox(e,ft)}intersectTriangle(e,t,r,n,i){yt.subVectors(t,e),xt.subVectors(r,e),bt.crossVectors(yt,xt);let a,o=this.direction.dot(bt);if(o>0){if(n)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}vt.subVectors(this.origin,e);let s=a*this.direction.dot(xt.crossVectors(vt,xt));if(s<0)return null;let l=a*this.direction.dot(yt.cross(vt));if(l<0||s+l>o)return null;let u=-a*vt.dot(bt);return u<0?null:this.at(u/o,i)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}},St=class{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,t,r,n,i,a,o,s,l,u,c,h,d,p,f,m){let g=this.elements;return g[0]=e,g[4]=t,g[8]=r,g[12]=n,g[1]=i,g[5]=a,g[9]=o,g[13]=s,g[2]=l,g[6]=u,g[10]=c,g[14]=h,g[3]=d,g[7]=p,g[11]=f,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new St).fromArray(this.elements)}copy(e){let t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){let t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){let t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){let t=this.elements,r=e.elements,n=1/_t.setFromMatrixColumn(e,0).length(),i=1/_t.setFromMatrixColumn(e,1).length(),a=1/_t.setFromMatrixColumn(e,2).length();return t[0]=r[0]*n,t[1]=r[1]*n,t[2]=r[2]*n,t[3]=0,t[4]=r[4]*i,t[5]=r[5]*i,t[6]=r[6]*i,t[7]=0,t[8]=r[8]*a,t[9]=r[9]*a,t[10]=r[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");let t=this.elements,r=e.x,n=e.y,i=e.z,a=Math.cos(r),o=Math.sin(r),s=Math.cos(n),l=Math.sin(n),u=Math.cos(i),c=Math.sin(i);if("XYZ"===e.order){let e=a*u,r=a*c,n=o*u,i=o*c;t[0]=s*u,t[4]=-s*c,t[8]=l,t[1]=r+n*l,t[5]=e-i*l,t[9]=-o*s,t[2]=i-e*l,t[6]=n+r*l,t[10]=a*s}else if("YXZ"===e.order){let e=s*u,r=s*c,n=l*u,i=l*c;t[0]=e+i*o,t[4]=n*o-r,t[8]=a*l,t[1]=a*c,t[5]=a*u,t[9]=-o,t[2]=r*o-n,t[6]=i+e*o,t[10]=a*s}else if("ZXY"===e.order){let e=s*u,r=s*c,n=l*u,i=l*c;t[0]=e-i*o,t[4]=-a*c,t[8]=n+r*o,t[1]=r+n*o,t[5]=a*u,t[9]=i-e*o,t[2]=-a*l,t[6]=o,t[10]=a*s}else if("ZYX"===e.order){let e=a*u,r=a*c,n=o*u,i=o*c;t[0]=s*u,t[4]=n*l-r,t[8]=e*l+i,t[1]=s*c,t[5]=i*l+e,t[9]=r*l-n,t[2]=-l,t[6]=o*s,t[10]=a*s}else if("YZX"===e.order){let e=a*s,r=a*l,n=o*s,i=o*l;t[0]=s*u,t[4]=i-e*c,t[8]=n*c+r,t[1]=c,t[5]=a*u,t[9]=-o*u,t[2]=-l*u,t[6]=r*c+n,t[10]=e-i*c}else if("XZY"===e.order){let e=a*s,r=a*l,n=o*s,i=o*l;t[0]=s*u,t[4]=-c,t[8]=l*u,t[1]=e*c+i,t[5]=a*u,t[9]=r*c-n,t[2]=n*c-r,t[6]=o*u,t[10]=i*c+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Mt,e,Et)}lookAt(e,t,r){let n=this.elements;return Dt.subVectors(e,t),0===Dt.lengthSq()&&(Dt.z=1),Dt.normalize(),Ct.crossVectors(r,Dt),0===Ct.lengthSq()&&(1===Math.abs(r.z)?Dt.x+=1e-4:Dt.z+=1e-4,Dt.normalize(),Ct.crossVectors(r,Dt)),Ct.normalize(),Tt.crossVectors(Dt,Ct),n[0]=Ct.x,n[4]=Tt.x,n[8]=Dt.x,n[1]=Ct.y,n[5]=Tt.y,n[9]=Dt.y,n[2]=Ct.z,n[6]=Tt.z,n[10]=Dt.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let r=e.elements,n=t.elements,i=this.elements,a=r[0],o=r[4],s=r[8],l=r[12],u=r[1],c=r[5],h=r[9],d=r[13],p=r[2],f=r[6],m=r[10],g=r[14],v=r[3],y=r[7],x=r[11],b=r[15],w=n[0],S=n[4],_=n[8],A=n[12],M=n[1],E=n[5],C=n[9],T=n[13],D=n[2],L=n[6],P=n[10],R=n[14],O=n[3],k=n[7],I=n[11],B=n[15];return i[0]=a*w+o*M+s*D+l*O,i[4]=a*S+o*E+s*L+l*k,i[8]=a*_+o*C+s*P+l*I,i[12]=a*A+o*T+s*R+l*B,i[1]=u*w+c*M+h*D+d*O,i[5]=u*S+c*E+h*L+d*k,i[9]=u*_+c*C+h*P+d*I,i[13]=u*A+c*T+h*R+d*B,i[2]=p*w+f*M+m*D+g*O,i[6]=p*S+f*E+m*L+g*k,i[10]=p*_+f*C+m*P+g*I,i[14]=p*A+f*T+m*R+g*B,i[3]=v*w+y*M+x*D+b*O,i[7]=v*S+y*E+x*L+b*k,i[11]=v*_+y*C+x*P+b*I,i[15]=v*A+y*T+x*R+b*B,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){let e=this.elements,t=e[0],r=e[4],n=e[8],i=e[12],a=e[1],o=e[5],s=e[9],l=e[13],u=e[2],c=e[6],h=e[10],d=e[14];return e[3]*(+i*s*c-n*l*c-i*o*h+r*l*h+n*o*d-r*s*d)+e[7]*(+t*s*d-t*l*h+i*a*h-n*a*d+n*l*u-i*s*u)+e[11]*(+t*l*c-t*o*d-i*a*c+r*a*d+i*o*u-r*l*u)+e[15]*(-n*o*u-t*s*c+t*o*h+n*a*c-r*a*h+r*s*u)}transpose(){let e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(e,t,r){let n=this.elements;return e.isVector3?(n[12]=e.x,n[13]=e.y,n[14]=e.z):(n[12]=e,n[13]=t,n[14]=r),this}invert(){let e=this.elements,t=e[0],r=e[1],n=e[2],i=e[3],a=e[4],o=e[5],s=e[6],l=e[7],u=e[8],c=e[9],h=e[10],d=e[11],p=e[12],f=e[13],m=e[14],g=e[15],v=c*m*l-f*h*l+f*s*d-o*m*d-c*s*g+o*h*g,y=p*h*l-u*m*l-p*s*d+a*m*d+u*s*g-a*h*g,x=u*f*l-p*c*l+p*o*d-a*f*d-u*o*g+a*c*g,b=p*c*s-u*f*s-p*o*h+a*f*h+u*o*m-a*c*m,w=t*v+r*y+n*x+i*b;if(0===w)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let S=1/w;return e[0]=v*S,e[1]=(f*h*i-c*m*i-f*n*d+r*m*d+c*n*g-r*h*g)*S,e[2]=(o*m*i-f*s*i+f*n*l-r*m*l-o*n*g+r*s*g)*S,e[3]=(c*s*i-o*h*i-c*n*l+r*h*l+o*n*d-r*s*d)*S,e[4]=y*S,e[5]=(u*m*i-p*h*i+p*n*d-t*m*d-u*n*g+t*h*g)*S,e[6]=(p*s*i-a*m*i-p*n*l+t*m*l+a*n*g-t*s*g)*S,e[7]=(a*h*i-u*s*i+u*n*l-t*h*l-a*n*d+t*s*d)*S,e[8]=x*S,e[9]=(p*c*i-u*f*i-p*r*d+t*f*d+u*r*g-t*c*g)*S,e[10]=(a*f*i-p*o*i+p*r*l-t*f*l-a*r*g+t*o*g)*S,e[11]=(u*o*i-a*c*i-u*r*l+t*c*l+a*r*d-t*o*d)*S,e[12]=b*S,e[13]=(u*f*n-p*c*n+p*r*h-t*f*h-u*r*m+t*c*m)*S,e[14]=(p*o*n-a*f*n-p*r*s+t*f*s+a*r*m-t*o*m)*S,e[15]=(a*c*n-u*o*n+u*r*s-t*c*s-a*r*h+t*o*h)*S,this}scale(e){let t=this.elements,r=e.x,n=e.y,i=e.z;return t[0]*=r,t[4]*=n,t[8]*=i,t[1]*=r,t[5]*=n,t[9]*=i,t[2]*=r,t[6]*=n,t[10]*=i,t[3]*=r,t[7]*=n,t[11]*=i,this}getMaxScaleOnAxis(){let e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],n=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,n))}makeTranslation(e,t,r){return this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){let t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){let t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){let t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){let r=Math.cos(t),n=Math.sin(t),i=1-r,a=e.x,o=e.y,s=e.z,l=i*a,u=i*o;return this.set(l*a+r,l*o-n*s,l*s+n*o,0,l*o+n*s,u*o+r,u*s-n*a,0,l*s-n*o,u*s+n*a,i*s*s+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,n,i,a){return this.set(1,r,i,0,e,1,a,0,t,n,1,0,0,0,0,1),this}compose(e,t,r){let n=this.elements,i=t._x,a=t._y,o=t._z,s=t._w,l=i+i,u=a+a,c=o+o,h=i*l,d=i*u,p=i*c,f=a*u,m=a*c,g=o*c,v=s*l,y=s*u,x=s*c,b=r.x,w=r.y,S=r.z;return n[0]=(1-(f+g))*b,n[1]=(d+x)*b,n[2]=(p-y)*b,n[3]=0,n[4]=(d-x)*w,n[5]=(1-(h+g))*w,n[6]=(m+v)*w,n[7]=0,n[8]=(p+y)*S,n[9]=(m-v)*S,n[10]=(1-(h+f))*S,n[11]=0,n[12]=e.x,n[13]=e.y,n[14]=e.z,n[15]=1,this}decompose(e,t,r){let n=this.elements,i=_t.set(n[0],n[1],n[2]).length(),a=_t.set(n[4],n[5],n[6]).length(),o=_t.set(n[8],n[9],n[10]).length();this.determinant()<0&&(i=-i),e.x=n[12],e.y=n[13],e.z=n[14],At.copy(this);let s=1/i,l=1/a,u=1/o;return At.elements[0]*=s,At.elements[1]*=s,At.elements[2]*=s,At.elements[4]*=l,At.elements[5]*=l,At.elements[6]*=l,At.elements[8]*=u,At.elements[9]*=u,At.elements[10]*=u,t.setFromRotationMatrix(At),r.x=i,r.y=a,r.z=o,this}makePerspective(e,t,r,n,i,a){void 0===a&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");let o=this.elements,s=2*i/(t-e),l=2*i/(r-n),u=(t+e)/(t-e),c=(r+n)/(r-n),h=-(a+i)/(a-i),d=-2*a*i/(a-i);return o[0]=s,o[4]=0,o[8]=u,o[12]=0,o[1]=0,o[5]=l,o[9]=c,o[13]=0,o[2]=0,o[6]=0,o[10]=h,o[14]=d,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}makeOrthographic(e,t,r,n,i,a){let o=this.elements,s=1/(t-e),l=1/(r-n),u=1/(a-i),c=(t+e)*s,h=(r+n)*l,d=(a+i)*u;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-c,o[1]=0,o[5]=2*l,o[9]=0,o[13]=-h,o[2]=0,o[6]=0,o[10]=-2*u,o[14]=-d,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}equals(e){let t=this.elements,r=e.elements;for(let e=0;e<16;e++)if(t[e]!==r[e])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){let r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}};St.prototype.isMatrix4=!0;var _t=new We,At=new St,Mt=new We(0,0,0),Et=new We(1,1,1),Ct=new We,Tt=new We,Dt=new We,Lt=new St,Pt=new Ge,Rt=class{constructor(e=0,t=0,r=0,n=Rt.DefaultOrder){this._x=e,this._y=t,this._z=r,this._order=n}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,n=this._order){return this._x=e,this._y=t,this._z=r,this._order=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){let n=e.elements,i=n[0],a=n[4],o=n[8],s=n[1],l=n[5],u=n[9],c=n[2],h=n[6],d=n[10];switch(t){case"XYZ":this._y=Math.asin(he(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-u,d),this._z=Math.atan2(-a,i)):(this._x=Math.atan2(h,l),this._z=0);break;case"YXZ":this._x=Math.asin(-he(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(o,d),this._z=Math.atan2(s,l)):(this._y=Math.atan2(-c,i),this._z=0);break;case"ZXY":this._x=Math.asin(he(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-c,d),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(s,i));break;case"ZYX":this._y=Math.asin(-he(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(h,d),this._z=Math.atan2(s,i)):(this._x=0,this._z=Math.atan2(-a,l));break;case"YZX":this._z=Math.asin(he(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-u,l),this._y=Math.atan2(-c,i)):(this._x=0,this._y=Math.atan2(o,d));break;case"XZY":this._z=Math.asin(-he(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(h,l),this._y=Math.atan2(o,i)):(this._x=Math.atan2(-u,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===r&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return Lt.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Lt,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return Pt.setFromEuler(this),this.setFromQuaternion(Pt,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}};Rt.prototype.isEuler=!0,Rt.DefaultOrder="XYZ",Rt.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];var Ot=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}},kt=0,It=new We,Bt=new Ge,zt=new St,Nt=new We,Ft=new We,Ut=new We,jt=new Ge,Ht=new We(1,0,0),Vt=new We(0,1,0),Gt=new We(0,0,1),Wt={type:"added"},qt={type:"removed"},Yt=class extends ae{constructor(){super(),Object.defineProperty(this,"id",{value:kt++}),this.uuid=ce(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Yt.DefaultUp.clone();let e=new We,t=new Rt,r=new Ge,n=new We(1,1,1);t._onChange((function(){r.setFromEuler(t,!1)})),r._onChange((function(){t.setFromQuaternion(r,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:n},modelViewMatrix:{value:new St},normalMatrix:{value:new ye}}),this.matrix=new St,this.matrixWorld=new St,this.matrixAutoUpdate=Yt.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Ot,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Bt.setFromAxisAngle(e,t),this.quaternion.multiply(Bt),this}rotateOnWorldAxis(e,t){return Bt.setFromAxisAngle(e,t),this.quaternion.premultiply(Bt),this}rotateX(e){return this.rotateOnAxis(Ht,e)}rotateY(e){return this.rotateOnAxis(Vt,e)}rotateZ(e){return this.rotateOnAxis(Gt,e)}translateOnAxis(e,t){return It.copy(e).applyQuaternion(this.quaternion),this.position.add(It.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(Ht,e)}translateY(e){return this.translateOnAxis(Vt,e)}translateZ(e){return this.translateOnAxis(Gt,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(zt.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?Nt.copy(e):Nt.set(e,t,r);let n=this.parent;this.updateWorldMatrix(!0,!1),Ft.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?zt.lookAt(Ft,Nt,this.up):zt.lookAt(Nt,Ft,this.up),this.quaternion.setFromRotationMatrix(zt),n&&(zt.extractRotation(n.matrixWorld),Bt.setFromRotationMatrix(zt),this.quaternion.premultiply(Bt.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Wt)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}let t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(qt)),this}removeFromParent(){let e=this.parent;return null!==e&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){let t=this.children[e];t.parent=null,t.dispatchEvent(qt)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),zt.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),zt.multiply(e.parent.matrixWorld)),e.applyMatrix4(zt),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,n=this.children.length;r<n;r++){let n=this.children[r].getObjectByProperty(e,t);if(void 0!==n)return n}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ft,e,Ut),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ft,jt,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);let t=this.children;for(let r=0,n=t.length;r<n;r++)t[r].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);let t=this.children;for(let r=0,n=t.length;r<n;r++)t[r].traverseVisible(e)}traverseAncestors(e){let t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);let t=this.children;for(let r=0,n=t.length;r<n;r++)t[r].updateMatrixWorld(e)}updateWorldMatrix(e,t){let r=this.parent;if(!0===e&&null!==r&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){let e=this.children;for(let t=0,r=e.length;t<r;t++)e[t].updateWorldMatrix(!1,!0)}}toJSON(e){let t=void 0===e||"string"==typeof e,r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});let n={};function i(t,r){return void 0===t[r.uuid]&&(t[r.uuid]=r.toJSON(e)),r.uuid}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),!0===this.castShadow&&(n.castShadow=!0),!0===this.receiveShadow&&(n.receiveShadow=!0),!1===this.visible&&(n.visible=!1),!1===this.frustumCulled&&(n.frustumCulled=!1),0!==this.renderOrder&&(n.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),n.layers=this.layers.mask,n.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(n.matrixAutoUpdate=!1),this.isInstancedMesh&&(n.type="InstancedMesh",n.count=this.count,n.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(n.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?n.background=this.background.toJSON():this.background.isTexture&&(n.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(n.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){n.geometry=i(e.geometries,this.geometry);let t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){let r=t.shapes;if(Array.isArray(r))for(let t=0,n=r.length;t<n;t++){let n=r[t];i(e.shapes,n)}else i(e.shapes,r)}}if(this.isSkinnedMesh&&(n.bindMode=this.bindMode,n.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(e.skeletons,this.skeleton),n.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){let t=[];for(let r=0,n=this.material.length;r<n;r++)t.push(i(e.materials,this.material[r]));n.material=t}else n.material=i(e.materials,this.material);if(this.children.length>0){n.children=[];for(let t=0;t<this.children.length;t++)n.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){n.animations=[];for(let t=0;t<this.animations.length;t++){let r=this.animations[t];n.animations.push(i(e.animations,r))}}if(t){let t=a(e.geometries),n=a(e.materials),i=a(e.textures),o=a(e.images),s=a(e.shapes),l=a(e.skeletons),u=a(e.animations),c=a(e.nodes);t.length>0&&(r.geometries=t),n.length>0&&(r.materials=n),i.length>0&&(r.textures=i),o.length>0&&(r.images=o),s.length>0&&(r.shapes=s),l.length>0&&(r.skeletons=l),u.length>0&&(r.animations=u),c.length>0&&(r.nodes=c)}return r.object=n,r;function a(e){let t=[];for(let r in e){let n=e[r];delete n.metadata,t.push(n)}return t}}clone(e){return(new this.constructor).copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let t=0;t<e.children.length;t++){let r=e.children[t];this.add(r.clone())}return this}};Yt.DefaultUp=new We(0,1,0),Yt.DefaultMatrixAutoUpdate=!0,Yt.prototype.isObject3D=!0;var Xt=new We,Qt=new We,Jt=new We,Zt=new We,Kt=new We,$t=new We,er=new We,tr=new We,rr=new We,nr=new We,ir=class{constructor(e=new We,t=new We,r=new We){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,n){n.subVectors(r,t),Xt.subVectors(e,t),n.cross(Xt);let i=n.lengthSq();return i>0?n.multiplyScalar(1/Math.sqrt(i)):n.set(0,0,0)}static getBarycoord(e,t,r,n,i){Xt.subVectors(n,t),Qt.subVectors(r,t),Jt.subVectors(e,t);let a=Xt.dot(Xt),o=Xt.dot(Qt),s=Xt.dot(Jt),l=Qt.dot(Qt),u=Qt.dot(Jt),c=a*l-o*o;if(0===c)return i.set(-2,-1,-1);let h=1/c,d=(l*s-o*u)*h,p=(a*u-o*s)*h;return i.set(1-d-p,p,d)}static containsPoint(e,t,r,n){return this.getBarycoord(e,t,r,n,Zt),Zt.x>=0&&Zt.y>=0&&Zt.x+Zt.y<=1}static getUV(e,t,r,n,i,a,o,s){return this.getBarycoord(e,t,r,n,Zt),s.set(0,0),s.addScaledVector(i,Zt.x),s.addScaledVector(a,Zt.y),s.addScaledVector(o,Zt.z),s}static isFrontFacing(e,t,r,n){return Xt.subVectors(r,t),Qt.subVectors(e,t),Xt.cross(Qt).dot(n)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,n){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[n]),this}setFromAttributeAndIndices(e,t,r,n){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,n),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Xt.subVectors(this.c,this.b),Qt.subVectors(this.a,this.b),.5*Xt.cross(Qt).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return ir.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return ir.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,r,n,i){return ir.getUV(e,this.a,this.b,this.c,t,r,n,i)}containsPoint(e){return ir.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return ir.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){let r,n,i=this.a,a=this.b,o=this.c;Kt.subVectors(a,i),$t.subVectors(o,i),tr.subVectors(e,i);let s=Kt.dot(tr),l=$t.dot(tr);if(s<=0&&l<=0)return t.copy(i);rr.subVectors(e,a);let u=Kt.dot(rr),c=$t.dot(rr);if(u>=0&&c<=u)return t.copy(a);let h=s*c-u*l;if(h<=0&&s>=0&&u<=0)return r=s/(s-u),t.copy(i).addScaledVector(Kt,r);nr.subVectors(e,o);let d=Kt.dot(nr),p=$t.dot(nr);if(p>=0&&d<=p)return t.copy(o);let f=d*l-s*p;if(f<=0&&l>=0&&p<=0)return n=l/(l-p),t.copy(i).addScaledVector($t,n);let m=u*p-d*c;if(m<=0&&c-u>=0&&d-p>=0)return er.subVectors(o,a),n=(c-u)/(c-u+(d-p)),t.copy(a).addScaledVector(er,n);let g=1/(m+f+h);return r=f*g,n=h*g,t.copy(i).addScaledVector(Kt,r).addScaledVector($t,n)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},ar=0,or=class extends ae{constructor(){super(),Object.defineProperty(this,"id",{value:ar++}),this.uuid=ce(),this.name="",this.type="Material",this.fog=!0,this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=b,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=ee,this.stencilZFail=ee,this.stencilZPass=ee,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(let t in e){let r=e[t];if(void 0===r){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if("shading"===t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===r;continue}let n=this[t];void 0!==n?n&&n.isColor?n.set(r):n&&n.isVector3&&r&&r.isVector3?n.copy(r):this[t]=r:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}}toJSON(e){let t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});let r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function n(e){let t=[];for(let r in e){let n=e[r];delete n.metadata,t.push(n)}return t}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),void 0!==this.roughness&&(r.roughness=this.roughness),void 0!==this.metalness&&(r.metalness=this.metalness),void 0!==this.sheen&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(r.shininess=this.shininess),void 0!==this.clearcoat&&(r.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(r.combine=this.combine)),void 0!==this.envMapIntensity&&(r.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(r.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&(r.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(r.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(r.size=this.size),null!==this.shadowSide&&(r.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(r.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(r.blending=this.blending),0!==this.side&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),!0===this.transparent&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(r.rotation=this.rotation),!0===this.polygonOffset&&(r.polygonOffset=!0),0!==this.polygonOffsetFactor&&(r.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(r.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(r.linewidth=this.linewidth),void 0!==this.dashSize&&(r.dashSize=this.dashSize),void 0!==this.gapSize&&(r.gapSize=this.gapSize),void 0!==this.scale&&(r.scale=this.scale),!0===this.dithering&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(r.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(r.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(r.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(r.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(r.flatShading=this.flatShading),!1===this.visible&&(r.visible=!1),!1===this.toneMapped&&(r.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),t){let t=n(e.textures),i=n(e.images);t.length>0&&(r.textures=t),i.length>0&&(r.images=i)}return r}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;let t=e.clippingPlanes,r=null;if(null!==t){let e=t.length;r=new Array(e);for(let n=0;n!==e;++n)r[n]=t[n].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}};or.prototype.isMaterial=!0,or.fromType=function(){return null};var sr=class extends or{constructor(e){super(),this.type="MeshBasicMaterial",this.color=new Oe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}};sr.prototype.isMeshBasicMaterial=!0;var lr=new We,ur=new ve,cr=class{constructor(e,t,r){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===r,this.usage=te,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let n=0,i=this.itemSize;n<i;n++)this.array[e+n]=t.array[r+n];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){let t=this.array,r=0;for(let n=0,i=e.length;n<i;n++){let i=e[n];void 0===i&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",n),i=new Oe),t[r++]=i.r,t[r++]=i.g,t[r++]=i.b}return this}copyVector2sArray(e){let t=this.array,r=0;for(let n=0,i=e.length;n<i;n++){let i=e[n];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",n),i=new ve),t[r++]=i.x,t[r++]=i.y}return this}copyVector3sArray(e){let t=this.array,r=0;for(let n=0,i=e.length;n<i;n++){let i=e[n];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",n),i=new We),t[r++]=i.x,t[r++]=i.y,t[r++]=i.z}return this}copyVector4sArray(e){let t=this.array,r=0;for(let n=0,i=e.length;n<i;n++){let i=e[n];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",n),i=new Ue),t[r++]=i.x,t[r++]=i.y,t[r++]=i.z,t[r++]=i.w}return this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,r=this.count;t<r;t++)ur.fromBufferAttribute(this,t),ur.applyMatrix3(e),this.setXY(t,ur.x,ur.y);else if(3===this.itemSize)for(let t=0,r=this.count;t<r;t++)lr.fromBufferAttribute(this,t),lr.applyMatrix3(e),this.setXYZ(t,lr.x,lr.y,lr.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)lr.fromBufferAttribute(this,t),lr.applyMatrix4(e),this.setXYZ(t,lr.x,lr.y,lr.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)lr.fromBufferAttribute(this,t),lr.applyNormalMatrix(e),this.setXYZ(t,lr.x,lr.y,lr.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)lr.fromBufferAttribute(this,t),lr.transformDirection(e),this.setXYZ(t,lr.x,lr.y,lr.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=n,this}setXYZW(e,t,r,n,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=n,this.array[e+3]=i,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==te&&(e.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(e.updateRange=this.updateRange),e}};cr.prototype.isBufferAttribute=!0;var hr=class extends cr{constructor(e,t,r){super(new Uint16Array(e),t,r)}},dr=class extends cr{constructor(e,t,r){super(new Uint32Array(e),t,r)}};(class extends cr{constructor(e,t,r){super(new Uint16Array(e),t,r)}}).prototype.isFloat16BufferAttribute=!0;var pr=class extends cr{constructor(e,t,r){super(new Float32Array(e),t,r)}},fr=0,mr=new St,gr=new Yt,vr=new We,yr=new Xe,xr=new Xe,br=new We,wr=class extends ae{constructor(){super(),Object.defineProperty(this,"id",{value:fr++}),this.uuid=ce(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(xe(e)?dr:hr)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){let t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);let r=this.attributes.normal;if(void 0!==r){let t=(new ye).getNormalMatrix(e);r.applyNormalMatrix(t),r.needsUpdate=!0}let n=this.attributes.tangent;return void 0!==n&&(n.transformDirection(e),n.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return mr.makeRotationFromQuaternion(e),this.applyMatrix4(mr),this}rotateX(e){return mr.makeRotationX(e),this.applyMatrix4(mr),this}rotateY(e){return mr.makeRotationY(e),this.applyMatrix4(mr),this}rotateZ(e){return mr.makeRotationZ(e),this.applyMatrix4(mr),this}translate(e,t,r){return mr.makeTranslation(e,t,r),this.applyMatrix4(mr),this}scale(e,t,r){return mr.makeScale(e,t,r),this.applyMatrix4(mr),this}lookAt(e){return gr.lookAt(e),gr.updateMatrix(),this.applyMatrix4(gr.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(vr).negate(),this.translate(vr.x,vr.y,vr.z),this}setFromPoints(e){let t=[];for(let r=0,n=e.length;r<n;r++){let n=e[r];t.push(n.x,n.y,n.z||0)}return this.setAttribute("position",new pr(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Xe);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new We(-1/0,-1/0,-1/0),new We(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let e=0,r=t.length;e<r;e++){let r=t[e];yr.setFromBufferAttribute(r),this.morphTargetsRelative?(br.addVectors(this.boundingBox.min,yr.min),this.boundingBox.expandByPoint(br),br.addVectors(this.boundingBox.max,yr.max),this.boundingBox.expandByPoint(br)):(this.boundingBox.expandByPoint(yr.min),this.boundingBox.expandByPoint(yr.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new pt);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new We,1/0);if(e){let r=this.boundingSphere.center;if(yr.setFromBufferAttribute(e),t)for(let e=0,r=t.length;e<r;e++){let r=t[e];xr.setFromBufferAttribute(r),this.morphTargetsRelative?(br.addVectors(yr.min,xr.min),yr.expandByPoint(br),br.addVectors(yr.max,xr.max),yr.expandByPoint(br)):(yr.expandByPoint(xr.min),yr.expandByPoint(xr.max))}yr.getCenter(r);let n=0;for(let t=0,i=e.count;t<i;t++)br.fromBufferAttribute(e,t),n=Math.max(n,r.distanceToSquared(br));if(t)for(let i=0,a=t.length;i<a;i++){let a=t[i],o=this.morphTargetsRelative;for(let t=0,i=a.count;t<i;t++)br.fromBufferAttribute(a,t),o&&(vr.fromBufferAttribute(e,t),br.add(vr)),n=Math.max(n,r.distanceToSquared(br))}this.boundingSphere.radius=Math.sqrt(n),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");let r=e.array,n=t.position.array,i=t.normal.array,a=t.uv.array,o=n.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new cr(new Float32Array(4*o),4));let s=this.getAttribute("tangent").array,l=[],u=[];for(let e=0;e<o;e++)l[e]=new We,u[e]=new We;let c=new We,h=new We,d=new We,p=new ve,f=new ve,m=new ve,g=new We,v=new We;function y(e,t,r){c.fromArray(n,3*e),h.fromArray(n,3*t),d.fromArray(n,3*r),p.fromArray(a,2*e),f.fromArray(a,2*t),m.fromArray(a,2*r),h.sub(c),d.sub(c),f.sub(p),m.sub(p);let i=1/(f.x*m.y-m.x*f.y);!isFinite(i)||(g.copy(h).multiplyScalar(m.y).addScaledVector(d,-f.y).multiplyScalar(i),v.copy(d).multiplyScalar(f.x).addScaledVector(h,-m.x).multiplyScalar(i),l[e].add(g),l[t].add(g),l[r].add(g),u[e].add(v),u[t].add(v),u[r].add(v))}let x=this.groups;0===x.length&&(x=[{start:0,count:r.length}]);for(let e=0,t=x.length;e<t;++e){let t=x[e],n=t.start;for(let e=n,i=n+t.count;e<i;e+=3)y(r[e+0],r[e+1],r[e+2])}let b=new We,w=new We,S=new We,_=new We;function A(e){S.fromArray(i,3*e),_.copy(S);let t=l[e];b.copy(t),b.sub(S.multiplyScalar(S.dot(t))).normalize(),w.crossVectors(_,t);let r=w.dot(u[e])<0?-1:1;s[4*e]=b.x,s[4*e+1]=b.y,s[4*e+2]=b.z,s[4*e+3]=r}for(let e=0,t=x.length;e<t;++e){let t=x[e],n=t.start;for(let e=n,i=n+t.count;e<i;e+=3)A(r[e+0]),A(r[e+1]),A(r[e+2])}}computeVertexNormals(){let e=this.index,t=this.getAttribute("position");if(void 0!==t){let r=this.getAttribute("normal");if(void 0===r)r=new cr(new Float32Array(3*t.count),3),this.setAttribute("normal",r);else for(let e=0,t=r.count;e<t;e++)r.setXYZ(e,0,0,0);let n=new We,i=new We,a=new We,o=new We,s=new We,l=new We,u=new We,c=new We;if(e)for(let h=0,d=e.count;h<d;h+=3){let d=e.getX(h+0),p=e.getX(h+1),f=e.getX(h+2);n.fromBufferAttribute(t,d),i.fromBufferAttribute(t,p),a.fromBufferAttribute(t,f),u.subVectors(a,i),c.subVectors(n,i),u.cross(c),o.fromBufferAttribute(r,d),s.fromBufferAttribute(r,p),l.fromBufferAttribute(r,f),o.add(u),s.add(u),l.add(u),r.setXYZ(d,o.x,o.y,o.z),r.setXYZ(p,s.x,s.y,s.z),r.setXYZ(f,l.x,l.y,l.z)}else for(let e=0,o=t.count;e<o;e+=3)n.fromBufferAttribute(t,e+0),i.fromBufferAttribute(t,e+1),a.fromBufferAttribute(t,e+2),u.subVectors(a,i),c.subVectors(n,i),u.cross(c),r.setXYZ(e+0,u.x,u.y,u.z),r.setXYZ(e+1,u.x,u.y,u.z),r.setXYZ(e+2,u.x,u.y,u.z);this.normalizeNormals(),r.needsUpdate=!0}}merge(e,t){if(!e||!e.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));let r=this.attributes;for(let n in r){if(void 0===e.attributes[n])continue;let i=r[n].array,a=e.attributes[n],o=a.array,s=a.itemSize*t,l=Math.min(o.length,i.length-s);for(let e=0,t=s;e<l;e++,t++)i[t]=o[e]}return this}normalizeNormals(){let e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)br.fromBufferAttribute(e,t),br.normalize(),e.setXYZ(t,br.x,br.y,br.z)}toNonIndexed(){function e(e,t){let r=e.array,n=e.itemSize,i=e.normalized,a=new r.constructor(t.length*n),o=0,s=0;for(let i=0,l=t.length;i<l;i++){o=e.isInterleavedBufferAttribute?t[i]*e.data.stride+e.offset:t[i]*n;for(let e=0;e<n;e++)a[s++]=r[o++]}return new cr(a,n,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let t=new wr,r=this.index.array,n=this.attributes;for(let i in n){let a=e(n[i],r);t.setAttribute(i,a)}let i=this.morphAttributes;for(let n in i){let a=[],o=i[n];for(let t=0,n=o.length;t<n;t++){let n=e(o[t],r);a.push(n)}t.morphAttributes[n]=a}t.morphTargetsRelative=this.morphTargetsRelative;let a=this.groups;for(let e=0,r=a.length;e<r;e++){let r=a[e];t.addGroup(r.start,r.count,r.materialIndex)}return t}toJSON(){let e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){let t=this.parameters;for(let r in t)void 0!==t[r]&&(e[r]=t[r]);return e}e.data={attributes:{}};let t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});let r=this.attributes;for(let t in r){let n=r[t];e.data.attributes[t]=n.toJSON(e.data)}let n={},i=!1;for(let t in this.morphAttributes){let r=this.morphAttributes[t],a=[];for(let t=0,n=r.length;t<n;t++){let n=r[t];a.push(n.toJSON(e.data))}a.length>0&&(n[t]=a,i=!0)}i&&(e.data.morphAttributes=n,e.data.morphTargetsRelative=this.morphTargetsRelative);let a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));let o=this.boundingSphere;return null!==o&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let t={};this.name=e.name;let r=e.index;null!==r&&this.setIndex(r.clone(t));let n=e.attributes;for(let e in n){let r=n[e];this.setAttribute(e,r.clone(t))}let i=e.morphAttributes;for(let e in i){let r=[],n=i[e];for(let e=0,i=n.length;e<i;e++)r.push(n[e].clone(t));this.morphAttributes[e]=r}this.morphTargetsRelative=e.morphTargetsRelative;let a=e.groups;for(let e=0,t=a.length;e<t;e++){let t=a[e];this.addGroup(t.start,t.count,t.materialIndex)}let o=e.boundingBox;null!==o&&(this.boundingBox=o.clone());let s=e.boundingSphere;return null!==s&&(this.boundingSphere=s.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}};wr.prototype.isBufferGeometry=!0;var Sr=new St,_r=new wt,Ar=new pt,Mr=new We,Er=new We,Cr=new We,Tr=new We,Dr=new We,Lr=new We,Pr=new We,Rr=new We,Or=new We,kr=new ve,Ir=new ve,Br=new ve,zr=new We,Nr=new We,Fr=class extends Yt{constructor(e=new wr,t=new sr){super(),this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){let e=this.geometry;if(e.isBufferGeometry){let t=e.morphAttributes,r=Object.keys(t);if(r.length>0){let e=t[r[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,r=e.length;t<r;t++){let r=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[r]=t}}}}else{let t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(e,t){let r,n=this.geometry,i=this.material,a=this.matrixWorld;if(void 0!==i&&(null===n.boundingSphere&&n.computeBoundingSphere(),Ar.copy(n.boundingSphere),Ar.applyMatrix4(a),!1!==e.ray.intersectsSphere(Ar))&&(Sr.copy(a).invert(),_r.copy(e.ray).applyMatrix4(Sr),null===n.boundingBox||!1!==_r.intersectsBox(n.boundingBox)))if(n.isBufferGeometry){let a=n.index,o=n.attributes.position,s=n.morphAttributes.position,l=n.morphTargetsRelative,u=n.attributes.uv,c=n.attributes.uv2,h=n.groups,d=n.drawRange;if(null!==a)if(Array.isArray(i))for(let n=0,p=h.length;n<p;n++){let p=h[n],f=i[p.materialIndex];for(let n=Math.max(p.start,d.start),i=Math.min(a.count,Math.min(p.start+p.count,d.start+d.count));n<i;n+=3){let i=a.getX(n),h=a.getX(n+1),d=a.getX(n+2);r=Ur(this,f,e,_r,o,s,l,u,c,i,h,d),r&&(r.faceIndex=Math.floor(n/3),r.face.materialIndex=p.materialIndex,t.push(r))}}else for(let n=Math.max(0,d.start),h=Math.min(a.count,d.start+d.count);n<h;n+=3){let h=a.getX(n),d=a.getX(n+1),p=a.getX(n+2);r=Ur(this,i,e,_r,o,s,l,u,c,h,d,p),r&&(r.faceIndex=Math.floor(n/3),t.push(r))}else if(void 0!==o)if(Array.isArray(i))for(let n=0,a=h.length;n<a;n++){let a=h[n],p=i[a.materialIndex];for(let n=Math.max(a.start,d.start),i=Math.min(o.count,Math.min(a.start+a.count,d.start+d.count));n<i;n+=3)r=Ur(this,p,e,_r,o,s,l,u,c,n,n+1,n+2),r&&(r.faceIndex=Math.floor(n/3),r.face.materialIndex=a.materialIndex,t.push(r))}else for(let n=Math.max(0,d.start),a=Math.min(o.count,d.start+d.count);n<a;n+=3)r=Ur(this,i,e,_r,o,s,l,u,c,n,n+1,n+2),r&&(r.faceIndex=Math.floor(n/3),t.push(r))}else n.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}};function Ur(e,t,r,n,i,a,o,s,l,u,c,h){Mr.fromBufferAttribute(i,u),Er.fromBufferAttribute(i,c),Cr.fromBufferAttribute(i,h);let d=e.morphTargetInfluences;if(a&&d){Pr.set(0,0,0),Rr.set(0,0,0),Or.set(0,0,0);for(let e=0,t=a.length;e<t;e++){let t=d[e],r=a[e];0!==t&&(Tr.fromBufferAttribute(r,u),Dr.fromBufferAttribute(r,c),Lr.fromBufferAttribute(r,h),o?(Pr.addScaledVector(Tr,t),Rr.addScaledVector(Dr,t),Or.addScaledVector(Lr,t)):(Pr.addScaledVector(Tr.sub(Mr),t),Rr.addScaledVector(Dr.sub(Er),t),Or.addScaledVector(Lr.sub(Cr),t)))}Mr.add(Pr),Er.add(Rr),Cr.add(Or)}e.isSkinnedMesh&&(e.boneTransform(u,Mr),e.boneTransform(c,Er),e.boneTransform(h,Cr));let p=function(e,t,r,n,i,a,o,s){let l;if(l=1===t.side?n.intersectTriangle(o,a,i,!0,s):n.intersectTriangle(i,a,o,2!==t.side,s),null===l)return null;Nr.copy(s),Nr.applyMatrix4(e.matrixWorld);let u=r.ray.origin.distanceTo(Nr);return u<r.near||u>r.far?null:{distance:u,point:Nr.clone(),object:e}}(e,t,r,n,Mr,Er,Cr,zr);if(p){s&&(kr.fromBufferAttribute(s,u),Ir.fromBufferAttribute(s,c),Br.fromBufferAttribute(s,h),p.uv=ir.getUV(zr,Mr,Er,Cr,kr,Ir,Br,new ve)),l&&(kr.fromBufferAttribute(l,u),Ir.fromBufferAttribute(l,c),Br.fromBufferAttribute(l,h),p.uv2=ir.getUV(zr,Mr,Er,Cr,kr,Ir,Br,new ve));let e={a:u,b:c,c:h,normal:new We,materialIndex:0};ir.getNormal(Mr,Er,Cr,e.normal),p.face=e}return p}Fr.prototype.isMesh=!0;var jr=class extends wr{constructor(e=1,t=1,r=1,n=1,i=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:n,heightSegments:i,depthSegments:a};let o=this;n=Math.floor(n),i=Math.floor(i),a=Math.floor(a);let s=[],l=[],u=[],c=[],h=0,d=0;function p(e,t,r,n,i,a,p,f,m,g,v){let y=a/m,x=p/g,b=a/2,w=p/2,S=f/2,_=m+1,A=g+1,M=0,E=0,C=new We;for(let a=0;a<A;a++){let o=a*x-w;for(let s=0;s<_;s++){let h=s*y-b;C[e]=h*n,C[t]=o*i,C[r]=S,l.push(C.x,C.y,C.z),C[e]=0,C[t]=0,C[r]=f>0?1:-1,u.push(C.x,C.y,C.z),c.push(s/m),c.push(1-a/g),M+=1}}for(let e=0;e<g;e++)for(let t=0;t<m;t++){let r=h+t+_*e,n=h+t+_*(e+1),i=h+(t+1)+_*(e+1),a=h+(t+1)+_*e;s.push(r,n,a),s.push(n,i,a),E+=6}o.addGroup(d,E,v),d+=E,h+=M}p("z","y","x",-1,-1,r,t,e,a,i,0),p("z","y","x",1,-1,r,t,-e,a,i,1),p("x","z","y",1,1,e,r,t,n,a,2),p("x","z","y",1,-1,e,r,-t,n,a,3),p("x","y","z",1,-1,e,t,r,n,i,4),p("x","y","z",-1,-1,e,t,-r,n,i,5),this.setIndex(s),this.setAttribute("position",new pr(l,3)),this.setAttribute("normal",new pr(u,3)),this.setAttribute("uv",new pr(c,2))}static fromJSON(e){return new jr(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}};function Hr(e){let t={};for(let r in e){t[r]={};for(let n in e[r]){let i=e[r][n];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?t[r][n]=i.clone():Array.isArray(i)?t[r][n]=i.slice():t[r][n]=i}}return t}function Vr(e){let t={};for(let r=0;r<e.length;r++){let n=Hr(e[r]);for(let e in n)t[e]=n[e]}return t}var Gr={clone:Hr,merge:Vr},Wr=class extends or{constructor(e){super(),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Hr(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){let t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(let r in this.uniforms){let n=this.uniforms[r].value;n&&n.isTexture?t.uniforms[r]={type:"t",value:n.toJSON(e).uuid}:n&&n.isColor?t.uniforms[r]={type:"c",value:n.getHex()}:n&&n.isVector2?t.uniforms[r]={type:"v2",value:n.toArray()}:n&&n.isVector3?t.uniforms[r]={type:"v3",value:n.toArray()}:n&&n.isVector4?t.uniforms[r]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?t.uniforms[r]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?t.uniforms[r]={type:"m4",value:n.toArray()}:t.uniforms[r]={value:n}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;let r={};for(let e in this.extensions)!0===this.extensions[e]&&(r[e]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}};Wr.prototype.isShaderMaterial=!0;var qr=class extends Yt{constructor(){super(),this.type="Camera",this.matrixWorldInverse=new St,this.projectionMatrix=new St,this.projectionMatrixInverse=new St}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}};qr.prototype.isCamera=!0;var Yr=class extends qr{constructor(e=50,t=1,r=.1,n=2e3){super(),this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=n,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){let t=.5*this.getFilmHeight()/e;this.fov=2*ue*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){let e=Math.tan(.5*le*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*ue*Math.atan(Math.tan(.5*le*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,r,n,i,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=n,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=this.near,t=e*Math.tan(.5*le*this.fov)/this.zoom,r=2*t,n=this.aspect*r,i=-.5*n,a=this.view;if(null!==this.view&&this.view.enabled){let e=a.fullWidth,o=a.fullHeight;i+=a.offsetX*n/e,t-=a.offsetY*r/o,n*=a.width/e,r*=a.height/o}let o=this.filmOffset;0!==o&&(i+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+n,t,t-r,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}};Yr.prototype.isPerspectiveCamera=!0;var Xr=90,Qr=class extends Yt{constructor(e,t,r){if(super(),this.type="CubeCamera",!0!==r.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=r;let n=new Yr(Xr,1,e,t);n.layers=this.layers,n.up.set(0,-1,0),n.lookAt(new We(1,0,0)),this.add(n);let i=new Yr(Xr,1,e,t);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new We(-1,0,0)),this.add(i);let a=new Yr(Xr,1,e,t);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(new We(0,1,0)),this.add(a);let o=new Yr(Xr,1,e,t);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(new We(0,-1,0)),this.add(o);let s=new Yr(Xr,1,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new We(0,0,1)),this.add(s);let l=new Yr(Xr,1,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new We(0,0,-1)),this.add(l)}update(e,t){null===this.parent&&this.updateMatrixWorld();let r=this.renderTarget,[n,i,a,o,s,l]=this.children,u=e.getRenderTarget(),c=e.outputEncoding,h=e.toneMapping,d=e.xr.enabled;e.outputEncoding=Q,e.toneMapping=0,e.xr.enabled=!1;let p=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(t,n),e.setRenderTarget(r,1),e.render(t,i),e.setRenderTarget(r,2),e.render(t,a),e.setRenderTarget(r,3),e.render(t,o),e.setRenderTarget(r,4),e.render(t,s),r.texture.generateMipmaps=p,e.setRenderTarget(r,5),e.render(t,l),e.setRenderTarget(u),e.outputEncoding=c,e.toneMapping=h,e.xr.enabled=d,r.texture.needsPMREMUpdate=!0}},Jr=class extends Fe{constructor(e,t,r,n,i,a,o,s,l,u){super(e=void 0!==e?e:[],t=void 0!==t?t:w,r,n,i,a,o,s,l,u),this.flipY=!1}get images(){return this.image}set images(e){this.image=e}};Jr.prototype.isCubeTexture=!0;var Zr=class extends je{constructor(e,t={}){super(e,e,t);let r={width:e,height:e,depth:1},n=[r,r,r,r,r,r];this.texture=new Jr(n,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:T}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;let r={tEquirect:{value:null}},n="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",a=new jr(5,5,5),o=new Wr({name:"CubemapFromEquirect",uniforms:Hr(r),vertexShader:n,fragmentShader:i,side:1,blending:0});o.uniforms.tEquirect.value=t;let s=new Fr(a,o),l=t.minFilter;return t.minFilter===D&&(t.minFilter=T),new Qr(1,10,this).update(e,s),t.minFilter=l,s.geometry.dispose(),s.material.dispose(),this}clear(e,t,r,n){let i=e.getRenderTarget();for(let i=0;i<6;i++)e.setRenderTarget(this,i),e.clear(t,r,n);e.setRenderTarget(i)}};Zr.prototype.isWebGLCubeRenderTarget=!0;var Kr=new We,$r=new We,en=new ye,tn=class{constructor(e=new We(1,0,0),t=0){this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,n){return this.normal.set(e,t,r),this.constant=n,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){let n=Kr.subVectors(r,t).cross($r.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(n,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){let e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){let r=e.delta(Kr),n=this.normal.dot(r);if(0===n)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;let i=-(e.start.dot(this.normal)+this.constant)/n;return i<0||i>1?null:t.copy(r).multiplyScalar(i).add(e.start)}intersectsLine(e){let t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){let r=t||en.getNormalMatrix(e),n=this.coplanarPoint(Kr).applyMatrix4(e),i=this.normal.applyMatrix3(r).normalize();return this.constant=-n.dot(i),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}};tn.prototype.isPlane=!0;var rn=new pt,nn=new We,an=class{constructor(e=new tn,t=new tn,r=new tn,n=new tn,i=new tn,a=new tn){this.planes=[e,t,r,n,i,a]}set(e,t,r,n,i,a){let o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(r),o[3].copy(n),o[4].copy(i),o[5].copy(a),this}copy(e){let t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e){let t=this.planes,r=e.elements,n=r[0],i=r[1],a=r[2],o=r[3],s=r[4],l=r[5],u=r[6],c=r[7],h=r[8],d=r[9],p=r[10],f=r[11],m=r[12],g=r[13],v=r[14],y=r[15];return t[0].setComponents(o-n,c-s,f-h,y-m).normalize(),t[1].setComponents(o+n,c+s,f+h,y+m).normalize(),t[2].setComponents(o+i,c+l,f+d,y+g).normalize(),t[3].setComponents(o-i,c-l,f-d,y-g).normalize(),t[4].setComponents(o-a,c-u,f-p,y-v).normalize(),t[5].setComponents(o+a,c+u,f+p,y+v).normalize(),this}intersectsObject(e){let t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),rn.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(rn)}intersectsSprite(e){return rn.center.set(0,0,0),rn.radius=.7071067811865476,rn.applyMatrix4(e.matrixWorld),this.intersectsSphere(rn)}intersectsSphere(e){let t=this.planes,r=e.center,n=-e.radius;for(let e=0;e<6;e++)if(t[e].distanceToPoint(r)<n)return!1;return!0}intersectsBox(e){let t=this.planes;for(let r=0;r<6;r++){let n=t[r];if(nn.x=n.normal.x>0?e.max.x:e.min.x,nn.y=n.normal.y>0?e.max.y:e.min.y,nn.z=n.normal.z>0?e.max.z:e.min.z,n.distanceToPoint(nn)<0)return!1}return!0}containsPoint(e){let t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}};function on(){let e=null,t=!1,r=null,n=null;function i(t,a){r(t,a),n=e.requestAnimationFrame(i)}return{start:function(){!0!==t&&null!==r&&(n=e.requestAnimationFrame(i),t=!0)},stop:function(){e.cancelAnimationFrame(n),t=!1},setAnimationLoop:function(e){r=e},setContext:function(t){e=t}}}function sn(e,t){let r=t.isWebGL2,n=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),n.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);let r=n.get(t);r&&(e.deleteBuffer(r.buffer),n.delete(t))},update:function(t,i){if(t.isGLBufferAttribute){let e=n.get(t);return void((!e||e.version<t.version)&&n.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version}))}t.isInterleavedBufferAttribute&&(t=t.data);let a=n.get(t);void 0===a?n.set(t,function(t,n){let i,a=t.array,o=t.usage,s=e.createBuffer();if(e.bindBuffer(n,s),e.bufferData(n,a,o),t.onUploadCallback(),a instanceof Float32Array)i=5126;else if(a instanceof Uint16Array)if(t.isFloat16BufferAttribute){if(!r)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");i=5131}else i=5123;else if(a instanceof Int16Array)i=5122;else if(a instanceof Uint32Array)i=5125;else if(a instanceof Int32Array)i=5124;else if(a instanceof Int8Array)i=5120;else if(a instanceof Uint8Array)i=5121;else{if(!(a instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+a);i=5121}return{buffer:s,type:i,bytesPerElement:a.BYTES_PER_ELEMENT,version:t.version}}(t,i)):a.version<t.version&&(function(t,n,i){let a=n.array,o=n.updateRange;e.bindBuffer(i,t),-1===o.count?e.bufferSubData(i,0,a):(r?e.bufferSubData(i,o.offset*a.BYTES_PER_ELEMENT,a,o.offset,o.count):e.bufferSubData(i,o.offset*a.BYTES_PER_ELEMENT,a.subarray(o.offset,o.offset+o.count)),o.count=-1)}(a.buffer,t,i),a.version=t.version)}}}var ln=class extends wr{constructor(e=1,t=1,r=1,n=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:n};let i=e/2,a=t/2,o=Math.floor(r),s=Math.floor(n),l=o+1,u=s+1,c=e/o,h=t/s,d=[],p=[],f=[],m=[];for(let e=0;e<u;e++){let t=e*h-a;for(let r=0;r<l;r++){let n=r*c-i;p.push(n,-t,0),f.push(0,0,1),m.push(r/o),m.push(1-e/s)}}for(let e=0;e<s;e++)for(let t=0;t<o;t++){let r=t+l*e,n=t+l*(e+1),i=t+1+l*(e+1),a=t+1+l*e;d.push(r,n,a),d.push(n,i,a)}this.setIndex(d),this.setAttribute("position",new pr(p,3)),this.setAttribute("normal",new pr(f,3)),this.setAttribute("uv",new pr(m,2))}static fromJSON(e){return new ln(e.width,e.height,e.widthSegments,e.heightSegments)}},un={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 ) + 0.5;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\tvec3 FssEss = specularColor * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tgl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );\n\t#endif\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},cn={common:{diffuse:{value:new Oe(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new ye},uv2Transform:{value:new ye},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new ve(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Oe(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Oe(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new ye}},sprite:{diffuse:{value:new Oe(16777215)},opacity:{value:1},center:{value:new ve(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new ye}}},hn={basic:{uniforms:Vr([cn.common,cn.specularmap,cn.envmap,cn.aomap,cn.lightmap,cn.fog]),vertexShader:un.meshbasic_vert,fragmentShader:un.meshbasic_frag},lambert:{uniforms:Vr([cn.common,cn.specularmap,cn.envmap,cn.aomap,cn.lightmap,cn.emissivemap,cn.fog,cn.lights,{emissive:{value:new Oe(0)}}]),vertexShader:un.meshlambert_vert,fragmentShader:un.meshlambert_frag},phong:{uniforms:Vr([cn.common,cn.specularmap,cn.envmap,cn.aomap,cn.lightmap,cn.emissivemap,cn.bumpmap,cn.normalmap,cn.displacementmap,cn.fog,cn.lights,{emissive:{value:new Oe(0)},specular:{value:new Oe(1118481)},shininess:{value:30}}]),vertexShader:un.meshphong_vert,fragmentShader:un.meshphong_frag},standard:{uniforms:Vr([cn.common,cn.envmap,cn.aomap,cn.lightmap,cn.emissivemap,cn.bumpmap,cn.normalmap,cn.displacementmap,cn.roughnessmap,cn.metalnessmap,cn.fog,cn.lights,{emissive:{value:new Oe(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:un.meshphysical_vert,fragmentShader:un.meshphysical_frag},toon:{uniforms:Vr([cn.common,cn.aomap,cn.lightmap,cn.emissivemap,cn.bumpmap,cn.normalmap,cn.displacementmap,cn.gradientmap,cn.fog,cn.lights,{emissive:{value:new Oe(0)}}]),vertexShader:un.meshtoon_vert,fragmentShader:un.meshtoon_frag},matcap:{uniforms:Vr([cn.common,cn.bumpmap,cn.normalmap,cn.displacementmap,cn.fog,{matcap:{value:null}}]),vertexShader:un.meshmatcap_vert,fragmentShader:un.meshmatcap_frag},points:{uniforms:Vr([cn.points,cn.fog]),vertexShader:un.points_vert,fragmentShader:un.points_frag},dashed:{uniforms:Vr([cn.common,cn.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:un.linedashed_vert,fragmentShader:un.linedashed_frag},depth:{uniforms:Vr([cn.common,cn.displacementmap]),vertexShader:un.depth_vert,fragmentShader:un.depth_frag},normal:{uniforms:Vr([cn.common,cn.bumpmap,cn.normalmap,cn.displacementmap,{opacity:{value:1}}]),vertexShader:un.meshnormal_vert,fragmentShader:un.meshnormal_frag},sprite:{uniforms:Vr([cn.sprite,cn.fog]),vertexShader:un.sprite_vert,fragmentShader:un.sprite_frag},background:{uniforms:{uvTransform:{value:new ye},t2D:{value:null}},vertexShader:un.background_vert,fragmentShader:un.background_frag},cube:{uniforms:Vr([cn.envmap,{opacity:{value:1}}]),vertexShader:un.cube_vert,fragmentShader:un.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:un.equirect_vert,fragmentShader:un.equirect_frag},distanceRGBA:{uniforms:Vr([cn.common,cn.displacementmap,{referencePosition:{value:new We},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:un.distanceRGBA_vert,fragmentShader:un.distanceRGBA_frag},shadow:{uniforms:Vr([cn.lights,cn.fog,{color:{value:new Oe(0)},opacity:{value:1}}]),vertexShader:un.shadow_vert,fragmentShader:un.shadow_frag}};function dn(e,t,r,n,i,a){let o,s,l=new Oe(0),u=!0===i?0:1,c=null,h=0,d=null;function p(e,t){r.buffers.color.setClear(e.r,e.g,e.b,t,a)}return{getClearColor:function(){return l},setClearColor:function(e,t=1){l.set(e),u=t,p(l,u)},getClearAlpha:function(){return u},setClearAlpha:function(e){u=e,p(l,u)},render:function(r,i){let a=!1,f=!0===i.isScene?i.background:null;f&&f.isTexture&&(f=t.get(f));let m=e.xr,g=m.getSession&&m.getSession();g&&"additive"===g.environmentBlendMode&&(f=null),null===f?p(l,u):f&&f.isColor&&(p(f,1),a=!0),(e.autoClear||a)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),f&&(f.isCubeTexture||f.mapping===_)?(void 0===s&&(s=new Fr(new jr(1,1,1),new Wr({name:"BackgroundCubeMaterial",uniforms:Hr(hn.cube.uniforms),vertexShader:hn.cube.vertexShader,fragmentShader:hn.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),s.geometry.deleteAttribute("normal"),s.geometry.deleteAttribute("uv"),s.onBeforeRender=function(e,t,r){this.matrixWorld.copyPosition(r.matrixWorld)},Object.defineProperty(s.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),n.update(s)),s.material.uniforms.envMap.value=f,s.material.uniforms.flipEnvMap.value=f.isCubeTexture&&!1===f.isRenderTargetTexture?-1:1,(c!==f||h!==f.version||d!==e.toneMapping)&&(s.material.needsUpdate=!0,c=f,h=f.version,d=e.toneMapping),r.unshift(s,s.geometry,s.material,0,0,null)):f&&f.isTexture&&(void 0===o&&(o=new Fr(new ln(2,2),new Wr({name:"BackgroundMaterial",uniforms:Hr(hn.background.uniforms),vertexShader:hn.background.vertexShader,fragmentShader:hn.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),o.geometry.deleteAttribute("normal"),Object.defineProperty(o.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(o)),o.material.uniforms.t2D.value=f,!0===f.matrixAutoUpdate&&f.updateMatrix(),o.material.uniforms.uvTransform.value.copy(f.matrix),(c!==f||h!==f.version||d!==e.toneMapping)&&(o.material.needsUpdate=!0,c=f,h=f.version,d=e.toneMapping),r.unshift(o,o.geometry,o.material,0,0,null))}}}function pn(e,t,r,n){let i=e.getParameter(34921),a=n.isWebGL2?null:t.get("OES_vertex_array_object"),o=n.isWebGL2||null!==a,s={},l=p(null),u=l,c=!1;function h(t){return n.isWebGL2?e.bindVertexArray(t):a.bindVertexArrayOES(t)}function d(t){return n.isWebGL2?e.deleteVertexArray(t):a.deleteVertexArrayOES(t)}function p(e){let t=[],r=[],n=[];for(let e=0;e<i;e++)t[e]=0,r[e]=0,n[e]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:r,attributeDivisors:n,object:e,attributes:{},index:null}}function f(){let e=u.newAttributes;for(let t=0,r=e.length;t<r;t++)e[t]=0}function m(e){g(e,0)}function g(r,i){let a=u.newAttributes,o=u.enabledAttributes,s=u.attributeDivisors;a[r]=1,0===o[r]&&(e.enableVertexAttribArray(r),o[r]=1),s[r]!==i&&((n.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](r,i),s[r]=i)}function v(){let t=u.newAttributes,r=u.enabledAttributes;for(let n=0,i=r.length;n<i;n++)r[n]!==t[n]&&(e.disableVertexAttribArray(n),r[n]=0)}function y(t,r,i,a,o,s){!0!==n.isWebGL2||5124!==i&&5125!==i?e.vertexAttribPointer(t,r,i,a,o,s):e.vertexAttribIPointer(t,r,i,o,s)}function x(){b(),c=!0,u!==l&&(u=l,h(u.object))}function b(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(i,l,d,x,b){let w=!1;if(o){let t=function(t,r,i){let o=!0===i.wireframe,l=s[t.id];void 0===l&&(l={},s[t.id]=l);let u=l[r.id];void 0===u&&(u={},l[r.id]=u);let c=u[o];return void 0===c&&(c=p(n.isWebGL2?e.createVertexArray():a.createVertexArrayOES()),u[o]=c),c}(x,d,l);u!==t&&(u=t,h(u.object)),w=function(e,t){let r=u.attributes,n=e.attributes,i=0;for(let e in n){let t=r[e],a=n[e];if(void 0===t||t.attribute!==a||t.data!==a.data)return!0;i++}return u.attributesNum!==i||u.index!==t}(x,b),w&&function(e,t){let r={},n=e.attributes,i=0;for(let e in n){let t=n[e],a={};a.attribute=t,t.data&&(a.data=t.data),r[e]=a,i++}u.attributes=r,u.attributesNum=i,u.index=t}(x,b)}else{let e=!0===l.wireframe;(u.geometry!==x.id||u.program!==d.id||u.wireframe!==e)&&(u.geometry=x.id,u.program=d.id,u.wireframe=e,w=!0)}!0===i.isInstancedMesh&&(w=!0),null!==b&&r.update(b,34963),(w||c)&&(c=!1,function(i,a,o,s){if(!1===n.isWebGL2&&(i.isInstancedMesh||s.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;f();let l=s.attributes,u=o.getAttributes(),c=a.defaultAttributeValues;for(let t in u){let n=u[t];if(n.location>=0){let a=l[t];if(void 0===a&&("instanceMatrix"===t&&i.instanceMatrix&&(a=i.instanceMatrix),"instanceColor"===t&&i.instanceColor&&(a=i.instanceColor)),void 0!==a){let t=a.normalized,o=a.itemSize,l=r.get(a);if(void 0===l)continue;let u=l.buffer,c=l.type,h=l.bytesPerElement;if(a.isInterleavedBufferAttribute){let r=a.data,l=r.stride,d=a.offset;if(r.isInstancedInterleavedBuffer){for(let e=0;e<n.locationSize;e++)g(n.location+e,r.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=r.meshPerAttribute*r.count)}else for(let e=0;e<n.locationSize;e++)m(n.location+e);e.bindBuffer(34962,u);for(let e=0;e<n.locationSize;e++)y(n.location+e,o/n.locationSize,c,t,l*h,(d+o/n.locationSize*e)*h)}else{if(a.isInstancedBufferAttribute){for(let e=0;e<n.locationSize;e++)g(n.location+e,a.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=a.meshPerAttribute*a.count)}else for(let e=0;e<n.locationSize;e++)m(n.location+e);e.bindBuffer(34962,u);for(let e=0;e<n.locationSize;e++)y(n.location+e,o/n.locationSize,c,t,o*h,o/n.locationSize*e*h)}}else if(void 0!==c){let r=c[t];if(void 0!==r)switch(r.length){case 2:e.vertexAttrib2fv(n.location,r);break;case 3:e.vertexAttrib3fv(n.location,r);break;case 4:e.vertexAttrib4fv(n.location,r);break;default:e.vertexAttrib1fv(n.location,r)}}}}v()}(i,l,d,x),null!==b&&e.bindBuffer(34963,r.get(b).buffer))},reset:x,resetDefaultState:b,dispose:function(){x();for(let e in s){let t=s[e];for(let e in t){let r=t[e];for(let e in r)d(r[e].object),delete r[e];delete t[e]}delete s[e]}},releaseStatesOfGeometry:function(e){if(void 0===s[e.id])return;let t=s[e.id];for(let e in t){let r=t[e];for(let e in r)d(r[e].object),delete r[e];delete t[e]}delete s[e.id]},releaseStatesOfProgram:function(e){for(let t in s){let r=s[t];if(void 0===r[e.id])continue;let n=r[e.id];for(let e in n)d(n[e].object),delete n[e];delete r[e.id]}},initAttributes:f,enableAttribute:m,disableUnusedAttributes:v}}function fn(e,t,r,n){let i,a=n.isWebGL2;this.setMode=function(e){i=e},this.render=function(t,n){e.drawArrays(i,t,n),r.update(n,i,1)},this.renderInstances=function(n,o,s){if(0===s)return;let l,u;if(a)l=e,u="drawArraysInstanced";else if(l=t.get("ANGLE_instanced_arrays"),u="drawArraysInstancedANGLE",null===l)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[u](i,n,o,s),r.update(o,i,s)}}function mn(e,t,r){let n;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}let a=typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&e instanceof WebGL2ComputeRenderingContext,o=void 0!==r.precision?r.precision:"highp",s=i(o);s!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",s,"instead."),o=s);let l=a||t.has("WEBGL_draw_buffers"),u=!0===r.logarithmicDepthBuffer,c=e.getParameter(34930),h=e.getParameter(35660),d=e.getParameter(3379),p=e.getParameter(34076),f=e.getParameter(34921),m=e.getParameter(36347),g=e.getParameter(36348),v=e.getParameter(36349),y=h>0,x=a||t.has("OES_texture_float");return{isWebGL2:a,drawBuffers:l,getMaxAnisotropy:function(){if(void 0!==n)return n;if(!0===t.has("EXT_texture_filter_anisotropic")){let r=t.get("EXT_texture_filter_anisotropic");n=e.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else n=0;return n},getMaxPrecision:i,precision:o,logarithmicDepthBuffer:u,maxTextures:c,maxVertexTextures:h,maxTextureSize:d,maxCubemapSize:p,maxAttributes:f,maxVertexUniforms:m,maxVaryings:g,maxFragmentUniforms:v,vertexTextures:y,floatFragmentTextures:x,floatVertexTextures:y&&x,maxSamples:a?e.getParameter(36183):0}}function gn(e){let t=this,r=null,n=0,i=!1,a=!1,o=new tn,s=new ye,l={value:null,needsUpdate:!1};function u(){l.value!==r&&(l.value=r,l.needsUpdate=n>0),t.numPlanes=n,t.numIntersection=0}function c(e,r,n,i){let a=null!==e?e.length:0,u=null;if(0!==a){if(u=l.value,!0!==i||null===u){let t=n+4*a,i=r.matrixWorldInverse;s.getNormalMatrix(i),(null===u||u.length<t)&&(u=new Float32Array(t));for(let t=0,r=n;t!==a;++t,r+=4)o.copy(e[t]).applyMatrix4(i,s),o.normal.toArray(u,r),u[r+3]=o.constant}l.value=u,l.needsUpdate=!0}return t.numPlanes=a,t.numIntersection=0,u}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t,a){let o=0!==e.length||t||0!==n||i;return i=t,r=c(e,a,0),n=e.length,o},this.beginShadows=function(){a=!0,c(null)},this.endShadows=function(){a=!1,u()},this.setState=function(t,o,s){let h=t.clippingPlanes,d=t.clipIntersection,p=t.clipShadows,f=e.get(t);if(!i||null===h||0===h.length||a&&!p)a?c(null):u();else{let e=a?0:n,t=4*e,i=f.clippingState||null;l.value=i,i=c(h,o,t,s);for(let e=0;e!==t;++e)i[e]=r[e];f.clippingState=i,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=e}}}function vn(e){let t=new WeakMap;function r(e,t){return 303===t?e.mapping=w:304===t&&(e.mapping=S),e}function n(e){let r=e.target;r.removeEventListener("dispose",n);let i=t.get(r);void 0!==i&&(t.delete(r),i.dispose())}return{get:function(i){if(i&&i.isTexture&&!1===i.isRenderTargetTexture){let a=i.mapping;if(303===a||304===a){if(t.has(i))return r(t.get(i).texture,i.mapping);{let a=i.image;if(a&&a.height>0){let o=new Zr(a.height/2);return o.fromEquirectangularTexture(e,i),t.set(i,o),i.addEventListener("dispose",n),r(o.texture,i.mapping)}return null}}}return i},dispose:function(){t=new WeakMap}}}hn.physical={uniforms:Vr([hn.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new ve(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenColor:{value:new Oe(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new ve},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Oe(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Oe(1,1,1)},specularColorMap:{value:null}}]),vertexShader:un.meshphysical_vert,fragmentShader:un.meshphysical_frag};var yn=class extends qr{constructor(e=-1,t=1,r=1,n=-1,i=.1,a=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=n,this.near=i,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,r,n,i,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=n,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,n=(this.top+this.bottom)/2,i=r-e,a=r+e,o=n+t,s=n-t;if(null!==this.view&&this.view.enabled){let e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=e*this.view.offsetX,a=i+e*this.view.width,o-=t*this.view.offsetY,s=o-t*this.view.height}this.projectionMatrix.makeOrthographic(i,a,o,s,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}};yn.prototype.isOrthographicCamera=!0;var xn=[.125,.215,.35,.446,.526,.582],bn=new yn,wn=new Oe,Sn=null,_n=(1+Math.sqrt(5))/2,An=1/_n,Mn=[new We(1,1,1),new We(-1,1,1),new We(1,1,-1),new We(-1,1,-1),new We(0,_n,An),new We(0,_n,-An),new We(An,0,_n),new We(-An,0,_n),new We(_n,An,0),new We(-_n,An,0)],En=class{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,n=100){Sn=this._renderer.getRenderTarget(),this._setSize(256);let i=this._allocateTargets();return i.depthBuffer=!0,this._sceneToCubeUV(e,r,n,i),t>0&&this._blur(i,0,0,t),this._applyPMREM(i),this._cleanup(i),i}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=Ln(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=Dn(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Sn),e.scissorTest=!1,Tn(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===w||e.mapping===S?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Sn=this._renderer.getRenderTarget();let r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){let e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize-32,r={magFilter:T,minFilter:T,generateMipmaps:!1,type:k,format:B,encoding:Q,depthBuffer:!1},n=Cn(e,t,r);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=Cn(e,t,r);let{_lodMax:n}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(e){let t=[],r=[],n=[],i=e,a=e-4+1+xn.length;for(let o=0;o<a;o++){let a=Math.pow(2,i);r.push(a);let s=1/a;o>e-4?s=xn[o-e+4-1]:0===o&&(s=0),n.push(s);let l=1/(a-1),u=-l/2,c=1+l/2,h=[u,u,c,u,c,c,u,u,c,c,u,c],d=6,p=6,f=3,m=2,g=1,v=new Float32Array(f*p*d),y=new Float32Array(m*p*d),x=new Float32Array(g*p*d);for(let e=0;e<d;e++){let t=e%3*2/3-1,r=e>2?0:-1,n=[t,r,0,t+2/3,r,0,t+2/3,r+1,0,t,r,0,t+2/3,r+1,0,t,r+1,0];v.set(n,f*p*e),y.set(h,m*p*e);let i=[e,e,e,e,e,e];x.set(i,g*p*e)}let b=new wr;b.setAttribute("position",new cr(v,f)),b.setAttribute("uv",new cr(y,m)),b.setAttribute("faceIndex",new cr(x,g)),t.push(b),i>4&&i--}return{lodPlanes:t,sizeLods:r,sigmas:n}}(n)),this._blurMaterial=function(e,t,r){let n=new Float32Array(20),i=new We(0,1,0);return new Wr({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/r,CUBEUV_MAX_MIP:`${e}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(n,e,t)}return n}_compileMaterial(e){let t=new Fr(this._lodPlanes[0],e);this._renderer.compile(t,bn)}_sceneToCubeUV(e,t,r,n){let i=new Yr(90,1,t,r),a=[1,-1,1,1,1,1],o=[1,1,1,-1,-1,-1],s=this._renderer,l=s.autoClear,u=s.toneMapping;s.getClearColor(wn),s.toneMapping=0,s.autoClear=!1;let c=new sr({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),h=new Fr(new jr,c),d=!1,p=e.background;p?p.isColor&&(c.color.copy(p),e.background=null,d=!0):(c.color.copy(wn),d=!0);for(let t=0;t<6;t++){let r=t%3;0===r?(i.up.set(0,a[t],0),i.lookAt(o[t],0,0)):1===r?(i.up.set(0,0,a[t]),i.lookAt(0,o[t],0)):(i.up.set(0,a[t],0),i.lookAt(0,0,o[t]));let l=this._cubeSize;Tn(n,r*l,t>2?l:0,l,l),s.setRenderTarget(n),d&&s.render(h,i),s.render(e,i)}h.geometry.dispose(),h.material.dispose(),s.toneMapping=u,s.autoClear=l,e.background=p}_textureToCubeUV(e,t){let r=this._renderer,n=e.mapping===w||e.mapping===S;n?(null===this._cubemapMaterial&&(this._cubemapMaterial=Ln()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=Dn());let i=n?this._cubemapMaterial:this._equirectMaterial,a=new Fr(this._lodPlanes[0],i);i.uniforms.envMap.value=e;let o=this._cubeSize;Tn(t,0,0,3*o,2*o),r.setRenderTarget(t),r.render(a,bn)}_applyPMREM(e){let t=this._renderer,r=t.autoClear;t.autoClear=!1;for(let t=1;t<this._lodPlanes.length;t++){let r=Math.sqrt(this._sigmas[t]*this._sigmas[t]-this._sigmas[t-1]*this._sigmas[t-1]),n=Mn[(t-1)%Mn.length];this._blur(e,t-1,t,r,n)}t.autoClear=r}_blur(e,t,r,n,i){let a=this._pingPongRenderTarget;this._halfBlur(e,a,t,r,n,"latitudinal",i),this._halfBlur(a,e,r,r,n,"longitudinal",i)}_halfBlur(e,t,r,n,i,a,o){let s=this._renderer,l=this._blurMaterial;"latitudinal"!==a&&"longitudinal"!==a&&console.error("blur direction must be either latitudinal or longitudinal!");let u=new Fr(this._lodPlanes[n],l),c=l.uniforms,h=this._sizeLods[r]-1,d=isFinite(i)?Math.PI/(2*h):2*Math.PI/39,p=i/d,f=isFinite(i)?1+Math.floor(3*p):20;f>20&&console.warn(`sigmaRadians, ${i}, is too large and will clip, as it requested ${f} samples when the maximum is set to 20`);let m=[],g=0;for(let e=0;e<20;++e){let t=e/p,r=Math.exp(-t*t/2);m.push(r),0===e?g+=r:e<f&&(g+=2*r)}for(let e=0;e<m.length;e++)m[e]=m[e]/g;c.envMap.value=e.texture,c.samples.value=f,c.weights.value=m,c.latitudinal.value="latitudinal"===a,o&&(c.poleAxis.value=o);let{_lodMax:v}=this;c.dTheta.value=d,c.mipInt.value=v-r;let y=this._sizeLods[n];Tn(t,3*y*(n>v-4?n-v+4:0),4*(this._cubeSize-y),3*y,2*y),s.setRenderTarget(t),s.render(u,bn)}};function Cn(e,t,r){let n=new je(e,t,r);return n.texture.mapping=_,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function Tn(e,t,r,n,i){e.viewport.set(t,r,n,i),e.scissor.set(t,r,n,i)}function Dn(){return new Wr({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Ln(){return new Wr({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Pn(e){let t=new WeakMap,r=null;function n(e){let r=e.target;r.removeEventListener("dispose",n);let i=t.get(r);void 0!==i&&(t.delete(r),i.dispose())}return{get:function(i){if(i&&i.isTexture){let a=i.mapping,o=303===a||304===a,s=a===w||a===S;if(o||s){if(i.isRenderTargetTexture&&!0===i.needsPMREMUpdate){i.needsPMREMUpdate=!1;let n=t.get(i);return null===r&&(r=new En(e)),n=o?r.fromEquirectangular(i,n):r.fromCubemap(i,n),t.set(i,n),n.texture}if(t.has(i))return t.get(i).texture;{let a=i.image;if(o&&a&&a.height>0||s&&a&&function(e){let t=0;for(let r=0;r<6;r++)void 0!==e[r]&&t++;return 6===t}(a)){null===r&&(r=new En(e));let a=o?r.fromEquirectangular(i):r.fromCubemap(i);return t.set(i,a),i.addEventListener("dispose",n),a.texture}return null}}}return i},dispose:function(){t=new WeakMap,null!==r&&(r.dispose(),r=null)}}}function Rn(e){let t={};function r(r){if(void 0!==t[r])return t[r];let n;switch(r){case"WEBGL_depth_texture":n=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:n=e.getExtension(r)}return t[r]=n,n}return{has:function(e){return null!==r(e)},init:function(e){e.isWebGL2?r("EXT_color_buffer_float"):(r("WEBGL_depth_texture"),r("OES_texture_float"),r("OES_texture_half_float"),r("OES_texture_half_float_linear"),r("OES_standard_derivatives"),r("OES_element_index_uint"),r("OES_vertex_array_object"),r("ANGLE_instanced_arrays")),r("OES_texture_float_linear"),r("EXT_color_buffer_half_float"),r("WEBGL_multisampled_render_to_texture")},get:function(e){let t=r(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function On(e,t,r,n){let i={},a=new WeakMap;function o(e){let s=e.target;null!==s.index&&t.remove(s.index);for(let e in s.attributes)t.remove(s.attributes[e]);s.removeEventListener("dispose",o),delete i[s.id];let l=a.get(s);l&&(t.remove(l),a.delete(s)),n.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,r.memory.geometries--}function s(e){let r=[],n=e.index,i=e.attributes.position,o=0;if(null!==n){let e=n.array;o=n.version;for(let t=0,n=e.length;t<n;t+=3){let n=e[t+0],i=e[t+1],a=e[t+2];r.push(n,i,i,a,a,n)}}else{let e=i.array;o=i.version;for(let t=0,n=e.length/3-1;t<n;t+=3){let e=t+0,n=t+1,i=t+2;r.push(e,n,n,i,i,e)}}let s=new(xe(r)?dr:hr)(r,1);s.version=o;let l=a.get(e);l&&t.remove(l),a.set(e,s)}return{get:function(e,t){return!0===i[t.id]||(t.addEventListener("dispose",o),i[t.id]=!0,r.memory.geometries++),t},update:function(e){let r=e.attributes;for(let e in r)t.update(r[e],34962);let n=e.morphAttributes;for(let e in n){let r=n[e];for(let e=0,n=r.length;e<n;e++)t.update(r[e],34962)}},getWireframeAttribute:function(e){let t=a.get(e);if(t){let r=e.index;null!==r&&t.version<r.version&&s(e)}else s(e);return a.get(e)}}}function kn(e,t,r,n){let i,a,o,s=n.isWebGL2;this.setMode=function(e){i=e},this.setIndex=function(e){a=e.type,o=e.bytesPerElement},this.render=function(t,n){e.drawElements(i,n,a,t*o),r.update(n,i,1)},this.renderInstances=function(n,l,u){if(0===u)return;let c,h;if(s)c=e,h="drawElementsInstanced";else if(c=t.get("ANGLE_instanced_arrays"),h="drawElementsInstancedANGLE",null===c)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[h](i,l,a,n*o,u),r.update(l,i,u)}}function In(e){let t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,r,n){switch(t.calls++,r){case 4:t.triangles+=n*(e/3);break;case 1:t.lines+=n*(e/2);break;case 3:t.lines+=n*(e-1);break;case 2:t.lines+=n*e;break;case 0:t.points+=n*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",r)}}}}function Bn(e,t){return e[0]-t[0]}function zn(e,t){return Math.abs(t[1])-Math.abs(e[1])}function Nn(e,t){let r=1,n=t.isInterleavedBufferAttribute?t.data.array:t.array;n instanceof Int8Array?r=127:n instanceof Int16Array?r=32767:n instanceof Int32Array?r=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",n),e.divideScalar(r)}function Fn(e,t,r){let n={},i=new Float32Array(8),a=new WeakMap,o=new Ue,s=[];for(let e=0;e<8;e++)s[e]=[e,0];return{update:function(l,u,c,h){let d=l.morphTargetInfluences;if(!0===t.isWebGL2){let n=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,i=void 0!==n?n.length:0,s=a.get(u);if(void 0===s||s.count!==i){let e=function(){v.dispose(),a.delete(u),u.removeEventListener("dispose",e)};void 0!==s&&s.texture.dispose();let r=void 0!==u.morphAttributes.position,n=void 0!==u.morphAttributes.normal,l=void 0!==u.morphAttributes.color,c=u.morphAttributes.position||[],h=u.morphAttributes.normal||[],d=u.morphAttributes.color||[],p=0;!0===r&&(p=1),!0===n&&(p=2),!0===l&&(p=3);let f=u.attributes.position.count*p,m=1;f>t.maxTextureSize&&(m=Math.ceil(f/t.maxTextureSize),f=t.maxTextureSize);let g=new Float32Array(f*m*4*i),v=new He(g,f,m,i);v.type=O,v.needsUpdate=!0;let y=4*p;for(let e=0;e<i;e++){let t=c[e],i=h[e],a=d[e],s=f*m*4*e;for(let e=0;e<t.count;e++){let u=e*y;!0===r&&(o.fromBufferAttribute(t,e),!0===t.normalized&&Nn(o,t),g[s+u+0]=o.x,g[s+u+1]=o.y,g[s+u+2]=o.z,g[s+u+3]=0),!0===n&&(o.fromBufferAttribute(i,e),!0===i.normalized&&Nn(o,i),g[s+u+4]=o.x,g[s+u+5]=o.y,g[s+u+6]=o.z,g[s+u+7]=0),!0===l&&(o.fromBufferAttribute(a,e),!0===a.normalized&&Nn(o,a),g[s+u+8]=o.x,g[s+u+9]=o.y,g[s+u+10]=o.z,g[s+u+11]=4===a.itemSize?o.w:1)}}s={count:i,texture:v,size:new ve(f,m)},a.set(u,s),u.addEventListener("dispose",e)}let l=0;for(let e=0;e<d.length;e++)l+=d[e];let c=u.morphTargetsRelative?1:1-l;h.getUniforms().setValue(e,"morphTargetBaseInfluence",c),h.getUniforms().setValue(e,"morphTargetInfluences",d),h.getUniforms().setValue(e,"morphTargetsTexture",s.texture,r),h.getUniforms().setValue(e,"morphTargetsTextureSize",s.size)}else{let t=void 0===d?0:d.length,r=n[u.id];if(void 0===r||r.length!==t){r=[];for(let e=0;e<t;e++)r[e]=[e,0];n[u.id]=r}for(let e=0;e<t;e++){let t=r[e];t[0]=e,t[1]=d[e]}r.sort(zn);for(let e=0;e<8;e++)e<t&&r[e][1]?(s[e][0]=r[e][0],s[e][1]=r[e][1]):(s[e][0]=Number.MAX_SAFE_INTEGER,s[e][1]=0);s.sort(Bn);let a=u.morphAttributes.position,o=u.morphAttributes.normal,l=0;for(let e=0;e<8;e++){let t=s[e],r=t[0],n=t[1];r!==Number.MAX_SAFE_INTEGER&&n?(a&&u.getAttribute("morphTarget"+e)!==a[r]&&u.setAttribute("morphTarget"+e,a[r]),o&&u.getAttribute("morphNormal"+e)!==o[r]&&u.setAttribute("morphNormal"+e,o[r]),i[e]=n,l+=n):(a&&!0===u.hasAttribute("morphTarget"+e)&&u.deleteAttribute("morphTarget"+e),o&&!0===u.hasAttribute("morphNormal"+e)&&u.deleteAttribute("morphNormal"+e),i[e]=0)}let c=u.morphTargetsRelative?1:1-l;h.getUniforms().setValue(e,"morphTargetBaseInfluence",c),h.getUniforms().setValue(e,"morphTargetInfluences",i)}}}}function Un(e,t,r,n){let i=new WeakMap;function a(e){let t=e.target;t.removeEventListener("dispose",a),r.remove(t.instanceMatrix),null!==t.instanceColor&&r.remove(t.instanceColor)}return{update:function(e){let o=n.render.frame,s=e.geometry,l=t.get(e,s);return i.get(l)!==o&&(t.update(l),i.set(l,o)),e.isInstancedMesh&&(!1===e.hasEventListener("dispose",a)&&e.addEventListener("dispose",a),r.update(e.instanceMatrix,34962),null!==e.instanceColor&&r.update(e.instanceColor,34962)),l},dispose:function(){i=new WeakMap}}}var jn=new Fe,Hn=new He,Vn=new Ve,Gn=new Jr,Wn=[],qn=[],Yn=new Float32Array(16),Xn=new Float32Array(9),Qn=new Float32Array(4);function Jn(e,t,r){let n=e[0];if(n<=0||n>0)return e;let i=t*r,a=Wn[i];if(void 0===a&&(a=new Float32Array(i),Wn[i]=a),0!==t){n.toArray(a,0);for(let n=1,i=0;n!==t;++n)i+=r,e[n].toArray(a,i)}return a}function Zn(e,t){if(e.length!==t.length)return!1;for(let r=0,n=e.length;r<n;r++)if(e[r]!==t[r])return!1;return!0}function Kn(e,t){for(let r=0,n=t.length;r<n;r++)e[r]=t[r]}function $n(e,t){let r=qn[t];void 0===r&&(r=new Int32Array(t),qn[t]=r);for(let n=0;n!==t;++n)r[n]=e.allocateTextureUnit();return r}function ei(e,t){let r=this.cache;r[0]!==t&&(e.uniform1f(this.addr,t),r[0]=t)}function ti(e,t){let r=this.cache;if(void 0!==t.x)(r[0]!==t.x||r[1]!==t.y)&&(e.uniform2f(this.addr,t.x,t.y),r[0]=t.x,r[1]=t.y);else{if(Zn(r,t))return;e.uniform2fv(this.addr,t),Kn(r,t)}}function ri(e,t){let r=this.cache;if(void 0!==t.x)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z)&&(e.uniform3f(this.addr,t.x,t.y,t.z),r[0]=t.x,r[1]=t.y,r[2]=t.z);else if(void 0!==t.r)(r[0]!==t.r||r[1]!==t.g||r[2]!==t.b)&&(e.uniform3f(this.addr,t.r,t.g,t.b),r[0]=t.r,r[1]=t.g,r[2]=t.b);else{if(Zn(r,t))return;e.uniform3fv(this.addr,t),Kn(r,t)}}function ni(e,t){let r=this.cache;if(void 0!==t.x)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z||r[3]!==t.w)&&(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=t.w);else{if(Zn(r,t))return;e.uniform4fv(this.addr,t),Kn(r,t)}}function ii(e,t){let r=this.cache,n=t.elements;if(void 0===n){if(Zn(r,t))return;e.uniformMatrix2fv(this.addr,!1,t),Kn(r,t)}else{if(Zn(r,n))return;Qn.set(n),e.uniformMatrix2fv(this.addr,!1,Qn),Kn(r,n)}}function ai(e,t){let r=this.cache,n=t.elements;if(void 0===n){if(Zn(r,t))return;e.uniformMatrix3fv(this.addr,!1,t),Kn(r,t)}else{if(Zn(r,n))return;Xn.set(n),e.uniformMatrix3fv(this.addr,!1,Xn),Kn(r,n)}}function oi(e,t){let r=this.cache,n=t.elements;if(void 0===n){if(Zn(r,t))return;e.uniformMatrix4fv(this.addr,!1,t),Kn(r,t)}else{if(Zn(r,n))return;Yn.set(n),e.uniformMatrix4fv(this.addr,!1,Yn),Kn(r,n)}}function si(e,t){let r=this.cache;r[0]!==t&&(e.uniform1i(this.addr,t),r[0]=t)}function li(e,t){let r=this.cache;Zn(r,t)||(e.uniform2iv(this.addr,t),Kn(r,t))}function ui(e,t){let r=this.cache;Zn(r,t)||(e.uniform3iv(this.addr,t),Kn(r,t))}function ci(e,t){let r=this.cache;Zn(r,t)||(e.uniform4iv(this.addr,t),Kn(r,t))}function hi(e,t){let r=this.cache;r[0]!==t&&(e.uniform1ui(this.addr,t),r[0]=t)}function di(e,t){let r=this.cache;Zn(r,t)||(e.uniform2uiv(this.addr,t),Kn(r,t))}function pi(e,t){let r=this.cache;Zn(r,t)||(e.uniform3uiv(this.addr,t),Kn(r,t))}function fi(e,t){let r=this.cache;Zn(r,t)||(e.uniform4uiv(this.addr,t),Kn(r,t))}function mi(e,t,r){let n=this.cache,i=r.allocateTextureUnit();n[0]!==i&&(e.uniform1i(this.addr,i),n[0]=i),r.setTexture2D(t||jn,i)}function gi(e,t,r){let n=this.cache,i=r.allocateTextureUnit();n[0]!==i&&(e.uniform1i(this.addr,i),n[0]=i),r.setTexture3D(t||Vn,i)}function vi(e,t,r){let n=this.cache,i=r.allocateTextureUnit();n[0]!==i&&(e.uniform1i(this.addr,i),n[0]=i),r.setTextureCube(t||Gn,i)}function yi(e,t,r){let n=this.cache,i=r.allocateTextureUnit();n[0]!==i&&(e.uniform1i(this.addr,i),n[0]=i),r.setTexture2DArray(t||Hn,i)}function xi(e,t){e.uniform1fv(this.addr,t)}function bi(e,t){let r=Jn(t,this.size,2);e.uniform2fv(this.addr,r)}function wi(e,t){let r=Jn(t,this.size,3);e.uniform3fv(this.addr,r)}function Si(e,t){let r=Jn(t,this.size,4);e.uniform4fv(this.addr,r)}function _i(e,t){let r=Jn(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,r)}function Ai(e,t){let r=Jn(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,r)}function Mi(e,t){let r=Jn(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,r)}function Ei(e,t){e.uniform1iv(this.addr,t)}function Ci(e,t){e.uniform2iv(this.addr,t)}function Ti(e,t){e.uniform3iv(this.addr,t)}function Di(e,t){e.uniform4iv(this.addr,t)}function Li(e,t){e.uniform1uiv(this.addr,t)}function Pi(e,t){e.uniform2uiv(this.addr,t)}function Ri(e,t){e.uniform3uiv(this.addr,t)}function Oi(e,t){e.uniform4uiv(this.addr,t)}function ki(e,t,r){let n=t.length,i=$n(r,n);e.uniform1iv(this.addr,i);for(let e=0;e!==n;++e)r.setTexture2D(t[e]||jn,i[e])}function Ii(e,t,r){let n=t.length,i=$n(r,n);e.uniform1iv(this.addr,i);for(let e=0;e!==n;++e)r.setTexture3D(t[e]||Vn,i[e])}function Bi(e,t,r){let n=t.length,i=$n(r,n);e.uniform1iv(this.addr,i);for(let e=0;e!==n;++e)r.setTextureCube(t[e]||Gn,i[e])}function zi(e,t,r){let n=t.length,i=$n(r,n);e.uniform1iv(this.addr,i);for(let e=0;e!==n;++e)r.setTexture2DArray(t[e]||Hn,i[e])}function Ni(e,t,r){this.id=e,this.addr=r,this.cache=[],this.setValue=function(e){switch(e){case 5126:return ei;case 35664:return ti;case 35665:return ri;case 35666:return ni;case 35674:return ii;case 35675:return ai;case 35676:return oi;case 5124:case 35670:return si;case 35667:case 35671:return li;case 35668:case 35672:return ui;case 35669:case 35673:return ci;case 5125:return hi;case 36294:return di;case 36295:return pi;case 36296:return fi;case 35678:case 36198:case 36298:case 36306:case 35682:return mi;case 35679:case 36299:case 36307:return gi;case 35680:case 36300:case 36308:case 36293:return vi;case 36289:case 36303:case 36311:case 36292:return yi}}(t.type)}function Fi(e,t,r){this.id=e,this.addr=r,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return xi;case 35664:return bi;case 35665:return wi;case 35666:return Si;case 35674:return _i;case 35675:return Ai;case 35676:return Mi;case 5124:case 35670:return Ei;case 35667:case 35671:return Ci;case 35668:case 35672:return Ti;case 35669:case 35673:return Di;case 5125:return Li;case 36294:return Pi;case 36295:return Ri;case 36296:return Oi;case 35678:case 36198:case 36298:case 36306:case 35682:return ki;case 35679:case 36299:case 36307:return Ii;case 35680:case 36300:case 36308:case 36293:return Bi;case 36289:case 36303:case 36311:case 36292:return zi}}(t.type)}function Ui(e){this.id=e,this.seq=[],this.map={}}Fi.prototype.updateCache=function(e){let t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),Kn(t,e)},Ui.prototype.setValue=function(e,t,r){let n=this.seq;for(let i=0,a=n.length;i!==a;++i){let a=n[i];a.setValue(e,t[a.id],r)}};var ji=/(\w+)(\])?(\[|\.)?/g;function Hi(e,t){e.seq.push(t),e.map[t.id]=t}function Vi(e,t,r){let n=e.name,i=n.length;for(ji.lastIndex=0;;){let a=ji.exec(n),o=ji.lastIndex,s=a[1],l="]"===a[2],u=a[3];if(l&&(s|=0),void 0===u||"["===u&&o+2===i){Hi(r,void 0===u?new Ni(s,e,t):new Fi(s,e,t));break}{let e=r.map[s];void 0===e&&(e=new Ui(s),Hi(r,e)),r=e}}}function Gi(e,t){this.seq=[],this.map={};let r=e.getProgramParameter(t,35718);for(let n=0;n<r;++n){let r=e.getActiveUniform(t,n);Vi(r,e.getUniformLocation(t,r.name),this)}}function Wi(e,t,r){let n=e.createShader(t);return e.shaderSource(n,r),e.compileShader(n),n}Gi.prototype.setValue=function(e,t,r,n){let i=this.map[t];void 0!==i&&i.setValue(e,r,n)},Gi.prototype.setOptional=function(e,t,r){let n=t[r];void 0!==n&&this.setValue(e,r,n)},Gi.upload=function(e,t,r,n){for(let i=0,a=t.length;i!==a;++i){let a=t[i],o=r[a.id];!1!==o.needsUpdate&&a.setValue(e,o.value,n)}},Gi.seqWithValue=function(e,t){let r=[];for(let n=0,i=e.length;n!==i;++n){let i=e[n];i.id in t&&r.push(i)}return r};var qi=0;function Yi(e,t,r){let n=e.getShaderParameter(t,35713),i=e.getShaderInfoLog(t).trim();if(n&&""===i)return"";let a=parseInt(/ERROR: 0:(\d+)/.exec(i)[1]);return r.toUpperCase()+"\n\n"+i+"\n\n"+function(e,t){let r=e.split("\n"),n=[],i=Math.max(t-6,0),a=Math.min(t+6,r.length);for(let e=i;e<a;e++)n.push(e+1+": "+r[e]);return n.join("\n")}(e.getShaderSource(t),a)}function Xi(e,t){let r=function(e){switch(e){case Q:return["Linear","( value )"];case J:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+r[0]+r[1]+"; }"}function Qi(e,t){let r;switch(t){case 1:r="Linear";break;case 2:r="Reinhard";break;case 3:r="OptimizedCineon";break;case 4:r="ACESFilmic";break;case 5:r="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),r="Linear"}return"vec3 "+e+"( vec3 color ) { return "+r+"ToneMapping( color ); }"}function Ji(e){return""!==e}function Zi(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function Ki(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var $i=/^[ \t]*#include +<([\w\d./]+)>/gm;function ea(e){return e.replace($i,ta)}function ta(e,t){let r=un[t];if(void 0===r)throw new Error("Can not resolve #include <"+t+">");return ea(r)}var ra=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,na=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function ia(e){return e.replace(na,oa).replace(ra,aa)}function aa(e,t,r,n){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),oa(0,t,r,n)}function oa(e,t,r,n){let i="";for(let e=parseInt(t);e<parseInt(r);e++)i+=n.replace(/\[\s*i\s*\]/g,"[ "+e+" ]").replace(/UNROLLED_LOOP_INDEX/g,e);return i}function sa(e){let t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function la(e,t,r,n){let i,a,o=e.getContext(),s=r.defines,l=r.vertexShader,u=r.fragmentShader,c=function(e){let t="SHADOWMAP_TYPE_BASIC";return 1===e.shadowMapType?t="SHADOWMAP_TYPE_PCF":2===e.shadowMapType?t="SHADOWMAP_TYPE_PCF_SOFT":3===e.shadowMapType&&(t="SHADOWMAP_TYPE_VSM"),t}(r),h=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case w:case S:t="ENVMAP_TYPE_CUBE";break;case _:t="ENVMAP_TYPE_CUBE_UV"}return t}(r),d=function(e){let t="ENVMAP_MODE_REFLECTION";return e.envMap&&e.envMapMode===S&&(t="ENVMAP_MODE_REFRACTION"),t}(r),p=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case 0:t="ENVMAP_BLENDING_MULTIPLY";break;case 1:t="ENVMAP_BLENDING_MIX";break;case 2:t="ENVMAP_BLENDING_ADD"}return t}(r),f=function(e){let t=e.envMapCubeUVHeight;if(null===t)return null;let r=Math.log2(t/32+1)+3,n=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,r),112)),texelHeight:n,maxMip:r}}(r),m=r.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUVHeight||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Ji).join("\n")}(r),g=function(e){let t=[];for(let r in e){let n=e[r];!1!==n&&t.push("#define "+r+" "+n)}return t.join("\n")}(s),v=o.createProgram(),y=r.glslVersion?"#version "+r.glslVersion+"\n":"";r.isRawShaderMaterial?(i=[g].filter(Ji).join("\n"),i.length>0&&(i+="\n"),a=[m,g].filter(Ji).join("\n"),a.length>0&&(a+="\n")):(i=[sa(r),"#define SHADER_NAME "+r.shaderName,g,r.instancing?"#define USE_INSTANCING":"",r.instancingColor?"#define USE_INSTANCING_COLOR":"",r.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define MAX_BONES "+r.maxBones,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+d:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMap&&r.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",r.normalMap&&r.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.displacementMap&&r.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",r.specularColorMap?"#define USE_SPECULARCOLORMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.transmission?"#define USE_TRANSMISSION":"",r.transmissionMap?"#define USE_TRANSMISSIONMAP":"",r.thicknessMap?"#define USE_THICKNESSMAP":"",r.sheenColorMap?"#define USE_SHEENCOLORMAP":"",r.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",r.vertexTangents?"#define USE_TANGENT":"",r.vertexColors?"#define USE_COLOR":"",r.vertexAlphas?"#define USE_COLOR_ALPHA":"",r.vertexUvs?"#define USE_UV":"",r.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",r.flatShading?"#define FLAT_SHADED":"",r.skinning?"#define USE_SKINNING":"",r.useVertexTexture?"#define BONE_TEXTURE":"",r.morphTargets?"#define USE_MORPHTARGETS":"",r.morphNormals&&!1===r.flatShading?"#define USE_MORPHNORMALS":"",r.morphColors&&r.isWebGL2?"#define USE_MORPHCOLORS":"",r.morphTargetsCount>0&&r.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",r.morphTargetsCount>0&&r.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+r.morphTextureStride:"",r.morphTargetsCount>0&&r.isWebGL2?"#define MORPHTARGETS_COUNT "+r.morphTargetsCount:"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+c:"",r.sizeAttenuation?"#define USE_SIZEATTENUATION":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&r.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Ji).join("\n"),a=[m,sa(r),"#define SHADER_NAME "+r.shaderName,g,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.matcap?"#define USE_MATCAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+h:"",r.envMap?"#define "+d:"",r.envMap?"#define "+p:"",f?"#define CUBEUV_TEXEL_WIDTH "+f.texelWidth:"",f?"#define CUBEUV_TEXEL_HEIGHT "+f.texelHeight:"",f?"#define CUBEUV_MAX_MIP "+f.maxMip+".0":"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMap&&r.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",r.normalMap&&r.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",r.clearcoat?"#define USE_CLEARCOAT":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",r.specularColorMap?"#define USE_SPECULARCOLORMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.alphaTest?"#define USE_ALPHATEST":"",r.sheen?"#define USE_SHEEN":"",r.sheenColorMap?"#define USE_SHEENCOLORMAP":"",r.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",r.transmission?"#define USE_TRANSMISSION":"",r.transmissionMap?"#define USE_TRANSMISSIONMAP":"",r.thicknessMap?"#define USE_THICKNESSMAP":"",r.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",r.vertexTangents?"#define USE_TANGENT":"",r.vertexColors||r.instancingColor?"#define USE_COLOR":"",r.vertexAlphas?"#define USE_COLOR_ALPHA":"",r.vertexUvs?"#define USE_UV":"",r.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",r.gradientMap?"#define USE_GRADIENTMAP":"",r.flatShading?"#define FLAT_SHADED":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+c:"",r.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",r.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&r.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==r.toneMapping?"#define TONE_MAPPING":"",0!==r.toneMapping?un.tonemapping_pars_fragment:"",0!==r.toneMapping?Qi("toneMapping",r.toneMapping):"",r.dithering?"#define DITHERING":"",r.opaque?"#define OPAQUE":"",un.encodings_pars_fragment,Xi("linearToOutputTexel",r.outputEncoding),r.depthPacking?"#define DEPTH_PACKING "+r.depthPacking:"","\n"].filter(Ji).join("\n")),l=ea(l),l=Zi(l,r),l=Ki(l,r),u=ea(u),u=Zi(u,r),u=Ki(u,r),l=ia(l),u=ia(u),r.isWebGL2&&!0!==r.isRawShaderMaterial&&(y="#version 300 es\n",i=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+i,a=["#define varying in",r.glslVersion===ne?"":"layout(location = 0) out highp vec4 pc_fragColor;",r.glslVersion===ne?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+a);let x,b,A=y+a+u,M=Wi(o,35633,y+i+l),E=Wi(o,35632,A);if(o.attachShader(v,M),o.attachShader(v,E),void 0!==r.index0AttributeName?o.bindAttribLocation(v,0,r.index0AttributeName):!0===r.morphTargets&&o.bindAttribLocation(v,0,"position"),o.linkProgram(v),e.debug.checkShaderErrors){let e=o.getProgramInfoLog(v).trim(),t=o.getShaderInfoLog(M).trim(),r=o.getShaderInfoLog(E).trim(),n=!0,s=!0;if(!1===o.getProgramParameter(v,35714)){n=!1;let t=Yi(o,M,"vertex"),r=Yi(o,E,"fragment");console.error("THREE.WebGLProgram: Shader Error "+o.getError()+" - VALIDATE_STATUS "+o.getProgramParameter(v,35715)+"\n\nProgram Info Log: "+e+"\n"+t+"\n"+r)}else""!==e?console.warn("THREE.WebGLProgram: Program Info Log:",e):(""===t||""===r)&&(s=!1);s&&(this.diagnostics={runnable:n,programLog:e,vertexShader:{log:t,prefix:i},fragmentShader:{log:r,prefix:a}})}return o.deleteShader(M),o.deleteShader(E),this.getUniforms=function(){return void 0===x&&(x=new Gi(o,v)),x},this.getAttributes=function(){return void 0===b&&(b=function(e,t){let r={},n=e.getProgramParameter(t,35721);for(let i=0;i<n;i++){let n=e.getActiveAttrib(t,i),a=n.name,o=1;35674===n.type&&(o=2),35675===n.type&&(o=3),35676===n.type&&(o=4),r[a]={type:n.type,location:e.getAttribLocation(t,a),locationSize:o}}return r}(o,v)),b},this.destroy=function(){n.releaseStatesOfProgram(this),o.deleteProgram(v),this.program=void 0},this.name=r.shaderName,this.id=qi++,this.cacheKey=t,this.usedTimes=1,this.program=v,this.vertexShader=M,this.fragmentShader=E,this}var ua=0;function ca(e,t,r,n,i,a,o){let s=new Ot,l=new class{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){let t=e.vertexShader,r=e.fragmentShader,n=this._getShaderStage(t),i=this._getShaderStage(r),a=this._getShaderCacheForMaterial(e);return!1===a.has(n)&&(a.add(n),n.usedTimes++),!1===a.has(i)&&(a.add(i),i.usedTimes++),this}remove(e){let t=this.materialCache.get(e);for(let e of t)e.usedTimes--,0===e.usedTimes&&this.shaderCache.delete(e.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){let t=this.materialCache;return!1===t.has(e)&&t.set(e,new Set),t.get(e)}_getShaderStage(e){let t=this.shaderCache;if(!1===t.has(e)){let r=new class{constructor(e){this.id=ua++,this.code=e,this.usedTimes=0}}(e);t.set(e,r)}return t.get(e)}},u=[],c=i.isWebGL2,h=i.logarithmicDepthBuffer,d=i.floatVertexTextures,p=i.maxVertexUniforms,f=i.vertexTextures,m=i.precision,g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function(a,s,u,v,y){let x=v.fog,b=y.geometry,w=a.isMeshStandardMaterial?v.environment:null,S=(a.isMeshStandardMaterial?r:t).get(a.envMap||w),A=S&&S.mapping===_?S.image.height:null,M=g[a.type],E=y.isSkinnedMesh?function(e){let t=e.skeleton.bones;if(d)return 1024;{let e=Math.floor((p-20)/4),r=Math.min(e,t.length);return r<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+r+"."),0):r}}(y):0;null!==a.precision&&(m=i.getMaxPrecision(a.precision),m!==a.precision&&console.warn("THREE.WebGLProgram.getParameters:",a.precision,"not supported, using",m,"instead."));let C,T,D,L,P=b.morphAttributes.position||b.morphAttributes.normal||b.morphAttributes.color,R=void 0!==P?P.length:0,O=0;if(void 0!==b.morphAttributes.position&&(O=1),void 0!==b.morphAttributes.normal&&(O=2),void 0!==b.morphAttributes.color&&(O=3),M){let e=hn[M];C=e.vertexShader,T=e.fragmentShader}else C=a.vertexShader,T=a.fragmentShader,l.update(a),D=l.getVertexShaderID(a),L=l.getFragmentShaderID(a);let k=e.getRenderTarget(),I=a.alphaTest>0,B=a.clearcoat>0;return{isWebGL2:c,shaderID:M,shaderName:a.type,vertexShader:C,fragmentShader:T,defines:a.defines,customVertexShaderID:D,customFragmentShaderID:L,isRawShaderMaterial:!0===a.isRawShaderMaterial,glslVersion:a.glslVersion,precision:m,instancing:!0===y.isInstancedMesh,instancingColor:!0===y.isInstancedMesh&&null!==y.instanceColor,supportsVertexTextures:f,outputEncoding:null===k?e.outputEncoding:!0===k.isXRRenderTarget?k.texture.encoding:Q,map:!!a.map,matcap:!!a.matcap,envMap:!!S,envMapMode:S&&S.mapping,envMapCubeUVHeight:A,lightMap:!!a.lightMap,aoMap:!!a.aoMap,emissiveMap:!!a.emissiveMap,bumpMap:!!a.bumpMap,normalMap:!!a.normalMap,objectSpaceNormalMap:1===a.normalMapType,tangentSpaceNormalMap:0===a.normalMapType,decodeVideoTexture:!!a.map&&!0===a.map.isVideoTexture&&a.map.encoding===J,clearcoat:B,clearcoatMap:B&&!!a.clearcoatMap,clearcoatRoughnessMap:B&&!!a.clearcoatRoughnessMap,clearcoatNormalMap:B&&!!a.clearcoatNormalMap,displacementMap:!!a.displacementMap,roughnessMap:!!a.roughnessMap,metalnessMap:!!a.metalnessMap,specularMap:!!a.specularMap,specularIntensityMap:!!a.specularIntensityMap,specularColorMap:!!a.specularColorMap,opaque:!1===a.transparent&&1===a.blending,alphaMap:!!a.alphaMap,alphaTest:I,gradientMap:!!a.gradientMap,sheen:a.sheen>0,sheenColorMap:!!a.sheenColorMap,sheenRoughnessMap:!!a.sheenRoughnessMap,transmission:a.transmission>0,transmissionMap:!!a.transmissionMap,thicknessMap:!!a.thicknessMap,combine:a.combine,vertexTangents:!!a.normalMap&&!!b.attributes.tangent,vertexColors:a.vertexColors,vertexAlphas:!0===a.vertexColors&&!!b.attributes.color&&4===b.attributes.color.itemSize,vertexUvs:!!(a.map||a.bumpMap||a.normalMap||a.specularMap||a.alphaMap||a.emissiveMap||a.roughnessMap||a.metalnessMap||a.clearcoatMap||a.clearcoatRoughnessMap||a.clearcoatNormalMap||a.displacementMap||a.transmissionMap||a.thicknessMap||a.specularIntensityMap||a.specularColorMap||a.sheenColorMap||a.sheenRoughnessMap),uvsVertexOnly:!(a.map||a.bumpMap||a.normalMap||a.specularMap||a.alphaMap||a.emissiveMap||a.roughnessMap||a.metalnessMap||a.clearcoatNormalMap||a.transmission>0||a.transmissionMap||a.thicknessMap||a.specularIntensityMap||a.specularColorMap||a.sheen>0||a.sheenColorMap||a.sheenRoughnessMap||!a.displacementMap),fog:!!x,useFog:a.fog,fogExp2:x&&x.isFogExp2,flatShading:!!a.flatShading,sizeAttenuation:a.sizeAttenuation,logarithmicDepthBuffer:h,skinning:!0===y.isSkinnedMesh&&E>0,maxBones:E,useVertexTexture:d,morphTargets:void 0!==b.morphAttributes.position,morphNormals:void 0!==b.morphAttributes.normal,morphColors:void 0!==b.morphAttributes.color,morphTargetsCount:R,morphTextureStride:O,numDirLights:s.directional.length,numPointLights:s.point.length,numSpotLights:s.spot.length,numRectAreaLights:s.rectArea.length,numHemiLights:s.hemi.length,numDirLightShadows:s.directionalShadowMap.length,numPointLightShadows:s.pointShadowMap.length,numSpotLightShadows:s.spotShadowMap.length,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:a.dithering,shadowMapEnabled:e.shadowMap.enabled&&u.length>0,shadowMapType:e.shadowMap.type,toneMapping:a.toneMapped?e.toneMapping:0,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:a.premultipliedAlpha,doubleSided:2===a.side,flipSided:1===a.side,depthPacking:void 0!==a.depthPacking&&a.depthPacking,index0AttributeName:a.index0AttributeName,extensionDerivatives:a.extensions&&a.extensions.derivatives,extensionFragDepth:a.extensions&&a.extensions.fragDepth,extensionDrawBuffers:a.extensions&&a.extensions.drawBuffers,extensionShaderTextureLOD:a.extensions&&a.extensions.shaderTextureLOD,rendererExtensionFragDepth:c||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:c||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:c||n.has("EXT_shader_texture_lod"),customProgramCacheKey:a.customProgramCacheKey()}},getProgramCacheKey:function(t){let r=[];if(t.shaderID?r.push(t.shaderID):(r.push(t.customVertexShaderID),r.push(t.customFragmentShaderID)),void 0!==t.defines)for(let e in t.defines)r.push(e),r.push(t.defines[e]);return!1===t.isRawShaderMaterial&&(function(e,t){e.push(t.precision),e.push(t.outputEncoding),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.combine),e.push(t.vertexUvs),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.maxBones),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection)}(r,t),function(e,t){s.disableAll(),t.isWebGL2&&s.enable(0),t.supportsVertexTextures&&s.enable(1),t.instancing&&s.enable(2),t.instancingColor&&s.enable(3),t.map&&s.enable(4),t.matcap&&s.enable(5),t.envMap&&s.enable(6),t.lightMap&&s.enable(7),t.aoMap&&s.enable(8),t.emissiveMap&&s.enable(9),t.bumpMap&&s.enable(10),t.normalMap&&s.enable(11),t.objectSpaceNormalMap&&s.enable(12),t.tangentSpaceNormalMap&&s.enable(13),t.clearcoat&&s.enable(14),t.clearcoatMap&&s.enable(15),t.clearcoatRoughnessMap&&s.enable(16),t.clearcoatNormalMap&&s.enable(17),t.displacementMap&&s.enable(18),t.specularMap&&s.enable(19),t.roughnessMap&&s.enable(20),t.metalnessMap&&s.enable(21),t.gradientMap&&s.enable(22),t.alphaMap&&s.enable(23),t.alphaTest&&s.enable(24),t.vertexColors&&s.enable(25),t.vertexAlphas&&s.enable(26),t.vertexUvs&&s.enable(27),t.vertexTangents&&s.enable(28),t.uvsVertexOnly&&s.enable(29),t.fog&&s.enable(30),e.push(s.mask),s.disableAll(),t.useFog&&s.enable(0),t.flatShading&&s.enable(1),t.logarithmicDepthBuffer&&s.enable(2),t.skinning&&s.enable(3),t.useVertexTexture&&s.enable(4),t.morphTargets&&s.enable(5),t.morphNormals&&s.enable(6),t.morphColors&&s.enable(7),t.premultipliedAlpha&&s.enable(8),t.shadowMapEnabled&&s.enable(9),t.physicallyCorrectLights&&s.enable(10),t.doubleSided&&s.enable(11),t.flipSided&&s.enable(12),t.depthPacking&&s.enable(13),t.dithering&&s.enable(14),t.specularIntensityMap&&s.enable(15),t.specularColorMap&&s.enable(16),t.transmission&&s.enable(17),t.transmissionMap&&s.enable(18),t.thicknessMap&&s.enable(19),t.sheen&&s.enable(20),t.sheenColorMap&&s.enable(21),t.sheenRoughnessMap&&s.enable(22),t.decodeVideoTexture&&s.enable(23),t.opaque&&s.enable(24),e.push(s.mask)}(r,t),r.push(e.outputEncoding)),r.push(t.customProgramCacheKey),r.join()},getUniforms:function(e){let t,r=g[e.type];if(r){let e=hn[r];t=Gr.clone(e.uniforms)}else t=e.uniforms;return t},acquireProgram:function(t,r){let n;for(let e=0,t=u.length;e<t;e++){let t=u[e];if(t.cacheKey===r){n=t,++n.usedTimes;break}}return void 0===n&&(n=new la(e,r,t,a),u.push(n)),n},releaseProgram:function(e){if(0==--e.usedTimes){let t=u.indexOf(e);u[t]=u[u.length-1],u.pop(),e.destroy()}},releaseShaderCache:function(e){l.remove(e)},programs:u,dispose:function(){l.dispose()}}}function ha(){let e=new WeakMap;return{get:function(t){let r=e.get(t);return void 0===r&&(r={},e.set(t,r)),r},remove:function(t){e.delete(t)},update:function(t,r,n){e.get(t)[r]=n},dispose:function(){e=new WeakMap}}}function da(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function pa(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function fa(){let e=[],t=0,r=[],n=[],i=[];function a(r,n,i,a,o,s){let l=e[t];return void 0===l?(l={id:r.id,object:r,geometry:n,material:i,groupOrder:a,renderOrder:r.renderOrder,z:o,group:s},e[t]=l):(l.id=r.id,l.object=r,l.geometry=n,l.material=i,l.groupOrder=a,l.renderOrder=r.renderOrder,l.z=o,l.group=s),t++,l}return{opaque:r,transmissive:n,transparent:i,init:function(){t=0,r.length=0,n.length=0,i.length=0},push:function(e,t,o,s,l,u){let c=a(e,t,o,s,l,u);o.transmission>0?n.push(c):!0===o.transparent?i.push(c):r.push(c)},unshift:function(e,t,o,s,l,u){let c=a(e,t,o,s,l,u);o.transmission>0?n.unshift(c):!0===o.transparent?i.unshift(c):r.unshift(c)},finish:function(){for(let r=t,n=e.length;r<n;r++){let t=e[r];if(null===t.id)break;t.id=null,t.object=null,t.geometry=null,t.material=null,t.group=null}},sort:function(e,t){r.length>1&&r.sort(e||da),n.length>1&&n.sort(t||pa),i.length>1&&i.sort(t||pa)}}}function ma(){let e=new WeakMap;return{get:function(t,r){let n;return!1===e.has(t)?(n=new fa,e.set(t,[n])):r>=e.get(t).length?(n=new fa,e.get(t).push(n)):n=e.get(t)[r],n},dispose:function(){e=new WeakMap}}}function ga(){let e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let r;switch(t.type){case"DirectionalLight":r={direction:new We,color:new Oe};break;case"SpotLight":r={position:new We,direction:new We,color:new Oe,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":r={position:new We,color:new Oe,distance:0,decay:0};break;case"HemisphereLight":r={direction:new We,skyColor:new Oe,groundColor:new Oe};break;case"RectAreaLight":r={color:new Oe,position:new We,halfWidth:new We,halfHeight:new We}}return e[t.id]=r,r}}}var va=0;function ya(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function xa(e,t){let r=new ga,n=function(){let e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let r;switch(t.type){case"DirectionalLight":case"SpotLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ve};break;case"PointLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ve,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=r,r}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let e=0;e<9;e++)i.probe.push(new We);let a=new We,o=new St,s=new St;return{setup:function(a,o){let s=0,l=0,u=0;for(let e=0;e<9;e++)i.probe[e].set(0,0,0);let c=0,h=0,d=0,p=0,f=0,m=0,g=0,v=0;a.sort(ya);let y=!0!==o?Math.PI:1;for(let e=0,t=a.length;e<t;e++){let t=a[e],o=t.color,x=t.intensity,b=t.distance,w=t.shadow&&t.shadow.map?t.shadow.map.texture:null;if(t.isAmbientLight)s+=o.r*x*y,l+=o.g*x*y,u+=o.b*x*y;else if(t.isLightProbe)for(let e=0;e<9;e++)i.probe[e].addScaledVector(t.sh.coefficients[e],x);else if(t.isDirectionalLight){let e=r.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*y),t.castShadow){let e=t.shadow,r=n.get(t);r.shadowBias=e.bias,r.shadowNormalBias=e.normalBias,r.shadowRadius=e.radius,r.shadowMapSize=e.mapSize,i.directionalShadow[c]=r,i.directionalShadowMap[c]=w,i.directionalShadowMatrix[c]=t.shadow.matrix,m++}i.directional[c]=e,c++}else if(t.isSpotLight){let e=r.get(t);if(e.position.setFromMatrixPosition(t.matrixWorld),e.color.copy(o).multiplyScalar(x*y),e.distance=b,e.coneCos=Math.cos(t.angle),e.penumbraCos=Math.cos(t.angle*(1-t.penumbra)),e.decay=t.decay,t.castShadow){let e=t.shadow,r=n.get(t);r.shadowBias=e.bias,r.shadowNormalBias=e.normalBias,r.shadowRadius=e.radius,r.shadowMapSize=e.mapSize,i.spotShadow[d]=r,i.spotShadowMap[d]=w,i.spotShadowMatrix[d]=t.shadow.matrix,v++}i.spot[d]=e,d++}else if(t.isRectAreaLight){let e=r.get(t);e.color.copy(o).multiplyScalar(x),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),i.rectArea[p]=e,p++}else if(t.isPointLight){let e=r.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*y),e.distance=t.distance,e.decay=t.decay,t.castShadow){let e=t.shadow,r=n.get(t);r.shadowBias=e.bias,r.shadowNormalBias=e.normalBias,r.shadowRadius=e.radius,r.shadowMapSize=e.mapSize,r.shadowCameraNear=e.camera.near,r.shadowCameraFar=e.camera.far,i.pointShadow[h]=r,i.pointShadowMap[h]=w,i.pointShadowMatrix[h]=t.shadow.matrix,g++}i.point[h]=e,h++}else if(t.isHemisphereLight){let e=r.get(t);e.skyColor.copy(t.color).multiplyScalar(x*y),e.groundColor.copy(t.groundColor).multiplyScalar(x*y),i.hemi[f]=e,f++}}p>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(i.rectAreaLTC1=cn.LTC_FLOAT_1,i.rectAreaLTC2=cn.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(i.rectAreaLTC1=cn.LTC_HALF_1,i.rectAreaLTC2=cn.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=s,i.ambient[1]=l,i.ambient[2]=u;let x=i.hash;(x.directionalLength!==c||x.pointLength!==h||x.spotLength!==d||x.rectAreaLength!==p||x.hemiLength!==f||x.numDirectionalShadows!==m||x.numPointShadows!==g||x.numSpotShadows!==v)&&(i.directional.length=c,i.spot.length=d,i.rectArea.length=p,i.point.length=h,i.hemi.length=f,i.directionalShadow.length=m,i.directionalShadowMap.length=m,i.pointShadow.length=g,i.pointShadowMap.length=g,i.spotShadow.length=v,i.spotShadowMap.length=v,i.directionalShadowMatrix.length=m,i.pointShadowMatrix.length=g,i.spotShadowMatrix.length=v,x.directionalLength=c,x.pointLength=h,x.spotLength=d,x.rectAreaLength=p,x.hemiLength=f,x.numDirectionalShadows=m,x.numPointShadows=g,x.numSpotShadows=v,i.version=va++)},setupView:function(e,t){let r=0,n=0,l=0,u=0,c=0,h=t.matrixWorldInverse;for(let t=0,d=e.length;t<d;t++){let d=e[t];if(d.isDirectionalLight){let e=i.directional[r];e.direction.setFromMatrixPosition(d.matrixWorld),a.setFromMatrixPosition(d.target.matrixWorld),e.direction.sub(a),e.direction.transformDirection(h),r++}else if(d.isSpotLight){let e=i.spot[l];e.position.setFromMatrixPosition(d.matrixWorld),e.position.applyMatrix4(h),e.direction.setFromMatrixPosition(d.matrixWorld),a.setFromMatrixPosition(d.target.matrixWorld),e.direction.sub(a),e.direction.transformDirection(h),l++}else if(d.isRectAreaLight){let e=i.rectArea[u];e.position.setFromMatrixPosition(d.matrixWorld),e.position.applyMatrix4(h),s.identity(),o.copy(d.matrixWorld),o.premultiply(h),s.extractRotation(o),e.halfWidth.set(.5*d.width,0,0),e.halfHeight.set(0,.5*d.height,0),e.halfWidth.applyMatrix4(s),e.halfHeight.applyMatrix4(s),u++}else if(d.isPointLight){let e=i.point[n];e.position.setFromMatrixPosition(d.matrixWorld),e.position.applyMatrix4(h),n++}else if(d.isHemisphereLight){let e=i.hemi[c];e.direction.setFromMatrixPosition(d.matrixWorld),e.direction.transformDirection(h),e.direction.normalize(),c++}}},state:i}}function ba(e,t){let r=new xa(e,t),n=[],i=[];return{init:function(){n.length=0,i.length=0},state:{lightsArray:n,shadowsArray:i,lights:r},setupLights:function(e){r.setup(n,e)},setupLightsView:function(e){r.setupView(n,e)},pushLight:function(e){n.push(e)},pushShadow:function(e){i.push(e)}}}function wa(e,t){let r=new WeakMap;return{get:function(n,i=0){let a;return!1===r.has(n)?(a=new ba(e,t),r.set(n,[a])):i>=r.get(n).length?(a=new ba(e,t),r.get(n).push(a)):a=r.get(n)[i],a},dispose:function(){r=new WeakMap}}}var Sa=class extends or{constructor(e){super(),this.type="MeshDepthMaterial",this.depthPacking=Z,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}};Sa.prototype.isMeshDepthMaterial=!0;var _a=class extends or{constructor(e){super(),this.type="MeshDistanceMaterial",this.referencePosition=new We,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}};function Aa(e,t,r){let n=new an,i=new ve,a=new ve,o=new Ue,s=new Sa({depthPacking:3201}),l=new _a,u={},c=r.maxTextureSize,h={0:1,1:0,2:2},d=new Wr({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ve},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),p=d.clone();p.defines.HORIZONTAL_PASS=1;let f=new wr;f.setAttribute("position",new cr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let m=new Fr(f,d),g=this;function v(r,n){let i=t.update(m);d.defines.VSM_SAMPLES!==r.blurSamples&&(d.defines.VSM_SAMPLES=r.blurSamples,p.defines.VSM_SAMPLES=r.blurSamples,d.needsUpdate=!0,p.needsUpdate=!0),d.uniforms.shadow_pass.value=r.map.texture,d.uniforms.resolution.value=r.mapSize,d.uniforms.radius.value=r.radius,e.setRenderTarget(r.mapPass),e.clear(),e.renderBufferDirect(n,null,i,d,m,null),p.uniforms.shadow_pass.value=r.mapPass.texture,p.uniforms.resolution.value=r.mapSize,p.uniforms.radius.value=r.radius,e.setRenderTarget(r.map),e.clear(),e.renderBufferDirect(n,null,i,p,m,null)}function y(t,r,n,i,a,o){let c=null,d=!0===n.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(c=void 0!==d?d:!0===n.isPointLight?l:s,e.localClippingEnabled&&!0===r.clipShadows&&0!==r.clippingPlanes.length||r.displacementMap&&0!==r.displacementScale||r.alphaMap&&r.alphaTest>0){let e=c.uuid,t=r.uuid,n=u[e];void 0===n&&(n={},u[e]=n);let i=n[t];void 0===i&&(i=c.clone(),n[t]=i),c=i}return c.visible=r.visible,c.wireframe=r.wireframe,c.side=3===o?null!==r.shadowSide?r.shadowSide:r.side:null!==r.shadowSide?r.shadowSide:h[r.side],c.alphaMap=r.alphaMap,c.alphaTest=r.alphaTest,c.clipShadows=r.clipShadows,c.clippingPlanes=r.clippingPlanes,c.clipIntersection=r.clipIntersection,c.displacementMap=r.displacementMap,c.displacementScale=r.displacementScale,c.displacementBias=r.displacementBias,c.wireframeLinewidth=r.wireframeLinewidth,c.linewidth=r.linewidth,!0===n.isPointLight&&!0===c.isMeshDistanceMaterial&&(c.referencePosition.setFromMatrixPosition(n.matrixWorld),c.nearDistance=i,c.farDistance=a),c}function x(r,i,a,o,s){if(!1===r.visible)return;if(r.layers.test(i.layers)&&(r.isMesh||r.isLine||r.isPoints)&&(r.castShadow||r.receiveShadow&&3===s)&&(!r.frustumCulled||n.intersectsObject(r))){r.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,r.matrixWorld);let n=t.update(r),i=r.material;if(Array.isArray(i)){let t=n.groups;for(let l=0,u=t.length;l<u;l++){let u=t[l],c=i[u.materialIndex];if(c&&c.visible){let t=y(r,c,o,a.near,a.far,s);e.renderBufferDirect(a,null,n,t,r,u)}}}else if(i.visible){let t=y(r,i,o,a.near,a.far,s);e.renderBufferDirect(a,null,n,t,r,null)}}let l=r.children;for(let e=0,t=l.length;e<t;e++)x(l[e],i,a,o,s)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(t,r,s){if(!1===g.enabled||!1===g.autoUpdate&&!1===g.needsUpdate||0===t.length)return;let l=e.getRenderTarget(),u=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),d=e.state;d.setBlending(0),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);for(let l=0,u=t.length;l<u;l++){let u=t[l],h=u.shadow;if(void 0===h){console.warn("THREE.WebGLShadowMap:",u,"has no shadow.");continue}if(!1===h.autoUpdate&&!1===h.needsUpdate)continue;i.copy(h.mapSize);let p=h.getFrameExtents();if(i.multiply(p),a.copy(h.mapSize),(i.x>c||i.y>c)&&(i.x>c&&(a.x=Math.floor(c/p.x),i.x=a.x*p.x,h.mapSize.x=a.x),i.y>c&&(a.y=Math.floor(c/p.y),i.y=a.y*p.y,h.mapSize.y=a.y)),null===h.map&&!h.isPointLightShadow&&3===this.type&&(h.map=new je(i.x,i.y),h.map.texture.name=u.name+".shadowMap",h.mapPass=new je(i.x,i.y),h.camera.updateProjectionMatrix()),null===h.map){let e={minFilter:C,magFilter:C,format:B};h.map=new je(i.x,i.y,e),h.map.texture.name=u.name+".shadowMap",h.camera.updateProjectionMatrix()}e.setRenderTarget(h.map),e.clear();let f=h.getViewportCount();for(let e=0;e<f;e++){let t=h.getViewport(e);o.set(a.x*t.x,a.y*t.y,a.x*t.z,a.y*t.w),d.viewport(o),h.updateMatrices(u,e),n=h.getFrustum(),x(r,s,h.camera,u,this.type)}!h.isPointLightShadow&&3===this.type&&v(h,s),h.needsUpdate=!1}g.needsUpdate=!1,e.setRenderTarget(l,u,h)}}function Ma(e,t,r){let n=r.isWebGL2,i=new function(){let t=!1,r=new Ue,n=null,i=new Ue(0,0,0,0);return{setMask:function(r){n!==r&&!t&&(e.colorMask(r,r,r,r),n=r)},setLocked:function(e){t=e},setClear:function(t,n,a,o,s){!0===s&&(t*=o,n*=o,a*=o),r.set(t,n,a,o),!1===i.equals(r)&&(e.clearColor(t,n,a,o),i.copy(r))},reset:function(){t=!1,n=null,i.set(-1,0,0,0)}}},a=new function(){let t=!1,r=null,n=null,i=null;return{setTest:function(e){e?F(2929):U(2929)},setMask:function(n){r!==n&&!t&&(e.depthMask(n),r=n)},setFunc:function(t){if(n!==t){if(t)switch(t){case 0:e.depthFunc(512);break;case 1:e.depthFunc(519);break;case 2:e.depthFunc(513);break;case 3:default:e.depthFunc(515);break;case 4:e.depthFunc(514);break;case 5:e.depthFunc(518);break;case 6:e.depthFunc(516);break;case 7:e.depthFunc(517)}else e.depthFunc(515);n=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,r=null,n=null,i=null}}},o=new function(){let t=!1,r=null,n=null,i=null,a=null,o=null,s=null,l=null,u=null;return{setTest:function(e){t||(e?F(2960):U(2960))},setMask:function(n){r!==n&&!t&&(e.stencilMask(n),r=n)},setFunc:function(t,r,o){(n!==t||i!==r||a!==o)&&(e.stencilFunc(t,r,o),n=t,i=r,a=o)},setOp:function(t,r,n){(o!==t||s!==r||l!==n)&&(e.stencilOp(t,r,n),o=t,s=r,l=n)},setLocked:function(e){t=e},setClear:function(t){u!==t&&(e.clearStencil(t),u=t)},reset:function(){t=!1,r=null,n=null,i=null,a=null,o=null,s=null,l=null,u=null}}},s={},l={},u=new WeakMap,c=[],h=null,d=!1,p=null,f=null,m=null,g=null,v=null,y=null,x=null,w=!1,S=null,_=null,A=null,M=null,E=null,C=e.getParameter(35661),T=!1,D=0,L=e.getParameter(7938);-1!==L.indexOf("WebGL")?(D=parseFloat(/^WebGL (\d)/.exec(L)[1]),T=D>=1):-1!==L.indexOf("OpenGL ES")&&(D=parseFloat(/^OpenGL ES (\d)/.exec(L)[1]),T=D>=2);let P=null,R={},O=e.getParameter(3088),k=e.getParameter(2978),I=(new Ue).fromArray(O),B=(new Ue).fromArray(k);function z(t,r,n){let i=new Uint8Array(4),a=e.createTexture();e.bindTexture(t,a),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(let t=0;t<n;t++)e.texImage2D(r+t,0,6408,1,1,0,6408,5121,i);return a}let N={};function F(t){!0!==s[t]&&(e.enable(t),s[t]=!0)}function U(t){!1!==s[t]&&(e.disable(t),s[t]=!1)}N[3553]=z(3553,3553,1),N[34067]=z(34067,34069,6),i.setClear(0,0,0,1),a.setClear(1),o.setClear(0),F(2929),a.setFunc(3),G(!1),W(1),F(2884),V(0);let j={[b]:32774,101:32778,102:32779};if(n)j[103]=32775,j[104]=32776;else{let e=t.get("EXT_blend_minmax");null!==e&&(j[103]=e.MIN_EXT,j[104]=e.MAX_EXT)}let H={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function V(t,r,n,i,a,o,s,l){if(0!==t){if(!1===d&&(F(3042),d=!0),5===t)a=a||r,o=o||n,s=s||i,(r!==f||a!==v)&&(e.blendEquationSeparate(j[r],j[a]),f=r,v=a),(n!==m||i!==g||o!==y||s!==x)&&(e.blendFuncSeparate(H[n],H[i],H[o],H[s]),m=n,g=i,y=o,x=s),p=t,w=null;else if(t!==p||l!==w){if((f!==b||v!==b)&&(e.blendEquation(32774),f=b,v=b),l)switch(t){case 1:e.blendFuncSeparate(1,771,1,771);break;case 2:e.blendFunc(1,1);break;case 3:e.blendFuncSeparate(0,769,0,1);break;case 4:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case 1:e.blendFuncSeparate(770,771,1,771);break;case 2:e.blendFunc(770,1);break;case 3:e.blendFuncSeparate(0,769,0,1);break;case 4:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}m=null,g=null,y=null,x=null,p=t,w=l}}else!0===d&&(U(3042),d=!1)}function G(t){S!==t&&(t?e.frontFace(2304):e.frontFace(2305),S=t)}function W(t){0!==t?(F(2884),t!==_&&(1===t?e.cullFace(1029):2===t?e.cullFace(1028):e.cullFace(1032))):U(2884),_=t}function q(t,r,n){t?(F(32823),(M!==r||E!==n)&&(e.polygonOffset(r,n),M=r,E=n)):U(32823)}function Y(t){void 0===t&&(t=33984+C-1),P!==t&&(e.activeTexture(t),P=t)}return{buffers:{color:i,depth:a,stencil:o},enable:F,disable:U,bindFramebuffer:function(t,r){return l[t]!==r&&(e.bindFramebuffer(t,r),l[t]=r,n&&(36009===t&&(l[36160]=r),36160===t&&(l[36009]=r)),!0)},drawBuffers:function(n,i){let a=c,o=!1;if(n)if(a=u.get(i),void 0===a&&(a=[],u.set(i,a)),n.isWebGLMultipleRenderTargets){let e=n.texture;if(a.length!==e.length||36064!==a[0]){for(let t=0,r=e.length;t<r;t++)a[t]=36064+t;a.length=e.length,o=!0}}else 36064!==a[0]&&(a[0]=36064,o=!0);else 1029!==a[0]&&(a[0]=1029,o=!0);o&&(r.isWebGL2?e.drawBuffers(a):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(a))},useProgram:function(t){return h!==t&&(e.useProgram(t),h=t,!0)},setBlending:V,setMaterial:function(e,t){2===e.side?U(2884):F(2884);let r=1===e.side;t&&(r=!r),G(r),1===e.blending&&!1===e.transparent?V(0):V(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),a.setFunc(e.depthFunc),a.setTest(e.depthTest),a.setMask(e.depthWrite),i.setMask(e.colorWrite);let n=e.stencilWrite;o.setTest(n),n&&(o.setMask(e.stencilWriteMask),o.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),o.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),q(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage?F(32926):U(32926)},setFlipSided:G,setCullFace:W,setLineWidth:function(t){t!==A&&(T&&e.lineWidth(t),A=t)},setPolygonOffset:q,setScissorTest:function(e){e?F(3089):U(3089)},activeTexture:Y,bindTexture:function(t,r){null===P&&Y();let n=R[P];void 0===n&&(n={type:void 0,texture:void 0},R[P]=n),(n.type!==t||n.texture!==r)&&(e.bindTexture(t,r||N[t]),n.type=t,n.texture=r)},unbindTexture:function(){let t=R[P];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texStorage3D:function(){try{e.texStorage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texSubImage3D:function(){try{e.texSubImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(t){!1===I.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),I.copy(t))},viewport:function(t){!1===B.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),B.copy(t))},reset:function(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),!0===n&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),s={},P=null,R={},l={},u=new WeakMap,c=[],h=null,d=!1,p=null,f=null,m=null,g=null,v=null,y=null,x=null,w=!1,S=null,_=null,A=null,M=null,E=null,I.set(0,0,e.canvas.width,e.canvas.height),B.set(0,0,e.canvas.width,e.canvas.height),i.reset(),a.reset(),o.reset()}}}function Ea(e,t,r,n,i,a,o){let s,l=i.isWebGL2,u=i.maxTextures,c=i.maxCubemapSize,h=i.maxTextureSize,d=i.maxSamples,p=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,f=/OculusBrowser/g.test(navigator.userAgent),m=new WeakMap,g=new WeakMap,v=!1;try{v=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function y(e,t){return v?new OffscreenCanvas(e,t):Se("canvas")}function x(e,t,r,n){let i=1;if((e.width>n||e.height>n)&&(i=n/Math.max(e.width,e.height)),i<1||!0===t){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){let n=t?me:Math.floor,a=n(i*e.width),o=n(i*e.height);void 0===s&&(s=y(a,o));let l=r?y(a,o):s;return l.width=a,l.height=o,l.getContext("2d").drawImage(e,0,0,a,o),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+a+"x"+o+")."),l}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function b(e){return fe(e.width)&&fe(e.height)}function w(e,t){return e.generateMipmaps&&t&&e.minFilter!==C&&e.minFilter!==T}function S(t){e.generateMipmap(t)}function _(r,n,i,a,o=!1){if(!1===l)return n;if(null!==r){if(void 0!==e[r])return e[r];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+r+"'")}let s=n;return 6403===n&&(5126===i&&(s=33326),5131===i&&(s=33325),5121===i&&(s=33321)),33319===n&&(5126===i&&(s=33328),5131===i&&(s=33327),5121===i&&(s=33323)),6408===n&&(5126===i&&(s=34836),5131===i&&(s=34842),5121===i&&(s=a===J&&!1===o?35907:32856),32819===i&&(s=32854),32820===i&&(s=32855)),(33325===s||33326===s||33327===s||33328===s||34842===s||34836===s)&&t.get("EXT_color_buffer_float"),s}function F(e,t,r){return!0===w(e,r)||e.isFramebufferTexture&&e.minFilter!==C&&e.minFilter!==T?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function U(e){return e===C||1004===e||1005===e?9728:9729}function j(e){let t=e.target;t.removeEventListener("dispose",j),function(e){let t=n.get(e);if(void 0===t.__webglInit)return;let r=e.source,i=g.get(r);if(i){let n=i[t.__cacheKey];n.usedTimes--,0===n.usedTimes&&V(e),0===Object.keys(i).length&&g.delete(r)}n.remove(e)}(t),t.isVideoTexture&&m.delete(t)}function H(t){let r=t.target;r.removeEventListener("dispose",H),function(t){let r=t.texture,i=n.get(t),a=n.get(r);if(void 0!==a.__webglTexture&&(e.deleteTexture(a.__webglTexture),o.memory.textures--),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLCubeRenderTarget)for(let t=0;t<6;t++)e.deleteFramebuffer(i.__webglFramebuffer[t]),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer[t]);else e.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&e.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer&&e.deleteRenderbuffer(i.__webglColorRenderbuffer),i.__webglDepthRenderbuffer&&e.deleteRenderbuffer(i.__webglDepthRenderbuffer);if(t.isWebGLMultipleRenderTargets)for(let t=0,i=r.length;t<i;t++){let i=n.get(r[t]);i.__webglTexture&&(e.deleteTexture(i.__webglTexture),o.memory.textures--),n.remove(r[t])}n.remove(r),n.remove(t)}(r)}function V(t){let r=n.get(t);e.deleteTexture(r.__webglTexture);let i=t.source;delete g.get(i)[r.__cacheKey],o.memory.textures--}let G=0;function W(e,t){let i=n.get(e);if(e.isVideoTexture&&function(e){let t=o.render.frame;m.get(e)!==t&&(m.set(e,t),e.update())}(e),!1===e.isRenderTargetTexture&&e.version>0&&i.__version!==e.version){let r=e.image;if(null===r)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==r.complete)return void K(i,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}r.activeTexture(33984+t),r.bindTexture(3553,i.__webglTexture)}let q={[A]:10497,[M]:33071,[E]:33648},Y={[C]:9728,1004:9984,1005:9986,[T]:9729,1007:9985,[D]:9987};function X(r,a,o){if(o?(e.texParameteri(r,10242,q[a.wrapS]),e.texParameteri(r,10243,q[a.wrapT]),(32879===r||35866===r)&&e.texParameteri(r,32882,q[a.wrapR]),e.texParameteri(r,10240,Y[a.magFilter]),e.texParameteri(r,10241,Y[a.minFilter])):(e.texParameteri(r,10242,33071),e.texParameteri(r,10243,33071),(32879===r||35866===r)&&e.texParameteri(r,32882,33071),(a.wrapS!==M||a.wrapT!==M)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(r,10240,U(a.magFilter)),e.texParameteri(r,10241,U(a.minFilter)),a.minFilter!==C&&a.minFilter!==T&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){let o=t.get("EXT_texture_filter_anisotropic");if(a.type===O&&!1===t.has("OES_texture_float_linear")||!1===l&&a.type===k&&!1===t.has("OES_texture_half_float_linear"))return;(a.anisotropy>1||n.get(a).__currentAnisotropy)&&(e.texParameterf(r,o.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,i.getMaxAnisotropy())),n.get(a).__currentAnisotropy=a.anisotropy)}}function Z(t,r){let n=!1;void 0===t.__webglInit&&(t.__webglInit=!0,r.addEventListener("dispose",j));let i=r.source,a=g.get(i);void 0===a&&(a={},g.set(i,a));let s=function(e){let t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.encoding),t.join()}(r);if(s!==t.__cacheKey){void 0===a[s]&&(a[s]={texture:e.createTexture(),usedTimes:0},o.memory.textures++,n=!0),a[s].usedTimes++;let i=a[t.__cacheKey];void 0!==i&&(a[t.__cacheKey].usedTimes--,0===i.usedTimes&&V(r)),t.__cacheKey=s,t.__webglTexture=a[s].texture}return n}function K(t,n,i){let o=3553;n.isDataArrayTexture&&(o=35866),n.isData3DTexture&&(o=32879);let s=Z(t,n),u=n.source;if(r.activeTexture(33984+i),r.bindTexture(o,t.__webglTexture),u.version!==u.__currentVersion||!0===s){e.pixelStorei(37440,n.flipY),e.pixelStorei(37441,n.premultiplyAlpha),e.pixelStorei(3317,n.unpackAlignment),e.pixelStorei(37443,0);let i=function(e){return!l&&(e.wrapS!==M||e.wrapT!==M||e.minFilter!==C&&e.minFilter!==T)}(n)&&!1===b(n.image),s=x(n.image,i,!1,h);s=ae(n,s);let c=b(s)||l,d=a.convert(n.format,n.encoding),p=a.convert(n.type),f=_(n.internalFormat,d,p,n.encoding,n.isVideoTexture);X(o,n,c);let m,g=n.mipmaps,v=l&&!0!==n.isVideoTexture,y=void 0===t.__version,A=F(n,s,c);if(n.isDepthTexture)f=6402,l?f=n.type===O?36012:n.type===R?33190:n.type===I?35056:33189:n.type===O&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),n.format===z&&6402===f&&n.type!==P&&n.type!==R&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),n.type=P,p=a.convert(n.type)),n.format===N&&6402===f&&(f=34041,n.type!==I&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),n.type=I,p=a.convert(n.type))),v&&y?r.texStorage2D(3553,1,f,s.width,s.height):r.texImage2D(3553,0,f,s.width,s.height,0,d,p,null);else if(n.isDataTexture)if(g.length>0&&c){v&&y&&r.texStorage2D(3553,A,f,g[0].width,g[0].height);for(let e=0,t=g.length;e<t;e++)m=g[e],v?r.texSubImage2D(3553,e,0,0,m.width,m.height,d,p,m.data):r.texImage2D(3553,e,f,m.width,m.height,0,d,p,m.data);n.generateMipmaps=!1}else v?(y&&r.texStorage2D(3553,A,f,s.width,s.height),r.texSubImage2D(3553,0,0,0,s.width,s.height,d,p,s.data)):r.texImage2D(3553,0,f,s.width,s.height,0,d,p,s.data);else if(n.isCompressedTexture){v&&y&&r.texStorage2D(3553,A,f,g[0].width,g[0].height);for(let e=0,t=g.length;e<t;e++)m=g[e],n.format!==B?null!==d?v?r.compressedTexSubImage2D(3553,e,0,0,m.width,m.height,d,m.data):r.compressedTexImage2D(3553,e,f,m.width,m.height,0,m.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):v?r.texSubImage2D(3553,e,0,0,m.width,m.height,d,p,m.data):r.texImage2D(3553,e,f,m.width,m.height,0,d,p,m.data)}else if(n.isDataArrayTexture)v?(y&&r.texStorage3D(35866,A,f,s.width,s.height,s.depth),r.texSubImage3D(35866,0,0,0,0,s.width,s.height,s.depth,d,p,s.data)):r.texImage3D(35866,0,f,s.width,s.height,s.depth,0,d,p,s.data);else if(n.isData3DTexture)v?(y&&r.texStorage3D(32879,A,f,s.width,s.height,s.depth),r.texSubImage3D(32879,0,0,0,0,s.width,s.height,s.depth,d,p,s.data)):r.texImage3D(32879,0,f,s.width,s.height,s.depth,0,d,p,s.data);else if(n.isFramebufferTexture)v&&y?r.texStorage2D(3553,A,f,s.width,s.height):r.texImage2D(3553,0,f,s.width,s.height,0,d,p,null);else if(g.length>0&&c){v&&y&&r.texStorage2D(3553,A,f,g[0].width,g[0].height);for(let e=0,t=g.length;e<t;e++)m=g[e],v?r.texSubImage2D(3553,e,0,0,d,p,m):r.texImage2D(3553,e,f,d,p,m);n.generateMipmaps=!1}else v?(y&&r.texStorage2D(3553,A,f,s.width,s.height),r.texSubImage2D(3553,0,0,0,d,p,s)):r.texImage2D(3553,0,f,d,p,s);w(n,c)&&S(o),u.__currentVersion=u.version,n.onUpdate&&n.onUpdate(n)}t.__version=n.version}function $(t,i,o,s,l){let u=a.convert(o.format,o.encoding),c=a.convert(o.type),h=_(o.internalFormat,u,c,o.encoding);n.get(i).__hasExternalTextures||(32879===l||35866===l?r.texImage3D(l,0,h,i.width,i.height,i.depth,0,u,c,null):r.texImage2D(l,0,h,i.width,i.height,0,u,c,null)),r.bindFramebuffer(36160,t),ne(i)?p.framebufferTexture2DMultisampleEXT(36160,s,l,n.get(o).__webglTexture,0,re(i)):e.framebufferTexture2D(36160,s,l,n.get(o).__webglTexture,0),r.bindFramebuffer(36160,null)}function ee(t,r,n){if(e.bindRenderbuffer(36161,t),r.depthBuffer&&!r.stencilBuffer){let i=33189;if(n||ne(r)){let t=r.depthTexture;t&&t.isDepthTexture&&(t.type===O?i=36012:t.type===R&&(i=33190));let n=re(r);ne(r)?p.renderbufferStorageMultisampleEXT(36161,n,i,r.width,r.height):e.renderbufferStorageMultisample(36161,n,i,r.width,r.height)}else e.renderbufferStorage(36161,i,r.width,r.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(r.depthBuffer&&r.stencilBuffer){let i=re(r);n&&!1===ne(r)?e.renderbufferStorageMultisample(36161,i,35056,r.width,r.height):ne(r)?p.renderbufferStorageMultisampleEXT(36161,i,35056,r.width,r.height):e.renderbufferStorage(36161,34041,r.width,r.height),e.framebufferRenderbuffer(36160,33306,36161,t)}else{let t=!0===r.isWebGLMultipleRenderTargets?r.texture[0]:r.texture,i=a.convert(t.format,t.encoding),o=a.convert(t.type),s=_(t.internalFormat,i,o,t.encoding),l=re(r);n&&!1===ne(r)?e.renderbufferStorageMultisample(36161,l,s,r.width,r.height):ne(r)?p.renderbufferStorageMultisampleEXT(36161,l,s,r.width,r.height):e.renderbufferStorage(36161,s,r.width,r.height)}e.bindRenderbuffer(36161,null)}function te(t){let i=n.get(t),a=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture&&!i.__autoAllocateDepthBuffer){if(a)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,i){if(i&&i.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(r.bindFramebuffer(36160,t),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!n.get(i.depthTexture).__webglTexture||i.depthTexture.image.width!==i.width||i.depthTexture.image.height!==i.height)&&(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),W(i.depthTexture,0);let a=n.get(i.depthTexture).__webglTexture,o=re(i);if(i.depthTexture.format===z)ne(i)?p.framebufferTexture2DMultisampleEXT(36160,36096,3553,a,0,o):e.framebufferTexture2D(36160,36096,3553,a,0);else{if(i.depthTexture.format!==N)throw new Error("Unknown depthTexture format");ne(i)?p.framebufferTexture2DMultisampleEXT(36160,33306,3553,a,0,o):e.framebufferTexture2D(36160,33306,3553,a,0)}}(i.__webglFramebuffer,t)}else if(a){i.__webglDepthbuffer=[];for(let n=0;n<6;n++)r.bindFramebuffer(36160,i.__webglFramebuffer[n]),i.__webglDepthbuffer[n]=e.createRenderbuffer(),ee(i.__webglDepthbuffer[n],t,!1)}else r.bindFramebuffer(36160,i.__webglFramebuffer),i.__webglDepthbuffer=e.createRenderbuffer(),ee(i.__webglDepthbuffer,t,!1);r.bindFramebuffer(36160,null)}function re(e){return Math.min(d,e.samples)}function ne(e){let r=n.get(e);return l&&e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==r.__useRenderToTexture}function ae(e,r){let n=e.encoding,i=e.format,a=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||e.format===ie||n!==Q&&(n===J?!1===l?!0===t.has("EXT_sRGB")&&i===B?(e.format=ie,e.minFilter=T,e.generateMipmaps=!1):r=Ie.sRGBToLinear(r):(i!==B||a!==L)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",n)),r}this.allocateTextureUnit=function(){let e=G;return e>=u&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+u),G+=1,e},this.resetTextureUnits=function(){G=0},this.setTexture2D=W,this.setTexture2DArray=function(e,t){let i=n.get(e);e.version>0&&i.__version!==e.version?K(i,e,t):(r.activeTexture(33984+t),r.bindTexture(35866,i.__webglTexture))},this.setTexture3D=function(e,t){let i=n.get(e);e.version>0&&i.__version!==e.version?K(i,e,t):(r.activeTexture(33984+t),r.bindTexture(32879,i.__webglTexture))},this.setTextureCube=function(t,i){let o=n.get(t);t.version>0&&o.__version!==t.version?function(t,n,i){if(6!==n.image.length)return;let o=Z(t,n),s=n.source;if(r.activeTexture(33984+i),r.bindTexture(34067,t.__webglTexture),s.version!==s.__currentVersion||!0===o){e.pixelStorei(37440,n.flipY),e.pixelStorei(37441,n.premultiplyAlpha),e.pixelStorei(3317,n.unpackAlignment),e.pixelStorei(37443,0);let i=n.isCompressedTexture||n.image[0].isCompressedTexture,o=n.image[0]&&n.image[0].isDataTexture,u=[];for(let e=0;e<6;e++)u[e]=i||o?o?n.image[e].image:n.image[e]:x(n.image[e],!1,!0,c),u[e]=ae(n,u[e]);let h,d=u[0],p=b(d)||l,f=a.convert(n.format,n.encoding),m=a.convert(n.type),g=_(n.internalFormat,f,m,n.encoding),v=l&&!0!==n.isVideoTexture,y=void 0===t.__version,A=F(n,d,p);if(X(34067,n,p),i){v&&y&&r.texStorage2D(34067,A,g,d.width,d.height);for(let e=0;e<6;e++){h=u[e].mipmaps;for(let t=0;t<h.length;t++){let i=h[t];n.format!==B?null!==f?v?r.compressedTexSubImage2D(34069+e,t,0,0,i.width,i.height,f,i.data):r.compressedTexImage2D(34069+e,t,g,i.width,i.height,0,i.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):v?r.texSubImage2D(34069+e,t,0,0,i.width,i.height,f,m,i.data):r.texImage2D(34069+e,t,g,i.width,i.height,0,f,m,i.data)}}}else{h=n.mipmaps,v&&y&&(h.length>0&&A++,r.texStorage2D(34067,A,g,u[0].width,u[0].height));for(let e=0;e<6;e++)if(o){v?r.texSubImage2D(34069+e,0,0,0,u[e].width,u[e].height,f,m,u[e].data):r.texImage2D(34069+e,0,g,u[e].width,u[e].height,0,f,m,u[e].data);for(let t=0;t<h.length;t++){let n=h[t].image[e].image;v?r.texSubImage2D(34069+e,t+1,0,0,n.width,n.height,f,m,n.data):r.texImage2D(34069+e,t+1,g,n.width,n.height,0,f,m,n.data)}}else{v?r.texSubImage2D(34069+e,0,0,0,f,m,u[e]):r.texImage2D(34069+e,0,g,f,m,u[e]);for(let t=0;t<h.length;t++){let n=h[t];v?r.texSubImage2D(34069+e,t+1,0,0,f,m,n.image[e]):r.texImage2D(34069+e,t+1,g,f,m,n.image[e])}}}w(n,p)&&S(34067),s.__currentVersion=s.version,n.onUpdate&&n.onUpdate(n)}t.__version=n.version}(o,t,i):(r.activeTexture(33984+i),r.bindTexture(34067,o.__webglTexture))},this.rebindTextures=function(e,t,r){let i=n.get(e);void 0!==t&&$(i.__webglFramebuffer,e,e.texture,36064,3553),void 0!==r&&te(e)},this.setupRenderTarget=function(t){let s=t.texture,u=n.get(t),c=n.get(s);t.addEventListener("dispose",H),!0!==t.isWebGLMultipleRenderTargets&&(void 0===c.__webglTexture&&(c.__webglTexture=e.createTexture()),c.__version=s.version,o.memory.textures++);let h=!0===t.isWebGLCubeRenderTarget,d=!0===t.isWebGLMultipleRenderTargets,p=b(t)||l;if(h){u.__webglFramebuffer=[];for(let t=0;t<6;t++)u.__webglFramebuffer[t]=e.createFramebuffer()}else if(u.__webglFramebuffer=e.createFramebuffer(),d)if(i.drawBuffers){let r=t.texture;for(let t=0,i=r.length;t<i;t++){let i=n.get(r[t]);void 0===i.__webglTexture&&(i.__webglTexture=e.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(l&&t.samples>0&&!1===ne(t)){u.__webglMultisampledFramebuffer=e.createFramebuffer(),u.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,u.__webglColorRenderbuffer);let n=a.convert(s.format,s.encoding),i=a.convert(s.type),o=_(s.internalFormat,n,i,s.encoding),l=re(t);e.renderbufferStorageMultisample(36161,l,o,t.width,t.height),r.bindFramebuffer(36160,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,u.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),t.depthBuffer&&(u.__webglDepthRenderbuffer=e.createRenderbuffer(),ee(u.__webglDepthRenderbuffer,t,!0)),r.bindFramebuffer(36160,null)}if(h){r.bindTexture(34067,c.__webglTexture),X(34067,s,p);for(let e=0;e<6;e++)$(u.__webglFramebuffer[e],t,s,36064,34069+e);w(s,p)&&S(34067),r.unbindTexture()}else if(d){let e=t.texture;for(let i=0,a=e.length;i<a;i++){let a=e[i],o=n.get(a);r.bindTexture(3553,o.__webglTexture),X(3553,a,p),$(u.__webglFramebuffer,t,a,36064+i,3553),w(a,p)&&S(3553)}r.unbindTexture()}else{let e=3553;(t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(l?e=t.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),r.bindTexture(e,c.__webglTexture),X(e,s,p),$(u.__webglFramebuffer,t,s,36064,e),w(s,p)&&S(e),r.unbindTexture()}t.depthBuffer&&te(t)},this.updateRenderTargetMipmap=function(e){let t=b(e)||l,i=!0===e.isWebGLMultipleRenderTargets?e.texture:[e.texture];for(let a=0,o=i.length;a<o;a++){let o=i[a];if(w(o,t)){let t=e.isWebGLCubeRenderTarget?34067:3553,i=n.get(o).__webglTexture;r.bindTexture(t,i),S(t),r.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(l&&t.samples>0&&!1===ne(t)){let i=t.width,a=t.height,o=16384,s=[36064],l=t.stencilBuffer?33306:36096;t.depthBuffer&&s.push(l);let u=n.get(t),c=void 0!==u.__ignoreDepthValues&&u.__ignoreDepthValues;!1===c&&(t.depthBuffer&&(o|=256),t.stencilBuffer&&(o|=1024)),r.bindFramebuffer(36008,u.__webglMultisampledFramebuffer),r.bindFramebuffer(36009,u.__webglFramebuffer),!0===c&&(e.invalidateFramebuffer(36008,[l]),e.invalidateFramebuffer(36009,[l])),e.blitFramebuffer(0,0,i,a,0,0,i,a,o,9728),f&&e.invalidateFramebuffer(36008,s),r.bindFramebuffer(36008,null),r.bindFramebuffer(36009,u.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=te,this.setupFrameBufferTexture=$,this.useMultisampledRTT=ne}function Ca(e,t,r){let n=r.isWebGL2;return{convert:function(e,r=null){let i;if(e===L)return 5121;if(1017===e)return 32819;if(1018===e)return 32820;if(1010===e)return 5120;if(1011===e)return 5122;if(e===P)return 5123;if(1013===e)return 5124;if(e===R)return 5125;if(e===O)return 5126;if(e===k)return n?5131:(i=t.get("OES_texture_half_float"),null!==i?i.HALF_FLOAT_OES:null);if(1021===e)return 6406;if(e===B)return 6408;if(1024===e)return 6409;if(1025===e)return 6410;if(e===z)return 6402;if(e===N)return 34041;if(1028===e)return 6403;if(1022===e)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(e===ie)return i=t.get("EXT_sRGB"),null!==i?i.SRGB_ALPHA_EXT:null;if(1029===e)return 36244;if(1030===e)return 33319;if(1031===e)return 33320;if(1033===e)return 36249;if(e===F||e===U||e===j||e===H)if(r===J){if(i=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===i)return null;if(e===F)return i.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(e===U)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(e===j)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(e===H)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(i=t.get("WEBGL_compressed_texture_s3tc"),null===i)return null;if(e===F)return i.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===U)return i.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===j)return i.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===H)return i.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===e||35841===e||35842===e||35843===e){if(i=t.get("WEBGL_compressed_texture_pvrtc"),null===i)return null;if(35840===e)return i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===e)return i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===e)return i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===e)return i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===e)return i=t.get("WEBGL_compressed_texture_etc1"),null!==i?i.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===e||37496===e){if(i=t.get("WEBGL_compressed_texture_etc"),null===i)return null;if(37492===e)return r===J?i.COMPRESSED_SRGB8_ETC2:i.COMPRESSED_RGB8_ETC2;if(37496===e)return r===J?i.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:i.COMPRESSED_RGBA8_ETC2_EAC}if(37808===e||37809===e||37810===e||37811===e||37812===e||37813===e||37814===e||37815===e||37816===e||37817===e||37818===e||37819===e||37820===e||37821===e){if(i=t.get("WEBGL_compressed_texture_astc"),null===i)return null;if(37808===e)return r===J?i.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:i.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===e)return r===J?i.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:i.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===e)return r===J?i.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:i.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===e)return r===J?i.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:i.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===e)return r===J?i.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:i.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===e)return r===J?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:i.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===e)return r===J?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:i.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===e)return r===J?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:i.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===e)return r===J?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:i.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===e)return r===J?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:i.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===e)return r===J?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:i.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===e)return r===J?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:i.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===e)return r===J?i.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:i.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===e)return r===J?i.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:i.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===e){if(i=t.get("EXT_texture_compression_bptc"),null===i)return null;if(36492===e)return r===J?i.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:i.COMPRESSED_RGBA_BPTC_UNORM_EXT}return e===I?n?34042:(i=t.get("WEBGL_depth_texture"),null!==i?i.UNSIGNED_INT_24_8_WEBGL:null):void 0}}}_a.prototype.isMeshDistanceMaterial=!0;var Ta=class extends Yr{constructor(e=[]){super(),this.cameras=e}};Ta.prototype.isArrayCamera=!0;var Da=class extends Yt{constructor(){super(),this.type="Group"}};Da.prototype.isGroup=!0;var La={type:"move"},Pa=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Da,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Da,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new We,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new We),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Da,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new We,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new We),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,r){let n=null,i=null,a=null,o=this._targetRay,s=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState)if(null!==o&&(n=t.getPose(e.targetRaySpace,r),null!==n&&(o.matrix.fromArray(n.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),n.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(n.linearVelocity)):o.hasLinearVelocity=!1,n.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(n.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(La))),l&&e.hand){a=!0;for(let n of e.hand.values()){let e=t.getJointPose(n,r);if(void 0===l.joints[n.jointName]){let e=new Da;e.matrixAutoUpdate=!1,e.visible=!1,l.joints[n.jointName]=e,l.add(e)}let i=l.joints[n.jointName];null!==e&&(i.matrix.fromArray(e.transform.matrix),i.matrix.decompose(i.position,i.rotation,i.scale),i.jointRadius=e.radius),i.visible=null!==e}let n=l.joints["index-finger-tip"],i=l.joints["thumb-tip"],o=n.position.distanceTo(i.position),s=.02,u=.005;l.inputState.pinching&&o>s+u?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&o<=s-u&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==s&&e.gripSpace&&(i=t.getPose(e.gripSpace,r),null!==i&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1));return null!==o&&(o.visible=null!==n),null!==s&&(s.visible=null!==i),null!==l&&(l.visible=null!==a),this}},Ra=class extends Fe{constructor(e,t,r,n,i,a,o,s,l,u){if((u=void 0!==u?u:z)!==z&&u!==N)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===r&&u===z&&(r=P),void 0===r&&u===N&&(r=I),super(null,n,i,a,o,s,u,r,l),this.image={width:e,height:t},this.magFilter=void 0!==o?o:C,this.minFilter=void 0!==s?s:C,this.flipY=!1,this.generateMipmaps=!1}};Ra.prototype.isDepthTexture=!0;var Oa=class extends ae{constructor(e,t){super();let r=this,n=null,i=1,a=null,o="local-floor",s=null,l=null,u=null,c=null,h=null,d=t.getContextAttributes(),p=null,f=null,m=[],g=new Map,v=new Yr;v.layers.enable(1),v.viewport=new Ue;let y=new Yr;y.layers.enable(2),y.viewport=new Ue;let x=[v,y],b=new Ta;b.layers.enable(1),b.layers.enable(2);let w=null,S=null;function _(e){let t=g.get(e.inputSource);t&&t.dispatchEvent({type:e.type,data:e.inputSource})}function A(){g.forEach((function(e,t){e.disconnect(t)})),g.clear(),w=null,S=null,e.setRenderTarget(p),c=null,u=null,l=null,n=null,f=null,R.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}function M(e){let t=n.inputSources;for(let e=0;e<m.length;e++)g.set(t[e],m[e]);for(let t=0;t<e.removed.length;t++){let r=e.removed[t],n=g.get(r);n&&(n.dispatchEvent({type:"disconnected",data:r}),g.delete(r))}for(let t=0;t<e.added.length;t++){let r=e.added[t],n=g.get(r);n&&n.dispatchEvent({type:"connected",data:r})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=m[e];return void 0===t&&(t=new Pa,m[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=m[e];return void 0===t&&(t=new Pa,m[e]=t),t.getGripSpace()},this.getHand=function(e){let t=m[e];return void 0===t&&(t=new Pa,m[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){i=e,!0===r.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){o=e,!0===r.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return a},this.getBaseLayer=function(){return null!==u?u:c},this.getBinding=function(){return l},this.getFrame=function(){return h},this.getSession=function(){return n},this.setSession=async function(s){if(n=s,null!==n){if(p=e.getRenderTarget(),n.addEventListener("select",_),n.addEventListener("selectstart",_),n.addEventListener("selectend",_),n.addEventListener("squeeze",_),n.addEventListener("squeezestart",_),n.addEventListener("squeezeend",_),n.addEventListener("end",A),n.addEventListener("inputsourceschange",M),!0!==d.xrCompatible&&await t.makeXRCompatible(),void 0===n.renderState.layers||!1===e.capabilities.isWebGL2){let r={antialias:void 0!==n.renderState.layers||d.antialias,alpha:d.alpha,depth:d.depth,stencil:d.stencil,framebufferScaleFactor:i};c=new XRWebGLLayer(n,t,r),n.updateRenderState({baseLayer:c}),f=new je(c.framebufferWidth,c.framebufferHeight,{format:B,type:L,encoding:e.outputEncoding})}else{let r=null,a=null,o=null;d.depth&&(o=d.stencil?35056:33190,r=d.stencil?N:z,a=d.stencil?I:P);let s={colorFormat:e.outputEncoding===J?35907:32856,depthFormat:o,scaleFactor:i};l=new XRWebGLBinding(n,t),u=l.createProjectionLayer(s),n.updateRenderState({layers:[u]}),f=new je(u.textureWidth,u.textureHeight,{format:B,type:L,depthTexture:new Ra(u.textureWidth,u.textureHeight,a,void 0,void 0,void 0,void 0,void 0,void 0,r),stencilBuffer:d.stencil,encoding:e.outputEncoding,samples:d.antialias?4:0}),e.properties.get(f).__ignoreDepthValues=u.ignoreDepthValues}f.isXRRenderTarget=!0,this.setFoveation(1),a=await n.requestReferenceSpace(o),R.setContext(n),R.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}};let E=new We,C=new We;function T(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){if(null===n)return;b.near=y.near=v.near=e.near,b.far=y.far=v.far=e.far,(w!==b.near||S!==b.far)&&(n.updateRenderState({depthNear:b.near,depthFar:b.far}),w=b.near,S=b.far);let t=e.parent,r=b.cameras;T(b,t);for(let e=0;e<r.length;e++)T(r[e],t);b.matrixWorld.decompose(b.position,b.quaternion,b.scale),e.position.copy(b.position),e.quaternion.copy(b.quaternion),e.scale.copy(b.scale),e.matrix.copy(b.matrix),e.matrixWorld.copy(b.matrixWorld);let i=e.children;for(let e=0,t=i.length;e<t;e++)i[e].updateMatrixWorld(!0);2===r.length?function(e,t,r){E.setFromMatrixPosition(t.matrixWorld),C.setFromMatrixPosition(r.matrixWorld);let n=E.distanceTo(C),i=t.projectionMatrix.elements,a=r.projectionMatrix.elements,o=i[14]/(i[10]-1),s=i[14]/(i[10]+1),l=(i[9]+1)/i[5],u=(i[9]-1)/i[5],c=(i[8]-1)/i[0],h=(a[8]+1)/a[0],d=o*c,p=o*h,f=n/(-c+h),m=f*-c;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(f),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();let g=o+f,v=s+f,y=d-m,x=p+(n-m),b=l*s/v*g,w=u*s/v*g;e.projectionMatrix.makePerspective(y,x,b,w,g,v)}(b,v,y):b.projectionMatrix.copy(v.projectionMatrix)},this.getCamera=function(){return b},this.getFoveation=function(){return null!==u?u.fixedFoveation:null!==c?c.fixedFoveation:void 0},this.setFoveation=function(e){null!==u&&(u.fixedFoveation=e),null!==c&&void 0!==c.fixedFoveation&&(c.fixedFoveation=e)};let D=null,R=new on;R.setAnimationLoop((function(t,r){if(s=r.getViewerPose(a),h=r,null!==s){let t=s.views;null!==c&&(e.setRenderTargetFramebuffer(f,c.framebuffer),e.setRenderTarget(f));let r=!1;t.length!==b.cameras.length&&(b.cameras.length=0,r=!0);for(let n=0;n<t.length;n++){let i=t[n],a=null;if(null!==c)a=c.getViewport(i);else{let t=l.getViewSubImage(u,i);a=t.viewport,0===n&&(e.setRenderTargetTextures(f,t.colorTexture,u.ignoreDepthValues?void 0:t.depthStencilTexture),e.setRenderTarget(f))}let o=x[n];o.matrix.fromArray(i.transform.matrix),o.projectionMatrix.fromArray(i.projectionMatrix),o.viewport.set(a.x,a.y,a.width,a.height),0===n&&b.matrix.copy(o.matrix),!0===r&&b.cameras.push(o)}}let i=n.inputSources;for(let e=0;e<m.length;e++){let t=m[e],n=i[e];t.update(n,r,a)}D&&D(t,r),h=null})),this.setAnimationLoop=function(e){D=e},this.dispose=function(){}}};function ka(e,t){function r(r,n){r.opacity.value=n.opacity,n.color&&r.diffuse.value.copy(n.color),n.emissive&&r.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(r.map.value=n.map),n.alphaMap&&(r.alphaMap.value=n.alphaMap),n.bumpMap&&(r.bumpMap.value=n.bumpMap,r.bumpScale.value=n.bumpScale,1===n.side&&(r.bumpScale.value*=-1)),n.displacementMap&&(r.displacementMap.value=n.displacementMap,r.displacementScale.value=n.displacementScale,r.displacementBias.value=n.displacementBias),n.emissiveMap&&(r.emissiveMap.value=n.emissiveMap),n.normalMap&&(r.normalMap.value=n.normalMap,r.normalScale.value.copy(n.normalScale),1===n.side&&r.normalScale.value.negate()),n.specularMap&&(r.specularMap.value=n.specularMap),n.alphaTest>0&&(r.alphaTest.value=n.alphaTest);let i,a,o=t.get(n).envMap;if(o&&(r.envMap.value=o,r.flipEnvMap.value=o.isCubeTexture&&!1===o.isRenderTargetTexture?-1:1,r.reflectivity.value=n.reflectivity,r.ior.value=n.ior,r.refractionRatio.value=n.refractionRatio),n.lightMap){r.lightMap.value=n.lightMap;let t=!0!==e.physicallyCorrectLights?Math.PI:1;r.lightMapIntensity.value=n.lightMapIntensity*t}n.aoMap&&(r.aoMap.value=n.aoMap,r.aoMapIntensity.value=n.aoMapIntensity),n.map?i=n.map:n.specularMap?i=n.specularMap:n.displacementMap?i=n.displacementMap:n.normalMap?i=n.normalMap:n.bumpMap?i=n.bumpMap:n.roughnessMap?i=n.roughnessMap:n.metalnessMap?i=n.metalnessMap:n.alphaMap?i=n.alphaMap:n.emissiveMap?i=n.emissiveMap:n.clearcoatMap?i=n.clearcoatMap:n.clearcoatNormalMap?i=n.clearcoatNormalMap:n.clearcoatRoughnessMap?i=n.clearcoatRoughnessMap:n.specularIntensityMap?i=n.specularIntensityMap:n.specularColorMap?i=n.specularColorMap:n.transmissionMap?i=n.transmissionMap:n.thicknessMap?i=n.thicknessMap:n.sheenColorMap?i=n.sheenColorMap:n.sheenRoughnessMap&&(i=n.sheenRoughnessMap),void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),r.uvTransform.value.copy(i.matrix)),n.aoMap?a=n.aoMap:n.lightMap&&(a=n.lightMap),void 0!==a&&(a.isWebGLRenderTarget&&(a=a.texture),!0===a.matrixAutoUpdate&&a.updateMatrix(),r.uv2Transform.value.copy(a.matrix))}return{refreshFogUniforms:function(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)},refreshMaterialUniforms:function(e,n,i,a,o){n.isMeshBasicMaterial||n.isMeshLambertMaterial?r(e,n):n.isMeshToonMaterial?(r(e,n),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(e,n)):n.isMeshPhongMaterial?(r(e,n),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}(e,n)):n.isMeshStandardMaterial?(r(e,n),function(e,r){e.roughness.value=r.roughness,e.metalness.value=r.metalness,r.roughnessMap&&(e.roughnessMap.value=r.roughnessMap),r.metalnessMap&&(e.metalnessMap.value=r.metalnessMap),t.get(r).envMap&&(e.envMapIntensity.value=r.envMapIntensity)}(e,n),n.isMeshPhysicalMaterial&&function(e,t,r){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap)),t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap),t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,1===t.side&&e.clearcoatNormalScale.value.negate())),t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=r.texture,e.transmissionSamplerSize.value.set(r.width,r.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor)),e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap),t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap)}(e,n,o)):n.isMeshMatcapMaterial?(r(e,n),function(e,t){t.matcap&&(e.matcap.value=t.matcap)}(e,n)):n.isMeshDepthMaterial?r(e,n):n.isMeshDistanceMaterial?(r(e,n),function(e,t){e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(e,n)):n.isMeshNormalMaterial?r(e,n):n.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(e,n),n.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,n)):n.isPointsMaterial?function(e,t,r,n){let i;e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*r,e.scale.value=.5*n,t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest),t.map?i=t.map:t.alphaMap&&(i=t.alphaMap),void 0!==i&&(!0===i.matrixAutoUpdate&&i.updateMatrix(),e.uvTransform.value.copy(i.matrix))}(e,n,i,a):n.isSpriteMaterial?function(e,t){let r;e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest),t.map?r=t.map:t.alphaMap&&(r=t.alphaMap),void 0!==r&&(!0===r.matrixAutoUpdate&&r.updateMatrix(),e.uvTransform.value.copy(r.matrix))}(e,n):n.isShadowMaterial?(e.color.value.copy(n.color),e.opacity.value=n.opacity):n.isShaderMaterial&&(n.uniformsNeedUpdate=!1)}}}function Ia(e={}){let t,r=void 0!==e.canvas?e.canvas:function(){let e=Se("canvas");return e.style.display="block",e}(),n=void 0!==e.context?e.context:null,i=void 0===e.depth||e.depth,a=void 0===e.stencil||e.stencil,o=void 0!==e.antialias&&e.antialias,s=void 0===e.premultipliedAlpha||e.premultipliedAlpha,l=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,u=void 0!==e.powerPreference?e.powerPreference:"default",c=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat;t=void 0!==e.context?n.getContextAttributes().alpha:void 0!==e.alpha&&e.alpha;let h=null,d=null,p=[],f=[];this.domElement=r,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Q,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1;let m=this,g=!1,v=0,y=0,x=null,b=-1,w=null,S=new Ue,_=new Ue,A=null,M=r.width,E=r.height,C=1,T=null,P=null,R=new Ue(0,0,M,E),I=new Ue(0,0,M,E),z=!1,N=new an,F=!1,U=!1,j=null,H=new St,V=new ve,G=new We,W={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function q(){return null===x?C:1}let Y,X,J,Z,K,$,ee,te,re,ne,ie,ae,oe,se,le,ue,ce,he,de,pe,fe,ge,ye,xe=n;function be(e,t){for(let n=0;n<e.length;n++){let i=e[n],a=r.getContext(i,t);if(null!==a)return a}return null}try{let e={alpha:!0,depth:i,stencil:a,antialias:o,premultipliedAlpha:s,preserveDrawingBuffer:l,powerPreference:u,failIfMajorPerformanceCaveat:c};if("setAttribute"in r&&r.setAttribute("data-engine","three.js r139"),r.addEventListener("webglcontextlost",Ae,!1),r.addEventListener("webglcontextrestored",Me,!1),null===xe){let t=["webgl2","webgl","experimental-webgl"];if(!0===m.isWebGL1Renderer&&t.shift(),xe=be(t,e),null===xe)throw be(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===xe.getShaderPrecisionFormat&&(xe.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){throw console.error("THREE.WebGLRenderer: "+e.message),e}function we(){Y=new Rn(xe),X=new mn(xe,Y,e),Y.init(X),ge=new Ca(xe,Y,X),J=new Ma(xe,Y,X),Z=new In(xe),K=new ha,$=new Ea(xe,Y,J,K,X,ge,Z),ee=new vn(m),te=new Pn(m),re=new sn(xe,X),ye=new pn(xe,Y,re,X),ne=new On(xe,re,Z,ye),ie=new Un(xe,ne,re,Z),de=new Fn(xe,X,$),ue=new gn(K),ae=new ca(m,ee,te,Y,X,ye,ue),oe=new ka(m,K),se=new ma,le=new wa(Y,X),he=new dn(m,ee,J,ie,t,s),ce=new Aa(m,ie,X),pe=new fn(xe,Y,Z,X),fe=new kn(xe,Y,Z,X),Z.programs=ae.programs,m.capabilities=X,m.extensions=Y,m.properties=K,m.renderLists=se,m.shadowMap=ce,m.state=J,m.info=Z}we();let _e=new Oa(m,xe);function Ae(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),g=!0}function Me(){console.log("THREE.WebGLRenderer: Context Restored."),g=!1;let e=Z.autoReset,t=ce.enabled,r=ce.autoUpdate,n=ce.needsUpdate,i=ce.type;we(),Z.autoReset=e,ce.enabled=t,ce.autoUpdate=r,ce.needsUpdate=n,ce.type=i}function Ee(e){let t=e.target;t.removeEventListener("dispose",Ee),function(e){(function(e){let t=K.get(e).programs;void 0!==t&&(t.forEach((function(e){ae.releaseProgram(e)})),e.isShaderMaterial&&ae.releaseShaderCache(e))})(e),K.remove(e)}(t)}this.xr=_e,this.getContext=function(){return xe},this.getContextAttributes=function(){return xe.getContextAttributes()},this.forceContextLoss=function(){let e=Y.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){let e=Y.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return C},this.setPixelRatio=function(e){void 0!==e&&(C=e,this.setSize(M,E,!1))},this.getSize=function(e){return e.set(M,E)},this.setSize=function(e,t,n){_e.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(M=e,E=t,r.width=Math.floor(e*C),r.height=Math.floor(t*C),!1!==n&&(r.style.width=e+"px",r.style.height=t+"px"),this.setViewport(0,0,e,t))},this.getDrawingBufferSize=function(e){return e.set(M*C,E*C).floor()},this.setDrawingBufferSize=function(e,t,n){M=e,E=t,C=n,r.width=Math.floor(e*n),r.height=Math.floor(t*n),this.setViewport(0,0,e,t)},this.getCurrentViewport=function(e){return e.copy(S)},this.getViewport=function(e){return e.copy(R)},this.setViewport=function(e,t,r,n){e.isVector4?R.set(e.x,e.y,e.z,e.w):R.set(e,t,r,n),J.viewport(S.copy(R).multiplyScalar(C).floor())},this.getScissor=function(e){return e.copy(I)},this.setScissor=function(e,t,r,n){e.isVector4?I.set(e.x,e.y,e.z,e.w):I.set(e,t,r,n),J.scissor(_.copy(I).multiplyScalar(C).floor())},this.getScissorTest=function(){return z},this.setScissorTest=function(e){J.setScissorTest(z=e)},this.setOpaqueSort=function(e){T=e},this.setTransparentSort=function(e){P=e},this.getClearColor=function(e){return e.copy(he.getClearColor())},this.setClearColor=function(){he.setClearColor.apply(he,arguments)},this.getClearAlpha=function(){return he.getClearAlpha()},this.setClearAlpha=function(){he.setClearAlpha.apply(he,arguments)},this.clear=function(e=!0,t=!0,r=!0){let n=0;e&&(n|=16384),t&&(n|=256),r&&(n|=1024),xe.clear(n)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){r.removeEventListener("webglcontextlost",Ae,!1),r.removeEventListener("webglcontextrestored",Me,!1),se.dispose(),le.dispose(),K.dispose(),ee.dispose(),te.dispose(),ie.dispose(),ye.dispose(),ae.dispose(),_e.dispose(),_e.removeEventListener("sessionstart",Te),_e.removeEventListener("sessionend",De),j&&(j.dispose(),j=null),Le.stop()},this.renderBufferDirect=function(e,t,r,n,i,a){null===t&&(t=W);let o=i.isMesh&&i.matrixWorld.determinant()<0,s=function(e,t,r,n,i){!0!==t.isScene&&(t=W),$.resetTextureUnits();let a=t.fog,o=n.isMeshStandardMaterial?t.environment:null,s=null===x?m.outputEncoding:!0===x.isXRRenderTarget?x.texture.encoding:Q,l=(n.isMeshStandardMaterial?te:ee).get(n.envMap||o),u=!0===n.vertexColors&&!!r.attributes.color&&4===r.attributes.color.itemSize,c=!!n.normalMap&&!!r.attributes.tangent,h=!!r.morphAttributes.position,p=!!r.morphAttributes.normal,f=!!r.morphAttributes.color,g=n.toneMapped?m.toneMapping:0,v=r.morphAttributes.position||r.morphAttributes.normal||r.morphAttributes.color,y=void 0!==v?v.length:0,S=K.get(n),_=d.state.lights;if(!0===F&&(!0===U||e!==w)){let t=e===w&&n.id===b;ue.setState(n,e,t)}let A=!1;n.version===S.__version?(S.needsLights&&S.lightsStateVersion!==_.state.version||S.outputEncoding!==s||i.isInstancedMesh&&!1===S.instancing||!i.isInstancedMesh&&!0===S.instancing||i.isSkinnedMesh&&!1===S.skinning||!i.isSkinnedMesh&&!0===S.skinning||S.envMap!==l||n.fog&&S.fog!==a||void 0!==S.numClippingPlanes&&(S.numClippingPlanes!==ue.numPlanes||S.numIntersection!==ue.numIntersection)||S.vertexAlphas!==u||S.vertexTangents!==c||S.morphTargets!==h||S.morphNormals!==p||S.morphColors!==f||S.toneMapping!==g||!0===X.isWebGL2&&S.morphTargetsCount!==y)&&(A=!0):(A=!0,S.__version=n.version);let M=S.currentProgram;!0===A&&(M=Ie(n,t,i));let T=!1,D=!1,L=!1,P=M.getUniforms(),R=S.uniforms;if(J.useProgram(M.program)&&(T=!0,D=!0,L=!0),n.id!==b&&(b=n.id,D=!0),T||w!==e){if(P.setValue(xe,"projectionMatrix",e.projectionMatrix),X.logarithmicDepthBuffer&&P.setValue(xe,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),w!==e&&(w=e,D=!0,L=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshStandardMaterial||n.envMap){let t=P.map.cameraPosition;void 0!==t&&t.setValue(xe,G.setFromMatrixPosition(e.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial)&&P.setValue(xe,"isOrthographic",!0===e.isOrthographicCamera),(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.isShadowMaterial||i.isSkinnedMesh)&&P.setValue(xe,"viewMatrix",e.matrixWorldInverse)}if(i.isSkinnedMesh){P.setOptional(xe,i,"bindMatrix"),P.setOptional(xe,i,"bindMatrixInverse");let e=i.skeleton;e&&(X.floatVertexTextures?(null===e.boneTexture&&e.computeBoneTexture(),P.setValue(xe,"boneTexture",e.boneTexture,$),P.setValue(xe,"boneTextureSize",e.boneTextureSize)):P.setOptional(xe,e,"boneMatrices"))}let O=r.morphAttributes;return(void 0!==O.position||void 0!==O.normal||void 0!==O.color&&!0===X.isWebGL2)&&de.update(i,r,n,M),(D||S.receiveShadow!==i.receiveShadow)&&(S.receiveShadow=i.receiveShadow,P.setValue(xe,"receiveShadow",i.receiveShadow)),D&&(P.setValue(xe,"toneMappingExposure",m.toneMappingExposure),S.needsLights&&function(e,t){e.ambientLightColor.needsUpdate=t,e.lightProbe.needsUpdate=t,e.directionalLights.needsUpdate=t,e.directionalLightShadows.needsUpdate=t,e.pointLights.needsUpdate=t,e.pointLightShadows.needsUpdate=t,e.spotLights.needsUpdate=t,e.spotLightShadows.needsUpdate=t,e.rectAreaLights.needsUpdate=t,e.hemisphereLights.needsUpdate=t}(R,L),a&&n.fog&&oe.refreshFogUniforms(R,a),oe.refreshMaterialUniforms(R,n,C,E,j),Gi.upload(xe,S.uniformsList,R,$)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(Gi.upload(xe,S.uniformsList,R,$),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&P.setValue(xe,"center",i.center),P.setValue(xe,"modelViewMatrix",i.modelViewMatrix),P.setValue(xe,"normalMatrix",i.normalMatrix),P.setValue(xe,"modelMatrix",i.matrixWorld),M}(e,t,r,n,i);J.setMaterial(n,o);let l=r.index,u=r.attributes.position;if(null===l){if(void 0===u||0===u.count)return}else if(0===l.count)return;let c=1;!0===n.wireframe&&(l=ne.getWireframeAttribute(r),c=2),ye.setup(i,n,s,r,l);let h,p=pe;null!==l&&(h=re.get(l),p=fe,p.setIndex(h));let f=null!==l?l.count:u.count,g=r.drawRange.start*c,v=r.drawRange.count*c,y=null!==a?a.start*c:0,S=null!==a?a.count*c:1/0,_=Math.max(g,y),A=Math.min(f,g+v,y+S)-1,M=Math.max(0,A-_+1);if(0!==M){if(i.isMesh)!0===n.wireframe?(J.setLineWidth(n.wireframeLinewidth*q()),p.setMode(1)):p.setMode(4);else if(i.isLine){let e=n.linewidth;void 0===e&&(e=1),J.setLineWidth(e*q()),i.isLineSegments?p.setMode(1):i.isLineLoop?p.setMode(2):p.setMode(3)}else i.isPoints?p.setMode(0):i.isSprite&&p.setMode(4);if(i.isInstancedMesh)p.renderInstances(_,M,i.count);else if(r.isInstancedBufferGeometry){let e=Math.min(r.instanceCount,r._maxInstanceCount);p.renderInstances(_,M,e)}else p.render(_,M)}},this.compile=function(e,t){d=le.get(e),d.init(),f.push(d),e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(d.pushLight(e),e.castShadow&&d.pushShadow(e))})),d.setupLights(m.physicallyCorrectLights),e.traverse((function(t){let r=t.material;if(r)if(Array.isArray(r))for(let n=0;n<r.length;n++)Ie(r[n],e,t);else Ie(r,e,t)})),f.pop(),d=null};let Ce=null;function Te(){Le.stop()}function De(){Le.start()}let Le=new on;function Pe(e,t,r,n){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)r=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)d.pushLight(e),e.castShadow&&d.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||N.intersectsSprite(e)){n&&G.setFromMatrixPosition(e.matrixWorld).applyMatrix4(H);let t=ie.update(e),i=e.material;i.visible&&h.push(e,t,i,r,G.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==Z.render.frame&&(e.skeleton.update(),e.skeleton.frame=Z.render.frame),!e.frustumCulled||N.intersectsObject(e))){n&&G.setFromMatrixPosition(e.matrixWorld).applyMatrix4(H);let t=ie.update(e),i=e.material;if(Array.isArray(i)){let n=t.groups;for(let a=0,o=n.length;a<o;a++){let o=n[a],s=i[o.materialIndex];s&&s.visible&&h.push(e,t,s,r,G.z,o)}}else i.visible&&h.push(e,t,i,r,G.z,null)}let i=e.children;for(let e=0,a=i.length;e<a;e++)Pe(i[e],t,r,n)}function Re(e,t,r,n){let i=e.opaque,a=e.transmissive,s=e.transparent;d.setupLightsView(r),a.length>0&&function(e,t,r){let n=X.isWebGL2;null===j&&(j=new je(1,1,{generateMipmaps:!0,type:null!==ge.convert(k)?k:L,minFilter:D,samples:n&&!0===o?4:0})),m.getDrawingBufferSize(V),n?j.setSize(V.x,V.y):j.setSize(me(V.x),me(V.y));let i=m.getRenderTarget();m.setRenderTarget(j),m.clear();let a=m.toneMapping;m.toneMapping=0,Oe(e,t,r),m.toneMapping=a,$.updateMultisampleRenderTarget(j),$.updateRenderTargetMipmap(j),m.setRenderTarget(i)}(i,t,r),n&&J.viewport(S.copy(n)),i.length>0&&Oe(i,t,r),a.length>0&&Oe(a,t,r),s.length>0&&Oe(s,t,r),J.buffers.depth.setTest(!0),J.buffers.depth.setMask(!0),J.buffers.color.setMask(!0),J.setPolygonOffset(!1)}function Oe(e,t,r){let n=!0===t.isScene?t.overrideMaterial:null;for(let i=0,a=e.length;i<a;i++){let a=e[i],o=a.object,s=a.geometry,l=null===n?a.material:n,u=a.group;o.layers.test(r.layers)&&ke(o,t,r,s,l,u)}}function ke(e,t,r,n,i,a){e.onBeforeRender(m,t,r,n,i,a),e.modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),i.onBeforeRender(m,t,r,n,e,a),!0===i.transparent&&2===i.side?(i.side=1,i.needsUpdate=!0,m.renderBufferDirect(r,t,n,i,e,a),i.side=0,i.needsUpdate=!0,m.renderBufferDirect(r,t,n,i,e,a),i.side=2):m.renderBufferDirect(r,t,n,i,e,a),e.onAfterRender(m,t,r,n,i,a)}function Ie(e,t,r){!0!==t.isScene&&(t=W);let n=K.get(e),i=d.state.lights,a=d.state.shadowsArray,o=i.state.version,s=ae.getParameters(e,i.state,a,t,r),l=ae.getProgramCacheKey(s),u=n.programs;n.environment=e.isMeshStandardMaterial?t.environment:null,n.fog=t.fog,n.envMap=(e.isMeshStandardMaterial?te:ee).get(e.envMap||n.environment),void 0===u&&(e.addEventListener("dispose",Ee),u=new Map,n.programs=u);let c=u.get(l);if(void 0!==c){if(n.currentProgram===c&&n.lightsStateVersion===o)return Be(e,s),c}else s.uniforms=ae.getUniforms(e),e.onBuild(r,s,m),e.onBeforeCompile(s,m),c=ae.acquireProgram(s,l),u.set(l,c),n.uniforms=s.uniforms;let h=n.uniforms;(!e.isShaderMaterial&&!e.isRawShaderMaterial||!0===e.clipping)&&(h.clippingPlanes=ue.uniform),Be(e,s),n.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),n.lightsStateVersion=o,n.needsLights&&(h.ambientLightColor.value=i.state.ambient,h.lightProbe.value=i.state.probe,h.directionalLights.value=i.state.directional,h.directionalLightShadows.value=i.state.directionalShadow,h.spotLights.value=i.state.spot,h.spotLightShadows.value=i.state.spotShadow,h.rectAreaLights.value=i.state.rectArea,h.ltc_1.value=i.state.rectAreaLTC1,h.ltc_2.value=i.state.rectAreaLTC2,h.pointLights.value=i.state.point,h.pointLightShadows.value=i.state.pointShadow,h.hemisphereLights.value=i.state.hemi,h.directionalShadowMap.value=i.state.directionalShadowMap,h.directionalShadowMatrix.value=i.state.directionalShadowMatrix,h.spotShadowMap.value=i.state.spotShadowMap,h.spotShadowMatrix.value=i.state.spotShadowMatrix,h.pointShadowMap.value=i.state.pointShadowMap,h.pointShadowMatrix.value=i.state.pointShadowMatrix);let p=c.getUniforms(),f=Gi.seqWithValue(p.seq,h);return n.currentProgram=c,n.uniformsList=f,c}function Be(e,t){let r=K.get(e);r.outputEncoding=t.outputEncoding,r.instancing=t.instancing,r.skinning=t.skinning,r.morphTargets=t.morphTargets,r.morphNormals=t.morphNormals,r.morphColors=t.morphColors,r.morphTargetsCount=t.morphTargetsCount,r.numClippingPlanes=t.numClippingPlanes,r.numIntersection=t.numClipIntersection,r.vertexAlphas=t.vertexAlphas,r.vertexTangents=t.vertexTangents,r.toneMapping=t.toneMapping}Le.setAnimationLoop((function(e){Ce&&Ce(e)})),typeof self<"u"&&Le.setContext(self),this.setAnimationLoop=function(e){Ce=e,_e.setAnimationLoop(e),null===e?Le.stop():Le.start()},_e.addEventListener("sessionstart",Te),_e.addEventListener("sessionend",De),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===g)return;!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),!0===_e.enabled&&!0===_e.isPresenting&&(!0===_e.cameraAutoUpdate&&_e.updateCamera(t),t=_e.getCamera()),!0===e.isScene&&e.onBeforeRender(m,e,t,x),d=le.get(e,f.length),d.init(),f.push(d),H.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),N.setFromProjectionMatrix(H),U=this.localClippingEnabled,F=ue.init(this.clippingPlanes,U,t),h=se.get(e,p.length),h.init(),p.push(h),Pe(e,t,0,m.sortObjects),h.finish(),!0===m.sortObjects&&h.sort(T,P),!0===F&&ue.beginShadows();let r=d.state.shadowsArray;if(ce.render(r,e,t),!0===F&&ue.endShadows(),!0===this.info.autoReset&&this.info.reset(),he.render(h,e),d.setupLights(m.physicallyCorrectLights),t.isArrayCamera){let r=t.cameras;for(let t=0,n=r.length;t<n;t++){let n=r[t];Re(h,e,n,n.viewport)}}else Re(h,e,t);null!==x&&($.updateMultisampleRenderTarget(x),$.updateRenderTargetMipmap(x)),!0===e.isScene&&e.onAfterRender(m,e,t),ye.resetDefaultState(),b=-1,w=null,f.pop(),d=f.length>0?f[f.length-1]:null,p.pop(),h=p.length>0?p[p.length-1]:null},this.getActiveCubeFace=function(){return v},this.getActiveMipmapLevel=function(){return y},this.getRenderTarget=function(){return x},this.setRenderTargetTextures=function(e,t,r){K.get(e.texture).__webglTexture=t,K.get(e.depthTexture).__webglTexture=r;let n=K.get(e);n.__hasExternalTextures=!0,n.__hasExternalTextures&&(n.__autoAllocateDepthBuffer=void 0===r,n.__autoAllocateDepthBuffer||!0===Y.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),n.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(e,t){let r=K.get(e);r.__webglFramebuffer=t,r.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e,t=0,r=0){x=e,v=t,y=r;let n=!0;if(e){let t=K.get(e);void 0!==t.__useDefaultFramebuffer?(J.bindFramebuffer(36160,null),n=!1):void 0===t.__webglFramebuffer?$.setupRenderTarget(e):t.__hasExternalTextures&&$.rebindTextures(e,K.get(e.texture).__webglTexture,K.get(e.depthTexture).__webglTexture)}let i=null,a=!1,o=!1;if(e){let r=e.texture;(r.isData3DTexture||r.isDataArrayTexture)&&(o=!0);let n=K.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(i=n[t],a=!0):i=X.isWebGL2&&e.samples>0&&!1===$.useMultisampledRTT(e)?K.get(e).__webglMultisampledFramebuffer:n,S.copy(e.viewport),_.copy(e.scissor),A=e.scissorTest}else S.copy(R).multiplyScalar(C).floor(),_.copy(I).multiplyScalar(C).floor(),A=z;if(J.bindFramebuffer(36160,i)&&X.drawBuffers&&n&&J.drawBuffers(e,i),J.viewport(S),J.scissor(_),J.setScissorTest(A),a){let n=K.get(e.texture);xe.framebufferTexture2D(36160,36064,34069+t,n.__webglTexture,r)}else if(o){let n=K.get(e.texture),i=t||0;xe.framebufferTextureLayer(36160,36064,n.__webglTexture,r||0,i)}b=-1},this.readRenderTargetPixels=function(e,t,r,n,i,a,o){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let s=K.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==o&&(s=s[o]),s){J.bindFramebuffer(36160,s);try{let o=e.texture,s=o.format,l=o.type;if(s!==B&&ge.convert(s)!==xe.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");let u=l===k&&(Y.has("EXT_color_buffer_half_float")||X.isWebGL2&&Y.has("EXT_color_buffer_float"));if(!(l===L||ge.convert(l)===xe.getParameter(35738)||l===O&&(X.isWebGL2||Y.has("OES_texture_float")||Y.has("WEBGL_color_buffer_float"))||u))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");t>=0&&t<=e.width-n&&r>=0&&r<=e.height-i&&xe.readPixels(t,r,n,i,ge.convert(s),ge.convert(l),a)}finally{let e=null!==x?K.get(x).__webglFramebuffer:null;J.bindFramebuffer(36160,e)}}},this.copyFramebufferToTexture=function(e,t,r=0){if(!0!==t.isFramebufferTexture)return void console.error("THREE.WebGLRenderer: copyFramebufferToTexture() can only be used with FramebufferTexture.");let n=Math.pow(2,-r),i=Math.floor(t.image.width*n),a=Math.floor(t.image.height*n);$.setTexture2D(t,0),xe.copyTexSubImage2D(3553,r,0,0,e.x,e.y,i,a),J.unbindTexture()},this.copyTextureToTexture=function(e,t,r,n=0){let i=t.image.width,a=t.image.height,o=ge.convert(r.format),s=ge.convert(r.type);$.setTexture2D(r,0),xe.pixelStorei(37440,r.flipY),xe.pixelStorei(37441,r.premultiplyAlpha),xe.pixelStorei(3317,r.unpackAlignment),t.isDataTexture?xe.texSubImage2D(3553,n,e.x,e.y,i,a,o,s,t.image.data):t.isCompressedTexture?xe.compressedTexSubImage2D(3553,n,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,o,t.mipmaps[0].data):xe.texSubImage2D(3553,n,e.x,e.y,o,s,t.image),0===n&&r.generateMipmaps&&xe.generateMipmap(3553),J.unbindTexture()},this.copyTextureToTexture3D=function(e,t,r,n,i=0){if(m.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");let a,o=e.max.x-e.min.x+1,s=e.max.y-e.min.y+1,l=e.max.z-e.min.z+1,u=ge.convert(n.format),c=ge.convert(n.type);if(n.isData3DTexture)$.setTexture3D(n,0),a=32879;else{if(!n.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");$.setTexture2DArray(n,0),a=35866}xe.pixelStorei(37440,n.flipY),xe.pixelStorei(37441,n.premultiplyAlpha),xe.pixelStorei(3317,n.unpackAlignment);let h=xe.getParameter(3314),d=xe.getParameter(32878),p=xe.getParameter(3316),f=xe.getParameter(3315),g=xe.getParameter(32877),v=r.isCompressedTexture?r.mipmaps[0]:r.image;xe.pixelStorei(3314,v.width),xe.pixelStorei(32878,v.height),xe.pixelStorei(3316,e.min.x),xe.pixelStorei(3315,e.min.y),xe.pixelStorei(32877,e.min.z),r.isDataTexture||r.isData3DTexture?xe.texSubImage3D(a,i,t.x,t.y,t.z,o,s,l,u,c,v.data):r.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),xe.compressedTexSubImage3D(a,i,t.x,t.y,t.z,o,s,l,u,v.data)):xe.texSubImage3D(a,i,t.x,t.y,t.z,o,s,l,u,c,v),xe.pixelStorei(3314,h),xe.pixelStorei(32878,d),xe.pixelStorei(3316,p),xe.pixelStorei(3315,f),xe.pixelStorei(32877,g),0===i&&n.generateMipmaps&&xe.generateMipmap(a),J.unbindTexture()},this.initTexture=function(e){$.setTexture2D(e,0),J.unbindTexture()},this.resetState=function(){v=0,y=0,x=null,J.reset(),ye.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}Ia.prototype.isWebGLRenderer=!0,class extends Ia{}.prototype.isWebGL1Renderer=!0;var Ba=class{constructor(e,t=25e-5){this.name="",this.color=new Oe(e),this.density=t}clone(){return new Ba(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}};Ba.prototype.isFogExp2=!0;var za=class{constructor(e,t=1,r=1e3){this.name="",this.color=new Oe(e),this.near=t,this.far=r}clone(){return new za(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}};za.prototype.isFog=!0;var Na=class extends Yt{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){let t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}};Na.prototype.isScene=!0;var Fa=class{constructor(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=te,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=ce()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let n=0,i=this.stride;n<i;n++)this.array[e+n]=t.array[r+n];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=ce()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);let t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=ce()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}};Fa.prototype.isInterleavedBuffer=!0;var Ua=new We,ja=class{constructor(e,t,r,n=!1){this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=!0===n}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)Ua.fromBufferAttribute(this,t),Ua.applyMatrix4(e),this.setXYZ(t,Ua.x,Ua.y,Ua.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Ua.fromBufferAttribute(this,t),Ua.applyNormalMatrix(e),this.setXYZ(t,Ua.x,Ua.y,Ua.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Ua.fromBufferAttribute(this,t),Ua.transformDirection(e),this.setXYZ(t,Ua.x,Ua.y,Ua.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=n,this}setXYZW(e,t,r,n,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=n,this.data.array[e+3]=i,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");let e=[];for(let t=0;t<this.count;t++){let r=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[r+t])}return new cr(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new ja(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");let e=[];for(let t=0;t<this.count;t++){let r=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[r+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}};ja.prototype.isInterleavedBufferAttribute=!0;var Ha=class extends or{constructor(e){super(),this.type="SpriteMaterial",this.color=new Oe(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this}};Ha.prototype.isSpriteMaterial=!0;var Va,Ga=new We,Wa=new We,qa=new We,Ya=new ve,Xa=new ve,Qa=new St,Ja=new We,Za=new We,Ka=new We,$a=new ve,eo=new ve,to=new ve;function ro(e,t,r,n,i,a){Ya.subVectors(e,r).addScalar(.5).multiply(n),void 0!==i?(Xa.x=a*Ya.x-i*Ya.y,Xa.y=i*Ya.x+a*Ya.y):Xa.copy(Ya),e.copy(t),e.x+=Xa.x,e.y+=Xa.y,e.applyMatrix4(Qa)}(class extends Yt{constructor(e){if(super(),this.type="Sprite",void 0===Va){Va=new wr;let e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),t=new Fa(e,5);Va.setIndex([0,1,2,0,2,3]),Va.setAttribute("position",new ja(t,3,0,!1)),Va.setAttribute("uv",new ja(t,2,3,!1))}this.geometry=Va,this.material=void 0!==e?e:new Ha,this.center=new ve(.5,.5)}raycast(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Wa.setFromMatrixScale(this.matrixWorld),Qa.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),qa.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Wa.multiplyScalar(-qa.z);let r,n,i=this.material.rotation;0!==i&&(n=Math.cos(i),r=Math.sin(i));let a=this.center;ro(Ja.set(-.5,-.5,0),qa,a,Wa,r,n),ro(Za.set(.5,-.5,0),qa,a,Wa,r,n),ro(Ka.set(.5,.5,0),qa,a,Wa,r,n),$a.set(0,0),eo.set(1,0),to.set(1,1);let o=e.ray.intersectTriangle(Ja,Za,Ka,!1,Ga);if(null===o&&(ro(Za.set(-.5,.5,0),qa,a,Wa,r,n),eo.set(0,1),o=e.ray.intersectTriangle(Ja,Ka,Za,!1,Ga),null===o))return;let s=e.ray.origin.distanceTo(Ga);s<e.near||s>e.far||t.push({distance:s,point:Ga.clone(),uv:ir.getUV(Ga,Ja,Za,Ka,$a,eo,to,new ve),face:null,object:this})}copy(e){return super.copy(e),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}).prototype.isSprite=!0;var no=new We,io=new Ue,ao=new Ue,oo=new We,so=new St,lo=class extends Fr{constructor(e,t){super(e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new St,this.bindMatrixInverse=new St}copy(e){return super.copy(e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){let e=new Ue,t=this.geometry.attributes.skinWeight;for(let r=0,n=t.count;r<n;r++){e.fromBufferAttribute(t,r);let n=1/e.manhattanLength();n!==1/0?e.multiplyScalar(n):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){let r=this.skeleton,n=this.geometry;io.fromBufferAttribute(n.attributes.skinIndex,e),ao.fromBufferAttribute(n.attributes.skinWeight,e),no.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let e=0;e<4;e++){let n=ao.getComponent(e);if(0!==n){let i=io.getComponent(e);so.multiplyMatrices(r.bones[i].matrixWorld,r.boneInverses[i]),t.addScaledVector(oo.copy(no).applyMatrix4(so),n)}}return t.applyMatrix4(this.bindMatrixInverse)}};lo.prototype.isSkinnedMesh=!0,class extends Yt{constructor(){super(),this.type="Bone"}}.prototype.isBone=!0,class extends Fe{constructor(e=null,t=1,r=1,n,i,a,o,s,l=C,u=C,c,h){super(null,a,o,s,l,u,n,i,c,h),this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}.prototype.isDataTexture=!0;var uo=class extends cr{constructor(e,t,r,n=1){"number"==typeof r&&(n=r,r=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(e,t,r),this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){let e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}};uo.prototype.isInstancedBufferAttribute=!0;var co=new St,ho=new St,po=[],fo=new Fr;(class extends Fr{constructor(e,t,r){super(e,t),this.instanceMatrix=new uo(new Float32Array(16*r),16),this.instanceColor=null,this.count=r,this.frustumCulled=!1}copy(e){return super.copy(e),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}raycast(e,t){let r=this.matrixWorld,n=this.count;if(fo.geometry=this.geometry,fo.material=this.material,void 0!==fo.material)for(let i=0;i<n;i++){this.getMatrixAt(i,co),ho.multiplyMatrices(r,co),fo.matrixWorld=ho,fo.raycast(e,po);for(let e=0,r=po.length;e<r;e++){let r=po[e];r.instanceId=i,r.object=this,t.push(r)}po.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new uo(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}).prototype.isInstancedMesh=!0;var mo=class extends or{constructor(e){super(),this.type="LineBasicMaterial",this.color=new Oe(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this}};mo.prototype.isLineBasicMaterial=!0;var go=new We,vo=new We,yo=new St,xo=new wt,bo=new pt,wo=class extends Yt{constructor(e=new wr,t=new mo){super(),this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){let e=this.geometry;if(e.isBufferGeometry)if(null===e.index){let t=e.attributes.position,r=[0];for(let e=1,n=t.count;e<n;e++)go.fromBufferAttribute(t,e-1),vo.fromBufferAttribute(t,e),r[e]=r[e-1],r[e]+=go.distanceTo(vo);e.setAttribute("lineDistance",new pr(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(e,t){let r=this.geometry,n=this.matrixWorld,i=e.params.Line.threshold,a=r.drawRange;if(null===r.boundingSphere&&r.computeBoundingSphere(),bo.copy(r.boundingSphere),bo.applyMatrix4(n),bo.radius+=i,!1===e.ray.intersectsSphere(bo))return;yo.copy(n).invert(),xo.copy(e.ray).applyMatrix4(yo);let o=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o,l=new We,u=new We,c=new We,h=new We,d=this.isLineSegments?2:1;if(r.isBufferGeometry){let n=r.index,i=r.attributes.position;if(null!==n)for(let r=Math.max(0,a.start),o=Math.min(n.count,a.start+a.count)-1;r<o;r+=d){let a=n.getX(r),o=n.getX(r+1);if(l.fromBufferAttribute(i,a),u.fromBufferAttribute(i,o),xo.distanceSqToSegment(l,u,h,c)>s)continue;h.applyMatrix4(this.matrixWorld);let d=e.ray.origin.distanceTo(h);d<e.near||d>e.far||t.push({distance:d,point:c.clone().applyMatrix4(this.matrixWorld),index:r,face:null,faceIndex:null,object:this})}else for(let r=Math.max(0,a.start),n=Math.min(i.count,a.start+a.count)-1;r<n;r+=d){if(l.fromBufferAttribute(i,r),u.fromBufferAttribute(i,r+1),xo.distanceSqToSegment(l,u,h,c)>s)continue;h.applyMatrix4(this.matrixWorld);let n=e.ray.origin.distanceTo(h);n<e.near||n>e.far||t.push({distance:n,point:c.clone().applyMatrix4(this.matrixWorld),index:r,face:null,faceIndex:null,object:this})}}else r.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){let e=this.geometry;if(e.isBufferGeometry){let t=e.morphAttributes,r=Object.keys(t);if(r.length>0){let e=t[r[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,r=e.length;t<r;t++){let r=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[r]=t}}}}else{let t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}};wo.prototype.isLine=!0;var So=new We,_o=new We,Ao=class extends wo{constructor(e,t){super(e,t),this.type="LineSegments"}computeLineDistances(){let e=this.geometry;if(e.isBufferGeometry)if(null===e.index){let t=e.attributes.position,r=[];for(let e=0,n=t.count;e<n;e+=2)So.fromBufferAttribute(t,e),_o.fromBufferAttribute(t,e+1),r[e]=0===e?0:r[e-1],r[e+1]=r[e]+So.distanceTo(_o);e.setAttribute("lineDistance",new pr(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}};Ao.prototype.isLineSegments=!0,class extends wo{constructor(e,t){super(e,t),this.type="LineLoop"}}.prototype.isLineLoop=!0;var Mo=class extends or{constructor(e){super(),this.type="PointsMaterial",this.color=new Oe(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this}};Mo.prototype.isPointsMaterial=!0;var Eo=new St,Co=new wt,To=new pt,Do=new We;function Lo(e,t,r,n,i,a,o){let s=Co.distanceSqToPoint(e);if(s<r){let r=new We;Co.closestPointToPoint(e,r),r.applyMatrix4(n);let l=i.ray.origin.distanceTo(r);if(l<i.near||l>i.far)return;a.push({distance:l,distanceToRay:Math.sqrt(s),point:r,index:t,face:null,object:o})}}(class extends Yt{constructor(e=new wr,t=new Mo){super(),this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){let r=this.geometry,n=this.matrixWorld,i=e.params.Points.threshold,a=r.drawRange;if(null===r.boundingSphere&&r.computeBoundingSphere(),To.copy(r.boundingSphere),To.applyMatrix4(n),To.radius+=i,!1===e.ray.intersectsSphere(To))return;Eo.copy(n).invert(),Co.copy(e.ray).applyMatrix4(Eo);let o=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o;if(r.isBufferGeometry){let i=r.index,o=r.attributes.position;if(null!==i)for(let r=Math.max(0,a.start),l=Math.min(i.count,a.start+a.count);r<l;r++){let a=i.getX(r);Do.fromBufferAttribute(o,a),Lo(Do,a,s,n,e,t,this)}else for(let r=Math.max(0,a.start),i=Math.min(o.count,a.start+a.count);r<i;r++)Do.fromBufferAttribute(o,r),Lo(Do,r,s,n,e,t,this)}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){let e=this.geometry;if(e.isBufferGeometry){let t=e.morphAttributes,r=Object.keys(t);if(r.length>0){let e=t[r[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,r=e.length;t<r;t++){let r=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[r]=t}}}}else{let t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}).prototype.isPoints=!0;var Po=class extends Fe{constructor(e,t,r,n,i,a,o,s,l){super(e,t,r,n,i,a,o,s,l),this.minFilter=void 0!==a?a:T,this.magFilter=void 0!==i?i:T,this.generateMipmaps=!1;let u=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback((function t(){u.needsUpdate=!0,e.requestVideoFrameCallback(t)}))}clone(){return new this.constructor(this.image).copy(this)}update(){let e=this.image;"requestVideoFrameCallback"in e==0&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}};Po.prototype.isVideoTexture=!0,class extends Fe{constructor(e,t,r){super({width:e,height:t}),this.format=r,this.magFilter=C,this.minFilter=C,this.generateMipmaps=!1,this.needsUpdate=!0}}.prototype.isFramebufferTexture=!0,class extends Fe{constructor(e,t,r,n,i,a,o,s,l,u,c,h){super(null,a,o,s,l,u,n,i,c,h),this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}.prototype.isCompressedTexture=!0,class extends Fe{constructor(e,t,r,n,i,a,o,s,l){super(e,t,r,n,i,a,o,s,l),this.needsUpdate=!0}}.prototype.isCanvasTexture=!0;var Ro=class{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){let r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){let t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){let t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){let e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;let t,r=[],n=this.getPoint(0),i=0;r.push(0);for(let a=1;a<=e;a++)t=this.getPoint(a/e),i+=t.distanceTo(n),r.push(i),n=t;return this.cacheArcLengths=r,r}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){let r,n=this.getLengths(),i=0,a=n.length;r=t||e*n[a-1];let o,s=0,l=a-1;for(;s<=l;)if(i=Math.floor(s+(l-s)/2),o=n[i]-r,o<0)s=i+1;else{if(!(o>0)){l=i;break}l=i-1}if(i=l,n[i]===r)return i/(a-1);let u=n[i];return(i+(r-u)/(n[i+1]-u))/(a-1)}getTangent(e,t){let r=e-1e-4,n=e+1e-4;r<0&&(r=0),n>1&&(n=1);let i=this.getPoint(r),a=this.getPoint(n),o=t||(i.isVector2?new ve:new We);return o.copy(a).sub(i).normalize(),o}getTangentAt(e,t){let r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){let r=new We,n=[],i=[],a=[],o=new We,s=new St;for(let t=0;t<=e;t++){let r=t/e;n[t]=this.getTangentAt(r,new We)}i[0]=new We,a[0]=new We;let l=Number.MAX_VALUE,u=Math.abs(n[0].x),c=Math.abs(n[0].y),h=Math.abs(n[0].z);u<=l&&(l=u,r.set(1,0,0)),c<=l&&(l=c,r.set(0,1,0)),h<=l&&r.set(0,0,1),o.crossVectors(n[0],r).normalize(),i[0].crossVectors(n[0],o),a[0].crossVectors(n[0],i[0]);for(let t=1;t<=e;t++){if(i[t]=i[t-1].clone(),a[t]=a[t-1].clone(),o.crossVectors(n[t-1],n[t]),o.length()>Number.EPSILON){o.normalize();let e=Math.acos(he(n[t-1].dot(n[t]),-1,1));i[t].applyMatrix4(s.makeRotationAxis(o,e))}a[t].crossVectors(n[t],i[t])}if(!0===t){let t=Math.acos(he(i[0].dot(i[e]),-1,1));t/=e,n[0].dot(o.crossVectors(i[0],i[e]))>0&&(t=-t);for(let r=1;r<=e;r++)i[r].applyMatrix4(s.makeRotationAxis(n[r],t*r)),a[r].crossVectors(n[r],i[r])}return{tangents:n,normals:i,binormals:a}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){let e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},Oo=class extends Ro{constructor(e=0,t=0,r=1,n=1,i=0,a=2*Math.PI,o=!1,s=0){super(),this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=n,this.aStartAngle=i,this.aEndAngle=a,this.aClockwise=o,this.aRotation=s}getPoint(e,t){let r=t||new ve,n=2*Math.PI,i=this.aEndAngle-this.aStartAngle,a=Math.abs(i)<Number.EPSILON;for(;i<0;)i+=n;for(;i>n;)i-=n;i<Number.EPSILON&&(i=a?0:n),!0===this.aClockwise&&!a&&(i===n?i=-n:i-=n);let o=this.aStartAngle+e*i,s=this.aX+this.xRadius*Math.cos(o),l=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){let e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),r=s-this.aX,n=l-this.aY;s=r*e-n*t+this.aX,l=r*t+n*e+this.aY}return r.set(s,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){let e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}};Oo.prototype.isEllipseCurve=!0;var ko=class extends Oo{constructor(e,t,r,n,i,a){super(e,t,r,r,n,i,a),this.type="ArcCurve"}};function Io(){let e=0,t=0,r=0,n=0;function i(i,a,o,s){e=i,t=o,r=-3*i+3*a-2*o-s,n=2*i-2*a+o+s}return{initCatmullRom:function(e,t,r,n,a){i(t,r,a*(r-e),a*(n-t))},initNonuniformCatmullRom:function(e,t,r,n,a,o,s){let l=(t-e)/a-(r-e)/(a+o)+(r-t)/o,u=(r-t)/o-(n-t)/(o+s)+(n-r)/s;l*=o,u*=o,i(t,r,l,u)},calc:function(i){let a=i*i;return e+t*i+r*a+n*(a*i)}}}ko.prototype.isArcCurve=!0;var Bo=new We,zo=new Io,No=new Io,Fo=new Io,Uo=class extends Ro{constructor(e=[],t=!1,r="centripetal",n=.5){super(),this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=n}getPoint(e,t=new We){let r,n,i=t,a=this.points,o=a.length,s=(o-(this.closed?0:1))*e,l=Math.floor(s),u=s-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/o)+1)*o:0===u&&l===o-1&&(l=o-2,u=1),this.closed||l>0?r=a[(l-1)%o]:(Bo.subVectors(a[0],a[1]).add(a[0]),r=Bo);let c=a[l%o],h=a[(l+1)%o];if(this.closed||l+2<o?n=a[(l+2)%o]:(Bo.subVectors(a[o-1],a[o-2]).add(a[o-1]),n=Bo),"centripetal"===this.curveType||"chordal"===this.curveType){let e="chordal"===this.curveType?.5:.25,t=Math.pow(r.distanceToSquared(c),e),i=Math.pow(c.distanceToSquared(h),e),a=Math.pow(h.distanceToSquared(n),e);i<1e-4&&(i=1),t<1e-4&&(t=i),a<1e-4&&(a=i),zo.initNonuniformCatmullRom(r.x,c.x,h.x,n.x,t,i,a),No.initNonuniformCatmullRom(r.y,c.y,h.y,n.y,t,i,a),Fo.initNonuniformCatmullRom(r.z,c.z,h.z,n.z,t,i,a)}else"catmullrom"===this.curveType&&(zo.initCatmullRom(r.x,c.x,h.x,n.x,this.tension),No.initCatmullRom(r.y,c.y,h.y,n.y,this.tension),Fo.initCatmullRom(r.z,c.z,h.z,n.z,this.tension));return i.set(zo.calc(u),No.calc(u),Fo.calc(u)),i}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){let r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){let r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){let r=e.points[t];this.points.push((new We).fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}};function jo(e,t,r,n,i){let a=.5*(n-t),o=.5*(i-r),s=e*e;return(2*r-2*n+a+o)*(e*s)+(-3*r+3*n-2*a-o)*s+a*e+r}function Ho(e,t,r,n){return function(e,t){let r=1-e;return r*r*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,r)+function(e,t){return e*e*t}(e,n)}function Vo(e,t,r,n,i){return function(e,t){let r=1-e;return r*r*r*t}(e,t)+function(e,t){let r=1-e;return 3*r*r*e*t}(e,r)+function(e,t){return 3*(1-e)*e*e*t}(e,n)+function(e,t){return e*e*e*t}(e,i)}Uo.prototype.isCatmullRomCurve3=!0;var Go=class extends Ro{constructor(e=new ve,t=new ve,r=new ve,n=new ve){super(),this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=n}getPoint(e,t=new ve){let r=t,n=this.v0,i=this.v1,a=this.v2,o=this.v3;return r.set(Vo(e,n.x,i.x,a.x,o.x),Vo(e,n.y,i.y,a.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}};Go.prototype.isCubicBezierCurve=!0;var Wo=class extends Ro{constructor(e=new We,t=new We,r=new We,n=new We){super(),this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=n}getPoint(e,t=new We){let r=t,n=this.v0,i=this.v1,a=this.v2,o=this.v3;return r.set(Vo(e,n.x,i.x,a.x,o.x),Vo(e,n.y,i.y,a.y,o.y),Vo(e,n.z,i.z,a.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}};Wo.prototype.isCubicBezierCurve3=!0;var qo=class extends Ro{constructor(e=new ve,t=new ve){super(),this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new ve){let r=t;return 1===e?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){let r=t||new ve;return r.copy(this.v2).sub(this.v1).normalize(),r}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}};qo.prototype.isLineCurve=!0;var Yo=class extends Ro{constructor(e=new We,t=new We){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=e,this.v2=t}getPoint(e,t=new We){let r=t;return 1===e?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},Xo=class extends Ro{constructor(e=new ve,t=new ve,r=new ve){super(),this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new ve){let r=t,n=this.v0,i=this.v1,a=this.v2;return r.set(Ho(e,n.x,i.x,a.x),Ho(e,n.y,i.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}};Xo.prototype.isQuadraticBezierCurve=!0;var Qo=class extends Ro{constructor(e=new We,t=new We,r=new We){super(),this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new We){let r=t,n=this.v0,i=this.v1,a=this.v2;return r.set(Ho(e,n.x,i.x,a.x),Ho(e,n.y,i.y,a.y),Ho(e,n.z,i.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}};Qo.prototype.isQuadraticBezierCurve3=!0;var Jo=class extends Ro{constructor(e=[]){super(),this.type="SplineCurve",this.points=e}getPoint(e,t=new ve){let r=t,n=this.points,i=(n.length-1)*e,a=Math.floor(i),o=i-a,s=n[0===a?a:a-1],l=n[a],u=n[a>n.length-2?n.length-1:a+1],c=n[a>n.length-3?n.length-1:a+2];return r.set(jo(o,s.x,l.x,u.x,c.x),jo(o,s.y,l.y,u.y,c.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){let r=e.points[t];this.points.push(r.clone())}return this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){let r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){let r=e.points[t];this.points.push((new ve).fromArray(r))}return this}};Jo.prototype.isSplineCurve=!0;var Zo=Object.freeze({__proto__:null,ArcCurve:ko,CatmullRomCurve3:Uo,CubicBezierCurve:Go,CubicBezierCurve3:Wo,EllipseCurve:Oo,LineCurve:qo,LineCurve3:Yo,QuadraticBezierCurve:Xo,QuadraticBezierCurve3:Qo,SplineCurve:Jo}),Ko=class extends Ro{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){let e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new qo(t,e))}getPoint(e,t){let r=e*this.getLength(),n=this.getCurveLengths(),i=0;for(;i<n.length;){if(n[i]>=r){let e=n[i]-r,a=this.curves[i],o=a.getLength(),s=0===o?0:1-e/o;return a.getPointAt(s,t)}i++}return null}getLength(){let e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;let e=[],t=0;for(let r=0,n=this.curves.length;r<n;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){let t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){let t,r=[];for(let n=0,i=this.curves;n<i.length;n++){let a=i[n],o=a.isEllipseCurve?2*e:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?e*a.points.length:e,s=a.getPoints(o);for(let e=0;e<s.length;e++){let n=s[e];t&&t.equals(n)||(r.push(n),t=n)}}return this.autoClose&&r.length>1&&!r[r.length-1].equals(r[0])&&r.push(r[0]),r}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){let r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){let e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++){let r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){let r=e.curves[t];this.curves.push((new Zo[r.type]).fromJSON(r))}return this}},$o=class extends Ko{constructor(e){super(),this.type="Path",this.currentPoint=new ve,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){let r=new qo(this.currentPoint.clone(),new ve(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,n){let i=new Xo(this.currentPoint.clone(),new ve(e,t),new ve(r,n));return this.curves.push(i),this.currentPoint.set(r,n),this}bezierCurveTo(e,t,r,n,i,a){let o=new Go(this.currentPoint.clone(),new ve(e,t),new ve(r,n),new ve(i,a));return this.curves.push(o),this.currentPoint.set(i,a),this}splineThru(e){let t=[this.currentPoint.clone()].concat(e),r=new Jo(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,n,i,a){let o=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(e+o,t+s,r,n,i,a),this}absarc(e,t,r,n,i,a){return this.absellipse(e,t,r,r,n,i,a),this}ellipse(e,t,r,n,i,a,o,s){let l=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+l,t+u,r,n,i,a,o,s),this}absellipse(e,t,r,n,i,a,o,s){let l=new Oo(e,t,r,n,i,a,o,s);if(this.curves.length>0){let e=l.getPoint(0);e.equals(this.currentPoint)||this.lineTo(e.x,e.y)}this.curves.push(l);let u=l.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){let e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}},es=class extends wr{constructor(e=[new ve(0,.5),new ve(.5,0),new ve(0,-.5)],t=12,r=0,n=2*Math.PI){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:n},t=Math.floor(t),n=he(n,0,2*Math.PI);let i=[],a=[],o=[],s=[],l=[],u=1/t,c=new We,h=new ve,d=new We,p=new We,f=new We,m=0,g=0;for(let t=0;t<=e.length-1;t++)switch(t){case 0:m=e[t+1].x-e[t].x,g=e[t+1].y-e[t].y,d.x=1*g,d.y=-m,d.z=0*g,f.copy(d),d.normalize(),s.push(d.x,d.y,d.z);break;case e.length-1:s.push(f.x,f.y,f.z);break;default:m=e[t+1].x-e[t].x,g=e[t+1].y-e[t].y,d.x=1*g,d.y=-m,d.z=0*g,p.copy(d),d.x+=f.x,d.y+=f.y,d.z+=f.z,d.normalize(),s.push(d.x,d.y,d.z),f.copy(p)}for(let i=0;i<=t;i++){let d=r+i*u*n,p=Math.sin(d),f=Math.cos(d);for(let r=0;r<=e.length-1;r++){c.x=e[r].x*p,c.y=e[r].y,c.z=e[r].x*f,a.push(c.x,c.y,c.z),h.x=i/t,h.y=r/(e.length-1),o.push(h.x,h.y);let n=s[3*r+0]*p,u=s[3*r+1],d=s[3*r+0]*f;l.push(n,u,d)}}for(let r=0;r<t;r++)for(let t=0;t<e.length-1;t++){let n=t+r*e.length,a=n,o=n+e.length,s=n+e.length+1,l=n+1;i.push(a,o,l),i.push(s,l,o)}this.setIndex(i),this.setAttribute("position",new pr(a,3)),this.setAttribute("uv",new pr(o,2)),this.setAttribute("normal",new pr(l,3))}static fromJSON(e){return new es(e.points,e.segments,e.phiStart,e.phiLength)}},ts=class extends wr{constructor(e=1,t=1,r=1,n=8,i=1,a=!1,o=0,s=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:n,heightSegments:i,openEnded:a,thetaStart:o,thetaLength:s};let l=this;n=Math.floor(n),i=Math.floor(i);let u=[],c=[],h=[],d=[],p=0,f=[],m=r/2,g=0;function v(r){let i=p,a=new ve,f=new We,v=0,y=!0===r?e:t,x=!0===r?1:-1;for(let e=1;e<=n;e++)c.push(0,m*x,0),h.push(0,x,0),d.push(.5,.5),p++;let b=p;for(let e=0;e<=n;e++){let t=e/n*s+o,r=Math.cos(t),i=Math.sin(t);f.x=y*i,f.y=m*x,f.z=y*r,c.push(f.x,f.y,f.z),h.push(0,x,0),a.x=.5*r+.5,a.y=.5*i*x+.5,d.push(a.x,a.y),p++}for(let e=0;e<n;e++){let t=i+e,n=b+e;!0===r?u.push(n,n+1,t):u.push(n+1,n,t),v+=3}l.addGroup(g,v,!0===r?1:2),g+=v}(function(){let a=new We,v=new We,y=0,x=(t-e)/r;for(let l=0;l<=i;l++){let u=[],g=l/i,y=g*(t-e)+e;for(let e=0;e<=n;e++){let t=e/n,i=t*s+o,l=Math.sin(i),f=Math.cos(i);v.x=y*l,v.y=-g*r+m,v.z=y*f,c.push(v.x,v.y,v.z),a.set(l,x,f).normalize(),h.push(a.x,a.y,a.z),d.push(t,1-g),u.push(p++)}f.push(u)}for(let e=0;e<n;e++)for(let t=0;t<i;t++){let r=f[t][e],n=f[t+1][e],i=f[t+1][e+1],a=f[t][e+1];u.push(r,n,a),u.push(n,i,a),y+=6}l.addGroup(g,y,0),g+=y})(),!1===a&&(e>0&&v(!0),t>0&&v(!1)),this.setIndex(u),this.setAttribute("position",new pr(c,3)),this.setAttribute("normal",new pr(h,3)),this.setAttribute("uv",new pr(d,2))}static fromJSON(e){return new ts(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},rs=class extends ts{constructor(e=1,t=1,r=8,n=1,i=!1,a=0,o=2*Math.PI){super(0,e,t,r,n,i,a,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:n,openEnded:i,thetaStart:a,thetaLength:o}}static fromJSON(e){return new rs(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},ns=class extends wr{constructor(e=[],t=[],r=1,n=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:n};let i=[],a=[];function o(e,t,r,n){let i=n+1,a=[];for(let n=0;n<=i;n++){a[n]=[];let o=e.clone().lerp(r,n/i),s=t.clone().lerp(r,n/i),l=i-n;for(let e=0;e<=l;e++)a[n][e]=0===e&&n===i?o:o.clone().lerp(s,e/l)}for(let e=0;e<i;e++)for(let t=0;t<2*(i-e)-1;t++){let r=Math.floor(t/2);t%2==0?(s(a[e][r+1]),s(a[e+1][r]),s(a[e][r])):(s(a[e][r+1]),s(a[e+1][r+1]),s(a[e+1][r]))}}function s(e){i.push(e.x,e.y,e.z)}function l(t,r){let n=3*t;r.x=e[n+0],r.y=e[n+1],r.z=e[n+2]}function u(e,t,r,n){n<0&&1===e.x&&(a[t]=e.x-1),0===r.x&&0===r.z&&(a[t]=n/2/Math.PI+.5)}function c(e){return Math.atan2(e.z,-e.x)}function h(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}(function(e){let r=new We,n=new We,i=new We;for(let a=0;a<t.length;a+=3)l(t[a+0],r),l(t[a+1],n),l(t[a+2],i),o(r,n,i,e)})(n),function(e){let t=new We;for(let r=0;r<i.length;r+=3)t.x=i[r+0],t.y=i[r+1],t.z=i[r+2],t.normalize().multiplyScalar(e),i[r+0]=t.x,i[r+1]=t.y,i[r+2]=t.z}(r),function(){let e=new We;for(let t=0;t<i.length;t+=3){e.x=i[t+0],e.y=i[t+1],e.z=i[t+2];let r=c(e)/2/Math.PI+.5,n=h(e)/Math.PI+.5;a.push(r,1-n)}(function(){let e=new We,t=new We,r=new We,n=new We,o=new ve,s=new ve,l=new ve;for(let h=0,d=0;h<i.length;h+=9,d+=6){e.set(i[h+0],i[h+1],i[h+2]),t.set(i[h+3],i[h+4],i[h+5]),r.set(i[h+6],i[h+7],i[h+8]),o.set(a[d+0],a[d+1]),s.set(a[d+2],a[d+3]),l.set(a[d+4],a[d+5]),n.copy(e).add(t).add(r).divideScalar(3);let p=c(n);u(o,d+0,e,p),u(s,d+2,t,p),u(l,d+4,r,p)}})(),function(){for(let e=0;e<a.length;e+=6){let t=a[e+0],r=a[e+2],n=a[e+4],i=Math.max(t,r,n),o=Math.min(t,r,n);i>.9&&o<.1&&(t<.2&&(a[e+0]+=1),r<.2&&(a[e+2]+=1),n<.2&&(a[e+4]+=1))}}()}(),this.setAttribute("position",new pr(i,3)),this.setAttribute("normal",new pr(i.slice(),3)),this.setAttribute("uv",new pr(a,2)),0===n?this.computeVertexNormals():this.normalizeNormals()}static fromJSON(e){return new ns(e.vertices,e.indices,e.radius,e.details)}},is=class extends ns{constructor(e=1,t=0){let r=(1+Math.sqrt(5))/2,n=1/r;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-r,0,-n,r,0,n,-r,0,n,r,-n,-r,0,-n,r,0,n,-r,0,n,r,0,-r,0,-n,r,0,-n,-r,0,n,r,0,n],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new is(e.radius,e.detail)}},as=(new We,new We,new We,new ir,class extends $o{constructor(e){super(e),this.uuid=ce(),this.type="Shape",this.holes=[]}getPointsHoles(e){let t=[];for(let r=0,n=this.holes.length;r<n;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){let r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){let e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++){let r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){let r=e.holes[t];this.holes.push((new $o).fromJSON(r))}return this}});function os(e,t,r,n,i){let a,o;if(i===function(e,t,r,n){let i=0;for(let a=t,o=r-n;a<r;a+=n)i+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return i}(e,t,r,n)>0)for(a=t;a<r;a+=n)o=Cs(a,e[a],e[a+1],o);else for(a=r-n;a>=t;a-=n)o=Cs(a,e[a],e[a+1],o);return o&&ws(o,o.next)&&(Ts(o),o=o.next),o}function ss(e,t){if(!e)return e;t||(t=e);let r,n=e;do{if(r=!1,n.steiner||!ws(n,n.next)&&0!==bs(n.prev,n,n.next))n=n.next;else{if(Ts(n),n=t=n.prev,n===n.next)break;r=!0}}while(r||n!==t);return t}function ls(e,t,r,n,i,a,o){if(!e)return;!o&&a&&function(e,t,r,n){let i=e;do{null===i.z&&(i.z=gs(i.x,i.y,t,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){let t,r,n,i,a,o,s,l,u=1;do{for(r=e,e=null,a=null,o=0;r;){for(o++,n=r,s=0,t=0;t<u&&(s++,n=n.nextZ,n);t++);for(l=u;s>0||l>0&&n;)0!==s&&(0===l||!n||r.z<=n.z)?(i=r,r=r.nextZ,s--):(i=n,n=n.nextZ,l--),a?a.nextZ=i:e=i,i.prevZ=a,a=i;r=n}a.nextZ=null,u*=2}while(o>1)}(i)}(e,n,i,a);let s,l,u=e;for(;e.prev!==e.next;)if(s=e.prev,l=e.next,a?cs(e,n,i,a):us(e))t.push(s.i/r),t.push(e.i/r),t.push(l.i/r),Ts(e),e=l.next,u=l.next;else if((e=l)===u){o?1===o?ls(e=hs(ss(e),t,r),t,r,n,i,a,2):2===o&&ds(e,t,r,n,i,a):ls(ss(e),t,r,n,i,a,1);break}}function us(e){let t=e.prev,r=e,n=e.next;if(bs(t,r,n)>=0)return!1;let i=e.next.next;for(;i!==e.prev;){if(ys(t.x,t.y,r.x,r.y,n.x,n.y,i.x,i.y)&&bs(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function cs(e,t,r,n){let i=e.prev,a=e,o=e.next;if(bs(i,a,o)>=0)return!1;let s=i.x<a.x?i.x<o.x?i.x:o.x:a.x<o.x?a.x:o.x,l=i.y<a.y?i.y<o.y?i.y:o.y:a.y<o.y?a.y:o.y,u=i.x>a.x?i.x>o.x?i.x:o.x:a.x>o.x?a.x:o.x,c=i.y>a.y?i.y>o.y?i.y:o.y:a.y>o.y?a.y:o.y,h=gs(s,l,t,r,n),d=gs(u,c,t,r,n),p=e.prevZ,f=e.nextZ;for(;p&&p.z>=h&&f&&f.z<=d;){if(p!==e.prev&&p!==e.next&&ys(i.x,i.y,a.x,a.y,o.x,o.y,p.x,p.y)&&bs(p.prev,p,p.next)>=0||(p=p.prevZ,f!==e.prev&&f!==e.next&&ys(i.x,i.y,a.x,a.y,o.x,o.y,f.x,f.y)&&bs(f.prev,f,f.next)>=0))return!1;f=f.nextZ}for(;p&&p.z>=h;){if(p!==e.prev&&p!==e.next&&ys(i.x,i.y,a.x,a.y,o.x,o.y,p.x,p.y)&&bs(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;f&&f.z<=d;){if(f!==e.prev&&f!==e.next&&ys(i.x,i.y,a.x,a.y,o.x,o.y,f.x,f.y)&&bs(f.prev,f,f.next)>=0)return!1;f=f.nextZ}return!0}function hs(e,t,r){let n=e;do{let i=n.prev,a=n.next.next;!ws(i,a)&&Ss(i,n,n.next,a)&&Ms(i,a)&&Ms(a,i)&&(t.push(i.i/r),t.push(n.i/r),t.push(a.i/r),Ts(n),Ts(n.next),n=e=a),n=n.next}while(n!==e);return ss(n)}function ds(e,t,r,n,i,a){let o=e;do{let e=o.next.next;for(;e!==o.prev;){if(o.i!==e.i&&xs(o,e)){let s=Es(o,e);return o=ss(o,o.next),s=ss(s,s.next),ls(o,t,r,n,i,a),void ls(s,t,r,n,i,a)}e=e.next}o=o.next}while(o!==e)}function ps(e,t){return e.x-t.x}function fs(e,t){if(t=function(e,t){let r,n=t,i=e.x,a=e.y,o=-1/0;do{if(a<=n.y&&a>=n.next.y&&n.next.y!==n.y){let e=n.x+(a-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(e<=i&&e>o){if(o=e,e===i){if(a===n.y)return n;if(a===n.next.y)return n.next}r=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!r)return null;if(i===o)return r;let s,l=r,u=r.x,c=r.y,h=1/0;n=r;do{i>=n.x&&n.x>=u&&i!==n.x&&ys(a<c?i:o,a,u,c,a<c?o:i,a,n.x,n.y)&&(s=Math.abs(a-n.y)/(i-n.x),Ms(n,e)&&(s<h||s===h&&(n.x>r.x||n.x===r.x&&ms(r,n)))&&(r=n,h=s)),n=n.next}while(n!==l);return r}(e,t),t){let r=Es(t,e);ss(t,t.next),ss(r,r.next)}}function ms(e,t){return bs(e.prev,e,t.prev)<0&&bs(t.next,e,e.next)<0}function gs(e,t,r,n,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function vs(e){let t=e,r=e;do{(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next}while(t!==e);return r}function ys(e,t,r,n,i,a,o,s){return(i-o)*(t-s)-(e-o)*(a-s)>=0&&(e-o)*(n-s)-(r-o)*(t-s)>=0&&(r-o)*(a-s)-(i-o)*(n-s)>=0}function xs(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){let r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&Ss(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}(e,t)&&(Ms(e,t)&&Ms(t,e)&&function(e,t){let r=e,n=!1,i=(e.x+t.x)/2,a=(e.y+t.y)/2;do{r.y>a!=r.next.y>a&&r.next.y!==r.y&&i<(r.next.x-r.x)*(a-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==e);return n}(e,t)&&(bs(e.prev,e,t.prev)||bs(e,t.prev,t))||ws(e,t)&&bs(e.prev,e,e.next)>0&&bs(t.prev,t,t.next)>0)}function bs(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function ws(e,t){return e.x===t.x&&e.y===t.y}function Ss(e,t,r,n){let i=As(bs(e,t,r)),a=As(bs(e,t,n)),o=As(bs(r,n,e)),s=As(bs(r,n,t));return!!(i!==a&&o!==s||0===i&&_s(e,r,t)||0===a&&_s(e,n,t)||0===o&&_s(r,e,n)||0===s&&_s(r,t,n))}function _s(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function As(e){return e>0?1:e<0?-1:0}function Ms(e,t){return bs(e.prev,e,e.next)<0?bs(e,t,e.next)>=0&&bs(e,e.prev,t)>=0:bs(e,t,e.prev)<0||bs(e,e.next,t)<0}function Es(e,t){let r=new Ds(e.i,e.x,e.y),n=new Ds(t.i,t.x,t.y),i=e.next,a=t.prev;return e.next=t,t.prev=e,r.next=i,i.prev=r,n.next=r,r.prev=n,a.next=n,n.prev=a,n}function Cs(e,t,r,n){let i=new Ds(e,t,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function Ts(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Ds(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var Ls=class{static area(e){let t=e.length,r=0;for(let n=t-1,i=0;i<t;n=i++)r+=e[n].x*e[i].y-e[i].x*e[n].y;return.5*r}static isClockWise(e){return Ls.area(e)<0}static triangulateShape(e,t){let r=[],n=[],i=[];Ps(e),Rs(r,e);let a=e.length;t.forEach(Ps);for(let e=0;e<t.length;e++)n.push(a),a+=t[e].length,Rs(r,t[e]);let o=function(e,t,r=2){let n,i,a,o,s,l,u,c=t&&t.length,h=c?t[0]*r:e.length,d=os(e,0,h,r,!0),p=[];if(!d||d.next===d.prev)return p;if(c&&(d=function(e,t,r,n){let i,a,o,s,l,u=[];for(i=0,a=t.length;i<a;i++)o=t[i]*n,s=i<a-1?t[i+1]*n:e.length,l=os(e,o,s,n,!1),l===l.next&&(l.steiner=!0),u.push(vs(l));for(u.sort(ps),i=0;i<u.length;i++)fs(u[i],r),r=ss(r,r.next);return r}(e,t,d,r)),e.length>80*r){n=a=e[0],i=o=e[1];for(let t=r;t<h;t+=r)s=e[t],l=e[t+1],s<n&&(n=s),l<i&&(i=l),s>a&&(a=s),l>o&&(o=l);u=Math.max(a-n,o-i),u=0!==u?1/u:0}return ls(d,p,r,n,i,u),p}(r,n);for(let e=0;e<o.length;e+=3)i.push(o.slice(e,e+3));return i}};function Ps(e){let t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function Rs(e,t){for(let r=0;r<t.length;r++)e.push(t[r].x),e.push(t[r].y)}var Os=class extends wr{constructor(e=new as([new ve(.5,.5),new ve(-.5,.5),new ve(-.5,-.5),new ve(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];let r=this,n=[],i=[];for(let t=0,r=e.length;t<r;t++)a(e[t]);function a(e){let a=[],o=void 0!==t.curveSegments?t.curveSegments:12,s=void 0!==t.steps?t.steps:1,l=void 0!==t.depth?t.depth:1,u=void 0===t.bevelEnabled||t.bevelEnabled,c=void 0!==t.bevelThickness?t.bevelThickness:.2,h=void 0!==t.bevelSize?t.bevelSize:c-.1,d=void 0!==t.bevelOffset?t.bevelOffset:0,p=void 0!==t.bevelSegments?t.bevelSegments:3,f=t.extrudePath,m=void 0!==t.UVGenerator?t.UVGenerator:ks;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),l=t.amount);let g,v,y,x,b,w=!1;f&&(g=f.getSpacedPoints(s),w=!0,u=!1,v=f.computeFrenetFrames(s,!1),y=new We,x=new We,b=new We),u||(p=0,c=0,h=0,d=0);let S=e.extractPoints(o),_=S.shape,A=S.holes;if(!Ls.isClockWise(_)){_=_.reverse();for(let e=0,t=A.length;e<t;e++){let t=A[e];Ls.isClockWise(t)&&(A[e]=t.reverse())}}let M=Ls.triangulateShape(_,A),E=_;for(let e=0,t=A.length;e<t;e++){let t=A[e];_=_.concat(t)}function C(e,t,r){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(r).add(e)}let T=_.length,D=M.length;function L(e,t,r){let n,i,a,o=e.x-t.x,s=e.y-t.y,l=r.x-e.x,u=r.y-e.y,c=o*o+s*s,h=o*u-s*l;if(Math.abs(h)>Number.EPSILON){let h=Math.sqrt(c),d=Math.sqrt(l*l+u*u),p=t.x-s/h,f=t.y+o/h,m=((r.x-u/d-p)*u-(r.y+l/d-f)*l)/(o*u-s*l);n=p+o*m-e.x,i=f+s*m-e.y;let g=n*n+i*i;if(g<=2)return new ve(n,i);a=Math.sqrt(g/2)}else{let e=!1;o>Number.EPSILON?l>Number.EPSILON&&(e=!0):o<-Number.EPSILON?l<-Number.EPSILON&&(e=!0):Math.sign(s)===Math.sign(u)&&(e=!0),e?(n=-s,i=o,a=Math.sqrt(c)):(n=o,i=s,a=Math.sqrt(c/2))}return new ve(n/a,i/a)}let P=[];for(let e=0,t=E.length,r=t-1,n=e+1;e<t;e++,r++,n++)r===t&&(r=0),n===t&&(n=0),P[e]=L(E[e],E[r],E[n]);let R,O=[],k=P.concat();for(let e=0,t=A.length;e<t;e++){let t=A[e];R=[];for(let e=0,r=t.length,n=r-1,i=e+1;e<r;e++,n++,i++)n===r&&(n=0),i===r&&(i=0),R[e]=L(t[e],t[n],t[i]);O.push(R),k=k.concat(R)}for(let e=0;e<p;e++){let t=e/p,r=c*Math.cos(t*Math.PI/2),n=h*Math.sin(t*Math.PI/2)+d;for(let e=0,t=E.length;e<t;e++){let t=C(E[e],P[e],n);z(t.x,t.y,-r)}for(let e=0,t=A.length;e<t;e++){let t=A[e];R=O[e];for(let e=0,i=t.length;e<i;e++){let i=C(t[e],R[e],n);z(i.x,i.y,-r)}}}let I=h+d;for(let e=0;e<T;e++){let t=u?C(_[e],k[e],I):_[e];w?(x.copy(v.normals[0]).multiplyScalar(t.x),y.copy(v.binormals[0]).multiplyScalar(t.y),b.copy(g[0]).add(x).add(y),z(b.x,b.y,b.z)):z(t.x,t.y,0)}for(let e=1;e<=s;e++)for(let t=0;t<T;t++){let r=u?C(_[t],k[t],I):_[t];w?(x.copy(v.normals[e]).multiplyScalar(r.x),y.copy(v.binormals[e]).multiplyScalar(r.y),b.copy(g[e]).add(x).add(y),z(b.x,b.y,b.z)):z(r.x,r.y,l/s*e)}for(let e=p-1;e>=0;e--){let t=e/p,r=c*Math.cos(t*Math.PI/2),n=h*Math.sin(t*Math.PI/2)+d;for(let e=0,t=E.length;e<t;e++){let t=C(E[e],P[e],n);z(t.x,t.y,l+r)}for(let e=0,t=A.length;e<t;e++){let t=A[e];R=O[e];for(let e=0,i=t.length;e<i;e++){let i=C(t[e],R[e],n);w?z(i.x,i.y+g[s-1].y,g[s-1].x+r):z(i.x,i.y,l+r)}}}function B(e,t){let r=e.length;for(;--r>=0;){let n=r,i=r-1;i<0&&(i=e.length-1);for(let e=0,r=s+2*p;e<r;e++){let r=T*e,a=T*(e+1);F(t+n+r,t+i+r,t+i+a,t+n+a)}}}function z(e,t,r){a.push(e),a.push(t),a.push(r)}function N(e,t,i){U(e),U(t),U(i);let a=n.length/3,o=m.generateTopUV(r,n,a-3,a-2,a-1);j(o[0]),j(o[1]),j(o[2])}function F(e,t,i,a){U(e),U(t),U(a),U(t),U(i),U(a);let o=n.length/3,s=m.generateSideWallUV(r,n,o-6,o-3,o-2,o-1);j(s[0]),j(s[1]),j(s[3]),j(s[1]),j(s[2]),j(s[3])}function U(e){n.push(a[3*e+0]),n.push(a[3*e+1]),n.push(a[3*e+2])}function j(e){i.push(e.x),i.push(e.y)}(function(){let e=n.length/3;if(u){let e=0,t=T*e;for(let e=0;e<D;e++){let r=M[e];N(r[2]+t,r[1]+t,r[0]+t)}e=s+2*p,t=T*e;for(let e=0;e<D;e++){let r=M[e];N(r[0]+t,r[1]+t,r[2]+t)}}else{for(let e=0;e<D;e++){let t=M[e];N(t[2],t[1],t[0])}for(let e=0;e<D;e++){let t=M[e];N(t[0]+T*s,t[1]+T*s,t[2]+T*s)}}r.addGroup(e,n.length/3-e,0)})(),function(){let e=n.length/3,t=0;B(E,t),t+=E.length;for(let e=0,r=A.length;e<r;e++){let r=A[e];B(r,t),t+=r.length}r.addGroup(e,n.length/3-e,1)}()}this.setAttribute("position",new pr(n,3)),this.setAttribute("uv",new pr(i,2)),this.computeVertexNormals()}toJSON(){let e=super.toJSON();return function(e,t,r){if(r.shapes=[],Array.isArray(e))for(let t=0,n=e.length;t<n;t++){let n=e[t];r.shapes.push(n.uuid)}else r.shapes.push(e.uuid);return void 0!==t.extrudePath&&(r.options.extrudePath=t.extrudePath.toJSON()),r}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){let r=[];for(let n=0,i=e.shapes.length;n<i;n++){let i=t[e.shapes[n]];r.push(i)}let n=e.options.extrudePath;return void 0!==n&&(e.options.extrudePath=(new Zo[n.type]).fromJSON(n)),new Os(r,e.options)}},ks={generateTopUV:function(e,t,r,n,i){let a=t[3*r],o=t[3*r+1],s=t[3*n],l=t[3*n+1],u=t[3*i],c=t[3*i+1];return[new ve(a,o),new ve(s,l),new ve(u,c)]},generateSideWallUV:function(e,t,r,n,i,a){let o=t[3*r],s=t[3*r+1],l=t[3*r+2],u=t[3*n],c=t[3*n+1],h=t[3*n+2],d=t[3*i],p=t[3*i+1],f=t[3*i+2],m=t[3*a],g=t[3*a+1],v=t[3*a+2];return Math.abs(s-c)<Math.abs(o-u)?[new ve(o,1-l),new ve(u,1-h),new ve(d,1-f),new ve(m,1-v)]:[new ve(s,1-l),new ve(c,1-h),new ve(p,1-f),new ve(g,1-v)]}},Is=class extends ns{constructor(e=1,t=0){let r=(1+Math.sqrt(5))/2;super([-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Is(e.radius,e.detail)}},Bs=class extends wr{constructor(e=new as([new ve(0,.5),new ve(-.5,-.5),new ve(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};let r=[],n=[],i=[],a=[],o=0,s=0;if(!1===Array.isArray(e))l(e);else for(let t=0;t<e.length;t++)l(e[t]),this.addGroup(o,s,t),o+=s,s=0;function l(e){let o=n.length/3,l=e.extractPoints(t),u=l.shape,c=l.holes;!1===Ls.isClockWise(u)&&(u=u.reverse());for(let e=0,t=c.length;e<t;e++){let t=c[e];!0===Ls.isClockWise(t)&&(c[e]=t.reverse())}let h=Ls.triangulateShape(u,c);for(let e=0,t=c.length;e<t;e++){let t=c[e];u=u.concat(t)}for(let e=0,t=u.length;e<t;e++){let t=u[e];n.push(t.x,t.y,0),i.push(0,0,1),a.push(t.x,t.y)}for(let e=0,t=h.length;e<t;e++){let t=h[e],n=t[0]+o,i=t[1]+o,a=t[2]+o;r.push(n,i,a),s+=3}}this.setIndex(r),this.setAttribute("position",new pr(n,3)),this.setAttribute("normal",new pr(i,3)),this.setAttribute("uv",new pr(a,2))}toJSON(){let e=super.toJSON();return function(e,t){if(t.shapes=[],Array.isArray(e))for(let r=0,n=e.length;r<n;r++){let n=e[r];t.shapes.push(n.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}static fromJSON(e,t){let r=[];for(let n=0,i=e.shapes.length;n<i;n++){let i=t[e.shapes[n]];r.push(i)}return new Bs(r,e.curveSegments)}},zs=class extends wr{constructor(e=1,t=32,r=16,n=0,i=2*Math.PI,a=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:n,phiLength:i,thetaStart:a,thetaLength:o},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));let s=Math.min(a+o,Math.PI),l=0,u=[],c=new We,h=new We,d=[],p=[],f=[],m=[];for(let d=0;d<=r;d++){let g=[],v=d/r,y=0;0==d&&0==a?y=.5/t:d==r&&s==Math.PI&&(y=-.5/t);for(let r=0;r<=t;r++){let s=r/t;c.x=-e*Math.cos(n+s*i)*Math.sin(a+v*o),c.y=e*Math.cos(a+v*o),c.z=e*Math.sin(n+s*i)*Math.sin(a+v*o),p.push(c.x,c.y,c.z),h.copy(c).normalize(),f.push(h.x,h.y,h.z),m.push(s+y,1-v),g.push(l++)}u.push(g)}for(let e=0;e<r;e++)for(let n=0;n<t;n++){let t=u[e][n+1],i=u[e][n],o=u[e+1][n],l=u[e+1][n+1];(0!==e||a>0)&&d.push(t,i,l),(e!==r-1||s<Math.PI)&&d.push(i,o,l)}this.setIndex(d),this.setAttribute("position",new pr(p,3)),this.setAttribute("normal",new pr(f,3)),this.setAttribute("uv",new pr(m,2))}static fromJSON(e){return new zs(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}},Ns=class extends wr{constructor(e=1,t=.4,r=64,n=8,i=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:n,p:i,q:a},r=Math.floor(r),n=Math.floor(n);let o=[],s=[],l=[],u=[],c=new We,h=new We,d=new We,p=new We,f=new We,m=new We,g=new We;for(let o=0;o<=r;++o){let y=o/r*i*Math.PI*2;v(y,i,a,e,d),v(y+.01,i,a,e,p),m.subVectors(p,d),g.addVectors(p,d),f.crossVectors(m,g),g.crossVectors(f,m),f.normalize(),g.normalize();for(let e=0;e<=n;++e){let i=e/n*Math.PI*2,a=-t*Math.cos(i),p=t*Math.sin(i);c.x=d.x+(a*g.x+p*f.x),c.y=d.y+(a*g.y+p*f.y),c.z=d.z+(a*g.z+p*f.z),s.push(c.x,c.y,c.z),h.subVectors(c,d).normalize(),l.push(h.x,h.y,h.z),u.push(o/r),u.push(e/n)}}for(let e=1;e<=r;e++)for(let t=1;t<=n;t++){let r=(n+1)*(e-1)+(t-1),i=(n+1)*e+(t-1),a=(n+1)*e+t,s=(n+1)*(e-1)+t;o.push(r,i,s),o.push(i,a,s)}function v(e,t,r,n,i){let a=Math.cos(e),o=Math.sin(e),s=r/t*e,l=Math.cos(s);i.x=n*(2+l)*.5*a,i.y=n*(2+l)*o*.5,i.z=n*Math.sin(s)*.5}this.setIndex(o),this.setAttribute("position",new pr(s,3)),this.setAttribute("normal",new pr(l,3)),this.setAttribute("uv",new pr(u,2))}static fromJSON(e){return new Ns(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}},Fs=class extends or{constructor(e){super(),this.type="ShadowMaterial",this.color=new Oe(0),this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this}};Fs.prototype.isShadowMaterial=!0;var Us=class extends Wr{constructor(e){super(e),this.type="RawShaderMaterial"}};Us.prototype.isRawShaderMaterial=!0;var js=class extends or{constructor(e){super(),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Oe(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Oe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}};js.prototype.isMeshStandardMaterial=!0;var Hs=class extends js{constructor(e){super(),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new ve(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return he(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.sheenColor=new Oe(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new Oe(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Oe(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}};Hs.prototype.isMeshPhysicalMaterial=!0;var Vs=class extends or{constructor(e){super(),this.type="MeshPhongMaterial",this.color=new Oe(16777215),this.specular=new Oe(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Oe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}};Vs.prototype.isMeshPhongMaterial=!0;var Gs=class extends or{constructor(e){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Oe(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Oe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}};Gs.prototype.isMeshToonMaterial=!0;var Ws=class extends or{constructor(e){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}};Ws.prototype.isMeshNormalMaterial=!0;var qs=class extends or{constructor(e){super(),this.type="MeshLambertMaterial",this.color=new Oe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Oe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}};qs.prototype.isMeshLambertMaterial=!0;var Ys=class extends or{constructor(e){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Oe(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this}};Ys.prototype.isMeshMatcapMaterial=!0;var Xs=class extends mo{constructor(e){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}};Xs.prototype.isLineDashedMaterial=!0;var Qs={ShadowMaterial:Fs,SpriteMaterial:Ha,RawShaderMaterial:Us,ShaderMaterial:Wr,PointsMaterial:Mo,MeshPhysicalMaterial:Hs,MeshStandardMaterial:js,MeshPhongMaterial:Vs,MeshToonMaterial:Gs,MeshNormalMaterial:Ws,MeshLambertMaterial:qs,MeshDepthMaterial:Sa,MeshDistanceMaterial:_a,MeshBasicMaterial:sr,MeshMatcapMaterial:Ys,LineDashedMaterial:Xs,LineBasicMaterial:mo,Material:or};or.fromType=function(e){return new Qs[e]};var Js={arraySlice:function(e,t,r){return Js.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==r?r:e.length)):e.slice(t,r)},convertArray:function(e,t,r){return!e||!r&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){let t=e.length,r=new Array(t);for(let e=0;e!==t;++e)r[e]=e;return r.sort((function(t,r){return e[t]-e[r]})),r},sortedArray:function(e,t,r){let n=e.length,i=new e.constructor(n);for(let a=0,o=0;o!==n;++a){let n=r[a]*t;for(let r=0;r!==t;++r)i[o++]=e[n+r]}return i},flattenJSON:function(e,t,r,n){let i=1,a=e[0];for(;void 0!==a&&void 0===a[n];)a=e[i++];if(void 0===a)return;let o=a[n];if(void 0!==o)if(Array.isArray(o))do{o=a[n],void 0!==o&&(t.push(a.time),r.push.apply(r,o)),a=e[i++]}while(void 0!==a);else if(void 0!==o.toArray)do{o=a[n],void 0!==o&&(t.push(a.time),o.toArray(r,r.length)),a=e[i++]}while(void 0!==a);else do{o=a[n],void 0!==o&&(t.push(a.time),r.push(o)),a=e[i++]}while(void 0!==a)},subclip:function(e,t,r,n,i=30){let a=e.clone();a.name=t;let o=[];for(let e=0;e<a.tracks.length;++e){let t=a.tracks[e],s=t.getValueSize(),l=[],u=[];for(let e=0;e<t.times.length;++e){let a=t.times[e]*i;if(!(a<r||a>=n)){l.push(t.times[e]);for(let r=0;r<s;++r)u.push(t.values[e*s+r])}}0!==l.length&&(t.times=Js.convertArray(l,t.times.constructor),t.values=Js.convertArray(u,t.values.constructor),o.push(t))}a.tracks=o;let s=1/0;for(let e=0;e<a.tracks.length;++e)s>a.tracks[e].times[0]&&(s=a.tracks[e].times[0]);for(let e=0;e<a.tracks.length;++e)a.tracks[e].shift(-1*s);return a.resetDuration(),a},makeClipAdditive:function(e,t=0,r=e,n=30){n<=0&&(n=30);let i=r.tracks.length,a=t/n;for(let t=0;t<i;++t){let n=r.tracks[t],i=n.ValueTypeName;if("bool"===i||"string"===i)continue;let o=e.tracks.find((function(e){return e.name===n.name&&e.ValueTypeName===i}));if(void 0===o)continue;let s=0,l=n.getValueSize();n.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(s=l/3);let u=0,c=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=c/3);let h,d=n.times.length-1;if(a<=n.times[0]){let e=s,t=l-s;h=Js.arraySlice(n.values,e,t)}else if(a>=n.times[d]){let e=d*l+s,t=e+l-s;h=Js.arraySlice(n.values,e,t)}else{let e=n.createInterpolant(),t=s,r=l-s;e.evaluate(a),h=Js.arraySlice(e.resultBuffer,t,r)}"quaternion"===i&&(new Ge).fromArray(h).normalize().conjugate().toArray(h);let p=o.times.length;for(let e=0;e<p;++e){let t=e*c+u;if("quaternion"===i)Ge.multiplyQuaternionsFlat(o.values,t,h,0,o.values,t);else{let e=c-2*u;for(let r=0;r<e;++r)o.values[t+r]-=h[r]}}}return e.blendMode=2501,e}},Zs=class{constructor(e,t,r,n){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==n?n:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){let t=this.parameterPositions,r=this._cachedIndex,n=t[r],i=t[r-1];e:{t:{let a;r:{n:if(!(e<n)){for(let a=r+2;;){if(void 0===n){if(e<i)break n;return r=t.length,this._cachedIndex=r,this.afterEnd_(r-1,e,i)}if(r===a)break;if(i=n,n=t[++r],e<n)break t}a=t.length;break r}if(e>=i)break e;{let o=t[1];e<o&&(r=2,i=o);for(let a=r-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,n);if(r===a)break;if(n=i,i=t[--r-1],e>=i)break t}a=r,r=0}}for(;r<a;){let n=r+a>>>1;e<t[n]?a=n:r=n+1}if(n=t[r],i=t[r-1],void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,n);if(void 0===n)return r=t.length,this._cachedIndex=r,this.afterEnd_(r-1,i,e)}this._cachedIndex=r,this.intervalChanged_(r,i,n)}return this.interpolate_(r,i,e,n)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){let t=this.resultBuffer,r=this.sampleValues,n=this.valueSize,i=e*n;for(let e=0;e!==n;++e)t[e]=r[i+e];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}};Zs.prototype.beforeStart_=Zs.prototype.copySampleValue_,Zs.prototype.afterEnd_=Zs.prototype.copySampleValue_;var Ks=class extends Zs{constructor(e,t,r,n){super(e,t,r,n),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:q,endingEnd:q}}intervalChanged_(e,t,r){let n=this.parameterPositions,i=e-2,a=e+1,o=n[i],s=n[a];if(void 0===o)switch(this.getSettings_().endingStart){case Y:i=e,o=2*t-r;break;case X:i=n.length-2,o=t+n[i]-n[i+1];break;default:i=e,o=r}if(void 0===s)switch(this.getSettings_().endingEnd){case Y:a=e,s=2*r-t;break;case X:a=1,s=r+n[1]-n[0];break;default:a=e-1,s=t}let l=.5*(r-t),u=this.valueSize;this._weightPrev=l/(t-o),this._weightNext=l/(s-r),this._offsetPrev=i*u,this._offsetNext=a*u}interpolate_(e,t,r,n){let i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,l=s-o,u=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,d=this._weightNext,p=(r-t)/(n-t),f=p*p,m=f*p,g=-h*m+2*h*f-h*p,v=(1+h)*m+(-1.5-2*h)*f+(-.5+h)*p+1,y=(-1-d)*m+(1.5+d)*f+.5*p,x=d*m-d*f;for(let e=0;e!==o;++e)i[e]=g*a[u+e]+v*a[l+e]+y*a[s+e]+x*a[c+e];return i}},$s=class extends Zs{constructor(e,t,r,n){super(e,t,r,n)}interpolate_(e,t,r,n){let i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,l=s-o,u=(r-t)/(n-t),c=1-u;for(let e=0;e!==o;++e)i[e]=a[l+e]*c+a[s+e]*u;return i}},el=class extends Zs{constructor(e,t,r,n){super(e,t,r,n)}interpolate_(e){return this.copySampleValue_(e-1)}},tl=class{constructor(e,t,r,n){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Js.convertArray(t,this.TimeBufferType),this.values=Js.convertArray(r,this.ValueBufferType),this.setInterpolation(n||this.DefaultInterpolation)}static toJSON(e){let t,r=e.constructor;if(r.toJSON!==this.toJSON)t=r.toJSON(e);else{t={name:e.name,times:Js.convertArray(e.times,Array),values:Js.convertArray(e.values,Array)};let r=e.getInterpolation();r!==e.DefaultInterpolation&&(t.interpolation=r)}return t.type=e.ValueTypeName,t}InterpolantFactoryMethodDiscrete(e){return new el(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new $s(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Ks(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case V:t=this.InterpolantFactoryMethodDiscrete;break;case G:t=this.InterpolantFactoryMethodLinear;break;case W:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){let t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return V;case this.InterpolantFactoryMethodLinear:return G;case this.InterpolantFactoryMethodSmooth:return W}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){let t=this.times;for(let r=0,n=t.length;r!==n;++r)t[r]+=e}return this}scale(e){if(1!==e){let t=this.times;for(let r=0,n=t.length;r!==n;++r)t[r]*=e}return this}trim(e,t){let r=this.times,n=r.length,i=0,a=n-1;for(;i!==n&&r[i]<e;)++i;for(;-1!==a&&r[a]>t;)--a;if(++a,0!==i||a!==n){i>=a&&(a=Math.max(a,1),i=a-1);let e=this.getValueSize();this.times=Js.arraySlice(r,i,a),this.values=Js.arraySlice(this.values,i*e,a*e)}return this}validate(){let e=!0,t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);let r=this.times,n=this.values,i=r.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let t=0;t!==i;t++){let n=r[t];if("number"==typeof n&&isNaN(n)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,t,n),e=!1;break}if(null!==a&&a>n){console.error("THREE.KeyframeTrack: Out of order keys.",this,t,n,a),e=!1;break}a=n}if(void 0!==n&&Js.isTypedArray(n))for(let t=0,r=n.length;t!==r;++t){let r=n[t];if(isNaN(r)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,t,r),e=!1;break}}return e}optimize(){let e=Js.arraySlice(this.times),t=Js.arraySlice(this.values),r=this.getValueSize(),n=this.getInterpolation()===W,i=e.length-1,a=1;for(let o=1;o<i;++o){let i=!1,s=e[o];if(s!==e[o+1]&&(1!==o||s!==e[0]))if(n)i=!0;else{let e=o*r,n=e-r,a=e+r;for(let o=0;o!==r;++o){let r=t[e+o];if(r!==t[n+o]||r!==t[a+o]){i=!0;break}}}if(i){if(o!==a){e[a]=e[o];let n=o*r,i=a*r;for(let e=0;e!==r;++e)t[i+e]=t[n+e]}++a}}if(i>0){e[a]=e[i];for(let e=i*r,n=a*r,o=0;o!==r;++o)t[n+o]=t[e+o];++a}return a!==e.length?(this.times=Js.arraySlice(e,0,a),this.values=Js.arraySlice(t,0,a*r)):(this.times=e,this.values=t),this}clone(){let e=Js.arraySlice(this.times,0),t=Js.arraySlice(this.values,0),r=new(0,this.constructor)(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}};tl.prototype.TimeBufferType=Float32Array,tl.prototype.ValueBufferType=Float32Array,tl.prototype.DefaultInterpolation=G;var rl=class extends tl{};rl.prototype.ValueTypeName="bool",rl.prototype.ValueBufferType=Array,rl.prototype.DefaultInterpolation=V,rl.prototype.InterpolantFactoryMethodLinear=void 0,rl.prototype.InterpolantFactoryMethodSmooth=void 0;var nl=class extends tl{};nl.prototype.ValueTypeName="color";var il=class extends tl{};il.prototype.ValueTypeName="number";var al=class extends Zs{constructor(e,t,r,n){super(e,t,r,n)}interpolate_(e,t,r,n){let i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=(r-t)/(n-t),l=e*o;for(let e=l+o;l!==e;l+=4)Ge.slerpFlat(i,0,a,l-o,a,l,s);return i}},ol=class extends tl{InterpolantFactoryMethodLinear(e){return new al(this.times,this.values,this.getValueSize(),e)}};ol.prototype.ValueTypeName="quaternion",ol.prototype.DefaultInterpolation=G,ol.prototype.InterpolantFactoryMethodSmooth=void 0;var sl=class extends tl{};sl.prototype.ValueTypeName="string",sl.prototype.ValueBufferType=Array,sl.prototype.DefaultInterpolation=V,sl.prototype.InterpolantFactoryMethodLinear=void 0,sl.prototype.InterpolantFactoryMethodSmooth=void 0;var ll=class extends tl{};ll.prototype.ValueTypeName="vector";var ul=class{constructor(e,t=-1,r,n=2500){this.name=e,this.tracks=r,this.duration=t,this.blendMode=n,this.uuid=ce(),this.duration<0&&this.resetDuration()}static parse(e){let t=[],r=e.tracks,n=1/(e.fps||1);for(let e=0,i=r.length;e!==i;++e)t.push(cl(r[e]).scale(n));let i=new this(e.name,e.duration,t,e.blendMode);return i.uuid=e.uuid,i}static toJSON(e){let t=[],r=e.tracks,n={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let e=0,n=r.length;e!==n;++e)t.push(tl.toJSON(r[e]));return n}static CreateFromMorphTargetSequence(e,t,r,n){let i=t.length,a=[];for(let e=0;e<i;e++){let o=[],s=[];o.push((e+i-1)%i,e,(e+1)%i),s.push(0,1,0);let l=Js.getKeyframeOrder(o);o=Js.sortedArray(o,1,l),s=Js.sortedArray(s,1,l),!n&&0===o[0]&&(o.push(i),s.push(s[0])),a.push(new il(".morphTargetInfluences["+t[e].name+"]",o,s).scale(1/r))}return new this(e,-1,a)}static findByName(e,t){let r=e;if(!Array.isArray(e)){let t=e;r=t.geometry&&t.geometry.animations||t.animations}for(let e=0;e<r.length;e++)if(r[e].name===t)return r[e];return null}static CreateClipsFromMorphTargetSequences(e,t,r){let n={},i=/^([\w-]*?)([\d]+)$/;for(let t=0,r=e.length;t<r;t++){let r=e[t],a=r.name.match(i);if(a&&a.length>1){let e=a[1],t=n[e];t||(n[e]=t=[]),t.push(r)}}let a=[];for(let e in n)a.push(this.CreateFromMorphTargetSequence(e,n[e],t,r));return a}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;let r=function(e,t,r,n,i){if(0!==r.length){let a=[],o=[];Js.flattenJSON(r,a,o,n),0!==a.length&&i.push(new e(t,a,o))}},n=[],i=e.name||"default",a=e.fps||30,o=e.blendMode,s=e.length||-1,l=e.hierarchy||[];for(let e=0;e<l.length;e++){let i=l[e].keys;if(i&&0!==i.length)if(i[0].morphTargets){let e,t={};for(e=0;e<i.length;e++)if(i[e].morphTargets)for(let r=0;r<i[e].morphTargets.length;r++)t[i[e].morphTargets[r]]=-1;for(let r in t){let t=[],a=[];for(let n=0;n!==i[e].morphTargets.length;++n){let n=i[e];t.push(n.time),a.push(n.morphTarget===r?1:0)}n.push(new il(".morphTargetInfluence["+r+"]",t,a))}s=t.length*a}else{let a=".bones["+t[e].name+"]";r(ll,a+".position",i,"pos",n),r(ol,a+".quaternion",i,"rot",n),r(ll,a+".scale",i,"scl",n)}}return 0===n.length?null:new this(i,s,n,o)}resetDuration(){let e=0;for(let t=0,r=this.tracks.length;t!==r;++t){let r=this.tracks[t];e=Math.max(e,r.times[r.times.length-1])}return this.duration=e,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){let e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}};function cl(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");let t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return il;case"vector":case"vector2":case"vector3":case"vector4":return ll;case"color":return nl;case"quaternion":return ol;case"bool":case"boolean":return rl;case"string":return sl}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){let t=[],r=[];Js.flattenJSON(e.keys,t,r,"value"),e.times=t,e.values=r}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}var hl={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},dl=class{constructor(e,t,r){let n,i=this,a=!1,o=0,s=0,l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(e){s++,!1===a&&void 0!==i.onStart&&i.onStart(e,o,s),a=!0},this.itemEnd=function(e){o++,void 0!==i.onProgress&&i.onProgress(e,o,s),o===s&&(a=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)},this.resolveURL=function(e){return n?n(e):e},this.setURLModifier=function(e){return n=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){let t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(let t=0,r=l.length;t<r;t+=2){let r=l[t],n=l[t+1];if(r.global&&(r.lastIndex=0),r.test(e))return n}return null}}},pl=new dl,fl=class{constructor(e){this.manager=void 0!==e?e:pl,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){let r=this;return new Promise((function(n,i){r.load(e,n,t,i)}))}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}},ml={},gl=class extends fl{constructor(e){super(e)}load(e,t,r,n){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);let i=hl.get(e);if(void 0!==i)return this.manager.itemStart(e),setTimeout((()=>{t&&t(i),this.manager.itemEnd(e)}),0),i;if(void 0!==ml[e])return void ml[e].push({onLoad:t,onProgress:r,onError:n});ml[e]=[],ml[e].push({onLoad:t,onProgress:r,onError:n});let a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),o=this.mimeType,s=this.responseType;fetch(a).then((t=>{if(200===t.status||0===t.status){if(0===t.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||void 0===t.body||void 0===t.body.getReader)return t;let r=ml[e],n=t.body.getReader(),i=t.headers.get("Content-Length"),a=i?parseInt(i):0,o=0!==a,s=0,l=new ReadableStream({start(e){!function t(){n.read().then((({done:n,value:i})=>{if(n)e.close();else{s+=i.byteLength;let n=new ProgressEvent("progress",{lengthComputable:o,loaded:s,total:a});for(let e=0,t=r.length;e<t;e++){let t=r[e];t.onProgress&&t.onProgress(n)}e.enqueue(i),t()}}))}()}});return new Response(l)}throw Error(`fetch for "${t.url}" responded with ${t.status}: ${t.statusText}`)})).then((e=>{switch(s){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then((e=>(new DOMParser).parseFromString(e,o)));case"json":return e.json();default:if(void 0===o)return e.text();{let t=/charset="?([^;"\s]*)"?/i.exec(o),r=t&&t[1]?t[1].toLowerCase():void 0,n=new TextDecoder(r);return e.arrayBuffer().then((e=>n.decode(e)))}}})).then((t=>{hl.add(e,t);let r=ml[e];delete ml[e];for(let e=0,n=r.length;e<n;e++){let n=r[e];n.onLoad&&n.onLoad(t)}})).catch((t=>{let r=ml[e];if(void 0===r)throw this.manager.itemError(e),t;delete ml[e];for(let e=0,n=r.length;e<n;e++){let n=r[e];n.onError&&n.onError(t)}this.manager.itemError(e)})).finally((()=>{this.manager.itemEnd(e)})),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}},vl=class extends fl{constructor(e){super(e)}load(e,t,r,n){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);let i=this,a=hl.get(e);if(void 0!==a)return i.manager.itemStart(e),setTimeout((function(){t&&t(a),i.manager.itemEnd(e)}),0),a;let o=Se("img");function s(){u(),hl.add(e,this),t&&t(this),i.manager.itemEnd(e)}function l(t){u(),n&&n(t),i.manager.itemError(e),i.manager.itemEnd(e)}function u(){o.removeEventListener("load",s,!1),o.removeEventListener("error",l,!1)}return o.addEventListener("load",s,!1),o.addEventListener("error",l,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),i.manager.itemStart(e),o.src=e,o}},yl=class extends fl{constructor(e){super(e)}load(e,t,r,n){let i=new Jr,a=new vl(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let o=0;function s(r){a.load(e[r],(function(e){i.images[r]=e,o++,6===o&&(i.needsUpdate=!0,t&&t(i))}),void 0,n)}for(let t=0;t<e.length;++t)s(t);return i}},xl=class extends fl{constructor(e){super(e)}load(e,t,r,n){let i=new Fe,a=new vl(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,(function(e){i.image=e,i.needsUpdate=!0,void 0!==t&&t(i)}),r,n),i}},bl=class extends Yt{constructor(e,t=1){super(),this.type="Light",this.color=new Oe(e),this.intensity=t}dispose(){}copy(e){return super.copy(e),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){let t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}};bl.prototype.isLight=!0;var wl=class extends bl{constructor(e,t,r){super(e,r),this.type="HemisphereLight",this.position.copy(Yt.DefaultUp),this.updateMatrix(),this.groundColor=new Oe(t)}copy(e){return bl.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}};wl.prototype.isHemisphereLight=!0;var Sl=new St,_l=new We,Al=new We,Ml=class{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ve(512,512),this.map=null,this.mapPass=null,this.matrix=new St,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new an,this._frameExtents=new ve(1,1),this._viewportCount=1,this._viewports=[new Ue(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){let t=this.camera,r=this.matrix;_l.setFromMatrixPosition(e.matrixWorld),t.position.copy(_l),Al.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Al),t.updateMatrixWorld(),Sl.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Sl),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(t.projectionMatrix),r.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){let e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}},El=class extends Ml{constructor(){super(new Yr(50,1,.5,500)),this.focus=1}updateMatrices(e){let t=this.camera,r=2*ue*e.angle*this.focus,n=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;(r!==t.fov||n!==t.aspect||i!==t.far)&&(t.fov=r,t.aspect=n,t.far=i,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}};El.prototype.isSpotLightShadow=!0;var Cl=class extends bl{constructor(e,t,r=0,n=Math.PI/3,i=0,a=1){super(e,t),this.type="SpotLight",this.position.copy(Yt.DefaultUp),this.updateMatrix(),this.target=new Yt,this.distance=r,this.angle=n,this.penumbra=i,this.decay=a,this.shadow=new El}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}};Cl.prototype.isSpotLight=!0;var Tl=new St,Dl=new We,Ll=new We,Pl=class extends Ml{constructor(){super(new Yr(90,1,.5,500)),this._frameExtents=new ve(4,2),this._viewportCount=6,this._viewports=[new Ue(2,1,1,1),new Ue(0,1,1,1),new Ue(3,1,1,1),new Ue(1,1,1,1),new Ue(3,0,1,1),new Ue(1,0,1,1)],this._cubeDirections=[new We(1,0,0),new We(-1,0,0),new We(0,0,1),new We(0,0,-1),new We(0,1,0),new We(0,-1,0)],this._cubeUps=[new We(0,1,0),new We(0,1,0),new We(0,1,0),new We(0,1,0),new We(0,0,1),new We(0,0,-1)]}updateMatrices(e,t=0){let r=this.camera,n=this.matrix,i=e.distance||r.far;i!==r.far&&(r.far=i,r.updateProjectionMatrix()),Dl.setFromMatrixPosition(e.matrixWorld),r.position.copy(Dl),Ll.copy(r.position),Ll.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(Ll),r.updateMatrixWorld(),n.makeTranslation(-Dl.x,-Dl.y,-Dl.z),Tl.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Tl)}};Pl.prototype.isPointLightShadow=!0;var Rl=class extends bl{constructor(e,t,r=0,n=1){super(e,t),this.type="PointLight",this.distance=r,this.decay=n,this.shadow=new Pl}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}};Rl.prototype.isPointLight=!0;var Ol=class extends Ml{constructor(){super(new yn(-5,5,5,-5,.5,500))}};Ol.prototype.isDirectionalLightShadow=!0;var kl=class extends bl{constructor(e,t){super(e,t),this.type="DirectionalLight",this.position.copy(Yt.DefaultUp),this.updateMatrix(),this.target=new Yt,this.shadow=new Ol}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}};kl.prototype.isDirectionalLight=!0,class extends bl{constructor(e,t){super(e,t),this.type="AmbientLight"}}.prototype.isAmbientLight=!0,class extends bl{constructor(e,t,r=10,n=10){super(e,t),this.type="RectAreaLight",this.width=r,this.height=n}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){let t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}.prototype.isRectAreaLight=!0;var Il=class{constructor(){this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new We)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){let r=e.x,n=e.y,i=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*n),t.addScaledVector(a[2],.488603*i),t.addScaledVector(a[3],.488603*r),t.addScaledVector(a[4],r*n*1.092548),t.addScaledVector(a[5],n*i*1.092548),t.addScaledVector(a[6],.315392*(3*i*i-1)),t.addScaledVector(a[7],r*i*1.092548),t.addScaledVector(a[8],.546274*(r*r-n*n)),t}getIrradianceAt(e,t){let r=e.x,n=e.y,i=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],1.023328*n),t.addScaledVector(a[2],1.023328*i),t.addScaledVector(a[3],1.023328*r),t.addScaledVector(a[4],.858086*r*n),t.addScaledVector(a[5],.858086*n*i),t.addScaledVector(a[6],.743125*i*i-.247708),t.addScaledVector(a[7],.858086*r*i),t.addScaledVector(a[8],.429043*(r*r-n*n)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e,t=0){let r=this.coefficients;for(let n=0;n<9;n++)r[n].fromArray(e,t+3*n);return this}toArray(e=[],t=0){let r=this.coefficients;for(let n=0;n<9;n++)r[n].toArray(e,t+3*n);return e}static getBasisAt(e,t){let r=e.x,n=e.y,i=e.z;t[0]=.282095,t[1]=.488603*n,t[2]=.488603*i,t[3]=.488603*r,t[4]=1.092548*r*n,t[5]=1.092548*n*i,t[6]=.315392*(3*i*i-1),t[7]=1.092548*r*i,t[8]=.546274*(r*r-n*n)}};Il.prototype.isSphericalHarmonics3=!0;var Bl=class extends bl{constructor(e=new Il,t=1){super(void 0,t),this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){let t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}};Bl.prototype.isLightProbe=!0;var zl=class extends wr{constructor(){super(),this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return(new this.constructor).copy(this)}toJSON(){let e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}};zl.prototype.isInstancedBufferGeometry=!0;var Nl=class extends fl{constructor(e){super(e)}load(e,t,r,n){let i=this,a=new gl(i.manager);a.setPath(i.path),a.setRequestHeader(i.requestHeader),a.setWithCredentials(i.withCredentials),a.load(e,(function(r){try{t(i.parse(JSON.parse(r)))}catch(t){n?n(t):console.error(t),i.manager.itemError(e)}}),r,n)}parse(e){let t={},r={};function n(e,n){if(void 0!==t[n])return t[n];let i=e.interleavedBuffers[n],a=function(e,t){if(void 0!==r[t])return r[t];let n=e.arrayBuffers[t],i=new Uint32Array(n).buffer;return r[t]=i,i}(e,i.buffer),o=we(i.type,a),s=new Fa(o,i.stride);return s.uuid=i.uuid,t[n]=s,s}let i=e.isInstancedBufferGeometry?new zl:new wr,a=e.data.index;if(void 0!==a){let e=we(a.type,a.array);i.setIndex(new cr(e,1))}let o=e.data.attributes;for(let t in o){let r,a=o[t];if(a.isInterleavedBufferAttribute){let t=n(e.data,a.data);r=new ja(t,a.itemSize,a.offset,a.normalized)}else{let e=we(a.type,a.array);r=new(a.isInstancedBufferAttribute?uo:cr)(e,a.itemSize,a.normalized)}void 0!==a.name&&(r.name=a.name),void 0!==a.usage&&r.setUsage(a.usage),void 0!==a.updateRange&&(r.updateRange.offset=a.updateRange.offset,r.updateRange.count=a.updateRange.count),i.setAttribute(t,r)}let s=e.data.morphAttributes;if(s)for(let t in s){let r=s[t],a=[];for(let t=0,i=r.length;t<i;t++){let i,o=r[t];if(o.isInterleavedBufferAttribute){let t=n(e.data,o.data);i=new ja(t,o.itemSize,o.offset,o.normalized)}else{let e=we(o.type,o.array);i=new cr(e,o.itemSize,o.normalized)}void 0!==o.name&&(i.name=o.name),a.push(i)}i.morphAttributes[t]=a}e.data.morphTargetsRelative&&(i.morphTargetsRelative=!0);let l=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==l)for(let e=0,t=l.length;e!==t;++e){let t=l[e];i.addGroup(t.start,t.count,t.materialIndex)}let u=e.data.boundingSphere;if(void 0!==u){let e=new We;void 0!==u.center&&e.fromArray(u.center),i.boundingSphere=new pt(e,u.radius)}return e.name&&(i.name=e.name),e.userData&&(i.userData=e.userData),i}};(class extends fl{constructor(e){super(e),typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,r,n){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);let i=this,a=hl.get(e);if(void 0!==a)return i.manager.itemStart(e),setTimeout((function(){t&&t(a),i.manager.itemEnd(e)}),0),a;let o={};o.credentials="anonymous"===this.crossOrigin?"same-origin":"include",o.headers=this.requestHeader,fetch(e,o).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,Object.assign(i.options,{colorSpaceConversion:"none"}))})).then((function(r){hl.add(e,r),t&&t(r),i.manager.itemEnd(e)})).catch((function(t){n&&n(t),i.manager.itemError(e),i.manager.itemEnd(e)})),i.manager.itemStart(e)}}).prototype.isImageBitmapLoader=!0;var Fl,Ul=class extends fl{constructor(e){super(e)}load(e,t,r,n){let i=this,a=new gl(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(r){try{let e=r.slice(0);(void 0===Fl&&(Fl=new(window.AudioContext||window.webkitAudioContext)),Fl).decodeAudioData(e,(function(e){t(e)}))}catch(t){n?n(t):console.error(t),i.manager.itemError(e)}}),r,n)}};function jl(){return(typeof performance>"u"?Date:performance).now()}(class extends Bl{constructor(e,t,r=1){super(void 0,r);let n=(new Oe).set(e),i=(new Oe).set(t),a=new We(n.r,n.g,n.b),o=new We(i.r,i.g,i.b),s=Math.sqrt(Math.PI),l=s*Math.sqrt(.75);this.sh.coefficients[0].copy(a).add(o).multiplyScalar(s),this.sh.coefficients[1].copy(a).sub(o).multiplyScalar(l)}}).prototype.isHemisphereLightProbe=!0,class extends Bl{constructor(e,t=1){super(void 0,t);let r=(new Oe).set(e);this.sh.coefficients[0].set(r.r,r.g,r.b).multiplyScalar(2*Math.sqrt(Math.PI))}}.prototype.isAmbientLightProbe=!0;var Hl=class{constructor(e,t,r){let n,i,a;switch(this.binding=e,this.valueSize=r,t){case"quaternion":n=this._slerp,i=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*r),this._workIndex=5;break;case"string":case"bool":n=this._select,i=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(5*r);break;default:n=this._lerp,i=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*r)}this._mixBufferRegion=n,this._mixBufferRegionAdditive=i,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){let r=this.buffer,n=this.valueSize,i=e*n+n,a=this.cumulativeWeight;if(0===a){for(let e=0;e!==n;++e)r[i+e]=r[e];a=t}else{a+=t;let e=t/a;this._mixBufferRegion(r,i,0,e,n)}this.cumulativeWeight=a}accumulateAdditive(e){let t=this.buffer,r=this.valueSize,n=r*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,n,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){let t=this.valueSize,r=this.buffer,n=e*t+t,i=this.cumulativeWeight,a=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1){let e=t*this._origIndex;this._mixBufferRegion(r,n,e,1-i,t)}a>0&&this._mixBufferRegionAdditive(r,n,this._addIndex*t,1,t);for(let e=t,i=t+t;e!==i;++e)if(r[e]!==r[e+t]){o.setValue(r,n);break}}saveOriginalState(){let e=this.binding,t=this.buffer,r=this.valueSize,n=r*this._origIndex;e.getValue(t,n);for(let e=r,i=n;e!==i;++e)t[e]=t[n+e%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){let e=3*this.valueSize;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){let e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){let e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,n,i){if(n>=.5)for(let n=0;n!==i;++n)e[t+n]=e[r+n]}_slerp(e,t,r,n){Ge.slerpFlat(e,t,e,t,e,r,n)}_slerpAdditive(e,t,r,n,i){let a=this._workIndex*i;Ge.multiplyQuaternionsFlat(e,a,e,t,e,r),Ge.slerpFlat(e,t,e,t,e,a,n)}_lerp(e,t,r,n,i){let a=1-n;for(let o=0;o!==i;++o){let i=t+o;e[i]=e[i]*a+e[r+o]*n}}_lerpAdditive(e,t,r,n,i){for(let a=0;a!==i;++a){let i=t+a;e[i]=e[i]+e[r+a]*n}}},Vl="\\[\\]\\.:\\/",Gl=new RegExp("["+Vl+"]","g"),Wl="[^"+Vl+"]",ql="[^"+Vl.replace("\\.","")+"]",Yl=/((?:WC+[\/:])*)/.source.replace("WC",Wl),Xl=/(WCOD+)?/.source.replace("WCOD",ql),Ql=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Wl),Jl=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Wl),Zl=new RegExp("^"+Yl+Xl+Ql+Jl+"$"),Kl=["material","materials","bones"],$l=class{constructor(e,t,r){this.path=t,this.parsedPath=r||$l.parseTrackName(t),this.node=$l.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new $l.Composite(e,t,r):new $l(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Gl,"")}static parseTrackName(e){let t=Zl.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);let r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},n=r.nodeName&&r.nodeName.lastIndexOf(".");if(void 0!==n&&-1!==n){let e=r.nodeName.substring(n+1);-1!==Kl.indexOf(e)&&(r.nodeName=r.nodeName.substring(0,n),r.objectName=e)}if(null===r.propertyName||0===r.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){let r=e.skeleton.getBoneByName(t);if(void 0!==r)return r}if(e.children){let r=function(e){for(let n=0;n<e.length;n++){let i=e[n];if(i.name===t||i.uuid===t)return i;let a=r(i.children);if(a)return a}return null},n=r(e.children);if(n)return n}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){let r=this.resolvedProperty;for(let n=0,i=r.length;n!==i;++n)e[t++]=r[n]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){let r=this.resolvedProperty;for(let n=0,i=r.length;n!==i;++n)r[n]=e[t++]}_setValue_array_setNeedsUpdate(e,t){let r=this.resolvedProperty;for(let n=0,i=r.length;n!==i;++n)r[n]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){let r=this.resolvedProperty;for(let n=0,i=r.length;n!==i;++n)r[n]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node,t=this.parsedPath,r=t.objectName,n=t.propertyName,i=t.propertyIndex;if(e||(e=$l.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(r){let n=t.objectIndex;switch(r){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===n){n=t;break}break;default:if(void 0===e[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[r]}if(void 0!==n){if(void 0===e[n])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[n]}}let a=e[n];if(void 0===a){let r=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+r+"."+n+" but it wasn't found.",e)}let o=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?o=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(o=this.Versioning.MatrixWorldNeedsUpdate);let s=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===n){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[i]&&(i=e.morphTargetDictionary[i])}s=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=i}else void 0!==a.fromArray&&void 0!==a.toArray?(s=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(s=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=n;this.getValue=this.GetterByBindingType[s],this.setValue=this.SetterByBindingTypeAndVersioning[s][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}};$l.Composite=class{constructor(e,t,r){let n=r||$l.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,n)}getValue(e,t){this.bind();let r=this._targetGroup.nCachedObjects_,n=this._bindings[r];void 0!==n&&n.getValue(e,t)}setValue(e,t){let r=this._bindings;for(let n=this._targetGroup.nCachedObjects_,i=r.length;n!==i;++n)r[n].setValue(e,t)}bind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}},$l.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},$l.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},$l.prototype.GetterByBindingType=[$l.prototype._getValue_direct,$l.prototype._getValue_array,$l.prototype._getValue_arrayElement,$l.prototype._getValue_toArray],$l.prototype.SetterByBindingTypeAndVersioning=[[$l.prototype._setValue_direct,$l.prototype._setValue_direct_setNeedsUpdate,$l.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[$l.prototype._setValue_array,$l.prototype._setValue_array_setNeedsUpdate,$l.prototype._setValue_array_setMatrixWorldNeedsUpdate],[$l.prototype._setValue_arrayElement,$l.prototype._setValue_arrayElement_setNeedsUpdate,$l.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[$l.prototype._setValue_fromArray,$l.prototype._setValue_fromArray_setNeedsUpdate,$l.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],class extends ae{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){let r=e._localRoot||this._root,n=e._clip.tracks,i=n.length,a=e._propertyBindings,o=e._interpolants,s=r.uuid,l=this._bindingsByRootAndName,u=l[s];void 0===u&&(u={},l[s]=u);for(let e=0;e!==i;++e){let i=n[e],l=i.name,c=u[l];if(void 0!==c)++c.referenceCount,a[e]=c;else{if(c=a[e],void 0!==c){null===c._cacheIndex&&(++c.referenceCount,this._addInactiveBinding(c,s,l));continue}let n=t&&t._propertyBindings[e].binding.parsedPath;c=new Hl($l.create(r,l,n),i.ValueTypeName,i.getValueSize()),++c.referenceCount,this._addInactiveBinding(c,s,l),a[e]=c}o[e].resultBuffer=c.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){let t=(e._localRoot||this._root).uuid,r=e._clip.uuid,n=this._actionsByClip[r];this._bindAction(e,n&&n.knownActions[0]),this._addInactiveAction(e,r,t)}let t=e._propertyBindings;for(let e=0,r=t.length;e!==r;++e){let r=t[e];0==r.useCount++&&(this._lendBinding(r),r.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){let t=e._propertyBindings;for(let e=0,r=t.length;e!==r;++e){let r=t[e];0==--r.useCount&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;let e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){let t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,r){let n=this._actions,i=this._actionsByClip,a=i[t];if(void 0===a)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=a;else{let t=a.knownActions;e._byClipCacheIndex=t.length,t.push(e)}e._cacheIndex=n.length,n.push(e),a.actionByRoot[r]=e}_removeInactiveAction(e){let t=this._actions,r=t[t.length-1],n=e._cacheIndex;r._cacheIndex=n,t[n]=r,t.pop(),e._cacheIndex=null;let i=e._clip.uuid,a=this._actionsByClip,o=a[i],s=o.knownActions,l=s[s.length-1],u=e._byClipCacheIndex;l._byClipCacheIndex=u,s[u]=l,s.pop(),e._byClipCacheIndex=null,delete o.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete a[i],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){let t=e._propertyBindings;for(let e=0,r=t.length;e!==r;++e){let r=t[e];0==--r.referenceCount&&this._removeInactiveBinding(r)}}_lendAction(e){let t=this._actions,r=e._cacheIndex,n=this._nActiveActions++,i=t[n];e._cacheIndex=n,t[n]=e,i._cacheIndex=r,t[r]=i}_takeBackAction(e){let t=this._actions,r=e._cacheIndex,n=--this._nActiveActions,i=t[n];e._cacheIndex=n,t[n]=e,i._cacheIndex=r,t[r]=i}_addInactiveBinding(e,t,r){let n=this._bindingsByRootAndName,i=this._bindings,a=n[t];void 0===a&&(a={},n[t]=a),a[r]=e,e._cacheIndex=i.length,i.push(e)}_removeInactiveBinding(e){let t=this._bindings,r=e.binding,n=r.rootNode.uuid,i=r.path,a=this._bindingsByRootAndName,o=a[n],s=t[t.length-1],l=e._cacheIndex;s._cacheIndex=l,t[l]=s,t.pop(),delete o[i],0===Object.keys(o).length&&delete a[n]}_lendBinding(e){let t=this._bindings,r=e._cacheIndex,n=this._nActiveBindings++,i=t[n];e._cacheIndex=n,t[n]=e,i._cacheIndex=r,t[r]=i}_takeBackBinding(e){let t=this._bindings,r=e._cacheIndex,n=--this._nActiveBindings,i=t[n];e._cacheIndex=n,t[n]=e,i._cacheIndex=r,t[r]=i}_lendControlInterpolant(){let e=this._controlInterpolants,t=this._nActiveControlInterpolants++,r=e[t];return void 0===r&&(r=new $s(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){let t=this._controlInterpolants,r=e.__cacheIndex,n=--this._nActiveControlInterpolants,i=t[n];e.__cacheIndex=n,t[n]=e,i.__cacheIndex=r,t[r]=i}clipAction(e,t,r){let n=t||this._root,i=n.uuid,a="string"==typeof e?ul.findByName(n,e):e,o=null!==a?a.uuid:e,s=this._actionsByClip[o],l=null;if(void 0===r&&(r=null!==a?a.blendMode:2500),void 0!==s){let e=s.actionByRoot[i];if(void 0!==e&&e.blendMode===r)return e;l=s.knownActions[0],null===a&&(a=l._clip)}if(null===a)return null;let u=new class{constructor(e,t,r=null,n=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=n;let i=t.tracks,a=i.length,o=new Array(a),s={endingStart:q,endingEnd:q};for(let e=0;e!==a;++e){let t=i[e].createInterpolant(null);o[e]=t,t.settings=s}this._interpolantSettings=s,this._interpolants=o,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){let r=this._clip.duration,n=e._clip.duration,i=n/r,a=r/n;e.warp(1,i,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,r){return e.crossFadeFrom(this,t,r)}stopFading(){let e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){let n=this._mixer,i=n.time,a=this.timeScale,o=this._timeScaleInterpolant;null===o&&(o=n._lendControlInterpolant(),this._timeScaleInterpolant=o);let s=o.parameterPositions,l=o.sampleValues;return s[0]=i,s[1]=i+r,l[0]=e/a,l[1]=t/a,this}stopWarping(){let e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,n){if(!this.enabled)return void this._updateWeight(e);let i=this._startTime;if(null!==i){let n=(e-i)*r;if(n<0||0===r)return;this._startTime=null,t=r*n}t*=this._updateTimeScale(e);let a=this._updateTime(t),o=this._updateWeight(e);if(o>0){let e=this._interpolants,t=this._propertyBindings;if(2501===this.blendMode)for(let r=0,n=e.length;r!==n;++r)e[r].evaluate(a),t[r].accumulateAdditive(o);else for(let r=0,i=e.length;r!==i;++r)e[r].evaluate(a),t[r].accumulate(n,o)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;let r=this._weightInterpolant;if(null!==r){let n=r.evaluate(e)[0];t*=n,e>r.parameterPositions[1]&&(this.stopFading(),0===n&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;let r=this._timeScaleInterpolant;null!==r&&(t*=r.evaluate(e)[0],e>r.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){let t=this._clip.duration,r=this.loop,n=this.time+e,i=this._loopCount,a=2202===r;if(0===e)return-1===i?n:a&&1==(1&i)?t-n:n;if(2200===r){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(n>=t)n=t;else{if(!(n<0)){this.time=n;break e}n=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=n,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),n>=t||n<0){let r=Math.floor(n/t);n-=t*r,i+=Math.abs(r);let o=this.repetitions-i;if(o<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,n=e>0?t:0,this.time=n,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===o){let t=e<0;this._setEndings(t,!t,a)}else this._setEndings(!1,!1,a);this._loopCount=i,this.time=n,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:r})}}else this.time=n;if(a&&1==(1&i))return t-n}return n}_setEndings(e,t,r){let n=this._interpolantSettings;r?(n.endingStart=Y,n.endingEnd=Y):(n.endingStart=e?this.zeroSlopeAtStart?Y:q:X,n.endingEnd=t?this.zeroSlopeAtEnd?Y:q:X)}_scheduleFading(e,t,r){let n=this._mixer,i=n.time,a=this._weightInterpolant;null===a&&(a=n._lendControlInterpolant(),this._weightInterpolant=a);let o=a.parameterPositions,s=a.sampleValues;return o[0]=i,s[0]=t,o[1]=i+e,s[1]=r,this}}(this,a,t,r);return this._bindAction(u,l),this._addInactiveAction(u,o,i),u}existingAction(e,t){let r=t||this._root,n=r.uuid,i="string"==typeof e?ul.findByName(r,e):e,a=i?i.uuid:e,o=this._actionsByClip[a];return void 0!==o&&o.actionByRoot[n]||null}stopAllAction(){let e=this._actions;for(let t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}update(e){e*=this.timeScale;let t=this._actions,r=this._nActiveActions,n=this.time+=e,i=Math.sign(e),a=this._accuIndex^=1;for(let o=0;o!==r;++o)t[o]._update(n,e,i,a);let o=this._bindings,s=this._nActiveBindings;for(let e=0;e!==s;++e)o[e].apply(a);return this}setTime(e){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){let t=this._actions,r=e.uuid,n=this._actionsByClip,i=n[r];if(void 0!==i){let e=i.knownActions;for(let r=0,n=e.length;r!==n;++r){let n=e[r];this._deactivateAction(n);let i=n._cacheIndex,a=t[t.length-1];n._cacheIndex=null,n._byClipCacheIndex=null,a._cacheIndex=i,t[i]=a,t.pop(),this._removeInactiveBindingsForAction(n)}delete n[r]}}uncacheRoot(e){let t=e.uuid,r=this._actionsByClip;for(let e in r){let n=r[e].actionByRoot[t];void 0!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}let n=this._bindingsByRootAndName[t];if(void 0!==n)for(let e in n){let t=n[e];t.restoreOriginalState(),this._removeInactiveBinding(t)}}uncacheAction(e,t){let r=this.existingAction(e,t);null!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}}.prototype._controlInterpolantsResultBuffer=new Float32Array(1);var eu=class{constructor(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}clone(){return new eu(void 0===this.value.clone?this.value:this.value.clone())}};function tu(e,t){return e.distance-t.distance}function ru(e,t,r,n){if(e.layers.test(t.layers)&&e.raycast(t,r),!0===n){let n=e.children;for(let e=0,i=n.length;e<i;e++)ru(n[e],t,r,!0)}}(class extends Fa{constructor(e,t,r=1){super(e,t),this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){let t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){let t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}).prototype.isInstancedInterleavedBuffer=!0;var nu=class{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(he(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}},iu=new ve,au=class{constructor(e=new ve(1/0,1/0),t=new ve(-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let r=iu.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return iu.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}};au.prototype.isBox2=!0;var ou=new We,su=new We,lu=class{constructor(e=new We,t=new We){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){ou.subVectors(e,this.start),su.subVectors(this.end,this.start);let r=su.dot(su),n=su.dot(ou)/r;return t&&(n=he(n,0,1)),n}closestPointToPoint(e,t,r){let n=this.closestPointToPointParameter(e,t);return this.delta(r).multiplyScalar(n).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}},uu=new We,cu=class extends Yt{constructor(e,t){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;let r=new wr,n=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let e=0,t=1,r=32;e<r;e++,t++){let i=e/r*Math.PI*2,a=t/r*Math.PI*2;n.push(Math.cos(i),Math.sin(i),1,Math.cos(a),Math.sin(a),1)}r.setAttribute("position",new pr(n,3));let i=new mo({fog:!1,toneMapped:!1});this.cone=new Ao(r,i),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();let e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),uu.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(uu),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}},hu=new We,du=new St,pu=new St;function fu(e){let t=[];!0===e.isBone&&t.push(e);for(let r=0;r<e.children.length;r++)t.push.apply(t,fu(e.children[r]));return t}var mu=class extends Fr{constructor(e,t,r){super(new zs(t,4,2),new sr({wireframe:!0,fog:!1,toneMapped:!1})),this.light=e,this.light.updateMatrixWorld(),this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}},gu=new We,vu=new We,yu=new We,xu=class extends Yt{constructor(e,t,r){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,void 0===t&&(t=1);let n=new wr;n.setAttribute("position",new pr([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));let i=new mo({fog:!1,toneMapped:!1});this.lightPlane=new wo(n,i),this.add(this.lightPlane),n=new wr,n.setAttribute("position",new pr([0,0,0,0,0,1],3)),this.targetLine=new wo(n,i),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){gu.setFromMatrixPosition(this.light.matrixWorld),vu.setFromMatrixPosition(this.light.target.matrixWorld),yu.subVectors(vu,gu),this.lightPlane.lookAt(vu),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(vu),this.targetLine.scale.z=yu.length()}},bu=new We,wu=new qr,Su=class extends Ao{constructor(e){let t=new wr,r=new mo({color:16777215,vertexColors:!0,toneMapped:!1}),n=[],i=[],a={},o=new Oe(16755200),s=new Oe(16711680),l=new Oe(43775),u=new Oe(16777215),c=new Oe(3355443);function h(e,t,r){d(e,r),d(t,r)}function d(e,t){n.push(0,0,0),i.push(t.r,t.g,t.b),void 0===a[e]&&(a[e]=[]),a[e].push(n.length/3-1)}h("n1","n2",o),h("n2","n4",o),h("n4","n3",o),h("n3","n1",o),h("f1","f2",o),h("f2","f4",o),h("f4","f3",o),h("f3","f1",o),h("n1","f1",o),h("n2","f2",o),h("n3","f3",o),h("n4","f4",o),h("p","n1",s),h("p","n2",s),h("p","n3",s),h("p","n4",s),h("u1","u2",l),h("u2","u3",l),h("u3","u1",l),h("c","t",u),h("p","c",c),h("cn1","cn2",c),h("cn3","cn4",c),h("cf1","cf2",c),h("cf3","cf4",c),t.setAttribute("position",new pr(n,3)),t.setAttribute("color",new pr(i,3)),super(t,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update()}update(){let e=this.geometry,t=this.pointMap;wu.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),_u("c",t,e,wu,0,0,-1),_u("t",t,e,wu,0,0,1),_u("n1",t,e,wu,-1,-1,-1),_u("n2",t,e,wu,1,-1,-1),_u("n3",t,e,wu,-1,1,-1),_u("n4",t,e,wu,1,1,-1),_u("f1",t,e,wu,-1,-1,1),_u("f2",t,e,wu,1,-1,1),_u("f3",t,e,wu,-1,1,1),_u("f4",t,e,wu,1,1,1),_u("u1",t,e,wu,.7,1.1,-1),_u("u2",t,e,wu,-.7,1.1,-1),_u("u3",t,e,wu,0,2,-1),_u("cf1",t,e,wu,-1,0,1),_u("cf2",t,e,wu,1,0,1),_u("cf3",t,e,wu,0,-1,1),_u("cf4",t,e,wu,0,1,1),_u("cn1",t,e,wu,-1,0,-1),_u("cn2",t,e,wu,1,0,-1),_u("cn3",t,e,wu,0,-1,-1),_u("cn4",t,e,wu,0,1,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}};function _u(e,t,r,n,i,a,o){bu.set(i,a,o).unproject(n);let s=t[e];if(void 0!==s){let e=r.getAttribute("position");for(let t=0,r=s.length;t<r;t++)e.setXYZ(s[t],bu.x,bu.y,bu.z)}}var Au=class extends Ao{constructor(e,t=16776960){let r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),n=new wr;n.setIndex(new cr(r,1)),n.setAttribute("position",new pr([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(n,new mo({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){let t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}},Mu=class extends Ao{constructor(e=1){let t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=new wr;r.setAttribute("position",new pr(t,3)),r.setAttribute("color",new pr([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),super(r,new mo({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(e,t,r){let n=new Oe,i=this.geometry.attributes.color.array;return n.set(e),n.toArray(i,0),n.toArray(i,3),n.set(t),n.toArray(i,6),n.toArray(i,9),n.set(r),n.toArray(i,12),n.toArray(i,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}},Eu=new ArrayBuffer(4),Cu=(new Float32Array(Eu),new Uint32Array(Eu),new Uint32Array(512)),Tu=new Uint32Array(512);for(let e=0;e<256;++e){let t=e-127;t<-27?(Cu[e]=0,Cu[256|e]=32768,Tu[e]=24,Tu[256|e]=24):t<-14?(Cu[e]=1024>>-t-14,Cu[256|e]=1024>>-t-14|32768,Tu[e]=-t-1,Tu[256|e]=-t-1):t<=15?(Cu[e]=t+15<<10,Cu[256|e]=t+15<<10|32768,Tu[e]=13,Tu[256|e]=13):t<128?(Cu[e]=31744,Cu[256|e]=64512,Tu[e]=24,Tu[256|e]=24):(Cu[e]=31744,Cu[256|e]=64512,Tu[e]=13,Tu[256|e]=13)}var Du=new Uint32Array(2048),Lu=new Uint32Array(64),Pu=new Uint32Array(64);for(let e=1;e<1024;++e){let t=e<<13,r=0;for(;0==(8388608&t);)t<<=1,r-=8388608;t&=-8388609,r+=947912704,Du[e]=t|r}for(let e=1024;e<2048;++e)Du[e]=939524096+(e-1024<<13);for(let e=1;e<31;++e)Lu[e]=e<<23;Lu[31]=1199570944,Lu[32]=2147483648;for(let e=33;e<63;++e)Lu[e]=2147483648+(e-32<<23);Lu[63]=3347054592;for(let e=1;e<64;++e)32!==e&&(Pu[e]=1024);Ro.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(Ro.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},$o.prototype.fromPoints=function(e){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)},class extends Ao{constructor(e=10,t=10,r=4473924,n=8947848){r=new Oe(r),n=new Oe(n);let i=t/2,a=e/t,o=e/2,s=[],l=[];for(let e=0,u=0,c=-o;e<=t;e++,c+=a){s.push(-o,0,c,o,0,c),s.push(c,0,-o,c,0,o);let t=e===i?r:n;t.toArray(l,u),u+=3,t.toArray(l,u),u+=3,t.toArray(l,u),u+=3,t.toArray(l,u),u+=3}let u=new wr;u.setAttribute("position",new pr(s,3)),u.setAttribute("color",new pr(l,3)),super(u,new mo({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}}.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},class extends Ao{constructor(e){let t=fu(e),r=new wr,n=[],i=[],a=new Oe(0,0,1),o=new Oe(0,1,0);for(let e=0;e<t.length;e++){let r=t[e];r.parent&&r.parent.isBone&&(n.push(0,0,0),n.push(0,0,0),i.push(a.r,a.g,a.b),i.push(o.r,o.g,o.b))}r.setAttribute("position",new pr(n,3)),r.setAttribute("color",new pr(i,3)),super(r,new mo({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){let t=this.bones,r=this.geometry,n=r.getAttribute("position");pu.copy(this.root.matrixWorld).invert();for(let e=0,r=0;e<t.length;e++){let i=t[e];i.parent&&i.parent.isBone&&(du.multiplyMatrices(pu,i.matrixWorld),hu.setFromMatrixPosition(du),n.setXYZ(r,hu.x,hu.y,hu.z),du.multiplyMatrices(pu,i.parent.matrixWorld),hu.setFromMatrixPosition(du),n.setXYZ(r+1,hu.x,hu.y,hu.z),r+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},fl.prototype.extractUrlBase=function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),class{static decodeText(e){if(typeof TextDecoder<"u")return(new TextDecoder).decode(e);let t="";for(let r=0,n=e.length;r<n;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){let t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}.extractUrlBase(e)},fl.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},au.prototype.center=function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},au.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},au.prototype.isIntersectionBox=function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},au.prototype.size=function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)},Xe.prototype.center=function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Xe.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Xe.prototype.isIntersectionBox=function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},Xe.prototype.isIntersectionSphere=function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},Xe.prototype.size=function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)},Rt.prototype.toVector3=function(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")},pt.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},an.prototype.setFromMatrix=function(e){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(e)},lu.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},ye.prototype.flattenToArrayOffset=function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},ye.prototype.multiplyVector3=function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},ye.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},ye.prototype.applyToBufferAttribute=function(e){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},ye.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},ye.prototype.getInverse=function(e){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(e).invert()},St.prototype.extractPosition=function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},St.prototype.flattenToArrayOffset=function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},St.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new We).setFromMatrixColumn(this,3)},St.prototype.setRotationFromQuaternion=function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},St.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},St.prototype.multiplyVector3=function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},St.prototype.multiplyVector4=function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},St.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},St.prototype.rotateAxis=function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},St.prototype.crossVector=function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},St.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},St.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},St.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},St.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},St.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},St.prototype.applyToBufferAttribute=function(e){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},St.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},St.prototype.makeFrustum=function(e,t,r,n,i,a){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,n,r,i,a)},St.prototype.getInverse=function(e){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(e).invert()},tn.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},Ge.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Ge.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},wt.prototype.isIntersectionBox=function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},wt.prototype.isIntersectionPlane=function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},wt.prototype.isIntersectionSphere=function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},ir.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},ir.prototype.barycoordFromPoint=function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},ir.prototype.midpoint=function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},ir.prototypenormal=function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},ir.prototype.plane=function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)},ir.barycoordFromPoint=function(e,t,r,n,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),ir.getBarycoord(e,t,r,n,i)},ir.normal=function(e,t,r,n){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),ir.getNormal(e,t,r,n)},as.prototype.extractAllPoints=function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},as.prototype.extrude=function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Os(this,e)},as.prototype.makeGeometry=function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Bs(this,e)},ve.prototype.fromAttribute=function(e,t,r){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,r)},ve.prototype.distanceToManhattan=function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},ve.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},We.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},We.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},We.prototype.getPositionFromMatrix=function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},We.prototype.getScaleFromMatrix=function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},We.prototype.getColumnFromMatrix=function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},We.prototype.applyProjection=function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},We.prototype.fromAttribute=function(e,t,r){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,r)},We.prototype.distanceToManhattan=function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},We.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Ue.prototype.fromAttribute=function(e,t,r){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,r)},Ue.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Yt.prototype.getChildByName=function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},Yt.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},Yt.prototype.translate=function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},Yt.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},Yt.prototype.applyMatrix=function(e){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)},Object.defineProperties(Yt.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Fr.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(Fr.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),lo.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Yr.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(bl.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(cr.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===re},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(re)}}}),cr.prototype.setDynamic=function(e){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?re:te),this},cr.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},cr.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},wr.prototype.addIndex=function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},wr.prototype.addAttribute=function(e,t){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):this.setAttribute(e,t):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(e,new cr(arguments[1],arguments[2])))},wr.prototype.addDrawCall=function(e,t,r){void 0!==r&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},wr.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},wr.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},wr.prototype.removeAttribute=function(e){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(e)},wr.prototype.applyMatrix=function(e){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)},Object.defineProperties(wr.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Fa.prototype.setDynamic=function(e){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?re:te),this},Fa.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},Os.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},Os.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},Os.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},Na.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},eu.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this},Object.defineProperties(or.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Oe}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===e}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(e){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=e}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}}),Object.defineProperties(Wr.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Ia.prototype.clearTarget=function(e,t,r,n){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,r,n)},Ia.prototype.animate=function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},Ia.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},Ia.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},Ia.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},Ia.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},Ia.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},Ia.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},Ia.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},Ia.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},Ia.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},Ia.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},Ia.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},Ia.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},Ia.prototype.enableScissorTest=function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},Ia.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},Ia.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},Ia.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},Ia.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},Ia.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},Ia.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},Ia.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},Ia.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},Ia.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},Ia.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(Ia.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(e){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===e?J:Q}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}},gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}}),Object.defineProperties(Aa.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(je.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),class extends Yt{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+e;let t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");let t=this;return(new Ul).load(e,(function(e){t.setBuffer(e)})),this},Qr.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)},Qr.prototype.clear=function(e,t,r,n){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(e,t,r,n)},Ie.crossOrigin=void 0,Ie.loadTexture=function(e,t,r,n){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");let i=new xl;i.setCrossOrigin(this.crossOrigin);let a=i.load(e,r,void 0,n);return t&&(a.mapping=t),a},Ie.loadTextureCube=function(e,t,r,n){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");let i=new yl;i.setCrossOrigin(this.crossOrigin);let a=i.load(e,r,void 0,n);return t&&(a.mapping=t),a},Ie.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},Ie.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};var Ru=class extends je{constructor(e,t,r){console.error('THREE.WebGLMultisampleRenderTarget has been removed. Use a normal render target and set the "samples" property to greater 0 to enable multisampling.'),super(e,t,r),this.samples=4}};typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:x}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=x);var Ou=".",ku=Symbol("target"),Iu=Symbol("unsubscribe");function Bu(e){return e instanceof Date||e instanceof Set||e instanceof Map||e instanceof WeakSet||e instanceof WeakMap||ArrayBuffer.isView(e)}var zu=Array.isArray;function Nu(e){return"symbol"==typeof e}var Fu={after:(e,t)=>zu(e)?e.slice(t.length):""===t?e:e.slice(t.length+1),concat:(e,t)=>zu(e)?(e=[...e],t&&e.push(t),e):t&&void 0!==t.toString?(""!==e&&(e+=Ou),Nu(t)?e+t.toString():e+t):e,initial:e=>{if(zu(e))return e.slice(0,-1);if(""===e)return e;let t=e.lastIndexOf(Ou);return-1===t?"":e.slice(0,t)},last:e=>{if(zu(e))return e[e.length-1]||"";if(""===e)return e;let t=e.lastIndexOf(Ou);return-1===t?e:e.slice(t+1)},walk:(e,t)=>{if(zu(e))for(let r of e)t(r);else if(""!==e){let r=0,n=e.indexOf(Ou);if(-1===n)t(e);else for(;r<e.length;)-1===n&&(n=e.length),t(e.slice(r,n)),r=n+1,n=e.indexOf(Ou,r)}},get(e,t){return this.walk(t,(t=>{e&&(e=e[t])})),e}},Uu=Fu;function ju(e,t,r){return e.isUnsubscribed||t.ignoreSymbols&&Nu(r)||t.ignoreUnderscores&&"_"===r.charAt(0)||"ignoreKeys"in t&&t.ignoreKeys.includes(r)}function Hu(e){return"[object Object]"===toString.call(e)}function Vu(){return!0}function Gu(e,t){return e.length!==t.length||e.some(((e,r)=>t[r]!==e))}var Wu=new Set(["hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),qu=new Set(["concat","includes","indexOf","join","keys","lastIndexOf"]),Yu={push:Vu,pop:Vu,shift:Vu,unshift:Vu,copyWithin:Gu,reverse:Gu,sort:Gu,splice:Gu,flat:Gu,fill:Gu},Xu=new Set([...Wu,...qu,...Object.keys(Yu)]);function Qu(e,t){if(e.size!==t.size)return!0;for(let r of e)if(!t.has(r))return!0;return!1}var Ju=["keys","values","entries"],Zu=new Set(["has","toString"]),Ku={add:Qu,clear:Qu,delete:Qu,forEach:Qu},$u=new Set([...Zu,...Object.keys(Ku),...Ju]);function ec(e,t){if(e.size!==t.size)return!0;let r;for(let[n,i]of e)if(r=t.get(n),r!==i||void 0===r&&!t.has(n))return!0;return!1}var tc=new Set([...Zu,"get"]),rc={set:ec,clear:ec,delete:ec,forEach:ec},nc=new Set([...tc,...Object.keys(rc),...Ju]),ic=class{constructor(e,t,r,n){this._path=t,this._isChanged=!1,this._clonedCache=new Set,this._hasOnValidate=n,this._changes=n?[]:null,this.clone=void 0===t?e:this._shallowClone(e)}static isHandledMethod(e){return Wu.has(e)}_shallowClone(e){let t=e;if(Hu(e))t=g({},e);else if(zu(e))t=[...e];else if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set([...e].map((e=>this._shallowClone(e))));else if(e instanceof Map){t=new Map;for(let[r,n]of e.entries())t.set(r,this._shallowClone(n))}return this._clonedCache.add(t),t}preferredThisArg(e,t,r,n){return e?(zu(n)?this._onIsChanged=Yu[t]:n instanceof Set?this._onIsChanged=Ku[t]:n instanceof Map&&(this._onIsChanged=rc[t]),n):r}update(e,t,r){let n=Uu.after(e,this._path);if("length"!==t){let e=this.clone;Uu.walk(n,(t=>{e&&e[t]&&(this._clonedCache.has(e[t])||(e[t]=this._shallowClone(e[t])),e=e[t])})),this._hasOnValidate&&this._changes.push({path:n,property:t,previous:r}),e&&e[t]&&(e[t]=r)}this._isChanged=!0}undo(e){let t;for(let r=this._changes.length-1;-1!==r;r--)t=this._changes[r],Uu.get(e,t.path)[t.property]=t.previous}isChanged(e){return void 0===this._onIsChanged?this._isChanged:this._onIsChanged(this.clone,e)}},ac=class extends ic{static isHandledMethod(e){return Xu.has(e)}},oc=class extends ic{undo(e){e.setTime(this.clone.getTime())}isChanged(e,t){return!t(this.clone.valueOf(),e.valueOf())}},sc=class extends ic{static isHandledMethod(e){return $u.has(e)}undo(e){for(let t of this.clone)e.add(t);for(let t of e)this.clone.has(t)||e.delete(t)}},lc=class extends ic{static isHandledMethod(e){return nc.has(e)}undo(e){for(let[t,r]of this.clone.entries())e.set(t,r);for(let t of e.keys())this.clone.has(t)||e.delete(t)}},uc=class extends ic{constructor(e,t,r,n){super(void 0,t,r,n),this._arg1=r[0],this._weakValue=e.has(this._arg1)}isChanged(e){return this._weakValue!==e.has(this._arg1)}undo(e){this._weakValue&&!e.has(this._arg1)?e.add(this._arg1):e.delete(this._arg1)}},cc=class extends ic{constructor(e,t,r,n){super(void 0,t,r,n),this._weakKey=r[0],this._weakHas=e.has(this._weakKey),this._weakValue=e.get(this._weakKey)}isChanged(e){return this._weakValue!==e.get(this._weakKey)}undo(e){let t=e.has(this._weakKey);this._weakHas&&!t?e.set(this._weakKey,this._weakValue):!this._weakHas&&t?e.delete(this._weakKey):this._weakValue!==e.get(this._weakKey)&&e.set(this._weakKey,this._weakValue)}},hc=class{constructor(e){this._stack=[],this._hasOnValidate=e}static isHandledType(e){return Hu(e)||zu(e)||Bu(e)}static isHandledMethod(e,t){return Hu(e)?ic.isHandledMethod(t):zu(e)?ac.isHandledMethod(t):e instanceof Set?sc.isHandledMethod(t):e instanceof Map?lc.isHandledMethod(t):Bu(e)}get isCloning(){return this._stack.length>0}start(e,t,r){let n=ic;zu(e)?n=ac:e instanceof Date?n=oc:e instanceof Set?n=sc:e instanceof Map?n=lc:e instanceof WeakSet?n=uc:e instanceof WeakMap&&(n=cc),this._stack.push(new n(e,t,r,this._hasOnValidate))}update(e,t,r){this._stack[this._stack.length-1].update(e,t,r)}preferredThisArg(e,t,r){let{name:n}=e,i=hc.isHandledMethod(r,n);return this._stack[this._stack.length-1].preferredThisArg(i,n,t,r)}isChanged(e,t,r){return this._stack[this._stack.length-1].isChanged(e,t,r)}undo(e){void 0!==this._previousClone&&this._previousClone.undo(e)}stop(){return this._previousClone=this._stack.pop(),this._previousClone.clone}},dc={equals:Object.is,isShallow:!1,pathAsArray:!1,ignoreSymbols:!1,ignoreUnderscores:!1,ignoreDetached:!1,details:!1},pc=(e,t,r={})=>{r=g(g({},dc),r);let n=Symbol("ProxyTarget"),{equals:i,isShallow:a,ignoreDetached:o,details:s}=r,l=new class{constructor(e){this._equals=e,this._proxyCache=new WeakMap,this._pathCache=new WeakMap,this.isUnsubscribed=!1}_getDescriptorCache(){return void 0===this._descriptorCache&&(this._descriptorCache=new WeakMap),this._descriptorCache}_getProperties(e){let t=this._getDescriptorCache(),r=t.get(e);return void 0===r&&(r={},t.set(e,r)),r}_getOwnPropertyDescriptor(e,t){if(this.isUnsubscribed)return Reflect.getOwnPropertyDescriptor(e,t);let r=this._getProperties(e),n=r[t];return void 0===n&&(n=Reflect.getOwnPropertyDescriptor(e,t),r[t]=n),n}getProxy(e,t,r,n){if(this.isUnsubscribed)return e;let i=e[n],a=i||e;this._pathCache.set(a,t);let o=this._proxyCache.get(a);return void 0===o&&(o=void 0===i?new Proxy(e,r):e,this._proxyCache.set(a,o)),o}getPath(e){return this.isUnsubscribed?void 0:this._pathCache.get(e)}isDetached(e,t){return!Object.is(e,Uu.get(t,this.getPath(e)))}defineProperty(e,t,r){return!!Reflect.defineProperty(e,t,r)&&(this.isUnsubscribed||(this._getProperties(e)[t]=r),!0)}setProperty(e,t,r,n,i){if(!this._equals(i,r)||!(t in e)){let i=this._getOwnPropertyDescriptor(e,t);return void 0!==i&&"set"in i?Reflect.set(e,t,r,n):Reflect.set(e,t,r)}return!0}deleteProperty(e,t,r){if(Reflect.deleteProperty(e,t)){if(!this.isUnsubscribed){let n=this._getDescriptorCache().get(e);n&&(delete n[t],this._pathCache.delete(r))}return!0}return!1}isSameDescriptor(e,t,r){let n=this._getOwnPropertyDescriptor(t,r);return void 0!==e&&void 0!==n&&Object.is(e.value,n.value)&&(e.writable||!1)===(n.writable||!1)&&(e.enumerable||!1)===(n.enumerable||!1)&&(e.configurable||!1)===(n.configurable||!1)&&e.get===n.get&&e.set===n.set}isGetInvariant(e,t){let r=this._getOwnPropertyDescriptor(e,t);return void 0!==r&&!0!==r.configurable&&!0!==r.writable}unsubscribe(){this._descriptorCache=null,this._pathCache=null,this._proxyCache=null,this.isUnsubscribed=!0}}(i),u="function"==typeof r.onValidate,c=new hc(u),h=(e,t,n,i,a)=>!u||c.isCloning||!0===r.onValidate(Uu.concat(l.getPath(e),t),n,i,a),d=(t,n,i,a)=>{!ju(l,r,n)&&(!o||!l.isDetached(t,e))&&p(l.getPath(t),n,i,a)},p=(e,r,n,i,a)=>{c.isCloning?c.update(e,r,i):t(Uu.concat(e,r),n,i,a)},f=e=>e&&(e[n]||e),m=(t,i,s,u)=>function(e){return("object"==typeof e?null===e:"function"!=typeof e)||e instanceof RegExp}(t)||"constructor"===s||a&&!hc.isHandledMethod(i,s)||ju(l,r,s)||l.isGetInvariant(i,s)||o&&l.isDetached(i,e)?t:(void 0===u&&(u=l.getPath(i)),l.getProxy(t,Uu.concat(u,s),v,n)),v={get(e,t,r){if(Nu(t)){if(t===n||t===ku)return e;if(t===Iu&&!l.isUnsubscribed&&0===l.getPath(e).length)return l.unsubscribe(),e}let i=Bu(e)?Reflect.get(e,t):Reflect.get(e,t,r);return m(i,e,t)},set(e,t,r,a){r=f(r);let o=e[n]||e,s=o[t];if(i(s,r)&&t in e)return!0;let u=h(e,t,r,s);return u&&l.setProperty(o,t,r,a,s)?(d(e,t,e[t],s),!0):!u},defineProperty(e,t,r){if(!l.isSameDescriptor(r,e,t)){let n=e[t];h(e,t,r.value,n)&&l.defineProperty(e,t,r,n)&&d(e,t,r.value,n)}return!0},deleteProperty(e,t){if(!Reflect.has(e,t))return!0;let r=Reflect.get(e,t),n=h(e,t,void 0,r);return n&&l.deleteProperty(e,t,r)?(d(e,t,void 0,r),!0):!n},apply(t,r,a){let o=r[n]||r;if(l.isUnsubscribed)return Reflect.apply(t,o,a);if((!1===s||!0!==s&&!s.includes(t.name))&&hc.isHandledType(o)){let n=Uu.initial(l.getPath(t)),s=hc.isHandledMethod(o,t.name);c.start(o,n,a);let u=Reflect.apply(t,c.preferredThisArg(t,r,o),s?a.map((e=>f(e))):a),d=c.isChanged(o,i),g=c.stop();if(hc.isHandledType(u)&&s&&(r instanceof Map&&"get"===t.name&&(n=Uu.concat(n,a[0])),u=l.getProxy(u,n,v)),d){let r={name:t.name,args:a,result:u},i=c.isCloning?Uu.initial(n):n,s=c.isCloning?Uu.last(n):"";h(Uu.get(e,i),s,o,g,r)?p(i,s,o,g,r):c.undo(o)}return(r instanceof Map||r instanceof Set)&&function(e){return"object"==typeof e&&"function"==typeof e.next}(u)?function(e,t,r,n,i){let a=e.next;if("entries"===t.name)e.next=function(){let e=a.call(this);return!1===e.done&&(e.value[0]=i(e.value[0],t,e.value[0],n),e.value[1]=i(e.value[1],t,e.value[0],n)),e};else if("values"===t.name){let o=r[ku].keys();e.next=function(){let e=a.call(this);return!1===e.done&&(e.value=i(e.value,t,o.next().value,n)),e}}else e.next=function(){let e=a.call(this);return!1===e.done&&(e.value=i(e.value,t,e.value,n)),e};return e}(u,t,r,n,m):u}return Reflect.apply(t,r,a)}},y=l.getProxy(e,r.pathAsArray?[]:"",v);return t=t.bind(y),u&&(r.onValidate=r.onValidate.bind(y)),y};pc.target=e=>e&&e[ku]||e,pc.unsubscribe=e=>e[Iu]||e;var fc=pc,mc="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,gc="object"==typeof self&&self&&self.Object===Object&&self,vc=mc||gc||Function("return this")(),yc=vc.Symbol,xc=Object.prototype,bc=xc.hasOwnProperty,wc=xc.toString,Sc=yc?yc.toStringTag:void 0,_c=Object.prototype.toString,Ac=yc?yc.toStringTag:void 0,Mc=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Ac&&Ac in Object(e)?function(e){var t=bc.call(e,Sc),r=e[Sc];try{e[Sc]=void 0;var n=!0}catch{}var i=wc.call(e);return n&&(t?e[Sc]=r:delete e[Sc]),i}(e):function(e){return _c.call(e)}(e)},Ec=function(e){return null!=e&&"object"==typeof e},Cc=function(e){return"symbol"==typeof e||Ec(e)&&"[object Symbol]"==Mc(e)},Tc=function(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i},Dc=Array.isArray,Lc=yc?yc.prototype:void 0,Pc=Lc?Lc.toString:void 0,Rc=function e(t){if("string"==typeof t)return t;if(Dc(t))return Tc(t,e)+"";if(Cc(t))return Pc?Pc.call(t):"";var r=t+"";return"0"==r&&1/t==-1/0?"-0":r},Oc=/\s/,kc=/^\s+/,Ic=function(e){return e&&e.slice(0,function(e){for(var t=e.length;t--&&Oc.test(e.charAt(t)););return t}(e)+1).replace(kc,"")},Bc=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},zc=/^[-+]0x[0-9a-f]+$/i,Nc=/^0b[01]+$/i,Fc=/^0o[0-7]+$/i,Uc=parseInt,jc=function(e){if("number"==typeof e)return e;if(Cc(e))return NaN;if(Bc(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Bc(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Ic(e);var r=Nc.test(e);return r||Fc.test(e)?Uc(e.slice(2),r?2:8):zc.test(e)?NaN:+e},Hc=function(e){return e},Vc=function(e){if(!Bc(e))return!1;var t=Mc(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},Gc=vc["__core-js_shared__"],Wc=function(){var e=/[^.]+$/.exec(Gc&&Gc.keys&&Gc.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),qc=Function.prototype.toString,Yc=function(e){if(null!=e){try{return qc.call(e)}catch{}try{return e+""}catch{}}return""},Xc=/^\[object .+?Constructor\]$/,Qc=Function.prototype,Jc=Object.prototype,Zc=Qc.toString,Kc=Jc.hasOwnProperty,$c=RegExp("^"+Zc.call(Kc).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),eh=function(e){return!(!Bc(e)||function(e){return!!Wc&&Wc in e}(e))&&(Vc(e)?$c:Xc).test(Yc(e))},th=function(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return eh(r)?r:void 0},rh=th(vc,"WeakMap"),nh=Object.create,ih=function(){function e(){}return function(t){if(!Bc(t))return{};if(nh)return nh(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),ah=ih,oh=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)},sh=function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t},lh=Date.now,uh=function(e){return function(){return e}},ch=function(){try{var e=th(Object,"defineProperty");return e({},"",{}),e}catch{}}(),hh=ch,dh=hh?function(e,t){return hh(e,"toString",{configurable:!0,enumerable:!1,value:uh(t),writable:!0})}:Hc,ph=function(e){var t=0,r=0;return function(){var n=lh(),i=16-(n-r);if(r=n,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(dh),fh=/^(?:0|[1-9]\d*)$/,mh=function(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&fh.test(e))&&e>-1&&e%1==0&&e<t},gh=function(e,t,r){"__proto__"==t&&hh?hh(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r},vh=function(e,t){return e===t||e!=e&&t!=t},yh=Object.prototype.hasOwnProperty,xh=function(e,t,r){var n=e[t];(!yh.call(e,t)||!vh(n,r)||void 0===r&&!(t in e))&&gh(e,t,r)},bh=function(e,t,r,n){var i=!r;r||(r={});for(var a=-1,o=t.length;++a<o;){var s=t[a],l=n?n(r[s],e[s],s,r,e):void 0;void 0===l&&(l=e[s]),i?gh(r,s,l):xh(r,s,l)}return r},wh=Math.max,Sh=function(e,t,r){return t=wh(void 0===t?e.length-1:t,0),function(){for(var n=arguments,i=-1,a=wh(n.length-t,0),o=Array(a);++i<a;)o[i]=n[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=n[i];return s[t]=r(o),oh(e,this,s)}},_h=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},Ah=function(e){return null!=e&&_h(e.length)&&!Vc(e)},Mh=Object.prototype,Eh=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Mh)},Ch=function(e){return Ec(e)&&"[object Arguments]"==Mc(e)},Th=Object.prototype,Dh=Th.hasOwnProperty,Lh=Th.propertyIsEnumerable,Ph=Ch(function(){return arguments}())?Ch:function(e){return Ec(e)&&Dh.call(e,"callee")&&!Lh.call(e,"callee")},Rh=Ph,Oh="object"==typeof exports&&exports&&!exports.nodeType&&exports,kh=Oh&&e&&!e.nodeType&&e,Ih=kh&&kh.exports===Oh?vc.Buffer:void 0,Bh=(Ih?Ih.isBuffer:void 0)||function(){return!1},zh={};zh["[object Float32Array]"]=zh["[object Float64Array]"]=zh["[object Int8Array]"]=zh["[object Int16Array]"]=zh["[object Int32Array]"]=zh["[object Uint8Array]"]=zh["[object Uint8ClampedArray]"]=zh["[object Uint16Array]"]=zh["[object Uint32Array]"]=!0,zh["[object Arguments]"]=zh["[object Array]"]=zh["[object ArrayBuffer]"]=zh["[object Boolean]"]=zh["[object DataView]"]=zh["[object Date]"]=zh["[object Error]"]=zh["[object Function]"]=zh["[object Map]"]=zh["[object Number]"]=zh["[object Object]"]=zh["[object RegExp]"]=zh["[object Set]"]=zh["[object String]"]=zh["[object WeakMap]"]=!1;var Nh=function(e){return function(t){return e(t)}},Fh="object"==typeof exports&&exports&&!exports.nodeType&&exports,Uh=Fh&&e&&!e.nodeType&&e,jh=Uh&&Uh.exports===Fh&&mc.process,Hh=function(){try{return Uh&&Uh.require&&Uh.require("util").types||jh&&jh.binding&&jh.binding("util")}catch{}}(),Vh=Hh&&Hh.isTypedArray,Gh=Vh?Nh(Vh):function(e){return Ec(e)&&_h(e.length)&&!!zh[Mc(e)]},Wh=Object.prototype.hasOwnProperty,qh=function(e,t){var r=Dc(e),n=!r&&Rh(e),i=!r&&!n&&Bh(e),a=!r&&!n&&!i&&Gh(e),o=r||n||i||a,s=o?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],l=s.length;for(var u in e)(t||Wh.call(e,u))&&(!o||!("length"==u||i&&("offset"==u||"parent"==u)||a&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||mh(u,l)))&&s.push(u);return s},Yh=function(e,t){return function(r){return e(t(r))}},Xh=Yh(Object.keys,Object),Qh=Object.prototype.hasOwnProperty,Jh=function(e){return Ah(e)?qh(e):function(e){if(!Eh(e))return Xh(e);var t=[];for(var r in Object(e))Qh.call(e,r)&&"constructor"!=r&&t.push(r);return t}(e)},Zh=Object.prototype.hasOwnProperty,Kh=function(e){if(!Bc(e))return function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}(e);var t=Eh(e),r=[];for(var n in e)"constructor"==n&&(t||!Zh.call(e,n))||r.push(n);return r},$h=function(e){return Ah(e)?qh(e,!0):Kh(e)},ed=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,td=/^\w*$/,rd=th(Object,"create"),nd=Object.prototype.hasOwnProperty,id=Object.prototype.hasOwnProperty;function ad(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}ad.prototype.clear=function(){this.__data__=rd?rd(null):{},this.size=0},ad.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ad.prototype.get=function(e){var t=this.__data__;if(rd){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return nd.call(t,e)?t[e]:void 0},ad.prototype.has=function(e){var t=this.__data__;return rd?void 0!==t[e]:id.call(t,e)},ad.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=rd&&void 0===t?"__lodash_hash_undefined__":t,this};var od=ad,sd=function(e,t){for(var r=e.length;r--;)if(vh(e[r][0],t))return r;return-1},ld=Array.prototype.splice;function ud(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}ud.prototype.clear=function(){this.__data__=[],this.size=0},ud.prototype.delete=function(e){var t=this.__data__,r=sd(t,e);return!(r<0||(r==t.length-1?t.pop():ld.call(t,r,1),--this.size,0))},ud.prototype.get=function(e){var t=this.__data__,r=sd(t,e);return r<0?void 0:t[r][1]},ud.prototype.has=function(e){return sd(this.__data__,e)>-1},ud.prototype.set=function(e,t){var r=this.__data__,n=sd(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this};var cd=ud,hd=th(vc,"Map"),dd=function(e,t){var r=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?r["string"==typeof t?"string":"hash"]:r.map};function pd(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}pd.prototype.clear=function(){this.size=0,this.__data__={hash:new od,map:new(hd||cd),string:new od}},pd.prototype.delete=function(e){var t=dd(this,e).delete(e);return this.size-=t?1:0,t},pd.prototype.get=function(e){return dd(this,e).get(e)},pd.prototype.has=function(e){return dd(this,e).has(e)},pd.prototype.set=function(e,t){var r=dd(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this};var fd=pd;function md(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],a=r.cache;if(a.has(i))return a.get(i);var o=e.apply(this,n);return r.cache=a.set(i,o)||a,o};return r.cache=new(md.Cache||fd),r}md.Cache=fd;var gd=md,vd=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,yd=/\\(\\)?/g,xd=function(e){var t=gd(e,(function(e){return 500===r.size&&r.clear(),e})),r=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(vd,(function(e,r,n,i){t.push(n?i.replace(yd,"$1"):r||e)})),t})),bd=xd,wd=function(e){return null==e?"":Rc(e)},Sd=function(e,t){return Dc(e)?e:function(e,t){if(Dc(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!Cc(e))||td.test(e)||!ed.test(e)||null!=t&&e in Object(t)}(e,t)?[e]:bd(wd(e))},_d=function(e){if("string"==typeof e||Cc(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t},Ad=function(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e},Md=yc?yc.isConcatSpreadable:void 0,Ed=function(e){return Dc(e)||Rh(e)||!!(Md&&e&&e[Md])},Cd=function e(t,r,n,i,a){var o=-1,s=t.length;for(n||(n=Ed),a||(a=[]);++o<s;){var l=t[o];r>0&&n(l)?r>1?e(l,r-1,n,i,a):Ad(a,l):i||(a[a.length]=l)}return a},Td=function(e){return null!=e&&e.length?Cd(e,1):[]},Dd=Yh(Object.getPrototypeOf,Object),Ld=Function.prototype,Pd=Object.prototype,Rd=Ld.toString,Od=Pd.hasOwnProperty,kd=Rd.call(Object),Id=function(e){if(!Ec(e)||"[object Object]"!=Mc(e))return!1;var t=Dd(e);if(null===t)return!0;var r=Od.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&Rd.call(r)==kd};function Bd(e){var t=this.__data__=new cd(e);this.size=t.size}Bd.prototype.clear=function(){this.__data__=new cd,this.size=0},Bd.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},Bd.prototype.get=function(e){return this.__data__.get(e)},Bd.prototype.has=function(e){return this.__data__.has(e)},Bd.prototype.set=function(e,t){var r=this.__data__;if(r instanceof cd){var n=r.__data__;if(!hd||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new fd(n)}return r.set(e,t),this.size=r.size,this};var zd=Bd,Nd="object"==typeof exports&&exports&&!exports.nodeType&&exports,Fd=Nd&&e&&!e.nodeType&&e,Ud=Fd&&Fd.exports===Nd?vc.Buffer:void 0,jd=Ud?Ud.allocUnsafe:void 0,Hd=function(e,t){if(t)return e.slice();var r=e.length,n=jd?jd(r):new e.constructor(r);return e.copy(n),n},Vd=function(){return[]},Gd=Object.prototype.propertyIsEnumerable,Wd=Object.getOwnPropertySymbols,qd=Wd?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var r=-1,n=null==e?0:e.length,i=0,a=[];++r<n;){var o=e[r];t(o,r,e)&&(a[i++]=o)}return a}(Wd(e),(function(t){return Gd.call(e,t)})))}:Vd,Yd=qd,Xd=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)Ad(t,Yd(e)),e=Dd(e);return t}:Vd,Qd=Xd,Jd=function(e,t,r){var n=t(e);return Dc(e)?n:Ad(n,r(e))},Zd=function(e){return Jd(e,Jh,Yd)},Kd=function(e){return Jd(e,$h,Qd)},$d=th(vc,"DataView"),ep=th(vc,"Promise"),tp=th(vc,"Set"),rp="[object Map]",np="[object Promise]",ip="[object Set]",ap="[object WeakMap]",op="[object DataView]",sp=Yc($d),lp=Yc(hd),up=Yc(ep),cp=Yc(tp),hp=Yc(rh),dp=Mc;($d&&dp(new $d(new ArrayBuffer(1)))!=op||hd&&dp(new hd)!=rp||ep&&dp(ep.resolve())!=np||tp&&dp(new tp)!=ip||rh&&dp(new rh)!=ap)&&(dp=function(e){var t=Mc(e),r="[object Object]"==t?e.constructor:void 0,n=r?Yc(r):"";if(n)switch(n){case sp:return op;case lp:return rp;case up:return np;case cp:return ip;case hp:return ap}return t});var pp=dp,fp=Object.prototype.hasOwnProperty,mp=vc.Uint8Array,gp=function(e){var t=new e.constructor(e.byteLength);return new mp(t).set(new mp(e)),t},vp=/\w*$/,yp=yc?yc.prototype:void 0,xp=yp?yp.valueOf:void 0,bp=function(e,t){var r=t?gp(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)},wp=function(e,t,r){var n=e.constructor;switch(t){case"[object ArrayBuffer]":return gp(e);case"[object Boolean]":case"[object Date]":return new n(+e);case"[object DataView]":return function(e,t){var r=t?gp(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return bp(e,r);case"[object Map]":case"[object Set]":return new n;case"[object Number]":case"[object String]":return new n(e);case"[object RegExp]":return function(e){var t=new e.constructor(e.source,vp.exec(e));return t.lastIndex=e.lastIndex,t}(e);case"[object Symbol]":return function(e){return xp?Object(xp.call(e)):{}}(e)}},Sp=function(e){return"function"!=typeof e.constructor||Eh(e)?{}:ah(Dd(e))},_p=Hh&&Hh.isMap,Ap=_p?Nh(_p):function(e){return Ec(e)&&"[object Map]"==pp(e)},Mp=Hh&&Hh.isSet,Ep=Mp?Nh(Mp):function(e){return Ec(e)&&"[object Set]"==pp(e)},Cp="[object Arguments]",Tp="[object Function]",Dp="[object Object]",Lp={};Lp[Cp]=Lp["[object Array]"]=Lp["[object ArrayBuffer]"]=Lp["[object DataView]"]=Lp["[object Boolean]"]=Lp["[object Date]"]=Lp["[object Float32Array]"]=Lp["[object Float64Array]"]=Lp["[object Int8Array]"]=Lp["[object Int16Array]"]=Lp["[object Int32Array]"]=Lp["[object Map]"]=Lp["[object Number]"]=Lp[Dp]=Lp["[object RegExp]"]=Lp["[object Set]"]=Lp["[object String]"]=Lp["[object Symbol]"]=Lp["[object Uint8Array]"]=Lp["[object Uint8ClampedArray]"]=Lp["[object Uint16Array]"]=Lp["[object Uint32Array]"]=!0,Lp["[object Error]"]=Lp[Tp]=Lp["[object WeakMap]"]=!1;var Pp,Rp,Op,kp,Ip,Bp,zp,Np,Fp,Up,jp,Hp,Vp,Gp,Wp,qp,Yp,Xp=function e(t,r,n,i,a,o){var s,l=1&r,u=2&r,c=4&r;if(n&&(s=a?n(t,i,a,o):n(t)),void 0!==s)return s;if(!Bc(t))return t;var h=Dc(t);if(h){if(s=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&fp.call(e,"index")&&(r.index=e.index,r.input=e.input),r}(t),!l)return sh(t,s)}else{var d=pp(t),p=d==Tp||"[object GeneratorFunction]"==d;if(Bh(t))return Hd(t,l);if(d==Dp||d==Cp||p&&!a){if(s=u||p?{}:Sp(t),!l)return u?function(e,t){return bh(e,Qd(e),t)}(t,function(e,t){return e&&bh(t,$h(t),e)}(s,t)):function(e,t){return bh(e,Yd(e),t)}(t,function(e,t){return e&&bh(t,Jh(t),e)}(s,t))}else{if(!Lp[d])return a?t:{};s=wp(t,d,l)}}o||(o=new zd);var f=o.get(t);if(f)return f;o.set(t,s),Ep(t)?t.forEach((function(i){s.add(e(i,r,n,i,t,o))})):Ap(t)&&t.forEach((function(i,a){s.set(a,e(i,r,n,a,t,o))}));var m=h?void 0:(c?u?Kd:Zd:u?$h:Jh)(t);return function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););}(m||t,(function(i,a){m&&(i=t[a=i]),xh(s,a,e(i,r,n,a,t,o))})),s},Qp=function(e){return Xp(e,5)},Jp=function(e){return function(t,r,n){for(var i=-1,a=Object(t),o=n(t),s=o.length;s--;){var l=o[e?s:++i];if(!1===r(a[l],l,a))break}return t}}(),Zp=function(){return vc.Date.now()},Kp=Math.max,$p=Math.min,ef=function(e,t,r){var n,i,a,o,s,l,u=0,c=!1,h=!1,d=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function p(t){var r=n,a=i;return n=i=void 0,u=t,o=e.apply(a,r)}function f(e){return u=e,s=setTimeout(g,t),c?p(e):o}function m(e){var r=e-l;return void 0===l||r>=t||r<0||h&&e-u>=a}function g(){var e=Zp();if(m(e))return v(e);s=setTimeout(g,function(e){var r=t-(e-l);return h?$p(r,a-(e-u)):r}(e))}function v(e){return s=void 0,d&&n?p(e):(n=i=void 0,o)}function y(){var e=Zp(),r=m(e);if(n=arguments,i=this,l=e,r){if(void 0===s)return f(l);if(h)return clearTimeout(s),s=setTimeout(g,t),p(l)}return void 0===s&&(s=setTimeout(g,t)),o}return t=jc(t)||0,Bc(r)&&(c=!!r.leading,a=(h="maxWait"in r)?Kp(jc(r.maxWait)||0,t):a,d="trailing"in r?!!r.trailing:d),y.cancel=function(){void 0!==s&&clearTimeout(s),u=0,n=l=i=s=void 0},y.flush=function(){return void 0===s?o:v(Zp())},y},tf=function(e,t,r){(void 0!==r&&!vh(e[t],r)||void 0===r&&!(t in e))&&gh(e,t,r)},rf=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]},nf=function(e,t,r,n,i,a,o){var s=rf(e,r),l=rf(t,r),u=o.get(l);if(u)tf(e,r,u);else{var c=a?a(s,l,r+"",e,t,o):void 0,h=void 0===c;if(h){var d=Dc(l),p=!d&&Bh(l),f=!d&&!p&&Gh(l);c=l,d||p||f?Dc(s)?c=s:function(e){return Ec(e)&&Ah(e)}(s)?c=sh(s):p?(h=!1,c=Hd(l,!0)):f?(h=!1,c=bp(l,!0)):c=[]:Id(l)||Rh(l)?(c=s,Rh(s)?c=function(e){return bh(e,$h(e))}(s):(!Bc(s)||Vc(s))&&(c=Sp(l))):h=!1}h&&(o.set(l,c),i(c,l,n,a,o),o.delete(l)),tf(e,r,c)}},af=function e(t,r,n,i,a){t!==r&&Jp(r,(function(o,s){if(a||(a=new zd),Bc(o))nf(t,r,s,n,e,i,a);else{var l=i?i(rf(t,s),o,s+"",t,r,a):void 0;void 0===l&&(l=o),tf(t,s,l)}}),$h)},of=function(e,t){return t.length<2?e:function(e,t){for(var r=0,n=(t=Sd(t,e)).length;null!=e&&r<n;)e=e[_d(t[r++])];return r&&r==n?e:void 0}(e,function(e,t,r){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(r=r>i?i:r)<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var a=Array(i);++n<i;)a[n]=e[n+t];return a}(t,0,-1))},sf=function(e){return function(e,t){return ph(Sh(e,t,Hc),e+"")}((function(t,r){var n=-1,i=r.length,a=i>1?r[i-1]:void 0,o=i>2?r[2]:void 0;for(a=e.length>3&&"function"==typeof a?(i--,a):void 0,o&&function(e,t,r){if(!Bc(r))return!1;var n=typeof t;return!!("number"==n?Ah(r)&&mh(t,r.length):"string"==n&&t in r)&&vh(r[t],e)}(r[0],r[1],o)&&(a=i<3?void 0:a,i=1),t=Object(t);++n<i;){var s=r[n];s&&e(t,s,n,a)}return t}))}((function(e,t,r){af(e,t,r)})),lf=sf,uf=function(e,t){return t=Sd(t,e),null==(e=of(e,t))||delete e[_d(function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}(t))]},cf=function(e){return Id(e)?void 0:e},hf=function(e){return ph(Sh(e,void 0,Td),e+"")}((function(e,t){var r={};if(null==e)return r;var n=!1;t=Tc(t,(function(t){return t=Sd(t,e),n||(n=t.length>1),t})),bh(e,Kd(e),r),n&&(r=Xp(r,7,cf));for(var i=t.length;i--;)uf(r,t[i]);return r})),df=hf,pf=(!(typeof window>"u")&&window.navigator.userAgent.toLowerCase().includes(" electron/"),!(typeof window>"u")&&window.navigator.platform.toUpperCase().includes("MAC")),ff=!(typeof window>"u")&&(/iPad|iPhone|iPod/.test(window.navigator.userAgent)||pf&&"ontouchend"in document),mf=!(typeof window>"u")&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1,gf=!(typeof window>"u")&&("ontouchstart"in window||navigator.maxTouchPoints>0);function vf(e){return pf?e.metaKey:e.ctrlKey}(Rp=Pp||(Pp={})).all=["PerspectiveCamera","OrthographicCamera"],Rp.is=function(e){return Rp.all.includes(e)},(kp=Op||(Op={})).DefaultUp=[0,1,0],kp.DefaultTargetOffset=1e3,kp.defaultData={far:1e5,type:"OrthographicCamera",perspective:{near:5,fov:45,zoom:1},orthographic:{near:-1e5,zoom:1},up:kp.DefaultUp,isUpVectorFlipped:!1,targetOffset:kp.DefaultTargetOffset},kp.getZoom=function(e){return"PerspectiveCamera"===e.type?e.perspective.zoom:e.orthographic.zoom},(e=>{e.isEqual=function(e,t){return e[0]===t[0]&&e[1]===t[1]},e.lerp=function(e,t,r){return[e[0]+(t[0]-e[0])*r,e[1]+(t[1]-e[1])*r]}})(Ip||(Ip={})),(e=>{e.isEqual=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]},e.add=function(e,t){return[e[0]+t[0],e[1]+t[1],e[2]+t[2]]},e.sub=function(e,t){return[e[0]-t[0],e[1]-t[1],e[2]-t[2]]},e.lerp=function(e,t,r){return[e[0]+(t[0]-e[0])*r,e[1]+(t[1]-e[1])*r,e[2]+(t[2]-e[2])*r]}})(Bp||(Bp={})),(e=>{e.isEqual=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},e.lerp=function(e,t,r){return[e[0]+(t[0]-e[0])*r,e[1]+(t[1]-e[1])*r,e[2]+(t[2]-e[2])*r,e[3]+(t[3]-e[3])*r]}})(zp||(zp={})),(Fp=Np||(Np={})).identity=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],Fp.isEqual=function(e,t){for(let r=0;r<16;r++)if(e[r]!==t[r])return!1;return!0},Fp.simplify=function(e){return null!=e?e:Fp.identity},Fp.applyMatrix4=function(e,t){let r=t.slice(0);for(var n=0,i=t.length;n<i;n+=3){let i=1/(e[3]*t[n]+e[7]*t[n+1]+e[11]*t[n+2]+e[15]);r[n]=(e[0]*t[n]+e[4]*t[n+1]+e[8]*t[n+2]+e[12])*i,r[n+1]=(e[1]*t[n]+e[5]*t[n+1]+e[9]*t[n+2]+e[13])*i,r[n+2]=(e[2]*t[n]+e[6]*t[n+1]+e[10]*t[n+2]+e[14])*i}return r},Fp.applyMatrix3Components=function(e,t){let r=t.slice(0);for(var n=0,i=t.length;n<i;n+=3)r[n]=e[0]*t[n]+e[4]*t[n+1]+e[8]*t[n+2],r[n+1]=e[1]*t[n]+e[5]*t[n+1]+e[9]*t[n+2],r[n+2]=e[2]*t[n]+e[6]*t[n+1]+e[10]*t[n+2];return r},(jp=Up||(Up={})).white={r:1,g:1,b:1},jp.red={r:1,g:0,b:0},jp.black={r:0,g:0,b:0},jp.toRgb255a1=function(e){return{r:Math.round(255*e.r),g:Math.round(255*e.g),b:Math.round(255*e.b),a:1}},jp.clone=function(e){return{r:e.r,g:e.g,b:e.b}},jp.fromHex=function(e){return{r:((e=Math.floor(e))>>16&255)/255,g:(e>>8&255)/255,b:(255&e)/255}},jp.equals=function(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b},jp.lerp=function(e,t,r){return{r:e.r+(t.r-e.r)*r,g:e.g+(t.g-e.g)*r,b:e.b+(t.b-e.b)*r}},(Vp=Hp||(Hp={})).white=v(g({},Up.white),{a:1}),Vp.from0to1=function(e){return{r:e[0],g:e[1],b:e[2],a:e[3]}},Vp.fromHexAndA=function(e,t){return v(g({},Up.fromHex(e)),{a:t})},Vp.toRgb255a1=function(e){return{r:Math.round(255*e.r),g:Math.round(255*e.g),b:Math.round(255*e.b),a:e.a}},Vp.equals=function(e,t){return Up.equals(e,t)&&e.a===t.a},Vp.lerp=function(e,t,r){return{r:e.r+(t.r-e.r)*r,g:e.g+(t.g-e.g)*r,b:e.b+(t.b-e.b)*r,a:e.a+(t.a-e.a)*r}},(e=>{e.identity={position:[0,0,0],rotation:[0,0,0],scale:[1,1,1]}})(Gp||(Gp={})),(e=>{e.defaultData={mass:1,stiffness:80,damping:10,velocity:0}})(Wp||(Wp={})),(e=>{e.defaultData={control1:[.5,.05],control2:[.1,.3]}})(qp||(qp={})),(e=>{e.defaultData=function(e,t=.1){return{type:"radial",hideBase:!1,count:3,radial:{radius:2*Math.max(e[0],e[1]),start:0,end:360,alignment:!1,axis:"y",scale:[1,1,1],rotation:[0,0,0],position:[0,0,0]},linear:{scale:[1,1,1],rotation:[0,0,0],position:[e[0]+e[0]*t,0,0]},grid:{count:[2,2,2],size:e.map((e=>e*(1+t))),useCenter:!0}}}})(Yp||(Yp={}));var yf=class{modifyById(e,t){let r=this;if(void 0===r[e])throw new Error("not expected");{let n=v(g({},r),{[e]:t});return Object.setPrototypeOf(n,yf.prototype),n}}add(e,t){var r;let n=this.runOp({type:1,id:e,data:t});return null!=(r=null==n?void 0:n.data)?r:this}runOp(e){let t=this;if(1===e.type){let r,n=t[e.id];r=void 0===n?{type:2,id:e.id}:{type:1,id:e.id,data:n};let{id:i,data:a}=e,o=v(g({},t),{[i]:a});return Object.setPrototypeOf(o,yf.prototype),{data:o,actual:e,reverse:r}}if(2===e.type){let{id:r}=e,n=t[r];if(void 0===n)return null;{let i=g({},t);return Object.setPrototypeOf(i,yf.prototype),delete i[r],{data:i,actual:e,reverse:{type:1,id:r,data:n}}}}throw new Error("illegal arg")}};function xf(e){if(void 0!==e.deepFreeze)return void e.deepFreeze(e);let t=Object.getOwnPropertyNames(e);for(let r of t){let t=e[r];t&&"object"==typeof t&&xf(t)}return Object.freeze(e)}var bf=class extends Error{};function wf(e,t,r){if(void 0===e?void 0===t?(e=0,t=10):e=t-10:void 0===t&&(t=e+10),e>t){let r=e;e=t,t=r}let n=[],i=1/(r+1);for(let a=0;a<r;a++){let r=e+(t-e)*(a+.75+.5*Math.random())*i;n.push(r)}return n}function Sf(e,t){for(let r of e)t(r.id,r.data),Sf(r.children,t)}function _f(e,t){t(e.id,e.data);for(let r of e.children)_f(r,t)}var Af,Mf=class extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Mf.prototype)}deepFreeze(){let e=0;for(;e<this.length;)xf(this[e]),e++}fillCaches0(e,t){var r;if(null!=(r=this.objCaches)&&r.has(e.id))throw new Error("duplicated item");this.objCaches.set(e.id,e),this.parentCaches.set(e.id,t);for(let t of e.children)this.fillCaches0(t,e.id)}fillCaches(){if(void 0===this.objCaches){this.objCaches=new Map,this.parentCaches=new Map;for(let e of this)this.fillCaches0(e,null)}}randomId(){this.fillCaches();let e=Array.from(this.objCaches.keys());if(0!==e.length)return e[Math.max(0,Math.floor(Math.random()*e.length)-1)]}isDescendantOf(e,t){for(;e;){let r=this.parent(e);if(r===t)return!0;e=r}return!1}data(e){var t;return null==(t=this.get(e))?void 0:t.data}has(e){return void 0!==this.childrenOf(e)}get(e){return this.fillCaches(),this.objCaches.get(e)}childrenOf(e){var t;return null===e?this:null==(t=this.get(e))?void 0:t.children}traverseFrom(e,t){if(null===e)this.traverse(t);else{let r=this.get(e);r&&_f(r,t)}}traverse(e){Sf(this,e)}totalSize(){return this.fillCaches(),this.objCaches.size}parent(e){return this.fillCaches(),this.parentCaches.get(e)}childrenArray(e){return null===e?this:this.get(e).children}modifyById(e,t){if(void 0===this.get(e))throw new Error("not expected");{let r=this.parent(e),n=this.childrenArray(r),i=n.findIndex((t=>t.id===e));if(i<0)throw new Error("not expected");let a=n[i];return n=[...n],n[i]=v(g({},a),{data:t}),this.modifyArrayBy(r,n)}}modifyArrayBy(e,t){let r=e,n=t;for(;null!==r;){let e=n,t=r;if(r=this.parent(r),void 0===r)throw new Error;n=this.childrenArray(r);let i=n.findIndex((e=>e.id===t));if(i<0)throw new Error;n=[...n],n[i]=v(g({},n[i]),{children:e})}Object.setPrototypeOf(n,Mf.prototype);let i=n;return i.fillCaches(),i}runOp(e){switch(e.type){case 7:return this.addOp(e);case 8:return this.deleteOp(e);case 9:return this.moveOp(e)}}addOp(e){let{parent:t,fi:r,id:n,data:i,children:a}=e;if(null!==t&&void 0===this.get(t))return null;if(void 0!==this.get(n))return null;{let o=t,s=this.childrenArray(o),l={fi:r,id:n,data:i,children:a};return s=[...s,l],s.sort(((e,t)=>e.fi-t.fi)),e.localIndex=s.indexOf(l),{data:this.modifyArrayBy(o,s),actual:e,reverse:{type:8,id:n}}}}deleteOp(e){let{id:t}=e;if(null===this.get(t))return null;{let r=this.parent(t);if(void 0===r)return null;let n=this.childrenArray(r),i=n.findIndex((e=>e.id===t));e.localIndex=i,n=[...n];let a=n.splice(i,1)[0];return{data:this.modifyArrayBy(r,n),actual:e,reverse:v(g({type:7},a),{parent:r})}}}moveOp(e){let{parent:t,fi:r,id:n}=e;if(null!==t&&void 0===this.get(t))return this.deleteOp({type:8,id:n});if(null!==t){let e=t;for(;null!==e;){if(void 0===e)throw new Error;if(e===n)throw new bf("cyclic tree");e=this.parent(e)}}let i=this.parent(n);if(void 0===i)return null;let a=i,o=this.childrenArray(i),s=o.findIndex((e=>e.id===n));o=[...o];let l=o.splice(s,1)[0],u=this.modifyArrayBy(i,o);i=t,o=u.childrenArray(i);let c=l.fi;return l=v(g({},l),{fi:r}),o=[...o,l],o.sort(((e,t)=>e.fi-t.fi)),e.localIndex=o.indexOf(l),u=u.modifyArrayBy(i,o),{data:u,actual:e,reverse:{type:9,parent:a,fi:c,id:n}}}previous(e,t){if(null===t){let t=this.childrenArray(e);return 0===t.length?null:t[t.length-1].id}let r=null;for(let n of this.childrenArray(e)){if(n.id===t)return r;r=n.id}return null}traverseSortNext(e){let t=this.parent(e);if(void 0!==t){let r=this.childrenArray(t),n=r.findIndex((t=>t.id===e))+1;if(n<r.length)return r[n].id;if(t)return this.traverseSortNext(t)}}sortNext(e){let t=this.childrenArray(e);return t.length>0?t[0].id:this.traverseSortNext(e)}traverseSortPrevious(e){let t=this.childrenArray(e);return t.length>0?this.traverseSortPrevious(t[t.length-1].id):e}sortPrevious(e){let t=this.parent(e);if(void 0!==t){let r=this.childrenArray(t),n=r.findIndex((t=>t.id===e))-1;return n>=0?this.traverseSortPrevious(r[n].id):t}}getAllSorted(e){let t=[];for(let r of e){let e=this.getWithSortKey(r.id);void 0!==e&&t.push(g(g({},r),e))}t.sort(((e,t)=>function(e,t){let r=0;for(;r<e.length&&r<t.length;){if(e[r]<t[r])return-1;if(e[r]>t[r])return 1;r+=1}return r!==t.length?-1:r!==e.length?1:0}(e.sortKey,t.sortKey)));for(let e of t)delete e.sortKey;return t}getWithSortKey(e){var t=e;let r=[],n=this.get(t),i=n;if(void 0!==n){for(;t;)r.splice(0,0,n.fi),null!==(t=this.parent(t))&&(n=this.get(t));return v(g({},i),{sortKey:r})}}insertBeforeHelper(e,t,r){return this.insertAfterHelper(e,this.previous(e,t),r)}insertAfterHelper(e,t,r){let n=this.childrenArray(e);if(null===t){if(0===n.length)return wf(0,r,r);{let e=n[0].fi;return wf(e-r,e,r)}}{let i=this.get(t);if(void 0===i||this.parent(t)!==e)throw new Error("illegal args");let a=n.find((e=>e.fi>i.fi));if(void 0===a){let e=n[n.length-1].fi;return wf(e,e+r,r)}return wf(i.fi,a.fi,r)}}};(e=>{e.runOp=function(e,t){if(Array.isArray(e)){let r=t.props,n={},i=[...e],a=!1;if(r)for(let e of Object.keys(r)){let t=parseInt(e);if(isNaN(t))throw new Error("wrong index");n[e]=i[t],i[t]=r[e],a=!0}return a?{data:i,actual:t,reverse:{type:0,props:n}}:null}{let r=t.props,n={},i=g({},e),a=!1;if(r)for(let e of Object.keys(r)){n[e]=i[e];let t=r[e];void 0===t?delete i[e]:i[e]=t,a=!0}return a?{data:i,actual:t,reverse:{type:0,props:n}}:null}}})(Af||(Af={}));var Ef=class extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Ef.prototype)}deepFreeze(){let e=0;for(;e<this.length;)xf(this[e]),e++}fillCaches0(e){this.objCaches.set(e.id,e)}fillCaches(){if(void 0===this.objCaches){this.objCaches=new Map,Object.getOwnPropertyDescriptor(this,"objCaches").enumerable=!1;for(let e of this)this.fillCaches0(e)}}randomId(){this.fillCaches();let e=Array.from(this.objCaches.keys());if(0!==e.length)return e[Math.max(0,Math.floor(Math.random()*e.length)-1)]}data(e){var t;return null==(t=this.get(e))?void 0:t.data}get(e){return this.fillCaches(),this.objCaches.get(e)}modifyById(e,t){if(void 0===this.get(e))throw new Error("not expected");{let r=this,n=r.findIndex((t=>t.id===e));if(n<0)throw new Error("not expected");let i=r[n];return r=[...r],r[n]=v(g({},i),{data:t}),this.modifyArrayBy(r)}}modifyArrayBy(e){Object.setPrototypeOf(e,Ef.prototype);let t=e;return typeof process<"u"||t.fillCaches(),t}runOp(e){switch(e.type){case 4:return this.addOp(e);case 5:return this.deleteOp(e);case 6:return this.moveOp(e)}}addOp(e){let{fi:t,id:r,data:n}=e,i=this,a={fi:t,id:r,data:n};return i=[...i,a],i.sort(((e,t)=>e.fi-t.fi)),e.localIndex=i.indexOf(a),{data:this.modifyArrayBy(i),actual:e,reverse:{type:5,id:r}}}deleteOp(e){let{id:t}=e,r=this,n=r.findIndex((e=>e.id===t));if(-1===n)return null;e.localIndex=n,r=[...r];let i=r.splice(n,1)[0];return{data:this.modifyArrayBy(r),actual:e,reverse:g({type:4},i)}}moveOp(e){let{fi:t,id:r}=e,n=this;n=[...n];let i=n.findIndex((e=>e.id===r));if(-1===i)return null;let a=n[i].fi,o=v(g({},n[i]),{fi:t});return n[i]=o,n.sort(((e,t)=>e.fi-t.fi)),e.localIndex=n.indexOf(o),{data:this.modifyArrayBy(n),actual:e,reverse:{type:6,fi:a,id:r}}}previous(e){if(null===e)return 0===this.length?null:this[this.length-1].id;let t=null;for(let r of this){if(r.id===e)return t;t=r.id}return null}insertBeforeHelper(e,t){return this.insertAfterHelper(this.previous(e),t)}insertAfterHelper(e,t){let r=this;if(null===e){if(0===r.length)return wf(0,t,t);{let e=r[0].fi;return wf(e-t,e,t)}}{let n=this.get(e);if(void 0===n)throw new Error("illegal args");let i=r.find((e=>e.fi>n.fi));if(void 0===i){let e=r[r.length-1].fi;return wf(e,e+t,t)}return wf(n.fi,i.fi,t)}}},Cf=Symbol(),Tf=Symbol(),Df=class{reportOp(e,t){let r=this;if(null===t)return;r._current=t.data;let n=[];for(;!(r instanceof Ff);){let e=r._path,t=r._current;if(""!==e&&n.splice(0,0,e),r=r._parent,null===r)return;r.update(e,t)}r.push(n,e,t.actual,t.reverse)}deleteChildren(e){if(this._children){let t=this._children[e];if(t){let r=t[Tf];r&&r(),delete this._children[e]}}}},Lf=class extends Df{constructor(e,t,r){super(),this._parent=e,this._path=t,this._current=r}update(e,t){if(Array.isArray(this._current)){if("string"==typeof e&&(e=parseInt(e),isNaN(e)))throw new Error("Invalid path");this._current=[...this._current],this._current[e]=t}else this._current=v(g({},this._current),{[e]:t})}runOp(e){this.reportOp(e,Af.runOp(this._current,e))}},Pf=class extends Df{constructor(e,t,r){super(),this._parent=e,this._path=t,this._current=r}update(e,t){this._current=v(g({},this._current),{[e]:t}),Object.setPrototypeOf(this._current,yf.prototype)}runOp(e){this.reportOp(e,this._current.runOp(e))}},Rf={get(e,t){if(t===Tf)return()=>{e._parent=null};if(t===Cf)return e._current;let{_current:r,_children:n}=e;if("push"===t&&Array.isArray(r))throw new Error("not supported to expand array");let i=void 0===n?void 0:n[t];if(void 0!==i)return i;let a=r[t],o=Uf(e,t,a);return o!==a?(void 0===n&&(n={},e._children=n),n[t]=o,o):a},has:(e,t)=>t in e._current,ownKeys:e=>Reflect.ownKeys(e._current),defineProperty(){throw Error("not supported")},getPrototypeOf:e=>Object.getPrototypeOf(e._current),setPrototypeOf(){throw Error("not supported")},getOwnPropertyDescriptor(e,t){let r=e._current,n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:!0,enumerable:n.enumerable,value:r[t]}}},Of=v(g({},Rf),{set(e,t,r){var n;let i={type:0,props:{[t]:null!=(n=Vf(r))?n:r}};return e.deleteChildren(t),e.runOp(i),!0},deleteProperty(e,t){let r={type:0,props:{[t]:void 0}};return e.deleteChildren(t),e.runOp(r),!0}}),kf=v(g({},Rf),{set(e,t,r){return void 0===r?this.deleteProperty(e,t):(e.deleteChildren(t),e.runOp({type:1,id:t,data:r})),!0},deleteProperty:(e,t)=>(e.runOp({type:2,id:t}),!0)}),If=class extends Df{constructor(e,t,r){super(),this._children={},this._parent=e,this._path=t,this._current=r,this[Tf]=()=>{this._parent=null}}unproxy(){return this._current}update(e,t){this._current=this._current.modifyById(e,t)}runOp(e){this.reportOp(e,this._current.runOp(e))}randomId(){return this._current.randomId()}isDescendantOf(e,t){return this._current.isDescendantOf(e,t)}childrenOf(e){return this._current.childrenOf(e)}traverse(e){return this._current.traverse(e)}get(e){return this._current.get(e)}parent(e){return this._current.parent(e)}traverse(e){this._current.traverse(((t,r)=>{e(t,this.data(t))}))}data(e){var t;let{_current:r,_children:n}=this,i=void 0===n?void 0:n[e];if(void 0!==i)return i;let a=null==(t=r.get(e))?void 0:t.data,o=Uf(this,e,a);return o!==a?(void 0===n&&(n={},this._children=n),n[e]=o,o):a}add(e,t,r,n,i){this.runOp({type:7,parent:e,fi:t,id:r,data:n,children:i})}move(e,t,r){this.runOp({type:9,parent:e,fi:t,id:r})}insertAfter(e,t,r){let n=this._current.insertAfterHelper(e,t,r.length);for(let t=0;t<r.length;t++){let i=r[t];this.add(e,n[t],i.id,i.data,i.children)}}insertBefore(e,t,r){let n=this._current.insertBeforeHelper(e,t,r.length);for(let t=0;t<r.length;t++){let i=r[t];this.add(e,n[t],i.id,i.data,i.children)}}moveAfter(e,t,r){let n=this._current.insertAfterHelper(e,t,r.length);for(let t=0;t<r.length;t++){let i=r[t];this.move(e,n[t],i)}}moveBefore(e,t,r){let n=this._current.insertBeforeHelper(e,t,r.length);for(let t=0;t<r.length;t++){let i=r[t];this.move(e,n[t],i)}}delete(e){this.deleteChildren(e),this.runOp({type:8,id:e})}sortNext(e){return this._current.sortNext(e)}sortPrevious(e){return this._current.sortPrevious(e)}getAllSorted(e){return this._current.getAllSorted(e)}},Bf=class extends Df{constructor(e,t,r){super(),this._children={},this._parent=e,this._path=t,this._current=r,this[Tf]=()=>{this._parent=null}}unproxy(){return this._current}get length(){return this._current.length}forEach(e){let t=this.length;for(let r=0;r<t;r++){let t=this._current[r].id;e(this.data(this._current[r].id),t)}}update(e,t){this._current=this._current.modifyById(e,t)}randomId(){return this._current.randomId()}get(e){return v(g({},this._current.get(e)),{data:this.data(e)})}data(e){var t;let{_current:r,_children:n}=this,i=void 0===n?void 0:n[e];if(void 0!==i)return i;let a=null==(t=r.get(e))?void 0:t.data,o=Uf(this,e,a);return o!==a?(void 0===n&&(n={},this._children=n),n[e]=o,o):a}runOp(e){this.reportOp(e,this._current.runOp(e))}add(e,t,r){this.runOp({type:4,fi:e,id:t,data:r})}move(e,t){this.runOp({type:6,fi:e,id:t})}insertAfter(e,t){let r=this._current.insertAfterHelper(e,t.length);for(let e=0;e<t.length;e++){let n=t[e];this.add(r[e],n.id,n.data)}}insertBefore(e,t){let r=this._current.insertBeforeHelper(e,t.length);for(let e=0;e<t.length;e++){let n=t[e];this.add(r[e],n.id,n.data)}}moveAfter(e,t){let r=this._current.insertAfterHelper(e,t.length);for(let e=0;e<t.length;e++){let n=t[e];this.move(r[e],n)}}moveBefore(e,t){let r=this._current.insertBeforeHelper(e,t.length);for(let e=0;e<t.length;e++){let n=t[e];this.move(r[e],n)}}delete(e){this.deleteChildren(e),this.runOp({type:5,id:e})}};function zf(e,t,r){if(e.length>0){let n=e[e.length-1];if(0===n.type&&0===t.type&&Nf.equal(n.path,r))return void Object.assign(n.props,t.props)}e.push(v(g({},t),{path:r}))}var Nf,Ff=class{constructor(e){this.ts=[],this.actual=[],this.reverse=[],this._current=e}update(e,t){if(""!==e)throw new Error("");this._current=t}push(e,t,r,n){zf(this.ts,t,e),zf(this.actual,r,e),zf(this.reverse,n,e)}result(){return{data:this._current,ts:this.ts,actual:this.actual,reverse:this.reverse.reverse()}}};function Uf(e,t,r){return r instanceof Mf?new If(e,t,r):r instanceof Ef?new Bf(e,t,r):r instanceof yf?new Proxy(new Pf(e,t,r),kf):null!==r&&"object"==typeof r?function(e){return e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Float32Array||e instanceof Float64Array}(r)?r:new Proxy(new Lf(e,t,r),Of):r}function jf(e){let t=new Ff(e);return[Uf(t,"",e),t]}function Hf(e,t){let[r,n]=jf(e);return t(r),n.result()}function Vf(e){return e instanceof If||e instanceof Bf?e._current:null!==e&&"object"==typeof e?e[Cf]:e}(e=>{function t(e,r,n=0){return r.length<=n?e:(e instanceof Mf||e instanceof If)&&"string"==typeof r[n]||(e instanceof Ef||e instanceof Bf)&&"string"==typeof r[n]?t(e.data(r[n]),r,n+1):"number"==typeof r[n]&&Array.isArray(e)||"string"==typeof r[n]&&"object"==typeof e?t(e[r[n]],r,n+1):void 0}e.equal=function(e,t){if(t.length!==e.length)return!1;for(var r=0;r<e.length;){if(e[r]!==t[r])return!1;r+=1}return!0},e.removeOverridden=function(e,r,n){let i=t(n,e);if(void 0!==i&&"object"==typeof i&&null!==i){let e=g({},r);return Object.keys(i).forEach((t=>{delete e[t]})),e}return r},e.zoom=t})(Nf||(Nf={}));var Gf,Wf=class{},qf=class extends Wf{constructor(e){super(),this.id=e}},Yf=class extends Wf{constructor(e){super(),this.data=e}};try{Gf=new TextDecoder}catch{}var Xf,Qf,Jf,Zf,Kf,$f,em,tm=0,rm=[],nm=rm,im=0,am={},om=0,sm=0,lm=[],um={useRecords:!1,mapsAsObjects:!0},cm=class{},hm=new cm;hm.name="MessagePack 0xC1";var dm=!1,pm=class{constructor(e){e&&(!1===e.useRecords&&void 0===e.mapsAsObjects&&(e.mapsAsObjects=!0),e.structures?e.structures.sharedLength=e.structures.length:e.getStructures&&((e.structures=[]).uninitialized=!0,e.structures.sharedLength=0)),Object.assign(this,e)}unpack(e,t){if(Xf)return Nm((()=>(Fm(),this?this.unpack(e,t):pm.prototype.unpack.call(um,e,t))));Qf=t>-1?t:e.length,tm=0,im=0,sm=0,Zf=null,nm=rm,Kf=null,Xf=e;try{em=e.dataView||(e.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength))}catch(t){throw Xf=null,e instanceof Uint8Array?t:new Error("Source must be a Uint8Array or Buffer but was a "+(e&&"object"==typeof e?e.constructor.name:typeof e))}if(this instanceof pm){if(am=this,this.structures)return Jf=this.structures,fm();(!Jf||Jf.length>0)&&(Jf=[])}else am=um,(!Jf||Jf.length>0)&&(Jf=[]);return fm()}unpackMultiple(e,t){let r,n=0;try{dm=!0;let i=e.length,a=this?this.unpack(e,i):Hm.unpack(e,i);if(!t){for(r=[a];tm<i;)n=tm,r.push(fm());return r}for(t(a);tm<i;)if(n=tm,!1===t(fm()))return}catch(e){throw e.lastPosition=n,e.values=r,e}finally{dm=!1,Fm()}}_mergeStructures(e,t){for(let t=0,r=(e=e||[]).length;t<r;t++){let r=e[t];r&&(r.isShared=!0,t>=32&&(r.highByte=t-32>>5))}e.sharedLength=e.length;for(let r in t||[])if(r>=0){let n=e[r],i=t[r];i&&(n&&((e.restoreStructures||(e.restoreStructures=[]))[r]=n),e[r]=i)}return this.structures=e}decode(e,t){return this.unpack(e,t)}};function fm(){try{if(!am.trusted&&!dm){let e=Jf.sharedLength||0;e<Jf.length&&(Jf.length=e)}let e=gm();if(tm==Qf)Jf.restoreStructures&&mm(),Jf=null,Xf=null,$f&&($f=null);else{if(tm>Qf){let e=new Error("Unexpected end of MessagePack data");throw e.incomplete=!0,e}if(!dm)throw new Error("Data read, but end of buffer not reached")}return e}catch(e){throw Jf.restoreStructures&&mm(),Fm(),(e instanceof RangeError||e.message.startsWith("Unexpected end of buffer"))&&(e.incomplete=!0),e}}function mm(){for(let e in Jf.restoreStructures)Jf[e]=Jf.restoreStructures[e];Jf.restoreStructures=null}function gm(){let e=Xf[tm++];if(e<160){if(e<128){if(e<64)return e;{let t=Jf[63&e]||am.getStructures&&bm()[63&e];return t?(t.read||(t.read=ym(t,63&e)),t.read()):e}}if(e<144){if(e-=128,am.mapsAsObjects){let t={};for(let r=0;r<e;r++)t[km()]=gm();return t}{let t=new Map;for(let r=0;r<e;r++)t.set(gm(),gm());return t}}{e-=144;let t=new Array(e);for(let r=0;r<e;r++)t[r]=gm();return t}}if(e<192){let t=e-160;if(sm>=tm)return Zf.slice(tm-om,(tm+=t)-om);if(0==sm&&Qf<140){let e=t<16?Lm(t):Dm(t);if(null!=e)return e}return wm(t)}{let t;switch(e){case 192:return null;case 193:return Kf?(t=gm(),t>0?Kf[1].slice(Kf.position1,Kf.position1+=t):Kf[0].slice(Kf.position0,Kf.position0-=t)):hm;case 194:return!1;case 195:return!0;case 196:return Pm(Xf[tm++]);case 197:return t=em.getUint16(tm),tm+=2,Pm(t);case 198:return t=em.getUint32(tm),tm+=4,Pm(t);case 199:return Rm(Xf[tm++]);case 200:return t=em.getUint16(tm),tm+=2,Rm(t);case 201:return t=em.getUint32(tm),tm+=4,Rm(t);case 202:if(t=em.getFloat32(tm),am.useFloat32>2){let e=Um[(127&Xf[tm])<<1|Xf[tm+1]>>7];return tm+=4,(e*t+(t>0?.5:-.5)>>0)/e}return tm+=4,t;case 203:return t=em.getFloat64(tm),tm+=8,t;case 204:return Xf[tm++];case 205:return t=em.getUint16(tm),tm+=2,t;case 206:return t=em.getUint32(tm),tm+=4,t;case 207:return am.int64AsNumber?(t=4294967296*em.getUint32(tm),t+=em.getUint32(tm+4)):t=em.getBigUint64(tm),tm+=8,t;case 208:return em.getInt8(tm++);case 209:return t=em.getInt16(tm),tm+=2,t;case 210:return t=em.getInt32(tm),tm+=4,t;case 211:return am.int64AsNumber?(t=4294967296*em.getInt32(tm),t+=em.getUint32(tm+4)):t=em.getBigInt64(tm),tm+=8,t;case 212:if(t=Xf[tm++],114==t)return Im(63&Xf[tm++]);{let e=lm[t];if(e)return e.read?(tm++,e.read(gm())):e.noBuffer?(tm++,e()):e(Xf.subarray(tm,++tm));throw new Error("Unknown extension "+t)}case 213:return t=Xf[tm],114==t?(tm++,Im(63&Xf[tm++],Xf[tm++])):Rm(2);case 214:return Rm(4);case 215:return Rm(8);case 216:return Rm(16);case 217:return t=Xf[tm++],sm>=tm?Zf.slice(tm-om,(tm+=t)-om):Sm(t);case 218:return t=em.getUint16(tm),sm>=(tm+=2)?Zf.slice(tm-om,(tm+=t)-om):_m(t);case 219:return t=em.getUint32(tm),sm>=(tm+=4)?Zf.slice(tm-om,(tm+=t)-om):Am(t);case 220:return t=em.getUint16(tm),tm+=2,Em(t);case 221:return t=em.getUint32(tm),tm+=4,Em(t);case 222:return t=em.getUint16(tm),tm+=2,Cm(t);case 223:return t=em.getUint32(tm),tm+=4,Cm(t);default:if(e>=224)return e-256;if(void 0===e){let e=new Error("Unexpected end of MessagePack data");throw e.incomplete=!0,e}throw new Error("Unknown MessagePack token "+e)}}}var vm=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function ym(e,t){function r(){if(r.count++>2){let r=e.read=new Function("r","return function(){return {"+e.map((e=>vm.test(e)?e+":r()":"["+JSON.stringify(e)+"]:r()")).join(",")+"}}")(gm);return 0===e.highByte&&(e.read=xm(t,e.read)),r()}let n={};for(let t=0,r=e.length;t<r;t++)n[e[t]]=gm();return n}return r.count=0,0===e.highByte?xm(t,r):r}var xm=(e,t)=>function(){let r=Xf[tm++];if(0===r)return t();let n=e<32?-(e+(r<<5)):e+(r<<5),i=Jf[n]||bm()[n];if(!i)throw new Error("Record id is not defined for "+n);return i.read||(i.read=ym(i,e)),i.read()};function bm(){let e=Nm((()=>(Xf=null,am.getStructures())));return Jf=am._mergeStructures(e,Jf)}var wm=Mm,Sm=Mm,_m=Mm,Am=Mm;function Mm(e){let t;if(e<16&&(t=Lm(e)))return t;if(e>64&&Gf)return Gf.decode(Xf.subarray(tm,tm+=e));let r=tm+e,n=[];for(t="";tm<r;){let e=Xf[tm++];if(0==(128&e))n.push(e);else if(192==(224&e)){let t=63&Xf[tm++];n.push((31&e)<<6|t)}else if(224==(240&e)){let t=63&Xf[tm++],r=63&Xf[tm++];n.push((31&e)<<12|t<<6|r)}else if(240==(248&e)){let t=(7&e)<<18|(63&Xf[tm++])<<12|(63&Xf[tm++])<<6|63&Xf[tm++];t>65535&&(t-=65536,n.push(t>>>10&1023|55296),t=56320|1023&t),n.push(t)}else n.push(e);n.length>=4096&&(t+=Tm.apply(String,n),n.length=0)}return n.length>0&&(t+=Tm.apply(String,n)),t}function Em(e){let t=new Array(e);for(let r=0;r<e;r++)t[r]=gm();return t}function Cm(e){if(am.mapsAsObjects){let t={};for(let r=0;r<e;r++)t[km()]=gm();return t}{let t=new Map;for(let r=0;r<e;r++)t.set(gm(),gm());return t}}var Tm=String.fromCharCode;function Dm(e){let t=tm,r=new Array(e);for(let n=0;n<e;n++){let e=Xf[tm++];if((128&e)>0)return void(tm=t);r[n]=e}return Tm.apply(String,r)}function Lm(e){if(e<4){if(e<2){if(0===e)return"";{let e=Xf[tm++];return(128&e)>1?void(tm-=1):Tm(e)}}{let t=Xf[tm++],r=Xf[tm++];if((128&t)>0||(128&r)>0)return void(tm-=2);if(e<3)return Tm(t,r);let n=Xf[tm++];return(128&n)>0?void(tm-=3):Tm(t,r,n)}}{let t=Xf[tm++],r=Xf[tm++],n=Xf[tm++],i=Xf[tm++];if((128&t)>0||(128&r)>0||(128&n)>0||(128&i)>0)return void(tm-=4);if(e<6){if(4===e)return Tm(t,r,n,i);{let e=Xf[tm++];return(128&e)>0?void(tm-=5):Tm(t,r,n,i,e)}}if(e<8){let a=Xf[tm++],o=Xf[tm++];if((128&a)>0||(128&o)>0)return void(tm-=6);if(e<7)return Tm(t,r,n,i,a,o);let s=Xf[tm++];return(128&s)>0?void(tm-=7):Tm(t,r,n,i,a,o,s)}{let a=Xf[tm++],o=Xf[tm++],s=Xf[tm++],l=Xf[tm++];if((128&a)>0||(128&o)>0||(128&s)>0||(128&l)>0)return void(tm-=8);if(e<10){if(8===e)return Tm(t,r,n,i,a,o,s,l);{let e=Xf[tm++];return(128&e)>0?void(tm-=9):Tm(t,r,n,i,a,o,s,l,e)}}if(e<12){let u=Xf[tm++],c=Xf[tm++];if((128&u)>0||(128&c)>0)return void(tm-=10);if(e<11)return Tm(t,r,n,i,a,o,s,l,u,c);let h=Xf[tm++];return(128&h)>0?void(tm-=11):Tm(t,r,n,i,a,o,s,l,u,c,h)}{let u=Xf[tm++],c=Xf[tm++],h=Xf[tm++],d=Xf[tm++];if((128&u)>0||(128&c)>0||(128&h)>0||(128&d)>0)return void(tm-=12);if(e<14){if(12===e)return Tm(t,r,n,i,a,o,s,l,u,c,h,d);{let e=Xf[tm++];return(128&e)>0?void(tm-=13):Tm(t,r,n,i,a,o,s,l,u,c,h,d,e)}}{let p=Xf[tm++],f=Xf[tm++];if((128&p)>0||(128&f)>0)return void(tm-=14);if(e<15)return Tm(t,r,n,i,a,o,s,l,u,c,h,d,p,f);let m=Xf[tm++];return(128&m)>0?void(tm-=15):Tm(t,r,n,i,a,o,s,l,u,c,h,d,p,f,m)}}}}}function Pm(e){return am.copyBuffers?Uint8Array.prototype.slice.call(Xf,tm,tm+=e):Xf.subarray(tm,tm+=e)}function Rm(e){let t=Xf[tm++];if(lm[t])return lm[t](Xf.subarray(tm,tm+=e));throw new Error("Unknown extension type "+t)}var Om=new Array(4096);function km(){let e=Xf[tm++];if(!(e>=160&&e<192))return tm--,gm();if(e-=160,sm>=tm)return Zf.slice(tm-om,(tm+=e)-om);if(!(0==sm&&Qf<180))return wm(e);let t,r=4095&(e<<5^(e>1?em.getUint16(tm):e>0?Xf[tm]:0)),n=Om[r],i=tm,a=tm+e-3,o=0;if(n&&n.bytes==e){for(;i<a;){if(t=em.getUint32(i),t!=n[o++]){i=1879048192;break}i+=4}for(a+=3;i<a;)if(t=Xf[i++],t!=n[o++]){i=1879048192;break}if(i===a)return tm=i,n.string;a-=3,i=tm}for(n=[],Om[r]=n,n.bytes=e;i<a;)t=em.getUint32(i),n.push(t),i+=4;for(a+=3;i<a;)t=Xf[i++],n.push(t);let s=e<16?Lm(e):Dm(e);return n.string=null!=s?s:wm(e)}var Im=(e,t)=>{var r=gm();let n=e;void 0!==t&&(e=e<32?-((t<<5)+e):(t<<5)+e,r.highByte=t);let i=Jf[e];return i&&i.isShared&&((Jf.restoreStructures||(Jf.restoreStructures=[]))[e]=i),Jf[e]=r,r.read=ym(r,n),r.read()},Bm="object"==typeof self?self:r.g;lm[0]=()=>{},lm[0].noBuffer=!0,lm[101]=()=>{let e=gm();return(Bm[e[0]]||Error)(e[1])},lm[105]=e=>{let t=em.getUint32(tm-4);$f||($f=new Map);let r,n=Xf[tm];r=n>=144&&n<160||220==n||221==n?[]:{};let i={target:r};$f.set(t,i);let a=gm();return i.used?Object.assign(r,a):(i.target=a,a)},lm[112]=e=>{let t=em.getUint32(tm-4),r=$f.get(t);return r.used=!0,r.target},lm[115]=()=>new Set(gm());var zm=["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64","BigInt64","BigUint64"].map((e=>e+"Array"));function Nm(e){let t=Qf,r=tm,n=im,i=om,a=sm,o=Zf,s=nm,l=$f,u=Kf,c=new Uint8Array(Xf.slice(0,Qf)),h=Jf,d=Jf.slice(0,Jf.length),p=am,f=dm,m=e();return Qf=t,tm=r,im=n,om=i,sm=a,Zf=o,nm=s,$f=l,Kf=u,Xf=c,dm=f,(Jf=h).splice(0,Jf.length,...d),am=p,em=new DataView(Xf.buffer,Xf.byteOffset,Xf.byteLength),m}function Fm(){Xf=null,$f=null,Jf=null}lm[116]=e=>{let t=e[0],r=zm[t];if(!r)throw new Error("Could not find typed array for code "+t);return new Bm[r](Uint8Array.prototype.slice.call(e,1).buffer)},lm[120]=()=>{let e=gm();return new RegExp(e[0],e[1])},lm[98]=e=>{let t=(e[0]<<24)+(e[1]<<16)+(e[2]<<8)+e[3],r=tm;tm+=t-4,(Kf=[gm(),gm()]).position0=0,Kf.position1=0;let n=tm;tm=r;try{return gm()}finally{tm=n}},lm[255]=e=>4==e.length?new Date(1e3*(16777216*e[0]+(e[1]<<16)+(e[2]<<8)+e[3])):8==e.length?new Date(((e[0]<<22)+(e[1]<<14)+(e[2]<<6)+(e[3]>>2))/1e6+1e3*(4294967296*(3&e[3])+16777216*e[4]+(e[5]<<16)+(e[6]<<8)+e[7])):12==e.length?new Date(((e[0]<<24)+(e[1]<<16)+(e[2]<<8)+e[3])/1e6+1e3*((128&e[4]?-281474976710656:0)+1099511627776*e[6]+4294967296*e[7]+16777216*e[8]+(e[9]<<16)+(e[10]<<8)+e[11])):new Date("invalid");var Um=new Array(147);for(let e=0;e<256;e++)Um[e]=+("1e"+Math.floor(45.15-.30103*e));var jm,Hm=new pm({useRecords:!1}),Vm=(Hm.unpack,Hm.unpackMultiple,Hm.unpack,new Float32Array(1));new Uint8Array(Vm.buffer,0,4);try{jm=new TextEncoder}catch{}var Gm,Wm,qm,Ym,Xm,Qm=typeof Buffer<"u",Jm=Qm?Buffer.allocUnsafeSlow:Uint8Array,Zm=Qm?Buffer:Uint8Array,Km=Qm?4294967296:2144337920,$m=0,eg=null,tg=/[\u0080-\uFFFF]/,rg=Symbol("record-id"),ng=class extends pm{constructor(e){super(e),this.offset=0;let t,r,n,i,a,o=0,s=Zm.prototype.utf8Write?function(e,t,r){return qm.utf8Write(e,t,r)}:!(!jm||!jm.encodeInto)&&function(e,t){return jm.encodeInto(e,qm.subarray(t)).written},l=this;e||(e={});let u=e&&e.sequential,c=e.structures||e.saveStructures,h=e.maxSharedStructures;if(null==h&&(h=c?32:0),h>8160)throw new Error("Maximum maxSharedStructure is 8160");let d=e.maxOwnStructures;null==d&&(d=c?32:64),u&&!e.saveStructures&&(this.structures=[]);let p=h>32||d+h>64,f=h+64,m=h+d+64;if(m>8256)throw new Error("Maximum maxSharedStructure + maxOwnStructure is 8192");let g=[],v=0,y=0;this.pack=this.encode=function(e,s){if(qm||(qm=new Jm(8192),Ym=new DataView(qm.buffer,0,8192),$m=0),(Xm=qm.length-10)-$m<2048?(qm=new Jm(qm.length),Ym=new DataView(qm.buffer,0,qm.length),Xm=qm.length-10,$m=0):$m=$m+7&2147483640,t=$m,a=l.structuredClone?new Map:null,l.bundleStrings?(eg=["",""],qm[$m++]=214,qm[$m++]=98,eg.position=$m-t,$m+=4):eg=null,r=l.structures,r){r.uninitialized&&(r=l._mergeStructures(l.getStructures()));let e=r.sharedLength||0;if(e>h)throw new Error("Shared structures is larger than maximum shared structures, try increasing maxSharedStructures to "+r.sharedLength);if(!r.transitions){r.transitions=Object.create(null);for(let t=0;t<e;t++){let e=r[t];if(!e)continue;let n,i=r.transitions;for(let t=0,r=e.length;t<r;t++){let r=e[t];n=i[r],n||(n=i[r]=Object.create(null)),i=n}i[rg]=t+64}o=e}u||(r.nextId=e+64)}n&&(n=!1),i=r||[];try{if(x(e),eg){Ym.setUint32(eg.position+t,$m-eg.position-t);let e=eg;eg=null,x(e[0]),x(e[1])}if(l.offset=$m,a&&a.idsToInsert){($m+=6*a.idsToInsert.length)>Xm&&w($m),l.offset=$m;let e=function(e,t){let r,n=6*t.length,i=e.length-n;for(t.sort(((e,t)=>e.offset>t.offset?1:-1));r=t.pop();){let t=r.offset,a=r.id;e.copyWithin(t+n,t,i),n-=6;let o=t+n;e[o++]=214,e[o++]=105,e[o++]=a>>24,e[o++]=a>>16&255,e[o++]=a>>8&255,e[o++]=255&a,i=t}return e}(qm.subarray(t,$m),a.idsToInsert);return a=null,e}return s&xg?(qm.start=t,qm.end=$m,qm):qm.subarray(t,$m)}finally{if(r){if(y<10&&y++,v>1e4)r.transitions=null,y=0,v=0,g.length>0&&(g=[]);else if(g.length>0&&!u){for(let e=0,t=g.length;e<t;e++)g[e][rg]=0;g=[]}if(n&&l.saveStructures){let n=r.sharedLength||h;r.length>n&&(r=r.slice(0,n));let i=qm.subarray(t,$m);return!1===l.saveStructures(r,o)?(l._mergeStructures(l.getStructures()),l.pack(e)):(o=n,i)}}s&bg&&($m=t)}};let x=e=>{$m>Xm&&(qm=w($m));var r,n=typeof e;if("string"===n){let t,n=e.length;if(eg&&n>=8&&n<4096){let t=tg.test(e);return eg[t?0:1]+=e,qm[$m++]=193,void x(t?-n:n)}t=n<32?1:n<256?2:n<65536?3:5;let i=3*n;if($m+i>Xm&&(qm=w($m+i)),n<64||!s){let i,a,o,s=$m+t;for(i=0;i<n;i++)a=e.charCodeAt(i),a<128?qm[s++]=a:a<2048?(qm[s++]=a>>6|192,qm[s++]=63&a|128):55296==(64512&a)&&56320==(64512&(o=e.charCodeAt(i+1)))?(a=65536+((1023&a)<<10)+(1023&o),i++,qm[s++]=a>>18|240,qm[s++]=a>>12&63|128,qm[s++]=a>>6&63|128,qm[s++]=63&a|128):(qm[s++]=a>>12|224,qm[s++]=a>>6&63|128,qm[s++]=63&a|128);r=s-$m-t}else r=s(e,$m+t,i);r<32?qm[$m++]=160|r:r<256?(t<2&&qm.copyWithin($m+2,$m+1,$m+1+r),qm[$m++]=217,qm[$m++]=r):r<65536?(t<3&&qm.copyWithin($m+3,$m+2,$m+2+r),qm[$m++]=218,qm[$m++]=r>>8,qm[$m++]=255&r):(t<5&&qm.copyWithin($m+5,$m+3,$m+3+r),qm[$m++]=219,Ym.setUint32($m,r),$m+=4),$m+=r}else if("number"===n)if(e>>>0===e)e<64?qm[$m++]=e:e<256?(qm[$m++]=204,qm[$m++]=e):e<65536?(qm[$m++]=205,qm[$m++]=e>>8,qm[$m++]=255&e):(qm[$m++]=206,Ym.setUint32($m,e),$m+=4);else if(e>>0===e)e>=-32?qm[$m++]=256+e:e>=-128?(qm[$m++]=208,qm[$m++]=e+256):e>=-32768?(qm[$m++]=209,Ym.setInt16($m,e),$m+=2):(qm[$m++]=210,Ym.setInt32($m,e),$m+=4);else{let t;if((t=this.useFloat32)>0&&e<4294967296&&e>=-2147483648){let r;if(qm[$m++]=202,Ym.setFloat32($m,e),t<4||(r=e*Um[(127&qm[$m])<<1|qm[$m+1]>>7])>>0===r)return void($m+=4);$m--}qm[$m++]=203,Ym.setFloat64($m,e),$m+=8}else if("object"===n)if(e){if(a){let r=a.get(e);if(r){if(!r.id){let e=a.idsToInsert||(a.idsToInsert=[]);r.id=e.push(r)}return qm[$m++]=214,qm[$m++]=112,Ym.setUint32($m,r.id),void($m+=4)}a.set(e,{offset:$m-t})}let n=e.constructor;if(n===Object)b(e,!0);else if(n===Array){(r=e.length)<16?qm[$m++]=144|r:r<65536?(qm[$m++]=220,qm[$m++]=r>>8,qm[$m++]=255&r):(qm[$m++]=221,Ym.setUint32($m,r),$m+=4);for(let t=0;t<r;t++)x(e[t])}else if(n===Map){(r=e.size)<16?qm[$m++]=128|r:r<65536?(qm[$m++]=222,qm[$m++]=r>>8,qm[$m++]=255&r):(qm[$m++]=223,Ym.setUint32($m,r),$m+=4);for(let[t,r]of e)x(t),x(r)}else{for(let t=0,r=Gm.length;t<r;t++)if(e instanceof Wm[t]){let r=Gm[t];if(r.write)return r.type&&(qm[$m++]=212,qm[$m++]=r.type,qm[$m++]=0),void x(r.write.call(this,e));let n,i=qm,a=Ym,o=$m;qm=null;try{n=r.pack.call(this,e,(e=>(qm=i,i=null,($m+=e)>Xm&&w($m),{target:qm,targetView:Ym,position:$m-e})),x)}finally{i&&(Ym=a,$m=o,Xm=(qm=i).length-10)}return void(n&&(n.length+$m>Xm&&w(n.length+$m),$m=og(n,qm,$m,r.type)))}b(e,!e.hasOwnProperty)}}else qm[$m++]=192;else if("boolean"===n)qm[$m++]=e?195:194;else if("bigint"===n){if(e<BigInt(1)<<BigInt(63)&&e>=-(BigInt(1)<<BigInt(63)))qm[$m++]=211,Ym.setBigInt64($m,e);else if(e<BigInt(1)<<BigInt(64)&&e>0)qm[$m++]=207,Ym.setBigUint64($m,e);else{if(!this.largeBigIntToFloat)throw new RangeError(e+" was too large to fit in MessagePack 64-bit integer format, set largeBigIntToFloat to convert to float-64");qm[$m++]=203,Ym.setFloat64($m,Number(e))}$m+=8}else if("undefined"===n)this.encodeUndefinedAsNil?qm[$m++]=192:(qm[$m++]=212,qm[$m++]=0,qm[$m++]=0);else{if("function"!==n)throw new Error("Unknown type: "+n);x(this.writeFunction&&this.writeFunction())}},b=!1===this.useRecords?this.variableMapSize?e=>{let t,r=Object.keys(e),n=r.length;n<16?qm[$m++]=128|n:n<65536?(qm[$m++]=222,qm[$m++]=n>>8,qm[$m++]=255&n):(qm[$m++]=223,Ym.setUint32($m,n),$m+=4);for(let i=0;i<n;i++)x(t=r[i]),x(e[t])}:(e,r)=>{qm[$m++]=222;let n=$m-t;$m+=2;let i=0;for(let t in e)(r||e.hasOwnProperty(t))&&(x(t),x(e[t]),i++);qm[n+++t]=i>>8,qm[n+t]=255&i}:e=>{let t,r=Object.keys(e),a=i.transitions||(i.transitions=Object.create(null)),o=0;for(let e=0,n=r.length;e<n;e++){let n=r[e];t=a[n],t||(t=a[n]=Object.create(null),o++),a=t}let s=a[rg];if(s)s>=96&&p?(qm[$m++]=96+(31&(s-=96)),qm[$m++]=s>>5):qm[$m++]=s;else{s=i.nextId,s||(s=64),s<f&&this.shouldShareStructure&&!this.shouldShareStructure(r)?(s=i.nextOwnId,s<m||(s=f),i.nextOwnId=s+1):(s>=m&&(s=f),i.nextId=s+1);let e=r.highByte=s>=96&&p?s-96>>5:-1;a[rg]=s,i[s-64]=r,s<f?(r.isShared=!0,i.sharedLength=s-63,n=!0,e>=0?(qm[$m++]=96+(31&s),qm[$m++]=e):qm[$m++]=s):(e>=0?(qm[$m++]=213,qm[$m++]=114,qm[$m++]=96+(31&s),qm[$m++]=e):(qm[$m++]=212,qm[$m++]=114,qm[$m++]=s),o&&(v+=y*o),g.length>=d&&(g.shift()[rg]=0),g.push(a),x(r))}for(let t=0,n=r.length;t<n;t++)x(e[r[t]])},w=e=>{let r;if(e>16777216){if(e-t>Km)throw new Error("Packed buffer would be larger than maximum buffer size");r=Math.min(Km,4096*Math.round(Math.max((e-t)*(e>67108864?1.25:2),4194304)/4096))}else r=1+(Math.max(e-t<<2,qm.length-1)>>12)<<12;let n=new Jm(r);return Ym=new DataView(n.buffer,0,r),qm.copy?qm.copy(n,0,t,e):n.set(qm.slice(t,e)),$m-=t,t=0,Xm=n.length-10,qm=n}}useBuffer(e){qm=e,Ym=new DataView(qm.buffer,qm.byteOffset,qm.byteLength),$m=0}};function ig(e,t,r,n){let i=e.byteLength;if(i+1<256){var{target:a,position:o}=r(4+i);a[o++]=199,a[o++]=i+1}else if(i+1<65536){var{target:a,position:o}=r(5+i);a[o++]=200,a[o++]=i+1>>8,a[o++]=i+1&255}else{var{target:a,position:o,targetView:s}=r(7+i);a[o++]=201,s.setUint32(o,i+1),o+=4}a[o++]=116,a[o++]=t,a.set(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),o)}function ag(e,t){let r=e.byteLength;var n,i;if(r<256){var{target:n,position:i}=t(r+2);n[i++]=196,n[i++]=r}else if(r<65536){var{target:n,position:i}=t(r+3);n[i++]=197,n[i++]=r>>8,n[i++]=255&r}else{var{target:n,position:i,targetView:a}=t(r+5);n[i++]=198,a.setUint32(i,r),i+=4}n.set(e,i)}function og(e,t,r,n){let i=e.length;switch(i){case 1:t[r++]=212;break;case 2:t[r++]=213;break;case 4:t[r++]=214;break;case 8:t[r++]=215;break;case 16:t[r++]=216;break;default:i<256?(t[r++]=199,t[r++]=i):i<65536?(t[r++]=200,t[r++]=i>>8,t[r++]=255&i):(t[r++]=201,t[r++]=i>>24,t[r++]=i>>16&255,t[r++]=i>>8&255,t[r++]=255&i)}return t[r++]=n,t.set(e,r),r+i}function sg(e){if(e.Class){if(!e.pack&&!e.write)throw new Error("Extension has no pack or write function");if(e.pack&&!e.type)throw new Error("Extension has no type (numeric code to identify the extension)");Wm.unshift(e.Class),Gm.unshift(e)}!function(e){e.unpack?lm[e.type]=e.unpack:lm[e.type]=e}(e)}Wm=[Date,Set,Error,RegExp,ArrayBuffer,Object.getPrototypeOf(Uint8Array.prototype).constructor,cm],Gm=[{pack(e,t,r){let n=e.getTime()/1e3;if((this.useTimestamp32||0===e.getMilliseconds())&&n>=0&&n<4294967296){let{target:e,targetView:r,position:i}=t(6);e[i++]=214,e[i++]=255,r.setUint32(i,n)}else if(n>0&&n<17179869184){let{target:r,targetView:i,position:a}=t(10);r[a++]=215,r[a++]=255,i.setUint32(a,4e6*e.getMilliseconds()+(n/1e3/4294967296>>0)),i.setUint32(a+4,n)}else if(isNaN(n)){if(this.onInvalidDate)return t(0),r(this.onInvalidDate());let{target:e,targetView:n,position:i}=t(3);e[i++]=212,e[i++]=255,e[i++]=255}else{let{target:r,targetView:i,position:a}=t(15);r[a++]=199,r[a++]=12,r[a++]=255,i.setUint32(a,1e6*e.getMilliseconds()),i.setBigInt64(a+4,BigInt(Math.floor(n)))}}},{pack(e,t,r){let n=Array.from(e),{target:i,position:a}=t(this.structuredClone?3:0);this.structuredClone&&(i[a++]=212,i[a++]=115,i[a++]=0),r(n)}},{pack(e,t,r){let{target:n,position:i}=t(this.structuredClone?3:0);this.structuredClone&&(n[i++]=212,n[i++]=101,n[i++]=0),r([e.name,e.message])}},{pack(e,t,r){let{target:n,position:i}=t(this.structuredClone?3:0);this.structuredClone&&(n[i++]=212,n[i++]=120,n[i++]=0),r([e.source,e.flags])}},{pack(e,t){this.structuredClone?ig(e,16,t):ag(Qm?Buffer.from(e):new Uint8Array(e),t)}},{pack(e,t){let r=e.constructor;r!==Zm&&this.structuredClone?ig(e,zm.indexOf(r.name),t):ag(e,t)}},{pack(e,t){let{target:r,position:n}=t(1);r[n]=193}}];var lg,ug,cg,hg,dg,pg,fg=new ng({useRecords:!1}),{NEVER:mg,ALWAYS:gg,DECIMAL_ROUND:vg,DECIMAL_FIT:yg}=(fg.pack,fg.pack,{NEVER:0,ALWAYS:1,DECIMAL_ROUND:3,DECIMAL_FIT:4}),xg=512,bg=1024,wg=new ng({structuredClone:!0});sg({Class:yf.prototype.constructor,type:1,write:e=>g({},e),read:e=>(Object.setPrototypeOf(e,yf.prototype),e)}),sg({Class:Ef.prototype.constructor,type:2,write:e=>[...e],read:e=>(Object.setPrototypeOf(e,Ef.prototype),e)}),sg({Class:Mf.prototype.constructor,type:3,write:e=>[...e],read:e=>(Object.setPrototypeOf(e,Mf.prototype),e)}),sg({Class:qf.prototype.constructor,type:4,write:e=>e.id,read:e=>new qf(e)}),sg({Class:Yf.prototype.constructor,type:5,write:e=>e.data,read:e=>new Yf(e)}),(e=>{function t(e){return wg.pack(e)}e.serialize=t,e.deserialize=function(e){return wg.unpack(e)},e.checksum=function(e){return function(e){var t=0;if(0===e.length)return t;for(let r=0;r<e.length;r++)t=(t<<5)-t+e[r],t&=t;return t}(t(e)).toString()}})(lg||(lg={})),(e=>{e.all=["PointLight","SpotLight","DirectionalLight","HemisphereLight"],e.is=function(t){return e.all.includes(t)}})(ug||(ug={})),(e=>{e.defaultData=function(e){return function(e){if("PointLight"===e)return{type:e,color:Hp.white,intensity:1,distance:2e3,decay:1,shadows:!0,shadowResolution:1024,shadowRadius:1,depth:2500,helper:!0};if("SpotLight"===e)return{type:e,color:Hp.white,intensity:1,distance:2e3,decay:1,shadows:!0,penumbra:0,angle:30/180*Math.PI,depth:2500,helper:!0};if("DirectionalLight"===e)return{type:e,color:Hp.white,intensity:1,shadows:!0,size:2500,depth:2500,helper:!0};throw new Error("not implemented")}(e)}})(cg||(cg={})),(e=>{e.defaultData={castShadow:!0,receiveShadow:!0},e.equals=function(e,t){return e.castShadow===t.castShadow&&e.receiveShadow===t.receiveShadow}})(hg||(hg={})),(e=>{e.defaultData={flatShading:!1,wireframe:!1,side:0},e.equals=function(e,t){return e.flatShading===t.flatShading&&e.side===t.side&&e.wireframe===t.wireframe}})(dg||(dg={})),(e=>{e.defaultData=v(g(g({},dg.defaultData),hg.defaultData),{cloner:null})})(pg||(pg={}));var Sg,_g,Ag=(e=>(e[e.Left=1]="Left",e[e.Right=2]="Right",e[e.Center=3]="Center",e[e.Justify=4]="Justify",e))(Ag||{}),Mg=((_g=Mg||{})[_g.Top=1]="Top",_g[_g.Center=2]="Center",_g[_g.Bottom=3]="Bottom",_g),Eg=(e=>(e[e.None=1]="None",e[e.Upper=2]="Upper",e[e.Lower=3]="Lower",e))(Eg||{});(e=>{e.defaultData={width:100,height:100,horizontalAlign:1,verticalAlign:1,fontSize:16,lineHeight:1.5,letterSpacing:1,text:"",textTransform:1,color:Hp.fromHexAndA(6974058,1),alpha:1,font:"roboto_regular"}})(Sg||(Sg={}));var Cg,Tg,Dg,Lg,Pg,Rg,Og,kg,Ig,Bg,zg,Ng,Fg,Ug,jg=["mode","gradientType","noiseType","displacementType","projection","cnormal","crop","axis"];function Hg(e,t=!1){let r=null!==e[0].index,n=new Set(Object.keys(e[0].attributes)),i=new Set(Object.keys(e[0].morphAttributes)),a={},o={},s=e[0].morphTargetsRelative,l=new wr,u=0;for(let c=0;c<e.length;++c){let h=e[c],d=0;if(r!==(null!==h.index))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(let e in h.attributes){if(!n.has(e))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+'. All geometries must have compatible attributes; make sure "'+e+'" attribute exists among all geometries, or in none of them.'),null;void 0===a[e]&&(a[e]=[]),a[e].push(h.attributes[e]),d++}if(d!==n.size)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+". Make sure all geometries have the same number of attributes."),null;if(s!==h.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(let e in h.morphAttributes){if(!i.has(e))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+".  .morphAttributes must be consistent throughout all geometries."),null;void 0===o[e]&&(o[e]=[]),o[e].push(h.morphAttributes[e])}if(l.userData.mergedUserData=l.userData.mergedUserData||[],l.userData.mergedUserData.push(h.userData),t){let e;if(r)e=h.index.count;else{if(void 0===h.attributes.position)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+". The geometry must have either an index or a position attribute"),null;e=h.attributes.position.count}l.addGroup(u,e,c),u+=e}}if(r){let t=0,r=[];for(let n=0;n<e.length;++n){let i=e[n].index;for(let e=0;e<i.count;++e)r.push(i.getX(e)+t);t+=e[n].attributes.position.count}l.setIndex(r)}for(let e in a){let t=Vg(a[e]);if(!t)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+e+" attribute."),null;l.setAttribute(e,t)}for(let e in o){let t=o[e][0].length;if(0===t)break;l.morphAttributes=l.morphAttributes||{},l.morphAttributes[e]=[];for(let r=0;r<t;++r){let t=[];for(let n=0;n<o[e].length;++n)t.push(o[e][n][r]);let n=Vg(t);if(!n)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+e+" morphAttribute."),null;l.morphAttributes[e].push(n)}}return l}function Vg(e){let t,r,n,i=0;for(let a=0;a<e.length;++a){let o=e[a];if(o.isInterleavedBufferAttribute)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. InterleavedBufferAttributes are not supported."),null;if(void 0===t&&(t=o.array.constructor),t!==o.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(void 0===r&&(r=o.itemSize),r!==o.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(void 0===n&&(n=o.normalized),n!==o.normalized)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;i+=o.array.length}let a=new t(i),o=0;for(let t=0;t<e.length;++t)a.set(e[t].array,o),o+=e[t].array.length;return new cr(a,r,n)}(e=>{e.defaultData=function(e,t){return"light"===e&&t?function(e){switch(e){case"basic":return{type:"light",category:"basic",alpha:1,visible:!0,mode:0};case"phong":return{category:"phong",specular:{r:.2,g:.2,b:.2},shininess:10,type:"light",alpha:1,visible:!0,mode:0};case"toon":return{category:"toon",specular:{r:.2,g:.2,b:.2},shininess:10,type:"light",alpha:1,visible:!0,mode:0};case"lambert":return{category:"lambert",emissive:{r:0,g:0,b:0,a:1},type:"light",alpha:1,visible:!0,mode:0};case"physical":return{category:"physical",roughness:.2,metalness:.2,reflectivity:.2,type:"light",alpha:1,visible:!0,mode:0}}}(t):function(e){switch(e){case"texture":return{alpha:1,visible:!0,size:[128,128],mode:0,axis:"x",type:"texture",projection:0,texture:{image:"image_0",wrapping:1001,repeat:[1,1],offset:[0,0]},crop:!0};case"color":return{type:"color",alpha:1,visible:!0,mode:0,color:Up.fromHex(4737101)};case"depth":return{type:"depth",alpha:1,visible:!0,mode:0,gradientType:1,smooth:!1,isVector:!0,isWorldSpace:!1,origin:[0,0,0],direction:[1,0,0],colors:[[1,1,1,1],[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],steps:[0,1,1,1,1,1,1,1,1,1],num:2,near:50,far:200};case"normal":return{type:"normal",alpha:1,visible:!0,mode:0,cnormal:[1,1,1]};case"gradient":return{type:"gradient",alpha:1,visible:!0,mode:0,gradientType:0,smooth:!1,colors:[[0,0,0,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],steps:[0,1,1,1,1,1,1,1,1,1],num:2,angle:0,offset:[0,0],morph:[0,0]};case"noise":return{type:"noise",alpha:1,visible:!0,mode:0,size:[100,100,100],noiseType:0,scale:1,move:1,colorA:v(g({},Up.fromHex(6710886)),{a:1}),colorB:v(g({},Up.fromHex(6710886)),{a:1}),colorC:v(g({},Up.fromHex(16777215)),{a:1}),colorD:v(g({},Up.fromHex(16777215)),{a:1}),distortion:[1,1],fA:[1.7,9.2],fB:[8.3,2.8]};case"fresnel":return{type:"fresnel",alpha:1,visible:!0,mode:0,color:Hp.fromHexAndA(16777215,1),bias:.1,scale:1,intensity:2,factor:1};case"rainbow":return{type:"rainbow",alpha:1,visible:!0,mode:0,filmThickness:30,movement:0,wavelengths:[0,0,0],noiseStrength:0,noiseScale:1,offset:[0,0,0]};case"matcap":return{type:"matcap",alpha:1,visible:!0,mode:0,texture:{image:"matcap_0",wrapping:1001,repeat:[1,1],offset:[0,0]}};case"transmission":return{type:"transmission",alpha:1,visible:!0,mode:0,thickness:10,ior:1.5,roughness:1};case"displace":return{type:"displace",displacementType:"noise",noiseType:0,scale:10,movement:1,offset:[0,0,0],intensity:8,visible:!0}}}(e)}})(Cg||(Cg={})),(e=>{function t(e){let t=0;for(let r of e.layers)"alpha"in r.data&&"light"!==r.data.type&&"fresnel"!==r.data.type&&(t+=(1-t)*r.data.alpha);return t<1}function r(e,t="layer1",r="layer2"){let n=new Ef;return n.push({fi:0,data:Cg.defaultData("light",e),id:t}),n.push({fi:1,data:Cg.defaultData("color"),id:r}),{layers:n}}e.isMergable=function(e){return!e.layers.some((e=>{if("texture"===e.data.type&&0!==e.data.projection||"depth"===e.data.type&&!e.data.isWorldSpace||"noise"===e.data.type||"displace"===e.data.type)return!0}))&&!t(e)},e.getHash=function(e){let t="";return e.layers.forEach((e=>{Object.entries(e.data).forEach((([e,r])=>{t+=`${e}${r}`,Array.isArray(r)?r.forEach((e=>t+=`${e}`)):"object"==typeof r?Object.values(r).forEach((e=>{t+="number"==typeof e?`${e.toFixed(4)}`:`${e}`})):t+=`${r}`}))})),t},e.isTransparent=t,e.defaultEmptyData=function(){return{layers:new Ef}},e.defaultData=function(e="layer1",t="layer2"){return r("phong",e,t)},e.defaultTwoLayerData=r,e.defaultTwoLayerTextureData=function(e,t="basic",r="layer1",n="layer2"){let i=Cg.defaultData("texture");Object.assign(i.texture,{image:e});let a=new Ef;return a.push({fi:0,data:i,id:r}),a.push({fi:1,data:Cg.defaultData("light",t),id:n}),{layers:a}}})(Tg||(Tg={})),(e=>{e.defaultData=function(){return{points:new Ef,roundness:0,shapeHoles:[],isClosed:!1}},e.isOverlappingExistingPoint=function(e,t){let{points:r}=t;if(r)for(let t of r)if(t.data.position[0]===e[0]&&t.data.position[1]===e[1])return!0;return!1},e.isStraightLine=function(e,t){let r=e.controlNext,n=t.controlPrevious;return e.position[0]===r.position[0]&&e.position[1]===r.position[1]&&t.position[0]===n.position[0]&&t.position[1]===n.position[1]}})(Dg||(Dg={})),(e=>{e.is2DParametricMesh=function(e){return"PolygonGeometry"===e||"RectangleGeometry"===e||"StarGeometry"===e||"TriangleGeometry"===e||"EllipseGeometry"===e}})(Lg||(Lg={})),(e=>{e.defaultData=function(e){if("RectangleGeometry"===e)return{width:320,height:320,type:e,cornerRadius:[0,0,0,0],cornerType:0,depth:0,extrudeBevelSize:0,extrudeBevelSegments:1,surfaceMaxCount:1};if("VectorGeometry"===e)return{width:100,height:100,type:e,subdivisions:12,shape:Dg.defaultData(),depth:0,extrudeBevelSize:0,extrudeBevelSegments:1,surfaceMaxCount:1};throw new Error("not implemented")}})(Pg||(Pg={})),(e=>{e.identity=v(g({},Gp.identity),{hiddenMatrix:Np.identity}),e.fromObject=function(e){return{position:e.position,rotation:e.rotation,scale:e.scale,hiddenMatrix:e.hiddenMatrix}},e.merge=function(e,t){return{position:(null==t?void 0:t.position)||e.position,rotation:(null==t?void 0:t.rotation)||e.rotation,scale:(null==t?void 0:t.scale)||e.scale,hiddenMatrix:(null==t?void 0:t.hiddenMatrix)||e.hiddenMatrix}},e.diff=function(e,t){return{position:Bp.isEqual(e.position,t.position)?null:t.position,rotation:Bp.isEqual(e.rotation,t.rotation)?null:t.rotation,scale:Bp.isEqual(e.scale,t.scale)?null:t.scale,hiddenMatrix:Np.isEqual(e.hiddenMatrix,t.hiddenMatrix)?null:t.hiddenMatrix}}})(Rg||(Rg={})),(e=>{e.defaultData=g({states:new Ef,events:new Ef,visible:!0,raycastLock:!1},Rg.identity)})(Og||(Og={})),(e=>{e.defaultData=g({type:"Empty"},Og.defaultData)})(kg||(kg={})),(e=>{e.defaultData=g(g({type:"Mesh"},Og.defaultData),pg.defaultData)})(Ig||(Ig={})),(e=>{e.defaultData=g(g({type:"TextFrame"},Og.defaultData),Sg.defaultData)})(Bg||(Bg={})),(e=>{e.defaultData=g(g(g({},Og.defaultData),Rg.identity),Op.defaultData)})(zg||(zg={})),(e=>{e.defaultData=function(e){return g(g({},Og.defaultData),cg.defaultData(e))}})(Ng||(Ng={})),(e=>{e.defaultCamera=g({position:[0,0,1e3],scale:[1,1,1],rotation:[0,0,0],hiddenMatrix:Np.identity,name:"Play Camera",visible:!0,raycastLock:!1,states:new Ef,events:new Ef},Op.defaultData),e.defaultMeshObject=v(g(g({name:"Rectangle"},Og.defaultData),Ig.defaultData),{geometry:Pg.defaultData("RectangleGeometry"),material:Tg.defaultTwoLayerData("basic","layer1","layer2")})})(Fg||(Fg={})),(e=>{function t(e,t){if(void 0===t)return e;let r=g({},e);return"material"in r&&"material"in t&&t.material&&(r.material=Hf(r.material,(e=>{if("string"!=typeof e)for(let[r,n]of Object.entries(t.material.layers)){let t=e.layers.data(r);t&&lf(t,n)}})).data),r.materials&&t.materials&&(r.materials=Hf(r.materials,(e=>{var n,i;for(let a=0;a<r.materials.length;a++){let r=t.materials[a];if("string"!=typeof r)for(let[t,o]of Object.entries(r.layers)){let r=null==(i=null==(n=e[a])?void 0:n.layers)?void 0:i.data(t);r&&lf(r,o)}}})).data),r}e.patchMaterialState=t,e.patch=function(e,r){var n,i;if(void 0===r)return e;let a=g({},e);if(Object.assign(a,Rg.merge(a,r)),Pp.is(e.type)){a.orthographic=g({},a.orthographic),a.perspective=g({},a.perspective);let e=r;void 0!==(null==(n=e.orthographic)?void 0:n.zoom)&&(a.orthographic.zoom=e.orthographic.zoom),void 0!==(null==(i=e.perspective)?void 0:i.zoom)&&(a.perspective.zoom=e.perspective.zoom)}else if("Mesh"===e.type)a.geometry=g({},a.geometry),Object.assign(a.geometry,r.geometry),a=t(a,r);else if(ug.is(e.type)){let e=r;void 0!==a.intensity&&(a.intensity=e.intensity),void 0!==e.color&&("string"==typeof e.color?a.color=e.color:a.color=Up.clone(e.color))}return a}})(Ug||(Ug={}));var Gg={type:"change"},Wg={type:"changeZoom"},qg={type:"changePan"},Yg={type:"start"},Xg={type:"end"},Qg=new Ge,Jg=new ve,Zg=2*Math.PI,Kg=2,$g=.125,ev=1,tv=.1,rv=class extends ae{constructor(e,t){super(),this.object=e,this.domElement=t,this.enabled=!0,this.useKeyEvents=!0,this.enableDamping=!1,this.enableZoom=!0,this.enableRotate=!0,this.enablePan=!0,this.autoRotate=!1,this.rotationLimitsMode=0,this.panLimitsMode=0,this.rotationSoftLimit=2,this.panSoftLimit=2,this.hoverRotatePanMode=0,this.zoomLimitsEnabled=!1,this.preventScroll=!0,this.mouseButtons=[0,5],this.mouseButtonsPlay=[3,4,5],this.touches=[null,3,1],this.offset=new We,this.eye=new We,this.lastPosition=new We,this.lastQuaternion=new Ge,this.current=new ve,this.overShoot=new ve,this.overRatio=new ve,this.spherical=new nu,this.sphericalDelta=new nu,this.panOffset=new We,this.panLeftV=new We,this.panUpV=new We,this.panV=new We,this.rotateStart=new ve,this.rotateEnd=new ve,this.rotateDelta=new ve,this.panStart=new ve,this.panEnd=new ve,this.panDelta=new ve,this.dollyStart=new ve,this.dollyEnd=new ve,this.dollyDelta=new ve,this.rotationRangeFactor=new ve,this.panRangeFactor=new ve,this.state=-1,this.zoomChanged=!1,this.isPointerDown=!1,this.isFirstHover=!0,this.isThetaFlipped=!1,this.prevScale=0,this.scale=1,this.gesture=!1,this.timer=-1,this.timerHover=-1,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPhi=0,this.maxPhi=Math.PI,this.minTheta=-1/0,this.maxTheta=1/0,this.minH=0,this.maxH=Math.PI,this.minV=-1/0,this.maxV=1/0,this.autoRotateClockwise=!0,this.isPanOverShoot=!1,this.isRotateOverShoot=!1,this.update=()=>{let e=this.object.position;this.offset.copy(e).sub(this.target),this.spherical.setFromVector3(this.offset),this.object.isUpVectorFlipped&&(this.spherical.phi*=-1,this.spherical.theta-=Math.PI),this.autoRotate&&-1===this.state&&this.rotateLeft((!0===this.autoRotateClockwise?1:-1)*this.getAutoRotationAngle()),0!==this.rotationLimitsMode&&this.applyLimits(this.sphericalDelta,this.rotationLimitsMode,this.rotationSoftLimit,this.maxTheta,this.minTheta,this.maxPhi,this.minPhi,this.rotationRangeFactor),2!==this.rotationLimitsMode&&(this.spherical.phi+=this.sphericalDelta.phi),(1!==this.rotationLimitsMode||!0===this.autoRotate)&&(this.spherical.theta+=this.sphericalDelta.theta),this.spherical.radius*=this.scale,this.zoomLimitsEnabled&&(this.spherical.radius=Math.max(this.minDistance,Math.min(this.maxDistance,this.spherical.radius))),0!==this.panLimitsMode&&(this.target.applyQuaternion(Qg.copy(this.object.quaternion).invert()),this.panOffset.applyQuaternion(Qg),this.applyLimits(this.panOffset,this.panLimitsMode,this.panSoftLimit,this.maxH,this.minH,this.maxV,this.minV,this.panRangeFactor),this.target.applyQuaternion(this.object.quaternion),this.panOffset.applyQuaternion(this.object.quaternion)),2===this.panLimitsMode&&(this.panOffset.y=0),1===this.panLimitsMode&&(this.panOffset.x=0),-1!==this.state||this.gesture?(this.target.add(this.panOffset),this.panOffset.set(0,0,0)):(this.panOffset.multiplyScalar(1-$g),this.target.add(this.panOffset)),this.offset.setFromSpherical(this.spherical),e.copy(this.target).add(this.offset);let t=this.spherical.phi%Zg;return this.eye.copy(this.offset).normalize(),this.object.up.copy(Yt.DefaultUp).applyAxisAngle(this.eye,this.object.angleOffsetFromUp),t>0&&t>Math.PI||t<0&&t>-Math.PI?(this.object.up.negate(),this.object.lookAt(this.target),this.object.isUpVectorFlipped=!0):(this.object.lookAt(this.target),this.object.isUpVectorFlipped=!1),-1===this.state||!0===this.enableDamping?(this.sphericalDelta.theta*=1-$g,this.sphericalDelta.phi*=1-$g):this.sphericalDelta.set(0,0,0),this.scale=1,this.zoomChanged||this.lastPosition.distanceToSquared(this.object.position)>.01||8*(1-this.lastQuaternion.dot(this.object.quaternion))>1e-8?(this.dispatchEvent(Gg),this.lastPosition.copy(this.object.position),this.lastQuaternion.copy(this.object.quaternion),this.zoomChanged=!1,!0):(this.isPanOverShoot=!1,this.isRotateOverShoot=!1,this.sphericalDelta.set(0,0,0),this.panOffset.set(0,0,0),!1)},this.onPointerDown=e=>{!1!==this.enabled&&(this.isPointerDown=!0,0===av.length&&(this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp)),function(e){av.push(e)}(e),"touch"===e.pointerType?this.onPointerDownTouch(e):this.onPointerDownMouse(e))},this.onPointerMove=e=>{!1!==this.enabled&&("touch"===e.pointerType?this.onPointerMoveTouch(e):this.onPointerMoveMouse(e))},this.onPointerUp=e=>{sv(e),this.isPointerDown=!1,0===av.length&&(this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this.onPointerUp)),this.dispatchEvent(Xg),this.state=-1},this.onPointerCancel=e=>{sv(e)},this.onPointerDownMouse=e=>{let t;switch(t=this.useKeyEvents?this.mouseButtons[e.button]:this.mouseButtonsPlay[e.button],t){case 0:if(!0!==e.altKey||e.shiftKey||vf(e)){if(" "===this.key){if(!1===this.enablePan)return;this.handleMouseDownPan(e),this.state=2}}else{if(!1===this.enableRotate)return;this.handleMouseDownRotate(e),this.state=0}break;case 4:if(!1===this.enablePan)return;this.handleMouseDownPan(e),this.state=2;break;case 3:if(vf(e)||e.shiftKey){if(!1===this.enablePan)return;this.handleMouseDownPan(e),this.state=2}else{if(!1===this.enableRotate)return;this.handleMouseDownRotate(e),this.state=0}break;case 5:if(vf(e)||e.shiftKey){if(!1===this.enableRotate)return;this.handleMouseDownRotate(e),this.state=0}else{if(!1===this.enablePan)return;this.handleMouseDownPan(e),this.state=2}break;default:this.state=-1}-1!==this.state&&this.dispatchEvent(Yg)},this.onPointerMoveMouse=e=>{switch(this.state){case 0:if(!1===this.enableRotate)return;this.handleMouseMoveRotate(e);break;case 1:if(!1===this.enableZoom)return;this.handleMouseMoveDolly(e);break;case 2:if(!1===this.enablePan)return;this.handleMouseMovePan(e)}},this.onPointerDownTouch=e=>{switch(lv(e),this.touches[av.length-1]){case 0:if(!1===this.enableRotate)return void(this.state=-1);this.handleTouchStartRotate(),this.state=3;break;case 1:if(!1===this.enablePan)return void(this.state=-1);this.handleTouchStartPan(),this.state=4;break;case 2:if(!1===this.enableZoom&&!1===this.enablePan)return;this.handleTouchStartDollyPan(),this.state=5;break;case 3:if(!1===this.enableZoom&&!1===this.enableRotate)return;this.handleTouchStartDollyRotate(),this.state=6;break;default:this.state=-1}-1!==this.state&&this.dispatchEvent(Yg)},this.onPointerMoveTouch=e=>{switch(lv(e),this.state){case 3:if(!1===this.enableRotate)return;this.handleTouchMoveRotate(e),this.update();break;case 4:if(!1===this.enablePan)return;this.handleTouchMovePan(e),this.update();break;case 5:if(!1===this.enableZoom&&!1===this.enablePan)return;this.handleTouchMoveDollyPan(e),this.update();break;case 6:if(!1===this.enableZoom&&!1===this.enableRotate)return;this.handleTouchMoveDollyRotate(e),this.update();break;default:this.state=-1}},this.dispatchEndDebounced=ef((()=>this.dispatchEvent(Xg)),33),this.onMouseWheel=e=>{!1===this.enabled||!1===this.enableZoom&&!1===this.enablePan||((this.domElement.clientHeight===document.body.clientHeight&&this.domElement.clientWidth===document.body.clientWidth||this.preventScroll)&&e.preventDefault(),this.dispatchEvent(Yg),this.handleMouseWheel(e),this.dispatchEndDebounced())},this.onGesture=e=>{if(!1!==this.enabled)if(e.preventDefault(),"gesturechange"===e.type){if(!1===this.enableZoom)return;this.dispatchEvent(Yg),e.scale>this.prevScale?this.dollyIn(this.getZoomScale()):e.scale<this.prevScale&&this.dollyOut(this.getZoomScale()),this.prevScale=e.scale,this.update()}else this.dispatchEvent(Xg)},this.onContextMenu=e=>{!1!==this.enabled&&e.preventDefault()},this.onTouchMove=e=>{(e.touches.length>1||this.preventScroll)&&e.preventDefault()},this.onTouchEnd=e=>{e.preventDefault()},this.onKeyDown=e=>{!1!==this.enabled&&(this.key=e.key)},this.onKeyUp=()=>{!1!==this.enabled&&(this.key=void 0,-1!==this.state&&this.onPointerUp(av[0]))},this.onPointerHover=e=>{if(!(gf||!1===this.enabled||-1!==this.state||2===this.hoverRotatePanMode&&this.isPanOverShoot||1===this.hoverRotatePanMode&&this.isRotateOverShoot)){if(window.clearTimeout(this.timerHover),this.isPointerDown=!0,this.isFirstHover){let e={clientX:window.innerWidth/2,clientY:window.innerHeight/2};2===this.hoverRotatePanMode?this.handleMouseDownPan(e):1===this.hoverRotatePanMode&&this.handleMouseDownRotate(e),this.isFirstHover=!1}2===this.hoverRotatePanMode?this.handleMouseMovePan(e,tv):1===this.hoverRotatePanMode&&this.handleMouseMoveRotate(e,tv),this.timerHover=window.setTimeout((()=>{this.isPointerDown=!1}),30)}},this.object=e,this.domElement=t,this.target=this.object.getTarget(),this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.connect(),this.update()}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(Gg),this.isFirstHover=!0,this.update(),this.state=-1}resetTo(e,t,r){this.target.copy(e),this.object.position.copy(t),this.object.zoom=r,this.object.updateProjectionMatrix(),this.dispatchEvent(Gg),this.update(),this.state=-1}fromJSON(e){this.setEnableDampingSpeed(e.enableDamping),this.enablePan=e.enablePan,this.enableZoom=e.enableZoom,this.enableRotate=e.enableRotate,this.rotationLimitsMode=e.rotationLimitsMode,this.panLimitsMode=e.panLimitsMode,this.panSoftLimit=e.panSoftLimit,this.rotationSoftLimit=e.rotationSoftLimit,this.hoverRotatePanMode=e.hoverRotatePanMode,this.isFirstHover=!0,0!==this.hoverRotatePanMode&&this.domElement.addEventListener("pointermove",this.onPointerHover),tv=(e.hoverRotatePanStrength/100)**2,this.zoomLimitsEnabled=e.zoomLimitsEnabled,this.minZoom=e.zoomLimits.min,this.maxZoom=Math.max(e.zoomLimits.min,e.zoomLimits.max),this.minDistance=1e3/e.zoomLimits.max,this.maxDistance=Math.max(this.minDistance,1e3/e.zoomLimits.min),this.autoRotate=e.autoRotate,Kg=e.autoRotateSpeed,this.autoRotateClockwise=e.autoRotateClockwise;let t=this.object.getTarget().applyQuaternion(Qg.copy(this.object.quaternion).invert());this.minV=-e.panVerticalOffset.min+t.y,this.maxV=e.panVerticalOffset.max+t.y,this.minH=-e.panHorizontalOffset.min+t.x,this.maxH=e.panHorizontalOffset.max+t.x,this.panRangeFactor.set(this.maxH-this.minH,this.maxV-this.minV).divideScalar(2),this.rotationRangeFactor.setScalar(Math.PI).divideScalar(4),this.minPhi=nv(this.spherical.phi-e.rotationVerticalOffset.min),this.maxPhi=nv(this.spherical.phi+e.rotationVerticalOffset.max),this.minTheta=nv(this.spherical.theta-e.rotationHorizontalOffset.min),this.maxTheta=nv(this.spherical.theta+e.rotationHorizontalOffset.max),this.isThetaFlipped=this.minTheta>this.maxTheta,this.preventScroll=e.preventScroll,1===e.orbitTouches&&(this.touches[0]=0),1===e.panTouches&&(this.touches[0]=1),2===e.orbitTouches&&(this.touches[1]=3),2===e.panTouches&&(this.touches[1]=2),3===e.orbitTouches&&(this.touches[2]=0),3===e.panTouches&&(this.touches[2]=1)}connect(){this.domElement.addEventListener("contextmenu",this.onContextMenu),this.domElement.addEventListener("pointerdown",this.onPointerDown),this.domElement.addEventListener("pointercancel",this.onPointerCancel),this.domElement.addEventListener("wheel",this.onMouseWheel),window.addEventListener("keydown",this.onKeyDown,!1),window.addEventListener("keyup",this.onKeyUp,!1),ff||(this.domElement.addEventListener("gesturestart",this.onGesture),this.domElement.addEventListener("gesturechange",this.onGesture),this.domElement.addEventListener("gestureend",this.onGesture)),this.domElement.addEventListener("touchmove",this.onTouchMove),this.domElement.addEventListener("touchend",this.onTouchEnd)}dispose(){this.domElement.removeEventListener("contextmenu",this.onContextMenu),this.domElement.removeEventListener("pointerdown",this.onPointerDown),this.domElement.removeEventListener("pointercancel",this.onPointerCancel),this.domElement.removeEventListener("wheel",this.onMouseWheel),window.removeEventListener("keydown",this.onKeyDown,!1),window.removeEventListener("keyup",this.onKeyUp,!1),this.domElement.removeEventListener("pointermove",this.onPointerHover),ff||(this.domElement.removeEventListener("gesturestart",this.onGesture),this.domElement.removeEventListener("gesturechange",this.onGesture),this.domElement.removeEventListener("gestureend",this.onGesture)),this.domElement.removeEventListener("touchmove",this.onTouchMove),this.domElement.removeEventListener("touchend",this.onTouchEnd),this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this.onPointerUp)}applyLimits(e,t,r,n,i,a,o,s){let l,u,c;this.overShoot.set(0,0),e instanceof We?(l=e.x,u=e.y,this.current.set(this.target.x,this.target.y),c=!0):(l=e.theta,u=e.phi,this.current.set(nv(this.spherical.theta),nv(this.spherical.phi)),c=!1),0===r&&(this.current.x+=l,this.current.y+=u),(3===t||2===t)&&(!c&&this.isThetaFlipped?this.current.x>n&&this.current.x<0?this.overShoot.x=n-this.current.x:this.current.x<i&&this.current.x>0&&(this.overShoot.x=i-this.current.x):this.current.x>n?this.overShoot.x=n-this.current.x:this.current.x<i&&(this.overShoot.x=i-this.current.x),n===i&&(l=0)),(3===t||1===t)&&(this.current.y>a?this.overShoot.y=a-this.current.y:this.current.y<o&&(this.overShoot.y=o-this.current.y),a===o&&(u=0)),c||(this.overShoot.x=nv(this.overShoot.x),this.overShoot.y=nv(this.overShoot.y)),0!==r?(this.overRatio.copy(this.overShoot).divide(s),this.overRatio.x=Math.min(Math.abs(this.overRatio.x),1),this.overRatio.y=Math.min(Math.abs(this.overRatio.y),1),1===r&&(this.overRatio.x=iv(Math.abs(this.overRatio.x)),this.overRatio.y=iv(Math.abs(this.overRatio.y))),this.isPointerDown||1===r?2===r&&(this.overRatio.x>.9||this.overRatio.y>.9)?this.isPointerDown=!1:(l*this.overShoot.x<0&&(l*=1-this.overRatio.x),u*this.overShoot.y<0&&(u*=1-this.overRatio.y)):2===r&&(!c&&(this.overRatio.x>.002||this.overRatio.y>.002)||c&&(Math.abs(this.overShoot.x)>2||Math.abs(this.overShoot.y)>2)?(l=.05*this.overShoot.x,u=.05*this.overShoot.y,c?this.isPanOverShoot=!0:this.isRotateOverShoot=!0):c?this.isPanOverShoot=!1:this.isRotateOverShoot=!1)):(l+=this.overShoot.x,u+=this.overShoot.y),e instanceof We?(e.x=l,e.y=u):(e.theta=l,e.phi=u)}setEnableDampingSpeed(e){this.enableDamping=e,ev=!0===e?.2:1}stopDamping(){this.sphericalDelta.theta=0,this.sphericalDelta.phi=0}getAutoRotationAngle(){return 2*Math.PI/60/60*Kg}getZoomScale(){return Math.pow(.95,2)}rotateLeft(e){this.sphericalDelta.theta-=e}rotateUp(e){this.sphericalDelta.phi-=e}panLeft(e,t){this.panLeftV.setFromMatrixColumn(t,0),this.panLeftV.multiplyScalar(-e),this.panOffset.add(this.panLeftV)}panUp(e,t){this.panUpV.setFromMatrixColumn(t,1),this.panUpV.multiplyScalar(e),this.panOffset.add(this.panUpV)}pan(e,t){let r=this.domElement;if(r&&this.object.isPerspectiveCamera){let n=this.object.position;this.panV.copy(n).sub(this.target);let i=this.panV.length();i*=Math.tan(this.object.fov/2*Math.PI/180),this.panLeft(2*e*i/r.clientHeight,this.object.matrix),this.panUp(2*t*i/r.clientHeight,this.object.matrix)}else r&&this.object.isOrthographicCamera&&(this.panLeft(e*(this.object.right-this.object.left)/this.object.zoom/r.clientWidth,this.object.matrix),this.panUp(t*(this.object.top-this.object.bottom)/this.object.zoom/r.clientHeight,this.object.matrix));this.dispatchEvent(qg)}dollyOut(e){this.object.isPerspectiveCamera?this.scale/=e:this.object.isOrthographicCamera&&(this.object.zoom*=e,this.zoomLimitsEnabled&&(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom))),this.object.updateProjectionMatrix(),this.zoomChanged=!0),this.dispatchEvent(Wg)}dollyIn(e){this.object.isPerspectiveCamera?this.scale*=e:this.object.isOrthographicCamera&&(this.object.zoom/=e,this.zoomLimitsEnabled&&(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom))),this.object.updateProjectionMatrix(),this.zoomChanged=!0),this.dispatchEvent(Wg)}zoomOut(e=this.getZoomScale()){this.dispatchEvent(Yg),this.dollyOut(e),this.dispatchEvent(Xg)}zoomIn(e=this.getZoomScale()){this.dispatchEvent(Yg),this.dollyIn(e),this.dispatchEvent(Xg)}handleMouseDownRotate(e){this.rotateStart.set(e.clientX,e.clientY)}handleMouseDownDolly(e){this.dollyStart.set(e.clientX,e.clientY)}handleMouseDownPan(e){this.panStart.set(e.clientX,e.clientY)}handleMouseMoveRotate(e,t=1){this.rotateEnd.set(e.clientX,e.clientY),this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart).multiplyScalar(ev*t).rotateAround(Jg,-this.object.angleOffsetFromUp);let r=this.domElement;this.rotateLeft(2*Math.PI*this.rotateDelta.x/r.clientHeight),this.rotateUp(2*Math.PI*this.rotateDelta.y/r.clientHeight),this.rotateStart.copy(this.rotateEnd),this.update()}handleMouseMoveDolly(e){this.dollyEnd.set(e.clientX,e.clientY),this.dollyDelta.subVectors(this.dollyEnd,this.dollyStart),this.dollyDelta.y>0?this.dollyOut(this.getZoomScale()):this.dollyDelta.y<0&&this.dollyIn(this.getZoomScale()),this.dollyStart.copy(this.dollyEnd),this.update()}handleMouseMovePan(e,t=1){this.panEnd.set(e.clientX,e.clientY),this.panDelta.subVectors(this.panEnd,this.panStart).multiplyScalar(1*t),this.pan(this.panDelta.x,this.panDelta.y),this.panStart.copy(this.panEnd),this.update()}handleMouseWheel(e){if(!0===function(e){return 0===e.wheelDeltaY||0===e.deltaY?!(pf&&e.shiftKey&&Math.abs(e.wheelDeltaX)>=120)&&(e.wheelDeltaX?e.wheelDeltaX===-3*e.deltaX:0===e.deltaMode):e.wheelDeltaY?e.wheelDeltaY===-3*e.deltaY:0===e.deltaMode}(e)&&!1===mf){if(!1===this.enablePan)return;this.gesture?(this.panDelta.set(-e.deltaX,-e.deltaY).multiplyScalar(1),this.panDelta.x=Math.min(Math.abs(this.panDelta.x),100)*(this.panDelta.x<0?-1:1),this.panDelta.y=Math.min(Math.abs(this.panDelta.y),100)*(this.panDelta.y<0?-1:1),e.altKey?this.pan(0,this.panDelta.y):e.shiftKey?this.pan(this.panDelta.x,0):this.pan(this.panDelta.x,this.panDelta.y),this.update()):(this.gesture=!0,this.isPointerDown=!0),window.clearTimeout(this.timer),this.timer=window.setTimeout((()=>{this.gesture=!1,this.isPointerDown=!1}),30)}else{if(!1===this.enableZoom)return;0===e.deltaY?e.deltaX<0?this.dollyIn(this.getZoomScale()):e.deltaX>0&&this.dollyOut(this.getZoomScale()):e.deltaY<0?this.dollyIn(this.getZoomScale()):e.deltaY>0&&this.dollyOut(this.getZoomScale()),this.update(),this.gesture=!1,this.isPointerDown=!1}}handleTouchStartRotate(){if(2===av.length){let e=.5*(av[0].pageX+av[1].pageX),t=.5*(av[0].pageY+av[1].pageY);this.rotateStart.set(e,t)}else this.rotateStart.set(av[0].pageX,av[0].pageY)}handleTouchStartPan(){if(2===av.length){let e=.5*(av[0].pageX+av[1].pageX),t=.5*(av[0].pageY+av[1].pageY);this.panStart.set(e,t)}else this.panStart.set(av[0].pageX,av[0].pageY)}handleTouchStartDolly(){let e=av[0].pageX-av[1].pageX,t=av[0].pageY-av[1].pageY,r=Math.sqrt(e*e+t*t);this.dollyStart.set(0,r)}handleTouchStartDollyPan(){this.enableZoom&&this.handleTouchStartDolly(),this.enablePan&&this.handleTouchStartPan()}handleTouchStartDollyRotate(){this.enableZoom&&this.handleTouchStartDolly(),this.enableRotate&&this.handleTouchStartRotate()}handleTouchMoveRotate(e){if(2===av.length){let t=uv(e),r=.5*(e.pageX+t.x),n=.5*(e.pageY+t.y);this.rotateEnd.set(r,n)}else{if(e.pointerId!==av[0].pointerId)return;this.rotateEnd.set(e.pageX,e.pageY)}this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart).multiplyScalar(ev);let t=this.domElement;t&&(this.rotateLeft(2*Math.PI*this.rotateDelta.x/t.clientHeight),this.rotateUp(2*Math.PI*this.rotateDelta.y/t.clientHeight)),this.rotateStart.copy(this.rotateEnd)}handleTouchMovePan(e){if(2===av.length){let t=uv(e),r=.5*(e.pageX+t.x),n=.5*(e.pageY+t.y);this.panEnd.set(r,n)}else{if(e.pointerId!==av[0].pointerId)return;this.panEnd.set(e.pageX,e.pageY)}this.panDelta.subVectors(this.panEnd,this.panStart).multiplyScalar(1),this.pan(this.panDelta.x,this.panDelta.y),this.panStart.copy(this.panEnd)}handleTouchMoveDolly(e){let t=uv(e),r=e.pageX-t.x,n=e.pageY-t.y,i=Math.sqrt(r*r+n*n);this.dollyEnd.set(0,i),this.dollyDelta.set(0,Math.pow(this.dollyEnd.y/this.dollyStart.y,2)),this.dollyOut(this.dollyDelta.y),this.dollyStart.copy(this.dollyEnd)}handleTouchMoveDollyPan(e){this.enableZoom&&this.handleTouchMoveDolly(e),this.enablePan&&this.handleTouchMovePan(e)}handleTouchMoveDollyRotate(e){this.enableZoom&&this.handleTouchMoveDolly(e),this.enableRotate&&this.handleTouchMoveRotate(e)}};function nv(e){let t=2*Math.PI;for(;e<=-Math.PI;)e+=t;for(;e>Math.PI;)e-=t;return e}function iv(e){return 1-Math.pow(1-e,4)}var av=[],ov={};function sv(e){delete ov[e.pointerId];for(let t=0;t<av.length;t++)if(av[t].pointerId===e.pointerId)return void av.splice(t,1)}function lv(e){let t=ov[e.pointerId];void 0===t&&(t=new ve,ov[e.pointerId]=t),t.set(e.pageX,e.pageY)}function uv(e){let t=e.pointerId===av[0].pointerId?av[1]:av[0];return ov[t.pointerId]}var cv=class extends class{constructor(e,t,r=0,n=1/0){this.ray=new wt(e,t),this.near=r,this.far=n,this.camera=null,this.layers=new Ot,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,r=[]){return ru(e,this,r,t),r.sort(tu),r}intersectObjects(e,t=!0,r=[]){for(let n=0,i=e.length;n<i;n++)ru(e[n],this,r,t);return r.sort(tu),r}}{constructor(){super(),this.layers.enable(3)}setFromCamera(e,t){t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,-1).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):t.isPerspectiveCamera?(this.ray.origin.set(e.x,e.y,-1).unproject(t),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):console.error("Raycaster: Unsupported camera type.")}intersectVisibleObjects(e,t=!0,r=[]){return e.forEach((e=>{e.visible&&this.intersectObject(e,t,r)})),r}createRaycastLineHelper(){let e=new mo({color:65280,linewidth:10}),t=new We(this.ray.origin.x,this.ray.origin.y,this.ray.origin.z),r=new We(this.ray.direction.x,this.ray.direction.y,this.ray.direction.z),n=this.camera.far-this.camera.near,i=(new We).addVectors(t,r.multiplyScalar(n)),a=new wr;return a.setFromPoints([t,i]),new wo(a,e)}};function hv(e,t,r){r.x=e.x*t.x,r.y=e.y,r.z=e.x*t.y}function dv(e){return new ve(e.y,-e.x)}var pv=class extends wr{constructor(e,t,r,n,i,a,o,s,l,u,c,h,d=!1){super(),this.type="RoundedCylinderBufferGeometry",e=void 0!==e?e:1,t=void 0!==t?t:1,r=r||1,n=Math.floor(n)||8,i=Math.floor(i)||1,a=void 0!==a&&a,o=void 0!==o?o:0,s=void 0!==s?s:2*Math.PI,a&&(l=0,u=0);let p=[],f=[],m=[],g=[],v=0,y=r/2,x=new We,b=new We;d&&0==e&&(e=l),d&&0==t&&(t=u);let w=new ve(e,y),S=new ve(t,-y),_=null,A=null,M=null,E=null,C=w.clone().sub(S),T=0,D=0,L=0;h>0&&(T=Math.min(e,t)*(1-h),D=e-T,L=t-T);let P=w.clone();P.x-=T;let R=Math.PI-C.angle(),O=C.angle(),k=Math.tan(O/2),I=Math.tan(R/2),B=k+I,z=h?B:I,N=h?B:k;if(l=Math.min(l,(e-D)/z,C.length()/B),u=Math.min(u,(t-L)/N,C.length()/B),l>0){let e=l/k;_=w.clone().sub(new ve(e,l)),h&&(M=_.clone(),M.x-=T-B*l),w.sub(C.clone().setLength(e))}if(u>0){let e=u/I;A=S.clone().sub(new ve(e,-u)),S.add(C.clone().setLength(e)),h&&(E=A.clone(),E.x-=T-B*u,P.sub(C.clone().setLength(e)))}C=w.clone().sub(S);let F=C.length()<.5,U=[];for(let c=0;c<=n;c++){let d=[],p=c/n,y=p*s+o,w=new ve(Math.sin(y),Math.cos(y));if(E&&A?(j(d,p,w,R,u,E,-1,!0),j(d,p,w,O,u,A,-1,!1)):A?(H(d,w,A.x,0,-1),j(d,p,w,O,u,A,-1,!1)):a||H(d,w,t,L,-1),hv(dv(C).normalize(),w,x),!F)for(let e=0;e<=i;e++){let t=e/i;hv(C.clone().multiplyScalar(t).add(S),w,b),f.push(b.x,b.y,b.z),m.push(x.x,x.y,x.z),g.push(p,.5+b.y/r),d.push(v++)}if(M&&_?(j(d,p,w,R,l,_,1,!1),j(d,p,w,O,l,M,1,!0)):_?(j(d,p,w,R,l,_,1,!1),H(d,w,_.x,0,1)):a||H(d,w,e,D,1),h&&!F){hv(dv(C).multiplyScalar(-1).normalize(),w,x);for(let e=0;e<=i;e++){let t=e/i;hv(C.clone().multiplyScalar(-t).add(P),w,b),f.push(b.x,b.y,b.z),m.push(x.x,x.y,x.z),g.push(p,.5+b.y/r),d.push(v++)}}h&&!a&&d.push(d[0]),U.push(d)}for(let e=0;e<U.length-1;e++)for(let t=0;t<U[0].length-1;t++){if(a&&h&&t==i)continue;let r=U[e][t],n=U[e+1][t],o=U[e+1][t+1],s=U[e][t+1],l=f[3*o+0],u=f[3*o+2];p.push(r,n,s),(0!=l||0!=u)&&p.push(n,o,s)}function j(e,t,n,i,a,o,s,l){for(let u=0;u<c+1;u++){let h=u/c,d=s<0?h:1-h;l&&(d-=1),d*=i;let p=new ve(Math.sin(d),Math.cos(d)*s);hv(p.clone().multiplyScalar(a).add(o),n,b),f.push(b.x,b.y,b.z),hv(p,n,x),m.push(x.x,x.y,x.z),g.push(t,.5+b.y/r),e.push(v++)}}function H(e,t,r,n,i){let a=new We,o=new ve,s=[r,n];i<0&&s.reverse();for(let r of s)o.set(r,y*i),hv(o,t,a),f.push(a.x,a.y,a.z),m.push(0,i,0),g.push(.5,.5),e.push(v++)}function V(r,n,i){let a=new ve(Math.sin(i),Math.cos(i)),o=new ve(-Math.cos(i),Math.sin(i)),s=new We,l=r<0?(e,t,r)=>p.push(e,t,r):(e,t,r)=>p.push(e,r,t);hv(new ve((e+t+D+L)/4,0),a,s),f.push(s.x,s.y,s.z),m.push(o.x,0,o.y),g.push(.5,.5);let u=v++;for(let e of n){let t=f.slice(3*e,3*e+3);f.push(...t),m.push(o.x,0,o.y);let r=g.slice(2*e,2*e+2);g.push(...r),v++}for(let e=u+1;e<v-1;e++)l(u,e,e+1);l(u,v-1,u+1)}s<2*Math.PI&&(V(-1,U[0],o),V(1,U[U.length-1],o+s)),this.setIndex(p),this.setAttribute("position",new pr(f,3)),this.setAttribute("normal",new pr(m,3)),this.setAttribute("uv",new pr(g,2))}},fv=Math.PI/2,mv=class extends wr{constructor(e=1,t=1,r=1,n=1,i=1,a=1,o=0,s=4){super(),this.type="BoxBufferGeometry";let l=this;n=Math.floor(n),i=Math.floor(i),a=Math.floor(a),s=Math.floor(s),o=Math.min(o,e/2,t/2,r/2);let u=[],c=[],h=[],d=[],p=0,f=0;function m(e,t,r,n,i,a,s,m,g,v,y){let x=(a-2*o)/g,b=(s-2*o)/v,w=a/2-o,S=s/2-o,_=m/2,A=g+1,M=v+1,E=0,C=0,T=new We;for(let a=0;a<M;a++){let o=a*b-S;for(let s=0;s<A;s++){let l=s*x-w;T[e]=l*n,T[t]=o*i,T[r]=_,c.push(T.x,T.y,T.z),T[e]=0,T[t]=0,T[r]=m>0?1:-1,h.push(T.x,T.y,T.z),d.push(s/g),d.push(1-a/v),E+=1}}for(let e=0;e<v;e++)for(let t=0;t<g;t++){let r=p+t+A*e,n=p+t+A*(e+1),i=p+(t+1)+A*(e+1),a=p+(t+1)+A*e;u.push(r,n,a),u.push(n,i,a),C+=6}l.addGroup(f,C,y),f+=C,p+=E}function g(e,t,r,n,i,a,m,g,v,y,x){let b=(m-2*o)/y,w=m/2-o,S=g/2-o,_=v/2,A=y+1,M=0,E=0,C=new We,T=new We;for(let l=0;l<s+1;l++){let u=l/s*fv,p=Math.sin(u)*o,f=(1-Math.cos(u))*o,m=Math.sin(u),g=Math.cos(u);C[t]=(S+p)*i,C[r]=(_-f)*a,T[e]=0,T[t]=m*Math.sign(C[t]),T[r]=g*Math.sign(C[r]);for(let t=0;t<A;t++){let r=t*b-w;C[e]=r*n,c.push(C.x,C.y,C.z),h.push(T.x,T.y,T.z),d.push(t/y),d.push(0),M+=1}}for(let e=0;e<s;e++)for(let t=0;t<y;t++){let r=p+t+A*e,n=p+t+A*(e+1),i=p+(t+1)+A*(e+1),a=p+(t+1)+A*e;u.push(r,n,a),u.push(n,i,a),E+=6}l.addGroup(f,E,x),f+=E,p+=M}function v(n,i,a){let l=new We,f=new We(e/2,t/2,r/2);f.subScalar(o);let m=[],g=n*i*a>0?(e,t,r)=>u.push(e,t,r):(e,t,r)=>u.push(e,r,t);for(let e=0;e<=s;e++){let t=[],r=fv*(1-e/s),u=Math.cos(r),g=Math.sin(r),v=0;for(let r=0;r<=e;r++){let r=Math.cos(v),s=Math.sin(v);l.x=u*r,l.y=g,l.z=u*s;let m=f.clone().addScaledVector(l,o);c.push(n*m.x,i*m.y,a*m.z),h.push(n*l.x,i*l.y,a*l.z),d.push(0,0),t.push(p++),v+=fv/e}m.push(t)}let v=m.length-1;for(let e=0;e<v;e++){let t=m[e],r=m[e+1],n=t.length-1;g(t[0],r[1],r[0]);for(let e=1;e<=n;e++)g(t[e-1],t[e],r[e]),g(t[e],r[e+1],r[e])}}m("z","y","x",-1,-1,r,t,e,a,i,0),m("z","y","x",1,-1,r,t,-e,a,i,1),m("x","z","y",1,1,e,r,t,n,a,2),m("x","z","y",1,-1,e,r,-t,n,a,3),m("x","y","z",1,-1,e,t,r,n,i,4),m("x","y","z",-1,-1,e,t,-r,n,i,5),o>0&&(g("z","y","x",-1,-1,1,r,t,e,a,0),g("z","y","x",1,-1,-1,r,t,e,a,1),g("z","y","x",-1,1,-1,r,t,e,a,1),g("z","y","x",1,1,1,r,t,e,a,0),g("x","y","z",-1,-1,-1,e,t,r,n,0),g("x","y","z",1,-1,1,e,t,r,n,1),g("x","y","z",-1,1,1,e,t,r,n,0),g("x","y","z",1,1,-1,e,t,r,n,1),g("y","x","z",-1,-1,1,t,e,r,i,0),g("y","x","z",1,-1,-1,t,e,r,i,1),g("y","x","z",1,1,1,t,e,r,i,1),g("y","x","z",-1,1,-1,t,e,r,i,0),v(1,1,1),v(-1,1,1),v(1,-1,1),v(-1,-1,1),v(1,1,-1),v(-1,1,-1),v(1,-1,-1),v(-1,-1,-1)),this.setIndex(u),this.setAttribute("position",new pr(c,3)),this.setAttribute("normal",new pr(h,3)),this.setAttribute("uv",new pr(d,2))}},gv=class extends wr{constructor(e=[],t=[],r="",n=1,i=.2,a=4){super(),this.type="PolyhedronGeometryRound";let o=[],s=[],l=[];return function(){var s;0==(i=Math.min(.99999,i))&&(a=0);let u={IcosahedronGeometry:5,DodecahedronGeometry:3,HexahedronGeometry:3,OctahedronGeometry:4,TetrahedronGeometry:3}[r],c=new We,h=c.clone(),d=new ir,p=i*n,f=n-p,m=a+1,g=new We,v=(e,t)=>g.subVectors(e,t).normalize(),y=(e,t)=>Array(e).fill(void 0).map(t),x=y(e.length/3,((t,r)=>(new We).fromArray(e,3*r).setLength(n))),b=[],w=1e6;for(let e=0;e<x.length;e++){let r,n,i,a=x[e],o=[],l=1e10,u=-1;for(;-1!=(u=t.indexOf(e,u+1));){let e=u-u%3;r=t[e+(u+1)%3],n=t[e+(u+2)%3],i=a.distanceToSquared(x[r]),l=Math.min(l,i),o.push([r,n,i])}l+=1e-6;let c=[],h=0,d=o.length;for(let t=0;t<d;t++){[r,n,i]=o[h];let t=1==(null==(s=b[r])?void 0:s.includes(e));i<=l&&c.push(r+ +t*w),h=o.findIndex((e=>e[0]==n))}b.push(c)}let S=[];{let e,t,r=0,n=0,i=3==u;for(let o=0;o<=a;o++){e=o*(o+1)/2,t=(o+1)*(o+2)/2;for(let s=0;s<a-o;s++)[r,n]=[e+s+o+2,t+s+o+3],S.push(e,t,...i?[n,e]:[r,t],n,r),[e,t]=[r,n];S.push(e,t,e+a+2)}}let _=c.clone(),A=c.clone(),M=c.clone(),E=c.clone(),C=c.clone(),T=[],D=y(x.length,(()=>y(u,(()=>c.clone()))));for(let e=0;e<x.length;e++){c.copy(x[e]).normalize(),_.copy(c).multiplyScalar(f);let t=b[e];for(let r=0;r<t.length;r++){let n=t[r],i=t[(r+1)%u];d.setFromPointsAndIndices(x,e,n%w,i%w),d.b.sub(d.a).setLength(1e10).add(d.a),d.c.sub(d.a).setLength(1e10).add(d.a),d.closestPointToPoint(_,D[e][r])}let r=[],n=[],i=[],s=new We;0==a&&[...D[e]].reduce(((e,t)=>e.add(t)),s).multiplyScalar(1/u);for(let t=0;t<u;t++){let o=[],l=(t-1+u)%u,d=D[e][l],y=D[e][t];c.copy(d).sub(_),h.copy(y).sub(_);let x=_.angleTo(c),b=c.angleTo(h),w=Math.cos(x)*p;0==a?A.copy(s):A.copy(_).setLength(f+w),n.push(w);let S=[A,d,y];for(let e=0;e<2;e++){let t=S[e],n=S[e+1];E.subVectors(t,_),C.subVectors(n,_),M.crossVectors(E,C).normalize();for(let n=0;n<m;n++){let i=[x,b][e]*n/m;c.copy(E).applyAxisAngle(M,i).add(_),r.push(c.clone()),e&&(v(c,_),o.push([0==n?t:c.clone(),g.clone()]))}e&&(v(n,_),o.push([n,g.clone()]))}i.push(o)}T.push(i);let y=2*m,L=2;for(let e=0;e<u;e++){let t=y*e,i=y*((e+1)%u),a=[r[t]];for(let o=1;o<m;o++){E=r[t+o],C=r[i+o],a.push(E);for(let t=1,r=o-L+1;t<=r;t++)c.lerpVectors(E,C,t/(r+1)),c.sub(_).setLength(n[e]).add(_),a.push(c.clone());a.push(C)}for(let e=0;e<m;e++)a.push(r[e+m+t]);a.push(r[i+m]);let s=S.map((e=>a[e]));o.push(...s.map((e=>[e.x,e.y,e.z])).flat()),l.push(...s.map((e=>(v(e,_),[g.x,g.y,g.z]))).flat())}}let L=[];for(let e=0;e<b.length;e++)for(let t=0;t<u;t++){let r=b[e][t];if(r<w){let n=b[r].findIndex((t=>t%w==e)),i=T[e][t],a=T[r][n];for(let e=0;e<m;e++){let t=i[e],r=a[m-e],n=i[e+1];[t,r,n,n,r,a[m-(e+1)]].forEach((e=>{o.push(e[0].x,e[0].y,e[0].z),l.push(e[1].x,e[1].y,e[1].z)}))}L.push(i[0][0],a[m][0],i[m][0],a[0][0])}}for(;L.length;){let e,t,r,n;[e,t]=L.splice(0,2);let i=[e];for(;e!=t;)i.push(t),r=L.indexOf(t),n=r%2,t=L.splice(r-n,2)[1-n];g.subVectors(i[0],i[1]).cross(c.subVectors(i[0],i[2])).normalize();let a=g.dot(i[0])<0;a&&g.negate();for(let e=1;e<=i.length-2;e++)[i[e+ +a],i[e+1-+a],i[0]].forEach((e=>{o.push(e.x,e.y,e.z),l.push(g.x,g.y,g.z)}))}}(),function(){let e=new We;for(let t=0;t<o.length;t+=3){e.x=o[t+0],e.y=o[t+1],e.z=o[t+2];let r=h(e)/2/Math.PI+.5,n=d(e)/Math.PI+.5;s.push(r,1-n)}let t=new We,r=new We,n=new We,i=new We,a=new ve,l=new ve,u=new ve,c=(e,t,r,n)=>{n<0&&1===e.x&&(s[t]=e.x-1),0===r.x&&0===r.z&&(s[t]=n/2/Math.PI+.5)};for(let e=0,d=0;e<o.length;e+=9,d+=6){t.set(o[e+0],o[e+1],o[e+2]),r.set(o[e+3],o[e+4],o[e+5]),n.set(o[e+6],o[e+7],o[e+8]),a.set(s[d+0],s[d+1]),l.set(s[d+2],s[d+3]),u.set(s[d+4],s[d+5]),i.copy(t).add(r).add(n).divideScalar(3);let p=h(i);c(a,d+0,t,p),c(l,d+2,r,p),c(u,d+4,n,p)}for(let e=0;e<s.length;e+=6){let t=s[e+0],r=s[e+2],n=s[e+4],i=Math.max(t,r,n),a=Math.min(t,r,n);i>.9&&a<.1&&(t<.2&&(s[e+0]+=1),r<.2&&(s[e+2]+=1),n<.2&&(s[e+4]+=1))}function h(e){return Math.atan2(e.z,-e.x)}function d(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}}(),this.setAttribute("position",new pr(o,3)),this.setAttribute("normal",new pr(l,3)),void this.setAttribute("uv",new pr(s,2))}static fromJSON(e){return new gv(e.vertices,e.indices,e.radius,e.corner,e.cornerSides)}},vv=class extends gv{constructor(e=1,t=.2,r=4){let n=(1+Math.sqrt(5))/2,i=1/n,a="DodecahedronGeometry";super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],a,e,t,r),this.type=a}static fromJSON(e){return new vv(e.radius,e.corner,e.cornerSides)}},yv=1e-12,xv=class{constructor(e){this.position=new ve,this.startPosition=new ve,this.uuid=ge.generateUUID(),this.position=e.clone()}start(){this.reset()}reset(){this.startPosition.copy(this.position)}applyOffset(e){this.position.copy(this.startPosition).add(e)}copy(e){return this.position.copy(e.position),this.startPosition.copy(e.startPosition),this}clone(){return new xv(this.position).copy(this)}toJSON(){return[this.position.x,this.position.y]}},bv=class extends xv{constructor(e){super(e.position),this.parent=e}copy(e){return super.copy(e),this}clone(){return new bv(this.parent).copy(this)}},wv=class extends xv{constructor(e,t){super(t),this.controls=[],this.roundness=0,this.areControlsDirectionsMirrored=!0,this.uuid=e,this.controls.push(new bv(this),new bv(this))}static create(e,t){let r=new wv(e,new ve(...t.position));return r.controls[0].position.set(...t.controlPrevious.position),r.controls[1].position.set(...t.controlNext.position),r.roundness=t.roundness,r.areControlsDirectionsMirrored=t.areControlsDirectionsMirrored,r}getOppositeControl(e){let t=this.controls.indexOf(e);return 0===t?this.controls[1]:1===t?this.controls[0]:null}applyOffsetToControls(e,t=1){for(let r=0,n=this.controls.length;r<n;r++){let n=this.controls[r];this.position.distanceTo(n.position)<=t?n.position.copy(this.position):n.applyOffset(e)}}controlsMoved(){return!(this.position.equals(this.controls[0].position)&&this.position.equals(this.controls[1].position))}copy(e){return super.copy(e),this.controls[0].copy(e.controls[0]),this.controls[1].copy(e.controls[1]),this.roundness=e.roundness,this.uuid=e.uuid,this}clone(){return new wv(this.uuid,this.position).copy(this)}toJSON(){return super.toJSON().concat(this.controls[0].toJSON(),this.controls[1].toJSON(),[this.roundness])}},Sv=new ve,_v=new ve,Av=new ve,Mv=new ve,Ev=new ve,Cv=new ve,Tv=new We,Dv=new We;function Lv(e){let t=new ve;t.addVectors(e.v0,Sv.subVectors(e.v1,e.v0).multiplyScalar(2/3));let r=new ve;return r.addVectors(e.v2,_v.subVectors(e.v1,e.v2).multiplyScalar(2/3)),new Go(e.v0,t,r,e.v2)}function Pv(e,t,r=Number.EPSILON){return Math.abs(e-t)<r}function Rv(e,t,r=Number.EPSILON){return e.distanceTo(t)<r}function Ov(e,t,r=Number.EPSILON){return e.distanceTo(t)<r}function kv(e,t,r){let n=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)),i=Math.sqrt(Math.pow(t.x-r.x,2)+Math.pow(t.y-r.y,2)),a=Math.sqrt(Math.pow(r.x-e.x,2)+Math.pow(r.y-e.y,2));return Math.acos((i*i+n*n-a*a)/(2*i*n))}function Iv(e,t,r,n,i){let a=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)),o=(e.y+t.y)/2,s=(e.x+t.x)/2,l=Math.sqrt(Math.pow(r,2)-Math.pow(a/2,2))*(e.y-t.y)/a,u=Math.sqrt(Math.pow(r,2)-Math.pow(a/2,2))*(t.x-e.x)/a;return n.set(s+l,o+u),i.set(s-l,o-u),[n,i]}function Bv(e,t,r){return e.distanceTo(r)<t.distanceTo(r)?t:e}function zv(e,t,r,n,i,a){let o,s=t.x-e.x,l=t.y-e.y,u=r.x-e.x,c=r.y-e.y,h=Math.sqrt((s+u)*(s+u)+(l+c)*(l+c));return kv(t,e,r)>Math.PI&&(h*=-1),o=Pv(c,l)?(l+c)*(n/h-.5)*8/3/(s-u):(s+u)*(n/h-.5)*8/3/(c-l),i.set(t.x-o*l,t.y+o*s),a.set(r.x+o*c,r.y-o*u),[i,a]}function Nv(e,t){return e.position.equals(e.controls[1].position)&&t.position.equals(t.controls[0].position)}function Fv(e,t=12,r=!1){let n=[];for(let i=0,a=e.length;i<a;i++){let a=e[i],o=0;if(r&&void 0!==a.roundedCurveCorner){let e=.5*Uv(a.roundedCurveCorner,t);i>0&&(n[i-1]+=e),o+=e}void 0!==a.curveAfter&&(o+=Uv(a.curveAfter,t)),n.push(o)}return e.length>0&&r&&void 0!==e[0].roundedCurveCorner&&(n[e.length-1]+=.5*Uv(e[0].roundedCurveCorner,t)),n}function Uv(e,t=12){return e&&e instanceof Oo?2*t:e&&(e instanceof qo||e instanceof Yo)?1:e&&e instanceof Jo?t*e.points.length:t}var jv,Hv,Vv=new ve,Gv=new ve,Wv=new ve,qv=new ve,Yv=new ve,Xv=new ve,Qv=class extends as{constructor(e=100,t=100){super(),this.points=[],this.shapeHoles=[],this.eventDispatcher=new ae,this.plane=new tn(new We(0,0,-1)),this.subdivision=0,this.controlSnapDistance=4,this.pointIDs=0,this.isMesh2D=!1,this._roundness=0,this.isClosed=!1,this.useCubicForRoundedCorners=!0,this.uuid=ge.generateUUID(),this.needsUpdate=!1,this.roundedCurves=[],this._width=e,this._height=t}static createFromState(e,t,r){let n=new Qv;return n.isClosed=e.isClosed,n.points=e.points.map((e=>wv.create(e.id,e.data))),"number"==typeof e.roundness&&(n.roundness=e.roundness),n.shapeHoles=e.shapeHoles.map((e=>Qv.createFromState(e))),void 0!==t&&void 0!==r&&n.applySize(t,r),n.update(),n}get width(){return this._width}get height(){return this._height}get roundness(){return this._roundness}set roundness(e){if(this._roundness!==e){this._roundness=e;for(let t=0,r=this.points.length;t<r;t++)this.points[t].roundness=e;this.needsUpdate=!0}}getPointsIndexesByIds(e){return e.map((e=>this.getPointIndexById(e))).filter((e=>e>=0))}getPointIndexById(e){return this.points.findIndex((t=>t.uuid===e))}getLineIndexById(e){return this.getPointIndexById(e)}getBezierPoint(e){if(e<=this.points.length-1)return this.points[e];if(this.shapeHoles.length>0)for(let t=0,r=this.shapeHoles.length;t<r;t++){let r=this.shapeHoles[t],n=e-this.points.length;if(n<=r.points.length-1)return r.points[n]}throw new Error("This shape does not have a point for this index: "+e)}getBezierPointIndex(e){let t=this.points.indexOf(e);if(t>=0)return t;if(t=this.points.length,this.shapeHoles.length>0)for(let r=0,n=this.shapeHoles.length;r<n;r++){let n=this.shapeHoles[r],i=n.points.indexOf(e);if(i>=0)return t+i;t+=n.points.length}return-1}getAllPoints(){let e=[].concat(...this.shapeHoles.map((e=>e.points)));return[...this.points,...e]}applySize(e,t){0===e&&(e=.001),0===t&&(t=.001),this._width=e,this._height=t}applyScale(e,t){let r=Vv.set(e,t);for(let e=0,t=this.points.length;e<t;e++){let t=this.points[e];t.position.multiply(r),t.controls[0].position.multiply(r),t.controls[1].position.multiply(r)}for(let r=0,n=this.shapeHoles.length;r<n;r++)this.shapeHoles[r].applyScale(e,t);this._update(!1)}createPoint(e,t=0,r=ge.generateUUID()){let n;n=e instanceof ve?e:new ve(e,t);let i=new wv(r,n);return i.roundness=this.roundness,i}addPoint(e){this.points.push(e),this.needsUpdate=!0}addPointAt(e,t){this.points.splice(t,0,e),this.needsUpdate=!0}getPointByUuid(e){for(let t=0,r=this.points.length;t<r;t++){let r=this.points[t];if(r.uuid===e)return r}}getFirstPoint(){return this.points[0]}getLastPoint(){return this.points[this.points.length-1]}removePoint(e){let t=this.points.indexOf(e);t>=0&&this.points.splice(t,1),this.needsUpdate=!0}removePointById(e){let t=this.points.find((t=>t.uuid===e));t&&this.removePoint(t)}update(e=!0){for(let e=0,t=this.shapeHoles.length;e<t;e++)this.shapeHoles[e].update(!1);this._update(e)}extractShapePointsToBuffer(e,t=12,r=!1){this.subdivision=t,void 0===this.curveDivisions&&this.computeCurveDivisions(t);let n=r?this.roundedCurveDivisions:this.curveDivisions;return function(e,t,r=12,n=!0){let i,a=Dv.set(0,0,0),o=0,s=[];for(let n=0;n<t.length;n++){let l=t[n],u=Sv,c=Uv(l,r);s.push(c);for(let t=0;t<=c;t++)if(l instanceof Go||l instanceof Xo||l instanceof qo){if(l.getPoint(t/c,u),a.set(u.x,u.y,0),void 0!==i&&Ov(i,a))continue;void 0===i&&(i=Tv),i.copy(a),e.setXYZ(o,a.x,a.y,a.z),o++}}n&&o>1&&(e.getX(o-1)!==e.getX(0)||e.getY(o-1)!==e.getY(0)||e.getZ(o-1)!==e.getZ(0))&&(e.setXYZ(o,e.getX(0),e.getY(0),e.getZ(0)),o++)}(e,r?this.roundedCurves:this.curves,t,this.autoClose),n.reduce(((e,t)=>e+t),0)+1}computeCurveDivisions(e=12){return this.curveDivisions=Fv(this.points,e,!1),this.roundedCurveDivisions=Fv(this.points,e,!0),this.curveDivisions}extractFilteredShapePointsToBuffer(e,t,r=12){return 2*function(e,t,r,n=12,i=!0){let a=Dv.set(0,0,0),o=0,s=[];for(let i=0;i<t.length;i++){if(!1===r[i])continue;let l,u=t[i],c=Sv,h=Uv(u,n);s.push(h);for(let t=0;t<=h;t++)if(u instanceof Go||u instanceof Xo||u instanceof qo){if(u.getPoint(t/h,c),a.set(c.x,c.y,0),null!=l&&l.equals(a))continue;void 0===l?l=Tv:(e.setXYZ(o,l.x,l.y,l.z),o++,e.setXYZ(o,a.x,a.y,a.z),o++),l.copy(a)}}return i&&o>1&&!(e.getX(o-1)===e.getX(0)&&e.getY(o-1)===e.getY(0)&&e.getZ(o-1)===e.getZ(0))&&(e.setXYZ(o,e.getX(0),e.getY(0),e.getZ(0)),o++),s}(e,this.curves,t,r,this.autoClose).reduce(((e,t)=>e+t),0)}extractShapePointsToFlatArray(e,t=12){return this.subdivision=t,void 0===this.curveDivisions&&this.computeCurveDivisions(t),function(e,t,r=12,n=!0){let i,a=0;for(let n=0;n<t.length;n++){let o=t[n],s=Uv(o,r),l=Sv;for(let t=0;t<=s;t++)if(o instanceof Go||o instanceof Xo||o instanceof qo){if(o.getPoint(t/s,l),void 0!==i&&Rv(i,l,yv))continue;void 0===i&&(i=_v),i.copy(l),e.push(l.x,l.y),a++}}return Pv(e[0],e[e.length-2],yv)&&Pv(e[1],e[e.length-1],yv)&&(e.pop(),e.pop()),n&&a>1&&!(Pv(e[a-1],e[1],yv)&&Pv(e[a-2],e[0],yv))&&(e.push(e[0],e[1]),a++),e}(e,this.roundedCurves,t,this.autoClose)}getCurveIndexFromVertexId(e,t=!1){let r=0;void 0===this.curveDivisions&&this.computeCurveDivisions(this.subdivision);let n=t?this.roundedCurveDivisions:this.curveDivisions,i=0;t&&void 0!==this.points[0].roundedCurveCorner&&(i=.5*Uv(this.points[0].roundedCurveCorner,this.subdivision));let a=e-i;a<0&&(a+=n.reduce(((e,t)=>e+t),0));for(let e=0,t=n.length;e<t;e++){let t=n[e];if(a<r+t)return[e,(a-r+1)/t];r+=t}return[0,1]}getCurveT(e,t,r){let n=this.points[e],i=this.points[e>=this.points.length-1?0:e+1],a=this.curveDivisions,o=a[e];if(Nv(n,i)){let e=n.position.distanceTo(i.position);return n.position.distanceTo(Vv.set(r.x,r.y))/e}let s=0;for(let t=0;t<e;t++)s+=a[t];return(t-s)/o}dispose(){this.eventDispatcher=null}_applyCurveForPoint(e,t){Nv(t,e)?this.lineTo(e.position.x,e.position.y):this.bezierCurveTo(t.controls[1].position.x,t.controls[1].position.y,e.controls[0].position.x,e.controls[0].position.y,e.position.x,e.position.y);let r=this.curves[this.curves.length-1];e.curveBefore=r,t.curveAfter=r;let n=r.clone();e.roundedCurveBefore=n,t.roundedCurveAfter=n,e.roundedCurveCorner=void 0,this.roundedCurves.push(n)}_update(e=!0){var t;if(this.curves=[],this.roundedCurves=[],!this.points.length)return;for(let e=0,t=this.points.length;e<t;e++){let t=this.points[e];if(0===e)this.moveTo(t.position.x,t.position.y);else{let r=this.points[e-1];this._applyCurveForPoint(t,r)}}let r=this.getLastPoint();if(null!=r&&r.curveAfter&&(r.curveAfter=void 0),this.isClosed){let e=this.points[0],t=this.points[this.points.length-1];this._applyCurveForPoint(e,t)}if(this.points.length>2){let e=0;for(let t=0,r=this.points.length;t<r;t++){let r=this.points[t],n=r.roundness;if(!r.controlsMoved()&&n>0){let i=r.curveBefore,a=r.curveAfter;if(void 0===i||void 0===a)continue;let o,s=r.roundedCurveBefore,l=r.roundedCurveAfter,u=i.getLength(),c=a.getLength(),h=Math.min(n,.499*u),d=Math.min(n,.499*c),p=Math.min(h,d),f=1-p/u,m=p/c,g=i.getPointAt(f,Vv),v=a.getPointAt(m,Gv);if(this._subSplitCurve(i,s,f,g,void 0),this._subSplitCurve(a,l,m,void 0,v),this.useCubicForRoundedCorners){let e=kv(g,r.position,v)/2,t=Math.tan(e)*g.distanceTo(r.position),[n,i]=Iv(g,v,t,Wv,qv),a=Bv(n,i,r.position),[s,l]=zv(a,g,v,t,Yv,Xv);o=new Go(g.clone(),s.clone(),l.clone(),v.clone())}else o=new Xo(g.clone(),r.position.clone(),v.clone());r.roundedCurveCorner=o,this.roundedCurves.splice(t+e,0,o),e++}}}e&&(null==(t=this.eventDispatcher)||t.dispatchEvent({type:"update"}))}_subSplitCurve(e,t,r,n,i){if(!(e instanceof qo)){let a=e,o=t,s=a.getUtoTmapping(r,0),l=function(e,t,r,n,i=.5){let a=Sv.subVectors(t,e).multiplyScalar(i).add(e),o=_v.subVectors(r,t).multiplyScalar(i).add(t),s=Av.subVectors(n,r).multiplyScalar(i).add(r),l=a,u=Mv.subVectors(o,a).multiplyScalar(i).add(a),c=Ev.subVectors(s,o).multiplyScalar(i).add(o),h=s,d=Cv.subVectors(c,u).multiplyScalar(i).add(u);return[e.x,e.y,l.x,l.y,u.x,u.y,d.x,d.y,c.x,c.y,h.x,h.y,n.x,n.y]}(a.v0,a.v1,a.v2,a.v3,s);return void 0!==n&&(o.v0.set(l[0],l[1]),o.v1.set(l[2],l[3]),o.v2.set(l[4],l[5]),o.v3.set(l[6],l[7])),void 0!==i&&(o.v0.set(l[6],l[7]),o.v1.set(l[8],l[9]),o.v2.set(l[10],l[11]),o.v3.set(l[12],l[13])),o}return void 0!==n&&t.v2.copy(n),void 0!==i&&t.v1.copy(i),t}clone(){let e=new Qv(this._width,this._height);return e.points=this.points.map((e=>e.clone())),e.isClosed=this.isClosed,e.roundness=this.roundness,e.isMesh2D=this.isMesh2D,e.shapeHoles=this.shapeHoles.map((e=>e.clone())),e}toJSON(){return{points:this.points.reduce(((e,t)=>e.concat(t.toJSON())),[]),shapeHoles:this.shapeHoles.map((e=>e.toJSON())),isClosed:this.isClosed,roundness:this.roundness}}fromJSON(e){var t;this.points=[],this.pointIDs=0;let r=e.points.length/7;for(let t=0;t<r;t++){let r=7*t,n=e.points[r+0],i=e.points[r+1],a=e.points[r+2],o=e.points[r+3],s=e.points[r+4],l=e.points[r+5],u=e.points[r+6],c=new wv(ge.generateUUID(),new ve(n,i));c.controls[0].position.set(a,o),c.controls[1].position.set(s,l),c.roundness=u,this.points.push(c)}return this.shapeHoles=null!=(t=e.shapeHoles)&&t.length?e.shapeHoles.map((e=>{let t=new Qv;return t.fromJSON(e),t})):[],this.isClosed=e.isClosed,this._roundness=e.roundness,this._update(),this}fromShape(e){let t=(e,t)=>{t instanceof Go&&t.v3.equals(e.position)&&e.controls[0].position.copy(t.v2)};return this.points=(e=>{let r,n,i=[];for(r=0,n=e.length;r<n;r++)e[r]instanceof Xo&&(e[r]=Lv(e[r]));for(r=0,n=e.length;r<n;r++){let n,a=e[r],o=r>0?e[r-1]:null;a instanceof Go?(n=this.createPoint(a.v0),n.controls[1].position.copy(a.v1)):a instanceof qo&&(n=this.createPoint(a.v1)),void 0!==n&&(null!==o&&t(n,o),i.push(n))}let a=e[e.length-1],o=!1;return a instanceof Go?a.v3.equals(i[0].position)&&(i[0].controls[0].position.copy(a.v2),o=!0):a instanceof qo&&a.v2.equals(i[0].position)&&(o=!0),this.isClosed=o,i})(e.curves),e instanceof as&&(this.shapeHoles=e.holes.map((e=>{let t=new Qv;return t.fromShape(e),t}))),this.update(),this}},Jv=2*Math.PI;function Zv({x:e,y:t},r,n,i,a){return{x:e*r+i,y:t*n+a}}function Kv(e,t){let r=1.5707963267948966===t?.551915024494:-1.5707963267948966===t?-.551915024494:1.3333333333333333*Math.tan(t/4),n=Math.cos(e),i=Math.sin(e),a=Math.cos(e+t),o=Math.sin(e+t);return[{x:n-i*r,y:i+n*r},{x:a+o*r,y:o-a*r},{x:a,y:o}]}function $v(e,t,r,n){let i=e*n-t*r<0?-1:1,a=Math.min(1,Math.max(-1,e*r+t*n));return i*Math.acos(a)}function ey(e,t){if(!e)throw t||"Assertion Failed!"}!function(e){e[e.ODD=0]="ODD",e[e.NONZERO=1]="NONZERO",e[e.POSITIVE=2]="POSITIVE",e[e.NEGATIVE=3]="NEGATIVE",e[e.ABS_GEQ_TWO=4]="ABS_GEQ_TWO"}(jv||(jv={})),function(e){e[e.POLYGONS=0]="POLYGONS",e[e.CONNECTED_POLYGONS=1]="CONNECTED_POLYGONS",e[e.BOUNDARY_CONTOURS=2]="BOUNDARY_CONTOURS"}(Hv||(Hv={}));var ty=function(){function e(){}return e.vertEq=function(e,t){return e.s===t.s&&e.t===t.t},e.vertLeq=function(e,t){return e.s<t.s||e.s===t.s&&e.t<=t.t},e.transLeq=function(e,t){return e.t<t.t||e.t===t.t&&e.s<=t.s},e.edgeGoesLeft=function(t){return e.vertLeq(t.Dst,t.Org)},e.edgeGoesRight=function(t){return e.vertLeq(t.Org,t.Dst)},e.vertL1dist=function(e,t){return Math.abs(e.s-t.s)+Math.abs(e.t-t.t)},e.edgeEval=function(t,r,n){ey(e.vertLeq(t,r)&&e.vertLeq(r,n));var i=r.s-t.s,a=n.s-r.s;return i+a>0?i<a?r.t-t.t+(t.t-n.t)*(i/(i+a)):r.t-n.t+(n.t-t.t)*(a/(i+a)):0},e.edgeSign=function(t,r,n){ey(e.vertLeq(t,r)&&e.vertLeq(r,n));var i=r.s-t.s,a=n.s-r.s;return i+a>0?(r.t-n.t)*i+(r.t-t.t)*a:0},e.transEval=function(t,r,n){ey(e.transLeq(t,r)&&e.transLeq(r,n));var i=r.t-t.t,a=n.t-r.t;return i+a>0?i<a?r.s-t.s+(t.s-n.s)*(i/(i+a)):r.s-n.s+(n.s-t.s)*(a/(i+a)):0},e.transSign=function(t,r,n){ey(e.transLeq(t,r)&&e.transLeq(r,n));var i=r.t-t.t,a=n.t-r.t;return i+a>0?(r.s-n.s)*i+(r.s-t.s)*a:0},e.vertCCW=function(e,t,r){return e.s*(t.t-r.t)+t.s*(r.t-e.t)+r.s*(e.t-t.t)>=0},e.interpolate=function(e,t,r,n){return(e=e<0?0:e)<=(r=r<0?0:r)?0===r?(t+n)/2:t+e/(e+r)*(n-t):n+r/(e+r)*(t-n)},e.intersect=function(t,r,n,i,a){var o,s,l;e.vertLeq(t,r)||(l=t,t=r,r=l),e.vertLeq(n,i)||(l=n,n=i,i=l),e.vertLeq(t,n)||(l=t,t=n,n=l,l=r,r=i,i=l),e.vertLeq(n,r)?e.vertLeq(r,i)?((o=e.edgeEval(t,n,r))+(s=e.edgeEval(n,r,i))<0&&(o=-o,s=-s),a.s=e.interpolate(o,n.s,s,r.s)):((o=e.edgeSign(t,n,r))+(s=-e.edgeSign(t,i,r))<0&&(o=-o,s=-s),a.s=e.interpolate(o,n.s,s,i.s)):a.s=(n.s+r.s)/2,e.transLeq(t,r)||(l=t,t=r,r=l),e.transLeq(n,i)||(l=n,n=i,i=l),e.transLeq(t,n)||(l=t,t=n,n=l,l=r,r=i,i=l),e.transLeq(n,r)?e.transLeq(r,i)?((o=e.transEval(t,n,r))+(s=e.transEval(n,r,i))<0&&(o=-o,s=-s),a.t=e.interpolate(o,n.t,s,r.t)):((o=e.transSign(t,n,r))+(s=-e.transSign(t,i,r))<0&&(o=-o,s=-s),a.t=e.interpolate(o,n.t,s,i.t)):a.t=(n.t+r.t)/2},e}(),ry=function(){this.next=null,this.prev=null,this.anEdge=null,this.trail=null,this.n=0,this.marked=!1,this.inside=!1},ny=function(){function e(e){this.side=e,this.next=null,this.Org=null,this.Sym=null,this.Onext=null,this.Lnext=null,this.Lface=null,this.activeRegion=null,this.winding=0}return Object.defineProperty(e.prototype,"Rface",{get:function(){return this.Sym.Lface},set:function(e){this.Sym.Lface=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dst",{get:function(){return this.Sym.Org},set:function(e){this.Sym.Org=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Oprev",{get:function(){return this.Sym.Lnext},set:function(e){this.Sym.Lnext=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Lprev",{get:function(){return this.Onext.Sym},set:function(e){this.Onext.Sym=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dprev",{get:function(){return this.Lnext.Sym},set:function(e){this.Lnext.Sym=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Rprev",{get:function(){return this.Sym.Onext},set:function(e){this.Sym.Onext=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dnext",{get:function(){return this.Sym.Onext.Sym},set:function(e){this.Sym.Onext.Sym=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Rnext",{get:function(){return this.Sym.Lnext.Sym},set:function(e){this.Sym.Lnext.Sym=e},enumerable:!0,configurable:!0}),e}(),iy=function(){this.next=null,this.prev=null,this.anEdge=null,this.coords=[0,0,0],this.s=0,this.t=0,this.pqHandle=0,this.n=0,this.idx=0},ay=function(){function e(){var e=new iy,t=new ry,r=new ny(0),n=new ny(1);e.next=e.prev=e,e.anEdge=null,t.next=t.prev=t,r.next=r,r.Sym=n,n.next=n,n.Sym=r,this.vHead=e,this.fHead=t,this.eHead=r,this.eHeadSym=n}return e.prototype.makeEdge_=function(e){var t=new ny(0),r=new ny(1);e.Sym.side<e.side&&(e=e.Sym);var n=e.Sym.next;return r.next=n,n.Sym.next=t,t.next=e,e.Sym.next=r,t.Sym=r,t.Onext=t,t.Lnext=r,t.Org=null,t.Lface=null,t.winding=0,t.activeRegion=null,r.Sym=t,r.Onext=r,r.Lnext=t,r.Org=null,r.Lface=null,r.winding=0,r.activeRegion=null,t},e.prototype.splice_=function(e,t){var r=e.Onext,n=t.Onext;r.Sym.Lnext=t,n.Sym.Lnext=e,e.Onext=n,t.Onext=r},e.prototype.makeVertex_=function(e,t,r){var n=e;ey(n,"Vertex can't be null!");var i=r.prev;n.prev=i,i.next=n,n.next=r,r.prev=n,n.anEdge=t;var a=t;do{a.Org=n,a=a.Onext}while(a!==t)},e.prototype.makeFace_=function(e,t,r){var n=e;ey(n,"Face can't be null");var i=r.prev;n.prev=i,i.next=n,n.next=r,r.prev=n,n.anEdge=t,n.trail=null,n.marked=!1,n.inside=r.inside;var a=t;do{a.Lface=n,a=a.Lnext}while(a!==t)},e.prototype.killEdge_=function(e){e.Sym.side<e.side&&(e=e.Sym);var t=e.next,r=e.Sym.next;t.Sym.next=r,r.Sym.next=t},e.prototype.killVertex_=function(e,t){var r=e.anEdge,n=r;do{n.Org=t,n=n.Onext}while(n!==r);var i=e.prev,a=e.next;a.prev=i,i.next=a},e.prototype.killFace_=function(e,t){var r=e.anEdge,n=r;do{n.Lface=t,n=n.Lnext}while(n!==r);var i=e.prev,a=e.next;a.prev=i,i.next=a},e.prototype.makeEdge=function(){var e=new iy,t=new iy,r=new ry,n=this.makeEdge_(this.eHead);return this.makeVertex_(e,n,this.vHead),this.makeVertex_(t,n.Sym,this.vHead),this.makeFace_(r,n,this.fHead),n},e.prototype.splice=function(e,t){var r=!1,n=!1;if(e!==t){if(t.Org!==e.Org&&(n=!0,this.killVertex_(t.Org,e.Org)),t.Lface!==e.Lface&&(r=!0,this.killFace_(t.Lface,e.Lface)),this.splice_(t,e),!n){var i=new iy;this.makeVertex_(i,t,e.Org),e.Org.anEdge=e}if(!r){var a=new ry;this.makeFace_(a,t,e.Lface),e.Lface.anEdge=e}}},e.prototype.delete=function(e){var t=e.Sym,r=!1;if(e.Lface!==e.Rface&&(r=!0,this.killFace_(e.Lface,e.Rface)),e.Onext===e)this.killVertex_(e.Org,null);else if(e.Rface.anEdge=e.Oprev,e.Org.anEdge=e.Onext,this.splice_(e,e.Oprev),!r){var n=new ry;this.makeFace_(n,e,e.Lface)}t.Onext===t?(this.killVertex_(t.Org,null),this.killFace_(t.Lface,null)):(e.Lface.anEdge=t.Oprev,t.Org.anEdge=t.Onext,this.splice_(t,t.Oprev)),this.killEdge_(e)},e.prototype.addEdgeVertex=function(e){var t=this.makeEdge_(e),r=t.Sym;this.splice_(t,e.Lnext),t.Org=e.Dst;var n=new iy;return this.makeVertex_(n,r,t.Org),t.Lface=r.Lface=e.Lface,t},e.prototype.splitEdge=function(e){var t=this.addEdgeVertex(e).Sym;return this.splice_(e.Sym,e.Sym.Oprev),this.splice_(e.Sym,t),e.Dst=t.Org,t.Dst.anEdge=t.Sym,t.Rface=e.Rface,t.winding=e.winding,t.Sym.winding=e.Sym.winding,t.idx=e.idx,t.Sym.idx=e.Sym.idx,t},e.prototype.connect=function(e,t){var r=!1,n=this.makeEdge_(e),i=n.Sym;if(t.Lface!==e.Lface&&(r=!0,this.killFace_(t.Lface,e.Lface)),this.splice_(n,e.Lnext),this.splice_(i,t),n.Org=e.Dst,i.Org=t.Org,n.Lface=i.Lface=e.Lface,e.Lface.anEdge=i,!r){var a=new ry;this.makeFace_(a,n,e.Lface)}return n},e.prototype.zapFace=function(e){var t,r,n,i,a,o=e.anEdge;r=o.Lnext;do{r=(t=r).Lnext,t.Lface=null,null===t.Rface&&(t.Onext===t?this.killVertex_(t.Org,null):(t.Org.anEdge=t.Onext,this.splice_(t,t.Oprev)),(n=t.Sym).Onext===n?this.killVertex_(n.Org,null):(n.Org.anEdge=n.Onext,this.splice_(n,n.Oprev)),this.killEdge_(t))}while(t!=o);i=e.prev,(a=e.next).prev=i,i.next=a},e.prototype.countFaceVerts_=function(e){var t=e.anEdge,r=0;do{r++,t=t.Lnext}while(t!==e.anEdge);return r},e.prototype.mergeConvexFaces=function(e){var t,r,n,i,a;for(t=this.fHead.next;t!==this.fHead;t=t.next)if(t.inside)for(a=(r=t.anEdge).Org;n=r.Lnext,(i=r.Sym)&&i.Lface&&i.Lface.inside&&this.countFaceVerts_(t)+this.countFaceVerts_(i.Lface)-2<=e&&ty.vertCCW(r.Lprev.Org,r.Org,i.Lnext.Lnext.Org)&&ty.vertCCW(i.Lprev.Org,i.Org,r.Lnext.Lnext.Org)&&(n=i.Lnext,this.delete(i),r=null,i=null),!r||r.Lnext.Org!==a;)r=n;return!0},e.prototype.check=function(){var e,t,r,n,i,a,o=this.fHead,s=this.vHead,l=this.eHead;for(t=o,t=o;(e=t.next)!==o;t=e){ey(e.prev===t),i=e.anEdge;do{ey(i.Sym!==i),ey(i.Sym.Sym===i),ey(i.Lnext.Onext.Sym===i),ey(i.Onext.Sym.Lnext===i),ey(i.Lface===e),i=i.Lnext}while(i!==e.anEdge)}for(ey(e.prev===t&&null===e.anEdge),n=s,n=s;(r=n.next)!==s;n=r){ey(r.prev===n),i=r.anEdge;do{ey(i.Sym!==i),ey(i.Sym.Sym===i),ey(i.Lnext.Onext.Sym===i),ey(i.Onext.Sym.Lnext===i),ey(i.Org===r),i=i.Onext}while(i!==r.anEdge)}for(ey(r.prev===n&&null===r.anEdge),a=l,a=l;(i=a.next)!==l;a=i)ey(i.Sym.next===a.Sym),ey(i.Sym!==i),ey(i.Sym.Sym===i),ey(null!==i.Org),ey(null!==i.Dst),ey(i.Lnext.Onext.Sym===i),ey(i.Onext.Sym.Lnext===i);ey(i.Sym.next===a.Sym&&i.Sym===this.eHeadSym&&i.Sym.Sym===i&&null===i.Org&&null===i.Dst&&null===i.Lface&&null===i.Rface)},e}(),oy=function(){this.handle=null},sy=function(){this.key=null,this.node=0},ly=function(){function e(e,t){this.leq=t,this.max=0,this.nodes=[],this.handles=[],this.initialized=!1,this.freeList=0,this.size=0,this.max=e,this.nodes=[],this.handles=[];for(var r=0;r<e+1;r++)this.nodes[r]=new oy,this.handles[r]=new sy;this.initialized=!1,this.nodes[1].handle=1,this.handles[1].key=null}return e.prototype.floatDown_=function(e){var t,r,n,i=this.nodes,a=this.handles;for(t=i[e].handle;;){if((n=e<<1)<this.size&&this.leq(a[i[n+1].handle].key,a[i[n].handle].key)&&++n,ey(n<=this.max),r=i[n].handle,n>this.size||this.leq(a[t].key,a[r].key)){i[e].handle=t,a[t].node=e;break}i[e].handle=r,a[r].node=e,e=n}},e.prototype.floatUp_=function(e){var t,r,n,i=this.nodes,a=this.handles;for(t=i[e].handle;;){if(r=i[n=e>>1].handle,0===n||this.leq(a[r].key,a[t].key)){i[e].handle=t,a[t].node=e;break}i[e].handle=r,a[r].node=e,e=n}},e.prototype.init=function(){for(var e=this.size;e>=1;--e)this.floatDown_(e);this.initialized=!0},e.prototype.min=function(){return this.handles[this.nodes[1].handle].key},e.prototype.insert=function(e){var t,r;if(2*(t=++this.size)>this.max){var n,i;for(this.max*=2,i=this.nodes.length,this.nodes.length=this.max+1,n=i;n<this.nodes.length;n++)this.nodes[n]=new oy;for(i=this.handles.length,this.handles.length=this.max+1,n=i;n<this.handles.length;n++)this.handles[n]=new sy}return 0===this.freeList?r=t:(r=this.freeList,this.freeList=this.handles[r].node),this.nodes[t].handle=r,this.handles[r].node=t,this.handles[r].key=e,this.initialized&&this.floatUp_(t),r},e.prototype.extractMin=function(){var e=this.nodes,t=this.handles,r=e[1].handle,n=t[r].key;return this.size>0&&(e[1].handle=e[this.size].handle,t[e[1].handle].node=1,t[r].key=null,t[r].node=this.freeList,this.freeList=r,--this.size,this.size>0&&this.floatDown_(1)),n},e.prototype.delete=function(e){var t,r=this.nodes,n=this.handles;ey(e>=1&&e<=this.max&&null!==n[e].key),r[t=n[e].node].handle=r[this.size].handle,n[r[t].handle].node=t,--this.size,t<=this.size&&(t<=1||this.leq(n[r[t>>1].handle].key,n[r[t].handle].key)?this.floatDown_(t):this.floatUp_(t)),n[e].key=null,n[e].node=this.freeList,this.freeList=e},e}(),uy=function(){this.eUp=null,this.nodeUp=null,this.windingNumber=0,this.inside=!1,this.sentinel=!1,this.dirty=!1,this.fixUpperEdge=!1},cy=function(){this.key=null,this.next=null,this.prev=null},hy=function(){function e(e,t){this.frame=e,this.leq=t,this.head=new cy,this.head.next=this.head,this.head.prev=this.head}return e.prototype.min=function(){return this.head.next},e.prototype.max=function(){return this.head.prev},e.prototype.insert=function(e){return this.insertBefore(this.head,e)},e.prototype.search=function(e){var t=this.head;do{t=t.next}while(null!==t.key&&!this.leq(this.frame,e,t.key));return t},e.prototype.insertBefore=function(e,t){do{e=e.prev}while(null!==e.key&&!this.leq(this.frame,e.key,t));var r=new cy;return r.key=t,r.next=e.next,e.next.prev=r,r.prev=e,e.next=r,r},e.prototype.delete=function(e){e.next.prev=e.prev,e.prev.next=e.next},e}(),dy=function(){function e(){}return e.regionBelow=function(e){return e.nodeUp.prev.key},e.regionAbove=function(e){return e.nodeUp.next.key},e.debugEvent=function(e){},e.addWinding=function(e,t){e.winding+=t.winding,e.Sym.winding+=t.Sym.winding},e.edgeLeq=function(e,t,r){var n=e.event,i=t.eUp,a=r.eUp;return i.Dst===n?a.Dst===n?ty.vertLeq(i.Org,a.Org)?ty.edgeSign(a.Dst,i.Org,a.Org)<=0:ty.edgeSign(i.Dst,a.Org,i.Org)>=0:ty.edgeSign(a.Dst,n,a.Org)<=0:a.Dst===n?ty.edgeSign(i.Dst,n,i.Org)>=0:ty.edgeEval(i.Dst,n,i.Org)>=ty.edgeEval(a.Dst,n,a.Org)},e.deleteRegion=function(e,t){t.fixUpperEdge&&ey(0===t.eUp.winding),t.eUp.activeRegion=null,e.dict.delete(t.nodeUp)},e.fixUpperEdge=function(e,t,r){ey(t.fixUpperEdge),e.mesh.delete(t.eUp),t.fixUpperEdge=!1,t.eUp=r,r.activeRegion=t},e.topLeftRegion=function(t,r){var n,i=r.eUp.Org;do{r=e.regionAbove(r)}while(r.eUp.Org===i);if(r.fixUpperEdge){if(null===(n=t.mesh.connect(e.regionBelow(r).eUp.Sym,r.eUp.Lnext)))return null;e.fixUpperEdge(t,r,n),r=e.regionAbove(r)}return r},e.topRightRegion=function(t){var r=t.eUp.Dst;do{t=e.regionAbove(t)}while(t.eUp.Dst===r);return t},e.addRegionBelow=function(e,t,r){var n=new uy;return n.eUp=r,n.nodeUp=e.dict.insertBefore(t.nodeUp,n),n.fixUpperEdge=!1,n.sentinel=!1,n.dirty=!1,r.activeRegion=n,n},e.isWindingInside=function(e,t){switch(e.windingRule){case jv.ODD:return 0!=(1&t);case jv.NONZERO:return 0!==t;case jv.POSITIVE:return t>0;case jv.NEGATIVE:return t<0;case jv.ABS_GEQ_TWO:return t>=2||t<=-2}throw new Error("Invalid winding rulle")},e.computeWinding=function(t,r){r.windingNumber=e.regionAbove(r).windingNumber+r.eUp.winding,r.inside=e.isWindingInside(t,r.windingNumber)},e.finishRegion=function(t,r){var n=r.eUp,i=n.Lface;i.inside=r.inside,i.anEdge=n,e.deleteRegion(t,r)},e.finishLeftRegions=function(t,r,n){for(var i,a=null,o=r,s=r.eUp;o!==n;){if(o.fixUpperEdge=!1,(i=(a=e.regionBelow(o)).eUp).Org!=s.Org){if(!a.fixUpperEdge){e.finishRegion(t,o);break}i=t.mesh.connect(s.Lprev,i.Sym),e.fixUpperEdge(t,a,i)}s.Onext!==i&&(t.mesh.splice(i.Oprev,i),t.mesh.splice(s,i)),e.finishRegion(t,o),s=a.eUp,o=a}return s},e.addRightEdges=function(t,r,n,i,a,o){var s,l,u,c,h=!0;u=n;do{ey(ty.vertLeq(u.Org,u.Dst)),e.addRegionBelow(t,r,u.Sym),u=u.Onext}while(u!==i);for(null===a&&(a=e.regionBelow(r).eUp.Rprev),l=r,c=a;(u=(s=e.regionBelow(l)).eUp.Sym).Org===c.Org;)u.Onext!==c&&(t.mesh.splice(u.Oprev,u),t.mesh.splice(c.Oprev,u)),s.windingNumber=l.windingNumber-u.winding,s.inside=e.isWindingInside(t,s.windingNumber),l.dirty=!0,!h&&e.checkForRightSplice(t,l)&&(e.addWinding(u,c),e.deleteRegion(t,l),t.mesh.delete(c)),h=!1,l=s,c=u;l.dirty=!0,ey(l.windingNumber-u.winding===s.windingNumber),o&&e.walkDirtyRegions(t,l)},e.spliceMergeVertices=function(e,t,r){e.mesh.splice(t,r)},e.vertexWeights=function(e,t,r){var n=ty.vertL1dist(t,e),i=ty.vertL1dist(r,e),a=.5*i/(n+i),o=.5*n/(n+i);e.coords[0]+=a*t.coords[0]+o*r.coords[0],e.coords[1]+=a*t.coords[1]+o*r.coords[1],e.coords[2]+=a*t.coords[2]+o*r.coords[2]},e.getIntersectData=function(t,r,n,i,a,o){r.coords[0]=r.coords[1]=r.coords[2]=0,r.idx=-1,e.vertexWeights(r,n,i),e.vertexWeights(r,a,o)},e.checkForRightSplice=function(t,r){var n=e.regionBelow(r),i=r.eUp,a=n.eUp;if(ty.vertLeq(i.Org,a.Org)){if(ty.edgeSign(a.Dst,i.Org,a.Org)>0)return!1;ty.vertEq(i.Org,a.Org)?i.Org!==a.Org&&(t.pq.delete(i.Org.pqHandle),e.spliceMergeVertices(t,a.Oprev,i)):(t.mesh.splitEdge(a.Sym),t.mesh.splice(i,a.Oprev),r.dirty=n.dirty=!0)}else{if(ty.edgeSign(i.Dst,a.Org,i.Org)<0)return!1;e.regionAbove(r).dirty=r.dirty=!0,t.mesh.splitEdge(i.Sym),t.mesh.splice(a.Oprev,i)}return!0},e.checkForLeftSplice=function(t,r){var n,i=e.regionBelow(r),a=r.eUp,o=i.eUp;if(ey(!ty.vertEq(a.Dst,o.Dst)),ty.vertLeq(a.Dst,o.Dst)){if(ty.edgeSign(a.Dst,o.Dst,a.Org)<0)return!1;e.regionAbove(r).dirty=r.dirty=!0,n=t.mesh.splitEdge(a),t.mesh.splice(o.Sym,n),n.Lface.inside=r.inside}else{if(ty.edgeSign(o.Dst,a.Dst,o.Org)>0)return!1;r.dirty=i.dirty=!0,n=t.mesh.splitEdge(o),t.mesh.splice(a.Lnext,o.Sym),n.Rface.inside=r.inside}return!0},e.checkForIntersect=function(t,r){var n,i,a=e.regionBelow(r),o=r.eUp,s=a.eUp,l=o.Org,u=s.Org,c=o.Dst,h=s.Dst,d=new iy;if(ey(!ty.vertEq(h,c)),ey(ty.edgeSign(c,t.event,l)<=0),ey(ty.edgeSign(h,t.event,u)>=0),ey(l!==t.event&&u!==t.event),ey(!r.fixUpperEdge&&!a.fixUpperEdge),l===u||Math.min(l.t,c.t)>Math.max(u.t,h.t))return!1;if(ty.vertLeq(l,u)){if(ty.edgeSign(h,l,u)>0)return!1}else if(ty.edgeSign(c,u,l)<0)return!1;return e.debugEvent(t),ty.intersect(c,l,h,u,d),ey(Math.min(l.t,c.t)<=d.t),ey(d.t<=Math.max(u.t,h.t)),ey(Math.min(h.s,c.s)<=d.s),ey(d.s<=Math.max(u.s,l.s)),ty.vertLeq(d,t.event)&&(d.s=t.event.s,d.t=t.event.t),n=ty.vertLeq(l,u)?l:u,ty.vertLeq(n,d)&&(d.s=n.s,d.t=n.t),ty.vertEq(d,l)||ty.vertEq(d,u)?(e.checkForRightSplice(t,r),!1):!ty.vertEq(c,t.event)&&ty.edgeSign(c,t.event,d)>=0||!ty.vertEq(h,t.event)&&ty.edgeSign(h,t.event,d)<=0?h===t.event?(t.mesh.splitEdge(o.Sym),t.mesh.splice(s.Sym,o),r=e.topLeftRegion(t,r),o=e.regionBelow(r).eUp,e.finishLeftRegions(t,e.regionBelow(r),a),e.addRightEdges(t,r,o.Oprev,o,o,!0),!0):c===t.event?(t.mesh.splitEdge(s.Sym),t.mesh.splice(o.Lnext,s.Oprev),a=r,r=e.topRightRegion(r),i=e.regionBelow(r).eUp.Rprev,a.eUp=s.Oprev,s=e.finishLeftRegions(t,a,null),e.addRightEdges(t,r,s.Onext,o.Rprev,i,!0),!0):(ty.edgeSign(c,t.event,d)>=0&&(e.regionAbove(r).dirty=r.dirty=!0,t.mesh.splitEdge(o.Sym),o.Org.s=t.event.s,o.Org.t=t.event.t),ty.edgeSign(h,t.event,d)<=0&&(r.dirty=a.dirty=!0,t.mesh.splitEdge(s.Sym),s.Org.s=t.event.s,s.Org.t=t.event.t),!1):(t.mesh.splitEdge(o.Sym),t.mesh.splitEdge(s.Sym),t.mesh.splice(s.Oprev,o),o.Org.s=d.s,o.Org.t=d.t,o.Org.pqHandle=t.pq.insert(o.Org),e.getIntersectData(t,o.Org,l,c,u,h),e.regionAbove(r).dirty=r.dirty=a.dirty=!0,!1)},e.walkDirtyRegions=function(t,r){for(var n,i,a=e.regionBelow(r);;){for(;a.dirty;)r=a,a=e.regionBelow(a);if(!r.dirty&&(a=r,null===(r=e.regionAbove(r))||!r.dirty))return;if(r.dirty=!1,n=r.eUp,i=a.eUp,n.Dst!==i.Dst&&e.checkForLeftSplice(t,r)&&(a.fixUpperEdge?(e.deleteRegion(t,a),t.mesh.delete(i),i=(a=e.regionBelow(r)).eUp):r.fixUpperEdge&&(e.deleteRegion(t,r),t.mesh.delete(n),n=(r=e.regionAbove(a)).eUp)),n.Org!==i.Org)if(n.Dst===i.Dst||r.fixUpperEdge||a.fixUpperEdge||n.Dst!==t.event&&i.Dst!==t.event)e.checkForRightSplice(t,r);else if(e.checkForIntersect(t,r))return;n.Org===i.Org&&n.Dst===i.Dst&&(e.addWinding(i,n),e.deleteRegion(t,r),t.mesh.delete(n),r=e.regionAbove(a))}},e.connectRightVertex=function(t,r,n){var i,a=n.Onext,o=e.regionBelow(r),s=r.eUp,l=o.eUp,u=!1;s.Dst!==l.Dst&&e.checkForIntersect(t,r),ty.vertEq(s.Org,t.event)&&(t.mesh.splice(a.Oprev,s),r=e.topLeftRegion(t,r),a=e.regionBelow(r).eUp,e.finishLeftRegions(t,e.regionBelow(r),o),u=!0),ty.vertEq(l.Org,t.event)&&(t.mesh.splice(n,l.Oprev),n=e.finishLeftRegions(t,o,null),u=!0),u?e.addRightEdges(t,r,n.Onext,a,a,!0):(i=ty.vertLeq(l.Org,s.Org)?l.Oprev:s,i=t.mesh.connect(n.Lprev,i),e.addRightEdges(t,r,i,i.Onext,i.Onext,!1),i.Sym.activeRegion.fixUpperEdge=!0,e.walkDirtyRegions(t,r))},e.connectLeftDegenerate=function(t,r,n){var i,a,o,s,l;return i=r.eUp,ty.vertEq(i.Org,n)?(ey(!1),void e.spliceMergeVertices(t,i,n.anEdge)):ty.vertEq(i.Dst,n)?(ey(!1),r=e.topRightRegion(r),a=s=(o=(l=e.regionBelow(r)).eUp.Sym).Onext,l.fixUpperEdge&&(ey(a!==o),e.deleteRegion(t,l),t.mesh.delete(o),o=a.Oprev),t.mesh.splice(n.anEdge,o),ty.edgeGoesLeft(a)||(a=null),void e.addRightEdges(t,r,o.Onext,s,a,!0)):(t.mesh.splitEdge(i.Sym),r.fixUpperEdge&&(t.mesh.delete(i.Onext),r.fixUpperEdge=!1),t.mesh.splice(n.anEdge,i),void e.sweepEvent(t,n))},e.connectLeftVertex=function(t,r){var n,i,a,o,s,l,u=new uy;if(u.eUp=r.anEdge.Sym,n=t.dict.search(u).key,i=e.regionBelow(n)){if(o=n.eUp,s=i.eUp,0===ty.edgeSign(o.Dst,r,o.Org))return void e.connectLeftDegenerate(t,n,r);a=ty.vertLeq(s.Dst,o.Dst)?n:i,n.inside||a.fixUpperEdge?(l=a===n?t.mesh.connect(r.anEdge.Sym,o.Lnext):t.mesh.connect(s.Dnext,r.anEdge).Sym,a.fixUpperEdge?e.fixUpperEdge(t,a,l):e.computeWinding(t,e.addRegionBelow(t,n,l)),e.sweepEvent(t,r)):e.addRightEdges(t,n,r.anEdge,r.anEdge,null,!0)}},e.sweepEvent=function(t,r){t.event=r,e.debugEvent(t);for(var n=r.anEdge;null===n.activeRegion;)if((n=n.Onext)===r.anEdge)return void e.connectLeftVertex(t,r);var i=e.topLeftRegion(t,n.activeRegion);ey(null!==i);var a=e.regionBelow(i),o=a.eUp,s=e.finishLeftRegions(t,a,null);s.Onext===o?e.connectRightVertex(t,i,s):e.addRightEdges(t,i,s.Onext,o,o,!0)},e.addSentinel=function(e,t,r,n){var i=new uy,a=e.mesh.makeEdge();a.Org.s=r,a.Org.t=n,a.Dst.s=t,a.Dst.t=n,e.event=a.Dst,i.eUp=a,i.windingNumber=0,i.inside=!1,i.fixUpperEdge=!1,i.sentinel=!0,i.dirty=!1,i.nodeUp=e.dict.insert(i)},e.initEdgeDict=function(t){t.dict=new hy(t,e.edgeLeq);var r=t.bmax[0]-t.bmin[0],n=t.bmax[1]-t.bmin[1],i=t.bmin[0]-r,a=t.bmax[0]+r,o=t.bmin[1]-n,s=t.bmax[1]+n;e.addSentinel(t,i,a,o),e.addSentinel(t,i,a,s)},e.doneEdgeDict=function(t){for(var r,n=0;null!==(r=t.dict.min().key);)r.sentinel||(ey(r.fixUpperEdge),ey(1==++n)),ey(0===r.windingNumber),e.deleteRegion(t,r)},e.removeDegenerateEdges=function(t){var r,n,i,a=t.mesh.eHead;for(r=a.next;r!==a;r=n)n=r.next,i=r.Lnext,ty.vertEq(r.Org,r.Dst)&&r.Lnext.Lnext!==r&&(e.spliceMergeVertices(t,i,r),t.mesh.delete(r),i=(r=i).Lnext),i.Lnext===r&&(i!==r&&((i===n||i===n.Sym)&&(n=n.next),t.mesh.delete(i)),(r===n||r===n.Sym)&&(n=n.next),t.mesh.delete(r))},e.initPriorityQ=function(e){var t,r,n,i=0;for(r=(n=e.mesh.vHead).next;r!==n;r=r.next)i++;for(i+=8,t=e.pq=new ly(i,ty.vertLeq),r=(n=e.mesh.vHead).next;r!==n;r=r.next)r.pqHandle=t.insert(r);return r===n&&(t.init(),!0)},e.donePriorityQ=function(e){e.pq=null},e.removeDegenerateFaces=function(t,r){var n,i,a;for(n=r.fHead.next;n!==r.fHead;n=i)i=n.next,ey((a=n.anEdge).Lnext!==a),a.Lnext.Lnext===a&&(e.addWinding(a.Onext,a),t.mesh.delete(a));return!0},e.computeInterior=function(t,r){var n,i;if(void 0===r&&(r=!0),e.removeDegenerateEdges(t),!e.initPriorityQ(t))return!1;for(e.initEdgeDict(t);null!==(n=t.pq.extractMin());){for(;null!==(i=t.pq.min())&&ty.vertEq(i,n);)i=t.pq.extractMin(),e.spliceMergeVertices(t,n.anEdge,i.anEdge);e.sweepEvent(t,n)}return t.event=t.dict.min().key.eUp.Org,e.debugEvent(t),e.doneEdgeDict(t),e.donePriorityQ(t),!!e.removeDegenerateFaces(t,t.mesh)&&(r&&t.mesh.check(),!0)},e}(),py=function(){function e(){this.mesh=new ay,this.normal=[0,0,0],this.sUnit=[0,0,0],this.tUnit=[0,0,0],this.bmin=[0,0],this.bmax=[0,0],this.windingRule=jv.ODD,this.dict=null,this.pq=null,this.event=null,this.vertexIndexCounter=0,this.vertices=[],this.vertexIndices=[],this.vertexCount=0,this.elements=[],this.elementCount=0}return e.prototype.dot_=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},e.prototype.normalize_=function(e){var t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2];if(!t)throw"Zero-size vector!";t=Math.sqrt(t),e[0]/=t,e[1]/=t,e[2]/=t},e.prototype.longAxis_=function(e){var t=0;return Math.abs(e[1])>Math.abs(e[0])&&(t=1),Math.abs(e[2])>Math.abs(e[t])&&(t=2),t},e.prototype.computeNormal_=function(e){var t,r,n,i,a,o,s=[0,0,0],l=[0,0,0],u=[0,0,0],c=[0,0,0],h=[0,0,0],d=[null,null,null],p=[null,null,null],f=this.mesh.vHead;t=f.next;for(var m=0;m<3;++m)i=t.coords[m],l[m]=i,p[m]=t,s[m]=i,d[m]=t;for(t=f.next;t!==f;t=t.next)for(var g=0;g<3;++g)(i=t.coords[g])<l[g]&&(l[g]=i,p[g]=t),i>s[g]&&(s[g]=i,d[g]=t);var v=0;if(s[1]-l[1]>s[0]-l[0]&&(v=1),s[2]-l[2]>s[v]-l[v]&&(v=2),l[v]>=s[v])return e[0]=0,e[1]=0,void(e[2]=1);for(o=0,r=p[v],n=d[v],u[0]=r.coords[0]-n.coords[0],u[1]=r.coords[1]-n.coords[1],u[2]=r.coords[2]-n.coords[2],t=f.next;t!==f;t=t.next)c[0]=t.coords[0]-n.coords[0],c[1]=t.coords[1]-n.coords[1],c[2]=t.coords[2]-n.coords[2],h[0]=u[1]*c[2]-u[2]*c[1],h[1]=u[2]*c[0]-u[0]*c[2],h[2]=u[0]*c[1]-u[1]*c[0],(a=h[0]*h[0]+h[1]*h[1]+h[2]*h[2])>o&&(o=a,e[0]=h[0],e[1]=h[1],e[2]=h[2]);o<=0&&(e[0]=e[1]=e[2]=0,e[this.longAxis_(u)]=1)},e.prototype.checkOrientation_=function(){for(var e,t,r=this.mesh.fHead,n=this.mesh.vHead,i=0,a=r.next;a!==r;a=a.next)if(!((t=a.anEdge).winding<=0))do{i+=(t.Org.s-t.Dst.s)*(t.Org.t+t.Dst.t),t=t.Lnext}while(t!==a.anEdge);if(i<0){for(e=n.next;e!==n;e=e.next)e.t=-e.t;this.tUnit[0]=-this.tUnit[0],this.tUnit[1]=-this.tUnit[1],this.tUnit[2]=-this.tUnit[2]}},e.prototype.projectPolygon_=function(){var e,t,r=this.mesh.vHead,n=[0,0,0],i=!1;n[0]=this.normal[0],n[1]=this.normal[1],n[2]=this.normal[2],!n[0]&&!n[1]&&!n[2]&&(this.computeNormal_(n),i=!0),e=this.sUnit,t=this.tUnit;var a=this.longAxis_(n);e[a]=0,e[(a+1)%3]=1,e[(a+2)%3]=0,t[a]=0,t[(a+1)%3]=0,t[(a+2)%3]=n[a]>0?1:-1;for(var o=r.next;o!==r;o=o.next)o.s=this.dot_(o.coords,e),o.t=this.dot_(o.coords,t);i&&this.checkOrientation_();for(var s=!0,l=r.next;l!==r;l=l.next)s?(this.bmin[0]=this.bmax[0]=l.s,this.bmin[1]=this.bmax[1]=l.t,s=!1):(l.s<this.bmin[0]&&(this.bmin[0]=l.s),l.s>this.bmax[0]&&(this.bmax[0]=l.s),l.t<this.bmin[1]&&(this.bmin[1]=l.t),l.t>this.bmax[1]&&(this.bmax[1]=l.t))},e.prototype.addWinding_=function(e,t){e.winding+=t.winding,e.Sym.winding+=t.Sym.winding},e.prototype.tessellateMonoRegion_=function(e,t){var r,n;if((r=t.anEdge).Lnext===r||r.Lnext.Lnext===r)throw"Mono region invalid";for(;ty.vertLeq(r.Dst,r.Org);r=r.Lprev);for(;ty.vertLeq(r.Org,r.Dst);r=r.Lnext);for(n=r.Lprev;r.Lnext!==n;)if(ty.vertLeq(r.Dst,n.Org)){for(;n.Lnext!==r&&(ty.edgeGoesLeft(n.Lnext)||ty.edgeSign(n.Org,n.Dst,n.Lnext.Dst)<=0);)n=e.connect(n.Lnext,n).Sym;n=n.Lprev}else{for(;n.Lnext!==r&&(ty.edgeGoesRight(r.Lprev)||ty.edgeSign(r.Dst,r.Org,r.Lprev.Org)>=0);)r=e.connect(r,r.Lprev).Sym;r=r.Lnext}if(n.Lnext===r)throw"Mono region invalid";for(;n.Lnext.Lnext!==r;)n=e.connect(n.Lnext,n).Sym;return!0},e.prototype.tessellateInterior_=function(e){for(var t,r=e.fHead.next;r!==e.fHead;r=t)if(t=r.next,r.inside&&!this.tessellateMonoRegion_(e,r))return!1;return!0},e.prototype.discardExterior_=function(e){for(var t,r=e.fHead.next;r!==e.fHead;r=t)t=r.next,r.inside||e.zapFace(r)},e.prototype.setWindingNumber_=function(e,t,r){for(var n,i=e.eHead.next;i!==e.eHead;i=n)n=i.next,i.Rface.inside!==i.Lface.inside?i.winding=i.Lface.inside?t:-t:r?e.delete(i):i.winding=0},e.prototype.getNeighbourFace_=function(e){return e.Rface&&e.Rface.inside?e.Rface.n:-1},e.prototype.outputPolymesh_=function(e,t,r,n){var i,a,o=0,s=0;r>3&&e.mergeConvexFaces(r);for(var l=e.vHead.next;l!==e.vHead;l=l.next)l.n=-1;for(var u=e.fHead.next;u!==e.fHead;u=u.next)if(u.n=-1,u.inside){i=u.anEdge,a=0;do{-1===(l=i.Org).n&&(l.n=s,s++),a++,i=i.Lnext}while(i!==u.anEdge);if(a>r)throw"Face vertex greater that support polygon";u.n=o,++o}for(this.elementCount=o,t===Hv.CONNECTED_POLYGONS&&(o*=2),this.elements=[],this.elements.length=o*r,this.vertexCount=s,this.vertices=[],this.vertices.length=s*n,this.vertexIndices=[],this.vertexIndices.length=s,l=e.vHead.next;l!==e.vHead;l=l.next)if(-1!==l.n){var c=l.n*n;this.vertices[c+0]=l.coords[0],this.vertices[c+1]=l.coords[1],n>2&&(this.vertices[c+2]=l.coords[2]),this.vertexIndices[l.n]=l.idx}var h=0;for(u=e.fHead.next;u!==e.fHead;u=u.next)if(u.inside){i=u.anEdge,a=0;do{l=i.Org,this.elements[h++]=l.n,a++,i=i.Lnext}while(i!==u.anEdge);for(var d=a;d<r;++d)this.elements[h++]=-1;if(t===Hv.CONNECTED_POLYGONS){i=u.anEdge;do{this.elements[h++]=this.getNeighbourFace_(i),i=i.Lnext}while(i!==u.anEdge);for(var p=a;p<r;++p)this.elements[h++]=-1}}},e.prototype.outputContours_=function(e,t){var r,n,i=0,a=0;this.vertexCount=0,this.elementCount=0;for(var o=e.fHead.next;o!==e.fHead;o=o.next)if(o.inside){n=r=o.anEdge;do{this.vertexCount++,r=r.Lnext}while(r!==n);this.elementCount++}this.elements=[],this.elements.length=2*this.elementCount,this.vertices=[],this.vertices.length=this.vertexCount*t,this.vertexIndices=[],this.vertexIndices.length=this.vertexCount;var s=0,l=0,u=0;for(i=0,o=e.fHead.next;o!==e.fHead;o=o.next)if(o.inside){a=0,n=r=o.anEdge;do{this.vertices[s++]=r.Org.coords[0],this.vertices[s++]=r.Org.coords[1],t>2&&(this.vertices[s++]=r.Org.coords[2]),this.vertexIndices[l++]=this.vertexIdCallback?this.vertexIdCallback(r):r.Org.idx,a++,r=r.Lnext}while(r!==n);this.elements[u++]=i,this.elements[u++]=a,i+=a}},e.prototype.addContour=function(e,t){null===this.mesh&&(this.mesh=new ay),e<2&&(e=2),e>3&&(e=3);for(var r=null,n=0;n<t.length;n+=e)null===r?(r=this.mesh.makeEdge(),this.mesh.splice(r,r.Sym)):(this.mesh.splitEdge(r),r=r.Lnext),r.Org.coords[0]=t[n+0],r.Org.coords[1]=t[n+1],r.Org.coords[2]=e>2?t[n+2]:0,r.Org.idx=this.vertexIndexCounter++,this.edgeCreateCallback&&this.edgeCreateCallback(r),r.winding=1,r.Sym.winding=-1},e.prototype.tesselate=function(e,t,r,n,i,a){if(void 0===e&&(e=jv.ODD),void 0===t&&(t=Hv.POLYGONS),void 0===a&&(a=!0),this.vertices=[],this.elements=[],this.vertexIndices=[],this.vertexIndexCounter=0,i&&(this.normal[0]=i[0],this.normal[1]=i[1],this.normal[2]=i[2]),this.windingRule=e,n<2&&(n=2),n>3&&(n=3),!this.mesh)return!1;this.projectPolygon_(),dy.computeInterior(this,a);var o=this.mesh;return t===Hv.BOUNDARY_CONTOURS?this.setWindingNumber_(o,1,!0):this.tessellateInterior_(o),a&&o.check(),t===Hv.BOUNDARY_CONTOURS?this.outputContours_(o,n):this.outputPolymesh_(o,t,r,n),!0},e}();function fy(e){var t=e.windingRule,r=void 0===t?jv.ODD:t,n=e.elementType,i=void 0===n?Hv.POLYGONS:n,a=e.polySize,o=void 0===a?3:a,s=e.vertexSize,l=void 0===s?2:s,u=e.normal,c=void 0===u?[0,0,1]:u,h=e.contours,d=void 0===h?[]:h,p=e.strict,f=void 0===p||p,m=e.debug,g=void 0!==m&&m;if(!d&&f)throw new Error("Contours can't be empty");if(d){var v=new py;e.edgeCreateCallback&&(v.edgeCreateCallback=e.edgeCreateCallback),e.vertexIdCallback&&(v.vertexIdCallback=e.vertexIdCallback);for(var y=0;y<d.length;y++)v.addContour(l||2,d[y]);return v.tesselate(r,i,o,l,c,f),{vertices:v.vertices,vertexIndices:v.vertexIndices,vertexCount:v.vertexCount,elements:v.elements,elementCount:v.elementCount,mesh:g?v.mesh:void 0}}}jv.ODD,jv.NONZERO,jv.POSITIVE,jv.NEGATIVE,jv.ABS_GEQ_TWO,Hv.POLYGONS,Hv.CONNECTED_POLYGONS,Hv.BOUNDARY_CONTOURS;var my=class extends wr{constructor(e,t=12,r=100,n={}){super(),this.type="ShapeGeometry",this.windingRule=jv.ODD,this.elementType=Hv.POLYGONS,this.polySize=3,this.vertexSize=2,this.strict=!0,this._drawCount=0,this._shape=e,this._curveSegments=t,this._maxCount=r,this._maxDrawCount=3*r,this._triangulationOptions=Object.assign({windingRule:jv.ODD,elementType:Hv.POLYGONS,polySize:3,vertexSize:2,strict:!0},n),this._positionAttribute=new cr(new Float32Array(3*r),3),this._normalAttribute=new cr(new Float32Array(3*r),3),this._uvAttribute=new cr(new Float32Array(2*r),2),this._indexAttribute=new cr(new Uint32Array(3*r),1),this.setAttribute("position",this._positionAttribute),this.setAttribute("normal",this._normalAttribute),this.setAttribute("uv",this._uvAttribute),this.setIndex(this._indexAttribute),this.updateFromShape()}copy(e){return this._drawCount=e.drawCount,this._maxDrawCount=e._maxDrawCount,this._maxCount=e.maxCount,super.copy(e)}get curveSegments(){return this._curveSegments}set curveSegments(e){this._curveSegments=e,this.updateFromShape()}get drawCount(){return this._drawCount}get maxDrawCount(){return this._maxDrawCount}get maxCount(){return this._maxCount}updateFromShape(){let e,t,r,n=this._shape.extractShapePointsToFlatArray([],this._curveSegments),i=this._shape.shapeHoles.map((e=>e.extractShapePointsToFlatArray([],this._curveSegments))),a=!0,o=!0;for(let e=0,i=n.length/2;e<i;e++){let i=2*e,s=n[i+0],l=n[i+1];if(void 0!==t&&s!==t&&(a=!1),void 0!==r&&l!==r&&(o=!1),t=s,r=l,!a&&!o)break}if(!a&&!o&&(e=fy({contours:[n,...i],windingRule:this._triangulationOptions.windingRule,elementType:this._triangulationOptions.elementType,polySize:this._triangulationOptions.polySize,vertexSize:this._triangulationOptions.vertexSize,strict:this._triangulationOptions.strict})),this._positionAttribute.array.fill(0),this._normalAttribute.array.fill(0),this._uvAttribute.array.fill(0),this._indexAttribute.array.fill(0),this._drawCount=0,e){let t=1/0,r=-1/0,n=1/0,i=-1/0;for(let a=0,o=e.vertexCount;a<o;a++){let o=2*a,s=e.vertices[o+0],l=e.vertices[o+1];s<t&&(t=s),s>r&&(r=s),l<n&&(n=l),l>i&&(i=l)}let a=r-t,o=i-n;for(let r=0,i=e.vertexCount;r<i;r++){let i=2*r,s=e.vertices[i+0],l=e.vertices[i+1],u=(s-t)/a,c=(l-n)/o;this._positionAttribute.setXYZ(r,s,l,0),this._normalAttribute.setXYZ(r,0,0,1),this._uvAttribute.setXY(r,u,c)}for(let t=0,r=e.elementCount;t<r;t++){let r=3*t,n=e.elements[r+0],i=e.elements[r+1],a=e.elements[r+2];this._indexAttribute.setX(r+0,n),this._indexAttribute.setX(r+1,i),this._indexAttribute.setX(r+2,a),this._drawCount+=3}}return this._positionAttribute.needsUpdate=!0,this._normalAttribute.needsUpdate=!0,this._uvAttribute.needsUpdate=!0,this._indexAttribute.needsUpdate=!0,this.setDrawRange(0,this._drawCount),this._drawCount>this._maxDrawCount}clone(){let e=new my(this._shape,this._curveSegments,this._maxCount);return e.userData=Qp(this.userData),e}},gy=class{constructor(e=256,t=!1){this.capacity=e,this.size=0,this.debug=t,this.debug&&console.log(`allocating with cap ${e}`);let r=e*gy.eSize;this.buffer=new ArrayBuffer(r);let n=Float32Array.BYTES_PER_ELEMENT,i=0;this.positions=new Float32Array(this.buffer,i*n,3*e),i+=3*e,this.normals=new Float32Array(this.buffer,i*n,3*e),i+=3*e,this.uvs=new Float32Array(this.buffer,i*n,2*e)}realloc(e,t=!1){if(e<this.size)throw Error("cannot shrink buffer");if(e<=this.capacity&&!t)return;this.debug&&console.log(`resizing from ${this.capacity}  ${e}`);let r=e*gy.eSize,n=new ArrayBuffer(r),i=Float32Array.BYTES_PER_ELEMENT,a=0,o=new Float32Array(n,a*i,3*e);a+=3*e;let s=new Float32Array(n,a*i,3*e);a+=3*e;let l=new Float32Array(n,a*i,2*e);o.set(this.positions.slice(0,3*this.size)),s.set(this.normals.slice(0,3*this.size)),l.set(this.uvs.slice(0,2*this.size)),this.buffer=n,this.positions=o,this.normals=s,this.uvs=l,this.capacity=e}get(e=1){let t=this.size+e;if(t>this.capacity){let e=this.capacity;for(;t>e;)e*=2;this.realloc(e)}let r=this.size;return this.size=t,r}reserve(e){let t=this.size+e;t>this.capacity&&this.realloc(t)}shrink(){this.debug&&console.log(`shrinking ${this.capacity}  ${this.size}`),this.realloc(this.size,!0)}},vy=gy;vy.eSize=8*Float32Array.BYTES_PER_ELEMENT;var yy=(e,t)=>([r,n])=>(n<r&&(n+=t),(e>=r?e:e+t)<=n),xy=class extends wr{constructor(e,t,r=0,n=12,i=3){super(),this.type="ShapeGeometry",this.vertexCache={},this._shape=e,this._depth=t,this._bevel=r,this._curveSegments=n,this._bevelSegmentsInput=i,r<=0?(this._bevelSize=0,this._bevelSegments=0):(this._bevelSize=Math.min(r,t/2-1e-12),this._bevelSegments=Math.floor(i));let a=this._shape.extractShapePointsToFlatArray([],n),o=this._shape.shapeHoles.map((e=>{let t=e.extractShapePointsToFlatArray([],n),r=[];for(let e=t.length-1;e>=1;e-=2){let n=t[e-1],i=t[e-0];r.push(n,i)}return r})),s=fy({windingRule:jv.ODD,elementType:Hv.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[a]}),l=fy({windingRule:jv.ODD,elementType:Hv.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[...o]});if(!s)throw new Error("error generating geometry");let u=s.elementCount;if(l){s.elementCount+=l.elementCount;for(let e=0;e<l.elements.length;e++){let t=l.elements[e],r=e%2==0?s.vertexCount:0;s.elements.push(t+r)}for(let e=0;e<l.vertexIndices.length;e++){let t=l.vertexIndices[e],r=s.vertexCount;s.vertexIndices.push(t+r)}for(let e=0;e<l.vertices.length;e++){let t=l.vertices[e];s.vertices.push(t)}}let c=1/0,h=-1/0,d=1/0,p=-1/0;for(let e=0,t=s.vertexCount;e<t;e++){let t=2*e,r=s.vertices[t+0],n=s.vertices[t+1];r<c&&(c=r),r>h&&(h=r),n<d&&(d=n),n>p&&(p=n)}this._minX=c,this._minY=d,this._width=h-c,this._height=p-d;let f=2*s.vertexCount*(2+this._bevelSegments);this._buffer=new vy(f);let m=[],g=[];for(let e=s.elementCount-1;e>=0;e--){let t=e>=u,r=2*e,i=s.elements[r+0],a=s.elements[r+1],o=i+a,l={start:i,count:a,normals:[],continuous:[],concave:[]},c=i,h=o-1,d=i+1,p=this._shape.roundedCurves.length;do{let e=c-i,r=s.vertices[2*h+0],n=s.vertices[2*h+1],u=s.vertices[2*c+0],f=s.vertices[2*c+1],m=s.vertices[2*d+0],g=s.vertices[2*d+1],v=u-r,y=f-n,x=Math.sqrt(v*v+y*y);v/=x,y/=x;let b=u-m,w=f-g,S=Math.sqrt(b*b+w*w);b/=S,w/=S,l.normals[2*e+0]=-w,l.normals[2*e+1]=b,l.concave[e]=v*w-y*b>0;let _=s.vertexIndices[c];if(Array.isArray(_))l.continuous[e]=!1;else{let[t,r]=this._shape.getCurveIndexFromVertexId(_-1,!0);if(r>0&&r<1)l.continuous[e]=!0;else{let n=1===r?t+1:t-1;n=(n+p)%p;let i=1===r?0:1,a=this._shape.roundedCurves[t].getTangent(r),o=this._shape.roundedCurves[n].getTangent(i);l.continuous[e]=a.dot(o)>.95}}t&&(l.normals[2*e+0]*=-1,l.normals[2*e+1]*=-1),[h,c,d]=[c,d,d+1],d>=o&&(d-=a)}while(d!==i+1);let f=[];f.push({bevelI:0,angle:0,size:0,boundary:{vertices:s.vertices.slice(2*i,2*o),vertexCount:a,vertexIndices:new Array(a).fill(!0).map(((e,t)=>[t,t])),elements:[0,a],elementCount:1,mesh:null},reverseMap:[],insetPoints:s.vertices.slice(2*i,2*o)});for(let e=1;e<=this._bevelSegments;e++){let r=e/this._bevelSegments*Math.PI/2,i=(1-Math.cos(r))*this._bevelSize,o=[],u=[],c=[],h=[],d=0;for(let e=0;e<a;e++){let r=2*e,p=(e-1+a)%a*2,f=s.vertices[2*l.start+r+0],m=s.vertices[2*l.start+r+1],g=-l.normals[p+0]*i,v=-l.normals[p+1]*i,y=-l.normals[r+0]*i,x=-l.normals[r+1]*i;if(l.concave[e]||!l.concave[e]&&t){let r=Math.atan2(v,g),a=Math.atan2(x,y);a>r&&(a-=2*Math.PI);let s=a-r;if(l.continuous[e]||t){let n=r+s/2,a=Math.cos(n)*i,l=Math.sin(n)*i;o[2*d+0]=f+a*(t?-1:1),o[2*d+1]=m+l*(t?-1:1),h[d]=e,d++}else{let t=Math.max(1,Math.floor(n/4*Math.abs(s)/Math.PI));for(let n=0;n<=t;n++){let a=r+s*(n/t),l=Math.cos(a)*i,u=Math.sin(a)*i;o[2*d+0]=f+l,o[2*d+1]=m+u,h[d]=e,d++}}}else o[2*d+0]=f+g,o[2*d+1]=m+v,h[d]=e,u[e]=d,d++,o[2*d+0]=f,o[2*d+1]=m,h[d]=e,d++,o[2*d+0]=f+y,o[2*d+1]=m+x,h[d]=e,c[e]=d,d++}let p=fy({windingRule:jv.POSITIVE,elementType:Hv.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[o],edgeCreateCallback:e=>{let t=e.Org.idx,r=h[t],n=h[(t+1)%h.length];e.idx=[r,n],e.Sym.idx=[n,r]},vertexIdCallback:e=>{let t=e.Lprev.idx;return[t?t[1]:0,e.idx[0]]}});if(!p)throw console.log("Error"),new Error(`error generating bevel geometry for ${e}'th loop`);if(!p.vertexCount)break;for(let e=0;e<p.vertexIndices.length;e++){let[t,r]=p.vertexIndices[e];if(t===r)continue;let n=r;r<t&&(n+=a);for(let i=t;i<n;i++){let n=i%a,o=(i+1)%a;if(!l.continuous[n]||!l.continuous[o]){p.vertexIndices[e]=[t,n],p.vertexIndices.splice(e+1,0,[o,r]),p.vertices.splice(2*(e+1),0,p.vertices[2*e],p.vertices[2*e+1]);break}}}f.push({bevelI:e,angle:r,size:i,boundary:p,reverseMap:h,insetPoints:o})}let v=(e,t,r)=>{let n=0,i=e.boundary.vertexIndices.length;for(;n<i&&r(e.boundary.vertexIndices[t]);)t=(t+1)%i,n++;return n},y=m.length;for(let e=1;e<f.length;e++){let t=f[e-1],r=f[e],n=t.boundary.vertexIndices.length,i=r.boundary.vertexIndices.length;if(!n||!i)break;let o=l.concave.length,s=0,u=yy(s,a);for(;!t.boundary.vertexIndices.filter(u).length||!r.boundary.vertexIndices.filter(u).length;)s++,u=yy(s,a);let c=t.boundary.vertexIndices.findIndex(u),h=r.boundary.vertexIndices.findIndex(u);do{c=(c+1)%n}while(u(t.boundary.vertexIndices[c]));do{h=(h+1)%i}while(u(r.boundary.vertexIndices[h]));s=(s+1)%a;let d,p,g=s,y=this.buildBevelVert(l,t,(c-1+n)%n),x=this.buildBevelVert(l,r,(h-1+i)%i),b=!1;do{u=yy(s,a);let e=v(t,c,u),f=v(r,h,u),g=b;if(b=!1,e&&!f){for(let r=0;r<e;r++)d=this.buildBevelVert(l,t,(c+r)%n,r/(e-1)),m.push(y.topN,d.topP,x.topN),m.push(d.bottomP,y.bottomN,x.bottomN),y=d;b=!0}else if(!e&&f)for(let e=0;e<f;e++)p=this.buildBevelVert(l,r,(h+e)%i,e/(f-1)),m.push(x.topN,y.topP,p.topP),m.push(y.bottomP,x.bottomN,p.bottomP),x=p;else if(e&&f)if(d=this.buildBevelVert(l,t,c,0),p=this.buildBevelVert(l,r,h,0),g?(m.push(y.topN,p.topP,x.topN),m.push(y.topN,d.topP,p.topP),m.push(p.bottomP,y.bottomN,x.bottomN),m.push(d.bottomP,y.bottomN,p.bottomP)):(m.push(y.topN,d.topP,x.topN),m.push(x.topN,d.topP,p.topP),m.push(d.bottomP,y.bottomN,x.bottomN),m.push(d.bottomP,x.bottomN,p.bottomP)),y=d,x=p,e===f)for(let a=1;a<e;a++)d=this.buildBevelVert(l,t,(c+a)%n,a/(e-1)),p=this.buildBevelVert(l,r,(h+a)%i,a/(f-1)),m.push(y.topN,d.topP,x.topN),m.push(x.topN,d.topP,p.topP),m.push(d.bottomP,y.bottomN,x.bottomN),m.push(d.bottomP,x.bottomN,p.bottomP),y=d,x=p;else if(e>f){let a=e/f,o=0;for(let s=1;s<e;s++)d=this.buildBevelVert(l,t,(c+s)%n,s/(e-1)),m.push(y.topN,d.topP,x.topN),m.push(d.bottomP,y.bottomN,x.bottomN),y=d,s>(o+1)*a&&(o++,p=this.buildBevelVert(l,r,(h+o)%i,o/(f-1)),m.push(x.topN,d.topP,p.topP),m.push(d.bottomP,x.bottomN,p.bottomP),x=p)}else{let a=f/e,o=0;for(let s=1;s<f;s++)p=this.buildBevelVert(l,r,(h+s)%i,s/(f-1)),m.push(x.topN,d.topP,p.topP),m.push(d.bottomP,x.bottomN,p.bottomP),x=p,s>(o+1)*a&&(o++,d=this.buildBevelVert(l,t,(c+o)%n,o/(e-1)),m.push(y.topN,d.topP,x.topN),m.push(d.bottomP,y.bottomN,x.bottomN),y=d)}c=(c+e)%n,h=(h+f)%i,s=(s+1)%o}while(s!==g)}{let e=f[0];for(let t=0,r=e.boundary.vertexCount;t<r;t++){let n=this.buildBevelVert(l,e,t),i=this.buildBevelVert(l,e,(t+1)%r);m.push(i.topP,n.topN,n.bottomN),m.push(i.topP,n.bottomN,i.bottomP)}}if(t){let e=[];for(let t=m.length-1;t>=y+2;t-=3){let r=m[t-2],n=m[t-1],i=m[t-0];e.push(i,n,r)}m.splice(y,m.length-y,...e)}if(t){let e=[];for(let t=f[f.length-1].boundary.vertices.length-1;t>=1;t-=2){let r=f[f.length-1].boundary.vertices[t-1],n=f[f.length-1].boundary.vertices[t-0];e.push(r,n)}g.push(e)}if(!t){let e=f[f.length-1],t=fy({windingRule:f.length>1?jv.POSITIVE:jv.ODD,elementType:Hv.POLYGONS,vertexSize:2,strict:!0,contours:[e.insetPoints,...g]});if(!t)throw new Error("Error generating geometry for surface");for(let e=0;e<3*t.elementCount;e+=3){let r=this.buildSurfaceVert(t,t.elements[e+0]),n=this.buildSurfaceVert(t,t.elements[e+1]),i=this.buildSurfaceVert(t,t.elements[e+2]);m.push(r.top,n.top,i.top),m.push(i.bottom,n.bottom,r.bottom)}}this.vertexCache={}}this._buffer.shrink();let v=new cr(Uint32Array.from(m),1),y=new cr(this._buffer.positions,3),x=new cr(this._buffer.normals,3),b=new cr(this._buffer.uvs,2);y.needsUpdate=!0,x.needsUpdate=!0,b.needsUpdate=!0,v.needsUpdate=!0,this.setAttribute("position",y),this.setAttribute("normal",x),this.setAttribute("uv",b),this.setIndex(v)}buildSurfaceVert(e,t){let r=t.toString();if(r in this.vertexCache)return this.vertexCache[r];let n=e.vertices[2*t+0],i=e.vertices[2*t+1],a=(n-this._minX)/this._width,o=(i-this._minY)/this._height,s=this._buffer.get(2),l=3*s,u=2*s,c={top:s+0,bottom:s+1};return this._buffer.positions[l+0]=n,this._buffer.positions[l+1]=i,this._buffer.positions[l+2]=this._depth,this._buffer.normals[l+0]=0,this._buffer.normals[l+1]=0,this._buffer.normals[l+2]=1,this._buffer.uvs[u+0]=a,this._buffer.uvs[u+1]=o,this._buffer.positions[l+3]=n,this._buffer.positions[l+4]=i,this._buffer.positions[l+5]=0,this._buffer.normals[l+3]=0,this._buffer.normals[l+4]=0,this._buffer.normals[l+5]=-1,this._buffer.uvs[u+2]=a,this._buffer.uvs[u+3]=o,this.vertexCache[r]=c,c}buildBevelVert(e,t,r,n=1){let i=`${t.bevelI}:${r}`;if(i in this.vertexCache)return this.vertexCache[i];let a,o,s,l,[u,c]=t.boundary.vertexIndices[r];u!==c?(o=u,a=c,l=!1,s=e.continuous[o]&&e.continuous[a]):(a=u,o=(a-1+e.count)%e.count,l=e.concave[a]&&t.bevelI>0,s=e.continuous[a]||l);let h=Math.cos(t.angle),d=Math.sin(t.angle),p=2*r,f=2*a,m=2*o,g=t.boundary.vertices[p+0],v=t.boundary.vertices[p+1],y=(1-d)*this._bevelSize,x=(g-this._minX)/this._width,b=(v-this._minY)/this._height,w=e.normals[f+0],S=e.normals[f+1],_=e.normals[m+0],A=e.normals[m+1];if(l){w+=(_-w)*(1-n),S+=(A-S)*(1-n);let e=Math.sqrt(w*w+S*S);w/=e,S/=e}let M=this._buffer.get(s?2:4),E=3*M,C=2*M,T={i:r,fi:a,topP:M+0,topN:M+0,bottomP:M+1,bottomN:M+1};return this._buffer.positions[E+0]=g,this._buffer.positions[E+1]=v,this._buffer.positions[E+2]=this._depth-y,this._buffer.normals[E+0]=w*h,this._buffer.normals[E+1]=S*h,this._buffer.normals[E+2]=d,this._buffer.uvs[C+0]=x,this._buffer.uvs[C+1]=b,this._buffer.positions[E+3]=g,this._buffer.positions[E+4]=v,this._buffer.positions[E+5]=y,this._buffer.normals[E+3]=w*h,this._buffer.normals[E+4]=S*h,this._buffer.normals[E+5]=-d,this._buffer.uvs[C+2]=b,this._buffer.uvs[C+3]=x,s||(M+=2,E+=6,C+=4,T.topP=M+0,T.bottomP=M+1,this._buffer.positions[E+0]=g,this._buffer.positions[E+1]=v,this._buffer.positions[E+2]=this._depth-y,this._buffer.normals[E+0]=_*h,this._buffer.normals[E+1]=A*h,this._buffer.normals[E+2]=d,this._buffer.uvs[C+0]=x,this._buffer.uvs[C+1]=b,this._buffer.positions[E+3]=g,this._buffer.positions[E+4]=v,this._buffer.positions[E+5]=y,this._buffer.normals[E+3]=_*h,this._buffer.normals[E+4]=A*h,this._buffer.normals[E+5]=-d,this._buffer.uvs[C+2]=b,this._buffer.uvs[C+3]=x),this.vertexCache[i]=T,T}clone(){let e=new xy(this._shape,this._depth,this._bevel,this._curveSegments,this._bevelSegmentsInput);return e.userData=Qp(this.userData),e}},by=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r,n,i,a,o,s,l;let u=Object.assign({},null!=(r=null==t?void 0:t.parameters)?r:{width:100,subdivisions:40,roundness:0,extrudeDepth:0,surfaceMaxCount:100,extrudeBevelSize:0,extrudeBevelSegments:3},e.parameters),c=Math.abs(u.width),h=Math.abs(null!=(n=u.height)?n:u.width),d=Math.abs(void 0!==u.depth&&0===u.depth&&u.extrudeDepth>0?u.extrudeDepth:null!=(i=u.depth)?i:0),p=null!=(a=e.shape)?a:null==t?void 0:t.shape,f=null!=(o=null==p?void 0:p.roundness)?o:u.roundness;void 0!==p&&(p instanceof Qv?(p.width!==c||p.height!==h)&&p.applySize(c,h):p=new Qv(c,h).fromJSON(p),void 0!==(null==(s=e.parameters)?void 0:s.roundness)&&(null==(l=e.parameters)?void 0:l.roundness)>0&&p.update(!1));let m=null!=p?p:new Qv(c,h);return{parameters:Object.assign(u,{width:c,height:h,depth:d,extrudeDepth:d,roundness:f}),shape:m}}static build(e){let t,{extrudeDepth:r,extrudeBevelSize:n,extrudeBevelSegments:i,subdivisions:a,roundness:o,surfaceMaxCount:s}=e.parameters;return e.shape.roundness=o,t=r<=0?new my(e.shape,a,s):new xy(e.shape,r,n,a,i),Object.assign(t,{userData:v(g({},e),{type:"VectorGeometry"})})}},wy=2*Math.PI;function Sy(e,t,r,n,i,a){let o=-t/r;for(let t=0;t<=r;t++){let r=o*t,a=Math.sin(r)*n,s=Math.cos(r)*i;e.addPoint(_y(a,s))}return t<wy?a>0?My(e,n,i,a):e.addPoint(_y(0,0)):(e.removePoint(e.points[e.points.length-1]),a>0&&Ey(e,n,i,a)),1}function _y(e,t){return new wv(ge.generateUUID(),new ve(e,t))}function Ay(e,t,r,n,i,a){let o=_y(e,t);return o.controls[0].position.set(r,n),o.controls[1].position.set(i,a),o}function My(e,t,r,n){Cy(e,t,r,n).forEach((t=>e.addPoint(t)))}function Ey(e,t,r,n){let i=Cy(e,t,r,n),a=new Qv;i.forEach((e=>a.addPoint(e))),a.isClosed=!0,e.shapeHoles.push(a)}function Cy(e,t,r,n){let i=n*t/100,a=i*(Math.abs(r)/Math.abs(t)),o=new ve(i/t,a/r),s=e.points.map((e=>{let t=e.clone();return t.uuid=ge.generateUUID(),t})).reverse();return s.forEach((e=>{e.position.multiply(o);let t=e.controls[0].position.clone().multiply(o),r=e.controls[1].position.clone().multiply(o);e.controls[0].position.copy(r),e.controls[1].position.copy(t)})),s}var Ty=class extends wr{constructor(e=!0,t=1,r=1,n=1,i=1,a=1,o=1,s=1,l=1,u=1,c=1,h=1){super();let d=e&&1===a;d&&(h=0),c>100&&(c=100);let p,f,m,g,v,y,x,b,w=()=>new We,S=new We,_=w(),A=w(),M=w(),E=w(),C=w(),T=w(),D=w(),L=w(),P=w(),R=w(),O=w(),k=r-2*s+.001,I=k/a,B=Math.ceil(o*a),z=B+1,N=k/B,F=-k/2,U=u+1,j=2*Math.PI/u,H=Math.PI/2/h,V=Math.min((1-c/100)*s,s-.01),G=s-V,W=0,q=2*h+2,Y=U*q/2,X=Y+U*z,Q=U*(z+q),[J,Z,K]=[3,3,2].map((e=>Array(Q*e).fill(0))),$=[],ee=i-s;function te(t,r){let n=Math.PI/2;y=r*N,b=2*Math.PI*(y%I)/I+n,y+=F,x=Math.sin(b)*ee,v=Math.cos(b)*ee,e?t.set(v,x,y):t.set(v,y,x)}te(S,-1e-10),te(_,0),E.copy(S),te(S,1);let re=S.distanceTo(_),ne=G+V,ie=re*B+2*ne,ae=V,oe=ie-ne;for(let t=0;t<=B;t++){te(A,t),O.subVectors(A,E).normalize(),E.copy(A),P.copy(A).setComponent(+e+1,0).normalize(),R.crossVectors(O,P).normalize();let r=0===t,n=t===B,i=r?3*Math.PI/2:H,a=r?ae:oe,o=r?U:X,l=r?0:Q-U,c=O.clone().multiplyScalar(r?-G:G).add(A),p=O.clone().multiplyScalar(r?-1:1).normalize();for(let e=0;e<U;e++){let f=e*j;if(C.addVectors(S.copy(P).multiplyScalar(s*Math.cos(f)),_.copy(R).multiplyScalar(s*Math.sin(f))),T.copy(C).normalize(),r||n){d||(W=l+e,[0,1,2].forEach((e=>{J[3*W+e]=c.getComponent(e),Z[3*W+e]=p.getComponent(e)})),K[2*W]=+n,K[2*W+1]=e/u),_.copy(T).multiplyScalar(V),M.addVectors(A,_);for(let t=0;t<h;t++){let n=t*H+i;D.addVectors(S.copy(O).multiplyScalar(G*Math.sin(n)),_.copy(T).multiplyScalar(G*Math.cos(n))),L.copy(D).normalize(),_.addVectors(M,D),D.normalize(),W=o+t*U+e,[0,1,2].forEach((e=>{J[3*W+e]=_.getComponent(e),Z[3*W+e]=L.getComponent(e)}));let s=+r+Math.sin(n);K[2*W]=(a+G*s)/ie,K[2*W+1]=e/u}}_.addVectors(A,C),W=Y+t*U+e,[0,1,2].forEach((e=>{J[3*W+e]=_.getComponent(e),Z[3*W+e]=T.getComponent(e)})),K[2*W]=(ne+t*re)/ie,K[2*W+1]=e/u}}let se=z+2*h+2,[le,ue]=d?[1,1+z-1]:[0,se-1];for(let e=le;e<=ue-1;e++){let t=d&&e===ue-1;for(let r=0;r<U-1;r++)p=e*U+r,f=p+1,m=(t?r:p)+U,g=(t?r+1:f)+U,0===e?$.push(f,g,m):e===se-2?$.push(p,f,m):$.push(p,f,m,f,g,m)}this.setIndex($),this.setAttribute("position",new pr(J,3)),this.setAttribute("normal",new pr(Z,3)),this.setAttribute("uv",new pr(K,2))}},Dy=class extends gv{constructor(e=1,t=.2,r=4){let n=(1+Math.sqrt(5))/2,i="IcosahedronGeometry";super([-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],i,e,t,r),this.type=i}static fromJSON(e){return new Dy(e.radius,e.corner,e.cornerSides)}},Ly=new St,Py=new Yt,Ry=new We,Oy=class extends ae{constructor(){super(),this.uuid=ge.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}applyMatrix4(e){let t=(new ye).getNormalMatrix(e);for(let t=0,r=this.vertices.length;t<r;t++)this.vertices[t].applyMatrix4(e);for(let e=0,r=this.faces.length;e<r;e++){let r=this.faces[e];r.normal.applyMatrix3(t).normalize();for(let e=0,n=r.vertexNormals.length;e<n;e++)r.vertexNormals[e].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this}rotateX(e){return Ly.makeRotationX(e),this.applyMatrix4(Ly),this}rotateY(e){return Ly.makeRotationY(e),this.applyMatrix4(Ly),this}rotateZ(e){return Ly.makeRotationZ(e),this.applyMatrix4(Ly),this}translate(e,t,r){return Ly.makeTranslation(e,t,r),this.applyMatrix4(Ly),this}scale(e,t,r){return Ly.makeScale(e,t,r),this.applyMatrix4(Ly),this}lookAt(e){return Py.lookAt(e),Py.updateMatrix(),this.applyMatrix4(Py.matrix),this}fromBufferGeometry(e){let t=this,r=null!==e.index?e.index:void 0,n=e.attributes;if(void 0===n.position)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;let i=n.position,a=n.normal,o=n.color,s=n.uv,l=n.uv2;void 0!==l&&(this.faceVertexUvs[1]=[]);for(let e=0;e<i.count;e++)t.vertices.push((new We).fromBufferAttribute(i,e)),void 0!==o&&t.colors.push((new Oe).fromBufferAttribute(o,e));function u(e,r,n,i){let u=void 0===o?[]:[t.colors[e].clone(),t.colors[r].clone(),t.colors[n].clone()],c=void 0===a?[]:[(new We).fromBufferAttribute(a,e),(new We).fromBufferAttribute(a,r),(new We).fromBufferAttribute(a,n)],h=new Iy(e,r,n,c,u,i);t.faces.push(h),void 0!==s&&t.faceVertexUvs[0].push([(new ve).fromBufferAttribute(s,e),(new ve).fromBufferAttribute(s,r),(new ve).fromBufferAttribute(s,n)]),void 0!==l&&t.faceVertexUvs[1].push([(new ve).fromBufferAttribute(l,e),(new ve).fromBufferAttribute(l,r),(new ve).fromBufferAttribute(l,n)])}let c=e.groups;if(c.length>0)for(let e=0;e<c.length;e++){let t=c[e],n=t.start;for(let e=n,i=n+t.count;e<i;e+=3)void 0!==r?u(r.getX(e),r.getX(e+1),r.getX(e+2),t.materialIndex):u(e,e+1,e+2,t.materialIndex)}else if(void 0!==r)for(let e=0;e<r.count;e+=3)u(r.getX(e),r.getX(e+1),r.getX(e+2));else for(let e=0;e<i.count;e+=3)u(e,e+1,e+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ry).negate(),this.translate(Ry.x,Ry.y,Ry.z),this}normalize(){this.computeBoundingSphere();let e=this.boundingSphere.center,t=this.boundingSphere.radius,r=0===t?1:1/t,n=new St;return n.set(r,0,0,-r*e.x,0,r,0,-r*e.y,0,0,r,-r*e.z,0,0,0,1),this.applyMatrix4(n),this}computeFaceNormals(){let e=new We,t=new We;for(let r=0,n=this.faces.length;r<n;r++){let n=this.faces[r],i=this.vertices[n.a],a=this.vertices[n.b],o=this.vertices[n.c];e.subVectors(o,a),t.subVectors(i,a),e.cross(t),e.normalize(),n.normal.copy(e)}}computeVertexNormals(e=!0){let t=new Array(this.vertices.length);for(let e=0,r=this.vertices.length;e<r;e++)t[e]=new We;if(e){let e=new We,r=new We;for(let n=0,i=this.faces.length;n<i;n++){let i=this.faces[n],a=this.vertices[i.a],o=this.vertices[i.b],s=this.vertices[i.c];e.subVectors(s,o),r.subVectors(a,o),e.cross(r),t[i.a].add(e),t[i.b].add(e),t[i.c].add(e)}}else{this.computeFaceNormals();for(let e=0,r=this.faces.length;e<r;e++){let r=this.faces[e];t[r.a].add(r.normal),t[r.b].add(r.normal),t[r.c].add(r.normal)}}for(let e=0,r=this.vertices.length;e<r;e++)t[e].normalize();for(let e=0,r=this.faces.length;e<r;e++){let r=this.faces[e],n=r.vertexNormals;3===n.length?(n[0].copy(t[r.a]),n[1].copy(t[r.b]),n[2].copy(t[r.c])):(n[0]=t[r.a].clone(),n[1]=t[r.b].clone(),n[2]=t[r.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}computeFlatVertexNormals(){this.computeFaceNormals();for(let e=0,t=this.faces.length;e<t;e++){let t=this.faces[e],r=t.vertexNormals;3===r.length?(r[0].copy(t.normal),r[1].copy(t.normal),r[2].copy(t.normal)):(r[0]=t.normal.clone(),r[1]=t.normal.clone(),r[2]=t.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}computeMorphNormals(){for(let e=0,t=this.faces.length;e<t;e++){let t=this.faces[e];t.__originalFaceNormal?t.__originalFaceNormal.copy(t.normal):t.__originalFaceNormal=t.normal.clone(),t.__originalVertexNormals||(t.__originalVertexNormals=[]);for(let e=0,r=t.vertexNormals.length;e<r;e++)t.__originalVertexNormals[e]?t.__originalVertexNormals[e].copy(t.vertexNormals[e]):t.__originalVertexNormals[e]=t.vertexNormals[e].clone()}let e=new Oy;e.faces=this.faces;for(let t=0,r=this.morphTargets.length;t<r;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];let e=this.morphNormals[t].faceNormals,r=this.morphNormals[t].vertexNormals;for(let t=0,n=this.faces.length;t<n;t++){let t=new We,n={a:new We,b:new We,c:new We};e.push(t),r.push(n)}}let r=this.morphNormals[t];e.vertices=this.morphTargets[t].vertices,e.computeFaceNormals(),e.computeVertexNormals();for(let e=0,t=this.faces.length;e<t;e++){let t=this.faces[e],n=r.faceNormals[e],i=r.vertexNormals[e];n.copy(t.normal),i.a.copy(t.vertexNormals[0]),i.b.copy(t.vertexNormals[1]),i.c.copy(t.vertexNormals[2])}}for(let e=0,t=this.faces.length;e<t;e++){let t=this.faces[e];t.normal=t.__originalFaceNormal,t.vertexNormals=t.__originalVertexNormals}}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Xe),this.boundingBox.setFromPoints(this.vertices)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new pt),this.boundingSphere.setFromPoints(this.vertices)}merge(e,t,r=0){if(!e||!e.isGeometry)return void console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);let n,i=this.vertices.length,a=this.vertices,o=e.vertices,s=this.faces,l=e.faces,u=this.colors,c=e.colors;void 0!==t&&(n=(new ye).getNormalMatrix(t));for(let e=0,r=o.length;e<r;e++){let r=o[e].clone();void 0!==t&&r.applyMatrix4(t),a.push(r)}for(let e=0,t=c.length;e<t;e++)u.push(c[e].clone());for(let e=0,t=l.length;e<t;e++){let t,a,o=l[e],u=o.vertexNormals,c=o.vertexColors,h=new Iy(o.a+i,o.b+i,o.c+i);h.normal.copy(o.normal),void 0!==n&&h.normal.applyMatrix3(n).normalize();for(let e=0,r=u.length;e<r;e++)t=u[e].clone(),void 0!==n&&t.applyMatrix3(n).normalize(),h.vertexNormals.push(t);h.color.copy(o.color);for(let e=0,t=c.length;e<t;e++)a=c[e],h.vertexColors.push(a.clone());h.materialIndex=o.materialIndex+r,s.push(h)}for(let t=0,r=e.faceVertexUvs.length;t<r;t++){let r=e.faceVertexUvs[t];void 0===this.faceVertexUvs[t]&&(this.faceVertexUvs[t]=[]);for(let e=0,n=r.length;e<n;e++){let n=r[e],i=[];for(let e=0,t=n.length;e<t;e++)i.push(n[e].clone());this.faceVertexUvs[t].push(i)}}}mergeMesh(e){e&&e.isMesh?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)}mergeVertices(e=4){let t={},r=[],n=[],i=Math.pow(10,e);for(let e=0,a=this.vertices.length;e<a;e++){let a=this.vertices[e],o=Math.round(a.x*i)+"_"+Math.round(a.y*i)+"_"+Math.round(a.z*i);void 0===t[o]?(t[o]=e,r.push(this.vertices[e]),n[e]=r.length-1):n[e]=n[t[o]]}let a=[];for(let e=0,t=this.faces.length;e<t;e++){let t=this.faces[e];t.a=n[t.a],t.b=n[t.b],t.c=n[t.c];let r=[t.a,t.b,t.c];for(let t=0;t<3;t++)if(r[t]===r[(t+1)%3]){a.push(e);break}}for(let e=a.length-1;e>=0;e--){let t=a[e];this.faces.splice(t,1);for(let e=0,r=this.faceVertexUvs.length;e<r;e++)this.faceVertexUvs[e].splice(t,1)}let o=this.vertices.length-r.length;return this.vertices=r,o}setFromPoints(e){this.vertices=[];for(let t=0,r=e.length;t<r;t++){let r=e[t];this.vertices.push(new We(r.x,r.y,r.z||0))}return this}sortFacesByMaterialIndex(){let e=this.faces,t=e.length;for(let r=0;r<t;r++)e[r]._id=r;e.sort((function(e,t){return e.materialIndex-t.materialIndex}));let r,n,i=this.faceVertexUvs[0],a=this.faceVertexUvs[1];i&&i.length===t&&(r=[]),a&&a.length===t&&(n=[]);for(let o=0;o<t;o++){let t=e[o]._id;r&&r.push(i[t]),n&&n.push(a[t])}r&&(this.faceVertexUvs[0]=r),n&&(this.faceVertexUvs[1]=n)}toJSON(){let e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){let t=this.parameters;for(let r in t)void 0!==t[r]&&(e[r]=t[r]);return e}let t=[];for(let e=0;e<this.vertices.length;e++){let r=this.vertices[e];t.push(r.x,r.y,r.z)}let r=[],n=[],i={},a=[],o={},s=[],l={};for(let e=0;e<this.faces.length;e++){let t=this.faces[e],n=!0,i=!1,a=void 0!==this.faceVertexUvs[0][e],o=t.normal.length()>0,s=t.vertexNormals.length>0,l=1!==t.color.r||1!==t.color.g||1!==t.color.b,p=t.vertexColors.length>0,f=0;if(f=u(f,0,0),f=u(f,1,n),f=u(f,2,i),f=u(f,3,a),f=u(f,4,o),f=u(f,5,s),f=u(f,6,l),f=u(f,7,p),r.push(f),r.push(t.a,t.b,t.c),r.push(t.materialIndex),a){let t=this.faceVertexUvs[0][e];r.push(d(t[0]),d(t[1]),d(t[2]))}if(o&&r.push(c(t.normal)),s){let e=t.vertexNormals;r.push(c(e[0]),c(e[1]),c(e[2]))}if(l&&r.push(h(t.color)),p){let e=t.vertexColors;r.push(h(e[0]),h(e[1]),h(e[2]))}}function u(e,t,r){return r?e|1<<t:e&~(1<<t)}function c(e){let t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==i[t]||(i[t]=n.length/3,n.push(e.x,e.y,e.z)),i[t]}function h(e){let t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==o[t]||(o[t]=a.length,a.push(e.getHex())),o[t]}function d(e){let t=e.x.toString()+e.y.toString();return void 0!==l[t]||(l[t]=s.length/2,s.push(e.x,e.y)),l[t]}return e.data={},e.data.vertices=t,e.data.normals=n,a.length>0&&(e.data.colors=a),s.length>0&&(e.data.uvs=[s]),e.data.faces=r,e}clone(){return(new Oy).copy(this)}copy(e){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;let t=e.vertices;for(let e=0,r=t.length;e<r;e++)this.vertices.push(t[e].clone());let r=e.colors;for(let e=0,t=r.length;e<t;e++)this.colors.push(r[e].clone());let n=e.faces;for(let e=0,t=n.length;e<t;e++)this.faces.push(n[e].clone());for(let t=0,r=e.faceVertexUvs.length;t<r;t++){let r=e.faceVertexUvs[t];void 0===this.faceVertexUvs[t]&&(this.faceVertexUvs[t]=[]);for(let e=0,n=r.length;e<n;e++){let n=r[e],i=[];for(let e=0,t=n.length;e<t;e++){let t=n[e];i.push(t.clone())}this.faceVertexUvs[t].push(i)}}let i=e.morphTargets;for(let e=0,t=i.length;e<t;e++){let t={};if(t.name=i[e].name,void 0!==i[e].vertices){t.vertices=[];for(let r=0,n=i[e].vertices.length;r<n;r++)t.vertices.push(i[e].vertices[r].clone())}if(void 0!==i[e].normals){t.normals=[];for(let r=0,n=i[e].normals.length;r<n;r++)t.normals.push(i[e].normals[r].clone())}this.morphTargets.push(t)}let a=e.morphNormals;for(let e=0,t=a.length;e<t;e++){let t={};if(void 0!==a[e].vertexNormals){t.vertexNormals=[];for(let r=0,n=a[e].vertexNormals.length;r<n;r++){let n=a[e].vertexNormals[r],i={};i.a=n.a.clone(),i.b=n.b.clone(),i.c=n.c.clone(),t.vertexNormals.push(i)}}if(void 0!==a[e].faceNormals){t.faceNormals=[];for(let r=0,n=a[e].faceNormals.length;r<n;r++)t.faceNormals.push(a[e].faceNormals[r].clone())}this.morphNormals.push(t)}let o=e.skinWeights;for(let e=0,t=o.length;e<t;e++)this.skinWeights.push(o[e].clone());let s=e.skinIndices;for(let e=0,t=s.length;e<t;e++)this.skinIndices.push(s[e].clone());let l=e.lineDistances;for(let e=0,t=l.length;e<t;e++)this.lineDistances.push(l[e]);let u=e.boundingBox;null!==u&&(this.boundingBox=u.clone());let c=e.boundingSphere;return null!==c&&(this.boundingSphere=c.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}toBufferGeometry(){let e=(new ky).fromGeometry(this),t=new wr,r=new Float32Array(3*e.vertices.length);if(t.setAttribute("position",new cr(r,3).copyVector3sArray(e.vertices)),e.normals.length>0){let r=new Float32Array(3*e.normals.length);t.setAttribute("normal",new cr(r,3).copyVector3sArray(e.normals))}if(e.colors.length>0){let r=new Float32Array(3*e.colors.length);t.setAttribute("color",new cr(r,3).copyColorsArray(e.colors))}if(e.uvs.length>0){let r=new Float32Array(2*e.uvs.length);t.setAttribute("uv",new cr(r,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){let r=new Float32Array(2*e.uvs2.length);t.setAttribute("uv2",new cr(r,2).copyVector2sArray(e.uvs2))}t.groups=e.groups;for(let r in e.morphTargets){let n=[],i=e.morphTargets[r];for(let e=0,t=i.length;e<t;e++){let t=i[e],r=new pr(3*t.data.length,3);r.name=t.name,n.push(r.copyVector3sArray(t.data))}t.morphAttributes[r]=n}if(e.skinIndices.length>0){let r=new pr(4*e.skinIndices.length,4);t.setAttribute("skinIndex",r.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){let r=new pr(4*e.skinWeights.length,4);t.setAttribute("skinWeight",r.copyVector4sArray(e.skinWeights))}return null!==e.boundingSphere&&(t.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(t.boundingBox=e.boundingBox.clone()),t}computeTangents(){console.error("THREE.Geometry: .computeTangents() has been removed.")}computeLineDistances(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}applyMatrix(e){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}dispose(){this.dispatchEvent({type:"dispose"})}static createBufferGeometryFromObject(e){let t=new wr,r=e.geometry;if(e.isPoints||e.isLine){let e=new pr(3*r.vertices.length,3),n=new pr(3*r.colors.length,3);if(t.setAttribute("position",e.copyVector3sArray(r.vertices)),t.setAttribute("color",n.copyColorsArray(r.colors)),r.lineDistances&&r.lineDistances.length===r.vertices.length){let e=new pr(r.lineDistances.length,1);t.setAttribute("lineDistance",e.copyArray(r.lineDistances))}null!==r.boundingSphere&&(t.boundingSphere=r.boundingSphere.clone()),null!==r.boundingBox&&(t.boundingBox=r.boundingBox.clone())}else e.isMesh&&(t=r.toBufferGeometry());return t}};Oy.prototype.isGeometry=!0;var ky=class{constructor(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}computeGroups(e){let t,r,n,i=[],a=e.faces;for(r=0;r<a.length;r++){let e=a[r];e.materialIndex!==n&&(n=e.materialIndex,void 0!==t&&(t.count=3*r-t.start,i.push(t)),t={start:3*r,materialIndex:n})}void 0!==t&&(t.count=3*r-t.start,i.push(t)),this.groups=i}fromGeometry(e){let t,r=e.faces,n=e.vertices,i=e.faceVertexUvs,a=i[0]&&i[0].length>0,o=i[1]&&i[1].length>0,s=e.morphTargets,l=s.length;if(l>0){t=[];for(let e=0;e<l;e++)t[e]={name:s[e].name,data:[]};this.morphTargets.position=t}let u,c=e.morphNormals,h=c.length;if(h>0){u=[];for(let e=0;e<h;e++)u[e]={name:c[e].name,data:[]};this.morphTargets.normal=u}let d=e.skinIndices,p=e.skinWeights,f=d.length===n.length,m=p.length===n.length;n.length>0&&0===r.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(let e=0;e<r.length;e++){let g=r[e];this.vertices.push(n[g.a],n[g.b],n[g.c]);let v=g.vertexNormals;if(3===v.length)this.normals.push(v[0],v[1],v[2]);else{let e=g.normal;this.normals.push(e,e,e)}let y=g.vertexColors;if(3===y.length)this.colors.push(y[0],y[1],y[2]);else{let e=g.color;this.colors.push(e,e,e)}if(!0===a){let t=i[0][e];void 0!==t?this.uvs.push(t[0],t[1],t[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",e),this.uvs.push(new ve,new ve,new ve))}if(!0===o){let t=i[1][e];void 0!==t?this.uvs2.push(t[0],t[1],t[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",e),this.uvs2.push(new ve,new ve,new ve))}for(let e=0;e<l;e++){let r=s[e].vertices;t[e].data.push(r[g.a],r[g.b],r[g.c])}for(let t=0;t<h;t++){let r=c[t].vertexNormals[e];u[t].data.push(r.a,r.b,r.c)}f&&this.skinIndices.push(d[g.a],d[g.b],d[g.c]),m&&this.skinWeights.push(p[g.a],p[g.b],p[g.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this}},Iy=class{constructor(e,t,r,n,i,a=0){this.a=e,this.b=t,this.c=r,this.normal=n&&n.isVector3?n:new We,this.vertexNormals=Array.isArray(n)?n:[],this.color=i&&i.isColor?i:new Oe,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=a}clone(){return(new this.constructor).copy(this)}copy(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(let t=0,r=e.vertexNormals.length;t<r;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(let t=0,r=e.vertexColors.length;t<r;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}},By=["a","b","c"];function zy(e,t){switch(t){case"c":return e.c;case"b":return e.b;default:return e.a}}function Ny(e,t,r){let n=Math.min(e,t)+"_"+Math.max(e,t);return r.get(n)}function Fy(e,t,r,n,i,a){let o,s=Math.min(e,t),l=Math.max(e,t),u=s+"_"+l;n.has(u)?o=n.get(u):(o={a:r[s],b:r[l],newEdge:null,faces:[]},n.set(u,o)),o.faces.push(i),a[e].edges.push(o),a[t].edges.push(o)}function Uy(e,t,r,n,i){e.push(new Iy(t,r,n,void 0,void 0,i))}function jy(e,t){return Math.abs(t-e)/2+Math.min(e,t)}function Hy(e,t,r,n){e.push([t.clone(),r.clone(),n.clone()])}var Vy=new We;function Gy(e,t,r){r.x=e.x*t.x,r.y=e.y,r.z=e.x*t.y}function Wy(e,t,r,n,i,a){let o=t.clone().sub(e),s=r.clone().sub(e),l=o.angleTo(s);if(o.normalize(),s.normalize(),n===i){let t=o.add(s).normalize();a.copy(e).addScaledVector(t,n/Math.sin(l/2))}else{let t=o.angleTo(s);a.copy(e),a.addScaledVector(o,i/Math.sin(t)),a.addScaledVector(s,n/Math.sin(t))}}function qy(e,t,r){let n=e.clone().sub(t),i=r.clone().sub(t);return n.projectOnVector(i),n.add(t)}var Yy=class extends wr{constructor(e=.5,t=1,r=4,n=1,i=!1,a=0,o=4){super(),r=Math.floor(Math.max(3,r)),n=Math.floor(n),o=Math.floor(o);let s,l=[],u=[],c=[],h=[],d=0,p=t/2,f=Math.PI/r,m=e*Math.cos(Math.PI/r),g=2*Math.PI/r,v=(r-2)*Math.PI/r,y=Math.PI-v,x=new We(0,-p,0),b=new We(0,p,0),w=new ve(e,-p),S=new ve(m,-p),_=new ve(0,b.y).sub(S),A=new ve(0,b.y).sub(w),M=new ve(_.y,-_.x).normalize(),E=new ve(A.y,-A.x).normalize(),C=e*Math.cos(Math.PI/r)*Math.tan((Math.PI-_.angle())/2)-1e-8;a=Math.min(a,C);{let e=new We(M.x,M.y,0),t=new We(Math.cos(g)*e.x,e.y,Math.sin(g)*e.x);s=e.angleTo(t)}let T=a/Math.tan((Math.PI-_.angle())/2),D=a/Math.tan((Math.PI-s)/2),L=new We;if(!i){u.push(x.x,x.y,x.z),c.push(0,-1,0),h.push(0,0);let e=d++,t=[],n=w.clone(),i=T/Math.cos(Math.PI/r);n.x-=i;for(let e=0;e<r;e++){let i=e/r*Math.PI*2+f;Gy(n,new ve(Math.sin(i),Math.cos(i)),L),u.push(L.x,L.y,L.z),c.push(0,-1,0),h.push(0,0),t.push(d++)}for(let r=0;r<t.length;r++)l.push(t[r],e,t[(r+1)%t.length])}let P=[];{let e=new We,t=new We,n=new We,i=new We,p=new We,m=new We;for(let g=0;g<r;g++){let v=g/r*Math.PI*2+f,y=(g+.5)/r*Math.PI*2+f,S=(g+1)/r*Math.PI*2+f,A=new ve(Math.sin(v),Math.cos(v)),C=new ve(Math.sin(y),Math.cos(y)),L=new ve(Math.sin(S),Math.cos(S));Gy(w,A,t),Gy(w,L,n),Gy(M,C,e),Wy(b,t,n,D,D,i),u.push(i.x,i.y,i.z),Wy(t,b,n,D,T,p),u.push(p.x,p.y,p.z),Wy(n,t,b,T,D,m),u.push(m.x,m.y,m.z),c.push(e.x,e.y,e.z),c.push(e.x,e.y,e.z),c.push(e.x,e.y,e.z),h.push(0,0),h.push(0,0),h.push(0,0);let k=d++,I=d++,B=d++;if(l.push(k,I,B),a>0){{let e=t.clone().add(n).multiplyScalar(.5),r=b.clone().sub(e).normalize(),i=x.clone().sub(e).normalize().add(r).normalize().multiplyScalar(-1);R(e,m.clone().sub(p),i,_.angle())}let f,g;{let e=new We;Gy(E,L,e);let t=m.clone().add(i).multiplyScalar(.5);t=qy(t,n,b);let r=m.clone().sub(i);[f,g]=R(t,r,e,s,i.y)}{let e=f,t=e.clone().setY(0).normalize(),r=new We(0,-1,0),n=t.clone().cross(r);O(e,t,r,n)}P.concat(g);{let t=_.angle(),n=Math.PI-t,i=b.clone();i.y-=a/Math.sin(t-Math.PI/2);let s=new We,p=[];for(let t=0;t<o;t++){let l=[],f=Math.PI/2-n*t/o,m=Math.cos(f),g=Math.sin(f),v=y;for(let n=0;n<=t;n++){let n=Math.cos(v),o=Math.sin(v);e.x=m*o,e.y=g,e.z=m*n,s.copy(i).addScaledVector(e,a),u.push(s.x,s.y,s.z),c.push(e.x,e.y,e.z),h.push(0,0),l.push(d++),v+=2*Math.PI/t/r}p.push(l)}g.reverse(),p.push(g);let f=p.length-1;for(let e=0;e<f;e++){let t=p[e],r=p[e+1],n=t.length-1;l.push(r[1],t[0],r[0]);for(let e=1;e<=n;e++)l.push(t[e],t[e-1],r[e]),l.push(r[e+1],t[e],r[e])}}}}}function R(e,t,r,n,i){let s=-n/2,p=(Math.PI-n)/2,f=t.clone().normalize().cross(r);e.addScaledVector(r,-a/Math.sin(p));let m=new We,g=new We,v=d,y=[];for(let l=0;l<=o;l++){let p=s+l/o*n;g.set(0,0,0),g.addScaledVector(f,Math.sin(p)),g.addScaledVector(r,Math.cos(p));for(let r=0;r<=1;r++){let n=r/1-.5;if(m.copy(e),m.addScaledVector(t,n),m.addScaledVector(g,a),null!=i){let e=Math.max(0,m.y-i);m.addScaledVector(t,-e/t.y)}u.push(m.x,m.y,m.z),c.push(g.x,g.y,g.z),h.push(0,0),0===r&&y.push(d),d++}}for(let e=0;e<o;e++)for(let t=0;t<1;t++){let r=v+t+2*e,n=r+2,i=n+1,a=r+1;l.push(r,n,a),l.push(n,i,a)}return[e.clone().addScaledVector(t,.5),y]}function O(e,t,r,n){let i=Math.PI/2,s=A.angle()-i,p=[],f=new We,m=new We;for(let l=0;l<=o;l++){let g=[],v=l/o;for(let o=0;o<=l;o++){let p=((l?o/l:0)-.5)*y,x=Math.cos(p),b=Math.sin(p),w=(i+Math.atan(Math.tan(s)*x))*v,S=Math.cos(w),_=Math.sin(w);f.set(0,0,0),f.addScaledVector(t,_*x),f.addScaledVector(r,S),f.addScaledVector(n,_*b),m.copy(e).addScaledVector(f,a),u.push(m.x,m.y,m.z),c.push(f.x,f.y,f.z),h.push(0,0),g.push(d++)}p.push(g)}let g=p.length-1;for(let e=0;e<g;e++){let t=p[e],r=p[e+1],n=t.length-1;l.push(t[0],r[1],r[0]);for(let e=1;e<=n;e++)l.push(t[e-1],t[e],r[e]),l.push(t[e],r[e+1],r[e])}}this.setIndex(l),this.setAttribute("position",new pr(u,3)),this.setAttribute("normal",new pr(c,3)),this.setAttribute("uv",new pr(h,2))}},Xy=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r,n,i,a,o;let s=Object.assign({},null!=(r=null==t?void 0:t.parameters)?r:{width:100,depth:0,cornerRadius:[0,0,0,0],cornerType:1,extrudeDepth:0,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters),l=Object.assign(null!=(n=null==t?void 0:t.ui)?n:{enabledIndieCorners:!1},e.ui),u=s.cornerRadius.reduce(((e,t)=>e+t),0);return{shape:e.shape&&e.shape instanceof Qv?e.shape:new Qv,parameters:Object.assign(s,{surfaceMaxCount:(null!=(i=s.surfaceMaxCount)?i:u>0)?1e3:100,width:Math.abs(s.width),height:Math.abs(null!=(a=s.height)?a:s.width),depth:Math.abs(void 0!==s.depth&&0===s.depth&&s.extrudeDepth>0?s.extrudeDepth:null!=(o=s.depth)?o:0)}),ui:l}}static build(e){let t=e.shape,{width:r,height:n,cornerRadius:i,cornerType:a,depth:o,extrudeBevelSize:s,extrudeBevelSegments:l,surfaceMaxCount:u}=e.parameters,c={x:.5*r,y:.5*n},h={x:-c.x,y:-c.y},d={x:c.x,y:c.y};function p(e,t,i){return t>r&&i>n?Math.min(e*r/t,e*n/i):t>r?e*r/t:i>n?e*n/i:e}let f=[];f[0]=0===i[0]?0:p(i[0],i[0]+i[3],i[0]+i[1]),f[1]=0===i[1]?0:p(i[1],i[1]+i[2],i[1]+i[0]),f[2]=0===i[2]?0:p(i[2],i[2]+i[1],i[2]+i[3]),f[3]=0===i[3]?0:p(i[3],i[3]+i[0],i[3]+i[2]);let m=h.x,y=d.x,x=d.y,b=h.y;t.addPoint(t.createPoint(m,x)),t.addPoint(t.createPoint(y,x)),t.addPoint(t.createPoint(y,b)),t.addPoint(t.createPoint(m,b)),t.isClosed=!0;let w=!0;for(let e=0,r=t.points.length;e<r;e++)t.points[e].roundness=f[e],e>0&&f[e]!==f[e-1]&&(w=!1);w&&(t.roundness=f[0]),t.useCubicForRoundedCorners=1!==a,t.update();let S=by.create({shape:t,parameters:{surfaceMaxCount:u,depth:o,extrudeBevelSize:s,extrudeBevelSegments:l}});return Object.assign(S,{userData:v(g({},e),{type:"RectangleGeometry"})})}},Qy=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r,n,i;let a=Object.assign({},null!=(r=null==t?void 0:t.parameters)?r:{width:100,depth:0},e.parameters);return{parameters:Object.assign(a,{width:Math.abs(a.width),height:Math.abs(null!=(n=a.height)?n:a.width),depth:Math.abs(null!=(i=a.depth)?i:0)})}}static build(e){let{width:t,height:r}=e.parameters,n=new ln(t,r);return Object.assign(n,{userData:v(g({},e),{type:"TextFrameGeometry"})})}},Jy={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(Jy,{addBarycentricAttribute:()=>tx,fixUvs:()=>nx,loadFromUrl:()=>rx,resizeGeometry:()=>ex,roundShapePolygon:()=>$y});var Zy,Ky=function(e,t){let r=t.x-e.x,n=t.y-e.y,i=Math.sqrt(r*r+n*n),a=r/i,o=n/i;return{x:r,y:n,len:i,nx:a,ny:o,ang:Math.atan2(o,a)}},$y=(e,t,r)=>{let n,i,a,o,s,l,u,c,h,d,p,f,m,g,v=t.length;for(o=t[v-2],e.curves=[],n=1;n<v-1;n++){s=t[n%v],l=t[(n+1)%v];let y=Ky(s,o),x=Ky(s,l);u=y.nx*x.ny-y.ny*x.nx,c=y.nx*x.nx-y.ny*-x.ny,p=Math.asin(u),h=1,d=!1,c<0?p<0?p=Math.PI+p:(p=Math.PI-p,h=-1,d=!0):p>0&&(h=-1,d=!0),f=p/2,g=Math.abs(Math.cos(f)*r/Math.sin(f)),g>Math.min(y.len/2,x.len/2)?(g=Math.min(y.len/2,x.len/2),m=Math.abs(g*Math.sin(f)/Math.cos(f))):m=r,i=s.x+x.nx*g,a=s.y+x.ny*g,i+=-x.ny*m*h,a+=x.nx*m*h,e.absarc(i,a,m,y.ang+Math.PI/2*h,x.ang-Math.PI/2*h,d),o=s,s=l}e.closePath()},ex=(e,{width:t,height:r,depth:n})=>{t=Math.abs(t),r=Math.abs(r),n=Math.abs(n);let i,a,o,s=e.userData.parameters;0===t?(t=s.width,i=1):i=t/s.width,0===r?(r=s.height,a=1):a=r/s.height,0===n?(n=s.depth,o=1):o=n/s.depth,e.scale(i,a,o),s.width=t,s.height=r,s.depth=n},tx=(e,t)=>{let r=[new We(1,0,0),new We(0,1,0),new We(0,0,1)],n=e.attributes.position,i=new Float32Array(3*n.count);for(let e=0,t=n.count;e<t;e++)r[e%3].toArray(i,3*e);e.setAttribute(t,new pr(i,3))},rx=e=>new Promise((t=>{(new Nl).load(e,(e=>t(e)))})),nx=(e,t,r)=>{let n=e.getAttribute("uv");if(n)for(let e=0;e<n.count;e++){let i=n.getX(e),a=n.getY(e);n.setXY(e,(i+t/2)/t,1-(a-r/2)/r*-1)}},ix=new Promise((e=>{}));ix.then((e=>{Zy=e}));var ax=new Float32Array([10,10,0,-10,10,0,-10,-10,0,10,-10,0]),ox=new Uint32Array([0,1,2,3]),sx=new Uint8Array([4]),lx=class{static build(e,t,r,n,i){let a,o,s;if(void 0===e)a=lx.allocate(i,r),Zy.set_destination_refinement_level(a,0),o=lx.buildLevel(a,!0,n);else if(void 0!==e.positionWASM){t&&0!==t&&(Zy.free_bvh(t),Zy.free_subdivision_surface(t));try{a=lx.allocate(i,void 0,e)}catch(t){console.error(t,e),a=lx.allocate(i,void 0,{positionWASM:ax,indexWASM:ox,verticesPerFaceWASM:sx})}Zy.set_destination_refinement_level(a,0),o=lx.buildLevel(a,!0,n)}else a=t;if(void 0!==e&&void 0!==e.subdivisions){let t=function(e,t){let r=e;return r=Math.min(r,3-Math.ceil(Math.log(t/172e3)/Math.log(4))),Math.max(r,0)}(e.subdivisions,e.positionWASM.length);Zy.set_destination_refinement_level(a,t),s=t>0?lx.buildLevel(a,!1,n):null}return{subdivPointer:a,originalGeometry:o,subdividedGeometry:s}}static allocate(e,t,r){var n;let i,a,o,s=[],l=[];if(r)r.positionWASM&&r.positionWASM.length>0?(i=r.positionWASM,a=r.indexWASM,o=r.verticesPerFaceWASM):(i=ax,a=ox,o=sx);else{t.deleteAttribute("normal"),t.deleteAttribute("uv");let e=function(e,t=1e-4){t=Math.max(t,Number.EPSILON);let r={},n=e.getIndex(),i=e.getAttribute("position"),a=n?n.count:i.count,o=0,s=Object.keys(e.attributes),l={},u={},c=[],h=["getX","getY","getZ","getW"];for(let t=0,r=s.length;t<r;t++){let r=s[t];l[r]=[];let n=e.morphAttributes[r];n&&(u[r]=new Array(n.length).fill().map((()=>[])))}let d=Math.log10(1/t),p=Math.pow(10,d);for(let t=0;t<a;t++){let i=n?n.getX(t):t,a="";for(let t=0,r=s.length;t<r;t++){let r=s[t],n=e.getAttribute(r),o=n.itemSize;for(let e=0;e<o;e++)a+=~~(n[h[e]](i)*p)+","}if(a in r)c.push(r[a]);else{for(let t=0,r=s.length;t<r;t++){let r=s[t],n=e.getAttribute(r),a=e.morphAttributes[r],o=n.itemSize,c=l[r],d=u[r];for(let e=0;e<o;e++){let t=h[e];if(c.push(n[t](i)),a)for(let e=0,r=a.length;e<r;e++)d[e].push(a[e][t](i))}}r[a]=o,c.push(o),o++}}let f=e.clone();for(let t=0,r=s.length;t<r;t++){let r=s[t],n=e.getAttribute(r),i=new n.array.constructor(l[r]),a=new cr(i,n.itemSize,n.normalized);if(f.setAttribute(r,a),r in u)for(let t=0;t<u[r].length;t++){let n=e.morphAttributes[r][t],i=new n.array.constructor(u[r][t]),a=new cr(i,n.itemSize,n.normalized);f.morphAttributes[r][t]=a}}return f.setIndex(c),f}(t);i=e.attributes.position.array;let r=e.getIndex().array,n=r.length;switch("TorusGeometry"===t.userData.type&&(null==t?void 0:t.userData.parameters.arc)===2*Math.PI&&(t.userData.type="ClosedTorusGeometry"),t.userData.type){case"ClosedTorusGeometry":case"PlaneGeometry":case"TorusKnotGeometry":case"CubeGeometry":a=new Uint32Array(n/3*2),o=new Uint8Array(n/6).fill(4);for(let e=0,t=0;e<n;e+=6)a[t++]=r[e],a[t++]=r[e+1],a[t++]=r[e+4],a[t++]=r[e+5];break;case"TorusGeometry":case"SphereGeometry":case"HelixGeometry":case"CylinderGeometry":case"ConeGeometry":let e,i,s;if("SphereGeometry"===t.userData.type)i=t.parameters.heightSegments,e=t.parameters.widthSegments,t.parameters.thetaLength!==Math.PI&&(s=!0);else if("CylinderGeometry"===t.userData.type)i=t.parameters.heightSegments+2,e=t.parameters.radialSegments;else if("ConeGeometry"===t.userData.type)i=t.parameters.heightSegments+1,e=t.parameters.radialSegments;else if("TorusGeometry"===t.userData.type){let r=t.userData.parameters;i=Math.ceil(r.tubularSegments*r.arc/(2*Math.PI))+2,e=r.radialSegments}else{let{pathSegments:r,segments:n,revolutions:a}=t.userData.parameters;i=Math.ceil(n*a)+2,e=r}s?(a=new Uint32Array(1*e*3+(i-1)*e*4),o=new Uint8Array(1*e+(i-1)*e)):(a=new Uint32Array(2*e*3+(i-2)*e*4),o=new Uint8Array(2*e+(i-2)*e));let l=0,u=0,c=0;if("SphereGeometry"===t.userData.type||"HelixGeometry"===t.userData.type||"TorusGeometry"===t.userData.type){for(;u<3*e;)a[u++]=r[l++],a[u++]=r[l++],a[u++]=r[l++],o[c++]=3;let t=s?a.length:3*e+4*(i-2)*e;for(;u<t;l+=6)a[u++]=r[l],a[u++]=r[l+1],a[u++]=r[l+4],a[u++]=r[l+5],o[c++]=4}else for(;u<4*(i-2)*e;l+=6)a[u++]=r[l],a[u++]=r[l+1],a[u++]=r[l+4],a[u++]=r[l+5],o[c++]=4;for(;u<a.length;)a[u++]=r[l++],a[u++]=r[l++],a[u++]=r[l++],o[c++]=3;break;default:a=r,o=new Uint8Array(n/3).fill(3)}}let u,c=i.length,h=a.length,d=o.length,p=i.length+s.length+l.length,f=a.length+o.length,m=p*Float32Array.BYTES_PER_ELEMENT+f*Uint32Array.BYTES_PER_ELEMENT,g=p*Float32Array.BYTES_PER_ELEMENT,v=(Uint32Array.BYTES_PER_ELEMENT,Zy._malloc(m)),y=new Float32Array(Zy.HEAPF32.buffer,v,p),x=new Uint32Array(Zy.HEAPU32.buffer,v+g,f);y.set(i,0),y.set(s,i.length),y.set(l,i.length+s.length),x.set(a,0),x.set(o,a.length),null!=(n=null==r?void 0:r.scaleBaked)&&n.some((e=>1!==e))&&(u=(new St).makeScale(...r.scaleBaked)),e&&(u?u.premultiply(e):u=e);let b=u?Zy.alloc_subdivision_surface2(v,c,v+g,h,v+g+a.length*Uint32Array.BYTES_PER_ELEMENT,d,u.elements):Zy.alloc_subdivision_surface(v,c,v+g,h,v+g+a.length*Uint32Array.BYTES_PER_ELEMENT,d);return Zy._free(v),b}static buildLevel(e,t,r,n,i){let a=i?Zy.get_mesh_data2(e,t?Zy.Level.CONTROL:Zy.Level.REFINED,null!=r?r:!t,i.elements):Zy.get_mesh_data(e,t?Zy.Level.CONTROL:Zy.Level.REFINED,null!=r?r:!t),o=Zy.HEAPU32.subarray(a>>2,8+(a>>2)),s=o.subarray(4,8),l=0,u=Zy.HEAPU32[o[l]>>2],c=Zy.HEAPF32.subarray(u>>2,(u>>2)+s[l]);l++;let h=Zy.HEAPU32[o[l]>>2],d=Zy.HEAPF32.subarray(h>>2,(h>>2)+s[l]);l++;let p=Zy.HEAPU32[o[l]>>2],f=Zy.HEAPU32.subarray(p>>2,(p>>2)+s[l]);l++;let m=Zy.HEAPU32[o[l]>>2],g=Zy.HEAPU32.subarray(m>>2,(m>>2)+s[l]);if(l++,void 0===n){let e=new wr;if(e.setIndex(new dr(g,1)),e.setAttribute("position",new pr(c,3)),e.setAttribute("normal",new pr(d,3)),t){e.setAttribute("faceMap",new dr(f,1));let t=new Float32Array(d.length/3*4).fill(0);e.setAttribute("color",new cr(t,4))}return Zy.free_mesh_data(a),e.userData.type="SubdivGeometry",e}n.getAttribute("position").copyArray(c),n.getAttribute("normal").copyArray(d),n.attributes.position.needsUpdate=!0,n.attributes.normal.needsUpdate=!0,Zy.free_mesh_data(a)}static buildControlCageWireframe(e,t,r){let n=Zy.get_wireframe_data_for_base_level(e),i=Zy.HEAPU32.subarray(n>>2,4+(n>>2)),a=i.subarray(2,4),o=0,s=Zy.HEAPU32[i[o]>>2],l=Zy.HEAPF32.subarray(s>>2,(s>>2)+a[o]);o++;let u=Zy.HEAPU32[i[o]>>2],c=Zy.HEAPU32.subarray(u>>2,(u>>2)+a[o]);if(void 0===t){let e=new wr;e.setAttribute("position",new pr(l,3));let t=new Float32Array(l.length);for(let e=0,n=l.length;e<n;)t[e++]=r.r,t[e++]=r.g,t[e++]=r.b;return e.setAttribute("color",new cr(t,3)),e.setIndex(new dr(c,1)),Zy.free_wireframe_data_for_base_level(n),e}t.getAttribute("position").copyArray(l),t.attributes.position.needsUpdate=!0,Zy.free_wireframe_data_for_base_level(n)}static updateCollabMesh(e,t,r){t||Zy.set_destination_refinement_level(e,1);let n=r?Zy.get_topological_data2(e,t?Zy.Level.CONTROL:Zy.Level.REFINED,r.elements):Zy.get_topological_data(e,t?Zy.Level.CONTROL:Zy.Level.REFINED),i=Zy.HEAPU32.subarray(n>>2,6+(n>>2)),a=i.subarray(3,6),o=0,s=Zy.HEAPU32[i[o]>>2],l=new Float32Array(Zy.HEAPF32.subarray(s>>2,(s>>2)+a[o]));o++;let u=Zy.HEAPU32[i[o]>>2],c=new Uint32Array(Zy.HEAPU32.subarray(u>>2,(u>>2)+a[o]));o++;let h=Zy.HEAPU32[i[o]>>2],d=new Uint8Array(Zy.HEAPU32.subarray(h>>2,(h>>2)+a[o]));return Zy.free_topological_data(n),{positions:l,indices:c,verticesPerFace:d}}},ux={ConeGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r,n,i;let a=Object.assign({},null!=(r=null==t?void 0:t.parameters)?r:{width:100,radialSegments:32,heightSegments:8,openEnded:!1,thetaStart:0,thetaLength:360,cornerRadiusTop:0,cornerRadiusBottom:0,cornerSegments:8},e.parameters);return{parameters:Object.assign(a,{width:Math.abs(a.width),height:Math.abs(null!=(n=a.height)?n:a.width),depth:Math.abs(null!=(i=a.depth)?i:a.width)})}}static build(e){let t,{width:r,depth:n,height:i,radialSegments:a,heightSegments:o,openEnded:s,thetaStart:l,thetaLength:u,cornerRadiusTop:c,cornerRadiusBottom:h,cornerSegments:d}=e.parameters;return t=c>0||h>0||u<360?new pv(0,r/2,i,a,o,s,l,u*Math.PI/180,c,h,d,0,!0):new rs(r/2,i,a,o,s),t.scale(1,1,n/r),Object.assign(t,{userData:v(g({},e),{type:"ConeGeometry"})})}},CubeGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r,n,i;let a=Object.assign({},null!=(r=null==t?void 0:t.parameters)?r:{width:100,widthSegments:1,heightSegments:1,depthSegments:1,cornerRadius:0,cornerSegments:8},e.parameters);return{parameters:Object.assign(a,{width:Math.abs(a.width),height:Math.abs(null!=(n=a.height)?n:a.width),depth:Math.abs(null!=(i=a.depth)?i:a.width)})}}static build(e){let t,{width:r,height:n,depth:i,widthSegments:a,heightSegments:o,depthSegments:s,cornerRadius:l,cornerSegments:u}=e.parameters;return t=0==l?new jr(r,n,i,a,o,s):new mv(r,n,i,a,o,s,l,u),Object.assign(t,{userData:v(g({},e),{type:"CubeGeometry"})})}},CylinderGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r,n,i,a,o;let s=Object.assign({},null!=(r=null==t?void 0:t.parameters)?r:{width:100,radialSegments:64,heightSegments:1,openEnded:!1,thetaStart:0,thetaLength:360,cornerRadius:0,cornerSegments:8,hollow:0},e.parameters),l=s.width/2,u=null!=(n=s.radiusTop)?n:l,c=null!=(i=s.radiusBottom)?i:l;return u===c?(u=l,c=l):u>c?(u=l,c=c*l/u):(u=u*l/c,c=l),{parameters:Object.assign(s,{width:Math.abs(s.width),height:Math.abs(null!=(a=s.height)?a:s.width),depth:Math.abs(null!=(o=s.depth)?o:s.width),radiusTop:u,radiusBottom:c})}}static build(e){let t,{width:r,depth:n,height:i,radialSegments:a,heightSegments:o,openEnded:s,thetaStart:l,thetaLength:u,radiusTop:c,radiusBottom:h,cornerRadius:d,cornerSegments:p,hollow:f}=e.parameters;return t=d||f?new pv(c,h,i,a,o,s,l,u*Math.PI/180,d,d,p,f):new ts(c,h,i,a,o,s,l,u*Math.PI/180),t.scale(1,1,n/r),Object.assign(t,{userData:v(g({},e),{type:"CylinderGeometry"})})}},DodecahedronGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r,n,i;let a=Object.assign({},null!=(r=null==t?void 0:t.parameters)?r:{width:100,detail:0,corner:0,cornerSides:4},e.parameters);return{parameters:Object.assign(a,{width:Math.abs(a.width),height:Math.abs(null!=(n=a.height)?n:a.width),depth:Math.abs(null!=(i=a.depth)?i:a.width)})}}static build(e){let{width:t,height:r,depth:n,detail:i,corner:a,cornerSides:o}=e.parameters,s=0===i&&0!==a?new vv(.5*t,a,o):new is(.5*t,i);return s.scale(1,r/t,n/t),Object.assign(s,{userData:v(g({},e),{type:"DodecahedronGeometry"})})}},EllipseGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r,n,i;let a=Object.assign({},null!=(r=null==t?void 0:t.parameters)?r:{width:100,depth:0,spikes:64,angle:360,innerRadius:0,extrudeDepth:0,extrudeBevelSize:0,extrudeBevelSegments:1,surfaceMaxCount:1e3},e.parameters);return{shape:e.shape&&e.shape instanceof Qv?e.shape:new Qv,parameters:Object.assign(a,{width:Math.abs(a.width),height:Math.abs(null!=(n=a.height)?n:a.width),depth:Math.abs(void 0!==a.depth&&0===a.depth&&a.extrudeDepth>0?a.extrudeDepth:null!=(i=a.depth)?i:0)})}}static build(e){let{width:t,height:r,spikes:n,angle:i,innerRadius:a,depth:o,extrudeBevelSize:s,extrudeBevelSegments:l,surfaceMaxCount:u}=e.parameters,c=e.shape,h=function(e,t,r,n,i,a){if(n>=wy)return i>30||i%4==0?(function(e,t,r,n=0,i=0,a=0){let o=.5522847498,s=t*o,l=r*o;e.addPoint(Ay(i-t,a,i-t,a-l,i-t,a+l)),e.addPoint(Ay(i,a+r,i-s,a+r,i+s,a+r)),e.addPoint(Ay(i+t,a,i+t,a+l,i+t,a-l)),e.addPoint(Ay(i,a-r,i+s,a-r,i-s,a-r)),n>0&&Ey(e,t,r,n)}(e,t,r,a),Math.round(i/4)):Sy(e,n,i,t,r,a);let o={x:0,y:r},s=n+.5*Math.PI,l={x:Math.cos(s)*t,y:Math.sin(s)*r},u=function({px:e,py:t,cx:r,cy:n,rx:i,ry:a,largeArcFlag:o,sweepFlag:s}){let l=[];if(0===i||0===a)return[];let u=(e-r)/2,c=(t-n)/2;if(0===u&&0===c)return[];i=Math.abs(i),a=Math.abs(a);let h=Math.pow(u,2)/Math.pow(i,2)+Math.pow(c,2)/Math.pow(a,2);h>1&&(i*=Math.sqrt(h),a*=Math.sqrt(h));let d=function(e,t,r,n,i,a,o,s,l,u){let c=Math.pow(i,2),h=Math.pow(a,2),d=Math.pow(o,2),p=Math.pow(s,2),f=c*h-c*p-h*d;f<0&&(f=0),f/=c*p+h*d,f=Math.sqrt(f)*(l===u?-1:1);let m=f*i/a*s,g=f*-a/i*o,v=m+(e+r)/2,y=g+(t+n)/2,x=(o-m)/i,b=(s-g)/a,w=(-o-m)/i,S=(-s-g)/a,_=$v(1,0,x,b),A=$v(x,b,w,S);return!u&&A>0&&(A-=Jv),u&&A<0&&(A+=Jv),{centerx:v,centery:y,ang1:_,ang2:A}}(e,t,r,n,i,a,u,c,o,s),{ang1:p,ang2:f}=d,{centerx:m,centery:g}=d,v=Math.abs(f)/(Jv/4);Math.abs(1-v)<1e-7&&(v=1);let y=Math.max(Math.ceil(v),1);f/=y;for(let e=0;e<y;e++)l.push(Kv(p,f)),p+=f;return l.map((e=>{let{x:t,y:r}=Zv(e[0],i,a,m,g),{x:n,y:o}=Zv(e[1],i,a,m,g),{x:s,y:l}=Zv(e[2],i,a,m,g);return{x1:t,y1:r,x2:n,y2:o,x:s,y:l}}))}({px:o.x,py:o.y,cx:l.x,cy:l.y,rx:t,ry:r,largeArcFlag:n>Math.PI,sweepFlag:!0});return i>30||i%u.length==0?function(e,t,r,n,i,a,o,s){let l=Math.round(i/n.length);e.addPoint(_y(t,r));for(let t=0,r=n.length;t<r;t++){let r=n[t],i=e.points[t],a=_y(r.x,r.y);i.controls[1].position.set(r.x1,r.y1),a.controls[0].position.set(r.x2,r.y2),e.addPoint(a)}return s>0?My(e,a,o,s):e.addPoint(_y(0,0)),l}(e,o.x,o.y,u,i,t,r,a):Sy(e,n,i,t,r,a)}(c,.5*t,.5*r,i*Math.PI/180,n,a);c.isClosed=!0,c.update();let d=by.create({shape:c,parameters:{subdivisions:h,surfaceMaxCount:u,depth:o,extrudeBevelSize:s,extrudeBevelSegments:l}});return Object.assign(d,{userData:v(g({},e),{type:"EllipseGeometry"})})}},HelixGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r,n,i;let a=Object.assign({},null!=(r=null==t?void 0:t.parameters)?r:{width:100,revolutions:2,segments:40,pathRadius:10,pathType:0,pathSegments:30,cornerRadius:30,cornerSegments:4},e.parameters),o=Math.abs(a.width),s=Math.abs(null!=(n=a.height)?n:o),l=Math.abs(null!=(i=a.depth)?i:o),u=Math.abs(Math.min(o,l))/2;return{parameters:Object.assign(a,{width:o,height:s,depth:l,radius:u,segments:Math.round(a.segments),pathSegments:Math.round(a.pathSegments),cornerSegments:Math.round(a.cornerSegments)})}}static build(e){let{width:t,height:r,depth:n,radius:i,revolutions:a,segments:o,pathRadius:s,pathType:l,pathSegments:u,cornerRadius:c,cornerSegments:h}=e.parameters,d=new Ty(!1,t,r,n,i,a,o,s,l,u,c,h);return Object.assign(d,{userData:v(g({},e),{type:"HelixGeometry"})})}},IcosahedronGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r,n,i;let a=Object.assign({},null!=(r=null==t?void 0:t.parameters)?r:{width:100,detail:0,corner:0,cornerSides:4},e.parameters);return{parameters:Object.assign(a,{width:Math.abs(a.width),height:Math.abs(null!=(n=a.height)?n:a.width),depth:Math.abs(null!=(i=a.depth)?i:a.width)})}}static build(e){let{width:t,height:r,depth:n,detail:i,corner:a,cornerSides:o}=e.parameters,s=0===i&&0!==a?new Dy(.5*t,a,o):new Is(.5*t,i);return s.scale(1,r/t,n/t),Object.assign(s,{userData:v(g({},e),{type:"IcosahedronGeometry"})})}},LatheGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r,n,i,a,o;(null!=(n=null==(r=e.parameters)?void 0:r.points)?n:[]).forEach((e=>{Array.isArray(e)&&(e.x=e[0],e.y=e[1])}));let s=Object.assign({},null!=(i=null==t?void 0:t.parameters)?i:{width:100,segments:64,verticalSegments:64,points:[{x:0,y:-50,id:0},{x:50,y:-50,id:1},{x:50,y:50,id:2},{x:0,y:50,id:3}]},e.parameters);return{parameters:Object.assign(s,{width:Math.abs(s.width),height:Math.abs(null!=(a=s.height)?a:s.width),depth:Math.abs(null!=(o=s.depth)?o:s.width)})}}static build(e){let{points:t,segments:r,verticalSegments:n}=e.parameters,i=new as;i.moveTo(t[0].x,t[0].y),i.bezierCurveTo(t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y);let a=new es(i.extractPoints(n).shape,r);return a.rotateZ(Math.PI),Object.assign(a,{userData:v(g({},e),{type:"LatheGeometry"})})}},NonParametricGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r,n;let i,a=null!=(n=null!=(r=e.geometry)?r:null==t?void 0:t.geometry)?n:(new wr).copy(new jr(100,100,100));void 0===t?(a.computeBoundingBox(),a.boundingBox.getSize(Vy),i={width:Vy.x,height:Vy.y,depth:Vy.z,subdivisions:0}):i=t.parameters;let o=g(g({},i),e.parameters);return{parameters:{width:Math.abs(o.width),height:Math.abs(o.height),depth:Math.abs(o.depth),subdivisions:Math.abs(o.subdivisions)},geometry:a}}static build(e){var t;let{width:r,height:n,depth:i,subdivisions:a}=e.parameters,o=null!=(t=e.geometry)?t:(new wr).copy(new jr(100,100,100)),s=o.userData.parameters;void 0===s?(o.computeBoundingBox(),o.boundingBox.getSize(Vy)):Vy.set(s.width,s.height,s.depth),(r!==Vy.x||n!==Vy.y||i!==Vy.z)&&o.scale(0===Vy.x?1:r/Vy.x,0===Vy.y?1:n/Vy.y,0===Vy.z?1:i/Vy.z);let l=o.originalGeometry;return a>0?(void 0===l||(null==s?void 0:s.subdivisions)!==a)&&(void 0===l&&(l=o),o=new class{constructor(e=1){this.subdivisions=e}modify(e){(e=e instanceof wr?(new Oy).fromBufferGeometry(e):e.clone()).mergeVertices();let t=this.subdivisions;for(;t-- >0;)this._smooth(e);return e.computeFaceNormals(),e.computeVertexNormals(),e}_smooth(e){let t,r,n,i,a,o=new We,s=e.vertices,l=e.faces,u=e.faceVertexUvs[0],c=void 0!==u&&u.length>0,h=[],d=new Map;!function(e,t,r,n){let i,a,o;for(i=0,a=e.length;i<a;i++)r[i]={edges:[]};for(i=0,a=t.length;i<a;i++)o=t[i],Fy(o.a,o.b,e,n,o,r),Fy(o.b,o.c,e,n,o,r),Fy(o.c,o.a,e,n,o,r)}(s,l,h,d);let p,f,m,g,v,y,x,b=[];for(let e of Array.from(d.keys())){for(f=d.get(e),m=new We,v=3/8,y=1/8,x=f.faces.length,2!=x&&(v=.5,y=0),m.addVectors(f.a,f.b).multiplyScalar(v),o.set(0,0,0),i=0;i<x;i++){for(g=f.faces[i],a=0;a<3&&(p=s[zy(g,By[a])],p===f.a||p===f.b);a++);p&&o.add(p)}o.multiplyScalar(y),m.add(o),f.newEdge=b.length,b.push(m)}let w,S,_,A,M,E,C,T=[];for(r=0,n=s.length;r<n;r++){for(E=s[r],M=h[r].edges,t=M.length,3==t?w=3/16:t>3&&(w=3/(8*t)),S=1-t*Number(w),_=w,t<=2&&2==t&&(S=3/4,_=1/8),C=E.clone().multiplyScalar(S),o.set(0,0,0),i=0;i<t;i++)A=M[i],p=A.a!==E?A.a:A.b,o.add(p);o.multiplyScalar(Number(_)),C.add(o),T.push(C)}let D,L,P,R,O,k,I,B=T.concat(b),z=T.length,N=[],F=[],U=new ve,j=new ve,H=new ve;for(r=0,n=l.length;r<n;r++)g=l[r],D=Number(Ny(g.a,g.b,d).newEdge)+z,L=Number(Ny(g.b,g.c,d).newEdge)+z,P=Number(Ny(g.c,g.a,d).newEdge)+z,Uy(N,D,L,P,g.materialIndex),Uy(N,g.a,D,P,g.materialIndex),Uy(N,g.b,L,D,g.materialIndex),Uy(N,g.c,P,L,g.materialIndex),c&&(R=u[r],O=R[0],k=R[1],I=R[2],U.set(jy(O.x,k.x),jy(O.y,k.y)),j.set(jy(k.x,I.x),jy(k.y,I.y)),H.set(jy(O.x,I.x),jy(O.y,I.y)),Hy(F,U,j,H),Hy(F,O,U,H),Hy(F,k,j,U),Hy(F,I,H,j));e.vertices=B,e.faces=N,c&&(e.faceVertexUvs[0]=F)}}(a).modify(l).toBufferGeometry()):(void 0!==l&&(o=l),l=void 0,void 0===o.getAttribute("normal")&&o.computeVertexNormals()),void 0!==l&&Object.assign(o,{originalGeometry:l}),delete e.geometry,Object.assign(o,{userData:v(g({},e),{type:"NonParametricGeometry"})})}static loadFromUrl(e,t,r){new Nl(r).load(e,(e=>{let r=this.normalizeInputs({geometry:e});e.boundingBox.getSize(Vy);let n=100/Vy.x;Object.assign(r.parameters,{width:100,height:Vy.y*n,depth:Vy.z*n}),t(this.build(r))}))}},PolygonGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r,n,i,a;let o=Object.assign({},null!=(r=null==t?void 0:t.parameters)?r:{width:100,depth:0,spikes:5,cornerRadius:0,extrudeDepth:0,extrudeBevelSize:0,extrudeBevelSegments:3},e.parameters);return{shape:e.shape&&e.shape instanceof Qv?e.shape:new Qv,parameters:Object.assign(o,{surfaceMaxCount:(null!=(n=o.surfaceMaxCount)?n:o.cornerRadius>0)?1e3:100,width:Math.abs(o.width),height:Math.abs(null!=(i=o.height)?i:o.width),depth:Math.abs(void 0!==o.depth&&0===o.depth&&o.extrudeDepth>0?o.extrudeDepth:null!=(a=o.depth)?a:0)})}}static build(e){let{width:t,height:r,spikes:n,cornerRadius:i,depth:a,extrudeBevelSize:o,extrudeBevelSegments:s,surfaceMaxCount:l}=e.parameters,u=e.shape,c=.5*t,h=.5*r,d=2*Math.PI/n;for(let e=0;e<n;e++){let t=d*e,r=0+Math.sin(t)*c,n=0+Math.cos(t)*h;u.addPoint(u.createPoint(r,n))}u.isClosed=!0;for(let e=0,t=u.points.length;e<t;e++)u.points[e].roundness=i;u.roundness=i,u.update();let p=by.create({shape:u,parameters:{surfaceMaxCount:l,roundness:i,depth:a,extrudeBevelSize:o,extrudeBevelSegments:s}});return Object.assign(p,{userData:v(g({},e),{type:"PolygonGeometry"})})}},PyramidGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r,n,i;let a=Object.assign({},null!=(r=null==t?void 0:t.parameters)?r:{width:100,radialSegments:4,heightSegments:1,cornerRadius:0,cornerSegments:8,openEnded:!1},e.parameters);return{parameters:Object.assign(a,{width:Math.abs(a.width),height:Math.abs(null!=(n=a.height)?n:a.width),depth:Math.abs(null!=(i=a.depth)?i:a.width)})}}static build(e){let{width:t,height:r,depth:n,radialSegments:i,heightSegments:a,openEnded:o,cornerRadius:s,cornerSegments:l}=e.parameters,u=new Yy(.5*t,r,i,a,o,s,l);return u.scale(1,1,n/t),Object.assign(u,{userData:v(g({},e),{type:"PyramidGeometry"})})}},RectangleGeometry:Xy,SphereGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r,n,i;let a=Object.assign({},null!=(r=null==t?void 0:t.parameters)?r:{width:100,widthSegments:64,heightSegments:64,phiStart:0,phiLength:2*Math.PI,thetaStart:0,thetaLength:Math.PI},e.parameters);return{parameters:Object.assign(a,{width:Math.abs(a.width),height:Math.abs(null!=(n=a.height)?n:a.width),depth:Math.abs(null!=(i=a.depth)?i:a.width)})}}static build(e){let{width:t=100,height:r=t,depth:n=t,widthSegments:i=64,heightSegments:a=64,phiStart:o,phiLength:s,thetaStart:l,thetaLength:u}=e.parameters,c=new zs(.5*t,i,a,o,s,l,u);return c.scale(1,r/t,n/t),Object.assign(c,{userData:v(g({},e),{type:"SphereGeometry"})})}},PlaneGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r,n;let i=Object.assign({},null!=(r=null==t?void 0:t.parameters)?r:{width:100,depth:0,widthSegments:8,heightSegments:8},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(null!=(n=i.height)?n:i.width),depth:0})}}static build(e){let{width:t=100,height:r=t,widthSegments:n=8,heightSegments:i=8}=e.parameters,a=new ln(t,r,n,i);return a.scale(1,1,1),Object.assign(a,{userData:v(g({},e),{type:"PlaneGeometry"})})}},StarGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r,n,i,a;let o=Object.assign({},null!=(r=null==t?void 0:t.parameters)?r:{width:100,depth:0,innerRadiusPercent:38.19,spikes:5,cornerRadius:0,angle:360,extrudeDepth:0,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters);return{shape:e.shape&&e.shape instanceof Qv?e.shape:new Qv,parameters:Object.assign(o,{surfaceMaxCount:(null!=(n=o.surfaceMaxCount)?n:o.cornerRadius>0)?1e3:100,width:Math.abs(o.width),height:Math.abs(null!=(i=o.height)?i:o.width),depth:Math.abs(void 0!==o.depth&&0===o.depth&&o.extrudeDepth>0?o.extrudeDepth:null!=(a=o.depth)?a:0)})}}static build(e){let{width:t,height:r,innerRadiusPercent:n,spikes:i,cornerRadius:a,angle:o,depth:s,extrudeBevelSize:l,extrudeBevelSegments:u,surfaceMaxCount:c}=e.parameters,h=e.shape,d=.5*t,p=.5*r,f=o*Math.PI/360/i,m=Math.PI/2*3*-1,y=d*n/100,x=p*n/100;if(3==i&&50==n){f=2*Math.PI/i;for(let e=0;e<i;e++){let t=f*e,r=0+Math.sin(t)*d,n=0+Math.cos(t)*p;h.addPoint(h.createPoint(r,n))}}else for(let e=0;e<i;e++){let e=0+Math.cos(m)*d,t=0+Math.sin(m)*p;h.addPoint(h.createPoint(e,t)),m+=f,e=0+Math.cos(m)*y,t=0+Math.sin(m)*x,h.addPoint(h.createPoint(e,t)),m+=f}h.isClosed=!0;for(let e=0,t=h.points.length;e<t;e++)h.points[e].roundness=a;h.roundness=a,h.update();let b=by.create({shape:h,parameters:{surfaceMaxCount:c,roundness:a,depth:s,extrudeBevelSize:l,extrudeBevelSegments:u}});return Object.assign(b,{userData:v(g({},e),{type:"StarGeometry"})})}},TextFrameGeometry:Qy,TorusGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r,n,i;let a=Object.assign({},null!=(r=null==t?void 0:t.parameters)?r:{width:100,radialSegments:32,tubularSegments:64,arc:2*Math.PI,cornerRadius:30,cornerSegments:8},e.parameters),o=Math.abs(a.width),s=Math.abs(null!=(n=a.height)?n:a.width),l=Math.abs(null!=(i=a.depth)?i:.25*a.width);return{parameters:Object.assign(a,{width:o,height:s,depth:l})}}static build(e){let{width:t,height:r,depth:n,radialSegments:i,tubularSegments:a,arc:o,cornerRadius:s,cornerSegments:l}=e.parameters,u=function(e,t,r,n,i,a,o,s,l,u,c){return[t,r]=[r,t],o=t/2,1==(i/=2*Math.PI)&&(u=0),new Ty(!0,e,t,r,n,i,a,o,0,l,u,c)}(t,r,n,.5*t,o,a,0,0,i,s,l);return u.scale(1,r/t,1),Object.assign(u,{userData:v(g({},e),{type:"TorusGeometry"})})}},TorusKnotGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r,n,i,a;let o=Object.assign({},null!=(r=null==t?void 0:t.parameters)?r:{width:100,tubularSegments:64,radialSegments:32,p:2,q:3},e.parameters);return{parameters:Object.assign(o,{width:Math.abs(o.width),height:Math.abs(null!=(n=o.height)?n:o.width),depth:Math.abs(null!=(i=o.depth)?i:o.width),tube:null!=(a=o.tube)?a:.125*o.width})}}static build(e){let{width:t,tube:r,tubularSegments:n,radialSegments:i,p:a,q:o}=e.parameters,s=.5*t;s!==r&&(s-=r);let l=new Ns(s,r,n,i,a,o);return Object.assign(l,{userData:v(g({},e),{type:"TorusKnotGeometry"})})}},TriangleGeometry:class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var r,n,i,a;let o=Object.assign({},null!=(r=null==t?void 0:t.parameters)?r:{width:100,depth:0,spikes:5,cornerRadius:0,extrudeDepth:0,extrudeBevelSize:0,extrudeBevelSegments:1,isRect:!1},e.parameters);return{shape:e.shape&&e.shape instanceof Qv?e.shape:new Qv,parameters:Object.assign(o,{surfaceMaxCount:(null!=(n=o.surfaceMaxCount)?n:o.cornerRadius>0)?1e3:100,width:Math.abs(o.width),height:Math.abs(null!=(i=o.height)?i:o.width*(o.isRect?1:Math.sqrt(3)/2)),depth:Math.abs(void 0!==o.depth&&0===o.depth&&o.extrudeDepth>0?o.extrudeDepth:null!=(a=o.depth)?a:0)})}}static build(e){let{width:t=100,height:r,cornerRadius:n,depth:i,extrudeBevelSize:a,extrudeBevelSegments:o,isRect:s,surfaceMaxCount:l}=e.parameters,u=e.shape,c=.5*t,h=.5*r;s?(u.addPoint(u.createPoint(-c,h)),u.addPoint(u.createPoint(c,-h)),u.addPoint(u.createPoint(-c,-h))):(u.addPoint(u.createPoint(0,h)),u.addPoint(u.createPoint(c,-h)),u.addPoint(u.createPoint(-c,-h))),u.isClosed=!0;for(let e=0,t=u.points.length;e<t;e++)u.points[e].roundness=n;u.roundness=n,u.update();let d=by.create({shape:u,parameters:{surfaceMaxCount:l,roundness:n,depth:i,extrudeBevelSize:a,extrudeBevelSegments:o}});return Object.assign(d,{userData:v(g({},e),{type:"TriangleGeometry"})})}},VectorGeometry:by},cx=e=>ux[e.type].create(e),hx=class extends Oe{constructor(e,t,r,n){super(e,t,r),this.isColorA=!0,this.a=n}setRGBA(e,t,r,n){super.setRGB(e,t,r),this.a=n}copy(e){return super.copy(e),this.a="a"in e?e.a:1,this}clone(){return new this.constructor(this.r,this.g,this.b,this.a)}get x(){return this.r}get y(){return this.g}get z(){return this.b}get w(){return this.a}set x(e){this.r=e}set y(e){this.g=e}set z(e){this.b=e}set w(e){this.a=e}};function dx(e,t){let r;if("string"!=typeof e)return new hx(e.r,e.g,e.b,"a"in e?e.a:1);{let n=null==t?void 0:t.getColor(e);n?r=n:(console.warn("Tried to create color layer params with a color key that does not exist in the assets manager"),r=new hx(0,0,0,0))}return r}var px=e=>"isEntity"in e,fx=e=>"isAbstractMesh"in e,mx=e=>"objectHelper"in e;function gx(e,t){var r;let n=!1;t.position&&(e.position.fromArray(t.position),n=!0),t.rotation&&(e.rotation.fromArray(t.rotation),n=!0),t.scale&&(n=!0,e.scale.fromArray(t.scale)),void 0!==t.hiddenMatrix&&"hiddenMatrix"in e&&(n=!0,e.hiddenMatrix.fromArray(null!=(r=t.hiddenMatrix)?r:Np.identity)),n&&e.updateMatrix(),t.position&&t.rotation&&t.scale&&void 0!==t.hiddenMatrix&&e.updateWorldMatrix(!1,!0),"CombinedCamera"===e.objectType&&(void 0!==t.isUpVectorFlipped&&(e.isUpVectorFlipped=t.isUpVectorFlipped),e.updateUp())}var vx=new Xe,yx=new We,xx=new We,bx=new St,wx=(e,t,r,n)=>{var i;if(fx(e)){let t=e.geometry.userData.parameters,r=e.geometry.getAttribute("position");"SubdivGeometry"===e.geometry.userData.type?yx.copy(e.originalGeometry.boundingSphere.center):(function(e,t,r=0,n=t.count){let i=1/0,a=1/0,o=1/0,s=-1/0,l=-1/0,u=-1/0;for(let e=r;e<n;e++){let r=t.getX(e),n=t.getY(e),c=t.getZ(e);r<i&&(i=r),n<a&&(a=n),c<o&&(o=c),r>s&&(s=r),n>l&&(l=n),c>u&&(u=c)}e.min.set(i,a,o),e.max.set(s,l,u)}(vx,r,e.geometry.drawRange.start,e.geometry.drawRange.count<1/0?e.geometry.drawRange.count:r.count),vx.getCenter(yx)),e.forceComputeSize?vx.getSize(xx).multiplyScalar(.5):xx.set(t.width,t.height,null!=(i=t.depth)?i:0).multiplyScalar(.5)}else if(mx(e)&&!0===n){let t=e.geometryHelper.getAttribute("position");vx.setFromArray(t.array),vx.getCenter(yx),vx.getSize(xx).multiplyScalar(.5)}else yx.setScalar(0),xx.setScalar(0);bx.copy(t).multiply(e.matrixWorld),0===xx.x&&0===xx.y&&0===xx.z?r.push(new We(yx.x,yx.y,yx.z).applyMatrix4(bx)):r.push(new We(-xx.x,xx.y,xx.z).add(yx).applyMatrix4(bx),new We(-xx.x,-xx.y,xx.z).add(yx).applyMatrix4(bx),new We(xx.x,-xx.y,xx.z).add(yx).applyMatrix4(bx),new We(xx.x,xx.y,xx.z).add(yx).applyMatrix4(bx),new We(-xx.x,xx.y,-xx.z).add(yx).applyMatrix4(bx),new We(-xx.x,-xx.y,-xx.z).add(yx).applyMatrix4(bx),new We(xx.x,-xx.y,-xx.z).add(yx).applyMatrix4(bx),new We(xx.x,xx.y,-xx.z).add(yx).applyMatrix4(bx))},Sx=class extends Xe{constructor(){super(...arguments),this.matrix=new St,this.vertices=[],this.faces=[],this.edges=[],this.centerEdges=[]}copy(e){return super.copy(e),this.matrix.copy(e.matrix),this.vertices=e.vertices.map((e=>e.clone())),this.faces=e.faces.map((e=>e.clone())),this.edges=e.edges.map((e=>e.clone())),this.centerEdges=e.centerEdges.map((e=>e.clone())),this}setFromObjectSize(e,t=!1){e.updateWorldMatrix(!1,t),this.makeEmpty(),this.matrix.copy(e.matrixWorld);let r=(new St).copy(e.matrixWorld).invert();return this.expandByObjectSize(e,r,t)}expandByObjectSize(e,t,r=!1){let n=[];return!0===r?e.traverseEntity((r=>{r.visible&&wx(r,t,n,!0===e.enableHelper)})):wx(e,t,n,!0===e.enableHelper),this.setFromPoints(n)}getCenter(e){return(e=super.getCenter(e)).applyMatrix4(this.matrix),e}getPositionToCenter(e){return(e=super.getCenter(e)).applyMatrix4(bx.copy(this.matrix).setPosition(0,0,0)),e}computeVertices(){this.getSize(xx).multiplyScalar(.5),this.getCenter(yx),bx.copy(this.matrix).setPosition(yx),this.vertices=[new We(-xx.x,xx.y,xx.z).applyMatrix4(bx),new We(-xx.x,-xx.y,xx.z).applyMatrix4(bx),new We(xx.x,-xx.y,xx.z).applyMatrix4(bx),new We(xx.x,xx.y,xx.z).applyMatrix4(bx),new We(-xx.x,xx.y,-xx.z).applyMatrix4(bx),new We(-xx.x,-xx.y,-xx.z).applyMatrix4(bx),new We(xx.x,-xx.y,-xx.z).applyMatrix4(bx),new We(xx.x,xx.y,-xx.z).applyMatrix4(bx)]}computeEdges(){this.vertices.length>0&&this.computeVertices(),this.edges=[new lu(this.vertices[0],this.vertices[3]),new lu(this.vertices[1],this.vertices[2]),new lu(this.vertices[5],this.vertices[6]),new lu(this.vertices[4],this.vertices[7]),new lu(this.vertices[0],this.vertices[1]),new lu(this.vertices[3],this.vertices[2]),new lu(this.vertices[7],this.vertices[6]),new lu(this.vertices[4],this.vertices[5]),new lu(this.vertices[0],this.vertices[4]),new lu(this.vertices[1],this.vertices[5]),new lu(this.vertices[2],this.vertices[6]),new lu(this.vertices[3],this.vertices[7])],this.centerEdges=this.edges.map((e=>e.getCenter(new We)))}computeFaces(){this.vertices.length>0&&this.computeVertices(),this.faces=[(new We).copy(this.vertices[0]).sub(this.vertices[2]).multiplyScalar(.5).add(this.vertices[2]),(new We).copy(this.vertices[7]).sub(this.vertices[5]).multiplyScalar(.5).add(this.vertices[5]),(new We).copy(this.vertices[4]).sub(this.vertices[1]).multiplyScalar(.5).add(this.vertices[1]),(new We).copy(this.vertices[3]).sub(this.vertices[6]).multiplyScalar(.5).add(this.vertices[6]),(new We).copy(this.vertices[4]).sub(this.vertices[3]).multiplyScalar(.5).add(this.vertices[3]),(new We).copy(this.vertices[1]).sub(this.vertices[6]).multiplyScalar(.5).add(this.vertices[6])]}};function _x(e){let t=[];for(let r in e){let n=e[r];delete n.metadata,t.push(n)}return t}var Ax=e=>class extends e{hasEntityChild(){return this.children.some((e=>px(e)))}isDescendantOf(e){e instanceof Yt&&(e=e.uuid);let t=this;for(;t.parent;){if(t.parent.uuid===e)return!0;t=t.parent}return!1}attach(e,t){this.updateWorldMatrix(!0,!1);let r=(new St).copy(this.matrixWorld).invert();return null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),r.multiply(e.parent.matrixWorld)),px(e)?e.hiddenMatrix.premultiply(r):e.applyMatrix4(r),e.updateWorldMatrix(!1,!1),this.add(e),void 0!==t&&(this.children.pop(),this.children.splice(t,0,e)),this}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let t=0;t<e.children.length;t++){let r=e.children[t];this.add(r.clone())}return this}toJSON(e){let t=void 0===e,r={object:{uuid:"",objectType:""}};void 0===e&&(e={geometries:{},materials:{},textures:{},images:{},interactionStates:{},nodes:{}},r.metadata={version:1.5,type:"Object",generator:"Object3D.toJSON"});let n={uuid:this.uuid,objectType:this.type};if(""!==this.name&&(n.name=this.name),n.matrix=this.matrix.toArray(),!0===this.castShadow&&(n.castShadow=!0),!0===this.receiveShadow&&(n.receiveShadow=!0),!1===this.visible&&(n.visible=!1),!1===this.frustumCulled&&(n.frustumCulled=!1),0!==this.renderOrder&&(n.renderOrder=this.renderOrder),n.layers=this.layers.mask,"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),this.children.length>0){n.children=[];for(let t of this.children)(px(t)||t instanceof bl)&&n.children.push(t.toJSON(e).object)}if(t){let t=_x(e.geometries),n=_x(e.materials),i=_x(e.textures),a=_x(e.images),o=_x(e.interactionStates),s=function(e){let t=[];for(let r in e)t.push(e[r]);return t}(e.nodes);t.length>0&&(r.geometries=t),n.length>0&&(r.materials=n),i.length>0&&(r.textures=i),a.length>0&&(r.images=a),o.length>0&&(r.interactionStates=o),s.length>0&&(r.nodes=s)}return r.object=n,r}fromJSON(e){return this.uuid=e.uuid,void 0!==e.name&&(this.name=e.name),void 0!==e.matrix?(this.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(this.matrixAutoUpdate=e.matrixAutoUpdate),this.matrixAutoUpdate&&this.matrix.decompose(this.position,this.quaternion,this.scale)):(void 0!==e.position&&this.position.fromArray(e.position),void 0!==e.rotation&&this.rotation.fromArray(e.rotation),void 0!==e.quaternion&&this.quaternion.fromArray(e.quaternion),void 0!==e.scale&&this.scale.fromArray(e.scale)),this.castShadow=void 0!==e.castShadow,this.receiveShadow=void 0!==e.receiveShadow,void 0!==e.visible&&(this.visible=e.visible),void 0!==e.frustumCulled&&(this.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(this.renderOrder=e.renderOrder),void 0!==e.layers&&(this.layers.mask=e.layers),void 0!==e.userData&&(this.userData=e.userData),this}},Mx=e=>"isEntity"in e,Ex=e=>class extends(Ax(e)){constructor(){super(...arguments),this.objectType="",this.isEntity=!0,this.raycastLock=!1,this.scaleLock=!1,this.hiddenMatrix=new St,this._singleBBox=new Sx,this._recursiveBBox=new Sx,this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0,this.forceComputeSize=!1}set visibility(e){this.visible=e;for(let t of this.children)Mx(t)&&t.traverseEntity((t=>{mx(t)&&t.visible&&(t.objectHelper.visible=e)}))}get visibility(){return this.visible}get singleBBox(){return this.singleBBoxNeedsUpdate&&(this.singleBBoxNeedsUpdate=!1,this._singleBBox.setFromObjectSize(this,!1),this._singleBBox.computeVertices(),this._singleBBox.computeEdges(),this._singleBBox.computeFaces()),this._singleBBox}get recursiveBBox(){return this.recursiveBBoxNeedsUpdate&&(this.recursiveBBoxNeedsUpdate=!1,this._recursiveBBox.setFromObjectSize(this,!0),this._recursiveBBox.computeVertices(),this._recursiveBBox.computeEdges(),this._recursiveBBox.computeFaces()),this._recursiveBBox}resetBBoxNeedsUpdate(){this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0,this.traverseAncestors((e=>{Mx(e)&&(e.singleBBoxNeedsUpdate=!0,e.recursiveBBoxNeedsUpdate=!0)})),this.traverseEntity((e=>{e.singleBBoxNeedsUpdate=!0,e.recursiveBBoxNeedsUpdate=!0}))}traverseEntity(e){e(this);for(let t of this.children)Mx(t)&&t.traverseEntity(e)}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.multiplyMatrices(this.hiddenMatrix,this.matrix):(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);for(let t of this.children)t.updateMatrixWorld(e)}updateWorldMatrix(e,t){let r=this.parent;if(e&&null!==r&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.multiplyMatrices(this.hiddenMatrix,this.matrix):(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,this.matrix)),t)for(let e of this.children)e.updateWorldMatrix(!1,!0)}shallowClone(e){return(new this.constructor).shallowCopy(this,e)}shallowCopy(e,t=!0){if(super.copy(e,!1),this.raycastLock=e.raycastLock,this.scaleLock=e.scaleLock,this.hiddenMatrix.copy(e.hiddenMatrix),!0===t)for(let t of e.children)Mx(t)&&this.add(t.shallowClone());return this}clone(e){return(new this.constructor).copy(this,e)}copy(e,t=!0){if(super.copy(e,!1),this.raycastLock=e.raycastLock,this.scaleLock=e.scaleLock,this.hiddenMatrix.copy(e.hiddenMatrix),!0===t)for(let t of e.children)Mx(t)&&this.add(t.clone());return this}keepChildrenMatrixWorld(){let e=new St,t=this.matrixWorld.clone();this.updateWorldMatrix(!1,!1),e.copy(this.matrixWorld).invert(),e.multiply(t);for(let t of this.children)Mx(t)&&t.hiddenMatrix.premultiply(e)}toJSON(e){let t=super.toJSON(e),r=t.object;return!0===this.raycastLock&&(r.raycastLock=!0),!0===this.scaleLock&&(r.scaleLock=!0),r.hiddenMatrix=this.hiddenMatrix.toArray(),t}fromJSON(e){return super.fromJSON(e),void 0!==e.raycastLock&&(this.raycastLock=e.raycastLock),void 0!==e.scaleLock&&(this.scaleLock=e.scaleLock),this.hiddenMatrix.fromArray(e.hiddenMatrix),this}fromObject3D(e){let t=e.children;return e.children=[],Object.assign(e,{raycastLock:!1,scaleLock:!1,hiddenMatrix:new St}),this.copy(e),e.children=t,this}toObjectTransformState(e=[]){this.updateWorldMatrix(!0,!1);let t={position:this.position.toArray(),rotation:[this.rotation.x,this.rotation.y,this.rotation.z],scale:this.scale.toArray(),hiddenMatrix:this.hiddenMatrix.toArray()};return df(t,e)}fromObjectTransformState(e){return e.position&&this.position.fromArray(e.position),e.rotation&&this.rotation.fromArray(e.rotation),e.scale&&this.scale.fromArray(e.scale),e.hiddenMatrix&&this.hiddenMatrix.fromArray(e.hiddenMatrix),this.updateMatrix(),this}toState(e=[]){let t=g({name:this.name,visible:this.visible,raycastLock:this.raycastLock},this.toObjectTransformState(e));return df(t,e)}fromState(e,t){return e.name&&(this.name=e.name),void 0!==e.raycastLock&&(this.raycastLock=e.raycastLock),"OrthographicCamera"!==e.type&&"PerspectiveCamera"!==e.type&&(this.matrixAutoUpdate=!1),void 0!==e.visible&&(this.visibility=e.visible),this.fromObjectTransformState(e),this}},Cx=class extends Yt{constructor(e,t={}){super(),this.object=e;let r=e.recursiveBBox.getSize(new We);this.parameters=Yp.defaultData(r.toArray(),.1),lf(this.parameters,t),this.update(),this.setHideBase(this.parameters.hideBase)}refreshMaterial(){if("material"in this.object)for(let e of this.children)e.material=this.object.material}setHideBase(e){if("material"in this.object){if(Array.isArray(this.object.material)){if(this.children.length>0){for(let e of this.object.material)e.visible=!0;if(e){let e=this.object.material.map((e=>e.clone()));for(let t of this.children)t.material=e}else for(let e of this.children)e.material=this.object.material}for(let t of this.object.material)t.visible=!e}else{if(this.children.length>0)if(this.object.material.visible=!0,e){let e=this.object.material.clone();for(let t of this.children)t.material=e}else for(let e of this.children)e.material=this.object.material;this.object.material.visible=!e}this.parameters.hideBase=e}}update(){switch(this._updateCount(),this.parameters.type){case"radial":this._updateRadial(this.parameters);break;case"linear":this._updateLinear(this.parameters);break;case"grid":this._updateGrid(this.parameters)}this.children.forEach((e=>e.updateMatrix()))}_updateCount(){let e="grid"===this.parameters.type?this.parameters.grid.count[0]*this.parameters.grid.count[1]*this.parameters.grid.count[2]:this.parameters.count;if(this.children.length!==e)if(this.children.length<e)for(let t=0,r=e-this.children.length;t<r;++t){let e=this.object.shallowClone(!1);e.visible=!0,this.add(e),this.parameters.hideBase&&this.setHideBase(!0)}else for(let t=0,r=this.children.length-e;t<r;++t)this.remove(this.children[0])}_updateRadial(e){let t,r=e.radial,n=r.start*ge.DEG2RAD,i=n-r.end*ge.DEG2RAD,a=new Rt(r.rotation[0]*ge.DEG2RAD,r.rotation[1]*ge.DEG2RAD,r.rotation[2]*ge.DEG2RAD);switch(r.axis){case"z":t=new We(0,0,1);break;case"y":t=new We(0,1,0);break;default:t=new We(1,0,0)}for(let[o,s]of this.children.entries()){s.hiddenMatrix.identity(),s.scale.x=r.scale[0],s.scale.y=r.scale[1],s.scale.z=r.scale[2],s.position.setScalar(0);let l=i/e.count*o-n;switch(r.axis){case"x":s.rotation.set(0,l,0);break;case"y":s.rotation.set(0,0,l);break;case"z":s.rotation.set(l,0,0)}s.translateOnAxis(t,r.radius),s.position.x+=r.position[0],s.position.y+=r.position[1],s.position.z+=r.position[2],!0===r.alignment?(s.rotation.x+=a.x,s.rotation.y+=a.y,s.rotation.z+=a.z):s.rotation.copy(a)}}_updateLinear(e){if("linear"!==e.type)throw new Error;let t=e.linear,r=new Rt(t.rotation[0]*ge.DEG2RAD,t.rotation[1]*ge.DEG2RAD,t.rotation[2]*ge.DEG2RAD);for(let[e,n]of this.children.entries())n.hiddenMatrix.identity(),n.scale.x=1+(t.scale[0]-1)*e,n.scale.y=1+(t.scale[1]-1)*e,n.scale.z=1+(t.scale[2]-1)*e,n.rotation.x=r.x*e,n.rotation.y=r.y*e,n.rotation.z=r.z*e,n.position.x=t.position[0]*e,n.position.y=t.position[1]*e,n.position.z=t.position[2]*e}_updateGrid(e){let t=0,r=e.grid;if(!0===r.useCenter){let e={x:r.count[0]%2==0?2:1,y:r.count[1]%2==0?2:1,z:r.count[2]%2==0?2:1},n=new We(r.size[0]*(r.count[0]-e.x)*.5,r.size[1]*(r.count[1]-e.y)*.5,r.size[2]*(r.count[2]-e.z)*.5);for(let e=0;e<r.count[0];e++)for(let i=0;i<r.count[1];i++)for(let a=0;a<r.count[2];a++){let o=this.children[t++];o.hiddenMatrix.identity(),o.scale.setScalar(1),o.rotation.set(0,0,0),o.position.x=r.size[0]*e-n.x,o.position.y=r.size[1]*i-n.y,o.position.z=r.size[2]*a-n.z}}else for(let e=0;e<r.count[0];e++)for(let n=0;n<r.count[1];n++)for(let i=0;i<r.count[2];i++){let a=this.children[t++];a.hiddenMatrix.identity(),a.scale.setScalar(1),a.rotation.set(0,0,0),a.position.x=r.size[0]*e,a.position.y=-r.size[1]*n,a.position.z=-r.size[2]*i}}fromJSON(e){return this}toJSON(){return{}}fromClonerState(e){return void 0!==e.hideBase&&this.setHideBase(e.hideBase),lf(this.parameters,e),this.update(),this}},Tx=class extends(Ex(Fr)){constructor(e,t){super(e,t),this.isAbstractMesh=!0,Array.isArray(t)&&(this.selectedMaterial=0,0===e.groups.length&&e.addGroup(0,e.getAttribute("position").count,0))}get cloner(){return this._cloner}set cloner(e){this._cloner&&this.remove(this._cloner),e&&this.add(e),this._cloner=e}getSelectedMaterial(e){return Array.isArray(this.material)?(void 0===this.selectedMaterial&&(this.selectedMaterial=null!=e?e:0),this.material[null!=e?e:this.selectedMaterial]):this.material}setSelectedMaterial(e,t){Array.isArray(this.material)?(void 0===this.selectedMaterial&&(this.selectedMaterial=null!=t?t:0),t=null!=t?t:this.selectedMaterial,this.material[t].dispose(),this.material[t]=e):(this.material.dispose(),this.material=e)}updateGeometry(e){let t=this.geometry,r=ux[t.userData.type],n="NonParametric"===this.objectType?Object.assign({},t.userData,{geometry:t}):t.userData,i=r.build(r.normalizeInputs(e,n)),a=t.uuid;if(this.geometry.dispose(),this.geometry=i,this.geometry.uuid=a,this.geometry.computeBoundingSphere(),this.cloner)for(let e of this.cloner.children)e.geometry=this.geometry}resizeGeometry(e,t,r){Jy.resizeGeometry(this.geometry,{width:e,height:t,depth:r})}shallowClone(e){return new this.constructor(this.geometry,this.material).shallowCopy(this,e)}clone(e){let t="NonParametric"===this.objectType?Object.assign({},this.geometry.userData,{geometry:this.geometry.clone()}):this.geometry.userData,r=cx(t),n=Array.isArray(this.material)?this.material.map((e=>e.clone())):this.material.clone();return new this.constructor(r,n).copy(this,e)}copy(e,t=!0){return super.copy(e,t),e.cloner&&(this.cloner=new Cx(e,e.cloner.parameters),this.add(this.cloner)),this}setFromClonerState(e){null===e?this.cloner=void 0:(void 0===this.cloner&&(this.cloner=new Cx(this)),this.cloner.fromClonerState(e))}fromState(e,t){var r,n;return super.fromState(e),"Mesh"===e.type&&(this.setFromClonerState(e.cloner),this.castShadow=null==(r=e.castShadow)||r,this.receiveShadow=null==(n=e.receiveShadow)||n),this}},Dx=class{constructor(e){e=null!=e?e:{},this.name=e.name,this.type=e.type,this.node=e.node,this.size=e.size,this.needsUpdate=e.needsUpdate}get value(){return this.node.value}set value(e){this.node.value=e}},Lx=class{constructor(e){this.hashProperties=void 0,this.isNode=!0,this.shortcuts={},this.uuid=ge.generateUUID(),this.type=e,this.name="",this.userData={}}analyze(e,t){t=null!=t?t:{},e.analyzing=!0,this.build(e.addFlow(t.slot,t.cache,t.context),"v4"),e.clearVertexNodeCode(),e.clearFragmentNodeCode(),e.removeFlow(),e.analyzing=!1}analyzeAndFlow(e,t,r){return r=null!=r?r:{},this.analyze(e,r),this.flow(e,t,r)}flow(e,t,r){r=null!=r?r:{},e.addFlow(r.slot,r.cache,r.context);let n={result:this.build(e,t),code:e.clearNodeCode(),extra:e.context.extra};return e.removeFlow(),n}build(e,t,r){t=null!=t?t:this.getType(e,t);let n=e.getNodeData(null!=r?r:this);return e.analyzing&&this.appendDepsNode(e,n,t),-1===e.nodes.indexOf(this)&&e.nodes.push(this),void 0!==this.updateFrame&&-1===e.updaters.indexOf(this)&&e.updaters.push(this),this.generate(e,t,r)}updateFrame(e){}generateReadonly(e,t,r,n,i,a){return""}generate(e,t,r,n,i){return""}parse(e,t,r,n){}appendDepsNode(e,t,r){t.deps=(t.deps||0)+1;let n=e.getTypeLength(r);(n>(t.outputMax||0)||this.getType(e,r))&&(t.outputMax=n,t.output=r)}setName(e){this.name=e}getName(){return this.name}getType(e,t){return"sampler2D"===t||"samplerCube"===t?t:this.type}getJSONNode(e){if((null==e?void 0:e.materials)&&void 0!==(null==e?void 0:e.materials[this.uuid]))return e.materials[this.uuid]}getHash(){let e,t,r="{";for(e in this)t=this[e],t instanceof Lx&&(r+='"'+e+'":'+t.getHash()+",");if(this.hashProperties)for(let n=0;n<this.hashProperties.length;n++)e=this.hashProperties[n],t=this[e],r+='"'+e+'":"'+String(t)+'",';return r+='"id":"'+this.uuid+'"}',r}copy(e){return this.name=e.name,e.type&&(this.type=e.type),e.frameId&&(this.frameId=e.frameId),e.hashProperties&&(this.hashProperties=e.hashProperties.map((e=>e))),this.userData=JSON.parse(JSON.stringify(e.userData)),this.shortcuts=JSON.parse(JSON.stringify(e.shortcuts)),this}clone(){return(new this.constructor).copy(this)}createJSONNode(e){let t=void 0===e||"string"==typeof e;if("string"!=typeof this.type)throw new Error("Node does not allow serialization.");let r={};return r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),!t&&e&&(e.nodes[this.uuid]=r),r}toJSON(e){var t;return null!=(t=this.getJSONNode(e))?t:this.createJSONNode(e)}fromJSON(e,t){return this.uuid=e.uuid,this.type=e.type,e.name&&(this.name=e.name),e.userData&&(this.userData=e.userData),this}},Px=new class{constructor(){this.nodes={},this.keywords={}}add(e){this.nodes[e.name]=e}addKeyword(e,t,r){r=void 0===r||r,this.keywords[e]={callback:t,cache:r}}remove(e){delete this.nodes[e.name]}removeKeyword(e){delete this.keywords[e]}get(e){return this.nodes[e]}getKeyword(e,t){return this.keywords[e].callback(t)}getKeywordData(e){return this.keywords[e]}contains(e){return void 0!==this.nodes[e]}containsKeyword(e){return void 0!==this.keywords[e]}},Rx=class extends Lx{constructor(e,t){super(e),this.scope="",t=null!=t?t:{},this.shared=void 0===t.shared||t.shared,this.unique=void 0!==t.unique&&t.unique}build(e,t,r,n){if(t=null!=t?t:this.getType(e),this.getShared(e,t)){let i=this.getUnique(e,t);i&&void 0===this.uuid&&(this.uuid=ge.generateUUID()),r=e.getUUID(null!=r?r:this.getUUID(),!i);let a=e.getNodeData(r),o=a.output||this.getType(e);if(e.analyzing)return(a.deps||0)>0||this.getLabel()?(this.appendDepsNode(e,a,t),this.generate(e,t,r)):super.build(e,t,r);if(i)return a.name=a.name||super.build(e,t,r),a.name;if(!this.getLabel()&&(!this.getShared(e,o)||e.context.ignoreCache||1===a.deps))return super.build(e,t,r);r=this.getUUID(!1);let s=this.getTemp(e,r);if(s)return e.format(s,o,t);{s=super.generate(e,t,r,a.output,n);let i=this.generate(e,o,r);return e.addNodeCode(s+" = "+i+";"),e.format(s,o,t)}}return super.build(e,t,r)}getShared(e,t){return"sampler2D"!==t&&"samplerCube"!==t&&this.shared}getUnique(e,t){return this.unique}setLabel(e){return this.label=e,this}getLabel(){return this.label}getUUID(e){let t=this.uuid;return"string"==typeof this.scope&&(t=this.scope+"-"+t),t}getTemp(e,t){t=t||this.uuid;let r=e.getVars()[t];return r?r.name:void 0}generate(e,t,r,n,i){return this.getShared(e,t)||console.error("TempNode is not shared"),r=null!=r?r:this.uuid,e.getTempVar(r,null!=n?n:this.getType(e),i,this.getLabel()).name}},Ox=class extends Rx{constructor(e,t){(t=null!=t?t:{}).shared=void 0!==t.shared&&t.shared,super(e,t),this.readonly=!1}setReadonly(e){return this.readonly=e,this.hashProperties=this.readonly?["value"]:void 0,this}getReadonly(){return this.readonly}createJSONNode(e){let t=super.createJSONNode(e);return!0===this.readonly&&(t.readonly=this.readonly),t}fromJSON(e,t){return super.fromJSON(e,t),void 0!==e.readonly&&this.setReadonly(e.readonly),this}generate(e,t,r,n,i,a){r=e.getUUID(null!=r?r:this.getUUID()),n=null!=n?n:this.getType(e);let o=e.getNodeData(r);return this.getReadonly()&&void 0!==this.generateReadonly?this.generateReadonly(e,t,r,n,i,a):e.isShader("vertex")?(o.vertex||(o.vertex=e.createVertexUniform(n,this,i,a,this.getLabel())),e.format(o.vertex.name,n,t)):(o.fragment||(o.fragment=e.createFragmentUniform(n,this,i,a,this.getLabel())),e.format(o.fragment.name,n,t))}copy(e){return super.copy(e),this.readonly=e.readonly,this}},kx=class extends Ox{constructor(e=0,t){super("v2"),this.nodeType="Vector2",this.value=e instanceof ve?e:new ve(e,t)}get x(){return this.value.x}set x(e){this.value.x=e}get y(){return this.value.y}set y(e){this.value.y=e}generateReadonly(e,t,r,n,i,a){return e.format("vec2("+this.value.x+", "+this.value.y+")",n,t)}copy(e){return super.copy(e),this.value.copy(e.value),this}},Ix=class extends Ox{constructor(e=0,t,r){super("v3"),this.nodeType="Vector3",this.value=e instanceof We?e:new We(e,t,r)}get x(){return this.value.x}set x(e){this.value.x=e}get y(){return this.value.y}set y(e){this.value.y=e}get z(){return this.value.z}set z(e){this.value.z=e}generateReadonly(e,t,r,n,i,a){return e.format("vec3("+this.value.x+", "+this.value.y+", "+this.value.z+")",n,t)}copy(e){return super.copy(e),this.value.copy(e.value),this}},Bx=class extends Ox{constructor(e){super("v4"),this.nodeType="Vector4",this.value=e instanceof hx?e:new hx(e.r,e.g,e.b,e.a)}generateReadonly(e,t,r,n,i,a){return e.format("vec4("+this.value.r+", "+this.value.g+", "+this.value.b+", "+this.value.a+")",n,t)}copy(e){return super.copy(e),this.value.copy(e.value),this}},zx=/^\s*([a-z_0-9]+)\s([a-z_0-9]+)\s*\((.*?)\)/i,Nx=/[a-z_0-9]+/gi,Fx=class extends Rx{constructor(e,t,r,n,i){super(i),this.src="",this.nodeType="Function",this.useKeywords=!0,this.includes=[],this.extensions={},this.keywords={},this.isMethod=void 0===i,this.isInterface=!1,this.parse(e,t,r,n)}getShared(e,t){return!this.isMethod}getType(e){return e.getTypeByFormat(this.type)}getInputByName(e){if(this.inputs){let t=this.inputs.length;for(;t--;)if(this.inputs[t].name===e)return this.inputs[t]}}getIncludeByName(e){if(this.includes){let t=this.includes.length;for(;t--;)if(this.includes[t].name===e)return this.includes[t]}}generate(e,t,r,n,i){let a,o=0,s=this.src;if(this.includes)for(let t=0;t<this.includes.length;t++)e.include(this.includes[t],this);for(let t in this.extensions)e.extensions[t]=!0;let l=[];for(;a=Nx.exec(this.src);)l.push(a);for(let t=0;t<l.length;t++){let r=l[t],n=r[0],i=!this.isMethod||!this.getInputByName(n),a=n;if(this.keywords[n]||this.useKeywords&&i&&Px.containsKeyword(n)){let t=this.keywords[n];if(!t){let r=Px.getKeywordData(n);r.cache&&(t=e.keywords[n]),t=t||Px.getKeyword(n,e),r.cache&&(e.keywords[n]=t)}a=t.build(e)}n!==a&&(s=s.substring(0,r.index+o)+a+s.substring(r.index+n.length+o),o+=a.length-n.length),void 0===this.getIncludeByName(a)&&Px.contains(a)&&e.include(Px.get(a))}return"source"===t?s:this.isMethod?(this.isInterface||e.include(this,void 0,s),this.name):e.format("( "+s+" )",this.getType(e),t)}parse(e,t,r,n){if(this.src=e||"",this.includes=null!=t?t:[],this.extensions=null!=r?r:{},this.keywords=null!=n?n:{},this.isMethod){let e=zx.exec(this.src);if(this.inputs=[],e&&4==e.length){this.type=e[1],this.name=e[2];let t=e[3].match(Nx);if(t){let e=0;for(;e<t.length;){let r,n=t[e++];"in"===n||"out"===n||"inout"===n?r=t[e++]:(r=n,n="");let i=t[e++];this.inputs.push({name:i,type:r,qualifier:n})}}this.isInterface=-1===this.src.indexOf("{")}else this.type="",this.name=""}}copy(e){return super.copy(e),this.isMethod=e.isMethod,this.useKeywords=e.useKeywords,void 0!==e.type&&(this.type=e.type),this.parse(e.src,e.includes,e.extensions,e.keywords),this}toJSON(e){var t;let r=this.getJSONNode(e);if(!r){r=this.createJSONNode(e),r.src=this.src,r.isMethod=this.isMethod,r.useKeywords=this.useKeywords,this.isMethod||(r.type=this.type),r.extensions=JSON.parse(JSON.stringify(this.extensions));let n={};for(let t in this.keywords)n[t]=this.keywords[t].toJSON(e).uuid;if(r.keywords=n,null!=(t=this.includes)&&t.length){let t=[];for(let r=0;r<this.includes.length;r++)t.push(this.includes[r].toJSON(e).uuid);r.includes=t}r.isMethod=this.isMethod,r.inputs=this.inputs}return r.nodeType=this.nodeType,r}fromJSON(e,t){if(super.fromJSON(e,t),void 0!==e.inputs&&(this.inputs=e.inputs),void 0!==e.isMethod&&(this.isMethod=e.isMethod),e.src&&(this.src=e.src),e.isMethod&&(this.isMethod=e.isMethod),e.useKeywords&&(this.useKeywords=e.useKeywords),e.type&&(this.type=e.type),e.extensions&&(this.extensions=e.extensions),e.keywords&&t){this.keywords={};for(let r in e.keywords)this.keywords[r]=t.getNode(e.keywords[r])}return e.includes&&t&&(this.includes=e.includes.map((e=>t.getNode(e)))),this}},Ux=/^([a-z_0-9]+)\s([a-z_0-9]+)\s?\=?\s?(.*?)(\;|$)/i,jx=class extends Rx{constructor(e="",t){super(),this.src="",this.useDefine=!1,this.nodeType="Const",this.parse(e||jx.PI,void 0,void 0,void 0,t)}getType(e){return e.getTypeByFormat(this.type)}parse(e,t,r,n,i){this.src=e||"";let a,o,s="",l=Ux.exec(e);this.useDefine=null!=i?i:"#"===this.src.charAt(0),l&&l.length>1?(o=l[1],a=l[2],s=l[3]):(a=this.src,o="f"),this.name=a,this.type=o,this.value=s}build(e,t){if("source"===t){if(this.value)return this.useDefine?"#define "+this.name+" "+this.value:"const "+this.type+" "+this.name+" = "+this.value+";";if(this.useDefine)return this.src}return e.include(this),e.format(this.name,this.getType(e),t)}generate(e,t,r,n,i){return e.format(this.name,this.getType(e),t)}copy(e){return super.copy(e),this.parse(e.src,void 0,void 0,void 0,e.useDefine),this}},Hx=jx;Hx.PI="PI",Hx.PI2="PI2",Hx.RECIPROCAL_PI="RECIPROCAL_PI",Hx.RECIPROCAL_PI2="RECIPROCAL_PI2",Hx.LOG2="LOG2",Hx.EPSILON="EPSILON";var Vx=new RegExp("^structs*([a-z_0-9]+)s*{s*((.|\n)*?)}","gim"),Gx=new RegExp("s*(w*?)s*(w*?)(=|;)","gim"),Wx=class extends Rx{constructor(e=""){super(),this.inputs=[],this.src="",this.nodeType="Struct",this.parse(e)}getType(e){return e.getTypeByFormat(this.name)}getInputByName(e){let t=this.inputs.length;for(;t--;)if(this.inputs[t].name===e)return this.inputs[t]}generate(e,t,r,n,i){return"source"===t?this.src+";":e.format("( "+this.src+" )",this.getType(e),t)}parse(e=""){this.src=e,this.inputs=[];let t=Vx.exec(e);if(t){let e,r=t[2];for(;e=Gx.exec(r);)this.inputs.push({type:e[1],name:e[2]});this.name=t[1]}else this.name="";this.type=this.name}},qx=class extends Rx{constructor(e){super("v2",{shared:!1}),this.nodeType="UV",this.index=null!=e?e:0}generate(e,t){e.requires.uv[this.index]=!0;let r=this.index>0?this.index+1:"",n=e.isShader("vertex")?"uv"+r:"vUv"+r;return e.format(n,this.getType(e),t)}copy(e){return super.copy(e),this.index=e.index,this}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),t.index=this.index),t.nodeType=this.nodeType,t}fromJSON(e,t){return super.fromJSON(e,t),e.index&&(this.index=e.index),this}};Px.addKeyword("uv",(function(){return new qx})),Px.addKeyword("uv2",(function(){return new qx(1)}));var Yx=class extends Rx{constructor(e=new Lx,t){super("v4"),this.nodeType="ColorSpace",this.factor=new Lx,this.input=e,this.method=null!=t?t:Yx.LINEAR_TO_LINEAR,this.hashProperties=["method"]}static getEncodingComponents(e){switch(e){case Q:return["Linear"];case J:return["sRGB"];default:return[]}}generate(e,t){var r;let n=this.input.build(e,"v4"),i=this.getType(e),a=Yx.Nodes[this.method],o=e.include(a);if(o===Yx.LINEAR_TO_LINEAR)return e.format(n,i,t);if(2===(null==(r=a.inputs)?void 0:r.length)){let r=this.factor.build(e,"f");return e.format(o+"( "+n+", "+r+" )",i,t)}return e.format(o+"( "+n+" )",i,t)}fromEncoding(e){let t=Yx.getEncodingComponents(e);this.method="LinearTo"+t[0],this.factor=t[1]}fromDecoding(e){let t=Yx.getEncodingComponents(e);this.method=t[0]+"ToLinear",this.factor=t[1]}copy(e){return super.copy(e),this.input.copy(e.input),this.method=e.method,this.factor.copy(e.factor),this}},Xx=Yx;Xx.Nodes={LinearToLinear:new Fx(["vec4 LinearToLinear( in vec4 value ) {","\treturn value;","}"].join("\n")),sRGBToLinear:new Fx(["vec4 sRGBToLinear( in vec4 value ) {","\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );","}"].join("\n")),LinearTosRGB:new Fx(["vec4 LinearTosRGB( in vec4 value ) {","\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );","}"].join("\n"))},Xx.LINEAR_TO_LINEAR="LinearToLinear",Xx.SRGB_TO_LINEAR="sRGBToLinear",Xx.LINEAR_TO_SRGB="LinearTosRGB";var Qx,Jx=class extends Fx{constructor(e="",t,r,n,i){super(e,i,n,r,t),this.nodeType="Expression"}},Zx=class extends Fe{toJSON(e){let t=super.toJSON(e),r=void 0===e||"string"==typeof e;if(void 0!==this.image&&!r){let t=this.image;if(Array.isArray(t)){e.images[t.uuid].url=[];for(let r=0;r<t.length;r++)e.images[t.uuid].url[r]=Kx(t[r])}else e.images[t.uuid].url=Kx(t)}return t}};function Kx(e){return typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap?function(e){if(/^data:/i.test(e.src))return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===Qx&&(Qx=document.createElement("canvas")),Qx.width=e.width,Qx.height=e.height;let r=Qx.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=Qx}let r=e.src.startsWith("blob:")?e.fileName:e.src;return/\.jpe?g$/i.test(r)?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}(e):(console.warn("THREE.Texture: Unable to serialize Texture."),"")}var $x=class extends Ox{constructor(e=new Zx,t,r,n){super("v4",{shared:!0}),this.nodeType="Texture",this.value=e,this.uv=null!=t?t:new qx,this.bias=r,this.project=void 0!==n&&n}getTexture(e,t){return super.generate(e,t,this.value.uuid,"t")}generate(e,t){var r;if("sampler2D"===t)return this.getTexture(e,t);let n,i,a=this.getTexture(e,t),o=this.uv.build(e,this.project?"v4":"v2"),s=this.bias?this.bias.build(e,"f"):void 0;void 0===s&&e.context.bias&&(s=e.context.bias.setTexture(this).build(e,"f")),n=this.project?"texture2DProj":s?"tex2DBias":"tex2D",i=s?n+"( "+a+", "+o+", "+s+" )":n+"( "+a+", "+o+" )";let l={include:e.isShader("vertex"),ignoreCache:!0},u=this.getType(e);return e.addContext(l),this.colorSpace=null!=(r=this.colorSpace)?r:new Xx(new Jx("",u)),this.colorSpace.fromDecoding(e.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(i),i=this.colorSpace.build(e,u),e.removeContext(),e.format(i,u,t)}copy(e){return super.copy(e),e.value.isRenderTargetTexture?this.value=e.value:this.value.copy(e.value),this.uv.copy(e.uv),e.bias?this.bias?this.bias.copy(e.bias):this.bias=e.bias.clone():this.bias=void 0,e.colorSpace?this.colorSpace?this.colorSpace.copy(e.colorSpace):this.colorSpace=e.colorSpace.clone():this.colorSpace=void 0,this.project=e.project,e.value.isRenderTargetTexture||(this.value.updateMatrix(),this.value.needsUpdate=!0),this}},eb=class extends Ox{constructor(e){super("f"),this.nodeType="Float",this.value=null!=e?e:0}generateReadonly(e,t,r,n,i,a){return e.format(this.value+(this.value%1?"":".0"),n,t)}copy(e){return super.copy(e),this.value=e.value,this}},tb=class extends Rx{constructor(e,t){super(),this.inputs=[],this.nodeType="FunctionCall",this.value=e,this.inputs=null!=t?t:[]}getFunction(){return this.value}getType(e){return this.value.getType(e)}generate(e,t,r,n,i){n=this.getType(e);let a=this.value,o=a.build(e,t)+"( ",s=[];if(a.inputs){for(let t=0;t<a.inputs.length;t++){let r=a.inputs[t],n=this.inputs[t]||this.inputs[r.name];s.push(n.build(e,e.getTypeByFormat(r.type)))}o+=s.join(", ")+" )"}return e.format(o,n,t)}copy(e){return super.copy(e),this.value.copy(e.value),this.inputs=e.inputs.map((e=>e.clone())),this}toJSON(e){var t;let r=this.getJSONNode(e);if(!r){let n=this.value;if(r=this.createJSONNode(e),r.value=this.value.toJSON(e).uuid,null!=(t=n.inputs)&&t.length){r.inputs={};for(let t=0;t<n.inputs.length;t++){let i=n.inputs[t],a=this.inputs[t];r.inputs[i.name]=a.toJSON(e).uuid}}}return r}},rb=class extends Rx{constructor(e=new Lx,t=new Lx,r=rb.ADD){super(),this.nodeType="Operator",this.type=e.type,this.a=e,this.b=t,this.op=r}getType(e){let t=this.a.getType(e),r=this.b.getType(e);return e.isTypeMatrix(t)?"v4":e.getTypeLength(r)>e.getTypeLength(t)?r:t}generate(e,t){let r=this.getType(e);this.type=r;let n=this.a.build(e,r),i=this.b.build(e,r);return e.format("( "+n+" "+this.op+" "+i+" )",r,t)}copy(e){return super.copy(e),this.a.copy(e.a),this.b.copy(e.b),this.op=e.op,this}},nb=rb;nb.ADD="+",nb.SUB="-",nb.MUL="*",nb.DIV="/";var ib=class extends Rx{constructor(e=new Lx,t=ib.ABS,r,n){super(),this.nodeType="Math",this.a=e,"string"!=typeof t?this.b=t:n=t,"string"!=typeof r?this.c=r:n=r,this.method=n,this.hashProperties=["method"]}getNumInputs(e){switch(this.method){case ib.MIX:case ib.CLAMP:case ib.REFRACT:case ib.SMOOTHSTEP:case ib.FACEFORWARD:return 3;case ib.MIN:case ib.MAX:case ib.MOD:case ib.STEP:case ib.REFLECT:case ib.DISTANCE:case ib.DOT:case ib.CROSS:case ib.POW:return 2;default:return 1}}getInputType(e){let t=e.getTypeLength(this.a.getType(e)),r=this.b?e.getTypeLength(this.b.getType(e)):0,n=this.c?e.getTypeLength(this.c.getType(e)):0;return t>r&&t>n?this.a.getType(e):r>n?this.b.getType(e):this.c.getType(e)}getType(e){switch(this.method){case ib.LENGTH:case ib.DISTANCE:case ib.DOT:return"f";case ib.CROSS:return"v3"}return this.getInputType(e)}generate(e,t){let r,n,i,a=this.a?e.getTypeLength(this.a.getType(e)):0,o=this.b?e.getTypeLength(this.b.getType(e)):0,s=this.c?e.getTypeLength(this.c.getType(e)):0,l=this.getInputType(e),u=this.getType(e);switch(this.type=u,this.method){case ib.NEGATE:return e.format("( -"+this.a.build(e,l)+" )",l,t);case ib.INVERT:return e.format("( 1.0 - "+this.a.build(e,l)+" )",l,t);case ib.CROSS:r=this.a.build(e,"v3"),n=this.b.build(e,"v3");break;case ib.STEP:r=this.a.build(e,1===a?"f":l),n=this.b.build(e,l);break;case ib.MIN:case ib.MAX:case ib.MOD:r=this.a.build(e,l),n=this.b.build(e,1===o?"f":l);break;case ib.REFRACT:r=this.a.build(e,l),n=this.b.build(e,l),i=this.c.build(e,"f");break;case ib.MIX:r=this.a.build(e,l),n=this.b.build(e,l),i=this.c.build(e,1===s?"f":l);break;default:r=this.a.build(e,l),this.b&&(n=this.b.build(e,l)),this.c&&(i=this.c.build(e,l))}let c=[];c.push(r),n&&c.push(n),i&&c.push(i);let h=this.getNumInputs(e);if(c.length!==h)throw Error(`Arguments not match used in "${this.method}". Require ${h}, currently ${c.length}.`);return e.format(this.method+"( "+c.join(", ")+" )",u,t)}copy(e){return super.copy(e),this.a.copy(e.a),this.b=e.b instanceof Lx?e.b.clone():e.b,this.c=e.c instanceof Lx?e.c.clone():e.c,this.method=e.method,this}},ab=ib;ab.RAD="radians",ab.DEG="degrees",ab.EXP="exp",ab.EXP2="exp2",ab.LOG="log",ab.LOG2="log2",ab.SQRT="sqrt",ab.INV_SQRT="inversesqrt",ab.FLOOR="floor",ab.CEIL="ceil",ab.NORMALIZE="normalize",ab.FRACT="fract",ab.SATURATE="saturate",ab.SIN="sin",ab.COS="cos",ab.TAN="tan",ab.ASIN="asin",ab.ACOS="acos",ab.ARCTAN="atan",ab.ABS="abs",ab.SIGN="sign",ab.LENGTH="length",ab.NEGATE="negate",ab.INVERT="invert",ab.MIN="min",ab.MAX="max",ab.MOD="mod",ab.STEP="step",ab.REFLECT="reflect",ab.DISTANCE="distance",ab.DOT="dot",ab.CROSS="cross",ab.POW="pow",ab.MIX="mix",ab.CLAMP="clamp",ab.REFRACT="refract",ab.SMOOTHSTEP="smoothstep",ab.FACEFORWARD="faceforward";var ob=class extends Rx{constructor(e=new Lx,t=new Lx,r=new Lx){super("v4"),this.nodeType="TextureCubeUV",this.value=e,this.uv=t,this.bias=r}bilinearCubeUV(e,t,r,n){var i,a,o,s;let l=new tb(ob.Nodes.bilinearCubeUV,[t,r,n]);this.colorSpaceTL=null!=(i=this.colorSpaceTL)?i:new Xx(new Jx("","v4")),this.colorSpaceTL.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTL.input.parse(l.build(e)+".tl"),this.colorSpaceTR=null!=(a=this.colorSpaceTR)?a:new Xx(new Jx("","v4")),this.colorSpaceTR.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTR.input.parse(l.build(e)+".tr"),this.colorSpaceBL=null!=(o=this.colorSpaceBL)?o:new Xx(new Jx("","v4")),this.colorSpaceBL.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBL.input.parse(l.build(e)+".bl"),this.colorSpaceBR=null!=(s=this.colorSpaceBR)?s:new Xx(new Jx("","v4")),this.colorSpaceBR.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBR.input.parse(l.build(e)+".br");let u={include:e.isShader("vertex"),ignoreCache:!0};e.addContext(u),this.colorSpaceTLExp=new Jx(this.colorSpaceTL.build(e,"v4"),"v4"),this.colorSpaceTRExp=new Jx(this.colorSpaceTR.build(e,"v4"),"v4"),this.colorSpaceBLExp=new Jx(this.colorSpaceBL.build(e,"v4"),"v4"),this.colorSpaceBRExp=new Jx(this.colorSpaceBR.build(e,"v4"),"v4"),e.removeContext();let c=new Jx("mix( mix( cubeUV_TL, cubeUV_TR, cubeUV.f.x ), mix( cubeUV_BL, cubeUV_BR, cubeUV.f.x ), cubeUV.f.y )","v4");return c.keywords.cubeUV_TL=this.colorSpaceTLExp,c.keywords.cubeUV_TR=this.colorSpaceTRExp,c.keywords.cubeUV_BL=this.colorSpaceBLExp,c.keywords.cubeUV_BR=this.colorSpaceBRExp,c.keywords.cubeUV=l,c}generate(e,t){if(e.isShader("fragment")){let r=this.uv,n=this.bias||e.context.roughness,i=new tb(ob.Nodes.roughnessToMip,[n]),a=new ab(i,ob.Nodes.m0,ob.Nodes.cubeUV_maxMipLevel,ab.CLAMP),o=new ab(a,ab.FLOOR),s=new ab(a,ab.FRACT),l=this.bilinearCubeUV(e,this.value,r,o),u=this.bilinearCubeUV(e,this.value,r,new nb(o,new eb(1).setReadonly(!0),nb.ADD)),c=new ab(l,u,s,ab.MIX);return e.format(c.build(e),"v4",t)}return console.warn("TextureCubeUVNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.getType(e),t)}copy(e){return super.copy(e),this.uv.copy(e.uv),this.bias.copy(e.bias),this.value.copy(e.value),e.colorSpaceTL?this.colorSpaceTL?this.colorSpaceTL.copy(e.colorSpaceTL):this.colorSpaceTL=e.colorSpaceTL.clone():this.colorSpaceTL=void 0,e.colorSpaceTR?this.colorSpaceTR?this.colorSpaceTR.copy(e.colorSpaceTR):this.colorSpaceTR=e.colorSpaceTR.clone():this.colorSpaceTR=void 0,e.colorSpaceBL?this.colorSpaceBL?this.colorSpaceBL.copy(e.colorSpaceBL):this.colorSpaceBL=e.colorSpaceBL.clone():this.colorSpaceBL=void 0,e.colorSpaceBR?this.colorSpaceBR?this.colorSpaceBR.copy(e.colorSpaceBR):this.colorSpaceBR=e.colorSpaceBR.clone():this.colorSpaceBR=void 0,e.colorSpaceTLExp?this.colorSpaceTLExp?this.colorSpaceTLExp.copy(e.colorSpaceTLExp):this.colorSpaceTLExp=e.colorSpaceTLExp.clone():this.colorSpaceTLExp=void 0,e.colorSpaceTRExp?this.colorSpaceTRExp?this.colorSpaceTRExp.copy(e.colorSpaceTRExp):this.colorSpaceTRExp=e.colorSpaceTRExp.clone():this.colorSpaceTRExp=void 0,e.colorSpaceBLExp?this.colorSpaceBLExp?this.colorSpaceBLExp.copy(e.colorSpaceBLExp):this.colorSpaceBLExp=e.colorSpaceBLExp.clone():this.colorSpaceBLExp=void 0,e.colorSpaceBRExp?this.colorSpaceBRExp?this.colorSpaceBRExp.copy(e.colorSpaceBRExp):this.colorSpaceBRExp=e.colorSpaceBRExp.clone():this.colorSpaceBRExp=void 0,this}},sb=ob;sb.Nodes=function(){let e=new Wx("struct TextureCubeUVData {\n\t\t\tvec4 tl;\n\t\t\tvec4 tr;\n\t\t\tvec4 br;\n\t\t\tvec4 bl;\n\t\t\tvec2 f;\n\t\t}"),t=new Hx("float cubeUV_maxMipLevel 8.0",!0),r=new Hx("float cubeUV_minMipLevel 4.0",!0),n=new Hx("float cubeUV_maxTileSize 256.0",!0),i=new Hx("float cubeUV_minTileSize 16.0",!0),a=new Fx("float getFace(vec3 direction) {\n\t\t\t\tvec3 absDirection = abs(direction);\n\t\t\t\tfloat face = -1.0;\n\t\t\t\tif (absDirection.x > absDirection.z) {\n\t\t\t\t\tif (absDirection.x > absDirection.y)\n\t\t\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\t\t\telse\n\t\t\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t\t\t} else {\n\t\t\t\t\tif (absDirection.z > absDirection.y)\n\t\t\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\t\t\telse\n\t\t\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t\t\t}\n\t\t\t\treturn face;\n\t\t}");a.useKeywords=!1;let o=new Fx("vec2 getUV(vec3 direction, float face) {\n\t\t\t\tvec2 uv;\n\t\t\t\tif (face == 0.0) {\n\t\t\t\t\tuv = vec2(direction.z, direction.y) / abs(direction.x); // pos x\n\t\t\t\t} else if (face == 1.0) {\n\t\t\t\t\tuv = vec2(-direction.x, -direction.z) / abs(direction.y); // pos y\n\t\t\t\t} else if (face == 2.0) {\n\t\t\t\t\tuv = vec2(-direction.x, direction.y) / abs(direction.z); // pos z\n\t\t\t\t} else if (face == 3.0) {\n\t\t\t\t\tuv = vec2(-direction.z, direction.y) / abs(direction.x); // neg x\n\t\t\t\t} else if (face == 4.0) {\n\t\t\t\t\tuv = vec2(-direction.x, direction.z) / abs(direction.y); // neg y\n\t\t\t\t} else {\n\t\t\t\t\tuv = vec2(direction.x, direction.y) / abs(direction.z); // neg z\n\t\t\t\t}\n\t\t\t\treturn 0.5 * (uv + 1.0);\n\t\t}");o.useKeywords=!1;let s=new Fx("TextureCubeUVData bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {\n\t\t\tfloat face = getFace(direction);\n\t\t\tfloat filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);\n\t\t\tmipInt = max(mipInt, cubeUV_minMipLevel);\n\t\t\tfloat faceSize = exp2(mipInt);\n\t\t\tfloat texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);\n\t\t\tvec2 uv = getUV(direction, face) * (faceSize - 1.0);\n\t\t\tvec2 f = fract(uv);\n\t\t\tuv += 0.5 - f;\n\t\t\tif (face > 2.0) {\n\t\t\t\tuv.y += faceSize;\n\t\t\t\tface -= 3.0;\n\t\t\t}\n\t\t\tuv.x += face * faceSize;\n\t\t\tif(mipInt < cubeUV_maxMipLevel){\n\t\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t\t}\n\t\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\t\tuv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);\n\t\t\tuv *= texelSize;\n\t\t\tvec4 tl = texture2D(envMap, uv);\n\t\t\tuv.x += texelSize;\n\t\t\tvec4 tr = texture2D(envMap, uv);\n\t\t\tuv.y += texelSize;\n\t\t\tvec4 br = texture2D(envMap, uv);\n\t\t\tuv.x -= texelSize;\n\t\t\tvec4 bl = texture2D(envMap, uv);\n\t\t\treturn TextureCubeUVData( tl, tr, br, bl, f );\n\t\t}",[e,a,o,t,r,n,i]);s.useKeywords=!1;let l=new Hx("float r0 1.0",!0),u=new Hx("float v0 0.339",!0),c=new Hx("float m0 -2.0",!0),h=new Hx("float r1 0.8",!0),d=new Hx("float v1 0.276",!0),p=new Hx("float m1 -1.0",!0),f=new Hx("float r4 0.4",!0),m=new Hx("float v4 0.046",!0),g=new Hx("float m4 2.0",!0),v=new Hx("float r5 0.305",!0),y=new Hx("float v5 0.016",!0),x=new Hx("float m5 3.0",!0),b=new Hx("float r6 0.21",!0),w=new Hx("float v6 0.0038",!0),S=new Hx("float m6 4.0",!0);return{bilinearCubeUV:s,roughnessToMip:new Fx("float roughnessToMip(float roughness) {\n\t\t\tfloat mip = 0.0;\n\t\t\tif (roughness >= r1) {\n\t\t\t\tmip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;\n\t\t\t} else if (roughness >= r4) {\n\t\t\t\tmip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;\n\t\t\t} else if (roughness >= r5) {\n\t\t\t\tmip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;\n\t\t\t} else if (roughness >= r6) {\n\t\t\t\tmip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;\n\t\t\t} else {\n\t\t\t\tmip = -2.0 * log2(1.16 * roughness);// 1.16 = 1.79^0.25\n\t\t\t}\n\t\t\treturn mip;\n\t\t}",[l,u,c,h,d,p,f,m,g,v,y,x,b,w,S]),m0:c,cubeUV_maxMipLevel:t}}();var lb=class extends Rx{constructor(e){super("v3"),this.nodeType="Normal",this.scope=null!=e?e:lb.VIEW}getShared(){return this.scope===lb.WORLD}build(e,t,r,n){let i=e.context[this.scope+"Normal"];return i?i.build(e,t,r,n):super.build(e,t,r)}generate(e,t,r,n,i){let a;switch(this.scope){case lb.VIEW:a=e.isShader("vertex")?"transformedNormal":"geometryNormal";break;case lb.LOCAL:e.isShader("vertex")?a="objectNormal":(e.requires.normal=!0,a="vObjectNormal");break;case lb.WORLD:e.isShader("vertex")?a="inverseTransformDirection( transformedNormal, viewMatrix ).xyz":(e.requires.worldNormal=!0,a="vWNormal")}return e.format(a,this.getType(e),t)}copy(e){return super.copy(e),this.scope=e.scope,this}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),t.scope=this.scope),t.nodeType=this.nodeType,t}fromJSON(e,t){return super.fromJSON(e,t),e.scope&&(this.scope=e.scope),this}},ub=lb;ub.LOCAL="local",ub.WORLD="world",ub.VIEW="view",ub.NORMAL="normal",Px.addKeyword("viewNormal",(function(){return new ub(ub.VIEW)})),Px.addKeyword("localNormal",(function(){return new ub(ub.NORMAL)})),Px.addKeyword("worldNormal",(function(){return new ub(ub.WORLD)}));var cb=class extends Rx{constructor(e){super("v3"),this.nodeType="Position",this.scope=null!=e?e:cb.LOCAL}getType(){return this.scope===cb.PROJECTION?"v4":this.type}getShader(){switch(this.scope){case cb.LOCAL:case cb.WORLD:return!1}return!0}generate(e,t,r,n,i){let a;switch(this.scope){case cb.LOCAL:e.isShader("vertex")?a="transformed":(e.requires.position=!0,a="vPosition");break;case cb.WORLD:if(e.isShader("vertex"))return"( modelMatrix * vec4( transformed, 1.0 ) ).xyz";e.requires.worldPosition=!0,a="vWPosition";break;case cb.VIEW:a=e.isShader("vertex")?"-mvPosition.xyz":"vViewPosition";break;case cb.PROJECTION:a=e.isShader("vertex")?"( projectionMatrix * modelViewMatrix * vec4( position, 1.0 ) )":"vec4( 0.0 )"}return e.format(a,this.getType(),t)}copy(e){return super.copy(e),this.scope=e.scope,this}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),t.scope=this.scope),t.nodeType=this.nodeType,t}fromJSON(e,t){return super.fromJSON(e,t),e.scope&&(this.scope=e.scope),this}},hb=cb;hb.LOCAL="local",hb.WORLD="world",hb.VIEW="view",hb.PROJECTION="projection",Px.addKeyword("position",(function(){return new hb})),Px.addKeyword("worldPosition",(function(){return new hb(hb.WORLD)})),Px.addKeyword("viewPosition",(function(){return new hb(hb.VIEW)}));var db=class extends Rx{constructor(e){super("v3"),this.nodeType="Reflect",this.scope=null!=e?e:db.CUBE}getUnique(e){return!e.context.viewNormal}getType(){return this.scope===db.SPHERE?"v2":this.type}generate(e,t){let r=this.getUnique(e);if(e.isShader("fragment")){let n;switch(this.scope){case db.VECTOR:{let t=new ub(ub.VIEW),i=e.context.roughness,a=t.build(e,"v3"),o=new hb(hb.VIEW).build(e,"v3"),s=i?i.build(e,"f"):void 0,l=`reflect( -normalize( ${o} ), ${a} )`;s&&(l=`normalize( mix( ${l}, ${a}, ${s} * ${s} ) )`);let u=`inverseTransformDirection( ${l}, viewMatrix )`;r?(e.addNodeCode(`vec3 reflectVec = ${u};`),n="reflectVec"):n=u;break}case db.CUBE:{let t=new db(db.VECTOR).build(e,"v3"),i="vec3( -"+t+".x, "+t+".yz )";r?(e.addNodeCode(`vec3 reflectCubeVec = ${i};`),n="reflectCubeVec"):n=i;break}case db.SPHERE:{let t="normalize( ( viewMatrix * vec4( "+new db(db.VECTOR).build(e,"v3")+", 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) ).xy * 0.5 + 0.5";r?(e.addNodeCode(`vec2 reflectSphereVec = ${t};`),n="reflectSphereVec"):n=t;break}}return e.format(n,this.getType(),t)}return console.warn("ReflectNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.type,t)}copy(e){return super.copy(e),this.scope=e.scope,this}toJSON(e){let t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),t.scope=this.scope),t.nodeType=this.nodeType,t}fromJSON(e,t){return super.fromJSON(e,t),e.scope&&(this.scope=e.scope),this}},pb=db;pb.CUBE="cube",pb.SPHERE="sphere",pb.VECTOR="vector";var fb=class extends Rx{constructor(e=new $x,t,r){super("v4"),this.nodeType="TextureCube",this.value=e,this.radianceNode=new sb(this.value,null!=t?t:new pb(pb.VECTOR),r),this.irradianceNode=new sb(this.value,new ub(ub.WORLD),new eb(1).setReadonly(!0))}generate(e,t){return e.isShader("fragment")?(e.require("irradiance"),e.context.bias&&e.context.bias.setTexture(this.value),("irradiance"===e.slot?this.irradianceNode:this.radianceNode).build(e,t)):(console.warn("TextureCubeNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.getType(e),t))}copy(e){return super.copy(e),this.value.copy(e.value),this.radianceNode.copy(e.radianceNode),this.irradianceNode.copy(e.irradianceNode),this}},mb=class extends Ox{constructor(e=new Jr,t,r){super("v4",{shared:!0}),this.nodeType="CubeTexture",this.value=e,this.uv=null!=t?t:new pb,this.bias=r}getTexture(e,t){return super.generate(e,t,this.value.uuid,"tc")}generate(e,t){var r,n;if("samplerCube"===t)return this.getTexture(e,t);let i,a=this.getTexture(e,t),o=null==(r=this.uv)?void 0:r.build(e,"v3"),s=this.bias?this.bias.build(e,"f"):void 0;void 0===s&&e.context.bias&&(s=e.context.bias.setTexture(this).build(e,"f")),i=s?"texCubeBias( "+a+", "+o+", "+s+" )":"texCube( "+a+", "+o+" )";let l={include:e.isShader("vertex"),ignoreCache:!0},u=this.getType(e);return e.addContext(l),this.colorSpace=null!=(n=this.colorSpace)?n:new Xx(new Jx("",u)),this.colorSpace.fromDecoding(e.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(i),i=this.colorSpace.build(e,u),e.removeContext(),e.format(i,u,t)}copy(e){return super.copy(e),this.value.copy(e.value),e.uv?this.uv?this.uv.copy(e.uv):this.uv=e.uv.clone():this.uv=void 0,e.bias?this.bias?this.bias.copy(e.bias):this.bias=e.bias.clone():this.bias=void 0,this}},gb=["x","y","z","w"],vb=["float","vec2","vec3","vec4"],yb={float:"f",vec2:"v2",vec3:"v3",vec4:"v4",mat4:"v4",int:"i",bool:"b","float[]":"f[]","vec4[]":"v4[]"},xb={t:"sampler2D",tc:"samplerCube",b:"bool",i:"int",f:"float",c:"vec3",v2:"vec2",v3:"vec3",v4:"vec4",m3:"mat3",m4:"mat4","f[]":"float[]","v4[]":"vec4[]"},bb=class extends Lx{constructor(e=new Lx){super("v4"),this.nodeType="Raw",this.value=e}generate(e){let t=this.value.analyzeAndFlow(e,this.type),r=t.code+"\n";return e.isShader("vertex")?r+="gl_Position = "+t.result+";":r+="gl_FragColor = "+t.result+";",r}copy(e){return super.copy(e),this.value.copy(e.value),this}},wb=class extends Ox{constructor(e=0,t,r,n){super("c"),this.nodeType="Color",this.value=e instanceof hx?e:new hx(e||0,t,r,n)}setRGBA(e){this.value.setRGBA(e.r,e.g,e.b,e.a)}generate(e,t,r,n,i,a){r=e.getUUID(null!=r?r:this.getUUID()),n=null!=n?n:this.getType(e);let o=e.getNodeData(r),s=this.getReadonly()&&void 0!==this.generateReadonly;if(this.alpha){let t=this.alpha.build(e,"f");e.addFragmentNodeCode(`accumAlpha += ( 1.0 - accumAlpha ) * ${t};`)}return s?this.generateReadonly(e,t,r,n,i,a):e.isShader("vertex")?(o.vertex||(o.vertex=e.createVertexUniform(n,this,i,a,this.getLabel())),e.format(o.vertex.name,n,t)):(o.fragment||(o.fragment=e.createFragmentUniform(n,this,i,a,this.getLabel())),e.format(o.fragment.name,n,t))}generateReadonly(e,t,r,n,i,a){return e.format("vec3("+this.value.r+", "+this.value.g+", "+this.value.b+")",n,t)}},Sb=class extends Ox{constructor(e){super("i"),this.nodeType="Int",this.value=Math.floor(null!=e?e:0)}generateReadonly(e,t,r,n,i,a){return e.format(this.value.toString(),n,t)}copy(e){return super.copy(e),this.value=e.value,this}},_b=class{constructor(e,t,r,n){if(this.next=void 0,this.uniforms={},this.textures={},this.defines={},this.id=e,this.uuid=t,r){this.type=r.type;for(let e in r)"type"!==e&&"calpha"!==e&&(this.uniforms[`f${this.id}_${e}`]=r[e]);for(let e in n)this.defines[e]=n[e]}}copy(e){this.id=e.id,this.type=e.type,this.defines=g({},e.defines);for(let t in e.uniforms)"transmissionSamplerMap"===this.getName(t)||"transmissionDepthMap"===this.getName(t)||(this.uniforms[t]?this.uniforms[t].copy(e.uniforms[t]):this.uniforms[t]=e.uniforms[t].clone());return this}clone(){return new _b(this.id).copy(this)}fromJSON(e,t){this.id=e.id,this.defines=g({},e.defines);for(let r in e.uniforms)this.uniforms[r]=t.getNode(e.uniforms[r]);if("texture"===e.type){if(!(`f${this.id}_textureSize`in this.uniforms)){let t=this.uniforms[`f${this.id}_texture`].value.image;this.uniforms[`f${e.id}_textureSize`]=new Ix(t.width,t.height)}`f${this.id}_size`in this.uniforms||(this.uniforms[`f${e.id}_size`]=new kx(200,200)),`f${e.id}_axis`in this.uniforms||(this.uniforms[`f${e.id}_axis`]=new Sb(0)),`f${e.id}_projection`in this.uniforms||(this.uniforms[`f${e.id}_projection`]=new Sb(0))}else"noise"===e.type?(`f${e.id}_noiseType`in this.uniforms||(this.uniforms[`f${e.id}_noiseType`]=new Sb(0)),`f${e.id}_size`in this.uniforms||(this.uniforms[`f${e.id}_size`]=new Ix(-1,-1,-1))):"depth"===e.type&&(`f${e.id}_isWorldSpace`in this.uniforms||(this.uniforms[`f${e.id}_isWorldSpace`]=new eb(1)));return this}toJSON(e){let t={};for(let r in this.uniforms)t[r]=this.uniforms[r].toJSON(e).uuid;return{id:this.id,type:this.type,defines:JSON.parse(JSON.stringify(this.defines)),uniforms:t,next:null==this.next?void 0:this.next.toJSON(e)}}copyUniforms(e){for(let t in this.uniforms){let r=this.getName(t);void 0!==r&&e.uniforms[`f${e.id}_${r}`]&&"transmissionDepthMap"!==r&&"transmissionSamplerMap"!==r&&this.uniforms[t].copy(e.uniforms[`f${e.id}_${r}`])}return this}hasValueByKey(e){return void 0!==this.uniforms[e]}hasValue(e){return this.hasValueByKey(`f${this.id}_${e}`)}setValue(e,t){let r=`f${this.id}_${e}`;this.hasValueByKey(r)&&void 0!==t&&(this.uniforms[r].value=t)}getValue(e){let t=`f${this.id}_${e}`;if(this.hasValueByKey(t))return this.uniforms[t].value}getValues(){let e={type:this.type};for(let t in this.uniforms){let r=this.getName(t);if(void 0===r)continue;let n=this.uniforms[`f${this.id}_${r}`].value;void 0!==n&&(Array.isArray(n)?e[r]=n.map((e=>e.clone?e.clone():e)):e[r]=n.clone?n.clone():n)}return e}getName(e){let t=/f\d+_(.*)/.exec(e);if(t&&t.length>1)return t[1];console.log(`Layer.getName: error ${e}`)}getNames(){let e=[];for(let t in this.uniforms){let r=this.getName(t);r&&e.push(r)}return e}isEqual(e){for(let t in e.uniforms){let r=e.getName(t);if(!r)return!1;let n=this.getValue(r),i=e.uniforms[t].value;if(i.value instanceof Fe){if(n.image!==i.image)return!1}else if(Array.isArray(i)){let e=n;for(let t=0,r=e.length;t<r;++t)if(e[t]!==i[t])return!1}else{let e=n;if(e.equals){if(!e.equals(i))return!1}else if(n!==i)return!1}}return!0}dispose(){}};function Ab(e){let t=e instanceof _b?e.type:e;return"texture"===t||"displace_map"===t||"matcap"===t}var Mb=class extends Ox{constructor(e){super("b"),this.nodeType="Bool",this.value=null!=e&&e}generateReadonly(e,t,r,n){return e.format(this.value?"true":"false",n,t)}copy(e){return super.copy(e),this.value=e.value,this}},Eb=class extends Ox{constructor(e=1,t){super("v4[]"),this.nodeType="Vector4Array",this.size=e,this.value=Array.isArray(t)?t:t instanceof Ue?new Array(e).fill(t):new Array(e).fill(new Ue(0))}copy(e){return super.copy(e),this.value=e.value.map((e=>e.clone())),this}},Cb=class extends Ox{constructor(e=1,t){super("f[]"),this.nodeType="FloatArray",this.size=e,this.value=Array.isArray(t)?t:"number"==typeof t?new Array(e).fill(t):new Array(e).fill(0)}copy(e){return super.copy(e),this.size=e.size,this.value=[...e.value],this}},Tb=class extends Ox{constructor(e){super("m3"),this.nodeType="Matrix3",this.value=null!=e?e:new ye}generateReadonly(e,t,r,n,i,a){return e.format("mat3("+this.value.elements.join(", ")+")",n,t)}copy(e){return super.copy(e),this.elements=e.elements,this}get elements(){return this.value.elements}set elements(e){this.value.fromArray(e)}},Db=class extends Rx{constructor(e=new $x,t,r,n,i,a,o,s){super("v3"),this.nodeType="CustomTexture",this.firstTime=!0,this.texture=e,this.textureSize=t,this.crop=r,this.projection=n,this.axis=i,this.size=a,this.mat=new Tb(this.texture.value.matrix),this.alpha=o,this.mode=s,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){let r;switch(e.require("position"),e.require("uv"),e.requires.uv=[!0],e.extensions.shaderTextureLOD=!0,e.extensions.derivatives=!0,this.projection.value){case 3:r=e.include(Db.Nodes.cylindrical);break;case 2:r=e.include(Db.Nodes.spherical);break;case 1:let t=new Fx(`\n\t\tvec3 g${this.uuid.toString().replace(/-/g,"")}_planarTexture(sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float alpha, int mode, out float calpha) {\n\n\t\t\t\tvec2 uvs = ( mat * vec3( (g${this.uuid.toString().replace(/-/g,"")}_vCustomUv * 2. - 1.) / (size * .5), 1. ) / 2. + 0.5 ).xy;\n\n\t\t\t\tvec4 tmp = texture2D( tex, uvs );\n\n\t\t\t\tvec3 col = tmp.rgb;\n\t\t\t\tfloat lalpha = alpha * tmp.a;\n\t\t\t\tif ( crop > 0.5 ) {\n\t\t\t\t\tif ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {\n\t\t\t\t\t\tlalpha = 0.0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcalpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );\n\t\t\t\taccumAlpha += ( 1.0 - accumAlpha ) * lalpha;\n\t\t\t\treturn col;\n\t\t\t}`);r=e.include(t);break;default:r=e.include(Db.Nodes.uv)}if(1===this.projection.value&&this.firstTime){let t=`g${this.uuid.toString().replace(/-/g,"")}`;e.addVertexParsCode(`varying vec2 ${t}_vCustomUv;`),e.addFragmentParsCode(`varying vec2 ${t}_vCustomUv;`),e.addVertexFinalCode(`\n                        vec3 ${t}_posN = transformed;\n${0===this.axis.value?`\n\t\t\t\t\t\t\t\t\t   float ${t}_u = (1. + (${t}_posN.z)) / 2.;\n\t\t\t\t\t\t\t\t\t   float ${t}_v = (1. + (${t}_posN.y)) / 2.;\n\t\t\t\t\t\t\t\t\t   `:""}\n\n${1===this.axis.value?`\n\t\t\t\t\t\t\t\t\t   float ${t}_u = (1. + (${t}_posN.x)) / 2.;\n\t\t\t\t\t\t\t\t\t   float ${t}_v = (1. - (${t}_posN.z)) / 2.;\n\t\t\t\t\t\t\t\t\t   `:""}\n\n${2===this.axis.value?`\n\t\t\t\t\t\t\t\t\t   float ${t}_u = (1. + (${t}_posN.x)) / 2.;\n\t\t\t\t\t\t\t\t\t   float ${t}_v = (1. + (${t}_posN.y)) / 2.;\n\t\t\t\t\t\t\t\t\t   `:""}\n\n                        ${t}_vCustomUv = vec2(${t}_u, ${t}_v);\n                    `)}e.addFragmentVariable(this.calpha,"float");let n=[];return n.push(this.texture.getTexture(e,"t")),n.push(this.textureSize.build(e,"v2")),n.push(this.crop.build(e,"f")),n.push(this.mat.build(e,"mat3")),n.push(this.size.build(e,"v2")),n.push(this.alpha.build(e,"f")),n.push(this.mode.build(e,"i")),n.push(this.calpha),this.firstTime=!this.firstTime,e.format(r+"("+n.join(",")+")",this.getType(e),t)}copy(e){return super.copy(e),this.texture.copy(e.texture),this.textureSize=e.textureSize.clone(),this.crop=e.crop.clone(),this.projection=e.projection.clone(),this.axis=e.axis.clone(),this.size=e.size.clone(),this.alpha=e.alpha.clone(),this.mode=e.mode.clone(),this}},Lb=Db;Lb.Nodes={cylindrical:new Fx("\nvec3 cylindricalTexture(sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float alpha, int mode, out float calpha) {\n                vec3 posN = normalize(position);\n                float u = 0.5 + atan(posN.z, posN.x) / (2.*3.1415);\n                float scaledHeight = position.y / (size.y * 0.5);\n                float v =  (scaledHeight / 2.) + .5;\n\n                vec2 calculatedUv = vec2(u,v);\n\t\t\t\tvec2 uvs = ( mat * vec3( calculatedUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;\n\n                vec2 df = fwidth(uvs);\n               \tif(df.x > 0.5) df.x = 0.;\n\n\t\t\t\t#ifdef GL_EXT_shader_texture_lod\n                vec4 tmp = texture2DLodEXT(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));\n\t\t\t\t#else\n                vec4 tmp = textureLod(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));\n\t\t\t\t#endif\n\n\t\t\t\tvec3 col = tmp.rgb;\n\t\t\t\tfloat lalpha = alpha * tmp.a;\n\t\t\t\tif ( crop > 0.5 ) {\n\t\t\t\t\tif ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {\n\t\t\t\t\t\tlalpha = 0.0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcalpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );\n\t\t\t\taccumAlpha += ( 1.0 - accumAlpha ) * lalpha;\n\t\t\t\treturn col;\n\t\t\t}\n"),spherical:new Fx("\nvec3 sphericalTexture(sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float alpha, int mode, out float calpha) {\n                vec3 posN = normalize(vPosition);\n                float u = 0.5 + atan(posN.z, posN.x) / (2.*3.1415);\n                float v = 0.5 + asin(posN.y) / 3.1415;\n\n                vec2 calculatedUv = vec2(u,v);\n\t\t\t\tvec2 uvs = ( mat * vec3( calculatedUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;\n\n                vec2 df = fwidth(uvs);\n               \tif(df.x > 0.5) df.x = 0.;\n\t\t\t\t#ifdef GL_EXT_shader_texture_lod\n                vec4 tmp = texture2DLodEXT(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));\n\t\t\t\t#else\n                vec4 tmp = textureLod(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));\n\t\t\t\t#endif\n\n\t\t\t\tvec3 col = tmp.rgb;\n\t\t\t\tfloat lalpha = alpha * tmp.a;\n\t\t\t\tif ( crop > 0.5 ) {\n\t\t\t\t\tif ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {\n\t\t\t\t\t\tlalpha = 0.0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcalpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );\n\t\t\t\taccumAlpha += ( 1.0 - accumAlpha ) * lalpha;\n\t\t\t\treturn col;\n\t\t\t}\n"),uv:new Fx("vec3 uvTexture(sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float alpha, int mode, out float calpha) {\n\n\t\t\t\tvec2 uvs = ( mat * vec3( vUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;\n\t\t\t\tvec4 tmp = texture2D( tex, uvs );\n\n\t\t\t\tvec3 col = tmp.rgb;\n\n\t\t\t\tfloat lalpha = alpha * tmp.a;\n\t\t\t\tif ( crop > 0.5 ) {\n\t\t\t\t\tif ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {\n\t\t\t\t\t\tlalpha = 0.0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcalpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );\n\t\t\t\taccumAlpha += ( 1.0 - accumAlpha ) * lalpha;\n\t\t\t\treturn col;\n\t\t\t}")};var Pb=class extends Rx{constructor(e,t,r,n,i,a,o){super("v3"),this.nodeType="Fresnel",this.color=e,this.bias=t,this.scale=r,this.intensity=n,this.factor=i,this.alpha=a,this.mode=o,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.require("vWorldViewDir"),e.require("worldNormal"),e.isShader("fragment")){e.addFragmentVariable(this.calpha,"float");let r=e.include(Pb.Nodes.fresnel),n=[];return n.push(this.color.build(e,"c")),n.push(this.bias.build(e,"f")),n.push(this.scale.build(e,"f")),n.push(this.intensity.build(e,"f")),n.push(this.factor.build(e,"f")),n.push(this.alpha.build(e,"f")),n.push(this.mode.build(e,"i")),n.push(this.calpha),e.format(r+"("+n.join(",")+")",this.getType(e),t)}return console.warn("FresnelNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}copy(e){return super.copy(e),this.color=e.color.clone(),this.bias=e.bias.clone(),this.scale=e.scale.clone(),this.intensity=e.intensity.clone(),this.factor=e.factor.clone(),this.alpha=e.alpha.clone(),this.mode=e.mode.clone(),this.calpha=e.calpha,this}},Rb=Pb;Rb.Nodes={fresnel:new Fx("vec3 fresnel(vec3 color, float bias, float scale, float intensity, float factor, float alpha, int mode, out float calpha) {\n\t\t\t\tfloat fresnel = bias + scale * pow( abs( factor + dot( normalize( vWorldViewDir ), normalize( vWNormal ) ) ), intensity );\n\n\t\t\t\tfloat lalpha = clamp( fresnel, 0.0, 1.0 ) * alpha;\n\t\t\t\tcalpha = lalpha / clamp(lalpha + accumAlpha, 0.001, 1.0);\n\t\t\t\taccumAlpha += (1.0 - accumAlpha) * lalpha;\n\t\t\t\treturn color;\n\t\t\t}")};var Ob=(e=>(e.SIMPLEX="simplex3d",e.SIMPLEX_FRACTAL="simplex3dFractal",e.ASHIMA="simplexAshima",e.FBM="fbm",e.PERLIN="perlin",e))(Ob||{}),kb=function(){let e=new Fx("vec3 random3(vec3 c) {\n\t\t\tfloat j = 4096.0*sin(dot(c,vec3(17.0, 59.4, 15.0)));\n\t\t\tvec3 r;\n\t\t\tr.z = fract(512.0*j);\n\t\t\tj *= .125;\n\t\t\tr.x = fract(512.0*j);\n\t\t\tj *= .125;\n\t\t\tr.y = fract(512.0*j);\n\t\t\treturn r-0.5;\n\t\t}"),t=new Fx("float simplex3d(vec3 p) {\n\t\t\t vec3 s = floor(p + dot(p, vec3(F3)));\n\t\t\t vec3 x = p - s + dot(s, vec3(G3));\n\t\t\t \n\t\t\t vec3 e = step(vec3(0.0), x - x.yzx);\n\t\t\t vec3 i1 = e*(1.0 - e.zxy);\n\t\t\t vec3 i2 = 1.0 - e.zxy*(1.0 - e);\n\t\t\t\t\n\t\t\t vec3 x1 = x - i1 + G3;\n\t\t\t vec3 x2 = x - i2 + 2.0*G3;\n\t\t\t vec3 x3 = x - 1.0 + 3.0*G3;\n\t\t\t \n\t\t\t vec4 w, d;\n\t\t\t \n\t\t\t w.x = dot(x, x);\n\t\t\t w.y = dot(x1, x1);\n\t\t\t w.z = dot(x2, x2);\n\t\t\t w.w = dot(x3, x3);\n\t\t\t \n\t\t\t w = max(0.6 - w, 0.0);\n\t\t\t \n\t\t\t d.x = dot(random3(s), x);\n\t\t\t d.y = dot(random3(s + i1), x1);\n\t\t\t d.z = dot(random3(s + i2), x2);\n\t\t\t d.w = dot(random3(s + 1.0), x3);\n\t\t\t \n\t\t\t w *= w;\n\t\t\t w *= w;\n\t\t\t d *= w;\n\t\t\t \n\t\t\t return dot(d, vec4(52.0));\n\t\t}",[e]);t.keywords.F3=new Hx("float F3 0.3333333"),t.keywords.G3=new Hx("float G3 0.1666667");let r=new Fx("float simplex3dFractal(vec3 m) {\n\t\t\tmat3 rot1 = mat3(-0.37, 0.36, 0.85,-0.14,-0.93, 0.34,0.92, 0.01,0.4);\n\t\t\tmat3 rot2 = mat3(-0.55,-0.39, 0.74, 0.33,-0.91,-0.24,0.77, 0.12,0.63);\n\t\t\tmat3 rot3 = mat3(-0.71, 0.52,-0.47,-0.08,-0.72,-0.68,-0.7,-0.45,0.56);\n\t\t\treturn 0.5333333 * simplex3d(m * rot1)\n\t\t\t\t + 0.2666667 * simplex3d(2.0 * m * rot2)\n\t\t\t\t + 0.1333333 * simplex3d(4.0 * m * rot3)\n\t\t\t\t + 0.0666667 * simplex3d(8.0 * m);\n\t\t}",[t]),n=new Fx("vec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}"),i=new Fx("vec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}"),a=new Fx("float simplexAshima(vec3 v) {\n\t\t  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n\t\t  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\n\t\t  vec3 i  = floor(v + dot(v, C.yyy) );\n\t\t  vec3 x0 =   v - i + dot(i, C.xxx) ;\n\t\t  vec3 g = step(x0.yzx, x0.xyz);\n\t\t  vec3 l = 1.0 - g;\n\t\t  vec3 i1 = min( g.xyz, l.zxy );\n\t\t  vec3 i2 = max( g.xyz, l.zxy );\n\t\t  vec3 x1 = x0 - i1 + 1.0 * C.xxx;\n\t\t  vec3 x2 = x0 - i2 + 2.0 * C.xxx;\n\t\t  vec3 x3 = x0 - 1. + 3.0 * C.xxx;\n\t\t  i = mod(i, 289.0 ); \n\t\t  vec4 p = permute( permute( permute( \n\t\t\t\t\t i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n\t\t\t\t   + i.y + vec4(0.0, i1.y, i2.y, 1.0 )) \n\t\t\t\t   + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n\t\t  float n_ = 1.0/7.0; // N=7\n\t\t  vec3  ns = n_ * D.wyz - D.xzx;\n\t\t  vec4 j = p - 49.0 * floor(p * ns.z *ns.z);  //  mod(p,N*N)\n\t\t  vec4 x_ = floor(j * ns.z);\n\t\t  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n\t\t  vec4 x = x_ *ns.x + ns.yyyy;\n\t\t  vec4 y = y_ *ns.x + ns.yyyy;\n\t\t  vec4 h = 1.0 - abs(x) - abs(y);\n\t\t  vec4 b0 = vec4( x.xy, y.xy );\n\t\t  vec4 b1 = vec4( x.zw, y.zw );\n\t\t  vec4 s0 = floor(b0)*2.0 + 1.0;\n\t\t  vec4 s1 = floor(b1)*2.0 + 1.0;\n\t\t  vec4 sh = -step(h, vec4(0.0));\n\t\t  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n\t\t  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\n\t\t  vec3 p0 = vec3(a0.xy,h.x);\n\t\t  vec3 p1 = vec3(a0.zw,h.y);\n\t\t  vec3 p2 = vec3(a1.xy,h.z);\n\t\t  vec3 p3 = vec3(a1.zw,h.w);\n\t\t  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n\t\t  p0 *= norm.x;\n\t\t  p1 *= norm.y;\n\t\t  p2 *= norm.z;\n\t\t  p3 *= norm.w;\n\t\t  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n\t\t  m = m * m;\n\t\t  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1), \n\t\t\t\t\t\t\t\t\t\tdot(p2,x2), dot(p3,x3) ) );\n\t\t}",[n,i]),o=new Fx("vec4 mod289(vec4 x){return x - floor(x * (1.0 / 289.0)) * 289.0;}"),s=new Fx("vec4 perm(vec4 x){return mod289(((x * 34.0) + 1.0) * x);}",[o]),l=new Fx("float noise(vec3 p){\n\t\t\tvec3 a = floor(p);\n\t\t\tvec3 d = p - a;\n\t\t\td = d * d * (3.0 - 2.0 * d);\n\t\t\tvec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n\t\t\tvec4 k1 = perm(b.xyxy);\n\t\t\tvec4 k2 = perm(k1.xyxy + b.zzww);\n\t\t\tvec4 c = k2 + a.zzzz;\n\t\t\tvec4 k3 = perm(c);\n\t\t\tvec4 k4 = perm(c + 1.0);\n\t\t\tvec4 o1 = fract(k3 * (1.0 / 41.0));\n\t\t\tvec4 o2 = fract(k4 * (1.0 / 41.0));\n\t\t\tvec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n\t\t\tvec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\t\t\treturn o4.y * d.y + o4.x * (1.0 - d.y);\n\t\t}",[s]),u=new Fx("float fbm(vec3 x) {\n\t\t\tfloat v = 0.0;\n\t\t\tfloat a = 0.5;\n\t\t\tvec3 shift = vec3(100);\n\t\t\tfor (int i = 0; i < NUM_OCTAVES; ++i) {\n\t\t\t\tv += a * noise(x);\n\t\t\t\tx = x * 2.0 + shift;\n\t\t\t\ta *= 0.5;\n\t\t\t}\n\t\t\treturn v;\n\t\t}",[l]);u.keywords.NUM_OCTAVES=new Hx("int NUM_OCTAVES 5");let c=new Fx("vec3 fade(vec3 t) {return t*t*t*(t*(t*6.0-15.0)+10.0);}");return{simplex:t,simplexFractal:r,simplexAshima:a,fbm:u,perlin:new Fx("float perlin(vec3 P){\n\t\t  vec3 Pi0 = floor(P);\n\t\t  vec3 Pi1 = Pi0 + vec3(1.0);\n\t\t  Pi0 = mod(Pi0, 289.0);\n\t\t  Pi1 = mod(Pi1, 289.0);\n\t\t  vec3 Pf0 = fract(P);\n\t\t  vec3 Pf1 = Pf0 - vec3(1.0);\n\t\t  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n\t\t  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n\t\t  vec4 iz0 = Pi0.zzzz;\n\t\t  vec4 iz1 = Pi1.zzzz;\n\t\t  vec4 ixy = permute(permute(ix) + iy);\n\t\t  vec4 ixy0 = permute(ixy + iz0);\n\t\t  vec4 ixy1 = permute(ixy + iz1);\n\t\t  vec4 gx0 = ixy0 / 7.0;\n\t\t  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n\t\t  gx0 = fract(gx0);\n\t\t  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n\t\t  vec4 sz0 = step(gz0, vec4(0.0));\n\t\t  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n\t\t  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\t\t  vec4 gx1 = ixy1 / 7.0;\n\t\t  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n\t\t  gx1 = fract(gx1);\n\t\t  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n\t\t  vec4 sz1 = step(gz1, vec4(0.0));\n\t\t  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n\t\t  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\t\t  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);\n\t\t  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);\n\t\t  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);\n\t\t  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);\n\t\t  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);\n\t\t  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);\n\t\t  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);\n\t\t  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);\n\t\t  vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n\t\t  g000 *= norm0.x;\n\t\t  g010 *= norm0.y;\n\t\t  g100 *= norm0.z;\n\t\t  g110 *= norm0.w;\n\t\t  vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n\t\t  g001 *= norm1.x;\n\t\t  g011 *= norm1.y;\n\t\t  g101 *= norm1.z;\n\t\t  g111 *= norm1.w;\n\t\t  float n000 = dot(g000, Pf0);\n\t\t  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n\t\t  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n\t\t  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n\t\t  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n\t\t  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n\t\t  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n\t\t  float n111 = dot(g111, Pf1);\n\t\t  vec3 fade_xyz = fade(Pf0);\n\t\t  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);\n\t\t  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n\t\t  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x); \n\t\t  return 2.2 * n_xyz;\n\t\t}",[n,i,c])}}(),Ib=class extends Rx{constructor(e,t,r,n,i,a,o){super("v3"),this.nodeType="Rainbow",this.filmThickness=e,this.movement=t,this.wavelengths=r,this.noiseStrength=n,this.noiseScale=i,this.offset=a,this.alpha=o,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.require("vWorldViewDir"),e.require("worldNormal"),e.isShader("fragment")){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let r=e.include(Ib.Nodes.rainbow),n=[];return n.push(this.filmThickness.build(e,"f")),n.push(this.movement.build(e,"f")),n.push(this.wavelengths.build(e,"v3")),n.push(this.noiseStrength.build(e,"f")),n.push(this.noiseScale.build(e,"f")),n.push(this.offset.build(e,"v3")),n.push(this.alpha.build(e,"f")),n.push(this.calpha),e.format(r+"("+n.join(",")+")",this.getType(e),t)}return console.warn("RainbowNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}copy(e){return super.copy(e),this.filmThickness=e.filmThickness.clone(),this.movement=e.movement.clone(),this.wavelengths=e.wavelengths.clone(),this.noiseStrength=e.noiseStrength.clone(),this.noiseScale=e.noiseScale.clone(),this.offset=e.offset.clone(),this.alpha=e.alpha.clone(),this.calpha=e.calpha,this}},Bb=Ib;Bb.Nodes=function(){let e=new Fx("vec3 attenuation(vec3 wavelengths, float filmThickness, float movement, float noiseStrength, float noiseScale, vec3 offset) {\n                 vec3 st = position / noiseScale;\n\t\t\t\t vec3 q = vec3(simplex3d(st),\n\t\t\t\t\t\t\t  simplex3d(st + vec3(1.0)),\n\t\t\t\t\t\t\t  simplex3d(st + vec3(1.0)));\n\n\t\t\t\t vec3 r = vec3(simplex3d(st + vec3(1.4, 1.3, 1.0) * q + vec3(1.7, 9.2, 1.0)),\n\t\t\t\t\t\t\t  simplex3d(st + vec3(2.0, 1.2, 1.0) * q + vec3(8.3, 2.8, 1.0)),\n\t\t\t\t\t\t\t  simplex3d(st * q));\n\n                 float noise = simplex3d(st + r);\n\n                 return .5 + .5 * cos((((filmThickness + (noise * noiseStrength)) / (vec3(wavelengths.r * 1.0, wavelengths.g * 0.8, wavelengths.b * 0.6) + 1.0)) * dot(normalize(vWorldViewDir + (offset * -0.001)), normalize(vWNormal))) + movement);\n             }",[kb.simplex]);return{rainbow:new Fx("vec3 rainbow(float filmThickness, float movement, vec3 wavelengths, float noiseStrength, float noiseScale, vec3 offset, float alpha, out float calpha) {\n                 vec3 res = clamp(attenuation(wavelengths, filmThickness, movement, noiseStrength, noiseScale, offset), 0.0, 2.0);\n\n                 float rainbowContribution = clamp(res.r + res.g + res.b, 0.0, 1.0);\n                 float lalpha = alpha * rainbowContribution;\n                 calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );\n                 accumAlpha += ( 1.0 - accumAlpha ) * lalpha;\n\n                 return res;\n             }",[e])}}();var zb=class extends Rx{constructor(e,t,r,n,i,a,o,s){super("v3"),this.nodeType="Transmission",this.thickness=e,this.ior=t,this.roughness=r,this.transmissionSamplerSize=n,this.transmissionSamplerMap=i,this.transmissionDepthMap=a,this.aspectRatio=o,this.alpha=s,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.extensions.shaderTextureLOD=!0,e.extensions.derivatives=!0,e.isShader("fragment")){e.define("NUM_SAMPLES",30),e.require("worldPosition"),e.requires.worldNormal=!0,e.requires.modelMatrix=!0,e.requires.projectionMatrix=!0,e.addFragmentVariable(this.calpha,"float");let r=e.include(zb.Nodes.transmission),n=[];return n.push(this.thickness.build(e,"f")),n.push(this.ior.build(e,"f")),n.push(this.roughness.build(e,"f")),n.push(this.transmissionSamplerSize.build(e,"v2")),n.push(this.transmissionSamplerMap.getTexture(e,"t")),n.push(this.transmissionDepthMap.getTexture(e,"t")),n.push(this.aspectRatio.build(e,"v2")),n.push("normal"),n.push(this.alpha.build(e,"f")),n.push(this.calpha),e.format(r+"("+n.join(",")+")",this.getType(e),t)}return console.warn("TransmissionNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}copy(e){return super.copy(this),this.thickness=e.thickness.clone(),this.ior=e.ior.clone(),this.roughness=e.roughness.clone(),this.transmissionSamplerSize=e.transmissionSamplerSize.clone(),this.transmissionSamplerMap=e.transmissionSamplerMap,this.transmissionDepthMap=e.transmissionDepthMap,this.alpha=e.alpha.clone(),this.calpha=e.calpha,this}},Nb=zb;Nb.Nodes=function(){let e=new Fx("\n            float gaussian(vec2 i) {\n                const float sigma = float(NUM_SAMPLES) * .25;\n                return exp( -.5* dot(i/=sigma,i) ) / ( 6.28 * sigma*sigma );\n            }"),t=new Fx("\n            vec4 blur(sampler2D sp, vec2 U, vec2 scale, float lod, sampler2D dm, vec2 unrefractedU, vec2 aspectRatio) {\n                // Slightly modified version of this:\n                // https://www.shadertoy.com/view/ltScRG\n\n                const int LOD = 2;\n                const int sLOD = 4; // tile size = 2^LOD\n\n                vec4 O = vec4(0);\n                const int s = NUM_SAMPLES/sLOD;\n                for ( int i = 0; i < s*s; i++ ) {\n                    int modulo = (i)-((i)/(s))*(s);\n                    vec2 d = vec2(float(modulo), float(i/s))*float(sLOD) - float(NUM_SAMPLES)/2.;\n                    vec2 uv = U + (scale * aspectRatio) * d;\n                    // What is the depth of the opaque object we're trying to sample\n                    float opaqueDepth = texture2D(dm, uv).r;\n                    if (opaqueDepth < gl_FragCoord.z) {\n                        uv = unrefractedU + ((scale * min(lod / 2., 1.)) * aspectRatio) * d;\n                        lod = lod > 4.0 ? lod : lod / 2.0;\n                    }\n\t\t            #ifdef TEXTURE_LOD_EXT\n                    O += gaussian(d) * texture2DLodEXT( sp, uv, lod);\n                    #else\n                    O += gaussian(d) * textureLod( sp, uv, lod);\n                    #endif\n                }\n                return O / O.a;\n            }",[e]),r=new Fx("\n            vec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {\n\t\t        // Direction of refracted light.\n\t\t        vec3 refractionVector = refract( -v,  n, 1.0 / ior );\n\t\t        // Compute rotation-independant scaling of the model matrix.\n\t\t        vec3 modelScale;\n\t\t        modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\t        modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\t        modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\t        // The thickness is specified in local space.\n\t\t        return normalize( refractionVector ) * thickness * modelScale;\n\t        }"),n=new Fx("\nfloat applyIorToRoughness( float roughness, float ior ) {\n\t\t// Scale roughness with IOR so that an IOR of 1.0 results in no microfacet refraction and\n\t\t// an IOR of 1.5 results in the default amount of microfacet refraction.\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t} "),i=new Fx("\nvec4 getTransmissionSample( vec2 fragCoord, float roughness, float ior, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 unrefractedCoords, vec2 aspectRatio) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n        float lod = applyIorToRoughness(roughness, ior);\n\n        return blur(transmissionSamplerMap, fragCoord, vec2(lod / (transmissionSamplerSize.x / 2.)), min(framebufferLod / 5.5, 8.5), transmissionDepthMap, unrefractedCoords, aspectRatio);\n\t}",[n,t]),a=new Fx("\nvec4 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 aspectRatio ) {\n        vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n        vec3 refractedRayExit = position + transmissionRay;\n\n        // Project refracted vector on the framebuffer, while mapping to normalized device coordinates.\n        vec4 ndcPos = projMatrix * viewMatrix *  vec4( refractedRayExit, 1.0 );\n        vec2 refractionCoords = ndcPos.xy / ndcPos.w;\n        refractionCoords += 1.0;\n        refractionCoords /= 2.0;\n\n        vec4 ndcPosUnrefracted = projMatrix * viewMatrix * vec4(position, 1.0 );\n        vec2 unrefractedCoords = ndcPosUnrefracted.xy / ndcPosUnrefracted.w;\n        unrefractedCoords += 1.0;\n        unrefractedCoords /= 2.0;\n\n        // Sample framebuffer to get pixel the refracted ray hits.\n        vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior, transmissionSamplerSize, transmissionSamplerMap, transmissionDepthMap, unrefractedCoords, aspectRatio );\n        // Get the specular component.\n        return vec4( ( 1.0 ) * transmittedLight.rgb, transmittedLight.a );\n    }",[i,r]);return{transmission:new Fx("\n            vec3 transmission(float thickness, float ior, float roughness, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 aspectRatio, vec3 normal, float alpha, out float calpha) {\n                vec3 v = vec3(0.);\n                if (isOrthographic) {\n                    v = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n                } else {\n                    v = normalize(vWPosition - cameraPosition);\n                }\n                vec4 transmission = getIBLVolumeRefraction(vWNormal, -v, roughness,  vWPosition, modelMatrix, viewMatrix, projectionMatrix, ior, thickness, transmissionSamplerSize, transmissionSamplerMap, transmissionDepthMap, aspectRatio );\n                float lalpha = alpha;\n\n                 calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );\n                 accumAlpha += ( 1.0 - accumAlpha ) * lalpha;\n                 return transmission.rgb;\n            }",[a])}}();var Fb=class extends Rx{constructor(e,t){super("v3"),this.nodeType="CustomNormal",this.cnormal=e,this.alpha=t}generate(e,t){if(e.isShader("fragment")){let r=e.include(Fb.Nodes.customNormal),n=[];return n.push(this.cnormal.build(e,"v3")),n.push("normal"),n.push(this.alpha.build(e,"f")),e.format(r+"("+n.join(",")+")",this.getType(e),t)}return console.warn("CustomNormalNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}copy(e){return super.copy(e),this.cnormal.copy(e.cnormal),this.alpha.copy(e.alpha),this}},Ub=Fb;Ub.Nodes={customNormal:new Fx("vec3 customNormal(vec3 cnormal, vec3 norm, float alpha) {\n\t\t\t\tvec3 normal = packNormalToRGB( norm ).rgb;\n\t\t\t\tnormal *= step( vec3(0.5), cnormal );\n\n\t\t\t\taccumAlpha += ( 1.0 - accumAlpha ) * alpha;\n\n\t\t\t\treturn normal;\n\t\t\t}")};var jb=class extends Rx{constructor(e,t,r,n,i,a,o,s){super("v3"),this.nodeType="Gradient",this.gradientType=e,this.smooth=t,this.colors=r,this.steps=n,this.offset=i,this.morph=a,this.angle=o,this.alpha=s,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){e.define("GRAD_MAX",10),e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let r=e.include(jb.Nodes.gradient),n=[];return n.push(this.gradientType.build(e,"i")),n.push(this.smooth.build(e,"b")),n.push(this.colors.build(e,"v4[]")),n.push(this.steps.build(e,"f[]")),n.push(this.offset.build(e,"v2")),n.push(this.morph.build(e,"v2")),n.push(this.angle.build(e,"f")),n.push(this.alpha.build(e,"f")),n.push(this.calpha),e.format(r+"("+n.join(",")+")",this.getType(e),t)}return console.warn("GradientNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}copy(e){return super.copy(e),this.gradientType=e.gradientType.clone(),this.smooth=e.smooth.clone(),this.colors=e.colors.clone(),this.steps=e.steps.clone(),this.offset=e.offset.clone(),this.morph=e.morph.clone(),this.angle=e.angle.clone(),this.alpha=e.alpha.clone(),this.calpha=e.calpha,this}},Hb=jb;Hb.Nodes={gradient:new Fx("vec3 gradient(int gradientType, bool smoothed, vec4 colors[GRAD_MAX], float steps[GRAD_MAX], vec2 offset, vec2 morph, float angle, float alpha, out float calpha) {\n\t\t\t\tvec4 color = colors[0];\n\t\t\t\tvec2 m = morph / vUv.xy;\n\t\t\t\tvec2 rot = vec2( 0.5 + m.x, m.y );\n\t\t\t\tvec2 dt = vec2(\n\t\t\t\t\tcos( angle ) * rot.x - sin( angle ) * rot.y,\n\t\t\t\t\tsin( angle ) * rot.x + cos( angle ) * rot.y\n\t\t\t\t);\n\t\t\t\tvec2 pt = ( vUv - 0.5 + offset ) / 2.0 + dt / 2.0;\n\t\t\t\tfloat t = dot( pt, dt ) / dot( dt, dt );\n\t\t\t\tif ( gradientType == 1 ) {\n\t\t\t\t\tt = distance (\n\t\t\t\t\t\t( vUv + morph ) * 3.0,\n\t\t\t\t\t\t( vUv + offset ) + 1.0\n\t\t\t\t\t) + angle;\n\t\t\t\t} else if ( gradientType == 2 ) {\n\t\t\t\t\tfloat polar = atan(\n\t\t\t\t\t\tvUv.x + morph.x - 0.5 + offset.x,\n\t\t\t\t\t\tvUv.y + morph.y - 0.5 + offset.y\n\t\t\t\t\t) * -1.0;\n\t\t\t\t\tt = fract( ( angle / PI / -2.0 ) + 0.5 * ( polar / PI ) );\n\t\t\t\t}\n\n\t\t\t\tfloat p;\n\t\t\t\tif (smoothed) {\n\t\t\t\t\tfor ( int i = 1; i < GRAD_MAX; i++ ) {\n\t\t\t\t\t\tp = clamp( ( t - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );\n\t\t\t\t\t\tcolor = mix(color, colors[i], smoothstep(0.0, 1.0, p));\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\t\t\t\t\tfor ( int i = 1; i < GRAD_MAX; i++ ) {\n\t\t\t\t\t\tp = clamp( ( t - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );\n\t\t\t\t\t\tcolor = mix(color, colors[i], p);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfloat lalpha = alpha * color.a;\n\t\t\t\tcalpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );\n\t\t\t\taccumAlpha += ( 1.0 - accumAlpha ) * lalpha;\n\n\t\t\t\treturn color.xyz;\n\t\t\t}")};var Vb=(e=>(e.NOISE="noise",e.MAP="map",e))(Vb||{}),Gb=class extends Rx{constructor(e=new Sb(0),t,r,n,i,a){super("v3"),this.nodeType="VertexDisplacement",this.displacementTypeIndex=e,this.intensity=t,this.movementOrTexture=r,"map"===Object.values(Vb)[this.displacementTypeIndex.value]&&(this.mat=new Tb(this.movementOrTexture.value.matrix)),this.cropOrOffset=n,this.scale=i,this.noiseFunctionIndex=a}generate(e,t){if(e.isShader("vertex")){e.define("USE_LAYER_DISPLACE");let r,n=[];switch(n.push("displaced_position"),n.push("displaced_normal"),Object.values(Vb)[this.displacementTypeIndex.value]){case"map":r=e.include(Gb.Nodes.map),n.push(this.movementOrTexture.getTexture(e,"t")),n.push("uv"),n.push(this.cropOrOffset.build(e,"f")),this.mat&&n.push(this.mat.build(e,"mat3"));break;case"noise":{let t=Object.values(Ob)[this.noiseFunctionIndex.value],i=new Fx("vec3 orthogonal(vec3 v) {\n\t\t\t\t\t\t\treturn normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0) : vec3(0.0, -v.z, v.y));\n\t\t\t\t\t\t}"),a=new Fx(`vec3 distorted(vec3 p, vec3 n, float scale, float intensity, vec3 offset, float neighbour_offset, float movement) {\n\t\t\t\t\t\t\treturn p + n * ${t}((p + offset) * scale * 0.001 + neighbour_offset + (movement * 0.1)) * intensity;\n\t\t\t\t\t\t}`,[kb.simplex,kb.simplexFractal,kb.simplexAshima,kb.fbm,kb.perlin]),o=new Fx("vec3 vertexDisplacementNoise(vec3 position, vec3 normal, float scale, vec3 offset, float movement, float intensity, out vec3 displaced_normal) {\n\t\t\t\t\t\t\tvec3 displaced_position = distorted(position, normal, scale, intensity, offset, neighbor_offset, movement);\n\t\t\t\t\t\t\tvec3 tangent1 = orthogonal(normal);\n\t\t\t\t\t\t\tvec3 tangent2 = normalize(cross(normal, tangent1));\n\n                            // TODO(Max): The distance to the neighbors was originally scaled by 0.1.\n                            // This caused some small oval/circular visual artifacts in the lighting.\n                            // For now, simply using neighbors further away betters the problem,\n                            // but we should figure out the underlying cause when we have some time.\n                            // Maybe its related to how we calculate the tangent and bitangent?\n\t\t\t\t\t\t\tvec3 nearby1 = position + tangent1;\n\t\t\t\t\t\t\tvec3 nearby2 = position + tangent2;\n\t\t\t\t\t\t\tvec3 distorted1 = distorted(nearby1, normal, scale, intensity, offset, neighbor_offset, movement);\n\t\t\t\t\t\t\tvec3 distorted2 = distorted(nearby2, normal, scale, intensity, offset, neighbor_offset, movement);\n\t\t\t\t\t\t\tdisplaced_normal = normalize(cross(distorted1 - displaced_position, distorted2 - displaced_position));\n\t\t\t\t\t\t\treturn displaced_position;\n\t\t\t\t\t\t}",[a,i]);r=e.include(o),n.push(this.scale.build(e,"f")),n.push(this.cropOrOffset.build(e,"v3")),n.push(this.movementOrTexture.build(e,"f"));break}}return n.push(this.intensity.build(e,"f")),n.push("displaced_normal"),e.format(r+"("+n.join(",")+")",this.getType(e),t)}return console.warn("VertexDisplacementNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}copy(e){var t,r;return super.copy(e),this.noiseFunctionIndex=null==(t=e.noiseFunctionIndex)?void 0:t.clone(),this.scale=null==(r=e.scale)?void 0:r.clone(),this.cropOrOffset=e.cropOrOffset.clone(),this.intensity=e.intensity.clone(),this.movementOrTexture=e.movementOrTexture.clone(),this}},Wb=Gb;Wb.Nodes=function(){let e=new Fx("vec3 orthogonal(vec3 v) {\n\t\t\t\treturn normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0) : vec3(0.0, -v.z, v.y));\n\t\t\t}"),t=new Fx("float displacementMapTexture(sampler2D tex, float crop, vec2 uv, mat3 mat, vec2 offset) {\n\t\t\t\tvec2 uvs = (mat * vec3(uv * 2.0 - 1.0, 1.0) / 2.0 + 0.5).xy + offset;\n\t\t\t\tvec4 tmp = texture2D(tex, uvs);\n\t\t\t\tvec3 col = tmp.rgb;\n\t\t\t\tif (crop > 0.5) {\n\t\t\t\t\tif ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {\n\t\t\t\t\t\treturn 0.0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn col.r;\n\t\t\t}");return{map:new Fx("vec3 vertexDisplacementMap(vec3 position, vec3 normal, sampler2D tex, vec2 uv, float crop, mat3 mat, float intensity, out vec3 displaced_normal) {\n\t\t\t\tvec3 displaced_position = position + normal * displacementMapTexture(tex, crop, uv, mat, vec2(0.0)) * intensity;\n\t\t\t\tvec3 tangent1 = normalize(orthogonal(normal));\n\t\t\t\tvec3 tangent2 = normalize(cross(normal, tangent1));\n\t\t\t\tvec3 nearby1 = position + tangent1 * 0.1;\n\t\t\t\tvec3 nearby2 = position + tangent2 * 0.1;\n\t\t\t\tvec3 distorted1 = nearby1 + normal * displacementMapTexture(tex, crop, uv, mat, vec2(neighbor_offset)) * intensity;\n\t\t\t\tvec3 distorted2 = nearby2 + normal * displacementMapTexture(tex, crop, uv, mat, vec2(neighbor_offset)) * intensity;\n\t\t\t\tdisplaced_normal = normalize(cross(distorted1 - displaced_position, distorted2 - displaced_position));\n\t\t\t\treturn displaced_position;\n\t\t\t}",[e,t])}}();var qb=class extends Rx{constructor(e=new Lx,t=new Lx,r=new Lx,n=new Lx,i=new Lx,a=new Lx,o=new Lx,s=new Lx,l=new Lx,u=new Lx,c=new Lx,h=new Lx){super("v3"),this.nodeType="Noise",this.scale=e,this.size=t,this.move=r,this.fA=n,this.fB=i,this.distortion=a,this.colorA=o,this.colorB=s,this.colorC=l,this.colorD=u,this.alpha=c,this.noiseType=h,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t,r,n,i){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let a=Object.values(Ob)[this.noiseType.value],o=new Fx(`vec3 ${a}customNoise(float scale, vec3 size, float move, vec2 fA, vec2 fB, vec2 distortion, vec4 colorA, vec4 colorB, vec4 colorC, vec4 colorD, float alpha, out float calpha) {\n                vec3 st = position / size;\n\t\t\t\tst /= scale;\n\t\t\t\tvec3 q = vec3(${a}(st),\n\t\t\t\t\t\t\t  ${a}(st + vec3(1.0)),\n\t\t\t\t\t\t\t  ${a}(st + vec3(1.0)));\n\t\t\t\tvec3 r = vec3(${a}(st + vec3(distortion, 1.0) * q + vec3(fA, 1.0) + move),\n\t\t\t\t\t\t\t  ${a}(st + vec3(distortion, 1.0) * q + vec3(fB, 1.0) + move), \n\t\t\t\t\t\t\t  ${a}(st * q));\n\t\t\t\tfloat f = ${a}(st + r);\n\t\t\t\tvec4 color;\n\t\t\t\tcolor = mix(colorA, colorB, clamp((f * f) * 4.0, 0.0, 1.0));\n\t\t\t\tcolor = mix(color, colorC, clamp(length(q), 0.0, 1.0));\n\t\t\t\tcolor = mix(color, colorD, clamp(length(r.x), 0.0, 1.0));\n\n                float lalpha = alpha * color.a;\n                calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );\n\n\t\t\t    accumAlpha += ( 1.0 - accumAlpha ) * lalpha;\n\t\t\t\treturn clamp(color, 0.0, 1.0).rgb;\n\t\t\t}`,[kb.simplex,kb.simplexFractal,kb.simplexAshima,kb.fbm,kb.perlin]),s=e.include(o),l=[];return l.push(this.scale.build(e,"f")),l.push(this.size.build(e,"v3")),l.push(this.move.build(e,"f")),l.push(this.fA.build(e,"v2")),l.push(this.fB.build(e,"v2")),l.push(this.distortion.build(e,"v2")),l.push(this.colorA.build(e,"v4")),l.push(this.colorB.build(e,"v4")),l.push(this.colorC.build(e,"v4")),l.push(this.colorD.build(e,"v4")),l.push(this.alpha.build(e,"f")),l.push(this.calpha),e.format(s+"("+l.join(",")+")",this.getType(e),t)}copy(e){return super.copy(e),this.scale.copy(e.scale),this.size.copy(e.size),this.move.copy(e.move),this.fA.copy(e.fA),this.fB.copy(e.fB),this.distortion.copy(e.distortion),this.colorA.copy(e.colorA),this.colorB.copy(e.colorB),this.colorC.copy(e.colorC),this.colorD.copy(e.colorD),this.alpha.copy(e.alpha),this.calpha=e.calpha,this.noiseType.copy(e.noiseType),this}};qb.numOctaves=5;var Yb=class extends Rx{constructor(e=new Lx,t=new Lx,r=new Lx,n=new Lx){super("v3"),this.nodeType="Blend",this.a=e,this.b=t,this.alpha=r,this.mode=n}generate(e,t){if(e.isShader("fragment")){let r=[];return r.push(this.a.build(e,"c")),r.push(this.b.build(e,"c")),r.push(this.alpha.build(e,"f")),r.push(this.mode.build(e,"i")),e.format("spe_blend("+r.join(",")+")",this.getType(e),t)}return console.warn("BlendNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}copy(e){return super.copy(e),this.a.copy(e.a),this.b.copy(e.b),this.alpha.copy(e.alpha),this.mode.copy(e.mode),this}},Xb=class extends Rx{constructor(e,t,r,n,i,a,o,s,l,u,c,h){super("v3"),this.nodeType="Depth",this.gradientType=e,this.smooth=t,this.near=r,this.far=n,this.isVector=i,this.isWorldSpace=a,this.origin=o,this.direction=s,this.colors=l,this.steps=u,this.num=c,this.alpha=h,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){let r=`g${this.uuid.toString().replace(/-/g,"")}`,n=new Fx(`vec3 ${r}_sdepth(float near, float far, vec3 origin, vec3 direction, vec4 colors[${r}_MAX_COLORS], float steps[10], float alpha, out float calpha) {\n               vec4 color = colors[0];\n               #ifdef ${r}_IS_VECTOR\n                   #ifdef ${r}_LINEAR\n                       #ifdef ${r}_WORLDSPACE\n                       float depth = vectorLinearWorldSpaceDepth(direction, origin, near, far);\n                       #else\n                       float depth = vectorLinearObjectSpaceDepth(direction, origin, near, far);\n                       #endif\n                   #else\n                       #ifdef ${r}_WORLDSPACE\n                           float depth = vectorSphericalWorldSpaceDepth(origin, near, far);\n                       #else\n                           float depth = vectorSphericalObjectSpaceDepth(origin, near, far);\n                       #endif\n                   #endif\n               #else\n                   float dist = length(vWPosition - cameraPosition);\n\t\t\t       float depth = ( dist - near ) / ( far - near );\n               #endif\n\n\n              float p;\n              #ifdef ${r}_SMOOTH\n\t\t\t\tfor ( int i = 1; i < ${r}_MAX_COLORS; i++ ) {\n\t\t\t\t\t\tp = clamp( ( depth - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );\n\t\t\t\t\t\tcolor = mix(color, colors[i], smoothstep(0.0, 1.0, p));\n\t\t\t\t\t}\n              #else\n                for ( int i = 1; i < ${r}_MAX_COLORS; i++ ) {\n                   p = clamp(( depth - steps[i - 1] ) / ( steps[i] - steps[i - 1] ), 0.0, 1.0);\n                   color = mix(color, colors[i], p);\n                 }\n              #endif\n\n               float lalpha = alpha * color.a;\n               calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );\n\n\t\t\t   accumAlpha += ( 1.0 - accumAlpha ) * lalpha;\n               return color.rgb;\n\t\t\t}`,[Xb.Nodes.vectorLinearWorldSpaceDepth,Xb.Nodes.vectorLinearObjectSpaceDepth,Xb.Nodes.vectorSphericalObjectSpaceDepth,Xb.Nodes.vectorSphericalWorldSpaceDepth]);if(e.isShader("fragment")){e.define(`${r}_MAX_COLORS`,this.num.value+1),this.smooth.value&&e.define(`${r}_SMOOTH`),this.isVector.value>.5&&e.define(`${r}_IS_VECTOR`),0===this.gradientType.value&&e.define(`${r}_LINEAR`),this.isWorldSpace.value>.5&&e.define(`${r}_WORLDSPACE`),e.require("worldPosition"),e.addFragmentVariable(this.calpha,"float");let i=e.include(n),a=[];return a.push(this.near.build(e,"f")),a.push(this.far.build(e,"f")),a.push(this.origin.build(e,"v3")),a.push(this.direction.build(e,"v3")),a.push(this.colors.build(e,"v4[]")),a.push(this.steps.build(e,"f[]")),a.push(this.alpha.build(e,"f")),a.push(this.calpha),e.format(i+"("+a.join(",")+")",this.getType(e),t)}return console.warn("DepthNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}copy(e){return super.copy(e),this.gradientType=e.gradientType.clone(),this.smooth=e.smooth.clone(),this.near=e.near.clone(),this.far=e.far.clone(),this.isVector=e.isVector.clone(),this.isWorldSpace=e.isWorldSpace.clone(),this.origin=e.origin.clone(),this.direction=e.direction.clone(),this.colors=e.colors.clone(),this.steps=e.steps.clone(),this.alpha=e.alpha.clone(),this.calpha=e.calpha,this}},Qb=Xb;Qb.Nodes={vectorLinearWorldSpaceDepth:new Fx("float vectorLinearWorldSpaceDepth(vec3 direction, vec3 origin, float near, float far) {\n               vec3 n = normalize(direction);\n               float dist = (n.x*(vWPosition.x - origin.x) + n.y*(vWPosition.y - origin.y) + n.z*(vWPosition.z - origin.z));\n               return ( dist - near ) / ( far - near );\n            }"),vectorLinearObjectSpaceDepth:new Fx("float vectorLinearObjectSpaceDepth(vec3 direction, vec3 origin, float near, float far) {\n               vec3 n = normalize(direction);\n               float dist = (n.x*(position.x - origin.x) + n.y*(position.y - origin.y) + n.z*(position.z - origin.z));\n               return ( dist - near ) / ( far - near );\n            }"),vectorSphericalWorldSpaceDepth:new Fx("float vectorSphericalWorldSpaceDepth(vec3 origin, float near, float far) {\n               float dist = length(vWPosition - origin);\n               return ( dist - near ) / ( far - near );\n            }"),vectorSphericalObjectSpaceDepth:new Fx("float vectorSphericalObjectSpaceDepth(vec3 origin, float near, float far) {\n               float dist = length(position - origin);\n               return ( dist - near ) / ( far - near );\n            }")};var Jb=class extends Rx{constructor(e,t,r){super("v3"),this.nodeType="Matcap",this.texture=e,this.alpha=t,this.mode=r,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){e.addFragmentVariable(this.calpha,"float");let r=e.include(Jb.Nodes.matcap);e.require("normal"),e.requires.normal=!0;let n=[];return n.push(this.texture.getTexture(e,"t")),n.push("normal"),n.push(this.alpha.build(e,"f")),n.push(this.mode.build(e,"i")),n.push(this.calpha),e.format(r+"("+n.join(",")+")",this.getType(e),t)}return console.warn("MatcapNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}copy(e){return super.copy(e),this.texture=e.texture.clone(),this.alpha=e.alpha.clone(),this.mode=e.mode.clone(),this.calpha=e.calpha,this}},Zb=Jb;Zb.Nodes={matcap:new Fx("vec3 matcap(sampler2D matcapTex, vec3 normal, float alpha, int mode, out float calpha) {\n                vec3 viewDir = normalize( vViewPosition );\n                vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n                vec3 y = cross( viewDir, x );\n                vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5; // 0.495 to remove artifacts caused by undersized matcap disks\n                vec4 matcapColor = texture2D( matcapTex, uv );\n\n                calpha =  alpha / clamp( alpha + accumAlpha, 0.00001, 1.0 );\n\t\t\t\taccumAlpha += ( 1.0 - accumAlpha ) * alpha;\n                \n                return matcapColor.rgb;\n            }\n            ")};var Kb=class{constructor(e){this.id=2,this.layerCount=2,this.uuid=ge.generateUUID(),this.needsUpdate=!1,this._material=e,this._layerNodes=[];let t=this._createLayer({id:0,type:"color"});this._material.color=t.color,void 0===this._material.alpha&&(this._material.alpha=new eb(1));let r=new eb(1),n=new Sb(0);"shadingAlpha"in this._material&&"shadingBlend"in this._material&&(this._material.shadingAlpha=r,this._material.shadingBlend=n),this._layerNodes.push({id:0,type:"color",color:t.color,alpha:t.alpha,mode:t.mode}),this._layerNodes.push({id:1,type:"light",alpha:r,mode:n}),this.head=t.layer,this.head.next=new _b(1,void 0,{type:"light",alpha:r,mode:n}),this.attachLightNodes(this.getLightLayer())}get material(){return this._material}set material(e){var t;this._material=e;let r,n,i=this.head;for(;void 0!==i;){if("light"===i.type){r=i.uniforms[`f${i.id}_alpha`],n=i.uniforms[`f${i.id}_mode`];break}i=i.next}"shadingAlpha"in this._material&&"shadingBlend"in this._material&&(this._material.shadingAlpha=r,this._material.shadingBlend=n),this.attachLightNodes(null==(t=e.userData.layers)?void 0:t.getLightLayer()),this.blendColors(),this.blendAfterColors(),this.blendPositions()}getLayersOfType(e){let t=[],r=this.head;for(;r;)r.type===e&&t.push(r),r=r.next;return t}addLayer(e){var t;if(e.id=null!=(t=e.id)?t:++this.id,this.layerCount++,"light"===e.type){let t=this.createLightLayer(e);return this.uuid=ge.generateUUID(),this.blendColors(),this.blendAfterColors(),this.blendPositions(),t}let r=this._createLayer(e),n=r.layer;if(void 0===this.head)this.head=n;else{let e=this.head;for(;null!=e.next;)e=e.next;e.next=n}return r.color&&this._layerNodes.push({id:n.id,type:"color",color:r.color,alpha:r.alpha,mode:r.mode}),r.position&&this._layerNodes.push({id:n.id,type:"position",position:r.position}),this.uuid=ge.generateUUID(),this.blendColors(),this.blendAfterColors(),this.blendPositions(),n}addLayerBeforeAt(e,t){var r;let n=this.head;e.id=null!=(r=e.id)?r:++this.id,this.layerCount++;let i=this._createLayer(e),a=i.layer;a.next=t;let o=0;if(n===t)this.head=a,i.color&&this._layerNodes.splice(0,0,{id:a.id,type:"color",color:i.color,alpha:i.alpha,mode:i.mode}),i.position&&this._layerNodes.splice(0,0,{id:a.id,type:"position",position:i.position});else{for(o=1;(null==n?void 0:n.next)!==t;)n=null==n?void 0:n.next,o++;n.next=a,i.color&&this._layerNodes.splice(o,0,{id:a.id,type:"color",color:i.color,alpha:i.alpha,mode:i.mode}),i.position&&this._layerNodes.splice(o,0,{id:a.id,type:"position",position:i.position})}return this.uuid=ge.generateUUID(),this.blendColors(),this.blendAfterColors(),this.blendPositions(),a}addLayerAt(e,t){var r;t.id=null!=(r=t.id)?r:++this.id,this.layerCount++;let n=this._createLayer(t),i=n.layer;if(n.color&&this._layerNodes.splice(e,0,{id:i.id,type:"color",color:n.color,alpha:n.alpha,mode:n.mode}),n.position&&this._layerNodes.splice(e,0,{id:i.id,type:"position",position:n.position}),0==e)i.next=this.head,this.head=i;else{let t=this.head,r=this.head.next;for(let n=0;n<e-1;n++)t=r,r=r.next;i.next=r,t.next=i}return this.uuid=ge.generateUUID(),this.blendColors(),this.blendAfterColors(),this.blendPositions(),i}removeLayer(e){let t,r=this.head,n=0;if((null==r?void 0:r.id)==e)this.head=r.next;else for(n=1,t=r,r=null==r?void 0:r.next;null!=r;){if(r.id==e){t.next=r.next;break}n++,t=r,r=r.next}return this.cleanupChangedLayer(r),this.blendColors(),this.blendAfterColors(),this.blendPositions(),this.uuid=ge.generateUUID(),this.layerCount--,n}changeLayer(e,t){let r,n,i=this.head;if((null==i?void 0:i.id)==e){let r=this._createLayer(g({id:e,uuid:i.uuid},t));n=r.layer,n.next=i.next,this.head=n,r.color&&(this._layerNodes[0]={id:n.id,type:"color",color:r.color,alpha:r.alpha,mode:r.mode}),r.position&&(this._layerNodes[0]={id:n.id,type:"position",position:r.position}),n.uniforms[`f${e}_mode`].value=i.uniforms[`f${e}_mode`].value,n.uniforms[`f${e}_alpha`].value=i.uniforms[`f${e}_alpha`].value}else{r=i,i=i.next;let a=1;for(;null!=i;){if(i.id==e){let o=this._createLayer(g({id:e,uuid:i.uuid},t));n=o.layer,r.next=n,n.next=i.next,o.color&&(this._layerNodes[a]={id:e,type:"color",color:o.color,alpha:o.alpha,mode:o.mode}),o.position&&(this._layerNodes[a]={id:e,type:"position",position:o.position}),n.uniforms[`f${e}_mode`].value=i.uniforms[`f${e}_mode`].value,n.uniforms[`f${e}_alpha`].value=i.uniforms[`f${e}_alpha`].value;break}r=i,i=i.next,a++}}return this.uuid=ge.generateUUID(),this.blendColors(),this.blendAfterColors(),this.blendPositions(),n}getLayer(e){let t=this.head;for(;null!=t&&t.id!=e;)t=t.next;return t}getLayerByUuid(e){let t=this.head;for(;void 0!==t;){if(t.uuid===e)return t;t=t.next}}getLayers(){let e=[],t=this.head;for(;null!=t;)e.push(t),t=t.next;return e}getLayerPosition(e){let t=this.head,r=0;for(;void 0!==t&&t.id!=e;)r++,t=t.next;return r}getDefines(){}getBeforeProgram(){}getLightingProgram(){}getAfterProgram(){}getVarPrograms(){}getUniforms(){}moveLayer(e,t){let r,n,i=this.head;if(0==e)r=this.head,this.head=r.next;else{for(let t=0;t<e;t++)n=i,i=i.next;n.next=i.next,r=i}if(i=this.head,n=void 0,0==t)r.next=this.head,this.head=r;else{for(let e=0;e<t-1;e++)i=i.next;r.next=null==i?void 0:i.next,i.next=r}let a=this._layerNodes.splice(e,1)[0];this._layerNodes.splice(t,0,a),this.uuid=ge.generateUUID(),this.blendColors(),this.blendAfterColors()}updateLayerUniform(){this.uuid=ge.generateUUID(),this.blendColors(),this.blendAfterColors()}copy(e){this.needsUpdate=!1,this.layerCount=e.layerCount,this._layerNodes=[],this.layerCount=0,this.head=void 0,this.rebuildLayerNodes(this.head,e.head);let t=e.head,r=this.head;for(;null!=t.next;)this.rebuildLayerNodes(r,t.next),r=r.next,t=t.next;return this.id=e.id,this.uuid=e.uuid,this.blendColors(),this.blendAfterColors(),this.blendPositions(),this}createLightLayer(e){let t=new eb(e.alpha),r=new Sb(e.mode);this._material.shadingAlpha=t,this._material.shadingBlend=r,this._layerNodes.push({id:e.id,type:"light",alpha:t,mode:r});let n=new _b(e.id,void 0,{type:"light",alpha:t,mode:r});if(void 0===this.head)this.head=n;else{let e=this.head;for(;null!=e.next;)e=e.next;e.next=n}return this.attachLightNodes(this.getLightLayer()),n}rebuildLayerNodes(e,t,r=!1){if("light"===t.type){let n=r?t.uniforms[`f${t.id}_alpha`]:new eb(t.uniforms[`f${t.id}_alpha`].value),i=r?t.uniforms[`f${t.id}_mode`]:new Sb(t.uniforms[`f${t.id}_mode`].value);this._material.shadingAlpha=n,this._material.shadingBlend=i,this._layerNodes.push({id:t.id,type:"light",alpha:n,mode:i}),void 0===this.head?this.head=new _b(t.id,t.uuid,{type:"light",alpha:n,mode:i}):e&&(e.next=new _b(t.id,t.uuid,{type:"light",alpha:n,mode:i})),this.attachLightNodes(t)}else{let e={type:t.type,id:t.id};for(let n in t.uniforms){let i=t.getName(n);if(!i)continue;let a=`f${t.id}_${i}`;if(Array.isArray(t.uniforms[a].value))e[i]=t.uniforms[a].value.map((e=>e.clone&&!r?e.clone():e));else{let n=t.uniforms[a].value;if("transmissionDepthMap"===i){e[i]=n;continue}null!=n&&(e[i]=!n.clone||r||n.isRenderTargetTexture?n:n.clone())}}this.addLayer(e)}}attachLightNodes(e){var t,r,n,i,a,o,s,l,u,c,h;let d={},p=this.getLightLayer();switch(this._material.userData.category){case"Lambert":d.emissive=new wb(null!=(r=null==(t=null==e?void 0:e.getValue("emissive"))?void 0:t.clone())?r:0);break;case"Phong":d.shininess=new eb(null!=(n=null==e?void 0:e.getValue("shininess"))?n:30),d.specular=new wb(null!=(a=null==(i=null==e?void 0:e.getValue("specular"))?void 0:i.clone())?a:1118481);break;case"Toon":d.shininess=new eb(null!=(o=null==e?void 0:e.getValue("shininess"))?o:30),d.specular=new wb(null!=(l=null==(s=null==e?void 0:e.getValue("specular"))?void 0:s.clone())?l:1118481);break;case"Physical":d.roughness=new eb(null!=(u=null==e?void 0:e.getValue("roughness"))?u:.3),d.metalness=new eb(null!=(c=null==e?void 0:e.getValue("metalness"))?c:0),d.reflectivity=new eb(null!=(h=null==e?void 0:e.getValue("reflectivity"))?h:.5)}Object.keys(d).forEach((e=>{this._material[e]=d[e],p.uniforms[`f${p.id}_${e}`]=d[e]}))}clone(e){return new Kb(e).copy(this)}toJSON(e){return{id:this.id,uuid:this.uuid,head:this.head.toJSON(e)}}fromJSON(e,t,r){let n=new _b(e.head.id,void 0,{type:e.head.type}).fromJSON(e.head,t),i=e.head.next,a=n;for(;null!=i;)a.next=new _b(i.id,void 0,{type:i.type}).fromJSON(i,t),i=i.next,a=a.next;this._layerNodes=[],this.head=void 0,this.rebuildLayerNodes(this.head,n,!0);let o=n;for(a=this.head;null!=o.next;)this.rebuildLayerNodes(a,o.next,!0),a=a.next,o=o.next;return this._material=r,this.id=e.id,this.uuid=e.uuid,this.blendColors(),this.blendAfterColors(),this.blendPositions(),this}getLightLayer(){var e;let t=this.head;for(;void 0!==t&&"light"!==t.type;)t=null!=(e=t.next)?e:t;return t}dispose(){let e=this.head;for(this._layerNodes=[],this.layerCount=0;void 0!==e;)!0===e.hasOwnProperty("dispose")&&e.dispose(),e=e.next;this.head=void 0}_createLayer(e){var t,r,n,i,a,o,s,l,u,c,h,d,p,f,m,g,v,y,x,b,w,S,_,A,M,E,C,T,D,L,P,R,O,k,I,B,z,N,F,U,j,H,V,G,W,q,Y,X,Q,J,Z,K,$,ee,te,re,ne,ie,ae,oe,se,le,ue,ce,he,de,pe,fe,me,ge,ye,xe,be,we,Se,_e,Ae,Me,Ee;let Ce=e.type;switch(Ce){case"color":{let i=new wb(null!=(t=e.color)?t:5855577),a=new eb(null!=(r=e.alpha)?r:1),o=new Jx("alpha / clamp(alpha + accumAlpha, 0.00001, 1.0 )","f");o.keywords.alpha=a;let s=new Sb(null!=(n=e.mode)?n:0);return i.alpha=a,{layer:new _b(e.id,e.uuid,{type:Ce,color:i,alpha:a,calpha:o,mode:s}),color:i,alpha:o,mode:s}}case"texture":{let t=null!=(i=e.texture)?i:new Zx,r=t.matrix;e.mat&&r.copy(e.mat),t.needsUpdate=!0;let n=new eb(null!=(a=e.crop)?a:0),h=new Sb(null!=(o=e.projection)?o:0),d=new Sb(null!=(s=e.axis)?s:0),p=new kx(e.size?new ve(e.size[0],e.size[1]):new ve(100,100)),f=new eb(null!=(l=e.alpha)?l:1),m=new Sb(null!=(u=e.mode)?u:0),g=new $x(t),v=new Ix(null!=(c=e.textureSize)?c:new We(t.image?t.image.width:0,t.image?t.image.height:0)),y=new Lb(g,v,n,h,d,p,f,m),x=new Jx(y.calpha,"f");return{layer:new _b(e.id,e.uuid,{type:Ce,texture:g,textureSize:v,crop:n,projection:h,axis:d,size:p,mat:y.mat,alpha:f,calpha:x,mode:m}),color:y,alpha:x,mode:m}}case"matcap":{let t=null!=(h=e.texture)?h:new Zx;t.needsUpdate=!0;let r=new eb(null!=(d=e.alpha)?d:1),n=new $x(t),i=new Sb(null!=(p=e.mode)?p:0),a=new Zb(n,r,i),o=new Jx(a.calpha,"f");return{layer:new _b(e.id,e.uuid,{type:Ce,texture:n,alpha:r,calpha:o,mode:i}),color:a,alpha:o,mode:i}}case"fresnel":{let t=new wb(null!=(f=e.color)?f:16777215),r=new eb(null!=(m=e.bias)?m:.1),n=new eb(null!=(g=e.scale)?g:1),i=new eb(null!=(v=e.intensity)?v:2),a=new eb(null!=(y=e.factor)?y:1),o=new eb(null!=(x=e.alpha)?x:1),s=new Sb(null!=(b=e.mode)?b:0),l=new Rb(t,r,n,i,a,o,s),u=new Jx(l.calpha,"f");return{layer:new _b(e.id,e.uuid,{type:Ce,color:t,bias:r,scale:n,intensity:i,factor:a,alpha:o,calpha:u,mode:s}),color:l,alpha:u,mode:s}}case"rainbow":{let t=new eb(null!=(w=e.filmThickness)?w:30),r=new eb(null!=(S=e.movement)?S:0),n=new Ix(null!=(_=e.wavelengths)?_:new We(0,0,0)),i=new eb(null!=(A=e.noiseStrength)?A:0),a=new eb(null!=(M=e.noiseScale)?M:1),o=new Ix(null!=(E=e.offset)?E:new We(0,0,0)),s=new eb(null!=(C=e.alpha)?C:1),l=new Bb(t,r,n,i,a,o,s),u=new Jx(l.calpha,"f"),c=new Sb(null!=(T=e.mode)?T:0);return{layer:new _b(e.id,e.uuid,{type:Ce,filmThickness:t,movement:r,wavelengths:n,noiseStrength:i,noiseScale:a,offset:o,alpha:s,calpha:u,mode:c}),color:l,alpha:u,mode:c}}case"transmission":{let t=new eb(null!=(D=e.thickness)?D:10),r=new eb(null!=(L=e.ior)?L:1.5),n=new eb(null!=(P=e.roughness)?P:.5),i=new kx(null!=(R=e.transmissionSamplerSize)?R:new ve(2048,2048)),a=null!=(O=e.transmissionSamplerMap)?O:new Zx,o=null!=(k=e.transmissionDepthMap)?k:new Zx,s=new $x(a),l=new $x(o),u=window.innerWidth,c=window.innerHeight,h=u>=c?new kx(c/u,1):new kx(1,u/c),d=new eb(null!=(I=e.alpha)?I:1),p=new Nb(t,r,n,i,s,l,h,d),f=new Jx(p.calpha,"f"),m=new Sb(null!=(B=e.mode)?B:0);return{layer:new _b(e.id,e.uuid,{type:Ce,thickness:t,ior:r,roughness:n,transmissionSamplerSize:i,transmissionSamplerMap:s,transmissionDepthMap:l,aspectRatio:h,alpha:d,calpha:f,mode:m}),color:p,alpha:f,mode:m}}case"depth":{let t,r,n=new Sb(null!=(z=e.gradientType)?z:0),i=new Mb(null!=(N=e.smooth)&&N),a=new eb(null!=(F=e.near)?F:50),o=new eb(null!=(U=e.far)?U:200),s=new eb(null!=(j=e.isVector)?j:1),l=new eb(null!=(H=e.isWorldSpace)?H:0),u=new Ix(null!=(V=e.origin)?V:new We),c=new Ix(null!=(G=e.direction)?G:new We),h=new Sb(null!=(W=e.num)?W:0);e.colors?t=new Eb(h.value+1,e.colors):(t=new Eb(h.value+1,new Ue(0,0,0,1)),t.value[1]=new Ue(1,1,1,1)),e.steps?r=new Cb(e.steps.length,e.steps):(r=new Cb(10,1),r.value[0]=0);let d=new eb(null!=(q=e.alpha)?q:1),p=new Sb(null!=(Y=e.mode)?Y:0),f=new Qb(n,i,a,o,s,l,u,c,t,r,h,d),m=new Jx(f.calpha,"f");return{layer:new _b(e.id,e.uuid,{type:Ce,gradientType:n,smooth:i,near:a,far:o,isVector:s,isWorldSpace:l,origin:u,direction:c,colors:t,steps:r,num:h,alpha:d,calpha:m,mode:p}),color:f,alpha:m,mode:p}}case"noise":{let t=new eb(null!=(X=e.scale)?X:1),r=new Ix(null!=(Q=e.size)?Q:new We(100,100,100)),n=new eb(null!=(J=e.move)?J:1),i=new kx(null!=(Z=e.fA)?Z:new ve(1.7,9.2)),a=new kx(null!=(K=e.fB)?K:new ve(8.3,2.8)),o=new kx(null!=($=e.distortion)?$:new ve(1,1)),s=new Bx(e.colorA),l=new Bx(e.colorB),u=new Bx(e.colorC),c=new Bx(e.colorD),h=new eb(null!=(ee=e.alpha)?ee:1),d=new Sb(null!=(te=e.mode)?te:0),p=new Sb(null!=(re=e.noiseType)?re:0),f=new qb(t,r,n,i,a,o,s,l,u,c,h,p),m=new Jx(f.calpha,"f");return{layer:new _b(e.id,e.uuid,{type:Ce,scale:t,size:r,move:n,fA:i,fB:a,distortion:o,colorA:s,colorB:l,colorC:u,colorD:c,alpha:h,calpha:m,mode:d,noiseType:p}),color:f,alpha:m,mode:d}}case"normal":{let t=new Ix(null!=(ne=e.cnormal)?ne:new We(1,1,1)),r=new eb(null!=(ie=e.alpha)?ie:1),n=new Sb(null!=(ae=e.mode)?ae:0),i=new Ub(t,r),a=new Jx("alpha / clamp(alpha + accumAlpha, 0.00001, 1.0 )","f");return a.keywords.alpha=r,{layer:new _b(e.id,e.uuid,{type:Ce,cnormal:t,alpha:r,calpha:a,mode:n}),color:i,alpha:a,mode:n}}case"gradient":{let t,r,n=new Sb(null!=(oe=e.gradientType)?oe:0),i=new Mb(null!=(se=e.smooth)&&se);e.colors?t=new Eb(e.colors.length,e.colors):(t=new Eb(10,new Ue(0,0,0,1)),t.value[1]=new Ue(1,1,1,1)),e.steps?r=new Cb(e.steps.length,e.steps):(r=new Cb(10,1),r.value[0]=0);let a=new kx(null!=(le=e.offset)?le:new ve(0,0)),o=new kx(null!=(ue=e.morph)?ue:new ve(0,0)),s=new eb(null!=(ce=e.angle)?ce:0),l=new eb(null!=(he=e.alpha)?he:1),u=new Sb(null!=(de=e.mode)?de:0),c=new Hb(n,i,t,r,a,o,s,l),h=new Jx(c.calpha,"f");return{layer:new _b(e.id,e.uuid,{type:Ce,gradientType:n,smooth:i,colors:t,steps:r,offset:a,morph:o,angle:s,alpha:l,calpha:h,mode:u}),color:c,alpha:h,mode:u}}case"displace":{let t=new Sb(null!=(pe=e.displacementType)?pe:0);if(0===t.value){let r=new Ix(null!=(fe=e.offset)?fe:new We(0,0,0)),n=new eb(null!=(me=e.scale)?me:10),i=new eb(null!=(ge=e.intensity)?ge:8),a=new eb(null!=(ye=e.movement)?ye:1),o=new eb(null!=(xe=e.alpha)?xe:1),s=new Sb(null!=(be=e.mode)?be:0),l=new Sb(null!=(we=e.noiseType)?we:0),u=new Wb(t,i,a,r,n,l);return{layer:new _b(e.id,e.uuid,{displacementType:t,type:Ce,offset:r,scale:n,intensity:i,movement:a,alpha:o,mode:s,noiseType:l}),position:u}}if(1===t.value){let r=null!=(Se=e.texture)?Se:new Zx,n=r.matrix;e.mat&&n.copy(e.mat),r.needsUpdate=!0;let i=new eb(null!=(_e=e.intensity)?_e:8),a=new $x(r),o=new eb(null!=(Ae=e.crop)?Ae:0),s=new eb(null!=(Me=e.alpha)?Me:1),l=new Sb(null!=(Ee=e.mode)?Ee:0),u=new Wb(t,i,a,o);return{layer:new _b(e.id,e.uuid,{displacementType:t,type:Ce,intensity:i,texture:a,crop:o,mat:u.mat,alpha:s,mode:l}),position:u}}return{}}}return{}}blendColors(){let e=this._layerNodes.findIndex((e=>"color"===e.type)),t=this._layerNodes.findIndex((e=>"light"===e.type));if(-1!==e&&e<t){let r=this._layerNodes[e].color;for(let n=e+1;n<t;++n){let e=this._layerNodes[n];"color"===e.type&&(r=new Yb(r,e.color,e.alpha,e.mode))}this._material.color=r}else this._material.color=void 0}blendAfterColors(){let e=new Jx("outgoingLight","f"),t=this._layerNodes.findIndex((e=>"light"===e.type));if(this._layerNodes.length>t+1){for(let r=t+1;r<this._layerNodes.length;++r){let t=this._layerNodes[r];"color"===t.type&&(e=new Yb(e,t.color,t.alpha,t.mode))}"afterColor"in this._material&&(this._material.afterColor=e)}else"afterColor"in this._material&&(this._material.afterColor=void 0)}blendPositions(){let e=this._layerNodes.filter((e=>"position"===e.type));if(e.length>0){let t=e[0].position;for(let r=1;r<e.length;++r)e[r]&&(t=new nb(t,e[r].position,nb.ADD),t=new nb(t,new eb(.5).setReadonly(!0),nb.MUL));this._material.position=t}else this._material.position=void 0}cleanupChangedLayer(e){"displace"===(this._layerNodes=this._layerNodes.filter((t=>t.id!==e.id)),e.type)?this.blendPositions():(this.blendColors(),this.blendAfterColors())}},$b=class extends Wr{constructor(e,t,r){super(r),this.isNodeMaterial=!0,this.type="NodeMaterial",this.wireframeLinecap="",this.wireframeLinejoin="",this.uniformsBackup={},this.userData={type:"",category:"",nodeType:""},this.fog=!0,this.vertex=null!=e?e:new bb(new hb(hb.PROJECTION)),this.fragment=null!=t?t:new bb(new wb(5855577)),this.updaters=[],this.isDetached=!0,this.dithering=!0,this.onBeforeCompile=this._onBeforeCompile}getDefines(){return this.defines}getUniforms(){return this.uniforms}getVertexShader(){return this.vertexShader}getFragmentShader(){return this.fragmentShader}_onBeforeCompile(e,t){this.build({renderer:t}),e.defines=this.defines,e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.extensionDerivatives=!0===this.extensions.derivatives,e.extensionFragDepth=!0===this.extensions.fragDepth,e.extensionDrawBuffers=!0===this.extensions.drawBuffers,e.extensionShaderTextureLOD=!0===this.extensions.shaderTextureLOD}_getLayerStack(e){let t=new Kb(this);return e&&(async()=>{for(;void 0===e.image;)await new Promise((e=>requestAnimationFrame(e)));t.addLayerAt(1,{type:"texture",texture:e}),this.dispose()})(),t}clampUniformsForPreview(e,t){let r=(e,t,r)=>Math.min(Math.max(e,t),r);if(this.userData.layers)for(let n of this.userData.layers.getLayers())if("displace"==n.type){this.uniformsBackup[`f${n.id}_intensity`]=n.uniforms[`f${n.id}_intensity`].value;let i=r(n.uniforms[`f${n.id}_intensity`].value,e,t);n.uniforms[`f${n.id}_intensity`].value=i}}restoreClampedUniforms(){if(this.userData.layers)for(let e of this.userData.layers.getLayers())"displace"==e.type&&(e.uniforms[`f${e.id}_intensity`].value=this.uniformsBackup[`f${e.id}_intensity`])}customProgramCacheKey(){return this.getHash()}updateFrame(e){for(let t=0;t<this.updaters.length;++t)e.updateNode(this.updaters[t])}build(e){var t;let r=null!=(t=(e=null!=e?e:{}).builder)?t:new class{constructor(){this.includes={consts:{},functions:{},structs:{}},this.cache="",this.slot="",this.shader="",this.context={},this.getIncludesCode=function(){function e(e,t){return e.deps.length-t.deps.length}return function(t,r){let n=this.getIncludes(t,r);if(!n)return"";let i="";n=n.sort(e);for(let e=0;e<n.length;e++)n[e].src&&(i+=n[e].src+"\n");return i}}(),this.slots=[],this.caches=[],this.contexts=[],this.keywords={},this.nodeData={},this.fragmentVariables={},this.requires={uv:[],color:[],lights:!1,fog:!1,transparent:!1,irradiance:!1,position:!1,worldPosition:!1,normal:!1,worldNormal:!1,vWorldViewDir:!1,modelMatrix:!1,viewMatrix:!1,projectionMatrix:!1},this.includes={consts:[],functions:[],structs:[]},this.attributes={},this.prefixCode=["#ifdef TEXTURE_LOD_EXT","\t#define texCube(a, b) textureCube(a, b)","\t#define texCubeBias(a, b, c) textureCubeLodEXT(a, b, c)","\t#define tex2D(a, b) texture2D(a, b)","\t#define tex2DBias(a, b, c) texture2DLodEXT(a, b, c)","#else","\t#define texCube(a, b) textureCube(a, b)","\t#define texCubeBias(a, b, c) textureCube(a, b, c)","\t#define tex2D(a, b) texture2D(a, b)","\t#define tex2DBias(a, b, c) texture2D(a, b, c)","#endif","\n\t\t\t// NOTE: Include Spline's blending modes. This could be part of BlendNode\n\t\t\t#define SPE_BLENDING_NORMAL 0\n\t\t\t#define SPE_BLENDING_MULTIPLY 1\n\t\t\t#define SPE_BLENDING_SCREEN 2\n\t\t\t#define SPE_BLENDING_OVERLAY 3\n\n\t\t\tvec3 spe_normalBlend( vec3 a, vec3 b, float alpha ) {\n\t\t\t\treturn mix( a, b, alpha );\n\t\t\t}\n\n\t\t\tvec3 spe_multiplyBlend( vec3 a, vec3 b, float alpha ) {\n\t\t\t\treturn mix( a, a * b, alpha );\n\t\t\t}\n\n\t\t\tvec3 spe_screenBlend( vec3 a, vec3 b, float alpha ) {\n\t\t\t\tvec3 tmp = 1.0 - ( 1.0 - a ) * ( 1.0 - b );\n\t\t\t\treturn mix( a, tmp, alpha );\n\t\t\t}\n\n\t\t\tvec3 spe_overlayBlend( vec3 a, vec3 b, float alpha ) {\n\t\t\t\tvec3 tmp = mix( 1. - 2. * (1. - a) * (1. - b), 2. * a * b, step( a, vec3(.5) ) );\n\t\t\t\treturn clamp( mix( a, tmp, alpha ), 0.0, 1.0 );\n\t\t\t}\n\n\t\t\tvec3 spe_blend( vec3 a, vec3 b, float alpha, int mode ) {\n\t\t\t\tif ( mode == SPE_BLENDING_NORMAL ) return spe_normalBlend( a, b, alpha );\n\t\t\t\telse if ( mode == SPE_BLENDING_MULTIPLY ) return spe_multiplyBlend( a, b, alpha );\n\t\t\t\telse if ( mode == SPE_BLENDING_SCREEN ) return spe_screenBlend( a, b, alpha );\n\t\t\t\telse if ( mode == SPE_BLENDING_OVERLAY ) return spe_overlayBlend( a, b, alpha );\n\t\t\t\treturn vec3( 1.0 );\n\t\t\t}\n\t\t\t","#include <packing>","#include <common>"].join("\n"),this.parsCode={vertex:["float neighbor_offset = 0.0001;",""].join("\n"),fragment:["float accumAlpha = 0.0;","void accumulateAlpha(float alpha) {\n\t\t\t\t\taccumAlpha += (1.0 - accumAlpha) * alpha;\n\t\t\t\t}",""].join("\n")},this.code={vertex:"",fragment:""},this.nodeCode={vertex:"",fragment:""},this.resultCode={vertex:"",fragment:""},this.finalCode={vertex:"",fragment:""},this.inputs={uniforms:{list:[],vertex:[],fragment:[]},arrayUniforms:{list:[],vertex:[],fragment:[]},vars:{varying:[],vertex:[],fragment:[]}},this.defines={},this.uniforms={},this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.updaters=[],this.nodes=[],this.analyzing=!1}build(e,t){this.buildShader("vertex",e),this.buildShader("fragment",t);for(let e=0;e<this.requires.uv.length;e++)if(this.requires.uv[e]){let t=e>0?e+1:"";this.addVaryCode("varying vec2 vUv"+t+";"),e>0&&this.addVertexParsCode("attribute vec2 uv"+t+";"),this.addVertexFinalCode("vUv"+t+" = uv"+t+";")}return this.requires.color[0]&&(this.addVaryCode("varying vec4 vColor;"),this.addVertexParsCode("attribute vec4 color;"),this.addVertexFinalCode("vColor = color;")),this.requires.color[1]&&(this.addVaryCode("varying vec4 vColor2;"),this.addVertexParsCode("attribute vec4 color2;"),this.addVertexFinalCode("vColor2 = color2;")),this.requires.position&&(this.addVaryCode("varying vec3 vPosition;"),this.addVertexFinalCode("vPosition = transformed;")),this.requires.worldPosition&&(this.addVaryCode("varying vec3 vWPosition;"),this.addVertexFinalCode("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;")),this.requires.normal&&(this.addVaryCode("varying vec3 vObjectNormal;"),this.addVertexFinalCode("vObjectNormal = normal;")),this.requires.modelMatrix&&this.addFragmentParsCode("uniform mat4 modelMatrix;"),this.requires.viewMatrix&&this.addFragmentParsCode("uniform mat4 viewMatrix;"),this.requires.projectionMatrix&&this.addFragmentParsCode("uniform mat4 projectionMatrix;"),this.requires.worldNormal&&(this.addVaryCode("varying vec3 vWNormal;"),this.addVertexFinalCode("vWNormal = inverseTransformDirection( transformedNormal, viewMatrix ).xyz;")),this.requires.vWorldViewDir&&(this.addVaryCode("varying vec3 vWorldViewDir;"),this.addVertexFinalCode("vWorldViewDir = isPerspectiveMatrix( projectionMatrix ) ?  ( (modelMatrix * vec4(position, 1.0)).xyz - cameraPosition ) : vec3( -viewMatrix[0][2], -viewMatrix[1][2], -viewMatrix[2][2] );")),this}buildShader(e,t){this.resultCode[e]=t.build(this.setShader(e),"v4")}setMaterial(e,t){return this.material=e,this.renderer=t,this.requires.lights=e.lights,this.requires.fog=e.fog,this.mergeDefines(e.defines),this}addFlow(e,t,r){return this.addSlot(e).addCache(t).addContext(r)}removeFlow(){return this.removeSlot().removeCache().removeContext()}addCache(e){return this.cache=null!=e?e:"",this.caches.push(this.cache),this}removeCache(){return this.caches.pop(),this.cache=this.caches[this.caches.length-1]||"",this}addContext(e){return this.context=Object.assign({},this.context,e),this.context.extra=this.context.extra||{},this.contexts.push(this.context),this}removeContext(){return this.contexts.pop(),this.context=this.contexts[this.contexts.length-1]||{},this}addSlot(e){return this.slot=e||"",this.slots.push(this.slot),this}removeSlot(){return this.slots.pop(),this.slot=this.slots[this.slots.length-1]||"",this}addFragmentVariable(e,t){void 0===this.fragmentVariables[e]&&(this.addFragmentCode(`${t} ${e};`),this.fragmentVariables[e]="")}addVertexCode(e){this.addCode(e,"vertex")}addFragmentCode(e){this.addCode(e,"fragment")}addCode(e,t){this.code[null!=t?t:this.shader]+=e+"\n"}addVertexNodeCode(e){this.addNodeCode(e,"vertex")}addFragmentNodeCode(e){this.addNodeCode(e,"fragment")}addNodeCode(e,t){this.nodeCode[null!=t?t:this.shader]+=e+"\n"}clearNodeCode(e){e=null!=e?e:this.shader;let t=this.nodeCode[e];return this.nodeCode[e]="",t}clearVertexNodeCode(){return this.clearNodeCode("vertex")}clearFragmentNodeCode(){return this.clearNodeCode("fragment")}addVertexFinalCode(e){this.addFinalCode(e,"vertex")}addFragmentFinalCode(e){this.addFinalCode(e,"fragment")}addFinalCode(e,t){this.finalCode[null!=t?t:this.shader]+=e+"\n"}addVertexParsCode(e){this.addParsCode(e,"vertex")}addFragmentParsCode(e){this.addParsCode(e,"fragment")}addParsCode(e,t){this.parsCode[null!=t?t:this.shader]+=e+"\n"}addVaryCode(e){this.addVertexParsCode(e),this.addFragmentParsCode(e)}isCache(e){return-1!==this.caches.indexOf(e)}isSlot(e){return-1!==this.slots.indexOf(e)}define(e,t){this.defines[e]=void 0===t?1:t}require(e){this.requires[e]=!0}isDefined(e){return void 0!==this.defines[e]}getVar(e,t,r,n="varying",i="V",a=""){let o=this.getVars(n),s=o[e];if(!s){let n=o.length;s={name:r||"node"+i+n+(a?"_"+a:""),type:t},o.push(s),o[e]=s}return s}getTempVar(e,t,r,n){return this.getVar(e,t,r,this.shader,"T",n)}getAttribute(e,t){if(!this.attributes[e]){let r=this.getVar(e,t);this.addVertexParsCode("attribute "+t+" "+e+";"),this.addVertexFinalCode(r.name+" = "+e+";"),this.attributes[e]={varying:r,name:e,type:t}}return this.attributes[e]}getCode(e){return[this.prefixCode,this.parsCode[e],this.getVarListCode(this.getVars("varying"),"varying"),this.getVarListCode(this.inputs.uniforms[e],"uniform"),this.getVarListCode(this.inputs.arrayUniforms[e],"uniform"),this.getIncludesCode("consts",e),this.getIncludesCode("structs",e),this.getIncludesCode("functions",e),"void main() {",this.getVarListCode(this.getVars(e)),this.code[e],this.resultCode[e],this.finalCode[e],"}"].join("\n")}getVarListCode(e,t){t=null!=t?t:"";let r="";for(let n=0,i=e.length;n<i;++n){let i=e[n],a=i.type,o=i.name,s=i.size,l=this.getFormatByType(a);if(void 0===l)throw new Error("Node pars "+l+" not found.");l.includes("[]")?r+=t+" "+l.substring(0,l.length-2)+" "+o+`[${s}];\n`:r+=t+" "+l+" "+o+";\n"}return r}getVars(e){return this.inputs.vars[null!=e?e:this.shader]}getNodeData(e){let t=e instanceof Lx?e.uuid:e;return this.nodeData[t]=this.nodeData[t]||{}}createUniform(e,t,r,n,i,a){if(t.includes("[]")){let o=this.inputs.arrayUniforms,s=o.list.length,l=new Dx({type:t,size:r.size,name:n||"nodeUA"+s+(a?"_"+a:""),node:r,needsUpdate:i});return o.list.push(l),o[e].push(l),o[e][l.name]=l,this.uniforms[l.name]=l,l}{let o=this.inputs.uniforms,s=o.list.length,l=new Dx({type:t,name:n||"nodeU"+s+(a?"_"+a:""),node:r,needsUpdate:i});return o.list.push(l),o[e].push(l),o[e][l.name]=l,this.uniforms[l.name]=l,l}}createVertexUniform(e,t,r,n,i){return this.createUniform("vertex",e,t,r,n,i)}createFragmentUniform(e,t,r,n,i){return this.createUniform("fragment",e,t,r,n,i)}include(e,t,r){var n;let i;if(e="string"==typeof e?Px.get(e):e,!1===this.context.include)return e.name;e instanceof Fx?i=this.includes.functions:e instanceof Hx?i=this.includes.consts:e instanceof Wx&&(i=this.includes.structs);let a=i[this.shader]=i[this.shader]||[];if(e){let i=a[e.name];if(i||(i=a[e.name]={node:e,deps:[]},a.push(i),i.src=e.build(this,"source")),e instanceof Fx&&t&&a[t.name]&&-1===a[t.name].deps.indexOf(e)&&(a[t.name].deps.push(e),null!=(n=e.includes)&&n.length)){let r=0;do{this.include(e.includes[r++],t)}while(r<e.includes.length)}return r&&(i.src=r),e.name}throw new Error("Include not found.")}colorToVectorProperties(e){return e.replace("r","x").replace("g","y").replace("b","z").replace("a","w")}colorToVector(e){return e.replace(/c/g,"v3")}getIncludes(e,t){return this.includes[e][t||this.shader]}getConstructorFromLength(e){return vb[e-1]}isTypeMatrix(e){return/^m/.test(e)}getTypeLength(e){return"f"===e?1:parseInt(this.colorToVector(e).substr(1))}getTypeFromLength(e){return 1===e?"f":"v"+e}findNode(...e){for(let t=0;t<arguments.length;t++){let r=e[t];if(null!=r&&r.isNode)return r}}resolve(...e){for(let t=0;t<arguments.length;t++){let r=e[t];if(void 0!==r){if(r.isNode)return r;if(r.isTexture)switch(r.mapping){case w:case S:return new mb(r);case _:return new fb(new $x(r));default:return new $x(r)}else{if(r.isVector2)return new kx(r);if(r.isVector3)return new Ix(r);if(r.isVector4)return new Bx(r)}}}}format(e,t,r){switch(this.colorToVector(r+" <- "+t)){case"f <- v2":case"f <- v3":case"f <- v4":return e+".x";case"f <- i":case"f <- b":return"float( "+e+" )";case"v2 <- f":return"vec2( "+e+" )";case"v2 <- v3":case"v2 <- v4":return e+".xy";case"v2 <- i":case"v2 <- b":case"v3 <- i":case"v3 <- b":return"vec2( float( "+e+" ) )";case"v3 <- f":return"vec3( "+e+" )";case"v3 <- v2":return"vec3( "+e+", 0.0 )";case"v3 <- v4":return e+".xyz";case"v4 <- f":return"vec4( "+e+" )";case"v4 <- v2":return"vec4( "+e+", 0.0, 1.0 )";case"v4 <- v3":return"vec4( "+e+", 1.0 )";case"v4 <- i":case"v4 <- b":return"vec4( float( "+e+" ) )";case"i <- f":case"i <- b":return"int( "+e+" )";case"i <- v2":case"i <- v3":case"i <- v4":return"int( "+e+".x )";case"b <- f":return"( "+e+" != 0.0 )";case"b <- v2":return"( "+e+" != vec2( 0.0 ) )";case"b <- v3":return"( "+e+" != vec3( 0.0 ) )";case"b <- v4":return"( "+e+" != vec4( 0.0 ) )";case"b <- i":return"( "+e+" != 0 )"}return e}getTypeByFormat(e){return yb[e]||e}getFormatByType(e){return xb[e]||e}getUUID(e,t){return(t=void 0===t||t)&&this.cache&&(e=this.cache+"-"+e),e}getElementByIndex(e){return gb[e]}getIndexByElement(e){return gb.indexOf(e)}isShader(e){return this.shader===e}setShader(e){return this.shader=e,this}mergeDefines(e){for(let t in e)this.defines[t]=e[t];return this.defines}mergeUniform(e){for(let t in e)this.uniforms[t]=e[t];return this.uniforms}getTextureEncodingFromMap(e){let t;return e?e.isTexture&&(t=e.encoding):t=Q,t===Q&&this.context.gamma&&(t=J),t}};return r.setMaterial(this,e.renderer),r.build(this.vertex,this.fragment),this.vertexShader=r.getCode("vertex"),this.fragmentShader=r.getCode("fragment"),this.defines=r.defines,this.uniforms=r.uniforms,this.extensions=r.extensions,this.updaters=r.updaters,this.fog=r.requires.fog,this.lights=r.requires.lights,this.transparent=r.requires.transparent||this.blending>1,this}getHash(){let e="{";return e+='"vertex":'+this.vertex.getHash()+",",e+='"fragment":'+this.fragment.getHash(),e+="}",e}copy(e){let t=this.uuid;for(let t in e)this[t]=e[t];return this.uuid=t,void 0!==e.userData&&(this.userData=JSON.parse(JSON.stringify(e.userData))),this}toJSON(e){let t=this.userData.layers;this.userData.layers=void 0;let r=super.toJSON(e);return r.type="ShaderMaterial",r.userData={type:this.userData.type,category:this.userData.category,nodeType:this.type,layers:t.toJSON(e)},r.vertex=this.vertex.toJSON(e).uuid,r.fragment=this.fragment.toJSON(e).uuid,delete r.vertexShader,delete r.fragmentShader,delete r.color,delete r.shininess,delete r.specular,delete r.roughness,delete r.metalness,delete r.uniforms,e&&!e.materials[this.uuid]&&(e.materials[this.uuid]=r),this.userData.layers=t,r}fromJSON(e,t){var r;this.defines=null!=(r=e.defines)?r:{},this.depthFunc=e.depthFunc,this.depthWrite=e.depthWrite,this.side=void 0!==e.side?e.side:0,this.transparent=e.transparent,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.wireframe=e.wireframe,this.userData.layers.fromJSON(e.userData.layers,t,this)}};Object.defineProperties($b.prototype,{properties:{get:function(){return this.fragment.properties}},needsUpdate:{set:function(e){!0===e&&this.version++,this.needsCompile=e},get:function(){return this.needsCompile}}});var ew,tw,rw,nw=class extends Lx{constructor(){super("basic"),this.nodeType="Basic",this.color=new wb(5855577)}generate(e){let t;if(e.isShader("vertex")){let r=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform(Gr.merge([cn.fog])),e.addParsCode(["varying vec3 vViewPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>"].join("\n"));let n=["#include <beginnormal_vertex>","\n\t\t\t\t#if !defined( USE_LAYER_DISPLACE )\n\t\t\t\t\t#include <defaultnormal_vertex>\n\t\t\t\t#endif\n\n\t\t\t\tvec3 displaced_position = position;\n\t\t\t\tvec3 displaced_normal = normal;\n\n\t\t\t\t#if defined( USE_LAYER_DISPLACE )\n\t\t\t\t\tvec3 transformed;\n\t\t\t\t\tvec3 transformedNormal;\n\t\t\t\t#endif\n\t\t\t\t","#include <normal_vertex>","\n\t\t\t\t#if !defined( USE_LAYER_DISPLACE )\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t#endif /* !USE_LAYER_DISPLACE */\n\t\t\t\t"];r&&n.push(r.code,r.result?"displaced_position = "+r.result+";":""),n.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","\tvNormal = transformedNormal;","#endif"),n.push("#include <project_vertex>","#include <fog_vertex>","#include <clipping_planes_vertex>","\tvViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>"),t=n.join("\n")}else{void 0===this.color&&(this.color=new wb(5855577)),this.color.analyze(e,{slot:"color"}),this.alpha&&this.alpha.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"});let r=this.color.flow(e,"c",{slot:"color"}),n=this.alpha?this.alpha.flow(e,"f"):void 0,i=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0;e.requires.transparent=void 0!==n,e.addParsCode(["#include <fog_pars_fragment>","#include <dithering_pars_fragment>","varying vec3 vViewPosition;","#include <normal_pars_fragment>"].join("\n"));let a=["#include <normal_fragment_begin>",r.code];n&&a.push(n.code,"#ifdef ALPHATEST"," if ( "+n.result+" <= ALPHATEST ) discard;","#endif"),i?a.push(i.code,`vec3 outgoingLight = ${r.result};`,`vec3 finalColor = spe_blend(outgoingLight, ${i.result}, 1.0, SPE_BLENDING_NORMAL);`):a.push(`vec3 finalColor = ${r.result};`),n?a.push(`gl_FragColor = vec4( finalColor, accumAlpha * ${n.result} );`):a.push("gl_FragColor = vec4("+r.result+", 1.0 );"),a.push("#include <fog_fragment>","#include <dithering_fragment>"),t=a.join("\n")}return t}copy(e){return super.copy(e),e.color&&(this.color=e.color.clone()),e.position&&(this.position=e.position.clone()),e.alpha&&(this.alpha=e.alpha.clone()),e.afterColor&&(this.afterColor=e.afterColor.clone()),e.shadingAlpha&&(this.shadingAlpha=e.shadingAlpha.clone()),e.shadingBlend&&(this.shadingBlend=e.shadingBlend.clone()),this}},iw=class extends $b{constructor(e=new nw,t){super(e,e,t),this.type="BasicNodeMaterial",this.fragment=e}get color(){return this.fragment.color}set color(e){this.fragment.color=e}get afterColor(){return this.fragment.afterColor}set afterColor(e){this.fragment.afterColor=e}get alpha(){return this.fragment.alpha}set alpha(e){this.fragment.alpha=e}get shadingAlpha(){return this.fragment.shadingAlpha}set shadingAlpha(e){this.fragment.shadingAlpha=e}get shadingBlend(){return this.fragment.shadingBlend}set shadingBlend(e){this.fragment.shadingBlend=e}get position(){return this.fragment.position}set position(e){this.fragment.position=e}},aw=class extends iw{constructor(e,t,r){super(t,e),this.userData.type="BasicMaterial",this.userData.category="Basic",this.userData.layers=null!=r?r:this._getLayerStack(null==e?void 0:e.map)}get layersList(){return this.userData.layers}set layersList(e){this.userData.layers=e}equals(e){return this.userData.type===e.userData.type&&this.userData.layers.uuid==e.userData.layers.uuid}copy(e){if(void 0!==e.userData.layers&&e.userData.layers instanceof Kb){let t=e.userData.layers,r=e.fragment;super.copy(e);let n=r.clone();this.fragment=n,this.vertex=n;let i=t.clone(this);this.userData.layers=i}else super.copy(e);return this}static fromJSON(e,t,r){let n=r.getNode(t.vertex),i=new aw(void 0,n);return i.fromJSON(t,r),i}static fromMaterial(e){let t=new aw(e.map?{map:e.map}:{}),r=t.fragment;return r.color.value.copy(e.color),r.alpha.value=e.opacity,t}dispose(){super.dispose()}},ow=class extends Lx{constructor(){super("phong"),this.nodeType="Phong",this.color=new wb(5855577),this.specular=new wb(1118481),this.shininess=new eb(30),this.shadingAlpha=new eb(1),this.shadingBlend=new Sb(0)}build(e){let t;if(e.define("PHONG"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let r=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform(Gr.merge([cn.fog,cn.lights])),e.addParsCode(["varying vec3 vViewPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join("\n"));let n=["#include <beginnormal_vertex>","\n\t\t\t\t#ifndef USE_LAYER_DISPLACE\n\t\t\t\t\t#include <defaultnormal_vertex>\n\t\t\t\t#endif\n\n\t\t\t\tvec3 displaced_position = position;\n\t\t\t\tvec3 displaced_normal = normal;\n\n\t\t\t\t#ifdef USE_LAYER_DISPLACE\n\t\t\t\t\tvec3 transformed;\n\t\t\t\t\tvec3 transformedNormal;\n\t\t\t\t#endif\n\t\t\t\t","#include <normal_vertex>","\n\t\t\t\t#ifndef USE_LAYER_DISPLACE\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t#endif\n\t\t\t\t"];r&&n.push(r.code,r.result?"displaced_position = "+r.result+";":""),n.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),n.push("\t#include <project_vertex>","\t#include <clipping_planes_vertex>","\tvViewPosition = - mvPosition.xyz;","\t#include <worldpos_vertex>","\t#include <shadowmap_vertex>","\t#include <fog_vertex>"),t=n.join("\n")}else{void 0===this.color&&(this.color=new wb(5855577)),this.color.analyze(e,{slot:"color"}),this.specular.analyze(e),this.shininess.analyze(e),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let r=this.color.flow(e,"c",{slot:"color"}),n=this.specular.flow(e,"c"),i=this.shininess.flow(e,"f"),a=this.shadingAlpha.flow(e,"f"),o=this.shadingBlend.flow(e,"i"),s=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,l=this.alpha?this.alpha.flow(e,"f"):void 0;e.requires.transparent=void 0!==l,e.addParsCode(["uniform vec3 emissive;","#include <normal_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_phong_pars_fragment>","#include <shadowmap_pars_fragment>","#include <dithering_pars_fragment>"].join("\n"));let u=["#include <normal_fragment_begin>","\n\t\t\t\t// NOTE: gl_FrontFacing alternative using face normal estimation.\n\t\t\t\tvec3 viewdx = dFdx(vViewPosition);\n\t\t\t\tvec3 viewdy = dFdy(vViewPosition);\n\t\t\t\tvec3 faceNormal = normalize(cross(viewdx,viewdy));\n\t\t\t\tif (dot(normal, faceNormal) < 0.0) {\n\t\t\t\t\tnormal *= -1.0;\n\t\t\t\t}\n\t\t\t\t","\tBlinnPhongMaterial material;"];u.push(r.code,"\tvec3 diffuseColor = "+r.result+";","\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );","\tvec3 totalEmissiveRadiance = emissive;",n.code,"\tvec3 specular = "+n.result+";",i.code,"\tfloat shininess = max( 0.0001, "+i.result+" );","\tfloat specularStrength = 1.0;"),l&&u.push(l.code,"#ifdef ALPHATEST","if ( "+l.result+" <= ALPHATEST ) discard;","#endif"),u.push("material.diffuseColor = diffuseColor;"),u.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),u.push("vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;"),u.push(`\n\t\t\t\tif (outgoingLight != diffuseColor) {\n\t\t\t\t\tfloat lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );\n\t\t\t\t\taccumAlpha += ( 1.0 - accumAlpha ) * ${a.result} * lightAccu;\n\t\t\t\t\toutgoingLight = spe_blend( diffuseColor, outgoingLight, ${a.result}, ${o.result} );\n\t\t\t\t}\n\t\t\t\t`),s&&u.push(s.code,`outgoingLight = spe_blend(outgoingLight, ${s.result}, 1.0, SPE_BLENDING_NORMAL);`),l?u.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${l.result} );`):u.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),u.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=u.join("\n")}return t}copy(e){return super.copy(e),e.color&&(this.color=e.color.clone()),this.specular=e.specular.clone(),this.shininess=e.shininess.clone(),e.position&&(this.position=e.position.clone()),e.afterColor&&(this.afterColor=e.afterColor.clone()),e.alpha&&(this.alpha=e.alpha.clone()),e.shadingAlpha&&(this.shadingAlpha=e.shadingAlpha.clone()),e.shadingBlend&&(this.shadingBlend=e.shadingBlend.clone()),this}},sw=class extends $b{constructor(e=new ow,t){super(e,e,t),this.type="PhongNodeMaterial",this.fragment=e}get color(){return this.fragment.color}set color(e){this.fragment.color=e}get afterColor(){return this.fragment.afterColor}set afterColor(e){this.fragment.afterColor=e}get alpha(){return this.fragment.alpha}set alpha(e){this.fragment.alpha=e}get shadingAlpha(){return this.fragment.shadingAlpha}set shadingAlpha(e){this.fragment.shadingAlpha=e}get shadingBlend(){return this.fragment.shadingBlend}set shadingBlend(e){this.fragment.shadingBlend=e}get position(){return this.fragment.position}set position(e){this.fragment.position=e}get specular(){return this.fragment.specular}set specular(e){this.fragment.specular=e}get shininess(){return this.fragment.shininess}set shininess(e){this.fragment.shininess=e}},lw=class extends sw{constructor(e,t,r){super(t,e),this.userData.type="PhongMaterial",this.userData.category="Phong",this.userData.layers=null!=r?r:this._getLayerStack(null==e?void 0:e.map)}get layersList(){return this.userData.layers}set layersList(e){this.userData.layers=e}equals(e){return this.userData.type===e.userData.type&&this.userData.layers.uuid==e.userData.layers.uuid}copy(e){if(void 0!==e.userData.layers&&e.userData.layers instanceof Kb){let t=e.userData.layers,r=e.fragment;super.copy(e);let n=r.clone();this.fragment=n,this.vertex=n;let i=t.clone(this);this.userData.layers=i,n.shadingAlpha.value=r.shadingAlpha.value,n.shadingBlend.value=r.shadingBlend.value}else super.copy(e);return this}static fromJSON(e,t,r){let n=r.getNode(t.vertex),i=new lw(void 0,n);return i.fromJSON(t,r),i}static fromMaterial(e){let t=new lw(e.map?{map:e.map}:{}),r=t.fragment;return r.color.value.copy(e.color),r.alpha.value=e.opacity,t}dispose(){super.dispose()}},uw=class extends Lx{constructor(){super("lambert"),this.nodeType="Lambert",this.color=new wb(5855577),this.emissive=new wb(0),this.emissiveIntensity=new eb(1),this.shadingAlpha=new eb(1),this.shadingBlend=new Sb(0)}build(e){let t;if(e.define("LAMBERT"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let r=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform(Gr.merge([cn.fog,cn.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vLightFront;","varying vec3 vIndirectFront;","#ifndef DOUBLE_SIDED","   #define DOUBLE_SIDED","#endif","#ifdef DOUBLE_SIDED","\tvarying vec3 vLightBack;","\tvarying vec3 vIndirectBack;","#endif","#include <bsdfs>","#include <lights_pars_begin>","#include <color_pars_vertex>","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join("\n"));let n=["#include <beginnormal_vertex>","\n\t\t\t\t#ifndef USE_LAYER_DISPLACE\n\t\t\t\t\t#include <defaultnormal_vertex>\n\t\t\t\t#endif\n\n\t\t\t\tvec3 displaced_position = position;\n\t\t\t\tvec3 displaced_normal = normal;\n\n\t\t\t\t#ifdef USE_LAYER_DISPLACE\n\t\t\t\t\tvec3 transformed;\n\t\t\t\t\tvec3 transformedNormal;\n\t\t\t\t#endif\n\t\t\t\t","#include <normal_vertex>","\n\t\t\t\t#ifndef USE_LAYER_DISPLACE\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t#endif\n\t\t\t\t"];r&&n.push(r.code,r.result?"displaced_position = "+r.result+";":""),n.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),n.push("\t#include <project_vertex>","\t#include <clipping_planes_vertex>","\tvViewPosition = - mvPosition.xyz;","\t#include <worldpos_vertex>","\n\t\t\t\t\tvec3 diffuse = vec3( 1.0 );\n\t\t\t\t\tGeometricContext geometry;\n\t\t\t\t\tgeometry.position = mvPosition.xyz;\n\t\t\t\t\tgeometry.normal = normalize( transformedNormal );\n\t\t\t\t\tgeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\n\t\t\t\t\tGeometricContext backGeometry;\n\t\t\t\t\tbackGeometry.position = geometry.position;\n\t\t\t\t\tbackGeometry.normal = -geometry.normal;\n\t\t\t\t\tbackGeometry.viewDir = geometry.viewDir;\n\t\t\t\t\tvLightFront = vec3( 0.0 );\n\t\t\t\t\tvIndirectFront = vec3( 0.0 );\n\t\t\t\t\t#ifdef DOUBLE_SIDED\n\t\t\t\t\t\tvLightBack = vec3( 0.0 );\n\t\t\t\t\t\tvIndirectBack = vec3( 0.0 );\n\t\t\t\t\t#endif\n\t\t\t\t\tIncidentLight directLight;\n\t\t\t\t\tfloat dotNL;\n\t\t\t\t\tvec3 directLightColor_Diffuse;\n\t\t\t\t\tvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\n\t\t\t\t\tvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t\t\t\t\t#ifdef DOUBLE_SIDED\n\t\t\t\t\t\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\t\t\t\t\t\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n\t\t\t\t\t#endif\n\t\t\t\t\t#if NUM_POINT_LIGHTS > 0\n\t\t\t\t\t\t#pragma unroll_loop_start\n\t\t\t\t\t\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\t\t\t\t\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\t\t\t\t\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\t\t\t\t\t\tdirectLightColor_Diffuse = directLight.color;\n\t\t\t\t\t\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t\t\t\t\t\t#ifdef DOUBLE_SIDED\n\t\t\t\t\t\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t}\n\t\t\t\t\t\t#pragma unroll_loop_end\n\t\t\t\t\t#endif\n\t\t\t\t\t#if NUM_SPOT_LIGHTS > 0\n\t\t\t\t\t\t#pragma unroll_loop_start\n\t\t\t\t\t\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\t\t\t\t\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\t\t\t\t\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\t\t\t\t\t\tdirectLightColor_Diffuse = directLight.color;\n\t\t\t\t\t\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t\t\t\t\t\t#ifdef DOUBLE_SIDED\n\t\t\t\t\t\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t}\n\t\t\t\t\t\t#pragma unroll_loop_end\n\t\t\t\t\t#endif\n\t\t\t\t\t#if NUM_DIR_LIGHTS > 0\n\t\t\t\t\t\t#pragma unroll_loop_start\n\t\t\t\t\t\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\t\t\t\t\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\t\t\t\t\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\t\t\t\t\t\tdirectLightColor_Diffuse = directLight.color;\n\t\t\t\t\t\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t\t\t\t\t\t#ifdef DOUBLE_SIDED\n\t\t\t\t\t\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t}\n\t\t\t\t\t\t#pragma unroll_loop_end\n\t\t\t\t\t#endif\n\t\t\t\t\t#if NUM_HEMI_LIGHTS > 0\n\t\t\t\t\t\t#pragma unroll_loop_start\n\t\t\t\t\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\t\t\t\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t\t\t\t\t\t#ifdef DOUBLE_SIDED\n\t\t\t\t\t\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t}\n\t\t\t\t\t\t#pragma unroll_loop_end\n\t\t\t\t\t#endif\n\t\t\t\t","\t#include <shadowmap_vertex>","\t#include <fog_vertex>"),t=n.join("\n")}else{void 0===this.color&&(this.color=new wb(5855577)),this.color.analyze(e,{slot:"color"}),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let r=this.color.flow(e,"c",{slot:"color"}),n=this.emissive.flow(e,"c",{slot:"emissive"}),i=this.emissiveIntensity.flow(e,"f",{slot:"emissive"}),a=this.shadingAlpha.flow(e,"f"),o=this.shadingBlend.flow(e,"i"),s=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,l=this.alpha?this.alpha.flow(e,"f"):void 0;e.requires.transparent=void 0!==l,e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vLightFront;","varying vec3 vIndirectFront;","#ifndef DOUBLE_SIDED","   #define DOUBLE_SIDED","#endif","#include <normal_pars_fragment>","#ifdef DOUBLE_SIDED","\tvarying vec3 vLightBack;","\tvarying vec3 vIndirectBack;","#endif","#include <bsdfs>","#include <lights_pars_begin>","#include <fog_pars_fragment>","#include <shadowmap_pars_fragment>","#include <shadowmask_pars_fragment>","#include <clipping_planes_pars_fragment>","#include <dithering_pars_fragment>"].join("\n"));let u=["#include <normal_fragment_begin>","\n\t\t\t\t// NOTE: gl_FrontFacing alternative using face normal estimation.\n\t\t\t\tvec3 viewdx = dFdx(vViewPosition);\n\t\t\t\tvec3 viewdy = dFdy(vViewPosition);\n\t\t\t\tvec3 faceNormal = normalize(cross(viewdx, viewdy));\n\t\t\t\tbool isFrontFacing = (dot(normal, faceNormal) >= 0.0);\n\t\t\t\t","#include <clipping_planes_fragment>"];u.push(r.code,"vec3 diffuseColor = "+r.result+";","ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );"),l&&u.push(l.code,"#ifdef ALPHATEST","if ( "+l.result+" <= ALPHATEST ) discard;","#endif"),u.push("#ifdef DOUBLE_SIDED","\treflectedLight.indirectDiffuse += ( isFrontFacing ) ? vIndirectFront : vIndirectBack;","#else","\treflectedLight.indirectDiffuse += vIndirectFront;","#endif","#include <lightmap_fragment>","reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );","#ifdef DOUBLE_SIDED","\treflectedLight.directDiffuse = ( isFrontFacing ) ? vLightFront : vLightBack;","#else","\treflectedLight.directDiffuse = vLightFront;","#endif","reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();"),n&&u.push(n.code,"reflectedLight.directDiffuse += "+n.result+" * "+i.result+";"),u.push("vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;"),u.push(`\n\t\t\t\tif (outgoingLight != diffuseColor) {\n\t\t\t\t\tfloat lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );\n\t\t\t\t\taccumAlpha += ( 1.0 - accumAlpha ) * ${a.result} * lightAccu;\n\t\t\t\t\toutgoingLight = spe_blend( diffuseColor, outgoingLight, ${a.result}, ${o.result} );\n\t\t\t\t}\n\t\t\t\t`),s&&u.push(s.code,`outgoingLight = spe_blend(outgoingLight, ${s.result}, 1.0, SPE_BLENDING_NORMAL);`),l?u.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${l.result} );`):u.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),u.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=u.join("\n")}return t}copy(e){return super.copy(e),this.emissiveIntensity=e.emissiveIntensity.clone(),e.color&&(this.color=e.color.clone()),e.position&&(this.position=e.position.clone()),e.afterColor&&(this.afterColor=e.afterColor.clone()),e.alpha&&(this.alpha=e.alpha.clone()),e.shadingAlpha&&(this.shadingAlpha=e.shadingAlpha.clone()),e.shadingBlend&&(this.shadingBlend=e.shadingBlend.clone()),e.emissive&&(this.emissive=e.emissive.clone()),this}},cw=class extends $b{constructor(e=new uw,t){super(e,e,t),this.type="LambertNodeMaterial",this.fragment=e}get color(){return this.fragment.color}set color(e){this.fragment.color=e}get afterColor(){return this.fragment.afterColor}set afterColor(e){this.fragment.afterColor=e}get alpha(){return this.fragment.alpha}set alpha(e){this.fragment.alpha=e}get shadingAlpha(){return this.fragment.shadingAlpha}set shadingAlpha(e){this.fragment.shadingAlpha=e}get shadingBlend(){return this.fragment.shadingBlend}set shadingBlend(e){this.fragment.shadingBlend=e}get position(){return this.fragment.position}set position(e){this.fragment.position=e}get emissive(){return this.fragment.emissive}set emissive(e){this.fragment.emissive=e}get emissiveIntensity(){return this.fragment.emissiveIntensity}set emissiveIntensity(e){this.fragment.emissiveIntensity=e}},hw=class extends cw{constructor(e,t,r){super(t,e),this.userData.type="LambertMaterial",this.userData.category="Lambert",this.userData.layers=null!=r?r:this._getLayerStack(null==e?void 0:e.map)}get layersList(){return this.userData.layers}set layersList(e){this.userData.layers=e}equals(e){return this.userData.type===e.userData.type&&this.userData.layers.uuid==e.userData.layers.uuid}copy(e){if(void 0!==e.userData.layers&&e.userData.layers instanceof Kb){let t=e.userData.layers,r=e.fragment;super.copy(e);let n=r.clone();this.fragment=n,this.vertex=n;let i=t.clone(this);this.userData.layers=i,n.shadingAlpha.value=r.shadingAlpha.value,n.shadingBlend.value=r.shadingBlend.value}else super.copy(e);return this}static fromJSON(e,t,r){let n=r.getNode(t.vertex),i=new hw(void 0,n);return i.fromJSON(t,r),i}dispose(){super.dispose()}},dw=class extends Lx{constructor(){super("toon"),this.nodeType="Toon",this.color=new wb(5855577),this.specular=new wb(1118481),this.shininess=new eb(30),this.shadingAlpha=new eb(1),this.shadingBlend=new Sb(0)}build(e){let t;if(e.define("TOON"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let r=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform(Gr.merge([cn.fog,cn.lights])),e.addParsCode(["varying vec3 vViewPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join("\n"));let n=["#include <beginnormal_vertex>","\n\t\t\t\t#ifndef USE_LAYER_DISPLACE\n\t\t\t\t\t#include <defaultnormal_vertex>\n\t\t\t\t#endif\n\n\t\t\t\tvec3 displaced_position = position;\n\t\t\t\tvec3 displaced_normal = normal;\n\n\t\t\t\t#ifdef USE_LAYER_DISPLACE\n\t\t\t\t\tvec3 transformed;\n\t\t\t\t\tvec3 transformedNormal;\n\t\t\t\t#endif\n\t\t\t\t","#include <normal_vertex>","\n\t\t\t\t#ifndef USE_LAYER_DISPLACE\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t#endif\n\t\t\t\t"];r&&n.push(r.code,r.result?"displaced_position = "+r.result+";":""),n.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),n.push("\t#include <project_vertex>","\t#include <fog_vertex>","\t#include <clipping_planes_vertex>","\tvViewPosition = - mvPosition.xyz;","\t#include <worldpos_vertex>","\t#include <shadowmap_vertex>","\t#include <fog_vertex>"),t=n.join("\n")}else{void 0===this.color&&(this.color=new wb(5855577)),this.color.analyze(e,{slot:"color"}),this.specular.analyze(e),this.shininess.analyze(e),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let r=this.color.flow(e,"c",{slot:"color"}),n=this.specular.flow(e,"c"),i=this.shininess.flow(e,"f"),a=this.shadingAlpha.flow(e,"f"),o=this.shadingBlend.flow(e,"i"),s=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,l=this.alpha?this.alpha.flow(e,"f"):void 0;e.requires.transparent=void 0!==l,e.addParsCode(["#include <normal_pars_fragment>","#include <gradientmap_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <dithering_pars_fragment>","\n\t\t\t\t\tvarying vec3 vViewPosition;\n\t\t\t\t\tstruct ToonMaterial {\n\t\t\t\t\t\tvec3\tdiffuseColor;\n\t\t\t\t\t\tvec3\tspecularColor;\n\t\t\t\t\t\tfloat\tspecularShininess;\n\t\t\t\t\t\tfloat\tspecularStrength;\n\t\t\t\t\t};\n\t\t\t\t\tvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\t\t\t\t\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t\t\t\n\t\t\t\t\t\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\t\t\t\t\t\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n\t\t\t\t\t}\n\t\t\t\t\tvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\t\t\t\t\t\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\t\t\t\t\t}\n\t\t\t\t\t#define RE_Direct\t\t\t\tRE_Direct_Toon\n\t\t\t\t\t#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n\t\t\t\t\t#define Material_LightProbeLOD( material )\t(0)\n\t\t\t\t\t","#include <shadowmap_pars_fragment>","#include <bumpmap_pars_fragment>","#include <normalmap_pars_fragment>"].join("\n"));let u=["#include <normal_fragment_begin>","\n\t\t\t\t// NOTE: gl_FrontFacing alternative using face normal estimation.\n\t\t\t\tvec3 viewdx = dFdx(vViewPosition);\n\t\t\t\tvec3 viewdy = dFdy(vViewPosition);\n\t\t\t\tvec3 faceNormal = normalize(cross(viewdx,viewdy));\n\t\t\t\tif (dot(normal, faceNormal) < 0.0) {\n\t\t\t\t\tnormal *= -1.0;\n\t\t\t\t}\n\t\t\t\t","\tToonMaterial material;"];u.push(r.code,"\tvec3 diffuseColor = "+r.result+";","\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );",n.code,"\tvec3 specular = "+n.result+";",i.code,"\tfloat shininess = max( 0.0001, "+i.result+" );","\tfloat specularStrength = 1.0;"),l&&u.push(l.code,"#ifdef ALPHATEST","if ( "+l.result+" <= ALPHATEST ) discard;","#endif"),u.push("material.diffuseColor = diffuseColor;"),u.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),u.push("vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular;"),u.push(`\n\t\t\t\tif (outgoingLight != diffuseColor) {\n\t\t\t\t\tfloat lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );\n\t\t\t\t\taccumAlpha += ( 1.0 - accumAlpha ) * ${a.result} * lightAccu;\n\t\t\t\t\toutgoingLight = spe_blend( diffuseColor, outgoingLight, ${a.result}, ${o.result} );\n\t\t\t\t}\n\t\t\t\t`),s&&u.push(s.code,`outgoingLight = spe_blend(outgoingLight, ${s.result}, 1.0, SPE_BLENDING_NORMAL);`),l?u.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${l.result} );`):u.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),u.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=u.join("\n")}return t}copy(e){return super.copy(e),e.color&&(this.color=e.color.clone()),this.specular=e.specular.clone(),this.shininess=e.shininess.clone(),e.position&&(this.position=e.position.clone()),e.afterColor&&(this.afterColor=e.afterColor.clone()),e.alpha&&(this.alpha=e.alpha.clone()),e.shadingAlpha&&(this.shadingAlpha=e.shadingAlpha.clone()),e.shadingBlend&&(this.shadingBlend=e.shadingBlend.clone()),this}},pw=class extends $b{constructor(e=new dw,t){super(e,e,t),this.type="ToonNodeMaterial",this.fragment=e}get color(){return this.fragment.color}set color(e){this.fragment.color=e}get afterColor(){return this.fragment.afterColor}set afterColor(e){this.fragment.afterColor=e}get alpha(){return this.fragment.alpha}set alpha(e){this.fragment.alpha=e}get shadingAlpha(){return this.fragment.shadingAlpha}set shadingAlpha(e){this.fragment.shadingAlpha=e}get shadingBlend(){return this.fragment.shadingBlend}set shadingBlend(e){this.fragment.shadingBlend=e}get position(){return this.fragment.position}set position(e){this.fragment.position=e}get specular(){return this.fragment.specular}set specular(e){this.fragment.specular=e}get shininess(){return this.fragment.shininess}set shininess(e){this.fragment.shininess=e}},fw=class extends pw{constructor(e,t,r){super(t,e),this.userData.type="ToonMaterial",this.userData.category="Toon",this.userData.layers=null!=r?r:this._getLayerStack(null==e?void 0:e.map)}get layersList(){return this.userData.layers}set layersList(e){this.userData.layers=e}equals(e){return this.userData.type===e.userData.type&&this.userData.layers.uuid==e.userData.layers.uuid}copy(e){if(void 0!==e.userData.layers&&e.userData.layers instanceof Kb){let t=e.userData.layers,r=e.fragment;super.copy(e);let n=r.clone();this.fragment=n,this.vertex=n;let i=t.clone(this);this.userData.layers=i,n.shadingAlpha.value=r.shadingAlpha.value,n.shadingBlend.value=r.shadingBlend.value}else super.copy(e);return this}static fromJSON(e,t,r){let n=r.getNode(t.vertex),i=new fw(void 0,n);return i.fromJSON(t,r),i}dispose(){super.dispose()}},mw=class extends Lx{constructor(){super("standard"),this.nodeType="Standard",this.color=new wb(5855577),this.roughness=new eb(.3),this.metalness=new eb(0),this.reflectivity=new eb(.5),this.shadingAlpha=new eb(1),this.shadingBlend=new Sb(0)}build(e){let t;if(e.define("STANDARD"),e.requires.lights=!0,e.extensions.derivatives=!0,e.extensions.shaderTextureLOD=!0,e.isShader("vertex")){let r=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform(Gr.merge([cn.fog,cn.lights])),cn.LTC_1&&(e.uniforms.ltc_1={value:void 0},e.uniforms.ltc_2={value:void 0}),e.addParsCode(["varying vec3 vViewPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join("\n"));let n=["#include <beginnormal_vertex>","\n\t\t\t\t#if !defined( USE_LAYER_DISPLACE )\n\t\t\t\t\t#include <defaultnormal_vertex>\n\t\t\t\t#endif\n\n\t\t\t\tvec3 displaced_position = position;\n\t\t\t\tvec3 displaced_normal = normal;\n\n\t\t\t\t#if defined( USE_LAYER_DISPLACE )\n\t\t\t\t\tvec3 transformed;\n\t\t\t\t\tvec3 transformedNormal;\n\t\t\t\t#endif\n\t\t\t\t","#include <normal_vertex>","\n\t\t\t\t#if !defined( USE_LAYER_DISPLACE )\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t#endif /* !USE_LAYER_DISPLACE */\n\t\t\t\t"];r&&n.push(r.code,r.result?"displaced_position = "+r.result+";":""),n.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),n.push("#include <project_vertex>","#include <fog_vertex>","#include <clipping_planes_vertex>","\tvViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>","#include <shadowmap_vertex>"),t=n.join("\n")}else{let r={gamma:!0};void 0===this.color&&(this.color=new wb(5855577)),this.color.analyze(e,{slot:"color",context:r}),this.roughness.analyze(e),this.metalness.analyze(e),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e),this.reflectivity&&this.reflectivity.analyze(e);let n=this.color.flow(e,"c",{slot:"color",context:r}),i=this.roughness.flow(e,"f"),a=this.metalness.flow(e,"f"),o=this.shadingAlpha.flow(e,"f"),s=this.shadingBlend.flow(e,"i"),l=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,u=this.alpha?this.alpha.flow(e,"f"):void 0,c=this.reflectivity?this.reflectivity.flow(e,"f"):void 0;e.requires.transparent=void 0!==u,e.addParsCode(["varying vec3 vViewPosition;","#include <normal_pars_fragment>","#include <dithering_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_physical_pars_fragment>","#include <shadowmap_pars_fragment>"].join("\n"));let h=["#include <clipping_planes_fragment>","\t#include <normal_fragment_begin>","\n\t\t\t\t// NOTE: gl_FrontFacing alternative using face normal estimation.\n\t\t\t\tvec3 viewdx = dFdx(vViewPosition);\n\t\t\t\tvec3 viewdy = dFdy(vViewPosition);\n\t\t\t\tvec3 faceNormal = normalize(cross(viewdx,viewdy));\n\t\t\t\tif (dot(normal, faceNormal) < 0.0) {\n\t\t\t\t\tnormal *= -1.0;\n\t\t\t\t}\n\t\t\t\t","\tPhysicalMaterial material;","\tmaterial.diffuseColor = vec3( 1.0 );"];h.push(n.code,"\tvec3 diffuseColor = "+n.result+";","\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );",i.code,"\tfloat roughnessFactor = "+i.result+";",a.code,"\tfloat metalnessFactor = "+a.result+";"),u&&h.push(u.code,"#ifdef ALPHATEST","\tif ( "+u.result+" <= ALPHATEST ) discard;","#endif"),h.push("vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );"),h.push("material.diffuseColor = diffuseColor * ( 1.0 - metalnessFactor );","material.roughness = max( roughnessFactor, 0.0525 );","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.roughness = clamp( roughnessFactor, 0.04, 1.0 );"),c?h.push(c.code,"material.specularColor = mix( vec3( 0.16 * pow2( "+c.result+" ) ), diffuseColor, metalnessFactor );"):h.push("material.specularColor = mix( vec3( 0.04 ), diffuseColor, metalnessFactor );"),h.push("#include <lights_fragment_begin>"),h.push("#include <lights_fragment_end>"),h.push("vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular;"),h.push(`\n\t\t\t\tif (outgoingLight != diffuseColor) {\n\t\t\t\t\tfloat lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );\n\t\t\t\t\taccumAlpha += ( 1.0 - accumAlpha ) * ${o.result} * lightAccu;\n\t\t\t\t\toutgoingLight = spe_blend( diffuseColor, outgoingLight, ${o.result}, ${s.result} );\n\t\t\t\t}\n\t\t\t\t`),l&&h.push(l.code,`outgoingLight = spe_blend(outgoingLight, ${l.result}, 1.0, SPE_BLENDING_NORMAL);`),u?h.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${u.result} );`):h.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),h.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=h.join("\n")}return t}copy(e){return super.copy(e),e.color&&(this.color=e.color.clone()),this.roughness=e.roughness.clone(),this.metalness=e.metalness.clone(),e.position&&(this.position=e.position.clone()),e.afterColor&&(this.afterColor=e.afterColor.clone()),e.alpha&&(this.alpha=e.alpha.clone()),e.reflectivity&&(this.reflectivity=e.reflectivity.clone()),e.shadingAlpha&&(this.shadingAlpha=e.shadingAlpha.clone()),e.shadingBlend&&(this.shadingBlend=e.shadingBlend.clone()),this}},gw=class extends $b{constructor(e=new mw,t){super(e,e,t),this.type="StandardNodeMaterial",this.fragment=e}get color(){return this.fragment.color}set color(e){this.fragment.color=e}get afterColor(){return this.fragment.afterColor}set afterColor(e){this.fragment.afterColor=e}get alpha(){return this.fragment.alpha}set alpha(e){this.fragment.alpha=e}get shadingAlpha(){return this.fragment.shadingAlpha}set shadingAlpha(e){this.fragment.shadingAlpha=e}get shadingBlend(){return this.fragment.shadingBlend}set shadingBlend(e){this.fragment.shadingBlend=e}get position(){return this.fragment.position}set position(e){this.fragment.position=e}get roughness(){return this.fragment.roughness}set roughness(e){this.fragment.roughness=e}get metalness(){return this.fragment.metalness}set metalness(e){this.fragment.metalness=e}get reflectivity(){return this.fragment.reflectivity}set reflectivity(e){this.fragment.reflectivity=e}},vw=class extends gw{constructor(e,t,r){super(t,e),this.userData.type="PhysicalMaterial",this.userData.category="Physical",this.userData.layers=null!=r?r:this._getLayerStack(null==e?void 0:e.map)}get layersList(){return this.userData.layers}set layersList(e){this.userData.layers=e}equals(e){return this.userData.type===e.userData.type&&this.userData.layers.uuid==e.userData.layers.uuid}copy(e){if(void 0!==e.userData.layers&&e.userData.layers instanceof Kb){let t=e.userData.layers,r=e.fragment;super.copy(e);let n=r.clone();this.fragment=n,this.vertex=n;let i=t.clone(this);this.userData.layers=i,n.shadingAlpha.value=r.shadingAlpha.value,n.shadingBlend.value=r.shadingBlend.value}else super.copy(e);return this}static fromJSON(e,t,r){let n=r.getNode(t.vertex),i=new vw(void 0,n);return i.fromJSON(t,r),i}dispose(){super.dispose()}};function yw(e,t){switch(e.data.type){case"light":return bw(e);case"fresnel":return function(e,t){let{bias:r,scale:n,intensity:i,factor:a,color:o}=e.data;return v(g({},bw(e)),{color:dx(o,t),bias:r,scale:n,intensity:i,factor:a})}(e,t);case"gradient":return function(e){let{gradientType:t,smooth:r,colors:n,steps:i,angle:a,offset:o,morph:s}=e.data;return v(g({},bw(e)),{gradientType:t,smooth:r,colors:n.map((e=>new Ue(e[0],e[1],e[2],e[3]))),num:n.length,steps:i,offset:new ve(...o),morph:new ve(...s),angle:a})}(e);case"depth":return function(e){let{gradientType:t,near:r,far:n,isVector:i,isWorldSpace:a,origin:o,direction:s,colors:l,steps:u,smooth:c,num:h}=e.data;return v(g({},bw(e)),{gradientType:t,near:r,far:n,isVector:i,isWorldSpace:a,origin:new We(...o),direction:s?new We(...s):new We(1,0,0),num:h,colors:l.map((e=>new Ue(e[0],e[1],e[2],e[3]))),steps:u,smooth:c})}(e);case"normal":return function(e){let{cnormal:t}=e.data;return v(g({},bw(e)),{cnormal:new We(t[0],t[1],t[2])})}(e);case"noise":return function(e,t){let{data:r}=e;return v(g({},bw(e)),{scale:r.scale,move:r.move,fA:new ve(...r.fA),fB:new ve(...r.fB),size:new We(...r.size),distortion:new ve(...r.distortion),colorA:dx(r.colorA,t),colorB:dx(r.colorB,t),colorC:dx(r.colorC,t),colorD:dx(r.colorD,t),noiseType:r.noiseType})}(e,t);case"texture":return function(e,t){let r,{projection:n,axis:i,crop:a,size:o}=e.data,{image:s,wrapping:l,repeat:u,offset:c}=e.data.texture,h=new Fe;if("string"==typeof s)r=null==t?void 0:t.getImage(s);else{let e=new Image;e.src=s.data,e.onload=()=>{null!=t&&t.onImageLoad&&(null==t||t.onImageLoad(s.data))},r=e}return h.image=r,h.repeat.set(u[0],u[1]),h.offset.set(c[0],c[1]),h.wrapS=h.wrapT=l,v(g({},bw(e)),{texture:h,mat:(new ye).setUvTransform(c[0],c[1],u[0],u[1],0,0,0),crop:a,projection:n,axis:["x","y","z"].indexOf(i),size:o})}(e,t);case"rainbow":return function(e){let{data:t}=e;return v(g({},bw(e)),{filmThickness:t.filmThickness,movement:t.movement,wavelengths:new We(...t.wavelengths),noiseStrength:t.noiseStrength,noiseScale:t.noiseScale,offset:new We(...t.offset)})}(e);case"transmission":return function(e,t){let{data:r}=e;return v(g({},bw(e)),{thickness:r.thickness,ior:r.ior,roughness:r.roughness,transmissionSamplerMap:t.transmissionSamplerMap,transmissionDepthMap:t.transmissionDepthMap})}(e,t);case"matcap":return function(e,t){let r,n=new Fe,{image:i}=e.data.texture;if("string"==typeof i)r=null==t?void 0:t.getImage(i);else{let e=new Image;e.src=i.data,e.onload=()=>{null!=t&&t.onImageLoad&&(null==t||t.onImageLoad(i.data))},r=e}n.image=r;return v(g({},bw(e)),{color:16777215,texture:n})}(e,t);case"displace":return function(e){let{data:t}=e,r=v(g({},xw(e)),{intensity:t.intensity});if("noise"===t.displacementType)return v(g({},r),{offset:new We(...t.offset),scale:t.scale,movement:t.movement,noiseType:t.noiseType});{let e=new Fe,n=(new ye).setUvTransform(0,0,1,1,0,0,0);return v(g({},r),{texture:e,mat:n,crop:t.crop})}}(e);default:return function(e,t){return v(g({},bw(e)),{color:dx(e.data.color,t)})}(e,t)}}function xw(e){return{type:e.data.type}}function bw(e){let{alpha:t,mode:r}=e.data;return v(g({},xw(e)),{alpha:t,mode:r})}function ww(e,t,r){if("displace"===r.type&&("intensity"===e||"visible"===e)){let e=t.uniforms[`f${t.id}_intensity`];return e?(e.value=r.intensity*(r.visible?1:0),e):void 0}if("displace"!==r.type&&("alpha"===e||"visible"===e)){let e=t.uniforms[`f${t.id}_alpha`];return e?(e.value=r.alpha*(r.visible?1:0),e):void 0}}function Sw(e,t){return"string"==typeof e?t.getMaterialOrDeletedPlaceholder(e):_w(e,t)}function _w(e,t){var r,n;let i,a=null!=(r=e.layers)?r:Tg.defaultTwoLayerData("phong").layers,o=function(e){for(let t of e)if("light"===t.data.type)return t.data;return{type:"light",category:"basic",visible:!0,alpha:1,mode:0}}(a);switch(o.category){case"basic":i=new aw;break;case"lambert":i=new hw;break;case"toon":i=new fw;break;case"physical":i=new vw;break;default:i=new lw}i.name=null!=(n=e.name)?n:"Untitled Material";let s=i.userData.layers;!function(e){for(let t of e.getLayers())e.removeLayer(t.id)}(s);for(let e=a.length-1;e>=0;e--)Aw(s,a[e],t);switch(o.category){case"basic":break;case"lambert":{let e=i,r=dx(o.emissive,t);r instanceof Oe?e.emissive.value=r:e.emissive.value.setHex(ew.getHex(r));break}case"toon":{let e=i,r=o;e.shininess.value=r.shininess;let n=dx(r.specular,t);n instanceof Oe?e.specular.value=n:e.specular.value.setHex(ew.getHex(n));break}case"physical":let e=i,r=o;e.metalness.value=r.metalness,e.roughness.value=r.roughness,e.reflectivity.value=r.reflectivity;break;default:{let e=i,r=o;e.shininess.value=r.shininess;let n=dx(r.specular,t);n instanceof Oe?e.specular.value=n:e.specular.value.setHex(ew.getHex(n));break}}return s.blendColors(),s.blendAfterColors(),s.blendPositions(),i}function Aw(e,t,r){let n=yw(t,r);"transmission"===n.type&&(n.transmissionSamplerMap=null==r?void 0:r.transmissionSamplerMap,n.transmissionDepthMap=null==r?void 0:r.transmissionDepthMap);let i=e.addLayer(n);i.uuid=t.id;for(let e in t.data)ww(e,i,t.data)}(e=>{e.getHex=function(e){return new Oe(e.x,e.y,e.z).getHex()}})(ew||(ew={})),(e=>{e.getThreeVector4=function(e){return new Ue(e.r,e.g,e.b,e.a)}})(tw||(tw={})),(e=>{e.setThreeColor=function(e,t){e.setRGB(t.r,t.g,t.b)},e.getHex=function(e){return new Oe(e.r,e.g,e.b).getHex()}})(rw||(rw={}));var Mw=e=>"VIDEO"===e.tagName,Ew=class{static resize(e,t,r){let n,i=e/t;if(!r.image)return;let a=r.image;n=Mw(a)?a.videoWidth/a.videoHeight:a.width/a.height,i>n&&("WEBCAM"==r.imageType?r.repeat.set(-1,1*n/i):r.repeat.set(1,1*n/i)),i<n&&("WEBCAM"==r.imageType?r.repeat.set(1*i/n*-1,1):r.repeat.set(1*i/n,1)),i==n&&("WEBCAM"==r.imageType?r.repeat.set(-1,1):r.repeat.set(1,1))}static resizeTextureLayer(e,t,r){let n,i=e/t,a=void 0!==r.image?r.image.width/r.image.height:1;n=i>a?{x:1,y:a/i}:i<a?{x:i/a,y:1}:{x:1,y:1},r.repeat.set(n.x,n.y),r.updateMatrix()}static resizeTextureLayers(e,t,r){let n=r.userData.layers,i=n.getLayers();for(let r=0;r<i.length;r++){let a=i[r];Ab(a)&&(Ew.resizeTextureLayer(e,t,a.uniforms[`f${a.id}_texture`].value),n.updateLayerUniform())}}static resizeComplex(e,t,r,n){let i,a=e/t,o=r.image;i=Mw(o)?o.videoWidth/o.videoHeight:o.width/o.height,n.geometry.type.includes("Shape")?(a>i&&("WEBCAM"==r.imageType?r.repeat.set(1/e*-1,1/t*i/a):r.repeat.set(1/e,1/t*i/a)),a<i&&("WEBCAM"==r.imageType?r.repeat.set(1/e*a/i*-1,1/t):r.repeat.set(1/e*a/i,1/t)),a==i&&("WEBCAM"==r.imageType?r.repeat.set(1/e*-1,1/t):r.repeat.set(1/e,1/t))):(a>i&&("WEBCAM"==r.imageType?r.repeat.set(-1,1*i/a):r.repeat.set(1,1*i/a)),a<i&&("WEBCAM"==r.imageType?r.repeat.set(1*a/i*-1,1):r.repeat.set(1*a/i,1)),a==i&&("WEBCAM"==r.imageType?r.repeat.set(-1,1):r.repeat.set(1,1)))}},Cw=class extends Tx{constructor(e,t=new aw){super(e,t),this.objectType="Mesh2D",this.castShadow=!0,this.receiveShadow=!0}updateGeometry(e){super.updateGeometry(e),this.material.userData.layers&&Ew.resizeTextureLayers(this.geometry.userData.parameters.width,this.geometry.userData.parameters.height,this.material)}resizeGeometry(e,t){super.resizeGeometry(e,t,0),this.material.userData.layers&&Ew.resizeTextureLayers(this.geometry.userData.parameters.width,this.geometry.userData.parameters.height,this.material)}toJSON(e){let t=super.toJSON(e);return t.object.objectType="Mesh2D",t}clone(){let e=super.clone();return e.updateGeometry({}),e}static fromTexture(e){let t,r;if(e instanceof Po){let n=e.image;t=.5*n.videoWidth,r=.5*n.videoHeight}else{let n=e.image;t=.5*n.width,r=.5*n.height}let n=Xy.create({parameters:{width:t,height:r}}),i=new aw;return i.layersList.changeLayer(0,{type:"texture",texture:e}),i.layersList.moveLayer(0,1),i.dispose(),new Cw(n,i)}},Tw=new We(0,0,1),Dw=new We,Lw=new We,Pw=new ye,Rw=class extends Tx{constructor(e=by.create({}),t=new aw({side:2})){var r;super(e,t),this.recursiveSelection=!1,this.objectType="VectorObject",this.eventDispatcher=new ae,this._onShapeUpdate=()=>{if(this.geometry instanceof my){if(this.geometry.updateFromShape()){let e=this.geometry.drawCount,t=this.geometry.userData;this.updateGeometry(Object.assign(this.geometry.userData,{parameters:Object.assign(t.parameters,{surfaceMaxCount:e+1e3})}))}}else this.updateGeometry({});this.geometry.computeBoundingSphere(),this.geometry.computeBoundingBox()},this.castShadow=!0,this.receiveShadow=!0,this.forceComputeSize=!0,this.shape=e.userData.shape,null==(r=this.shape.eventDispatcher)||r.addEventListener("update",this._onShapeUpdate)}toJSON(e){let t=super.toJSON(e);return t.object.objectType="VectorObject",t}fromState(e){return super.fromState(e),this.shape.update(),this}setHelperVisibility(){}updateGeometry(e){if(super.updateGeometry(e),"userData"in this.geometry){let e=this.geometry.userData.parameters;this.eventDispatcher.dispatchEvent({type:"geometryUpdate",parameters:e})}}setShape(e){var t,r;this.shape&&(null==(t=this.shape.eventDispatcher)||t.removeEventListener("update",this._onShapeUpdate)),this.shape=e,null==(r=this.shape.eventDispatcher)||r.addEventListener("update",this._onShapeUpdate)}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),Pw.getNormalMatrix(this.matrixWorld),Dw.copy(Tw).applyMatrix3(Pw).normalize(),Lw.setFromMatrixPosition(this.matrixWorld),this.shape.plane.setFromNormalAndCoplanarPoint(Dw,Lw)}clone(e){let t=this.shape.clone(),r=this.material.clone(),n=this.geometry.userData,i=by.create(Object.assign({},n,{shape:t})),a=new Rw(i,r).copy(this,e);return a.shape=t,t.update(),a}raycast(e,t){Tx.prototype.raycast.call(this,e,t)}},Ow=e=>{var t;return(t=class extends e{constructor(){super(...arguments),this.isObjectHelper=!0}}).geometryHelper=new jr(30,30,30),t},kw=new wt,Iw=new pt,Bw=new St,zw=(e,t,r,n,i=!1)=>{let a=t,o=e.matrixWorld;if(null===a.boundingSphere&&a.computeBoundingSphere(),Iw.copy(a.boundingSphere),Iw.applyMatrix4(o),!1===r.ray.intersectsSphere(Iw)||(Bw.copy(o).invert(),kw.copy(r.ray).applyMatrix4(Bw),null!==a.boundingBox&&!1===kw.intersectsBox(a.boundingBox)))return;let s,l,u,c,h,d,p=a.index,f=a.attributes.position,m=a.drawRange;if(!1===i){for(h=Math.max(0,m.start),d=Math.min(p.count,m.start+m.count);h<d;h+=3)if(l=p.getX(h),u=p.getX(h+1),c=p.getX(h+2),s=g(e,r,kw,f,l,u,c),s)return s.faceIndex=Math.floor(h/3),void n.push(s)}else{let t=a.attributes.position,i=new We,o=new We,s=new We,l=new We,u=2,c=1/((e.scale.x+e.scale.y+e.scale.z)/3),h=c*c;for(let a=Math.max(0,m.start),c=Math.min(t.count,m.start+m.count)-1;a<c;a+=u){if(i.fromBufferAttribute(t,a),o.fromBufferAttribute(t,a+1),kw.distanceSqToSegment(i,o,l,s)>h)continue;l.applyMatrix4(e.matrixWorld);let u=r.ray.origin.distanceTo(l);u<r.near||u>r.far||n.push({distance:u,point:s.clone().applyMatrix4(e.matrixWorld),object:e})}}function g(e,t,r,n,i,a,o){let s=new We,l=new We,u=new We,c=new We,h=new We;if(s.fromBufferAttribute(n,i),l.fromBufferAttribute(n,a),u.fromBufferAttribute(n,o),null===r.intersectTriangle(s,l,u,!1,c))return null;h.copy(c),h.applyMatrix4(e.matrixWorld);let d=t.ray.origin.distanceTo(h);return d<t.near||d>t.far?null:{faceIndex:1,distance:d,point:h.clone(),object:e}}},Nw=new We,Fw=new qr,Uw=class extends Ao{constructor(e){let t=new wr,r=new mo({color:16777215,vertexColors:!0,toneMapped:!1}),n=[],i=[],a={},o=new Oe(15711266),s=new Oe(15711266),l=new Oe(2857471);function u(e,t,r){c(e,r),c(t,r)}function c(e,t){n.push(0,0,0),i.push(t.r,t.g,t.b),void 0===a[e]&&(a[e]=[]),a[e].push(n.length/3-1)}u("n1","n2",o),u("n2","n4",o),u("n4","n3",o),u("n3","n1",o),u("f1","f2",o),u("f2","f4",o),u("f4","f3",o),u("f3","f1",o),u("n1","f1",o),u("n2","f2",o),u("n3","f3",o),u("n4","f4",o),u("p","n1",s),u("p","n2",s),u("p","n3",s),u("p","n4",s),u("u1","u2",l),u("u2","u3",l),u("u3","u1",l),t.setAttribute("position",new pr(n,3)),t.setAttribute("color",new pr(i,3)),super(t,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update()}update(){let e=this.geometry,t=this.pointMap;Fw.projectionMatrixInverse.elements=[.5112609807824982,-0,-0,-0,-0,.41421356237309503,-0,-0,-0,-0,-0,-.099999,-0,-0,-1.0000000000000002,.100001];let r=.8;jw("n1",t,e,Fw,-1,-1,r),jw("n2",t,e,Fw,1,-1,r),jw("n3",t,e,Fw,-1,1,r),jw("n4",t,e,Fw,1,1,r);let n=r;jw("f1",t,e,Fw,-1,-1,n),jw("f2",t,e,Fw,1,-1,n),jw("f3",t,e,Fw,-1,1,n),jw("f4",t,e,Fw,1,1,n),jw("u1",t,e,Fw,.35,1.1,.8),jw("u2",t,e,Fw,-.35,1.1,.8),jw("u3",t,e,Fw,0,1.55,.8),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}};function jw(e,t,r,n,i,a,o){Nw.set(i,a,o).unproject(n);let s=t[e];if(void 0!==s){let e=r.getAttribute("position");for(let t=0,r=s.length;t<r;t++)e.setXYZ(s[t],Nw.x,Nw.y,Nw.z)}}var Hw=class extends(Ow(Uw)){constructor(e){super(e),this.object=e,this.object=e,this.name=`CombinedCameraHelper: ${e.uuid}`}updateMatrixWorld(e){super.updateMatrixWorld(e),this.updateTarget()}updateTarget(){let e=this.object.getTarget();this.updateWorldMatrix(!0,!1),this.worldToLocal(e)}raycast(e,t){zw(this.object,this.geometry,e,t,!0)}},Vw=class extends(Ow(xu)){constructor(e,t=15,r=10066329){super(e,t,r),this.object=e,this.name=`DirectionalLightHelper: ${e.uuid}`}raycast(e,t){zw(this.object,Vw.geometryHelper,e,t)}},Gw=class extends(Ow(Mu)){constructor(e,t=15){super(t),this.object=e,this.object.updateMatrixWorld(),this.name=`EmptyObjectHelper: ${e.uuid}`,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}raycast(e,t){zw(this.object,Gw.geometryHelper,e,t)}update(){}},Ww=class extends(Ow(mu)){constructor(e,t=15,r=6710886){super(e,t,r),this.object=e,this.name=`PointLightHelper: ${e.uuid}`}raycast(e,t){zw(this.object,Ww.geometryHelper,e,t)}},qw=class extends(Ow(cu)){constructor(e,t=6710886){super(e,t),this.object=e,this.name=`SpotLightHelper: ${e.uuid}`}raycast(e,t){zw(this.object,qw.geometryHelper,e,t)}update(){if(void 0!==this.object){let e=qw._vector,t=this.object.distance?this.object.distance:1e3,r=t*Math.tan(this.object.angle);this.cone.scale.set(r,r,t),e.setFromMatrixPosition(this.object.target.matrixWorld),this.cone.lookAt(e);let n=void 0!==this.color?this.color:this.light.color;if(this.cone.material instanceof Array)for(let e=0,t=this.cone.material.length;e<t;e++)this.cone.material[e].color.set(n);else this.cone.material.color.set(n)}}},Yw=qw;Yw._vector=new We;var Xw=(e,t)=>class extends e{constructor(){super(...arguments),this.objectHelper=new t(this),this.enableHelper=!1}set visibility(e){this.visible=e,this.setHelperVisibility(e),this.setHelperChildrenVisibility(e)}get visibility(){return this.visible}get geometryHelper(){return t.geometryHelper}setHelperVisibility(e){this.objectHelper.visible=e}setHelperChildrenVisibility(e){for(let t of this.children)Mx(t)&&t.traverseEntity((t=>{mx(t)&&t.visible&&(t.objectHelper.visible=e)}))}raycast(e,t){this.objectHelper.raycast(e,t)}copy(e,t=!0){return super.copy(e,t),void 0!==e.enableHelper&&(this.enableHelper=e.enableHelper),void 0!==e.objectHelper&&(this.objectHelper.visible=e.objectHelper.visible),this}toJSON(e){let t=super.toJSON(e);return t.object.enableHelper=this.enableHelper,t}fromJSON(e){return super.fromJSON(e),void 0!==e.enableHelper&&(this.enableHelper=!0),this}fromLightState(e,t){if("LightDirectional"===this.objectType||"LightPoint"===this.objectType||"LightSpot"===this.objectType){let r=this;void 0!==e.color&&(r.color=dx(e.color,t)),void 0!==e.intensity&&(r.intensity=e.intensity),void 0!==e.depth&&(r.shadow.camera.far=e.depth,r.shadow.needsUpdate=!0),void 0!==e.shadows&&(this.castShadow=e.shadows),void 0!==e.helper&&(this.enableHelper=e.helper,r.gizmos.shadowmap.visible=e.helper)}return this}},Qw=new We,Jw=new We,Zw=class extends(Xw(Ex(qr),Hw)){constructor(e=window.innerWidth,t=window.innerHeight,r=45,n,i=1e5){super(),this.objectType="CombinedCamera",this._cameraType="OrthographicCamera",this.targetOffset=Op.DefaultTargetOffset,this.isUpVectorFlipped=!1,this.angleOffsetFromUp=0,this.width=e,this.height=t,this.orthoCamera=new yn(-.5*e,.5*e,.5*t,-.5*t,null!=n?n:-5e4,i),this.perspCamera=new Yr(r,e/t,null!=n?n:50,i),this.left=this.orthoCamera.left,this.right=this.orthoCamera.right,this.top=this.orthoCamera.top,this.bottom=this.orthoCamera.bottom,this.far=this.orthoCamera.far,this.view=this.orthoCamera.view,this.aspect=this.perspCamera.aspect,this.fov=this.perspCamera.fov,this.focus=this.perspCamera.focus,this.filmGauge=this.perspCamera.filmGauge,this.filmOffset=this.perspCamera.filmOffset,this.toOrthographic(!0)}static createFromState(e,t){let r=(new Zw).fromState(t);return r.enableHelper=!0,r.objectHelper.update(),r.uuid=e,r}get isPerspectiveCamera(){return"PerspectiveCamera"===this.cameraType}get isOrthographicCamera(){return!this.isPerspectiveCamera}get cameraType(){return this._cameraType}setNear(e,t){"PerspectiveCamera"===e?this.perspCamera.near=t:this.orthoCamera.near=t}setZoom(e,t){t>=0&&("PerspectiveCamera"===e?this.perspCamera.zoom=t:this.orthoCamera.zoom=t)}set cameraType(e){"PerspectiveCamera"===e?this.toPerspective():"OrthographicCamera"===e&&this.toOrthographic()}get near(){return"PerspectiveCamera"===this._cameraType?this.perspCamera.near:this.orthoCamera.near}set near(e){"PerspectiveCamera"===this._cameraType?this.perspCamera.near=e:this.orthoCamera.near=e}get zoom(){return"PerspectiveCamera"===this._cameraType?this.perspCamera.zoom:this.orthoCamera.zoom}set zoom(e){e>=0&&("PerspectiveCamera"===this._cameraType?this.perspCamera.zoom=e:this.orthoCamera.zoom=e)}lookAt(e){super.lookAt(e),this.getWorldPosition(Qw),this.targetOffset=Qw.distanceTo(e)}getTarget(e=new We){return this.getWorldDirection(Jw),this.getWorldPosition(Qw),Jw.multiplyScalar(this.targetOffset),e.copy(Qw).add(Jw),e}getDistanceToTarget(){let e=this.getTarget();return this.getWorldPosition(Qw),Qw.distanceTo(e)}updateUp(){let e=this.getWorldQuaternion(new Ge),t=new We(0,0,1).applyQuaternion(e),r=(new We).copy(Yt.DefaultUp);this.isUpVectorFlipped&&r.negate(),r.applyQuaternion(e);let n=(new We).copy(Yt.DefaultUp).projectOnPlane(t),i=(new We).crossVectors(n,r).dot(t)>=0?1:-1;this.angleOffsetFromUp=n.angleTo(r)*i}getViewFrontToObject(e){let t=e.getWorldPosition(new We),r=e.getWorldDirection(new We).multiplyScalar(this.targetOffset);return{position:t.clone().add(r),target:t}}getViewToObject(e){let t=e.getWorldPosition(new We),r=this.getWorldDirection(new We).multiplyScalar(this.targetOffset);return{position:t.clone().sub(r),target:t}}setViewplaneSize(e,t){this.left=.5*-e,this.right=.5*e,this.top=.5*t,this.bottom=.5*-t,this.aspect=e/t,this.updateProjectionMatrix()}toOrthographic(e){this.orthoCamera.left=this.left,this.orthoCamera.right=this.right,this.orthoCamera.top=this.top,this.orthoCamera.bottom=this.bottom,this.orthoCamera.view=this.view,this.orthoCamera.far=this.far,this.orthoCamera.updateProjectionMatrix(),this.projectionMatrix=this.orthoCamera.projectionMatrix,this.projectionMatrixInverse=this.orthoCamera.projectionMatrixInverse,this._cameraType="OrthographicCamera",(!0===this.enableHelper||!0===e)&&this.objectHelper.update()}toPerspective(e){this.perspCamera.aspect=this.aspect,this.perspCamera.fov=this.fov,this.perspCamera.view=this.view,this.perspCamera.far=this.far,this.perspCamera.updateProjectionMatrix(),this.projectionMatrix=this.perspCamera.projectionMatrix,this.projectionMatrixInverse=this.perspCamera.projectionMatrixInverse,this._cameraType="PerspectiveCamera",(!0===this.enableHelper||!0===e)&&this.objectHelper.update()}setFocalLength(e){this.perspCamera.setFocalLength(e),this.toPerspective()}getFocalLength(){return this.perspCamera.getFocalLength()}getEffectiveFOV(){return this.perspCamera.getEffectiveFOV()}getFilmWidth(){return this.perspCamera.getFilmWidth()}getFilmHeight(){return this.perspCamera.getFilmHeight()}setViewOffset(e,t,r,n,i,a){"PerspectiveCamera"===this._cameraType?this.perspCamera.setViewOffset(e,t,r,n,i,a):this.orthoCamera.setViewOffset(e,t,r,n,i,a)}clearViewOffset(){"PerspectiveCamera"===this._cameraType?(this.perspCamera.clearViewOffset(),this.toPerspective()):(this.orthoCamera.clearViewOffset(),this.toOrthographic())}updateProjectionMatrix(e){"PerspectiveCamera"===this._cameraType?this.toPerspective(e):"OrthographicCamera"===this._cameraType&&this.toOrthographic(e)}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}copy(e,t){return super.copy(e,t),this.orthoCamera.copy(e.orthoCamera),this.perspCamera.copy(e.perspCamera),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.far=e.far,this.view=null===e.view?null:Object.assign({},e.view),this._cameraType=e._cameraType,this.aspect=e.aspect,this.fov=e.fov,this.focus=e.focus,this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this.targetOffset=e.targetOffset,this.updateProjectionMatrix(),this}fromCameraRender(e){let t={near:this.orthoCamera.near,far:this.orthoCamera.far},r={near:this.perspCamera.near,far:this.perspCamera.far};return this.copy(e),this.name="",this.enableHelper=!0,this.objectHelper.visible=!0,this.orthoCamera.near=t.near,this.orthoCamera.far=t.far,this.perspCamera.near=r.near,this.perspCamera.far=r.far,this.updateProjectionMatrix(),this}toJSON(e){let t=super.toJSON(e),r=t.object;return r.objectType="CombinedCamera",r.cameraType=this.cameraType,r.targetOffset=this.targetOffset,r.isUpVectorFlipped=this.isUpVectorFlipped,r.angleOffsetFromUp=this.angleOffsetFromUp,r.left=this.left,r.right=this.right,r.top=this.top,r.bottom=this.bottom,null!==this.view&&(r.view=Object.assign({},this.view)),r.zoomOrtho=this.orthoCamera.zoom,r.nearOrtho=this.orthoCamera.near,r.far=this.far,r.aspect=this.aspect,r.fov=this.fov,r.focus=this.focus,r.filmGauge=this.filmGauge,r.filmOffset=this.filmOffset,r.zoomPersp=this.perspCamera.zoom,r.nearPersp=this.perspCamera.near,t}fromJSON(e){var t;if(super.fromJSON(e),this.cameraType=e.cameraType,void 0!==e.targetOffset&&(this.targetOffset=e.targetOffset),void 0!==e.orbitControlsTarget){let t=this.getWorldPosition(new We),r=(new We).fromArray(e.orbitControlsTarget);this.targetOffset=r.distanceTo(t)}else void 0!==e.targetOffset&&(this.targetOffset=e.targetOffset);return this.isUpVectorFlipped=!1,this.angleOffsetFromUp=null!=(t=e.angleOffsetFromUp)?t:0,void 0!==e.left&&(this.left=e.left),void 0!==e.right&&(this.right=e.right),void 0!==e.top&&(this.top=e.top),void 0!==e.bottom&&(this.bottom=e.bottom),void 0!==e.view&&(this.view=Object.assign({},e.view)),void 0!==e.zoomOrtho&&(this.orthoCamera.zoom=e.zoomOrtho),void 0!==e.nearOrtho&&(this.orthoCamera.near=e.nearOrtho),void 0!==e.far&&(this.far=e.far),void 0!==e.aspect&&(this.aspect=e.aspect),void 0!==e.fov&&(this.fov=e.fov),void 0!==e.focus&&(this.focus=e.focus),void 0!==e.filmGauge&&(this.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(this.filmOffset=e.filmOffset),void 0!==e.zoomPersp&&(this.perspCamera.zoom=e.zoomPersp),void 0!==e.nearPersp&&(this.perspCamera.near=e.nearPersp),this.updateProjectionMatrix(),this}toCameraState(e=[]){let t={type:this.cameraType,far:this.far,orthographic:{near:this.orthoCamera.near,zoom:this.orthoCamera.zoom},perspective:{near:this.perspCamera.near,fov:this.perspCamera.fov,zoom:this.perspCamera.zoom},up:this.up.toArray(),targetOffset:this.targetOffset,isUpVectorFlipped:this.isUpVectorFlipped};return df(t,e)}fromCameraState(e){let{orthographic:t,perspective:r}=e;return void 0!==e.type&&(this.cameraType=e.type),void 0!==e.far&&(this.far=e.far),void 0!==t&&(void 0!==t.near&&(this.orthoCamera.near=t.near),void 0!==t.zoom&&(this.orthoCamera.zoom=t.zoom)),void 0!==r&&(void 0!==r.near&&(this.perspCamera.near=r.near),void 0!==r.fov&&(this.perspCamera.fov=r.fov),void 0!==r.zoom&&(this.perspCamera.zoom=r.zoom)),void 0!==e.up&&this.up.fromArray(e.up),void 0!==e.targetOffset&&(this.targetOffset=e.targetOffset),void 0!==e.isUpVectorFlipped&&(this.isUpVectorFlipped=e.isUpVectorFlipped),this.updateProjectionMatrix(),this}toState(e){return v(g(g({},super.toState(e)),this.toCameraState(e)),{type:this.cameraType})}fromState(e){return super.fromState(e),this.fromCameraState(e),this}},Kw=class extends(Xw(Ex(Da),Gw)){constructor(){super(...arguments),this.objectType="EmptyObject"}static createFromState(e,t){let r=(new Kw).fromState(t);return r.uuid=e,r.enableHelper=!0,r.objectHelper.update(),r}toJSON(e){let t=super.toJSON(e);return t.object.objectType="EmptyObject",t}},$w=class extends(Xw(Ex(kl),Vw)){constructor(...e){super(...e),this.objectType="LightDirectional",this._gizmos={},this.castShadow=!0,this.shadow.mapSize.width=1024,this.shadow.mapSize.height=1024;let t=this.shadow.camera;t.top=1250,t.bottom=-1250,t.right=1250,t.left=-1250,t.near=1,t.far=2500;let r=new Su(this.shadow.camera);r.visible=!1,this._gizmos.shadowmap=r,this.update()}static createFromState(e,t,r){let n=(new $w).fromState(t,r);return n.uuid=e,n}get gizmos(){return this._gizmos}showGizmos(){for(let e in this._gizmos){let t=this._gizmos[e];t instanceof Su&&(t.visible=!0)}}hideGizmos(){for(let e in this._gizmos){let t=this._gizmos[e];t instanceof Su&&(t.visible=!1)}}update(){this.shadow.camera.updateProjectionMatrix();for(let e in this._gizmos){let t=this._gizmos[e];t instanceof Su&&t.update()}}updateMatrixWorld(e){super.updateMatrixWorld(e),!0===this.enableHelper&&!0===this.objectHelper.visible&&this.objectHelper.update()}copy(e,t=!0){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}toJSON(e){let t=super.toJSON(e),r=t.object;return r.objectType="LightDirectional",r.color=this.color.getHex(),r.intensity=this.intensity,r.shadow=this.shadow.toJSON(),t}fromJSON(e){var t;super.fromJSON(e),this.color.set(e.color),this.intensity=e.intensity,this.shadow.normalBias=null!=(t=e.shadow.normalBias)?t:0,this.shadow.radius=e.shadow.radius,this.shadow.mapSize.fromArray(e.shadow.mapSize);let r=this.shadow.camera,n=e.shadow.camera;return r.near=n.near,r.far=n.far,r.zoom=n.zoom,r.left=n.left,r.right=n.right,r.top=n.top,r.bottom=n.bottom,void 0!==n.view&&(r.view=Object.assign({},n.view)),this}fromDirectionalLightState(e,t){let r=void 0!==e.depth&&e.depth!==this.shadow.camera.far||void 0!==e.size&&e.size/2!==this.shadow.camera.right;return super.fromLightState(e,t),void 0!==e.size&&function(e,t){e.shadow.camera.right=t/2,e.shadow.camera.left=-t/2,e.shadow.camera.top=t/2,e.shadow.camera.bottom=-t/2,e.shadow.needsUpdate=!0}(this,e.size),r&&this.update(),this}fromState(e,t){return super.fromState(e),this.fromDirectionalLightState(e,t),this}},eS=class extends(Xw(Ex(Rl),Ww)){constructor(...e){super(...e),this.objectType="LightPoint",this._gizmos={},this.castShadow=!0,this.shadow.mapSize.width=1024,this.shadow.mapSize.height=1024;let t=this.shadow.camera;t.fov=90,t.aspect=1,t.near=100,t.far=2500;let r=new We(-t.far+this.position.x,-t.far+this.position.y,-t.far+this.position.z),n=new We(t.far+this.position.x,t.far+this.position.y,t.far+this.position.z),i=new Xe(r,n),a=new Au(i,new Oe(16755200));a.visible=!1,this._gizmos.shadowmap=a,this.update()}static createFromState(e,t,r){let n=(new eS).fromState(t,r);return n.uuid=e,n}get gizmos(){return this._gizmos}showGizmos(){for(let e in this._gizmos){let t=this._gizmos[e];t instanceof Au&&(t.visible=!0)}}hideGizmos(){for(let e in this._gizmos){let t=this._gizmos[e];t instanceof Au&&(t.visible=!1)}}update(){if(this.shadow&&(this.shadow.camera.updateProjectionMatrix(),this._gizmos))for(let e in this._gizmos){let t=this._gizmos[e];if(t instanceof Au){let e=this.shadow.camera,r=new We(-e.far+this.position.x,-e.far+this.position.y,-e.far+this.position.z),n=new We(e.far+this.position.x,e.far+this.position.y,e.far+this.position.z);t.box.set(r,n),t.updateMatrixWorld(!0)}}}updateMatrixWorld(e){super.updateMatrixWorld(e),!0===this.enableHelper&&!0===this.objectHelper.visible&&this.objectHelper.update()}copy(e,t=!0){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}toJSON(e){let t=super.toJSON(e),r=t.object;return r.objectType="LightPoint",r.color=this.color.getHex(),r.intensity=this.intensity,r.distance=this.distance,r.decay=this.decay,r.shadow=this.shadow.toJSON(),t}fromJSON(e){var t,r;super.fromJSON(e),this.color.set(e.color),this.intensity=e.intensity,this.distance=e.distance,this.decay=e.decay,this.shadow.normalBias=null!=(t=e.shadow.normalBias)?t:0,this.shadow.radius=e.shadow.radius,this.shadow.mapSize.fromArray(null!=(r=e.shadow.mapSize)?r:[512,512]),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null);let n=this.shadow.camera,i=e.shadow.camera;return n.near=i.near,n.far=i.far,n.zoom=i.zoom,n.fov=i.fov,n.focus=i.focus,n.aspect=i.aspect,n.filmGauge=i.filmGauge,n.filmOffset=i.filmOffset,void 0!==i.view&&(n.view=Object.assign({},i.view)),this}fromPointLightState(e,t){return super.fromLightState(e,t),void 0!==e.distance&&(this.distance=e.distance),void 0!==e.decay&&(this.decay=e.decay),void 0!==e.shadowRadius&&(this.shadow.radius=e.shadowRadius),void 0!==e.shadowResolution&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null)),this}fromState(e,t){return super.fromState(e),this.fromPointLightState(e,t),this}},tS=new We,rS=new We,nS=new Ge,iS=class extends(Xw(Ex(Cl),Yw)){constructor(...e){super(...e),this.objectType="LightSpot",this._gizmos={},this.castShadow=!0,this.shadow.mapSize.width=1024,this.shadow.mapSize.height=1024;let t=this.shadow.camera;t.fov=2*ge.RAD2DEG*this.angle,t.aspect=1,t.near=100,t.far=2500;let r=new Su(this.shadow.camera);r.visible=!1,this._gizmos.shadowmap=r,this.update()}static createFromState(e,t,r){let n=(new iS).fromState(t,r);return n.uuid=e,n}get gizmos(){return this._gizmos}showGizmos(){for(let e in this._gizmos){let t=this._gizmos[e];t instanceof Su&&(t.visible=!0)}}hideGizmos(){for(let e in this._gizmos){let t=this._gizmos[e];t instanceof Su&&(t.visible=!1)}}update(){this.shadow.camera.updateProjectionMatrix();for(let e in this._gizmos){let t=this._gizmos[e];t instanceof Su&&t.update()}}updateMatrixWorld(e){super.updateMatrixWorld(e),rS.setFromMatrixPosition(this.matrixWorld),nS.setFromRotationMatrix(this.matrixWorld),tS.copy(this.up).applyQuaternion(nS).negate().multiplyScalar(this.distance),this.target.position.copy(rS).add(tS),this.target.updateMatrixWorld(),!0===this.enableHelper&&!0===this.objectHelper.visible&&this.objectHelper.update()}copy(e,t=!0){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}toJSON(e){let t=super.toJSON(e),r=t.object;return r.objectType="LightSpot",r.color=this.color.getHex(),r.intensity=this.intensity,r.distance=this.distance,r.angle=this.angle,r.decay=this.decay,r.penumbra=this.penumbra,r.shadow=this.shadow.toJSON(),t}fromJSON(e){var t;super.fromJSON(e),this.color.set(e.color),this.intensity=e.intensity,this.distance=e.distance,this.angle=e.angle,this.decay=e.decay,this.penumbra=e.penumbra,this.shadow.normalBias=null!=(t=e.shadow.normalBias)?t:0,this.shadow.radius=e.shadow.radius,this.shadow.mapSize.fromArray(e.shadow.mapSize);let r=this.shadow.camera,n=e.shadow.camera;return r.near=n.near,r.far=n.far,r.zoom=n.zoom,r.fov=n.fov,r.focus=n.focus,r.aspect=n.aspect,r.filmGauge=n.filmGauge,r.filmOffset=n.filmOffset,void 0!==n.view&&(r.view=Object.assign({},n.view)),this}fromSpotLightState(e,t){return super.fromLightState(e,t),void 0!==e.distance&&(this.distance=e.distance),void 0!==e.decay&&(this.decay=e.decay),void 0!==e.angle&&(this.angle=e.angle),void 0!==e.penumbra&&(this.penumbra=e.penumbra),this}fromState(e,t){return super.fromState(e),this.fromSpotLightState(e,t),this}},aS=class extends Tx{constructor(e,t=new lw){super(e,t),this.objectType="Mesh3D",this.castShadow=!0,this.receiveShadow=!0}toJSON(e){let t=super.toJSON(e);return t.object.objectType="Mesh3D",t}},oS=class extends aS{constructor(e,t=new lw){super(e,t),this.objectType="NonParametric"}toJSON(e){let t=super.toJSON(e);return t.object.objectType="NonParametric",t}},sS=class extends fl{constructor(e){super(e)}load(e,t,r,n){let i=this,a=new gl(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(i.withCredentials),a.load(e,(function(e){let r;try{r=JSON.parse(e)}catch{console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),r=JSON.parse(e.substring(65,e.length-2))}let n=i.parse(r);t&&t(n)}),r,n)}parse(e){return new lS(e)}},lS=class{constructor(e){this.type="Font",this.data=e}generateShapes(e,t=100){let r=[],n=function(e,t,r){let n=Array.from(e),i=t/r.resolution,a=(r.boundingBox.yMax-r.boundingBox.yMin+r.underlineThickness)*i,o=[],s=0,l=0;for(let e=0;e<n.length;e++){let t=n[e];if("\n"===t)s=0,l-=a;else{let e=uS(t,i,s,l,r);s+=e.offsetX,o.push(e.path)}}return o}(e,t,this.data);for(let e=0,t=n.length;e<t;e++)Array.prototype.push.apply(r,n[e].toShapes());return r}};function uS(e,t,r,n,i){let a=i.glyphs[e]||i.glyphs["?"];if(!a)return void console.error('THREE.Font: character "'+e+'" does not exists in font family '+i.familyName+".");let o,s,l,u,c,h,d,p,f=new class{constructor(){this.type="ShapePath",this.color=new Oe,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new $o,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,r,n){return this.currentPath.quadraticCurveTo(e,t,r,n),this}bezierCurveTo(e,t,r,n,i,a){return this.currentPath.bezierCurveTo(e,t,r,n,i,a),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e,t){function r(e){let t=[];for(let r=0,n=e.length;r<n;r++){let n=e[r],i=new as;i.curves=n.curves,t.push(i)}return t}function n(e,t){let r=t.length,n=!1;for(let i=r-1,a=0;a<r;i=a++){let r=t[i],o=t[a],s=o.x-r.x,l=o.y-r.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(r=t[a],s=-s,o=t[i],l=-l),e.y<r.y||e.y>o.y)continue;if(e.y===r.y){if(e.x===r.x)return!0}else{let t=l*(e.x-r.x)-s*(e.y-r.y);if(0===t)return!0;if(t<0)continue;n=!n}}else{if(e.y!==r.y)continue;if(o.x<=e.x&&e.x<=r.x||r.x<=e.x&&e.x<=o.x)return!0}}return n}let i=Ls.isClockWise,a=this.subPaths;if(0===a.length)return[];if(!0===t)return r(a);let o,s,l,u=[];if(1===a.length)return s=a[0],l=new as,l.curves=s.curves,u.push(l),u;let c=!i(a[0].getPoints());c=e?!c:c;let h,d,p=[],f=[],m=[],g=0;f[g]=void 0,m[g]=[];for(let t=0,r=a.length;t<r;t++)s=a[t],h=s.getPoints(),o=i(h),o=e?!o:o,o?(!c&&f[g]&&g++,f[g]={s:new as,p:h},f[g].s.curves=s.curves,c&&g++,m[g]=[]):m[g].push({h:s,p:h[0]});if(!f[0])return r(a);if(f.length>1){let e=!1,t=0;for(let e=0,t=f.length;e<t;e++)p[e]=[];for(let r=0,i=f.length;r<i;r++){let i=m[r];for(let a=0;a<i.length;a++){let o=i[a],s=!0;for(let i=0;i<f.length;i++)n(o.p,f[i].p)&&(r!==i&&t++,s?(s=!1,p[i].push(o)):e=!0);s&&p[r].push(o)}}t>0&&!1===e&&(m=p)}for(let e=0,t=f.length;e<t;e++){l=f[e].s,u.push(l),d=m[e];for(let e=0,t=d.length;e<t;e++)l.holes.push(d[e].h)}return u}};if(a.o){let e=a._cachedOutline||(a._cachedOutline=a.o.split(" "));for(let i=0,a=e.length;i<a;)switch(e[i++]){case"m":o=e[i++]*t+r,s=e[i++]*t+n,f.moveTo(o,s);break;case"l":o=e[i++]*t+r,s=e[i++]*t+n,f.lineTo(o,s);break;case"q":l=e[i++]*t+r,u=e[i++]*t+n,c=e[i++]*t+r,h=e[i++]*t+n,f.quadraticCurveTo(c,h,l,u);break;case"b":l=e[i++]*t+r,u=e[i++]*t+n,c=e[i++]*t+r,h=e[i++]*t+n,d=e[i++]*t+r,p=e[i++]*t+n,f.bezierCurveTo(c,h,d,p,l,u)}}return{offsetX:a.ha*t,path:f}}lS.prototype.isFont=!0;var cS=class extends Fr{constructor({char:e,originalChar:t,fontFamily:r,letterSpacing:n,fontSize:i,LOD:a=16},o=new sr({color:0,opacity:1,visible:!0,transparent:!0,side:2})){let s=cS.loadChar(e,r,a);super(s.geometry,o),this.char=e,this.originalChar=null!=t?t:e,this.fontFamily=r,this.letterSpacing=n,this.fontSize=i,this.LOD=a,this.resolution=s.resolution,this.glyphsHa=s.glyphsHa,this.localPosition=new ve,this.charSize=0,this.geometry.userData={type:"CharacterGeometry",parameters:{char:this.char,fontFamily:this.fontFamily,letterSpacing:this.letterSpacing,fontSize:this.fontSize,lod:this.LOD,resolution:this.resolution,charSize:this.charSize,localPosition:this.localPosition}},this.updateFontSize(this.fontSize)}static get FONTS_PATH(){return cS._fontPath}static set FONTS_PATH(e){cS._fontPath=e}updatePosition(e,t){this.localPosition.copy(e);let r=new We(this.localPosition.x,-this.localPosition.y,0);this.position.copy(r).add(t)}updateFontSize(e){let t=e/this.resolution;this.fontSize=e,this.scale.set(this.fontSize,this.fontSize,1),this.charSize=this.glyphsHa*t*this.letterSpacing}updateFontFamily(e){if(this.fontFamily===e)return;this.fontFamily=e;let t=cS.loadChar(this.char,e,this.LOD);this.geometry=t.geometry,this.resolution=t.resolution,this.glyphsHa=t.glyphsHa,this.geometry.userData={type:"CharacterGeometry",parameters:{char:this.char,fontFamily:this.fontFamily,letterSpacing:this.letterSpacing,fontSize:this.fontSize,lod:this.LOD,resolution:this.resolution,charSize:this.charSize,localPosition:this.localPosition}},this.updateFontSize(this.fontSize)}updateChar(e){if(this.char===e)return;this.char=e;let t=cS.loadChar(e,this.fontFamily,this.LOD);this.geometry=t.geometry,this.resolution=t.resolution,this.glyphsHa=t.glyphsHa,this.geometry.userData={type:"CharacterGeometry",parameters:{char:this.char,fontFamily:this.fontFamily,letterSpacing:this.letterSpacing,fontSize:this.fontSize,lod:this.LOD,resolution:this.resolution,charSize:this.charSize,localPosition:this.localPosition}},this.updateFontSize(this.fontSize)}updateLetterSpacing(e){this.letterSpacing!==e&&(this.letterSpacing=e,this.updateFontSize(this.fontSize))}updateLOD(e){if(this.LOD===e)return;this.LOD=e;let t=cS.loadChar(this.char,this.fontFamily,this.LOD);this.geometry=t.geometry,this.resolution=t.resolution,this.glyphsHa=t.glyphsHa,this.geometry.userData={type:"CharacterGeometry",parameters:{char:this.char,fontFamily:this.fontFamily,letterSpacing:this.letterSpacing,fontSize:this.fontSize,lod:this.LOD,resolution:this.resolution,charSize:this.charSize,localPosition:this.localPosition}},this.updateFontSize(this.fontSize)}clone(){let e={char:this.char,originalChar:this.originalChar,fontFamily:this.fontFamily,letterSpacing:this.letterSpacing,fontSize:this.fontSize,LOD:this.LOD};return new cS(e).copy(this)}static loadFont(e){return new Promise((function(t,r){cS.fontCache[e]?t(cS.fontCache[e]):(new sS).load(cS.FONTS_PATH+e+".json",(r=>{cS.fontCache[e]=r,t(r)}),void 0,r)}))}static loadChar(e,t,r){if(cS.charCache[e]){if(cS.charCache[e][r]&&cS.charCache[e][r].fontFamily===t)return cS.charCache[e][r]}else cS.charCache[e]={};let n=cS.fontCache[t],i=n.generateShapes(e,1);return cS.charCache[e][r]={geometry:new Bs(i,r),fontFamily:t,resolution:n.data.resolution,glyphsHa:n.data.glyphs[e].ha},cS.charCache[e][r]}},hS=cS;hS.charCache={},hS.fontCache={},hS._fontPath="/_assets/_fonts/";var dS=new ve,pS=class{constructor(e,t,r){this.message=[],this.endLine=!0,this.yLinePos=e,this.lineHeight=t,this.maxCharSize=r,this.nextChar3DPos=new ve(0,this.yLinePos+this.maxCharSize*this.lineHeight),this.align=1}addChar3D(e,t,r=this.message.length){this.message.splice(r,0,e),e.fontSize>this.maxCharSize?(this.maxCharSize=e.fontSize,this.nextChar3DPos.y=this.yLinePos+this.maxCharSize*this.lineHeight,this.fullUpdate(t)):(e.updatePosition(this.nextChar3DPos,t),this.nextChar3DPos.x+=e.charSize)}deleteChar3D(e=this.message.length-1){let t=this.message[e];if(t)return this.message.splice(e,1),this.nextChar3DPos.x-=t.charSize,t}isEndLine(e){this.endLine=e}fullUpdate(e,t=0){this.nextChar3DPos.x=0;for(let r=t,n=this.message.length;r<n;r+=1)this.message[r].updatePosition(this.nextChar3DPos,e),this.nextChar3DPos.x+=this.message[r].charSize}checkOverFlow(e){let t,r=this.message.length-1;if(r<=0)return!1;for(;r>=0;){if(" "!==this.message[r].char){t=this.message[r];break}r-=1}return!!(r>=0&&t&&t.localPosition.x+t.charSize>e)}containSpaceOverFlow(e=this.message.length-1){for(let t=e;t>=0;t-=1)if(" "===this.message[t].char)return!0;return!1}containSpace(e=this.message.length-1){if(this.endLine)return!0;for(let t=e;t>=0;t-=1)if(" "===this.message[t].char)return!0;return!1}popWord(e=this.message.length-1){let t,r=[],n=!0;for(t=e;t>=0;t-=1){if(" "===this.message[t].char){n=!1,0===r.length&&(t-=1,r.splice(0,0,this.message[t]));break}r.splice(0,0,this.message[t])}return n?r=[]:this.message.splice(t+1,r.length),r}getWord(e=0,t=1){let r=[],n=e;for(n=e;;n+=t){if(!this.message[n]||" "===this.message[n].char){0===r.length&&this.message[n]&&(r.push(this.message[n]),this.message.splice(n,1));break}t>0?(r.push(this.message[n]),this.message.splice(n,1),n-=t):(r.splice(0,0,this.message[n]),this.message.splice(n,1))}return r}getWordAtIndex(e){let t=[];for(let r=e;r<this.message.length&&" "!==this.message[r].char;r++)t.push(this.message[r]);for(let r=e-1;r>=0&&" "!==this.message[r].char;r--)t.splice(0,0,this.message[r]);return t}wordSize(e=0,t=-1){let r=0,n=e;for(;n>=0&&n<this.message.length;){if(" "===this.message[n].char){0===r&&(r=this.message[n].charSize);break}r+=this.message[n].charSize,n+=t}return(n<0||n>=this.message.length)&&!this.endLine?this.message[e]?this.message[e].charSize:999999999:0===r?999999999:r}spaceLeft(e){return e-this.nextChar3DPos.x}popChar(e=this.message.length-1){return this.nextChar3DPos.x-=this.message[e].charSize,this.message.splice(e,1)}isEmpty(){return!this.message.length}updateNextCharPosY(){this.nextChar3DPos.y=this.yLinePos+this.maxCharSize*this.lineHeight}updateYLinePos(e){this.yLinePos=e,this.updateNextCharPosY()}updatelineHeight(e){this.lineHeight=e,this.updateNextCharPosY()}updateFontSize(e,t=0,r=this.message.length-1){for(let n=t;n<=r;n+=1)this.message[n].updateFontSize(e);this.maxCharSize=e,this.nextChar3DPos.y=this.yLinePos+this.maxCharSize*this.lineHeight}countSpaces(){let e=0;for(let t=0;t<this.message.length;t++)" "===this.message[t].char&&(e+=1);return e}alignText(e,t,r,n,i){switch(r){case 1:this.leftAlign(e,i);break;case 3:this.centerAlign(this.spaceLeft(t),e,i);break;case 2:this.rightAlign(this.spaceLeft(t),e,i);break;case 4:this.justifyAlign(this.spaceLeft(t),e,i)}}offsetCharacters(e,t,r){dS.set(t,r);let n=this.message.length;for(let t=0;t<n;t++)this.message[t].updatePosition(this.message[t].localPosition.add(dS),e)}leftAlign(e,t){this.align=1,this.offsetCharacters(e,0,t)}centerAlign(e,t,r){this.align=3,this.offsetCharacters(t,e/2,r)}rightAlign(e,t,r){this.align=2,this.offsetCharacters(t,e,r)}justifyAlign(e,t,r){if(this.align=4,this.endLine)return void this.offsetCharacters(t,0,r);let n=this.countSpaces();if(0===n)return void this.offsetCharacters(t,0,r);let i=e/n,a=0;for(let e=0;e<this.message.length;e++)" "===this.message[e].char&&(a+=i),dS.set(a,r),this.message[e].updatePosition(this.message[e].localPosition.add(dS),t)}clone(){let e=new pS(this.yLinePos,this.lineHeight,this.maxCharSize);e.nextChar3DPos=this.nextChar3DPos.clone(),e.align=this.align,e.endLine=this.endLine;for(let t=0;t<this.message.length;t++)e.message.push(this.message[t].clone());return e}},fS=class extends Tx{constructor(e,t=new aw({transparent:!0,opacity:1,visible:!1,side:2})){super(e,t),this.objectType="TextFrame",this.charContainer=new Yt,this.add(this.charContainer),this.material.visible=!1,this._geometryUserData=e.userData,this.userData.textFrame={hexColor:null,opacity:1,visible:!0,text:"",fontSize:16,lineHeight:1.5,letterSpacing:1,fontFamily:"roboto_regular",textTransform:1,horizontalAlignment:1,verticalAlignment:1,LOD:16,maxLineSize:this._geometryUserData.parameters.width,textOrigin:new We(-.5*this._geometryUserData.parameters.width,.5*this._geometryUserData.parameters.height,0),textLines:[]},this.createTextLine()}static createFromState(e,t,r){let n=Qy.create({parameters:{width:t.width,height:t.height}}),i=new fS(n).fromState(t,r);return i.uuid=e,i}async updateText(e){this.clearText();let t=this.userData.textFrame,r=t.fontFamily;await hS.loadFont(r),t.text=e;let n=t.textOrigin,i=new sr({visible:t.visible,transparent:!0,side:2}),a=e.split("\n"),o=0;this.userData.textFrame.textLines=a.map(((e,a)=>{let s=new pS(o,t.lineHeight,t.fontSize);return s.message=e.split("").map((e=>{let a={char:e,fontFamily:r,letterSpacing:t.letterSpacing,fontSize:t.fontSize,LOD:16},o=i.clone();o.color=t.hexColor,o.opacity=t.opacity;let l=new hS(a,o);return s.addChar3D(l,n),this.charContainer.add(l),l})),o+=s.maxCharSize*s.lineHeight,s})),this.textFullUpdate(),this.checkOverFlow()}clearText(){let e=this.userData.textFrame.textLines;for(;this.charContainer.children.length;){let e=this.charContainer.children[0];this.charContainer.remove(e)}for(;e.length;)e.pop()}raycast(e,t){let r=[];if(super.raycast(e,r),r.length>0)return void t.push(r[0]);let n=[];for(let r=0,i=this.charContainer.children.length;r<i;++r)if(this.charContainer.children[r]instanceof hS&&(e.intersectObject(this.charContainer.children[r],!1,n),n.length>0))return n[0].object=this,void t.push(n[0])}updateGeometry(e){var t,r,n,i;let a=this.userData,o=this.geometry.userData,s=o.parameters.width,l=o.parameters.height,u=null!=(r=null==(t=e.parameters)?void 0:t.width)?r:s,c=null!=(i=null==(n=e.parameters)?void 0:n.height)?i:l,h=a.textFrame;super.updateGeometry(e),h.maxLineSize=u,h.textOrigin.set(-.5*u,.5*c,0),c!==l?(this.checkOverFlow(),this.checkCapacity()):u!==s&&(s<u?this.checkCapacity():s>u&&this.checkOverFlow())}checkOverFlow(e=0){let t=this.userData,r=t.textFrame.textOrigin,n=t.textFrame.textLines;for(let i=e;i<n.length;i++){n[i].updateYLinePos(this.getNewLinePosition(i)),n[i].fullUpdate(r);let e=[];for(;n[i].checkOverFlow(t.textFrame.maxLineSize);)n[i].containSpaceOverFlow()?e.unshift(n[i].getWord(n[i].message.length-1,-1)):e.unshift(n[i].popChar());if(e.length>0){void 0===n[i+1]?(n[i].isEndLine(!1),this.createTextLine()):n[i].endLine&&(this.createTextLine(i+1),n[i].isEndLine(!1),n[i+1].isEndLine(!0));let t=0;for(let a=0;a<e.length;a+=1)for(let o=0;o<e[a].length;o+=1)n[i+1].addChar3D(e[a][o],r,t),t+=1;n[i+1].fullUpdate(r)}n[i].fullUpdate(r)}this.textFullUpdate(e)}checkCapacity(e=0){let t=this.userData,r=t.textFrame.textOrigin,n=t.textFrame.maxLineSize,i=t.textFrame.textLines;for(let t=e;t<i.length;t+=1)if(i[t].updateYLinePos(this.getNewLinePosition(t)),i[t].fullUpdate(r),i[t-1])for(;!i[t-1].endLine;){let e,a=i[t-1].spaceLeft(n);if(!(i[t].wordSize(0,1)<=a)){i[t].isEmpty()?(i[t].endLine&&i[t-1].isEndLine(!0),i.splice(t,1),t-=1):(i[t].updateYLinePos(this.getNewLinePosition(t)),i[t].fullUpdate(r));break}e=i[t].containSpace()?i[t].getWord(0,1):i[t].popChar(0);for(let n=0;n<e.length;n+=1)e[n]&&i[t-1].addChar3D(e[n],r)}this.textFullUpdate(e)}createTextLine(e=this.userData.textFrame.textLines.length){let t=this.userData.textFrame;t.textLines.splice(e,0,new pS(this.getNewLinePosition(e),t.lineHeight,t.fontSize))}textFullUpdate(e=0){let t=this.userData.textFrame,r=t.textLines,n=this.getVerticalAlignmentOffSet();for(let i=e;i<r.length;i++)r[i].updateYLinePos(this.getNewLinePosition(i)),r[i].fullUpdate(t.textOrigin),r[i].alignText(t.textOrigin,t.maxLineSize,t.horizontalAlignment,t.verticalAlignment,n)}getVerticalAlignmentOffSet(){switch(this.userData.textFrame.verticalAlignment){case 1:default:return 0;case 2:return this.getRemainingVerticalSpace()/2;case 3:return this.getRemainingVerticalSpace()}}getRemainingVerticalSpace(){let e=this.userData.textFrame.textLines;return this.geometry.userData.parameters.height-this.getNewLinePosition(e.length)}getNewLinePosition(e){let t=this.userData.textFrame.textLines,r=0;for(let n=0;n<e;n+=1)r+=t[n].maxCharSize*t[n].lineHeight;return r}updateColor(e){var t;let r=this.userData;r.textFrame.hexColor=e;let n=r.textFrame.textLines;for(let r=0;r<n.length;r++){let i=n[r].message;for(let r=0;r<i.length;r++){let n=i[r].material;null!=(t=n.color)&&t.isColor&&(n.color=e)}}}updateOpacity(e){let t=this.userData;t.textFrame.opacity=e;let r=t.textFrame.textLines;for(let t=0;t<r.length;t++){let n=r[t].message;for(let t=0;t<n.length;t++)n[t].material.opacity=e}}updateVisible(e){let t=this.userData;t.textFrame.visible=e;let r=t.textFrame.textLines;for(let t=0;t<r.length;t++){let n=r[t].message;for(let t=0;t<n.length;t++)n[t].material.visible=e}}async updateFontFamily(e){await hS.loadFont(e);let t=this.userData.textFrame,r=t.textLines;t.fontFamily=e;for(let t=0;t<r.length;t++){let n=r[t].message;for(let t=0;t<n.length;t++)n[t].updateFontFamily(e)}this.textFullUpdate(),this.checkOverFlow(),this.checkCapacity()}updateFontSize(e){let t=this.userData.textFrame,r=t.textLines,n=t.fontSize;t.fontSize=e;for(let t=0;t<r.length;t++)r[t].updateFontSize(e);this.textFullUpdate(),e>n?this.checkOverFlow():e<n&&this.checkCapacity()}async updateTextTransform(e){let t=this.userData.textFrame;await hS.loadFont(t.fontFamily);let r=t.textLines;switch(t.textTransform=e,e){case 2:for(let e=0;e<r.length;e++){let t=r[e].message;for(let n=0;n<t.length;n++)r[e].message[n].updateChar(t[n].char.toUpperCase())}break;case 3:for(let e=0;e<r.length;e++){let t=r[e].message;for(let n=0;n<t.length;n++)r[e].message[n].updateChar(t[n].char.toLowerCase())}break;default:for(let e=0;e<r.length;e++){let t=r[e].message;for(let n=0;n<t.length;n++)r[e].message[n].updateChar(t[n].originalChar)}}this.textFullUpdate(),this.checkOverFlow(),this.checkCapacity()}updateLetterSpacing(e){let t=this.userData,r=t.textFrame.textLines;t.textFrame.letterSpacing=e;for(let t=0;t<r.length;t++){let n=r[t].message;for(let t=0;t<n.length;t++)n[t].updateLetterSpacing(e)}this.textFullUpdate(),this.checkOverFlow(),this.checkCapacity()}updateLOD(e){let t=this.userData;t.textFrame.LOD=e;let r=t.textFrame.textLines;for(let e=0;e<r.length;e++);this.textFullUpdate(),this.checkOverFlow(),this.checkCapacity()}updateLineHeight(e){let t=this.userData,r=t.textFrame.textLines;t.textFrame.lineHeight=e;for(let t=0;t<r.length;t++)r[t].updatelineHeight(e);this.textFullUpdate()}updateVerticalAlignment(e){this.userData.textFrame.verticalAlignment=e,this.textFullUpdate()}updateHorizontalAlignment(e){this.userData.textFrame.horizontalAlignment=e,this.textFullUpdate()}toJSON(e){let t=super.toJSON(e),r=t.object;r.objectType="TextFrame";let n=this.userData.textFrame.textLines.map((e=>{let t=e.message.map((e=>({char:e.char,originalChar:e.originalChar,fontFamily:e.fontFamily,letterSpacing:e.letterSpacing,fontSize:e.fontSize,LOD:e.LOD})));return{align:e.align,endLine:e.endLine,lineHeight:e.lineHeight,maxCharSize:e.maxCharSize,yLinePos:e.yLinePos,message:t}}));return r.userData.textFrame.textLinesData=n,t}async fromJSONasync(e){if(super.fromJSON(e),void 0!==e.userData){let t=e.userData.textFrame;await hS.loadFont(t.fontFamily),t.textOrigin=new We(t.textOrigin.x,t.textOrigin.y,t.textOrigin.z);let r=new sr({color:t.hexColor,opacity:t.opacity,visible:t.visible,transparent:!0,side:2});t.textLinesData&&(t.textLines=t.textLinesData.map(((e,n)=>{let i=new pS(Number(e.yLinePos),Number(e.lineHeight),Number(e.maxCharSize)),a=e.message.map(((e,a)=>{if(void 0===e.char){let r=t.textLines[n].message[a];if("geometries"in r){let t=r.geometries[0].userData.parameters;Object.assign(e,{LOD:t.lod,char:t.char,fontFamily:t.fontFamily,fontSize:t.fontSize,letterSpacing:t.letterSpacing,originalChar:t.char})}}let o={char:e.char,fontFamily:e.fontFamily,letterSpacing:Number(e.letterSpacing),fontSize:Number(e.fontSize),LOD:e.LOD},s=new hS(o,r.clone());return i.addChar3D(s,t.textOrigin),this.charContainer.add(s),s}));return i.message=a,i})),this.userData.textFrame=t),this.textFullUpdate()}return this}fromTextFrameData(e,t){if(void 0!==e.color){let r=dx(e.color,t);this.updateColor(r),this.updateOpacity(r.a)}void 0!==e.alpha&&this.updateOpacity(e.alpha),void 0!==e.font&&this.updateFontFamily(e.font),void 0!==e.horizontalAlign&&this.updateHorizontalAlignment(e.horizontalAlign),void 0!==e.verticalAlign&&this.updateVerticalAlignment(e.verticalAlign),void 0!==e.textTransform&&this.updateTextTransform(e.textTransform),void 0!==e.fontSize&&this.updateFontSize(e.fontSize),void 0!==e.lineHeight&&this.updateLineHeight(e.lineHeight),void 0!==e.letterSpacing&&this.updateLetterSpacing(e.letterSpacing),void 0!==e.text&&""!==e.text&&this.updateText(e.text),(void 0!==e.width||void 0!==e.height)&&this.updateGeometry({parameters:{width:e.width,height:e.height}})}fromState(e,t){return super.fromState(e),this.fromTextFrameData(e,t),this}convertToVector(){let{fontFamily:e,hexColor:t}=this.userData.textFrame,r=new Kw;r.name="Text Shape";let n=hS.fontCache[e];for(let e of this.charContainer.children)e instanceof hS&&n.generateShapes(e.char,1).forEach((n=>{let i=(new Qv).fromShape(n);i.applyScale(e.scale.x,e.scale.y);let a=by.create({shape:i}),o=new aw({side:2});o.color=t;let s=new Rw(a,o);s.name=e.char,s.position.copy(e.position),s.rotation.copy(e.rotation),r.attach(s)}));return r}},mS=fS;mS.VerticalAlign=Mg,mS.HorizontalAlign=Ag,mS.TextTransform=Eg;var gS,vS=((e,t,r)=>(r=null!=e?a(d(e)):{},((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of c(t))!p.call(e,r)&&undefined!==r&&o(e,r,{get:()=>t[r],enumerable:!(n=l(t,r))||n.enumerable});return e})(e&&e.__esModule?r:o(r,"default",{value:e,enumerable:!0}),e)))(y());ix.then((e=>{gS=e}));var yS=new St,xS=new St,bS=new St,wS=new Xe,SS=new We,_S=new St,AS=new St,MS=class extends Tx{constructor(e,t,r,n=new lw){super(null!=r?r:t,n),this.subdivPointer=e,this.originalGeometry=t,this.subdividedGeometry=r,this.objectType="SubdivObject",this.hiddenMatrixOld=new St,this.smoothShading=!0,this.matrixWorldRigid=new St,this.castShadow=!0,this.receiveShadow=!0,this.forceComputeSize=!1}static createFromState(e,t,r){let{subdivPointer:n,originalGeometry:i,subdividedGeometry:a}=lx.build(t.geometry,void 0,void 0,!t.flatShading),o=Sw(t.material,r),s=new MS(n,i,a||void 0,o);return s.calcBoundingBox(),s.freeSubdivPointer(),s.uuid=e,s.fromState(t),s}shallowClone(e){return new oS(this.geometry,this.material).shallowCopy(this,e)}toJSON(e){let t=super.toJSON(e);return t.object.objectType="SubdivObject",t}buildFromStore(e){var t,r,n;let{originalGeometry:i,subdividedGeometry:a,subdivPointer:o}=lx.build(e,this.subdivPointer,void 0,this.smoothShading,this.shearScale);if(this.subdivPointer=o,void 0!==i&&(null==(t=this.originalGeometry)||t.dispose(),this.originalGeometry=i),void 0!==a&&(null==(r=this.subdividedGeometry)||r.dispose(),this.subdividedGeometry=null!=a?a:void 0),this.geometry=null!=(n=this.subdividedGeometry)?n:this.originalGeometry,this.cloner)for(let e of this.cloner.children)e.geometry=this.geometry;e.width&&(this.geometry.userData.parameters={width:e.width,height:e.height,depth:e.depth})}updateMesh(e=!1){lx.buildLevel(this.subdivPointer,!0,this.smoothShading,this.originalGeometry,e?this.shearScaleInv:void 0),this.subdividedGeometry&&lx.buildLevel(this.subdivPointer,!1,this.smoothShading,this.subdividedGeometry,e?this.shearScaleInv:void 0)}updateTopology(){var e;this.originalGeometry.dispose(),this.originalGeometry=lx.buildLevel(this.subdivPointer,!0,this.smoothShading),this.subdividedGeometry&&(this.subdividedGeometry.dispose(),this.subdividedGeometry=lx.buildLevel(this.subdivPointer,!1,this.smoothShading)),this.geometry=null!=(e=this.subdividedGeometry)?e:this.originalGeometry}raycast(e,t){var r;this.geometry=this.originalGeometry,Tx.prototype.raycast.call(this,e,t),this.geometry=null!=(r=this.subdividedGeometry)?r:this.originalGeometry}updateMatrixWorldSVD(){let e=this.matrixWorld.elements,t=[[e[0],e[4],e[8]],[e[1],e[5],e[9]],[e[2],e[6],e[10]]],{u:r,v:n,q:i}=(0,vS.SVD)(t),a=yS.set(r[0][0],r[0][1],r[0][2],0,r[1][0],r[1][1],r[1][2],0,r[2][0],r[2][1],r[2][2],0,0,0,0,1),o=xS.set(n[0][0],n[0][1],n[0][2],0,n[1][0],n[1][1],n[1][2],0,n[2][0],n[2][1],n[2][2],0,0,0,0,1),s=bS.copy(o).transpose();this.shearScale=_S.makeScale(i[0],i[1],i[2]).multiply(s).premultiply(o),this.shearScaleInv=AS.copy(this.shearScale).invert(),this.matrixWorldRigid.multiplyMatrices(a,s),i.every((e=>Math.abs(i[0]-e)<.01))&&(this.shearScale=void 0,this.shearScaleInv=void 0)}activateSVDCompensation(){void 0!==this.shearScale&&(this.matrixAutoUpdate=!1,this.matrix.copy(this.matrixWorldRigid).copyPosition(this.matrixWorld),this.hiddenMatrixOld.copy(this.hiddenMatrix),this.hiddenMatrix.copy(this.parent.matrixWorld).invert())}deactivateSVDCompensation(){void 0!==this.shearScale&&(this.shearScale=void 0,this.shearScaleInv=void 0,this.matrixAutoUpdate=!0,this.hiddenMatrix.copy(this.hiddenMatrixOld))}calcBoundingBox(){let e=this.originalGeometry;null===e.boundingSphere&&(e.boundingSphere=new pt);let t=e.attributes.position,r=e.boundingSphere.center;wS.setFromBufferAttribute(t),wS.getCenter(r),e.boundingSphere.radius=r.distanceTo(wS.max),isNaN(e.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this),wS.getSize(SS);let n={width:SS.x,height:SS.y,depth:SS.z};return this.geometry.userData.parameters=n,n}updateBoundingBox(e){let t=this.originalGeometry;wS.min.set(e[0],e[2],e[4]),wS.max.set(e[1],e[3],e[5]),this.shearScaleInv&&(wS.min.applyMatrix4(this.shearScaleInv),wS.max.applyMatrix4(this.shearScaleInv)),null===t.boundingSphere&&(t.boundingSphere=new pt);let r=t.boundingSphere.center;wS.getCenter(r),t.boundingSphere.radius=r.distanceTo(wS.max),isNaN(t.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this),wS.getSize(SS);let n={width:SS.x,height:SS.y,depth:SS.z};return this.geometry.userData.parameters=n,n}freeSubdivPointer(){this.subdivPointer&&(gS.free_bvh(this.subdivPointer),gS.free_subdivision_surface(this.subdivPointer),this.subdivPointer=0)}updateGeometry(e){this.geometry.userData.scale||(this.geometry.userData.scale=Array(3)),this.geometry.userData.scale[0]=0===this.geometry.userData.parameters.width?1:e.parameters.width/this.geometry.userData.parameters.width,this.geometry.userData.scale[1]=0===this.geometry.userData.parameters.height?1:e.parameters.height/this.geometry.userData.parameters.height,this.geometry.userData.scale[2]=0===this.geometry.userData.parameters.depth?1:e.parameters.depth/this.geometry.userData.parameters.depth,ES(this.originalGeometry.attributes,...this.geometry.userData.scale),this.originalGeometry.attributes.position.needsUpdate=!0,this.originalGeometry.attributes.normal.needsUpdate=!0,this.subdividedGeometry&&(ES(this.subdividedGeometry.attributes,...this.subdividedGeometry.userData.scale),this.subdividedGeometry.attributes.position.needsUpdate=!0,this.subdividedGeometry.attributes.normal.needsUpdate=!0),this.geometry.userData.parameters=g({},e.parameters)}};function ES(e,t,r,n){let i,a,o,s=e.position.array,l=e.normal.array,u=yS.makeScale(t,r,n).invert().elements;for(var c=0,h=s.length;c<h;c+=3)s[c]*=t,s[c+1]*=r,s[c+2]*=n,i=l[c],a=l[c+1],o=l[c+2],l[c]=u[0]*i+u[4]*a+u[8]*o,l[c+1]=u[1]*i+u[5]*a+u[9]*o,l[c+2]=u[2]*i+u[6]*a+u[10]*o}function CS(e,t){void 0!==t.flatShading&&(e.flatShading=t.flatShading,e.needsUpdate=!0),void 0!==t.wireframe&&(e.wireframe=t.wireframe),void 0!==t.side&&(0===t.side?e.side=0:1===t.side?e.side=1:e.side=2)}function TS(e,t,r){let n;if("SubdivGeometry"===t.geometry.type)n=MS.createFromState(e,t,r);else{let i=function(e,t){return function(e){let t,r={parameters:e,type:e.type};if("VectorGeometry"===e.type){let t=Qv.createFromState(e.shape,e.width,e.height);r.shape=t}else"NonParametricGeometry"===e.type&&(e.data.groups&&e.data.groups.forEach((e=>{var t;return e.materialIndex=Math.max(null!=(t=e.materialIndex)?t:0,0)})),r.geometry=(new Nl).parse(e));try{t=cx(r)}catch(e){console.error(e)}if(!t){let e=Qv.createFromState(Dg.defaultData(),100,100);r.shape=e,t=cx(r)}return t}(e)}(t.geometry),a="materials"in t?function(e,t){return e.map((e=>Sw(e,t)))}(t.materials,r):Sw(t.material,r);n=Lg.is2DParametricMesh(i.userData.type)?new Cw(i,a):"VectorGeometry"===(null==i?void 0:i.userData.type)?new Rw(i,a):"NonParametricGeometry"===t.geometry.type?new oS(i,a):new aS(i,a),n.uuid=e,n.fromState(t)}return function(e,t){if(Array.isArray(e.material))for(let r of e.material)CS(r,t);else CS(e.material,t);"SubdivObject"===e.objectType&&void 0!==t.flatShading&&(e.material.flatShading=!1,e.smoothShading=!t.flatShading,e.updateMesh())}(n,t),n}function DS(e,t,r){if(!r.userData.layers)return!1;let n=!1,i=r.userData.layers.getLayersOfType("transmission");return i.length>0?(t.layers.set(3),n=!0,void 0!==e&&i.forEach((t=>function(e,t){t.uniforms[`f${t.id}_transmissionSamplerMap`].value=e.texture,t.uniforms[`f${t.id}_transmissionDepthMap`].value=e.depthTexture}(e,t)))):t.layers.set(0),n}var LS=new We,PS=class extends(Ax(Na)){constructor(e,t){super(),this.objectType="Scene",this.alpha=1,this.backupFog=new za(16777215,.1,2e3),this.fogUseBGColor=!1,this.wireframeState=!1,this.needsTransmissionDirty=!0,this._needsTransmission=!1,this._color=new Oe(1,0,0),this.bgColor=new Oe(1,1,1),this.entityByUuid={},this.ambientLight=new wl(13882323,8553090,.75),this.ambientLight.name="Default Ambient Light",this.personalCamera=this.createPersonalCamera(),this.activeCamera=this.personalCamera,this.sharedAssetManager=t,this.init(e,t)}needsTransmission(e){return this.needsTransmissionDirty&&(this._needsTransmission=function(e,t){let r=!1;return t.traverseEntity((t=>{if(t instanceof Tx)if(Array.isArray(t.material))for(let n=0;n<t.material.length;n++)DS(e,t,t.material[n])&&(r=!0);else DS(e,t,t.material)&&(r=!0)})),r}(e,this),void 0!==e&&(this.needsTransmissionDirty=!1)),this._needsTransmission}find(e){if(""===e||void 0===e)return;let t=this.entityByUuid[e];return void 0===t?this.getObjectByProperty("uuid",e):t}get color(){return this._color}set color(e){!0===this.fogUseBGColor&&this.backupFog.color.copy(e),this._color.copy(e)}get enableFog(){return null!==this.fog}set enableFog(e){this.fog=!0===e?this.backupFog:null}init(e,t){if(this.createChildrenObjects(e.objects,this,t),this.personalCamera.removeFromParent(),this.add(this.personalCamera),this.ambientLight.removeFromParent(),this.add(this.ambientLight),this.setBackgroundColor(dx(e.backgroundColor,t)),this.updateFog(e.fog,t),this.updateAmbientLight(e.environment.ambientLight,t),this.activeCamera=this.personalCamera,null!==e.publish.playCamera){let t=this.find(e.publish.playCamera);t instanceof Zw&&this.switchActiveCamera(t)}}clearScene(e){this.traverseEntity((t=>{!function(e,t){"material"in e&&function(e,t){(function(e){return Array.isArray(e)?e:[e]})(e).forEach((e=>{t.isSharedMaterial(e)||e.dispose()}))}(e.material,t),"geometry"in e&&e.geometry.dispose()}(t,e)}));for(let e of this.children)Mx(e)&&e.removeFromParent()}resetAfterClear(e,t){this.init(e,t)}createPersonalCamera(){let e=Zw.createFromState(PS.PERSONAL_CAMERA_ID,v(g({},zg.defaultData),{name:"Personal Camera"}));return e.enableHelper=!1,e.objectHelper.visible=!1,delete e.isEntity,this.registerObjectCreatedInLegacy(e),e}raycast(e){let t=[],r=n=>{for(let i of n.children)Mx(i)&&!i.raycastLock&&i.visible&&((fx(i)||mx(i)&&i.enableHelper&&i.objectHelper.parent)&&e.intersectObject(i,!1,t),r(i))};return r(this),t}traverseEntity(e){for(let t of this.children)Mx(t)&&t.traverseEntity(e)}updateFog(e,t){this.enableFog=e.enabled,this.fogUseBGColor=e.useBackgroundColor,e.useBackgroundColor?this.backupFog.color.set(this.bgColor):this.backupFog.color=dx(e.color,t),this.backupFog.near=e.near,this.backupFog.far=e.far}toJSON(e){return{}}fromJSON(e){return this}dispose(){this.clearScene(this.sharedAssetManager),this.sharedAssetManager.dispose()}updateAmbientLight(e,t){(function(e,t,r){(function(e,t){gx(e,t),void 0!==t.name&&(e.name=t.name),void 0!==t.visible&&(e.isEntity?e.visibility=t.visible:e.visible=t.visible)})(e,t),void 0!==t.color&&(e.color=dx(t.color,r)),void 0!==t.intensity&&(e.intensity=t.intensity),void 0!==t.shadows&&!(e instanceof wl)&&(e.castShadow=t.shadows),e.shadow&&!(e instanceof wl)&&void 0!==t.depth&&(e.shadow.camera.far=t.depth,e.shadow.needsUpdate=!0),void 0!==t.helper&&mx(e)&&(e.enableHelper=t.helper,e.gizmos.shadowmap.visible=t.helper)})(this.ambientLight,e,t),void 0!==e.groundColor&&(this.ambientLight.groundColor=dx(e.groundColor,t)),void 0!==e.enabled&&(this.ambientLight.visible=e.enabled)}switchActiveCamera(e){this.activeCamera!==this.personalCamera&&(this.activeCamera.enableHelper=!0),this.activeCamera=e,e.enableHelper=!1}setBackgroundColor(e){this.bgColor=e,this.alpha=e.a}createChildrenObjects(e,t,r){for(let n of e)this.createChildObject(n.id,n.data,n.children,t,r)}registerObjectCreatedInLegacy(e){this.entityByUuid[e.uuid]=e}unregisterObject(e){delete this.entityByUuid[e.uuid];for(let t of e.children)this.unregisterObject(t)}createChildObject(e,t,r,n,i){let a=function(e,t,r){return"Mesh"===t.type?TS(e,t,r):"TextFrame"===t.type?mS.createFromState(e,t,r):"Empty"===t.type?Kw.createFromState(e,t):"PointLight"===t.type?eS.createFromState(e,t,r):"SpotLight"===t.type?iS.createFromState(e,t,r):"DirectionalLight"===t.type?$w.createFromState(e,t,r):Pp.is(t.type)?Zw.createFromState(e,t):(console.error(t),new Kw)}(e,t,i);return a&&(this.entityByUuid[e]=a,n.add(a),this.createChildrenObjects(r,a,i)),a}getCenter(e){let t=[];for(let r=0,n=e.length;r<n;++r){let{id:n,recursive:i}=e[r],a=this.find(n),o=i?a.recursiveBBox:a.singleBBox;t.push(...o.vertices)}let r=new Xe;return r.setFromPoints(t),r.getCenter(LS),LS}copyMatrixWorld(e,t){if(null===e)return void t.identity();let r=this.find(e);r?t.copy(r.matrixWorld):t.identity()}copyParentMatrixWorld(e,t){var r;if(null===e)return void t.identity();let n=null==(r=this.find(e))?void 0:r.parent;n?t.copy(n.matrixWorld):t.identity()}traverseMaterial(e){this.traverseEntity((t=>{if(t instanceof Tx)if(Array.isArray(t.material))for(let r=0;r<t.material.length;r++)e(t.material[r]);else e(t.material)}))}updateCanvasSize(e,t){let r,n;this.activeCamera.setViewplaneSize(e,t),e>=t?(r=t/e,n=1):(r=1,n=e/t),this.traverseMaterial((e=>{e.layersList.getLayersOfType("transmission").forEach((e=>{e.uniforms[`f${e.id}_aspectRatio`].value.x=r,e.uniforms[`f${e.id}_aspectRatio`].value.y=n}))}))}},RS=PS;RS.PERSONAL_CAMERA_ID="f23858d0-4a3b-4bd8-8173-66ed0af7f6fb-personalCamera";var OS="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",kS=class extends Wr{constructor(e=!1,t=!1){super({name:"BokehMaterial",defines:{PASS:e?"2":"1"},uniforms:{kernel64:new eu(null),kernel16:new eu(null),inputBuffer:new eu(null),cocBuffer:new eu(null),texelSize:new eu(new ve),scale:new eu(1)},blending:0,depthWrite:!1,depthTest:!1,fragmentShader:"#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nuniform lowp sampler2D cocBuffer;uniform vec2 texelSize;uniform float scale;\n#if PASS == 1\nuniform vec4 kernel64[32];\n#else\nuniform vec4 kernel16[8];\n#endif\nvarying vec2 vUv;void main(){\n#ifdef FOREGROUND\nvec2 CoCNearFar=texture2D(cocBuffer,vUv).rg;float CoC=CoCNearFar.r*scale;\n#else\nfloat CoC=texture2D(cocBuffer,vUv).g*scale;\n#endif\nif(CoC==0.0){gl_FragColor=texture2D(inputBuffer,vUv);}else{\n#ifdef FOREGROUND\nvec2 step=texelSize*max(CoC,CoCNearFar.g*scale);\n#else\nvec2 step=texelSize*CoC;\n#endif\n#if PASS == 1\nvec4 acc=vec4(0.0);for(int i=0;i<32;++i){vec4 kernel=kernel64[i];vec2 uv=step*kernel.xy+vUv;acc+=texture2D(inputBuffer,uv);uv=step*kernel.zw+vUv;acc+=texture2D(inputBuffer,uv);}gl_FragColor=acc/64.0;\n#else\nvec4 maxValue=texture2D(inputBuffer,vUv);for(int i=0;i<8;++i){vec4 kernel=kernel16[i];vec2 uv=step*kernel.xy+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);uv=step*kernel.zw+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);}gl_FragColor=maxValue;\n#endif\n}}",vertexShader:OS}),this.toneMapped=!1,t&&(this.defines.FOREGROUND="1"),this.generateKernel()}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}set cocBuffer(e){this.uniforms.cocBuffer.value=e}setCoCBuffer(e){this.uniforms.cocBuffer.value=e}get scale(){return this.uniforms.scale.value}set scale(e){this.uniforms.scale.value=e}getScale(e){return this.uniforms.scale.value=e}setScale(e){this.uniforms.scale.value=e}generateKernel(){let e=new Float32Array(128),t=new Float32Array(32),r=0,n=0;for(let i=0;i<80;++i){let a=2.39996323*i,o=Math.sqrt(i)/Math.sqrt(80),s=o*Math.cos(a),l=o*Math.sin(a);i%5==0?(t[n++]=s,t[n++]=l):(e[r++]=s,e[r++]=l)}let i=[],a=[];for(let t=0;t<128;)i.push(new Ue(e[t++],e[t++],e[t++],e[t++]));for(let e=0;e<32;)a.push(new Ue(t[e++],t[e++],t[e++],t[e++]));this.uniforms.kernel64.value=i,this.uniforms.kernel16.value=a}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t)}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}};function IS(e,t,r){return e*(t-r)-t}function BS(e,t,r){return Math.min(Math.max((e+t)/(t-r),0),1)}var zS=class extends Wr{constructor(e){super({name:"CircleOfConfusionMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new eu(null),focusDistance:new eu(0),focusRange:new eu(0),cameraNear:new eu(.3),cameraFar:new eu(1e3)},blending:0,depthWrite:!1,depthTest:!1,fragmentShader:"#include <common>\n#include <packing>\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\nuniform float focusDistance;uniform float focusRange;uniform float cameraNear;uniform float cameraFar;varying vec2 vUv;float readDepth(const in vec2 uv){\n#if DEPTH_PACKING == 3201\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\n#else\nreturn texture2D(depthBuffer,uv).r;\n#endif\n}void main(){float depth=readDepth(vUv);\n#ifdef PERSPECTIVE_CAMERA\nfloat viewZ=perspectiveDepthToViewZ(depth,cameraNear,cameraFar);float linearDepth=viewZToOrthographicDepth(viewZ,cameraNear,cameraFar);\n#else\nfloat linearDepth=depth;\n#endif\nfloat signedDistance=linearDepth-focusDistance;float magnitude=smoothstep(0.0,focusRange,abs(signedDistance));gl_FragColor.rg=magnitude*vec2(step(signedDistance,0.0),step(0.0,signedDistance));}",vertexShader:OS}),this.toneMapped=!1,this.uniforms.focalLength=this.uniforms.focusRange,this.adoptCameraSettings(e)}get near(){return this.uniforms.cameraNear.value}get far(){return this.uniforms.cameraFar.value}set depthBuffer(e){this.uniforms.depthBuffer.value=e}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=Z){this.depthBuffer=e,this.depthPacking=t}get focusDistance(){return this.uniforms.focusDistance.value}set focusDistance(e){this.uniforms.focusDistance.value=e}get worldFocusDistance(){return-IS(this.focusDistance,this.near,this.far)}set worldFocusDistance(e){this.focusDistance=BS(-e,this.near,this.far)}getFocusDistance(e){this.uniforms.focusDistance.value=e}setFocusDistance(e){this.uniforms.focusDistance.value=e}get focalLength(){return this.focusRange}set focalLength(e){this.focusRange=e}get focusRange(){return this.uniforms.focusRange.value}set focusRange(e){this.uniforms.focusRange.value=e}get worldFocusRange(){return-IS(this.focusRange,this.near,this.far)}set worldFocusRange(e){this.focusRange=BS(-e,this.near,this.far)}getFocalLength(e){return this.focusRange}setFocalLength(e){this.focusRange=e}adoptCameraSettings(e){e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof Yr?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},NS=class extends Wr{constructor(e=new ve){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new eu(null),texelSize:new eu(new ve),halfTexelSize:new eu(new ve),kernel:new eu(0),scale:new eu(1)},blending:0,depthWrite:!1,depthTest:!1,fragmentShader:"#include <common>\n#include <dithering_pars_fragment>\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nvarying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;\n#include <encodings_fragment>\n#include <dithering_fragment>\n}",vertexShader:"uniform vec2 texelSize;uniform vec2 halfTexelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize*vec2(kernel)+halfTexelSize)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}"}),this.toneMapped=!1,this.setTexelSize(e.x,e.y)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.inputBuffer=e}get scale(){return this.uniforms.scale.value}set scale(e){this.uniforms.scale.value=e}getScale(){return this.uniforms.scale.value}setScale(e){this.uniforms.scale.value=e}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(e){this.uniforms.kernel.value=e}setKernel(e){this.kernel=e}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t),this.uniforms.halfTexelSize.value.set(e,t).multiplyScalar(.5)}setSize(e,t){let r=this.uniforms;r.texelSize.value.set(1/e,1/t),r.halfTexelSize.value.copy(r.texelSize.value).multiplyScalar(.5)}},FS=class extends Wr{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new eu(null),opacity:new eu(1)},blending:0,depthWrite:!1,depthTest:!1,fragmentShader:"#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nuniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;\n#include <encodings_fragment>\n}",vertexShader:OS}),this.toneMapped=!1}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}getOpacity(e){return this.uniforms.opacity.value}setOpacity(e){this.uniforms.opacity.value=e}},US=class extends Wr{constructor(e=new ve,t=2){super({name:"EdgeDetectionMaterial",defines:{LOCAL_CONTRAST_ADAPTATION_FACTOR:"2.0",EDGE_THRESHOLD:"0.1",DEPTH_THRESHOLD:"0.01",PREDICATION_MODE:"0",PREDICATION_THRESHOLD:"0.01",PREDICATION_SCALE:"2.0",PREDICATION_STRENGTH:"1.0",DEPTH_PACKING:"0"},uniforms:{inputBuffer:new eu(null),depthBuffer:new eu(null),predicationBuffer:new eu(null),texelSize:new eu(e)},blending:0,depthWrite:!1,depthTest:!1,fragmentShader:"varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;\n#if EDGE_DETECTION_MODE != 0\nvarying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;\n#endif\n#if EDGE_DETECTION_MODE == 1\n#include <common>\n#endif\n#if EDGE_DETECTION_MODE == 0 || PREDICATION_MODE == 1\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\nfloat readDepth(const in vec2 uv){\n#if DEPTH_PACKING == 3201\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\n#else\nreturn texture2D(depthBuffer,uv).r;\n#endif\n}vec3 gatherNeighbors(){float p=readDepth(vUv);float pLeft=readDepth(vUv0);float pTop=readDepth(vUv1);return vec3(p,pLeft,pTop);}\n#elif PREDICATION_MODE == 2\nuniform sampler2D predicationBuffer;vec3 gatherNeighbors(){float p=texture2D(predicationBuffer,vUv).r;float pLeft=texture2D(predicationBuffer,vUv0).r;float pTop=texture2D(predicationBuffer,vUv1).r;return vec3(p,pLeft,pTop);}\n#endif\n#if PREDICATION_MODE != 0\nvec2 calculatePredicatedThreshold(){vec3 neighbours=gatherNeighbors();vec2 delta=abs(neighbours.xx-neighbours.yz);vec2 edges=step(PREDICATION_THRESHOLD,delta);return PREDICATION_SCALE*EDGE_THRESHOLD*(1.0-PREDICATION_STRENGTH*edges);}\n#endif\n#if EDGE_DETECTION_MODE != 0\nuniform sampler2D inputBuffer;\n#endif\nvoid main(){\n#if EDGE_DETECTION_MODE == 0\nconst vec2 threshold=vec2(DEPTH_THRESHOLD);\n#elif PREDICATION_MODE != 0\nvec2 threshold=calculatePredicatedThreshold();\n#else\nconst vec2 threshold=vec2(EDGE_THRESHOLD);\n#endif\n#if EDGE_DETECTION_MODE == 0\nvec3 neighbors=gatherNeighbors();vec2 delta=abs(neighbors.xx-vec2(neighbors.y,neighbors.z));vec2 edges=step(threshold,delta);if(dot(edges,vec2(1.0))==0.0){discard;}gl_FragColor=vec4(edges,0.0,1.0);\n#elif EDGE_DETECTION_MODE == 1\nfloat l=linearToRelativeLuminance(texture2D(inputBuffer,vUv).rgb);float lLeft=linearToRelativeLuminance(texture2D(inputBuffer,vUv0).rgb);float lTop=linearToRelativeLuminance(texture2D(inputBuffer,vUv1).rgb);vec4 delta;delta.xy=abs(l-vec2(lLeft,lTop));vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}float lRight=linearToRelativeLuminance(texture2D(inputBuffer,vUv2).rgb);float lBottom=linearToRelativeLuminance(texture2D(inputBuffer,vUv3).rgb);delta.zw=abs(l-vec2(lRight,lBottom));vec2 maxDelta=max(delta.xy,delta.zw);float lLeftLeft=linearToRelativeLuminance(texture2D(inputBuffer,vUv4).rgb);float lTopTop=linearToRelativeLuminance(texture2D(inputBuffer,vUv5).rgb);delta.zw=abs(vec2(lLeft,lTop)-vec2(lLeftLeft,lTopTop));maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges.xy*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);\n#elif EDGE_DETECTION_MODE == 2\nvec4 delta;vec3 c=texture2D(inputBuffer,vUv).rgb;vec3 cLeft=texture2D(inputBuffer,vUv0).rgb;vec3 t=abs(c-cLeft);delta.x=max(max(t.r,t.g),t.b);vec3 cTop=texture2D(inputBuffer,vUv1).rgb;t=abs(c-cTop);delta.y=max(max(t.r,t.g),t.b);vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}vec3 cRight=texture2D(inputBuffer,vUv2).rgb;t=abs(c-cRight);delta.z=max(max(t.r,t.g),t.b);vec3 cBottom=texture2D(inputBuffer,vUv3).rgb;t=abs(c-cBottom);delta.w=max(max(t.r,t.g),t.b);vec2 maxDelta=max(delta.xy,delta.zw);vec3 cLeftLeft=texture2D(inputBuffer,vUv4).rgb;t=abs(c-cLeftLeft);delta.z=max(max(t.r,t.g),t.b);vec3 cTopTop=texture2D(inputBuffer,vUv5).rgb;t=abs(c-cTopTop);delta.w=max(max(t.r,t.g),t.b);maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);\n#endif\n}",vertexShader:"uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;\n#if EDGE_DETECTION_MODE != 0\nvarying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;\n#endif\nvoid main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,0.0);vUv1=vUv+texelSize*vec2(0.0,-1.0);\n#if EDGE_DETECTION_MODE != 0\nvUv2=vUv+texelSize*vec2(1.0,0.0);vUv3=vUv+texelSize*vec2(0.0,1.0);vUv4=vUv+texelSize*vec2(-2.0,0.0);vUv5=vUv+texelSize*vec2(0.0,-2.0);\n#endif\ngl_Position=vec4(position.xy,1.0,1.0);}"}),this.toneMapped=!1,this.edgeDetectionMode=t}set depthBuffer(e){this.uniforms.depthBuffer.value=e}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=Z){this.depthBuffer=e,this.depthPacking=t}get edgeDetectionMode(){return Number(this.defines.EDGE_DETECTION_MODE)}set edgeDetectionMode(e){this.defines.EDGE_DETECTION_MODE=e.toFixed(0),this.needsUpdate=!0}getEdgeDetectionMode(){return this.edgeDetectionMode}setEdgeDetectionMode(e){this.edgeDetectionMode=e}get localContrastAdaptationFactor(){return Number(this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR)}set localContrastAdaptationFactor(e){this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR=e.toFixed("6"),this.needsUpdate=!0}getLocalContrastAdaptationFactor(){return this.localContrastAdaptationFactor}setLocalContrastAdaptationFactor(e){this.localContrastAdaptationFactor=e}get edgeDetectionThreshold(){return Number(this.defines.EDGE_THRESHOLD)}set edgeDetectionThreshold(e){this.defines.EDGE_THRESHOLD=e.toFixed("6"),this.defines.DEPTH_THRESHOLD=(.1*e).toFixed("6"),this.needsUpdate=!0}getEdgeDetectionThreshold(){return this.edgeDetectionThreshold}setEdgeDetectionThreshold(e){this.edgeDetectionThreshold=e}get predicationMode(){return Number(this.defines.PREDICATION_MODE)}set predicationMode(e){this.defines.PREDICATION_MODE=e.toFixed(0),this.needsUpdate=!0}getPredicationMode(){return this.predicationMode}setPredicationMode(e){this.predicationMode=e}set predicationBuffer(e){this.uniforms.predicationBuffer.value=e}setPredicationBuffer(e){this.uniforms.predicationBuffer.value=e}get predicationThreshold(){return Number(this.defines.PREDICATION_THRESHOLD)}set predicationThreshold(e){this.defines.PREDICATION_THRESHOLD=e.toFixed("6"),this.needsUpdate=!0}getPredicationThreshold(){return this.predicationThreshold}setPredicationThreshold(e){this.predicationThreshold=e}get predicationScale(){return Number(this.defines.PREDICATION_SCALE)}set predicationScale(e){this.defines.PREDICATION_SCALE=e.toFixed("6"),this.needsUpdate=!0}getPredicationScale(){return this.predicationScale}setPredicationScale(e){this.predicationScale=e}get predicationStrength(){return Number(this.defines.PREDICATION_STRENGTH)}set predicationStrength(e){this.defines.PREDICATION_STRENGTH=e.toFixed("6"),this.needsUpdate=!0}getPredicationStrength(){return this.predicationStrength}setPredicationStrength(e){this.predicationStrength=e}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}},jS={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},HS=class extends Wr{constructor(e,t,r,n,i=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:x.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new eu(null),depthBuffer:new eu(null),resolution:new eu(new ve),texelSize:new eu(new ve),cameraNear:new eu(.3),cameraFar:new eu(1e3),aspect:new eu(1),time:new eu(0)},blending:0,depthWrite:!1,depthTest:!1,dithering:i}),this.toneMapped=!1,e&&this.setShaderParts(e),t&&this.setDefines(t),r&&this.setUniforms(r),this.adoptCameraSettings(n)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(e){this.uniforms.depthBuffer.value=e}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=Z){this.depthBuffer=e,this.depthPacking=t}setShaderParts(e){return this.fragmentShader="#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#define packFloatToRGBA(v) packDepthToRGBA(v)\n#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\nuniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;\n#if THREE_REVISION >= 137\nvec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}\n#endif\nfloat readDepth(const in vec2 uv){\n#if DEPTH_PACKING == 3201\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\n#else\nreturn texture2D(depthBuffer,uv).r;\n#endif\n}float getViewZ(const in float depth){\n#ifdef PERSPECTIVE_CAMERA\nreturn perspectiveDepthToViewZ(depth,cameraNear,cameraFar);\n#else\nreturn orthographicDepthToViewZ(depth,cameraNear,cameraFar);\n#endif\n}FRAGMENT_HEADvoid main(){FRAGMENT_MAIN_UVvec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGEgl_FragColor=color0;\n#ifdef ENCODE_OUTPUT\n#include <encodings_fragment>\n#endif\n#include <dithering_fragment>\n}".replace(jS.FRAGMENT_HEAD,e.get(jS.FRAGMENT_HEAD)).replace(jS.FRAGMENT_MAIN_UV,e.get(jS.FRAGMENT_MAIN_UV)).replace(jS.FRAGMENT_MAIN_IMAGE,e.get(jS.FRAGMENT_MAIN_IMAGE)),this.vertexShader="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEADvoid main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORTgl_Position=vec4(position.xy,1.0,1.0);}".replace(jS.VERTEX_HEAD,e.get(jS.VERTEX_HEAD)).replace(jS.VERTEX_MAIN_SUPPORT,e.get(jS.VERTEX_MAIN_SUPPORT)),this.needsUpdate=!0,this}setDefines(e){for(let t of e.entries())this.defines[t[0]]=t[1];return this.needsUpdate=!0,this}setUniforms(e){for(let t of e.entries())this.uniforms[t[0]]=t[1];return this}setExtensions(e){this.extensions={};for(let t of e)this.extensions[t]=!0;return this}get encodeOutput(){return void 0!==this.defines.ENCODE_OUTPUT}set encodeOutput(e){this.encodeOutput!==e&&(e?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(e){return this.encodeOutput}setOutputEncodingEnabled(e){this.encodeOutput=e}get time(){return this.uniforms.time.value}set time(e){this.uniforms.time.value=e}setDeltaTime(e){this.uniforms.time.value+=e}adoptCameraSettings(e){e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof Yr?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(e,t){let r=this.uniforms;r.resolution.value.set(e,t),r.texelSize.value.set(1/e,1/t),r.aspect.value=e/t}static get Section(){return jS}},VS=class extends Wr{constructor(e=!1,t=null){super({name:"LuminanceMaterial",uniforms:{inputBuffer:new eu(null),threshold:new eu(0),smoothing:new eu(1),range:new eu(null)},blending:0,depthWrite:!1,depthTest:!1,fragmentShader:"#include <common>\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\n#ifdef RANGE\nuniform vec2 range;\n#elif defined(THRESHOLD)\nuniform float threshold;uniform float smoothing;\n#endif\nvarying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=linearToRelativeLuminance(texel.rgb);\n#ifdef RANGE\nfloat low=step(range.x,l);float high=step(l,range.y);l*=low*high;\n#elif defined(THRESHOLD)\nl=smoothstep(threshold,threshold+smoothing,l);\n#endif\n#ifdef COLOR\ngl_FragColor=vec4(texel.rgb*l,l);\n#else\ngl_FragColor=vec4(l);\n#endif\n}",vertexShader:OS}),this.toneMapped=!1,this.colorOutput=e,this.luminanceRange=t}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get threshold(){return this.uniforms.threshold.value}set threshold(e){this.smoothing>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=e}getThreshold(){return this.threshold}setThreshold(e){this.threshold=e}get smoothing(){return this.uniforms.smoothing.value}set smoothing(e){this.threshold>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=e}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(e){this.smoothing=e}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(e){}get colorOutput(){return void 0!==this.defines.COLOR}set colorOutput(e){e?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(e){return this.colorOutput}setColorOutputEnabled(e){this.colorOutput=e}get useRange(){return null!==this.luminanceRange}set useRange(e){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(e){null!==e?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=e,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(e){this.luminanceRange=e}},GS=class extends Wr{constructor(e=null){super({name:"MaskMaterial",uniforms:{maskTexture:new eu(e),inputBuffer:new eu(null),strength:new eu(1)},blending:0,depthWrite:!1,depthTest:!1,fragmentShader:"#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\n#ifdef MASK_PRECISION_HIGH\nuniform mediump sampler2D maskTexture;\n#else\nuniform lowp sampler2D maskTexture;\n#endif\n#if MASK_FUNCTION != 0\nuniform float strength;\n#endif\nvarying vec2 vUv;void main(){\n#if COLOR_CHANNEL == 0\nfloat mask=texture2D(maskTexture,vUv).r;\n#elif COLOR_CHANNEL == 1\nfloat mask=texture2D(maskTexture,vUv).g;\n#elif COLOR_CHANNEL == 2\nfloat mask=texture2D(maskTexture,vUv).b;\n#else\nfloat mask=texture2D(maskTexture,vUv).a;\n#endif\n#if MASK_FUNCTION == 0\n#ifdef INVERTED\nmask=step(mask,0.0);\n#else\nmask=1.0-step(mask,0.0);\n#endif\n#else\nmask=clamp(mask*strength,0.0,1.0);\n#ifdef INVERTED\nmask=1.0-mask;\n#endif\n#endif\n#if MASK_FUNCTION == 2\ngl_FragColor=vec4(mask*texture2D(inputBuffer,vUv).rgb,mask);\n#else\ngl_FragColor=mask*texture2D(inputBuffer,vUv);\n#endif\n}",vertexShader:OS}),this.toneMapped=!1,this.setColorChannel(0),this.setMaskFunction(0)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}set maskTexture(e){this.uniforms.maskTexture.value=e,delete this.defines.MASK_PRECISION_HIGH,e.type!==L&&(this.defines.MASK_PRECISION_HIGH="1"),this.needsUpdate=!0}setMaskTexture(e){this.maskTexture=e}set colorChannel(e){this.defines.COLOR_CHANNEL=e.toFixed(0),this.needsUpdate=!0}setColorChannel(e){this.colorChannel=e}set maskFunction(e){this.defines.MASK_FUNCTION=e.toFixed(0),this.needsUpdate=!0}setMaskFunction(e){this.maskFunction=e}get inverted(){return void 0!==this.defines.INVERTED}set inverted(e){this.inverted&&!e?delete this.defines.INVERTED:e&&(this.defines.INVERTED="1"),this.needsUpdate=!0}isInverted(){return this.inverted}setInverted(e){this.inverted=e}get strength(){return this.uniforms.strength.value}set strength(e){this.uniforms.strength.value=e}getStrength(){return this.strength}setStrength(e){this.strength=e}},WS=class extends Wr{constructor(e=new ve,t=new ve){super({name:"SMAAWeightsMaterial",defines:{MAX_SEARCH_STEPS_INT:"16",MAX_SEARCH_STEPS_FLOAT:"16.0",MAX_SEARCH_STEPS_DIAG_INT:"8",MAX_SEARCH_STEPS_DIAG_FLOAT:"8.0",CORNER_ROUNDING:"25",CORNER_ROUNDING_NORM:"0.25",AREATEX_MAX_DISTANCE:"16.0",AREATEX_MAX_DISTANCE_DIAG:"20.0",AREATEX_PIXEL_SIZE:"(1.0 / vec2(160.0, 560.0))",AREATEX_SUBTEX_SIZE:"(1.0 / 7.0)",SEARCHTEX_SIZE:"vec2(66.0, 33.0)",SEARCHTEX_PACKED_SIZE:"vec2(64.0, 16.0)"},uniforms:{inputBuffer:new eu(null),searchTexture:new eu(null),areaTexture:new eu(null),resolution:new eu(t),texelSize:new eu(e)},blending:0,depthWrite:!1,depthTest:!1,fragmentShader:"#define sampleLevelZeroOffset(t, coord, offset) texture2D(t, coord + offset * texelSize)\n#if __VERSION__ < 300\n#define round(v) floor(v + 0.5)\n#endif\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nuniform lowp sampler2D areaTexture;uniform lowp sampler2D searchTexture;uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}vec2 decodeDiagBilinearAccess(in vec2 e){e.r=e.r*abs(5.0*e.r-5.0*0.75);return round(e);}vec4 decodeDiagBilinearAccess(in vec4 e){e.rb=e.rb*abs(5.0*e.rb-5.0*0.75);return round(e);}vec2 searchDiag1(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 searchDiag2(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);coord.x+=0.25*texelSize.x;vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;e=decodeDiagBilinearAccess(e);coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 areaDiag(const in vec2 dist,const in vec2 e,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE_DIAG,AREATEX_MAX_DISTANCE_DIAG)*e+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.x+=0.5;texCoord.y+=AREATEX_SUBTEX_SIZE*offset;return texture2D(areaTexture,texCoord).rg;}vec2 calculateDiagWeights(const in vec2 texCoord,const in vec2 e,const in vec4 subsampleIndices){vec2 weights=vec2(0.0);vec4 d;vec2 end;if(e.r>0.0){d.xz=searchDiag1(texCoord,vec2(-1.0,1.0),end);d.x+=float(end.y>0.9);}else{d.xz=vec2(0.0);}d.yw=searchDiag1(texCoord,vec2(1.0,-1.0),end);if(d.x+d.y>2.0){vec4 coords=vec4(-d.x+0.25,d.x,d.y,-d.y-0.25)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.xy=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).rg;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).rg;c.yxwz=decodeDiagBilinearAccess(c.xyzw);vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.z);}d.xz=searchDiag2(texCoord,vec2(-1.0,-1.0),end);if(sampleLevelZeroOffset(inputBuffer,texCoord,vec2(1,0)).r>0.0){d.yw=searchDiag2(texCoord,vec2(1.0),end);d.y+=float(end.y>0.9);}else{d.yw=vec2(0.0);}if(d.x+d.y>2.0){vec4 coords=vec4(-d.x,-d.x,d.y,d.y)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.x=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).g;c.y=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(0,-1)).r;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).gr;vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.w).gr;}return weights;}float searchLength(const in vec2 e,const in float offset){vec2 scale=SEARCHTEX_SIZE*vec2(0.5,-1.0);vec2 bias=SEARCHTEX_SIZE*vec2(offset,1.0);scale+=vec2(-1.0,1.0);bias+=vec2(0.5,-0.5);scale*=1.0/SEARCHTEX_PACKED_SIZE;bias*=1.0/SEARCHTEX_PACKED_SIZE;return texture2D(searchTexture,scale*e+bias).r;}float searchXLeft(in vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x>end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(-2.0,0.0)*texelSize+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.0)+3.25;return texelSize.x*offset+texCoord.x;}float searchXRight(vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x<end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(2.0,0.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.5)+3.25;return-texelSize.x*offset+texCoord.x;}float searchYUp(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.y>end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=-vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.0)+3.25;return texelSize.y*offset+texCoord.y;}float searchYDown(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;i++){if(!(texCoord.y<end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.5)+3.25;return-texelSize.y*offset+texCoord.y;}vec2 area(const in vec2 dist,const in float e1,const in float e2,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE)*round(4.0*vec2(e1,e2))+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.y=AREATEX_SUBTEX_SIZE*offset+texCoord.y;return texture2D(areaTexture,texCoord).rg;}void detectHorizontalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){\n#if !defined(DISABLE_CORNER_DETECTION)\nvec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,1)).r;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).r;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,-2)).r;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,-2)).r;weights*=clamp(factor,0.0,1.0);\n#endif\n}void detectVerticalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){\n#if !defined(DISABLE_CORNER_DETECTION)\nvec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(1,0)).g;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).g;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(-2,0)).g;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(-2,1)).g;weights*=clamp(factor,0.0,1.0);\n#endif\n}void main(){vec4 weights=vec4(0.0);vec4 subsampleIndices=vec4(0.0);vec2 e=texture2D(inputBuffer,vUv).rg;if(e.g>0.0){\n#if !defined(DISABLE_DIAG_DETECTION)\nweights.rg=calculateDiagWeights(vUv,e,subsampleIndices);if(weights.r==-weights.g){\n#endif\nvec2 d;vec3 coords;coords.x=searchXLeft(vOffset[0].xy,vOffset[2].x);coords.y=vOffset[1].y;d.x=coords.x;float e1=texture2D(inputBuffer,coords.xy).r;coords.z=searchXRight(vOffset[0].zw,vOffset[2].y);d.y=coords.z;d=round(resolution.xx*d+-vPixCoord.xx);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.zy,vec2(1,0)).r;weights.rg=area(sqrtD,e1,e2,subsampleIndices.y);coords.y=vUv.y;detectHorizontalCornerPattern(weights.rg,coords.xyzy,d);\n#if !defined(DISABLE_DIAG_DETECTION)\n}else{e.r=0.0;}\n#endif\n}if(e.r>0.0){vec2 d;vec3 coords;coords.y=searchYUp(vOffset[1].xy,vOffset[2].z);coords.x=vOffset[0].x;d.x=coords.y;float e1=texture2D(inputBuffer,coords.xy).g;coords.z=searchYDown(vOffset[1].zw,vOffset[2].w);d.y=coords.z;d=round(resolution.yy*d-vPixCoord.yy);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.xz,vec2(0,1)).g;weights.ba=area(sqrtD,e1,e2,subsampleIndices.x);coords.x=vUv.x;detectVerticalCornerPattern(weights.ba,coords.xyxz,d);}gl_FragColor=weights;}",vertexShader:"uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void main(){vUv=position.xy*0.5+0.5;vPixCoord=vUv*resolution;vOffset[0]=vUv.xyxy+texelSize.xyxy*vec4(-0.25,-0.125,1.25,-0.125);vOffset[1]=vUv.xyxy+texelSize.xyxy*vec4(-0.125,-0.25,-0.125,1.25);vOffset[2]=vec4(vOffset[0].xz,vOffset[1].yw)+vec4(-2.0,2.0,-2.0,2.0)*texelSize.xxyy*MAX_SEARCH_STEPS_FLOAT;gl_Position=vec4(position.xy,1.0,1.0);}"}),this.toneMapped=!1}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get searchTexture(){return this.uniforms.searchTexture.value}set searchTexture(e){this.uniforms.searchTexture.value=e}get areaTexture(){return this.uniforms.areaTexture.value}set areaTexture(e){this.uniforms.areaTexture.value=e}setLookupTextures(e,t){this.searchTexture=e,this.areaTexture=t}get orthogonalSearchSteps(){return Number(this.defines.MAX_SEARCH_STEPS_INT)}set orthogonalSearchSteps(e){let t=Math.min(Math.max(e,0),112);this.defines.MAX_SEARCH_STEPS_INT=t.toFixed("0"),this.defines.MAX_SEARCH_STEPS_FLOAT=t.toFixed("1"),this.needsUpdate=!0}setOrthogonalSearchSteps(e){this.orthogonalSearchSteps=e}get diagonalSearchSteps(){return Number(this.defines.MAX_SEARCH_STEPS_DIAG_INT)}set diagonalSearchSteps(e){let t=Math.min(Math.max(e,0),20);this.defines.MAX_SEARCH_STEPS_DIAG_INT=t.toFixed("0"),this.defines.MAX_SEARCH_STEPS_DIAG_FLOAT=t.toFixed("1"),this.needsUpdate=!0}setDiagonalSearchSteps(e){this.diagonalSearchSteps=e}get diagonalDetection(){return void 0===this.defines.DISABLE_DIAG_DETECTION}set diagonalDetection(e){e?delete this.defines.DISABLE_DIAG_DETECTION:this.defines.DISABLE_DIAG_DETECTION="1",this.needsUpdate=!0}isDiagonalDetectionEnabled(){return this.diagonalDetection}setDiagonalDetectionEnabled(e){this.diagonalDetection=e}get cornerRounding(){return Number(this.defines.CORNER_ROUNDING)}set cornerRounding(e){let t=Math.min(Math.max(e,0),100);this.defines.CORNER_ROUNDING=t.toFixed("4"),this.defines.CORNER_ROUNDING_NORM=(t/100).toFixed("4"),this.needsUpdate=!0}setCornerRounding(e){this.cornerRounding=e}get cornerDetection(){return void 0===this.defines.DISABLE_CORNER_DETECTION}set cornerDetection(e){e?delete this.defines.DISABLE_CORNER_DETECTION:this.defines.DISABLE_CORNER_DETECTION="1",this.needsUpdate=!0}isCornerRoundingEnabled(){return this.cornerDetection}setCornerRoundingEnabled(e){this.cornerDetection=e}setSize(e,t){let r=this.uniforms;r.texelSize.value.set(1/e,1/t),r.resolution.value.set(e,t)}},qS=new qr,YS=null,XS=class{constructor(e="Pass",t=new Na,r=qS){this.name=e,this.renderer=null,this.scene=t,this.camera=r,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(e){if(this.rtt===e){let t=this.getFullscreenMaterial();null!==t&&(t.needsUpdate=!0),this.rtt=!e}}setRenderer(e){this.renderer=e}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}get fullscreenMaterial(){return null!==this.screen?this.screen.material:null}set fullscreenMaterial(e){let t=this.screen;null!==t?t.material=e:(t=new Fr(function(){if(null===YS){let e=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),t=new Float32Array([0,0,2,0,0,2]);void 0!==(YS=new wr).setAttribute?(YS.setAttribute("position",new cr(e,3)),YS.setAttribute("uv",new cr(t,2))):(YS.addAttribute("position",new cr(e,3)),YS.addAttribute("uv",new cr(t,2)))}return YS}(),e),t.frustumCulled=!1,null===this.scene&&(this.scene=new Na),this.scene.add(t),this.screen=t)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(e){this.fullscreenMaterial=e}getDepthTexture(){return null}setDepthTexture(e,t=Z){}render(e,t,r,n,i){throw new Error("Render method not implemented!")}setSize(e,t){}initialize(e,t,r){}dispose(){for(let e of Object.keys(this)){let t=this[e];if(null!==t&&"function"==typeof t.dispose){if(t instanceof Na||t===this.renderer)continue;this[e].dispose()}}}},QS=class extends XS{constructor(e,t=!0){super("CopyPass"),this.fullscreenMaterial=new FS,this.needsSwap=!1,this.renderTarget=e,void 0===e&&(this.renderTarget=new je(1,1,{minFilter:T,magFilter:T,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=t}get resize(){return this.autoResize}set resize(e){this.autoResize=e}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(e){this.autoResize=e}render(e,t,r,n,i){this.fullscreenMaterial.inputBuffer=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){this.autoResize&&this.renderTarget.setSize(e,t)}initialize(e,t,r){void 0!==r&&(this.renderTarget.texture.type=r,r!==L?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":e.outputEncoding===J&&(this.renderTarget.texture.encoding=J))}},JS=class extends XS{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(e,t,r,n,i){let a=e.state.buffers.stencil;a.setLocked(!1),a.setTest(!1)}},ZS=new Oe,KS=class extends XS{constructor(e=!0,t=!0,r=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=e,this.depth=t,this.stencil=r,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(e,t,r){this.color=e,this.depth=t,this.stencil=r}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(e){this.overrideClearColor=e}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(e){this.overrideClearAlpha=e}render(e,t,r,n,i){let a=this.overrideClearColor,o=this.overrideClearAlpha,s=e.getClearAlpha(),l=null!==a,u=o>=0;l?(ZS.copy(e.getClearColor(ZS)),e.setClearColor(a,u?o:s)):u&&e.setClearAlpha(o),e.setRenderTarget(this.renderToScreen?null:t),e.clear(this.color,this.depth,this.stencil),l?e.setClearColor(ZS,s):u&&e.setClearAlpha(s)}},$S=-1,e_=class extends ae{constructor(e,t=-1,r=-1,n=1){super(),this.resizable=e,this.base=new ve(1,1),this.preferred=new ve(t,r),this.target=this.preferred,this.s=n}get width(){let e,{base:t,preferred:r,scale:n}=this;return e=r.width!==$S?r.width:r.height!==$S?Math.round(r.height*(t.width/Math.max(t.height,1))):Math.round(t.width*n),e}set width(e){this.preferredWidth=e}get height(){let e,{base:t,preferred:r,scale:n}=this;return e=r.height!==$S?r.height:r.width!==$S?Math.round(r.width/Math.max(t.width/Math.max(t.height,1),1)):Math.round(t.height*n),e}set height(e){this.preferredHeight=e}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(e){this.s!==e&&(this.s=e,this.preferred.setScalar($S),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getScale(){return this.scale}setScale(e){this.scale=e}get baseWidth(){return this.base.width}set baseWidth(e){this.base.width!==e&&(this.base.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getBaseWidth(){return this.base.width}setBaseWidth(e){this.base.width!==e&&(this.base.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}get baseHeight(){return this.base.height}set baseHeight(e){this.base.height!==e&&(this.base.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(e){this.baseHeight=e}setBaseSize(e,t){(this.base.width!==e||this.base.height!==t)&&(this.base.set(e,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}get preferredWidth(){return this.preferred.width}set preferredWidth(e){this.preferred.width!==e&&(this.preferred.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(e){this.preferredWidth=e}get preferredHeight(){return this.preferred.height}set preferredHeight(e){this.preferred.height!==e&&(this.preferred.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(e){this.preferredHeight=e}setPreferredSize(e,t){(this.preferred.width!==e||this.preferred.height!==t)&&(this.preferred.set(e,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}copy(e){this.base.set(e.getBaseWidth(),e.getBaseHeight()),this.preferred.set(e.getPreferredWidth(),e.getPreferredHeight()),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height)}static get AUTO_SIZE(){return $S}},t_=!1,r_=class{constructor(e=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(e),this.meshCount=0,this.replaceMaterial=e=>{if(e.isMesh){let t;if(e.material.flatShading)switch(e.material.side){case 2:t=this.materialsFlatShadedDoubleSide;break;case 1:t=this.materialsFlatShadedBackSide;break;default:t=this.materialsFlatShaded}else switch(e.material.side){case 2:t=this.materialsDoubleSide;break;case 1:t=this.materialsBackSide;break;default:t=this.materials}this.originalMaterials.set(e,e.material),e.isSkinnedMesh?e.material=t[2]:e.isInstancedMesh?e.material=t[1]:e.material=t[0],++this.meshCount}}}setMaterial(e){if(this.disposeMaterials(),this.material=e,null!==e){let t=this.materials=[e.clone(),e.clone(),e.clone()];for(let r of t)r.uniforms=Object.assign({},e.uniforms),r.side=0;t[2].skinning=!0,this.materialsBackSide=t.map((t=>{let r=t.clone();return r.uniforms=Object.assign({},e.uniforms),r.side=1,r})),this.materialsDoubleSide=t.map((t=>{let r=t.clone();return r.uniforms=Object.assign({},e.uniforms),r.side=2,r})),this.materialsFlatShaded=t.map((t=>{let r=t.clone();return r.uniforms=Object.assign({},e.uniforms),r.flatShading=!0,r})),this.materialsFlatShadedBackSide=t.map((t=>{let r=t.clone();return r.uniforms=Object.assign({},e.uniforms),r.flatShading=!0,r.side=1,r})),this.materialsFlatShadedDoubleSide=t.map((t=>{let r=t.clone();return r.uniforms=Object.assign({},e.uniforms),r.flatShading=!0,r.side=2,r}))}}render(e,t,r){let n=e.shadowMap.enabled;if(e.shadowMap.enabled=!1,t_){let n=this.originalMaterials;this.meshCount=0,t.traverse(this.replaceMaterial),e.render(t,r);for(let e of n)e[0].material=e[1];this.meshCount!==n.size&&n.clear()}else{let n=t.overrideMaterial;t.overrideMaterial=this.material,e.render(t,r),t.overrideMaterial=n}e.shadowMap.enabled=n}disposeMaterials(){if(null!==this.material){let e=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(let t of e)t.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return t_}static set workaroundEnabled(e){t_=e}},n_=class extends XS{constructor(e,t,r=null){super("RenderPass",e,t),this.needsSwap=!1,this.clearPass=new KS,this.overrideMaterialManager=null===r?null:new r_(r),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}get renderToScreen(){return super.renderToScreen}set renderToScreen(e){super.renderToScreen=e,this.clearPass.renderToScreen=e}get overrideMaterial(){let e=this.overrideMaterialManager;return null!==e?e.material:null}set overrideMaterial(e){let t=this.overrideMaterialManager;null!==e?null!==t?t.setMaterial(e):this.overrideMaterialManager=new r_(e):null!==t&&(t.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(e){this.overrideMaterial=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getSelection(){return this.selection}setSelection(e){this.selection=e}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(e){this.ignoreBackground=e}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(e){this.skipShadowMapUpdate=e}getClearPass(){return this.clearPass}render(e,t,r,n,i){let a=this.scene,o=this.camera,s=this.selection,l=o.layers.mask,u=a.background,c=e.shadowMap.autoUpdate,h=this.renderToScreen?null:t;null!==s&&o.layers.set(s.getLayer()),this.skipShadowMapUpdate&&(e.shadowMap.autoUpdate=!1),(this.ignoreBackground||null!==this.clearPass.overrideClearColor)&&(a.background=null),this.clearPass.enabled&&this.clearPass.render(e,t),e.setRenderTarget(h),null!==this.overrideMaterialManager?this.overrideMaterialManager.render(e,a,o):e.render(a,o),o.layers.mask=l,a.background=u,e.shadowMap.autoUpdate=c}},i_=(new Float32Array([255/256/256**3,255/256/65536,255/256/256,255/256]),0),a_=13,o_=new Map([[i_,null],[1,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x+y,1.0)*opacity+x*(1.0-opacity);}"],[2,"vec3 blend(const in vec3 x,const in vec3 y,const in float opacity){return y*opacity+x*(1.0-opacity);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){float a=min(y.a,opacity);return vec4(blend(x.rgb,y.rgb,a),max(x.a,a));}"],[3,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y)*0.5*opacity+x*(1.0-opacity);}"],[4,"float blend(const in float x,const in float y){return(y==0.0)? y : max(1.0-(1.0-x)/y,0.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}"],[5,"float blend(const in float x,const in float y){return(y==1.0)? y : min(x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}"],[6,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x,y)*opacity+x*(1.0-opacity);}"],[7,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return abs(x-y)*opacity+x*(1.0-opacity);}"],[8,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y-2.0*x*y)*opacity+x*(1.0-opacity);}"],[9,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x,y)*opacity+x*(1.0-opacity);}"],[10,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return x*y*opacity+x*(1.0-opacity);}"],[11,"float blend(const in float x,const in float y){return(y>0.0)? min(x/y,1.0): 1.0;}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}"],[12,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-abs(1.0-x-y))*opacity+x*(1.0-opacity);}"],[a_,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y*opacity+x*(1.0-opacity);}"],[14,"float blend(const in float x,const in float y){return(x<0.5)?(2.0*x*y):(1.0-2.0*(1.0-x)*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}"],[15,"float blend(const in float x,const in float y){return(y==1.0)? y : min(x*x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}"],[16,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-(1.0-x)*(1.0-y))*opacity+x*(1.0-opacity);}"],[17,"float blend(const in float x,const in float y){return(y<0.5)?(2.0*x*y+x*x*(1.0-2.0*y)):(sqrt(x)*(2.0*y-1.0)+2.0*x*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}"],[18,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x+y-1.0,0.0)*opacity+x*(1.0-opacity);}"]]),s_=class extends ae{constructor(e,t=1){super(),this.f=e,this.opacity=new eu(t)}getOpacity(){return this.opacity.value}setOpacity(e){this.opacity.value=e}get blendFunction(){return this.f}set blendFunction(e){this.f=e,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(e){this.blendFunction=e}getShaderCode(){return o_.get(this.blendFunction)}},l_=class extends ae{constructor(e,t,{attributes:r=0,blendFunction:n=16,defines:i=new Map,uniforms:a=new Map,extensions:o=null,vertexShader:s=null}={}){super(),this.name=e,this.renderer=null,this.attributes=r,this.fragmentShader=t,this.vertexShader=s,this.defines=i,this.uniforms=a,this.extensions=o,this.blendMode=new s_(n),this.blendMode.addEventListener("change",(e=>this.setChanged()))}getName(){return this.name}setRenderer(e){this.renderer=e}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(e){this.attributes=e,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(e){this.fragmentShader=e,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(e){this.vertexShader=e,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(e,t=Z){}update(e,t,r){}setSize(e,t){}initialize(e,t,r){}dispose(){for(let e of Object.keys(this)){let t=this[e];if(null!==t&&"function"==typeof t.dispose){if(t instanceof Na||t===this.renderer)continue;this[e].dispose()}}}};function u_(e,t,r){for(let n of t){let t="$1"+e+n.charAt(0).toUpperCase()+n.slice(1),i=new RegExp("([^\\.])(\\b"+n+"\\b)","g");for(let e of r.entries())null!==e[1]&&r.set(e[0],e[1].replace(i,t))}}function c_(e,t,r,n,i,a,o){let s=new Map([["fragment",t.getFragmentShader()],["vertex",t.getVertexShader()]]),l=void 0!==s.get("fragment")&&/mainImage/.test(s.get("fragment")),u=void 0!==s.get("fragment")&&/mainUv/.test(s.get("fragment")),c=[],h=[],d=!1,p=!1;if(void 0===s.get("fragment"))console.error("Missing fragment shader",t);else if(u&&0!=(2&o))console.error("Effects that transform UV coordinates are incompatible with convolution effects",t);else if(l||u){let f=/(?:\w+\s+(\w+)\([\w\s,]*\)\s*{[^}]+})/g,m=HS.Section;if(u){let t=`\t${e}MainUv(UV);\n`;r.set(m.FRAGMENT_MAIN_UV,r.get(m.FRAGMENT_MAIN_UV)+t),d=!0}if(null!==s.get("vertex")&&/mainSupport/.test(s.get("vertex"))){let t=`\t${e}MainSupport(`;t+=/mainSupport *\([\w\s]*?uv\s*?\)/.test(s.get("vertex"))?"vUv);\n":");\n",r.set(m.VERTEX_MAIN_SUPPORT,r.get(m.VERTEX_MAIN_SUPPORT)+t),c=c.concat([...s.get("vertex").matchAll(/(?:varying\s+\w+\s+(\w*))/g)].map((e=>e[1]))),h=h.concat(c).concat([...s.get("vertex").matchAll(f)].map((e=>e[1])))}h=h.concat([...s.get("fragment").matchAll(f)].map((e=>e[1]))),h=h.concat([...t.defines.keys()].map((e=>e.replace(/\([\w\s,]*\)/g,"")))),h=h.concat([...t.uniforms.keys()]),t.uniforms.forEach(((t,r)=>a.set(e+r.charAt(0).toUpperCase()+r.slice(1),t))),t.defines.forEach(((t,r)=>i.set(e+r.charAt(0).toUpperCase()+r.slice(1),t))),u_(e,h,i),u_(e,h,s);let g=t.blendMode;if(n.set(g.blendFunction,g),l){let t=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/,n=`${e}MainImage(color0, UV, `;0!=(1&o)&&t.test(s.get("fragment"))&&(n+="depth, ",p=!0),n+="color1);\n\t";let i=e+"BlendOpacity";a.set(i,g.opacity),n+=`color0 = blend${g.blendFunction}(color0, color1, ${i});\n\n\t`,r.set(m.FRAGMENT_MAIN_IMAGE,r.get(m.FRAGMENT_MAIN_IMAGE)+n),n=`uniform float ${i};\n\n`,r.set(m.FRAGMENT_HEAD,r.get(m.FRAGMENT_HEAD)+n)}r.set(m.FRAGMENT_HEAD,r.get(m.FRAGMENT_HEAD)+s.get("fragment")+"\n"),null!==s.get("vertex")&&r.set(m.VERTEX_HEAD,r.get(m.VERTEX_HEAD)+s.get("vertex")+"\n")}else console.error("The fragment shader contains neither a mainImage nor a mainUv function",t);return{varyings:c,transformedUv:d,readDepth:p}}var h_=class extends XS{constructor(e,...t){super("EffectPass"),this.fullscreenMaterial=new HS(null,null,null,e),this.effects=t.sort(((e,t)=>t.attributes-e.attributes)),this.skipRendering=!1,this.uniformCount=0,this.varyingCount=0,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(e){this.fullscreenMaterial.encodeOutput=e}get dithering(){return this.fullscreenMaterial.dithering}set dithering(e){let t=this.fullscreenMaterial;t.dithering=e,t.needsUpdate=!0}verifyResources(){let e=this.renderer.capabilities,t=Math.min(e.maxFragmentUniforms,e.maxVertexUniforms);this.uniformCount>t&&console.warn("The current rendering context doesn't support more than "+t+" uniforms, but "+this.uniformCount+" were defined"),t=e.maxVaryings,this.varyingCount>t&&console.warn("The current rendering context doesn't support more than "+t+" varyings, but "+this.varyingCount+" were defined")}updateMaterial(){let e=HS.Section,t=new Map([[e.FRAGMENT_HEAD,""],[e.FRAGMENT_MAIN_UV,""],[e.FRAGMENT_MAIN_IMAGE,""],[e.VERTEX_HEAD,""],[e.VERTEX_MAIN_SUPPORT,""]]),r=new Map,n=new Map,i=new Map,a=new Set,o=0,s=0,l=0,u=!1,c=!1;for(let e of this.effects)if(e.blendMode.blendFunction===i_)l|=1&e.getAttributes();else if(0!=(l&e.getAttributes()&2))console.error("Convolution effects cannot be merged",e);else{l|=e.getAttributes();let h=c_("e"+o++,e,t,r,n,i,l);if(s+=h.varyings.length,u=u||h.transformedUv,c=c||h.readDepth,null!==e.extensions)for(let t of e.extensions)a.add(t)}let h=/\bblend\b/g;for(let n of r.values()){let r=n.getShaderCode().replace(h,`blend${n.blendFunction}`);t.set(e.FRAGMENT_HEAD,t.get(e.FRAGMENT_HEAD)+r+"\n")}if(0!=(1&l)){if(c){let r="float depth = readDepth(UV);\n\n\t";t.set(e.FRAGMENT_MAIN_IMAGE,r+t.get(e.FRAGMENT_MAIN_IMAGE))}this.needsDepthTexture=null===this.getDepthTexture()}else this.needsDepthTexture=!1;if(u){let r="vec2 transformedUv = vUv;\n";t.set(e.FRAGMENT_MAIN_UV,r+t.get(e.FRAGMENT_MAIN_UV)),n.set("UV","transformedUv")}else n.set("UV","vUv");t.forEach(((e,t,r)=>r.set(t,e.trim().replace(/^#/,"\n#")))),this.uniformCount=i.size,this.varyingCount=s,this.skipRendering=0===o,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderParts(t).setExtensions(a).setUniforms(i).setDefines(n)}recompile(){this.updateMaterial(),this.verifyResources()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(e,t=Z){this.fullscreenMaterial.depthBuffer=e,this.fullscreenMaterial.depthPacking=t;for(let r of this.effects)r.setDepthTexture(e,t)}render(e,t,r,n,i){for(let r of this.effects)r.update(e,t,n);if(!this.skipRendering||this.renderToScreen){let i=this.fullscreenMaterial;i.inputBuffer=t.texture,i.time+=n,e.setRenderTarget(this.renderToScreen?null:r),e.render(this.scene,this.camera)}}setSize(e,t){this.fullscreenMaterial.setSize(e,t);for(let r of this.effects)r.setSize(e,t)}initialize(e,t,r){this.renderer=e;for(let n of this.effects)n.initialize(e,t,r),n.addEventListener("change",(e=>this.handleEvent(e)));this.updateMaterial(),this.verifyResources(),void 0!==r&&r!==L&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(let e of this.effects)e.dispose()}handleEvent(e){"change"===e.type&&this.recompile()}},d_=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],p_=class extends XS{constructor({resolutionScale:e=.5,width:t=e_.AUTO_SIZE,height:r=e_.AUTO_SIZE,kernelSize:n=y_.LARGE}={}){super("KawaseBlurPass"),this.renderTargetA=new je(1,1,{minFilter:T,magFilter:T,stencilBuffer:!1,depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";let i=this.resolution=new e_(this,t,r,e);i.addEventListener("change",(e=>this.setSize(i.baseWidth,i.baseHeight))),this.blurMaterial=new NS,this.ditheredBlurMaterial=new NS,this.ditheredBlurMaterial.uniforms.scale=this.blurMaterial.uniforms.scale,this.ditheredBlurMaterial.dithering=!0,this.dithering=!1,this.kernelSize=n}getResolution(){return this.resolution}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get scale(){return this.blurMaterial.scale}set scale(e){this.blurMaterial.scale=e}getScale(){return this.blurMaterial.scale}setScale(e){this.blurMaterial.scale=e}getKernelSize(){return this.kernelSize}setKernelSize(e){this.kernelSize=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,t,r,n,i){let a,o,s=this.scene,l=this.camera,u=this.renderTargetA,c=this.renderTargetB,h=d_[this.kernelSize],d=this.blurMaterial,p=t;for(this.fullscreenMaterial=d,a=0,o=h.length-1;a<o;++a){let t=0==(1&a)?u:c;d.kernel=h[a],d.inputBuffer=p.texture,e.setRenderTarget(t),e.render(s,l),p=t}this.dithering&&(d=this.ditheredBlurMaterial,this.fullscreenMaterial=d),d.kernel=h[a],d.inputBuffer=p.texture,e.setRenderTarget(this.renderToScreen?null:r),e.render(s,l)}setSize(e,t){let r=this.resolution;r.setBaseSize(e,t);let n=r.width,i=r.height;this.renderTargetA.setSize(n,i),this.renderTargetB.setSize(n,i),this.blurMaterial.setSize(n,i),this.ditheredBlurMaterial.setSize(n,i)}initialize(e,t,r){void 0!==r&&(this.renderTargetA.texture.type=r,this.renderTargetB.texture.type=r,r!==L?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.ditheredBlurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):e.outputEncoding===J&&(this.renderTargetA.texture.encoding=J,this.renderTargetB.texture.encoding=J))}static get AUTO_SIZE(){return e_.AUTO_SIZE}},f_=class extends XS{constructor({width:e=e_.AUTO_SIZE,height:t=e_.AUTO_SIZE,renderTarget:r,luminanceRange:n,colorOutput:i}={}){super("LuminancePass"),this.fullscreenMaterial=new VS(i,n),this.needsSwap=!1,this.renderTarget=r,void 0===this.renderTarget&&(this.renderTarget=new je(1,1,{minFilter:T,magFilter:T,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target",this.renderTarget.texture.generateMipmaps=!1);let a=this.resolution=new e_(this,e,t);a.addEventListener("change",(e=>this.setSize(a.baseWidth,a.baseHeight)))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(e,t,r,n,i){this.fullscreenMaterial.inputBuffer=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){let r=this.resolution;r.setBaseSize(e,t),this.renderTarget.setSize(r.width,r.height)}initialize(e,t,r){void 0!==r&&r!==L&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},m_=class extends XS{constructor(e,t){super("MaskPass",e,t),this.needsSwap=!1,this.clearPass=new KS(!1,!1,!0),this.inverse=!1}get inverted(){return this.inverse}set inverted(e){this.inverse=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(e){this.inverted=e}render(e,t,r,n,i){let a=e.getContext(),o=e.state.buffers,s=this.scene,l=this.camera,u=this.clearPass,c=this.inverted?0:1,h=1-c;o.color.setMask(!1),o.depth.setMask(!1),o.color.setLocked(!0),o.depth.setLocked(!0),o.stencil.setTest(!0),o.stencil.setOp(a.REPLACE,a.REPLACE,a.REPLACE),o.stencil.setFunc(a.ALWAYS,c,4294967295),o.stencil.setClear(h),o.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?u.render(e,null):(u.render(e,t),u.render(e,r))),this.renderToScreen?(e.setRenderTarget(null),e.render(s,l)):(e.setRenderTarget(t),e.render(s,l),e.setRenderTarget(r),e.render(s,l)),o.color.setLocked(!1),o.depth.setLocked(!1),o.stencil.setLocked(!1),o.stencil.setFunc(a.EQUAL,1,4294967295),o.stencil.setOp(a.KEEP,a.KEEP,a.KEEP),o.stencil.setLocked(!0)}},g_=class extends XS{constructor(e,t="inputBuffer"){super("ShaderPass"),this.fullscreenMaterial=e,this.inputBufferUniform=null,this.setInput(t)}setInput(e){if(this.inputBufferUniform=null,null!==this.fullscreenMaterial){let t=this.fullscreenMaterial.uniforms;void 0!==t&&void 0!==t[e]&&(this.inputBufferUniform=t[e])}}render(e,t,r,n,i){null!==this.inputBufferUniform&&null!==t&&(this.inputBufferUniform.value=t.texture),e.setRenderTarget(this.renderToScreen?null:r),e.render(this.scene,this.camera)}initialize(e,t,r){void 0!==r&&r!==L&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},v_=.001,y_={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},x_=class extends l_{constructor({blendFunction:e=16,luminanceThreshold:t=.9,luminanceSmoothing:r=.025,resolutionScale:n=.5,intensity:i=1,width:a=e_.AUTO_SIZE,height:o=e_.AUTO_SIZE,kernelSize:s=y_.LARGE}={}){super("BloomEffect","#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D map;\n#else\nuniform lowp sampler2D map;\n#endif\nuniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=clamp(texture2D(map,uv)*intensity,0.0,1.0);}",{blendFunction:e,uniforms:new Map([["map",new eu(null)],["intensity",new eu(i)]])}),this.renderTarget=new je(1,1,{minFilter:T,magFilter:T,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.renderTarget.texture.generateMipmaps=!1,this.uniforms.get("map").value=this.renderTarget.texture,this.luminancePass=new f_({renderTarget:this.renderTarget,colorOutput:!0}),this.luminanceMaterial.threshold=t,this.luminanceMaterial.smoothingFactor=r,this.blurPass=new p_({resolutionScale:n,width:a,height:o,kernelSize:s});let l=this.blurPass.getResolution();l.addEventListener("change",(e=>this.setSize(l.baseWidth,l.baseHeight)))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}get resolution(){return this.blurPass.resolution}getResolution(){return this.blurPass.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get dithering(){return this.blurPass.dithering}set dithering(e){this.blurPass.dithering=e}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(e){this.blurPass.kernelSize=e}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(e){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(e){this.uniforms.get("intensity").value=e}getIntensity(){return this.intensity}setIntensity(e){this.intensity=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}update(e,t,r){let n=this.renderTarget;this.luminancePass.enabled?(this.luminancePass.render(e,t,n),this.blurPass.render(e,n,n)):this.blurPass.render(e,t,n)}setSize(e,t){let r=this.resolution;r.setBaseSize(e,t),this.renderTarget.setSize(r.width,r.height),this.luminancePass.resolution.copy(r)}initialize(e,t,r){this.blurPass.initialize(e,t,r),void 0!==r&&(this.renderTarget.texture.type=r,e.outputEncoding===J&&(this.renderTarget.texture.encoding=J))}},b_=class extends l_{constructor({blendFunction:e=13,brightness:t=0,contrast:r=0}={}){super("BrightnessContrastEffect","uniform float brightness;uniform float contrast;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=inputColor.rgb+vec3(brightness-0.5);if(contrast>0.0){color/=vec3(1.0-contrast);}else{color*=vec3(1.0+contrast);}outputColor=vec4(min(color+vec3(0.5),1.0),inputColor.a);}",{blendFunction:e,uniforms:new Map([["brightness",new eu(t)],["contrast",new eu(r)]])})}get brightness(){return this.uniforms.get("brightness").value}set brightness(e){this.uniforms.get("brightness").value=e}getBrightness(e){return this.brightness}setBrightness(e){this.brightness=e}get contrast(){return this.uniforms.get("contrast").value}set contrast(e){this.uniforms.get("contrast").value=e}getContrast(e){return this.contrast}setContrast(e){this.contrast=e}},w_=class extends l_{constructor(e=13){super("ColorAverageEffect","void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=vec4(vec3(average(inputColor.rgb)),inputColor.a);}",{blendFunction:e})}},S_=class extends l_{constructor({blendFunction:e=13,offset:t=new ve(.001,5e-4)}={}){super("ChromaticAberrationEffect","varying vec2 vUvR;varying vec2 vUvB;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 ra=texture2D(inputBuffer,vUvR).ra;vec2 ba=texture2D(inputBuffer,vUvB).ba;outputColor=vec4(ra.x,inputColor.g,ba.x,max(max(ra.y,ba.y),inputColor.a));}",{vertexShader:"uniform vec2 offset;varying vec2 vUvR;varying vec2 vUvB;void mainSupport(const in vec2 uv){vec2 shift=offset*vec2(1.0,aspect);vUvR=uv+shift;vUvB=uv-shift;}",blendFunction:e,attributes:2,uniforms:new Map([["offset",new eu(t)]])})}get offset(){return this.uniforms.get("offset").value}set offset(e){this.uniforms.get("offset").value=e}getOffset(){return this.offset}setOffset(e){this.offset=e}},__=class extends l_{constructor(e,{blendFunction:t=13,worldFocusDistance:r,worldFocusRange:n,focusDistance:i=0,focalLength:a=.1,focusRange:o=a,bokehScale:s=1,width:l=e_.AUTO_SIZE,height:u=e_.AUTO_SIZE}={}){super("DepthOfFieldEffect","#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D nearColorBuffer;uniform mediump sampler2D farColorBuffer;\n#else\nuniform lowp sampler2D nearColorBuffer;uniform lowp sampler2D farColorBuffer;\n#endif\nuniform lowp sampler2D nearCoCBuffer;uniform float scale;void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){vec4 colorNear=texture2D(nearColorBuffer,uv);vec4 colorFar=texture2D(farColorBuffer,uv);float CoCNear=texture2D(nearCoCBuffer,uv).r;CoCNear=min(CoCNear*scale,1.0);vec4 result=inputColor*(1.0-colorFar.a)+colorFar;result=mix(result,colorNear,CoCNear);outputColor=result;}",{blendFunction:t,attributes:1,uniforms:new Map([["nearColorBuffer",new eu(null)],["farColorBuffer",new eu(null)],["nearCoCBuffer",new eu(null)],["scale",new eu(1)]])}),this.camera=e,this.renderTarget=new je(1,1,{minFilter:T,magFilter:T,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="DoF.Intermediate",this.renderTarget.texture.generateMipmaps=!1,this.renderTargetMasked=this.renderTarget.clone(),this.renderTargetMasked.texture.name="DoF.Masked.Far",this.renderTargetNear=this.renderTarget.clone(),this.renderTargetNear.texture.name="DoF.Bokeh.Near",this.uniforms.get("nearColorBuffer").value=this.renderTargetNear.texture,this.renderTargetFar=this.renderTarget.clone(),this.renderTargetFar.texture.name="DoF.Bokeh.Far",this.uniforms.get("farColorBuffer").value=this.renderTargetFar.texture,this.renderTargetCoC=this.renderTarget.clone(),this.renderTargetCoC.texture.name="DoF.CoC",this.renderTargetCoCBlurred=this.renderTargetCoC.clone(),this.renderTargetCoCBlurred.texture.name="DoF.CoC.Blurred",this.uniforms.get("nearCoCBuffer").value=this.renderTargetCoCBlurred.texture,this.cocPass=new g_(new zS(e));let c=this.cocMaterial;c.focusDistance=i,c.focusRange=o,void 0!==r&&(c.worldFocusDistance=r),void 0!==n&&(c.worldFocusRange=n),this.blurPass=new p_({kernelSize:y_.MEDIUM,width:l,height:u});let h=this.blurPass.getResolution();h.addEventListener("change",(e=>this.setSize(h.getBaseWidth(),h.getBaseHeight()))),this.maskPass=new g_(new GS(this.renderTargetCoC.texture));let d=this.maskPass.fullscreenMaterial;d.maskFunction=1,d.colorChannel=1,this.bokehNearBasePass=new g_(new kS(!1,!0)),this.bokehNearBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehNearFillPass=new g_(new kS(!0,!0)),this.bokehNearFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehFarBasePass=new g_(new kS(!1,!1)),this.bokehFarBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.bokehFarFillPass=new g_(new kS(!0,!1)),this.bokehFarFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.target=null,this.bokehScale=s}get cocTexture(){return this.renderTargetCoC.texture}get cocMaterial(){return this.cocPass.fullscreenMaterial}get circleOfConfusionMaterial(){return this.cocMaterial}getCircleOfConfusionMaterial(){return this.circleOfConfusionMaterial}getBlurPass(){return this.blurPass}get resolution(){return this.blurPass.getResolution()}getResolution(){return this.blurPass.getResolution()}get bokehScale(){return this.uniforms.get("scale").value}set bokehScale(e){let t=[this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass];for(let r of t)r.fullscreenMaterial.setScale(e);this.maskPass.fullscreenMaterial.setStrength(e),this.uniforms.get("scale").value=e}getBokehScale(){return this.bokehScale}setBokehScale(e){this.bokehScale=e}getTarget(){return this.target}setTarget(e){this.target=e}calculateFocusDistance(e){let t=this.camera;return BS(-t.position.distanceTo(e),t.near,t.far)}setDepthTexture(e,t=Z){this.circleOfConfusionMaterial.depthBuffer=e,this.circleOfConfusionMaterial.depthPacking=t}update(e,t,r){let n=this.renderTarget,i=this.renderTargetCoC,a=this.renderTargetCoCBlurred,o=this.renderTargetMasked;if(null!==this.target){let e=this.calculateFocusDistance(this.target);this.circleOfConfusionMaterial.focusDistance=e}this.cocPass.render(e,null,i),this.blurPass.render(e,i,a),this.maskPass.render(e,t,o),this.bokehFarBasePass.render(e,o,n),this.bokehFarFillPass.render(e,n,this.renderTargetFar),this.bokehNearBasePass.render(e,t,n),this.bokehNearFillPass.render(e,n,this.renderTargetNear)}setSize(e,t){let r=this.resolution;r.setBaseSize(e,t);let n=r.width,i=r.height,a=[this.cocPass,this.blurPass,this.maskPass,this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass];a.push(this.renderTargetCoC,this.renderTargetMasked),a.forEach((r=>r.setSize(e,t))),a=[this.renderTarget,this.renderTargetNear,this.renderTargetFar,this.renderTargetCoCBlurred],a.forEach((e=>e.setSize(n,i))),[this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass].forEach((e=>e.fullscreenMaterial.setSize(n,i)))}initialize(e,t,r){[this.cocPass,this.maskPass,this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass].forEach((n=>n.initialize(e,t,r))),this.blurPass.initialize(e,t,L),void 0!==r&&(this.renderTarget.texture.type=r,this.renderTargetNear.texture.type=r,this.renderTargetFar.texture.type=r,this.renderTargetMasked.texture.type=r,e.outputEncoding===J&&(this.renderTarget.texture.encoding=J,this.renderTargetNear.texture.encoding=J,this.renderTargetFar.texture.encoding=J,this.renderTargetMasked.texture.encoding=J))}},A_=(new We,new St,class extends l_{constructor({blendFunction:e=13,hue:t=0,saturation:r=0}={}){super("HueSaturationEffect","uniform vec3 hue;uniform float saturation;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(dot(inputColor.rgb,hue.xyz),dot(inputColor.rgb,hue.zxy),dot(inputColor.rgb,hue.yzx));float average=(color.r+color.g+color.b)/3.0;vec3 diff=average-color;if(saturation>0.0){color+=diff*(1.0-1.0/(1.001-saturation));}else{color+=diff*-saturation;}outputColor=vec4(min(color,1.0),inputColor.a);}",{blendFunction:e,uniforms:new Map([["hue",new eu(new We)],["saturation",new eu(r)]])}),this.hue=t}get saturation(){return this.uniforms.get("saturation").value}set saturation(e){this.uniforms.get("saturation").value=e}getSaturation(){return this.saturation}setSaturation(e){this.saturation=e}get hue(){let e=this.uniforms.get("hue").value;return Math.acos((3*e.x-1)/2)}set hue(e){let t=Math.sin(e),r=Math.cos(e);this.uniforms.get("hue").value.set((2*r+1)/3,(-Math.sqrt(3)*t-r+1)/3,(Math.sqrt(3)*t-r+1)/3)}getHue(){return this.hue}setHue(e){this.hue=e}}),M_=(new Oe,class extends l_{constructor({blendFunction:e=16,premultiply:t=!1}={}){super("NoiseEffect","void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 noise=vec3(rand(uv*time));\n#ifdef PREMULTIPLY\noutputColor=vec4(min(inputColor.rgb*noise,vec3(1.0)),inputColor.a);\n#else\noutputColor=vec4(noise,inputColor.a);\n#endif\n}",{blendFunction:e}),this.premultiply=t}get premultiply(){return this.defines.has("PREMULTIPLY")}set premultiply(e){this.premultiply!==e&&(e?this.defines.set("PREMULTIPLY","1"):this.defines.delete("PREMULTIPLY"),this.setChanged())}isPremultiplied(){return this.premultiply}setPremultiplied(e){this.premultiply=e}}),E_=class extends l_{constructor(e=30){super("PixelationEffect","uniform bool active;uniform vec2 d;void mainUv(inout vec2 uv){if(active){uv=vec2(d.x*(floor(uv.x/d.x)+0.5),d.y*(floor(uv.y/d.y)+0.5));}}",{uniforms:new Map([["active",new eu(!1)],["d",new eu(new ve)]])}),this.resolution=new ve,this.d=0,this.granularity=e}get granularity(){return this.d}set granularity(e){let t=Math.floor(e);t%2>0&&(t+=1),this.d=t,this.uniforms.get("active").value=t>0,this.setSize(this.resolution.width,this.resolution.height)}getGranularity(){return this.granularity}setGranularity(e){this.granularity=e}setSize(e,t){this.resolution.set(e,t),this.uniforms.get("d").value.setScalar(this.d).divide(this.resolution)}},C_=(Math.PI,new We,new We,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAQCAYAAACm53kpAAAAeElEQVRYR+2XSwqAMAxEJ168ePEqwRSKhIIiuHjJqiU0gWE+1CQdApcVAMUAuARaMGCX1MIL/Ow13++9lW2s3mW9MWvsnWc/2fvGygwPAN4E8QzAA4CXAB6AHjG4JTHYI1ey3pcx6FHnEfhLDOIBKAmUBK6/ANUDTlROXAHd9EC1AAAAAElFTkSuQmCC"),T_="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAAIwCAYAAAABNmBHAAAgAElEQVR4Xuy9CbhlV1ktOvbpq09DkiIkUBI6kxASIH0DlAQiIK1wRfSJTx+i4JX7vKIigs8HXpXvqVcvrcC9agQ7IDTSSWgqCQQliDRBJKkkhDSkqVPNqVOnP+8b//rH3P+eZ+199tlznVTlvVrft7+1T7OaueZY42/m37QALKNk2wHg1pITlB17mC+Pp11W3X/LHyT32vhg48/5SOv+PnwpsHA70JoGlueB1iKApeqzvOzn44GatTB76Xzhd7suBR7+WWADgDEAwwCG/L54b/poDLrHuvvm70Z2Avhsc+PVcxscBU8F8C8ADg5+ipIjD/PlGwfgju8B924E5seARUfLsiNmqQW0IjL8+7L2NYD/7COBzfcCm+aB8SVgdAkYIRCXKyDax4EdAanL5PuNPllNvXDlAHwFgP8AcC2AhRIoDXbsYb48dl5WkVFTE3LGDcC9m4CZCWBuFFgeAZaGAYJQQCRqDHT+McJrVb8zwATUXH02MHYfMHEIGFsAxgjApQqACYQORjtd/B7Axt/z79sC0+cMPgjjlwPwVwHcA+DfAHzTxcVgWBroqMN8+cYBeM71wH0TwKExYHYUWCIAHYRLTlkCYgcIBcAgU/n3qy8GRu4HRgnAOWBkERhddPAJhGJDBxkvw7cqimr+zFM/ZLnZF64cgL8BYD+AWwB8x/dlWuWagHiYL984AJ/0RWBy1AE4AizyM1yxYAcTigW55xMbAkxEiwEdkJ/ZCQxPAiOHgBECcKEC4TBZcKkSv+mTieNcNPNC26mLNsj45QD8LQDTAO4GcJt/7iw2bfoG4WG+vAGwm9ExiEg69zpg/wgwPQLMjgALzn4E4aIzoJjQ9g4024uygkj+pyuAoX0VAIfngOH5NgCHMhAm8Sv2y3XDZeBhNIp8OzJE8OsBzAKYBHAXgDt8/4O+MVT0j4f58o0D8Pxrgf3DwMwIMEPQEYRkNwfgsuuDZLskip0No0gWMD/9HGDoADAkAC4Aw/wsAgZAgs2Z0ABI0GU6IVmKv+f28KDnHxkA/G0A8y6G73N9kOCjXnh/Ebb6OvgwX75xAF5wLTA1VIHPADgMLDj4yIA5AAm6aCUnv4oz46eeDwxNAUMzwJAz4BABSNDFTwSfg7DDKHE23MG5PqIY8A1u/dINs9dBdy8AgnGPM2NfUBrsnw7z5RsH4IXXAAcJviFgluAbygBINnSLWOAjGxJ4pgOKDV0v/OSLKp8iGXBovhLBBOCQM2ACoTOhnYrAdItYbCij5JFzRyIAqRccAnDAQUjg6UNQ7hsMXP0cRQAexss3DsCLCECCLwCQzMcPwUi2MwAScAKbfnY/YRLFQ8DHX+IAJAMSfDkAF13kLvleIjhjQQHxUVS3jjgGpKeeNzYVQEjgUS8k+PghONdhIwAP4+XXBYCHKIJbwJyDTgaIAdCBJx3Q2M8tYAHP9m4df/ylQOsQ0JqtRLCx30K1wtLBggScQOgsKBGcWHAJeOwRC0BSM1mQIKRbhh+Bj98JQP6t4U0APEyXXxcAEnxkQAFwoVUxID9kvQg+c1C7vidRbIDkc24B//hTQGumDcCWA5DgMxASdNIFBUI5pCML8v8API5zfEQx4BudgqiczviSnJhQwCP4BMCGl+wO8+U7AJi/W4O4YS6+pmK/2ciADsAOBhTIIiAJnPB7AvNjP+0AnANaYkAHX2JBAc+tYaJXOqBZv24Vc386XW5dtkHGW+4HFAJonpOe+YYQZAShgKjv3PNvPQaxVoI8zJdfFwASfPzMUwS3Kt1v0UFIlos6oDFdAGFcliMAP/ryAEAGNwQRnDOgLbdlIEwrIs6AZ/QgkMMHQF6ZAKQcJAsSYPwIeAIk9wJgoPK1gi7+PwF4GC/fOAAvIQPSs0URTPBJ/Pp3GSEGRHfBCIQ0xowBtUbcAj7ys5X4Jfu1HIAGQrIgQRXEsAFQIORDFhiDY/rMHmrU4QUgR08AkgUjCAW6CD6CkwBsAIQC4GG6fPMA3OXiNzCg2I9gNCMksmAAoemDzoimFwL48M85AKkiuQVMAAp8CYRRDAt8GQiJ67N6GJODAXAHlsGguscA2AJg1IPGYmxOpBxFWkRN9LsATgIwXnNs/v/5z/9XCf8BO3YAtxbc/46/KDt+5+ea1Yku2VUxHz/z0v24FwMGK1gWsK2OUUxHHdCBeRUB6OxHABr4ZICIBd0QWSF+XRdMTAjgCdTrG9cBNwE4F8CpDkICyYLGsuhFt6zs+gISwUen8zEAjgMw4cfx2H6O/90yAFo84Cbg4ID3/9TfLTt+5+ebnRABkODjx0SwPi5ec/FrYpmqSAxM8Dn60CsqAFI6GfhqAMiDE/gokmvEr0C4PgDkBQm40wE8zMFEUDKEVoxIMLl/KS73mE7H9d+vcKHQQcjwW0Yu9nP8m8sAmOIBuWY6wP2/4s0ezjjg8TuvaR6ABJ70vxUApGrm7EbGE+i472BAB+WHfqHS/eoAaEwY2E9+wLSXTqhI7CXgnB6LCoOJ4BiST+hTnG0HcCwAglCx3ARoZEVFXnBPp/O/A/hXACc7CPs9/i1lAOyIB+RDX+P9/+pbQjjjAMfv/PL6AFDs1wFAgs/9fgKfgdE/ZEpuiQlbwAde6QAMBgiRmsSwA9BY0JfjovGRDBMH4TlcXGhcBOc6HkF0gjPhZgchxTLZMAci/04W/B6Ab3t09EPXcPyflgFwRTwgJ2MN9/8bf5qFM67x+B/aW4XQz42FeL0YrRyikztUFw0704mf9kXgxhOAqc3AAsPyRxxQCs/PdXOFY0W1KHy3QIUGtx+6vdnx1vsB+dsTncm2AogglFgVEAlUWrOMB2RyEmMCGQ/Y7/HvKns6tfGAnJQ+r/9b76oJZ1zD8WdyQjYBh8aBhVEHjELouQ8ukQ7VRSCJAALwkr+sALhnGzDD3JAJYJHg9uhoi4bx8ytkWUtvHT/7+Zc4dw1uZ3612fH2dkQf7yxIEEockwkJQn4IQoq8unhAhmPRKKFx0uv4K8ueTs94wD7u//VX9ghn7OP4c+4G7h8HpseB+dF2AKlFLwuAIZ8jD6NPrOhAffmfA9/ZBuzZCkyRWSeqBCWyoYGQ5yQrBpDbum/ME1HoPo0XEkSD2zlfbna8q6+EUJcTCxKEtHL5EQjP6BEPyIgYAZBvYt3xHyx7OqvGA65y/7/9wVXCGVc5/sl7qxD66dEqiYgRzAqhN1A4CBNAAlDyAFI+iZ9/N3DLJuC+jcDUBmCWyUnOrmTYCMIOkNclLg0B8/RsNLg9+UvNjnd1APLmmQpFHyEBROuWACQT8nN+H/GAvY7/VNnT6SsesMf13/CpahGnZzhjj+PPmwX2MYdDIfQexWyBAwEUOQDrRDN/98p3A7dvAO6fAA5sqHJDBEAyoUVGkwEd6HR12XU4kwzfl6fCXTZzjy57vvnR513X7Hj7AyDvggAUi9EyFgiZqNxPQF6345nOWbD1HQ/Y5fpvuLa/2+82/vNHgAPDFQDnhoF5j2C2qBWCI8bw1eRw5CL5l94L3DEOTI4DB8Y9OWmsEu/zBJ3rgsaybqBob/7A4C7jtWcooRrczr+u2fH2D0AOQgAUCxKEP7aGgLy64+m6KdjWFA9Yc/03/Osa4glrjr+AupqHz1sEs0cxG0BC9HIePLoit9eNkVf9L+DuUWByDJgaq4ybGYLPAWgiXmLedUE7dwC7saL7CqfPKXi4NYdaykCD410bAHlDEsNiwZ9wAPYbkJcfz6T2gm3N8YDZ9d/wHxUA+739fPwXPrSKYGb+BuP3jAFDElFH9HIWwbzCIGkBr/or4J4RYO8oMOW6ZVcAuvi1Cgoha04BCwT5gfMKHm7NoRde2+x41w5A3hQZkADk5+cGiAeMx3+/7AENFA8Yrv/G71cAXFM4Yzj+otOAaQLQA0gZxaIIZtMDFTigKJV8H9Iq6aZ59ZXAvSPAvpEKgBTtBODcSCWCZeRYtpzrmLyeGNCAyFl1v+Hei8qeb370Rdc2O97BAMi7EgB/2QG41nhAHU9LuWAbOB7Qr//GPRUA13r7Gv9FZwIMoVcEswEwfDoimEP0shKKtIphaZQAXv1+YM+wA3DEdcvRKkGJADQQEsQuhi1Tjt95vBsh5nx2IO59SsHDrTmUOStNjndwAAqEry0IyCMICkOyiuIBNwBvPFQQT7gBuPjc9oRYAIHyOEL4vIFEYVNaOou5vCGE/tV/A0wOVcnpzI47NOri3QFIBpSeaSDUdYLOSWvYImSGgftpJDa4MWJbAGxivGUA5MAOc0Be6eVLj7/4Mk+hzCOYPYpZDBiNkLh+G/M3yFyv/ltgL3W3YQfgcFUhgRY2PwY+Z7/EhAR1SFyXCOb57r28QfQBsJQBMn5D4y0HYLPje9Cd7RIC0PM3EiMofF4gVCBp1P840ix/gyz56r+vAMjk9Gl375iB4+CzveuZdLkkEPJ8ZEfX/6R73vOjzT5Si9hucLxHAVg4PwJgRwh9CKOXK8YA4ZEqKZXSQWh5P+5AftXfA/uGKvYjCKn72cctbFrZNECka5L5CPwIPtMH3TVz17MLB5gdLgA2Nd6jACycHwLQxFEUSR5ASvARDB0h9AQb9bXIgCGk6lUfAPYTgEPAITKgg1BObk58srTJgG58WMkWMaAbQQT1nc8rHGANAJsc71EAFs4PAagQestgC1lsBJ4BMCSOK6dDUcwqqaFiQr/0QeAAAdjy+jBiQQeeMSBZT3nCPUDIa9z+/MIB1gCwyfEeBWDh/BCAeQSzgkjFfGLBBD5nxQ4DxN0wv3hVxX5TBGDwL5obxvVA5YqYL5BeMLd66YYxJpRB0gK+96LCAdYAsMnxHgVg4fwIgMrhUPKQ2C+Bz0PmBTqBMQehAbDlIjj4F80KJguSVZ0FuXpjoCOgXawLjALhbT9eOMAuAGxqvEcBWDg/l1IE05Ed0ygZnyHdz0VwCqEPIfNyx0QQvvLDFQCp+8nfZk5und8tXwIgWcHSNX0N2CJmnAl3v6RwgNnhl17T7HiPArBwfghAS7mV/hey2JS9FvM3BLpUUi1YwDRMXvkRYJoAlAh2l0dcZ04s6JUTDIjyBcrl4yDc/dLCAdYAsMnxHgVg4fxwKVwJgGEJNmWtxpQMpX9on2eRhVA+O56AjMfnP+e3Xvf3NwG4xIPTleiY55bpGh6UbafNU0l0z0p+5Jh5HqYJ6b51nP6XP8cx12XNHQVgIQB/bFPVg2OC7Q+WgVFWng/FvtWLI06uWh5oguKEcXVS/9sEAF//VGD7t4ETDgJbF4CNi8CGZWBs2fPL/H6Vwp2KEtVk4fJ+v/EIYPN9wKa5qu+IncfPwXHVZe/aOL3EbwS7xv8A1rQvnO0j8PArTgTGZ4BxFv9mIxhOCGsv+0OPYDRghcLfkWkEuq0+G00x4OtfDGz+d2DbHmDLjL8si8AYP/7CGIAiEEMTG92zXqSbH+d9R2aA0XnvO+JjthiIrOVDHHPOkBrzUQAWAPsZp3oPDpa/Xag6EVkLBK+5rAnJC3/nYk/APD704WiEAV8OTHwX2LQH2DgFbJgFNrBhjd8r79deGoEwsllgNBOzy8CdjweG9wBj08AIAci2D6HafmyAk4/Z7SJ72hGYRwFYAMDLTwOGp4FRFgD3HhzqRGQiyeurqOdG6r0Rm8IEZjzRlkiqCWoEgK8Axm4BJu4HJhyAbFhDxmbDGnZO4j0SgLGDkpibgEq66TJw/1nA0F5gdLpq+zDqFfd5LMeWqu5HNST0uJOIllg+qgMWgI+HPv0xwLA3gWHpW2sC441gCECbmKziaGrnUdMO4aHeh6MxAP4SMHI7ML4HGD8AjHvHJGNAgpDgY/ck3stipRemvVhc+uASMPUEYGh/9dIRgGx8Y+MNbR/00uVtH0wEx94j/v0oAxaA8Ed+GBieAYZZg5kADC0QWGOFzGJlcGPzl1BxNLXD8sk4xftwNAbA/wwM3wGMUmxOOQBnHXzetIYvibonmSiuYTNjriVg7glAiwBk0fNZH6+PmX9P6kfNmCXGpftJ7TgKwBIAnln14BAAYxMYm5C6RjCyCoOyr0qkD/c+HI0B8DXA8N3AyCQwesD1VQKH7EcASm1Q+y4CkN9pUKiVF5nLvy+fBbTUd8QBaH1HvNBROiZvfsNnrF4kcvPwpdsBLBeU18Nf7AB23Dp4ecHC8oBgUlJJecLS+7+WOpE3gbE+HKw+yoevCYkMGKqPJrdEKARutaFYRs1fiEZ0wP8CDN8LDO8FRqYq3W10pgKgfYLaYCzootgA6KXaTA90y374TKB1sBozy77xHFZ536utRgAmEaw6g5kUSFZwSXnA330qsOlfgHMPDlZesLA8IOjoLypPWHj/11EnCiVwkz7kAExtsGraYUWdSDX5TmsagL8KDBGA7Bd30JsW0oWivnEOQNP7yGTSBR101AlZSUtGyfgZDkCWY1HnJdcBVe6325hTvelg2CQjZNDygG/2An0j1wKnL6y9vGBheUC8prQ8YeH9X39OVQSc7Mc6fCaKvAeHdCIVf4yMYCynTpX+nb97NJmlSQb8r8DQHm9YOFUZTKOzoXGhs6AxF0HIexcLBvWBuiHN8s2ne98R3qc6L4Vyb2oBVjfm9MIFHbjDCh6kPOBbQoG+oW8CO5bWVl6wsDwgfr20PGHh/X/1iaEIuDcCTIW/1Q4rFv8OnYiW3c+W2iKwUjKbyjQNwL1uuR6sAEgDgq1brXOmV81PxhNB6DUDBSYzQJwFtz623XcktX1Q1VWKaTF/zZhVazBVYA1tX5MazsGvobwe/jQr0Ne6BTh5uf/ygoXlAfG60vKEhff/rSe1i4DnTWDUACY1guFTDqLYdCBvf6DJYSMYATBfOx1kLfj1v1axH10nQ3Sd0GUkBnTfpemtBJgseIKQAHLQcVxa2TnuMW0Aqui5es8xBIegVdVVE8VhzHnLh65WMB9An+X18K6aAn2tO4ETl6vqbKuVFywsDwhevqg8YeH93/Rk70JE90nowxZbIJjvS3WYNSGUwGHJTpPxwwcbBuBrgRYBeKACn7VtpdUu/c0NJxO9BIxcKu4TTODzbkonPLoaL0vyUQRb2y8HsL1ckfWzMeuFi40Qezqi+yiPhyt7FOjr6/gCFwgP7Xb5vssTFt7/nQRg6MGRWmDRoeyTlpgw68GRTwgZgo1gGmXAX6/8dtaylSKY/koyID9BhzML3q1gAos2AcOrZYSoq/pJp1VtODRm9Z3LS/7WjVkvXOzEtOpKyGrlAT+4SoG+VY8vBGCvy/dVnrDw/vee65NBJiAjBIVcAJQjOm+DkCZEeiGAMw6sAwDZsJrAdhFM9rPGhd4904Co5oVuCZPV6kD40Ec6+9W8dBTBsfdc3nkpvnB82fp2RPcs79dHgb51LA9ofsDV6vut5/3PnxcAmLVBiDqgevDaJLkYrpuQxzcNwN8AWgIgRbB8loEBzXDwl4cGiDGft58SCOWGedgjvOJ+bPvgRkiuA+ZjzhnQQOiFNVbloa7l/fos0LdO5QENgEXlCfs8Qbf7HyMA3QVjYihYhLENgjX9y/qwxQmRU/asfd0ZcLU2CHVGyusJQLKfVi98CS12T5f7iECkHpsMkAhCF8+nshWH2I/jXsOYO144GV/9ApAIrS3vt4YCfetQHtAA2G+/4PW4/2PPbzMgmUMi2NoeSCRxIt2/FvuxWURIWCXg357gfTjEDNIHnTRXRCpH5ugKwGl3HpMBXQc0v6WLYVm/5limj04rG762K2uYY9jBkr9+rI03NL5ZbczS/dJ+LQyoga4o77fGAn0NlwdMAOy3vl/T938KAcj121z8Bn+Y9eWQJRz8Y6kNagDh2ey5EvxjxQD8TWdAuneCCO4An1vw5vdzQMmdktwq7pLZQR+dM34+ZumAxvY1Y04uqOAJ6FsExzeto7zfAAX6GiwPaLWR1lrfr8n7f/Rl3QGzmsis+/uO71V9OFgP2gpPhgr7TGRqRUT6dyvr4aIs/pm/2zVUNbBSv6G8e5pEv0Cvec7Po7+bTtjlBRlkvAMBkDeQyvsNWKCvofKACYBrre/X1P0/oWEAnnFD1YdjhtXxR73mX10FfCHHE9pVWcGAI/S0gKsfA2y+twrFZw6Hxf/F0Pk8Ri/kpGSnMuDx5T0iACgQHioo0NdAecBUHW6QdsV2/cL7v/Cyqr5gnc42CCOcfX1VIZ/V8We9IDmTzVXwPDJiXuKXPxtDBma8+lzP4WAgKkPxCUAPE4v5GzEuMX0PYJPLhB6FJsc7MAMmkVxaYC/K9gG+F1++8AQ7Gwbgk78I7GFpXgIwFiRXOwaJZPUbiR0yCUDRk+cHf+YpwMj9HgfI8ClGPyvsSiH0WSKRuYlitLb/zHM/JOSs5C/YIC9cMQDZr/dwxgOW9gtGYUBi0wA8l304vDQvAchilFbpIBQhZ7Ejq6ZQ0/Yhil8y4j89Axie9DAsD6FX9HOK3QtROTFkviN83kG4felIY8DCeLrSeMDSfsEovAECUFsTjHD+tcB+tkFgcXKvBRir7qtFl9owmO4Xy/1G3bAFfPrZHorFNWBFwHjQAFctIghj2kBarw06If/+MM9ZqTN6DgsDojCerjQesLRfMApvoGkAWh8Ob/tgAPSKWCp8ngNQtadjmTdltvNvn3peFYhgQQgh+iUmEaUAUoXM1yRLmWuFLaE9Z+XIAWBhPF1pPGBpv2AU3kDTALzwmqo6qtVh9kJErAudABia38TC5wJgS2xIhAwBn3yhByL4EhzXfRXxYsDTJ4IvrNN2JFMxZcBzVo4cABbG05XGA5b2C0bhDTQNQLZBYH1AVsQSAAU+imI1obHyblnjG/kJk3U8BHz8xVUQAhnQIl5CyNgKAGp5LKSSCoAySh5Jj79vTagcxUaIBeRNe79g9gq+DXig4wGzy+PONfT7RWFA4noAkGXZVAhcBckJQgNgrLiaNb3paIDo1vHHX+oA9LQBi4DxJcOUPJUnTgU2NJUyROs8irGARxQAC+PpCtsFd40H/AEf0gMQkLgeACT41PiGoLOKqyrJq3K/Ya9mNyr5FusN/uPLPIeDa8Bc+w3rtyl4VFHaMZc3i9RWBM9jjzgAFsbTFbYLRmm/YBTeQNMAtD4cBKDXBTQGdAB2MGBo8SCLmEuS1AFVAJ3A/NhPt0PoCcA8bSDG76XI7aySg6JYuGfKwJHFgH0E5B3ueMCe/Y4L+xVHAOZ+9EHcEgQgwbeiEYx6jwTdz4qfu7EhEJqxGqruf/RnHIAEnxgwBM0aC8aUAYWNBRCmoIll4HTqO122QcZbrgMWxtMVtgvuOx6wa7/jwhtoGoDWh4MBJ16WN4lfr8AqI0TVV1O1fa9BbQzovkAy4Ed+NgCQUSxZCFWvCOaOFREXyUwZOPIA2GdA3uGOB6wPaOz+QPv5S+MA3OXiN9aclghW+d3IgupBF2pPqxcxGenDPxfSRh2ASiKKiVP2PaZScvAKoA0VDc6cOlIB2GdA3uGOB1zR77iwX/F6AFB9ONSOQW0frA50sILVcckWJyIDSgwPAVcJgFbYuZ3FJvAlEHbJ3IsgJLGedeBIA+AAAXmHOx6wo99xYb/i9QKg2iAIfDJEJHqj4SExbEty0gkdhB/6P9oZbBZIGiKYVb9GKaN50lRHBLOvhDxh/5EKwDUG5B3ueMB2QGM/grb7/6wHAPNGMAY+GSGUjC52VX2f2CD4+HO0gqkZfegXKgBaHkcWtS0AWii9xG1ImrLlN5XR8L8fmQD05BVrmEENmpYSP9QX+KHiqj2/82+HqqDWwnbBRfGATdzAegGwru2DpRq7Mzq2fpAf0Nq0Rl2wBXzglZ4yUAPAmDSVWDBPHQjLcgTqOZ6zUvdKHh4ruDCerox/Dnu7YqwXAC1NI/QcEQuK6WK/kdgCTGC0PYAP/KIDMBgglq+hIkrOfsaCviLSofcJgJ5AdM7kkSaCj/HqQKVIGvD4swF8bcBjmzjsaQ2H5D/6acBd9wALB4DFWWB5AVherMp4GKIYEOp7+26UF0aSfT/xYuDG7wDjrIpAERytXf2vajj7ueryQXSFl10K/ON3gIWDwCLvjfGB8Z54O+Ee4ve6513uB2R1yzsqC+twbC8HcNVhfAeaBuDP/TvwtS3A/ePAIfYFVlPq2HHTuyulZCTlhbjhETF5yxTQGgPGhoHhIWC4VSXGD3n0tLkMHXHxu+YyB+MlPwDuZs5K6FlsbCzdVO9DuKfkHM8AEkP7B8fOkwDcD+B7np42+JkGOvKdAL4E4K8P0zvQdET0b14D3DgB3D0B7B8HZka9WzrD88N6sFm+YcUjrn7E1ZDvMtF9DBgeAYaHgSGB0PNHCD4BLwLRsByAyX/ij0/dDUxuqlIG5hix7eFhvLcOVUAtyPSydAFmOQNe6EYGV/9ZESiKgIEgtbaD/gHALQC4ovY5r5KwtjOU/XfTAHzzLuCmIeDuMWDvKHBwpMoN0WQzNtAaYSs0K4ZlOSAjGG9kPjCBRwZ0ABKEBJexYAZEAU3A7Oi1BeDym4EDnjQ1TwCGWMW8MXcKks0YOyZNlQOQjcgYIUHllEzYQ0ktm+r6oz8G4F4AXwXwRd8/kO9A0wB8y65KmPxgGJgcqYJTKYpTv2CCzyddQJRDOjKivn+Deh8BF8BnwBtaCUA+YYEyAU8h+c6Az9gNHHRmrgOgmDA3jHQ+iWupCeUAvNSrA9HNwqx+muk9nJVNg/CTfrmbAPwbgK8D+PcHkIibjob5o13A3XypWsAkG1cPA9PDFQDZM1id0i1KxsWfOrKnAFXlifCFFMMRcASigOcs2MGAIfE9iWXplS6On7UbmPaUUTXQrgsVMzcRj5Folg2V5ayUA5BWYKwOxKUafnosWjcJwk+7W5F2EKvlE3xcXaNYfiCYsGkA/smuqug6hcleAnAImPbO6YwRpMgjCAVAm/yQmKTv5hNsAf/i7SyNBSl2a8Qv/4/M1yF+BZSYlNQCnnVrpbC+mToAACAASURBVJcaI7sOSEY2NpaDXLqpR+vE/OVksDgImgGgghHoYJbTWc7oJtFWc65/cg2AYvh2ALsB3AzgVv95nS/f4QdsIkT9T3cBrGtITWZfC5hqtQHInsEGQn3UDDvEDEY/ICf7SxMOrAg8T+c00JGkvHGd2DABUYZIAONzCUDppCFhSukCBsLQrFtZe/IixYQpSyEoJoqnuPWrVRAubQh83HNlZB23z7j1ywmj6CIIqUPxw2Xeu9bx2jx10wz4Z7sqTYZaDD8EIDuoE3hMVEphWg66JIp90k0sBxBcy+iPIIaT1RtEsHS/yIAqw+VSNPWQfe5tlVEk8auXgVa5BUsEJuT5uoliAbE5AGotmIAjCPnR9xDG3TQernYAUupTdBGEFMf83OkApHG+XlvTAPwfuyrgSZOhas3u6cwTsUBVn2gTwyFMi8wjHZAA1M9fYGHDULJD1m8Cpa8fRxDad+l+Ykf/3XNvd11U+qiL39SxXevSsshdDFvgbI1O2AwAtRZMZzTBRuDFjxe1Xg8QEIB8yyj5yYIUxfQIkfkIRnmHCM712JoG4FsdgHHp3ACoMH2G6jM4lWzoQarSvwQ6MSB/vporVaFkh+mCLlpVR8Z+dqDZLoDOpHSiQeAFDkBjPrlgCHgCUaFifg67H/9uYjn4Ai1vpTERTAASBaoQJBAKeNqHlL6mwPDZYAOROag/EYRkPX34MwHIvzW9rQcA+TLpI22G7EcQKlJGsYIJhC6ClUMiXfBTbFUQAej6nPS/OuAl9pOOqIc2BLzg++3VmWgIEUz82cRuCAtLIHQQm0gO52uOAb22sC3JEWgRfPpZf2sQBQIgLydPEIFGwPEj8MlF2bSbsulghLftqsCXq9HGgHysznrGgi5qzTUTFH8FLhAUn3hIJwCN0HLncw37qaF2zoYvuKNivmQIuUNc7GvWt6sHNs26twA6vhyq8NEMAHlyntFrDCcQehyaPTl+FwAbXDcmAKMRThakEk8Q8kPg8SPL0qzLBl+A9QCgR6uZGs3vfHz8TtBZvkgGQrEPBVAUg2Sij50QAOjiVKI3saADJRm7dSLYWfSFDkCem/dhZeMy9pPY5QvSDYQyUJoDIK8qMezh3wY6fSL49PcGgCAA8pScJLIgAUYQEmz8RPA17StvGoBv39W24eREiBoNQSgWNI1HBkdgxJSw1AI+dFIbgOYmkjimQ1r6XXC3rAbCHycAgytohf8vsB/r2KRaRq7zpZ+D37HMX0s3DDcCUGLYaw53MJ4YUODzusqlGCQAOQCejuxA8UULUkxIwAmMAp8Wa3qkN/R9W+sBwOhIEPjk5SLr8HeKFbTQfb77csPIMHGl/4MPbReslPhNe4+MiTpi9AFGV4nI7MfvagNQLh/pfrYnDAS8aJQ42A2w4em2cAyWQUuJVQTGWLs1uL7DG9J1RjhA+jvYk4t3KXeMqijpzrud4At9z3XtP16yGfjKZmCGooYh1tZzvv8xXPFl4PoJYC97k9FlwZWD+Azi/deMZWeP13eQCGEyoERudChIjbb3mJYwH7V0QIKuCwj/gfMj0asn2I0FXRSHXfL/iRkNgLyeVj8ccMY//J1fyxzTAXT2+xoQViKYD/1hDqLxPiYxTgSvQrphphG97tz4Slqafnj7uk1kIQDZrvWTw8B3jwEW+RLxPgSiCERdPwPR7+wCPg/gulFgfruDkOMQkFc5x84e708JAMmCuRNBXi4TIg5CGRzGiBGE/D4E/C2r2vcAYJoify62i0aJSMhB+2IHoNwu0fkcjQ85pu3ack5nIBREqneYFyWLkAXIJHESe00Cyx5QyeL6F/tyEcDcrOW2n7fX8df0mME+/vQ/PQjhoy3gzo3AISYf80MQaQx1peH9wb7v2mrtmCBkIMMejp3jIJD1MsaxaMZ8v5N/67INAsB3BAYU4JL4DSo1J15AFPAEwuQHZJzkKfUAtOHLJSOQRWndBYQvCQA01cfnNopfsaCJaD2baBn79QjSTiOEP1EcawIpkq2kegBTNgHWEpOKF8Uwq2NRFPM4AqCf46/rA2U9/uVDvurB01zvAJpiiwOl3fEeciCGF+Ij11f+QkbSfMPfIzqw57mEFZ9Dl3Ps5HXWAYByHJAJKV7N+s0cCQQhwSlfm4lGZ0KB8C/rABgZUS6ZHITBSEhCowUYAAksF7cStWREyxRwtuPpOlgw+5s9sq6OaIJIIlUgEhA1edoTgHxa9HVw5jibZNF+j/9yGQA/7pbujZ4bwv2+cWB6tFo0NzYnkxFA+cvEAo43VBoEo2e+48EMXEOmD9F6xhCE8RwZEJ80VblKvDlmzwicfqy93/o+8K8TwB2jVSgW138FrJQTXBNlnJgmrjZwanow9CBP/rL9wF0jwAGWDtFyoN9PHutnIHT05mPXz93dMGQAPniJsjiBXiTbxDZFMF9NLUPQxKR5qezz1Y6/YZDH0D6GkdAkYJIvRalAdHAMmPZoYhb6NhDWvEyf/ma737CXN7R1ZC7hUbPgcFgqt/ZZjADnM1xqEVhYBpb4CUk5UsL7jQvj///5buDrLeCOEeD+YQchYwG9VIfyg1NaZszFiCH6DkRGLze5/dgk8IMWcMCjdCiCzR8od1B8OTwvJM8JEShFut1fzMhi+eRJr6LI7hYP2M/xVLwKNoZjUTwRMAQQmYyhWGQxsSADOflZ4kukj7PhZ75bETjBpkAGahMkcrGgwhsXeCyBHBj1wmOBQwvAwqKzoFeRV8ZaerjKYAuirmPY/o9X7q5Cyr7fAvYMAftCPGAEoYlBiVtFwLjtp2U4irj7yOANbi+crHyrfCbTquJV44O0F1FrwQGIMZFqdQDyP/gGSZ8TC0ZRRsOlVzzgasd/u+zpMByLehAfCgMQCDyGZJHFCCgLZ2f8mgI5qauEcVx9e5vACTgCTwEMWr5TdIpWKJb5MvrnoocDswvAPAG4VLGg6UKeqmi4iuDz4er30oX0FP7u5moMvIf7W8B+jwlUNAzFnlZCIhvGFRCeWzrgXSSIBreXTFZSgVLHAp4UHOFuociEEsn2PJwl/XEk0dzfSojeerFg1IOo5BKAveIBex1P67lgUzgWQaJwLAKRH04i14ItgDKEtGsRnWx49b2Vkk9wUefTGrKCF7R0JxZMqxN8cmPAxWcAcxGABKEAKPA5u9lEaAbCmKMI+sDN1X3z+ro24wEZFc0VEE64ABgT180PF9ZdBcDb6JpqcPtPk+1ACbmKjJnllwyuILunEAWjZHkBsrsRUnfD0qEiC5IJfyisgMhzWhcP2O14Ro4WbASgAMQJ48SJwchmBCDFa8qpyBbSP7OvU4PQ0p2W7+LSnSJUFOrI4V7w5IoBTQQTfJ6oTSYk2mQcpGRyH2syGjIF6EM3V/fM++C1CfwUExhCsmzCaQT43lZC3e1hBpEHh36XEqrB7Scmq5dV0XZxmV8WuDFzAF9iwhow9seAGoBcGtKjqAc+1l9rLb/1igesO55ysmCrC8ei6IxRMAKTWNBi6Xw98xNTFUi0jEcmpYgRAPhddpVi9OIEPP5cYD4CcLkCooHPwaW9kV+iwWrQHT8uA1fd3F7DFvgUHUP2k8jTiogAqLoxFpDgbMj9jXSuN7i9dLIdaxzBp5XVBMIMgFEnFAPKT9qPd6A9BIGI7MfPmf4U+40HzI8nWgq2PBxL4FEkjKJixGRRFyQQPzzd1iAUzCAQas1YOmAEoFjwkecDC/PAwhKw6CxIkCXwOdVJLxTobMjBdyIgfvimNvNJ7Evf4jWtdnRYD1YNGVuG93VWuWs4Jf+mlZCCZxwP/cnJ6mXVKk2+tK8lQQVHRTGc64SDAZB3Ey3JcxyACkToJx4wHl+YwqloGDICmYmTFgMQFBET8yyYzyAG/AfWX8mCGQg0BTRoHwt9KVaPE/HQ890AIfgWK+CRAaMRYnVdxHbhdY8Wslw1V93UDsmPIj9GxgiAioRRMIJNvoti+SW/Ikd0gwAU8+XxJcbGITJPDvI6XdCFREFSknTB83xka40H1PGF9dnycCxFwygkK0bASJQSVAbAYeD98xUAe5U3jKIwBosSgNsuABYogl3/IwgFPrOIg1Xc4ZrpAsSrvruykl2ucykapkMMh4CExD5DwJfWAYAxwk4MKPAJgOIjGSEGwuCakRhemw6Yv0UUwRf7L00L9pnsNx6Qx4feY4O8pDEcixOjsoTKKpMYjSFYYjOC8Eq3Wnnr0YYS+0Tmi2HysrPGLqwASNYzBnT2Mz2QD91laxLB0gs12GAh81cf/o/OcHyJ+qj0S/zxnhUZbSyYWaL8+Rq2S29wowiWkJPan4MvgrDDGAlRe7KIywDIgR3meEDWg9HbJgApNTkXo8o0i7oVgxnEgFr8F7jEdnU5GvqfJQKQKyEOPlsNIQvyvupAGHS/Okv4qv9oh+PHxMLk8ggBCRxvAmEN+AiEzz2iQfQBeNmkh4K52hJBKOaNe/FSLobLRXCz43rQnu2yi9oMSMDxs2jo8303ERz1wsCGZECF4kd3DwEYYwJjhoNlQrgIjlYodbBPrwMAZfEmyzcIv27gs6XDzC/IR1DOgA9a6DRz4wZAsZ+LYXvQYsHoD4ziOFklna6YD3+nnU6dZ7bGDAcBUImIAmEUw/zbJ1i/scGNDJiLXmle3RhQ+l/aq57gUQCWzwwBKPeLsZ/LFrGg/ShRXAe64Ajkv30kALAjF8R11Dy3K7KRwJcsUTaqWScARou3w/INVnCH+A36n8RvM3nB5XP4oD6DATBYwGb5ajlOLOh6X8JaBKRG77+7ygGYp1bn+V25/01AzBnwQ1ypanD7KWfA1QDYC3zJIj7KgOUzc9nFbetX/r+O5biwNhyX5uSEDr5o0xsJwLp8/m4A7GaJUv/j3/5+HQFYJ3oFPPkho/hNeqBcMkcB2BAA6XrxmMBkfFAci/m0JpwzXw0TXvXtzrz+PKc/Ml/ugzM9MDqCAbz/keVjjGcQA/YLvjoguo1mRslRI6RwfsiA5nqhL5D6nscF8gfTdfxpS+/hLzvWfzMQCoB1Fq/8b3VWaPIDZqsRV64DALsZHVHs1gEvsqFAeBSApQC8pHK90Oql4UEAyvCwNeGcBXNLOPMLftgZsI75ouUr9ousp2TEyIJ/sU4AzC1e+WIFshyAHPZREVwItrrD3wGAhibTYBhxVpe/xePyrNBuWaoNp3DgFwC81O+RAepK/a5Lfe51jxr7JwA83nPXYgq1asl0yX5N48+f4VEGLATlK1vAo5YB1gBSRmsM+NFE57lcfPD5pPFWCJImtyvGgGfOAacBYO59zFglgHgPefZsXV6/gPXBYeC0RVgyJNOGYuJjPka9eHWgjL9bWzhWk0/n/wPn+k8bgFNmgYcsVflZnBRmIShtJM/m7JGibGBoOIIez9wKPP4AcNpylfbNlGfdI+9NjBjz8JVzppckZuJ+dBw4aQ44drk6j1LIY9JkPD7P4s2lwVEGLHwJnncscNIh4Nh5YMsSsHm5ndOu1BGFThJ8/K6JrZtoslST2+XHA6ftB05ZAE5crgAups5TfaL6EF+UyIif3gAcOwtsXep82eIYY9JkXpMgMp/AeZQBC2b8OduBYw8C2+aALQvARgJwGZhY7swEzbNa88IRvAVO1qkF91J36DNOBE7eD2yfB45fqphLnevzdGeBKBfL8UX5/CZgyyyweRHYsFwxYHzRNK6oetSBMDLjUQAWTPqPngpsnQK2zgKbCMAlYMMSME4ALrcnR6JYQIwsoUnjpDRstOLy7cBJB4CHUGwuAtuW2nUDVH1EFUhycSwWjGD64mZg0xywcaECoI0z5P3X5P6nWlHdgHgUgAUAfOYOYMtBYNMssHEe2LgITBCADkIzSJZXpCOnIg25uPrhgnupO/TyhwLHHwSOmwW2LVSik2pCrDsQskzNIBGIpBdGI+VfNgMb5oENCxX4yPRjPj4xaJ0+WGeEHRXBDUz2Mx4FbDoIbJypADixUAFwzAFI8KUJChMV2SUaAGc1cE/xFJef3FYRti64nkqWDrqqEhbrsm5zvZCdPCd8nHzJOLZuABRz9hTHZwPL7LnLnoNMIY2VyaKcjtZLHOAbNgNPngKe4BacfGF1pnydD+hphQ/8XV5UiEueLGnDN1tWXj/3/4cTwAUzwGPcRcFJiDpPt3FLmf5vjwE2HAQ2zPrEzDv7OQg5OSM+ScYQy5Xbo8465u/ZfLTJ7fKHAdumKxVh8wKwealSE6inEoSy2MWCdbUHIghv3AqMzwHji9VLZuDzD8cXxxWZs5c7apmW0fMBnIHKn5X7d6I5npvRz94O7LgXuGIReJSb+Xl1tzqflybwRwqf9i97BQRWomWJQ7oZVFtJoqDX/b/oGODsvcBTATB9gsfGqmzdjtVz+G+PAyamgYmZCoDjFE2anCVg1CeJwOMnTRB/DmUINVkkgia3y08BtkwDW+YqAFJFMD1VAAw6XG61R31O9/fdrcDYPDDmY0zjc1UjivBuAMx1QdMB+WAYXU8dhEU16dOSkppbcHFSrng8MHwnsGMPcN5ypURHp2xMIa7zDz2z8Gn/kVe0YomO0wEwBYKujL7v/zHA6C3AxfOVh58g5AsZxx4fZM7sf3h6BcDxWWeGBZ+cMEFiwGEHHRnDzun7ONHs/djkRgBunql0VDOSHIDU3cxSD4aEajhFXS4H4S1bgVGN0V8we7E0Fh9jVDG6Obr1LJMRwn+kOCaTEYT0dsfqZHXl/p7PrLi9wIY7gO0H2yAgCAWCWCowKrYE8nMLn/a7PQn9X7zIJPPkCcK+758y7x7guNsB6l98gZjLLYet3Ay5n0sv4R+fCYxPA2MOwLEAQLIDPyP8uBg2cRYmzFweAYilKkn+OC8/Fdh0CNhEA4nGA40kd6FES13WLO8v1qHKAfh9B+DoYjU2Ak/js/8NAIwg7OUb7LCC+WAfB4CpBJoIiTRNRmS1l13kqWh3Adv2A8cdqqp1MB+aIOSxWv6pq5D2kkIAvt8rF7BLJksN/jMqfa7v+7/Ak4B3A6ceqpasKMq5akAmlLWY37t8ZW97PDB2qALg2BxgAFwANEGcnI5JcrDZRPlkaXL4u1KJUAfAjbTQ59x6dSvdLPXAgGYshZWR6JIRaXB/NwFI8C1WwLMXzMeSwLfcXuKrA2G+wrLCDcN/IIg4ERRn0qvyySAQX6mG1XuA4fuAbTOVwktRRr2MLCoQyvEZ/UY/WwjAj3jtFJZkU79g1ghkgEBf98+0Umb/3A2M3lkBl/fOcdMok2EjkZyv8773LAfgHDDKjwNwxEUw9yailpwdxBAEYhBbAuGzG3aKkQEJwAkCkOCjlb7Y6SYyf2UwlAS+vKYnAXjfNmDEX7DEfA5CjUcsnzvbu1nDtUMmCDkRZEEyGdlAk6G6lQTSa6m0MP6HuY73AxNTlcJLZ6WOJYC5/CNxLpHMgdKIKNl69Qvu6/75AjHOiTU87gKOOViJb748BKCWrnK/maTA+58AjM0Ao7PA6Lx/xBAupoYDC9okBRAmPdBZ47lNA/DhwMRsxX7mPgl+SrmK5EaRNRslXFQ9CKB9DkADn79cZtkHFkysJ103eBbqlh97DpmTQTYgk9VNxu+xYbXKU3lhFoJPOgdFGY+lPkgQxokkgF9Xgj4AvfoFs84eX4Ke9x9fIC+tRfDxvvniif358sSir2LCj5wNjBKAc8CIi2AxxLCzIAGY9L7AhGIKgpATw4l8wToB0JjPrfTkp+SLQbHrOqm5jNyajS6VCMIpApDAWwQ4LrGgXqzIfnq5cv0vN0ZXHTInME5GBNLb1DGdOYQsI7AfGKFjlgqve8wJwG4T+fuFAFytXzCLb+VgWnH/fIGYfc46Hs7iHC8ZkPcdXx4VfVXJw8+cA4wIgM6AHSLKWZCTESfLfg7WsIyRF3ckiRQ+HACXkwHptyP4KHrpJvKVGnOhRF9eBF9wE0mUEogz2wC+WGI/vVxiQQIxAs9+rmHA6E1YFYB8DJwQMZl0OrLZ++i7sfT8zroYHLS9df4RACWKxSZvLXzG/fQLZqk2gqn2/vUCUQ9UZaM9wDaPeSPrC4A5C1KV+NITKwCS/SiCR/jRBDlLmP7nHynsxno1IPwJSyRpbiMADXzuPDYfZfBTEoAmcuVQdiaW0zwXwQsCYDYmMaDA1wG8TBSvaoR0G77EcGSET6hjOvVApfRPAUN0zjr45JzVcSqiTxD+VeGzXku/4Nr7JwDJOkxFIwt6j6+RqUrlkO4bXzp1gCAAv04AzgLDDsBhKugLFUvQUhTwCEKbnKCw14HwJ9cDgGQ9WegRgDI8XEcVEDvAl7lVlglAgi+I4CR+Zf1mLGgMmDFhBGFfDCicRJFERviSABjLS7FC0MFKMU+07wOPE0kGvaoQgGvtF9z1/iODkwn3VWoEXxres5ib9xx1wZufBAwLgAQexbAD0JiQwJOuJBA68/H3Zhk6+3CifqqwWNMKN8wjKgbk6gWJgC+FMaBb5vJVmsUbV2vCqo3cRWZcCIACoax53+ulkqNd7iqOcU1WcC9cxEm5kQBUdZ+sTnSL/jEtTWngi21jhJNJBivZBukXvOL+yYBkcOqxKjJ4AGgxzMrBVwdAMmHrZOAYF2l6y/mwV6xD17zmWo6MbRyeWtOHwxJ91IIhr6rqZS70DPPLXDVUrfBwzHKr1EUp6/h0T/6L/GcCqslt4IhoTcwdAqDSs7I60WQH6R329pHuFyuXDJmEjuOSbdB+wSvuP5bGUjmsA5XoUvcvBXKKAQnApUdXwah0b8jXR2YzJTsC0ZHB33FL+2yiX3h/1YeD1fFZGT81g/H6yqkVa9YEpqMhTADle8erHA6t7Mh6j4ZBXdBGjFyO4CSIm9wGBiBvgqxwIAJQlXIyEJLyI/i0SkAG/FbhaEr6BXfcv+5dLKhCg4z1C1HEBJ8+BODQGZXfk/quAZC6ketAZEQCTWAU8PIJt0fgwHzZvVWNaKqi7JLOmtDWFy42g1FxH/XfqGkII0C+a0tnDkfsGxQjn3VPsk7tXmuy+Xp0JhtoJosAaFcUAJUYKiYJxcqHqKAH9rPlG2cMrmCUbMX9guMLpGTcCMKDlZGhMK8IPnPIn1X5PA2AwegwEEYmDGBMjOI5whGQP3NPBT7VJlRNaKvF4t2IWHbDErtDlSk1p4lJ7/zd246tglGZryIfrFhQ7pU8WCAX0ZENG+57U14Z4YrCeLrSxXdev6TfLwrbxT7znMrfKQXfHLQCnyvmRIv0Q3430ezMmL98P393G3wqz6am1NYzzoGn+svqRmTAU2citctqAX/2EI8F9ACEmLHXLZGoFxtSl2xyK2bAYwrj6Xr12+1noL/jUTCD9vvFrn6u0v1/nvGkaoVBAQi0eummMAuXQHMWJAA7gCixG8U0gFfcXdlBKk4Z6zELgAJfZEKrxpC1xOIl/+Sk7jkcdYlSco90y9+gK6vJrRiADD0piad7RuFo3udNCgft94vCdrGXn+tujgV3QAcHLcFnroelivHkchEL8ue0uQ74S3eubAITS3IQhKkMRjBMokgWG3L//2z3VSnP4VDgQWxUEEUxAZFHL0eR3HDfm3IRbDHkBfF0zy4EIKNhSvr9goGEBdvTz/MIYQLQdVsTwRTFDj5jQmdArRDYJQNDSs961R3tPhx5NXoVgoxleHnarjohgLec3D2HI492yQNvIwvqO9fJm9zKGbAwnu6FhaP5pFuMg/b7tTbpBdvTz68cz/zI8azVj8iAHTqgmFHXDUB89R2dtaC7tUGw4kDOgFb0R2wYRDGZ8g9O8aU4XwPOczhiwGlMjqqLWiFYGu570wADFsbTvaxg8nkow7E8nM/atfKzln6/1mS4YHv6BQ4+Z0BbqHcd0NwwYbVD3+1yWhXJxPBrbq8AqE/XApSqAxiBV2MZ/54DMOZwKE00rnDUWcR5KiV/brjtSAMALIyn+/mCyeehjIYp6fdrvVELth8RAClyHXxmhPi6r1m8FM0ucgk8+y4RHC1kAK/5XgW+2hZYofafWcPq1B5AqDqEYsQ3nepR2gqhV2yiol1COkD0C+aOaoGx4aL7DQCwMJ7uVwomn4fm7VrX2u/XAlELth+5sHPtN+l/Ap6sX2dCsZ/phZkIJgv9l++1wbcq+2WFv2NXIjNKAPzuw7MUAV8DTuynFIEsQy83RgTAhiv+NgBABaQOGE/3mwWTLwAqHnaQfr9GnwUbARgDNBUlkpzQboyYCyYDYdILdf0l4NduW9kGoa4geNdazLElKoA3Prx7DofiETtC6XvE7hGEzJlpcis3Qgrj6d5UOJoYDcMglrX2+y0NPtl5UZUjkfx/Hqbecoe0OZzdF1gHQrln9Bhee4s3f3Zxm4MvAk9VSFdUIw0i+Q2PaBtISiBSSFgCYMjMW00MP7pwvvLDmwFgQTzdHxcOSGvBg/b7ZRZByWYAlOERluKM3Ra9CKWc0q73dTBhMFT4ZwIw9l5Lrpes+HjeBiGCUOKXeuBvPcKTiEIOR0f+RhDBMYi0Lhea4GTaa5NbOQAVDzhgPB1La5RssV3rIP1+7yy5OAADoAchEHBkFbKfGRpiweAPtMs5IFNokyOGk/7rAYC9OhBFwNXVY1at5tftCBHaWVS2AJdEcEinrDNC+Lumiyc1B8AB4+muLARAXTDCWvr93lR4/Z0Xt6ODFQkj8WtumEwHTKDLQejAfN3uds/dfjoQdatGLxb8jQBAYz6/boxiFgAVudzNIc2/s3xLk1szAORoB4yn+2DhaATAGJCtbpkCYq9+v4V+aBgAQ4i66XtaC85YkDog/zdZvzUgfN1N7a633Xqv6fe9msDIHfNaB6Ay2JRE1AHAEDIfI5nzZCLeN4Nbm9yaA+CA8XSsul6yqV0rJ2WQfr+splCyCYBR/HJyKX4phs0PKBZ0lqOYTpvniAiUAmAd+HKjo1cvDjHgr+3wPJQsVCymUZrPMuRsRBDG4AQCsunyJtFGHwAAIABJREFUcc0BUJlxQoH62q8ST8cggpKNAFRGwCD9fkuvbwAkyGgJE3C+Nz1P1q9/T3F1EZBxvZh50s6AEYC5yyUHXt5/Q8zI5/KrAmAIkkipkyGPYwXz1aRT8v5ZO6jJrRyAvKOvNXlLazsXs9bo/ztc29Pohgotp5J49Rcj/pzfIwGS//3OM4CNd1dpntQpFUmjEH4LYIgnyn/OLjL8FeDGhwJbNgFjI8DIEDA8BAy1PFK7FSKf43cNKrvHx+8C/vmxwMgmYHgEaA35J0StpvvzL/nP8RbLAfhyT207TChgDRiu/ZL9DsfWNABvYzbhCDBKoBAk/pEobGWTqp819hzQ1/0k0PoaMDEJbJjxVZFgDad0SaUO5LksWVj+XScDmw5UEUDJ6U4d0nVbC91S3ovfVHp5al64cgC+k7mZAP768KCA0WD3A/ieLz090CDceVmlAuhBljLgrfcAw6PAyDAwPFwBkCAbItM4a/FiNtERjBl76W9ffD2AbwJDdwFj+6syImRXrd5Y2FjIYcnzWPLEqnsfC0zsr6qBMQmfIDR/pyJ6xMhKyMrSDiKD2xja6TADTt0/AGAs1KcAUCFrOLF6tbtiRVFavT/wuMCa7MfVTlH098YBeBcwNAIMEYAUlS4uBULOmK3LCnwOPANlEIOSoF9+C4DvVoWXhvdWZVOYqWgi3vOXDUQhgieB0EElViMYJ08HxqeqnG8D4IIDkAzo51DKQQJvBKUmKACzbM4+5hUivwrgiwC4LzvjmgCh6nBcgiMTcv9Abo0D8E6g5eCjfpUA6AxoQIzgi8ALmWwC4z//DxcPPwBak8DQFDB8yJPpPZHeGCyC0KN5DFCByfh9/+OAsekKgEzCTwD047X0SCPM1IYQjCv2E/MJoGVwUUQoPboq0MdqkWVn7RtDDMahB4g+P6qhXFpjVtkDtRGA2nKjos7IyOyHFUbIrXe0FXsTuzIYfNb4O2M3ATGIYQOmPn6hG6gi3eUkQQAeAIYOAUOzALMVh2pAlESqGFBAXAYOMQVjxll03iO/yYKRAT0FQXkwZkjp1pz51LO2XAT3KtD3AIAwj4Wg05kfiuUHYlsXAJLVnP0INLM0OYFx78AzcRySeTsw2AJueI+Dj2Fne4EWKz5MA0MzDkCCkAByUWqsJzarEanzj2zXwjEGFHuGY+pYsMojzZL1G9EBexXou339IRBrC3lJGmNDuSHX+w7WC4Cm6wWxm8DngLTImgC8pBcGBuTXf/1fXnyTugnFwxTQOgi0CECyIFlsvvJfEnh0mhsYI/s5uxFYi1xZof7oOqSAawwYjRGBzYGXbtWXaCIrlvHUagX6SP/ruMVYCEbEqECXAMjfree2HgA0ESur1/0vtnNwGSsG0RsZME20/+/XWH6Mugk/yngPAGy5GDYALjiIHIgRUIrsZjM7Ax+BSx1S4pfffQVIep8dL7dMDsTGjJB+CvQxTHmdtrw4l0CovFruC2NOe975egDQsCXRK/eK634JhBK90q2C7I1i+Gt0jxF40k1cPJAB7UP2m3MGJAAFQrGei9iUTH9yBUDTHfU3B5+BOIKQ43BWtNtPcWIOzEZE8FoK9K0DCGNxLi3FqaKA9gTgeoFwPQAoI0OulWT11oEwiFz7cwbErzNxWtEYBB+VY76Vh4DWrH8IOoGQ7Ocg1CqMRLPltmxvs1/SHaP4dcAJePYyyUCRIzrTB8tE8FoL9DUMwl61kQQ87Rmy2PS2rgB0a1ci18RudEJH57OsY02y/+83/sZdBKr4FXQTApBvprGgQCg9UEAM+h9F6ugJDkC3gJPBEvRGrYoYCBX9IxEcS5K4i6cZAHIw8oXQ4mLBb35YH5d7OekadtTV1UZSjaEIPH4nQzYNwgjAHNwDuWGYpZc7lzPfX1cQur5oBorfzDf+zi0yVTuSkuxBI2Q+PhQDIUEnMLo1TBCZLufGw/ixbQa0KB8CTODjPohdY78IQmfDjmW7Yo/doAX6GqIiAtDHaYswSmeMubV81kp11L6hy2PdAcgblfslOKC1IiKRmyRxZgV/8++DS8BFrxXi5Hd/U6MeSKdqEsEKhpBRsgRMbAtuG4KU/+9ry5brzP/lPVMv1EPOQegharrVcgZUhVHFxNPcp9VFtlOWkL437C0WABWypFRGsV0sb5Hn2zYBwvUGoKl10v1knDgo0y7XA8Pfv0UACnjaK33Co9gJQAOe64FkNvtZAHQdjz9v2Nz2GSa3jYej2W3KGuZ9ixGdIVSoKT13B2s5AHkGheST6qn0erHv5AIgAAU+LVfw/wq3CEAV7clBKDDGZG9/5oVXx/oyYARczcqH5GyH8eFplTawFvAtrtXLGpNrQDGbejupB3omlIHQGc/ErzOcGSRs8zrhAbbuL1Tco/JfbLlNwHOmi2kIcs3owbdwNpYtynDQhsFcgvuG9/YapGFvYX22zZcAU0/GwA2LJ/4AmGF9mwEbBu98Y3cMF+uAGQCj2HVp3BbPuo3IlqxAy5wHAq4OfARmEBXGfNIBa0BIsG0ecwC67merHgRpZLwocrWaovuTxew/V0txJQ2DWeae3WAGbdhb2DB4+wRw7w5g8Qpv88liyGtoWHzMi4C9fAEHbBi8kwUKu2xNAdBxaGBLbJdZux1LwAGECYAEm6wyfpelJrEgFnRDxESwgyUxIUsVMwjVy5AYO0bG89Auu1/5BF38KqjBHlUAYXsteNCGwTeWNuwtk4JMkrlzGNizA1hm69g1Nix+zDOBW0aBeRZZGqBh8M4emfWNADDT+zqMjQyESdQFHfDbZECCLRgdHeCTe8CBaKJY1rDnBRCIAuGW4TYAZeFG8ZuMkGiQ1IEwGCJtHZBmy1obBsvVMnDD3jIAerti3LEBOMjGcOpa3WfD4ic9t6oveDtLfw7QMHjnH6wPAybW6yaG4+8D4HIQfvtDIVtLejpBFsVvUI7NIBHw3DUjRzL3rDVtsYPOkAScuX3coNDynT2VYJCkn+PjqvUD8hVbS8NgjphGxcANe8sAGNoVY/824BCBtIaGxRe8pLKZdpMkTvXiJ2toGHzSNHDPScAyq3er4qPyGaNc7JCRXWLT2TjwGmCOeQashq6+qSpZmp8vojQpheF58ncdZVjLnjWPHr4VWKTKxrHGUqq97qXu3jp0wPy+eEC/DYNZsZAO6IEb9pY9lNCuGPcNV830ZmkM9dmw+OKfbdcXvJMPdY0Ng0/7GnDXKcDMccBS7MwdKz8KCAKQIgY0MWGCtr4TOHAasMwOkTqf6unyuLykfd254nkb7qsw/iVg7jhgmSX31Vpd9yRHeLx+zRhjEGRbB6wDYT8NdymyubzDzCCGfpMJWfSRYfr9HP/aMgBm7YoxNQHMbQHm+ID6aFh8yS93tAvGQb7da2gYfPoXgbtPAqaPA+a3AEubgGU1RM6B060fgkRoCzj+TcD+04CFE4BldZdRc4/YxlxgjJMewSiwN1zWfsOngdljq3EmY08vm5i/7j5yIMqpvupKyGoNg9lngYosl9wY/0dZdrMzYl8Ne8sAWNOu2MA3zw/F2CoNiy99XbvftrcLriz6PhsGn3U9cM9xMODObQYWCMANwPJ49UliuW6SaqqBn/gGYP8pwPyJwNIxwDK76ahDeN6uXYCuYyABkEza4LbpY5WEWdSLxjF26/dQB0SJ6r4ByAN6NQxmkWcqrnQ00x1DEDJFjR8CcNWGvWVPp6ZdMQ6OVOCb3wAscPJ6NCy+7PerkP5Q3tBY1PrT9tEw+JwbgPu2AlNbgVkCcCOwtAFYcgAuiwWlM/XqDjMEbP9t4MB2YO54YJFMo/5gHIcALV1TRZ17FXOhPtvgtvkqf9H4kvHDlyKK4l6VzvVSBF22uwjOb7pbw+CfcwBSkyeFEHAUx/yw9JTyEbo27C17Ol3aFWNuAlgIn9QxO2tYfNlbK6MvaxeMRYquvL9rTcPgJ30TuH8LcHAzMOugX3QALo21WXBZLEHwRF1OgHS2eOgbgIPHA7PHAezNu7QFWFZ7JnXJ5rnqxHEulvlzwyVNN3+wern5Yovl7SXLGwvn4riLWO4fgMRJXcPd/+pmOymELEhRzBxJAo9gVL4kwVnbsLccgHEpWi3epocCAMeBRU5eTcPiy/6qtl0wpvhA+2gYfO7NwOQm4OBGYGaDs+5ExYDGgqP+ccAkINaVpB8GTv4d4OBxwNw2YGFrxYCmV0YxLNYheCXau7EhV3ga3Lb8g4+R45uoGLADgHWqhsBXA8K1AZADyRvuvtkBSArh+i9DsQhCOtf0UUgW/7aiYW/Z0+nRrhizoxXwFhyAi5y4rGHxU66qAFhT3rDSIVdpGHzencDejcDBDcDsBDBP1uX1CMJRwFiQIBzxieL3KIY1YW5MPOxNwLRb8gs0aghAss1GZ1O+SFHsdRPt0i/PLHu++dFb/x4mXfhcbWxhfCtYMFr/uWvKxfDaAcg7ipPCvFOVpuo3HrCjYW/ZA+rRrti6TS6MVQ+L4NPH2nx698GnXF0BsKa8Iab4dFZpGHz+JLBvApieqAA4J8CPOQuOBBAOV0CUYbIskRkAecrvAdNbXc/aDCxSpyT4CEIyTgRgneiLIp3nP6fs+a4A4N8B8/48CUC+ZGJA29fpuLmxJW+5h5kNFg2jiWHSi0r0Uv4pCoZsxw8DUfnhd4Vk0XGdGvaWPaBV2hVjdjgA0BlpkQ/K9bmn/HOVqtClvKEBqlfD4AtmgP3jDsBxB6DA7tdbcvYzJvQJkii2n4NOeMpbgJktbYPGACiF3wFoEx1ZMNe/4jnPLXu+KwD4t/5SO/iMBcXuesHylyACMBPDgzGg7opM8mEHIGdwrfGA1rC37AH10a64Yr4APvvOSdwEPOVbKxu+K2pdKRTmdI3dqkPPVgbSTBGAY8AsATjWniBdx0QxJylOFCcr6HBiw1P/CDgU3EgEIMW52M8YkLolQRddIN1AyKWiBretf9MJQN6HsaCPxe4rvgDdHOcOxDIAcmDFDXvLnk4f7Yqt63gEIB/Yoj+4p9xaAbBHeUPM8qF2aRh84QQwNQYcGgdmx4C50WqCFngNsgSvQ+Dxu4MuiawhwIAXVk1O+e/A7CZgThY1dcno1nHL2oDIyZULpBsAFTBZ9pjT0QQgn2V6ufRicS8QRgbs5ZYpEsENDejBfpoLrwAOjgIzZMBRZ0AHoUC+SOA56xJwNlEyTFw5FxBPeWvlzpnbANCdQ1eSGTRybMuydgMggVBsKmtYoC6Mt8znZxsZMLzAxoAOvsh+ydDqtXx4FIDl8L/omQ7A0QqA82S/ERdTI22mNfaTuBIIxR4BhKe+y61punQC+MytI/Zz/c9EuvyBeetLAfGZ5WOMZ9j2/gqABB1fMLsHAVBqhfTcyH5d9MByEdzs+B50Z7voGZX+NzNSsd8cwUcG5ASRKYbdHRNYwhhDIHRgGmO0gFP+HJh15jOXjnyKblVT5Cbfoq+yJOszF8P8+VnNPlICkMAzds/YLxlYznrJwIpO6egTPMqA5ZNDAB6iCCYAyYBcBqTRQ0e4630SxZyQJQIvMJ8mSeLrYe+p/GzGfnTpEIBy6US/out+K1wg+brs88rHmDOgAVCMnrEfxxMte1Mt6j7u9zzKgIXzczEBOJIB0BnCJoqgIfDEhM58SWzJEPGJe9hfVH42un/Mfxl9bgSiBySIBWnAJBDGEDAB8QWFA8wO3/a+wH4+rg4RLPYLul8tCI8CsJmJMQAOuwFC9qMI9g9Z0CxhZz65K0wfFBPqu7PEyVdWAOTHVlTcpxhXHZLz1w0ZA6EDLhkCskRf0sw4dRYC0PQ/vVSRAYPo7QCdj7GqVOSMeBSAzUzMxZcDMwLgcKX/zbv45SQlHXDIgagJc+bjZBqAWhUoH/Y+B2D0J7rFa6LYDRmzomsAaOeKqxEvbWacHQB08JkRIteSXiSBLYJOLB+X4xrzAzY7vgfd2S4RAKkDDgPzNEAIxMASSWF38WsgkuXLyXTRSRCe/DduSZMBMwe6ObTd8JBj24Aot07uDObPP9XsIzUGFPs5+JJ/M6oT4buxHv9X7BeY8KgOWDg/Z58GTC9Xq5FxTXOw9c3Cm6k5fPcjgbHbgAlvVG2tH1T3Oavoq6BlniZ+12n5u/2sDbOvasqoFg8x2Lnbcd1GdhSAhXN+7qMrAC4sA8sORJ6yHwD28z+Ft4fdv8UyqUDrDmCEBcpZ39kLS6aq9l4D2rLb/KYsFTPWdfbvh86vQu2s1K/K+zIjTsXIVQ9a59Egs4Y6sZfIA/EcSp/jEXv8BWcAhxaA+SVgSQAkGAMICcwVlNLlqTc9Gbv/HAA7MrL4+f1VlXwrUq7SvCoyGcrrWpGhuur2fNGYwM8YT67hT3s1LaZvqn5MLM0bzmHMmIFSgdFNj/mIBct63NhFZwEzDsBFgpDPeanNgATfCtGsX9TIKwNrg9tuVkhlng7TI/YArX1VkXKrEe1l2SynN1RCsFJsqnQv3UIMxhwIRjU5AGN9QUteVz3BUAvahuNgjC3HxLAND7nBp/cgONXF5wCz8xUDGgCjKPbvevlzcKUHH2ag6cnYzepYBB9Zi2FxDJdjoXJv1WDFiLJ6MKqKZUzoQFTfj2HmwTKcTpVWvcxHKm6kKgoORAEvVclPD6NdzLXpMT8IYNPcLV7yJGB2AVhYrAC4SNA5AxKM9ryDPE5fs6eeVKWGZ2M3S3MQfEyJUKV8L1ZpJXpVJ9pLilmlAxWkVJHKwIhjjD9TtVXVm1HdOy/pJiaMFRWM+bo0rWl4yM1N7oPhTJecC8wRgAttBjQWdBBGESwgSiV0Pb9DRgu0TY19N+M1mRKh8niqFx3rRDsLqjgl9yaGXT80vcL1wnE252PAZCzAHQCoiqoW3yYWFIt664fUpKaREr1NPakH6XkuOQ+YDwy4FMSwgU8GSRSz0UJx3Vx/5vFNbrs/EiLRY+v4ACITww6iJEodQKwBIyBRv9vwhKzUW6z66TUGEwhDS3ezqusAyNxnJn8xa1KRPSFts9YfFB/QDZcAm78CnDBT5U8rCqjfc3yh8Gn/hGd/MsKf1+QzYJ4891Jye13iy1cAE9cDJ+6FpYrEkidxDN3OtXR+FwBGMezoMmxJLOumAuD4J4rxJrfdH/XCoLGFVKiUbw+LAPQqWWaMMLrd6/+JycSIm85w9lOpt1j1MwAwFTiqAWEUxeYH5ENn/jInUVHeMXQ/f/jRePvCa4DhTwLHfBc4frGqqaNJzLPw6iZxV+HTplFGvZrXZT45N39+HW3TujlZv8D6fp8HRq8Dts9XIOR5YtakgBgdrrrt5Qsq8Ssd0BhQ4HMwmVitAWHAY/LbLDQNQDaTVJ8Q6W4qVB51OOqDZDPVB3TLOBepW5jmqaLbec3jGgBGMSxvvemDYkQ9GoKF1ShUCSKCqBeQrvmfVZPC1keBjXcCmw911tTJ8q5XgOLaQgA+x/OdWA2EGZ98gbjleTHdQHQN+2iwls3nK3/Zhj3VeQhovYzdxmArSwQgDRA3QiSCJUrTnjfl4KozRCSCCeYmt90EoJJbVCk/1+FiCwFZxLk4dRfLFia6x8LbYkD9v9cXtLG6+O4AYQRfrgPygVIcqyhTXcWFOJH8fh3rz7EKwnUArq8mcGwK2MCC1i7WY7Zenh56feHT/jE3yliE4TZncd636gPFCKWavGhcRx2J+cvs9MlSw0Ty3cCm+c7n0G0MExdW4BMIbTXE9UCynvyCCX+Ovm4gbByA/xisVgJPpXrzLj4EoRJjJIZrWHArS9iprK+KcefgiyB0XVKGjOmCmW9xhRVMUSyRFnNeFGEdI2q+/HFXclkp9WsAbgTG9wGj08CI64WxRk/OTDcUAvBHXSLQxcVCDMQSWbzv+1e7WVbz+k5w2tJtsbcCYV6WJY7hmAsDA7r1Sz3OgOgoM+KTOJbcjSI5yGIaNE1uuwlAAU/MF+tF5/0sIghVLdVdM2S0bSzHx2Mi+FTxXf8X925NC4BycK8QwfmgVX1LlcFiykEMcL2BndJJ7aQfijKfxLGDwAhByM7aC5U4qwPzNwufNnNuOH4VZaCPlPo2AahqFqoPVFc14ga2m+WEEL0cAz9kdPrOmMu8r1o/rTsXz7f9oswFs+jO6LAqkvC3Ggg5Fg6mwW03CUI6X12h8lyfcz3QHqr3DIl64DbqaQKc9mI87QXACD6vpJqY0EVxz2CEyCI5eMSGX2e7VtI5J4yTRyZhscrvt1nQuivOAaNLlYESwcySgiVbr37Bfd0/u31yEgg2FVaiPCeVOguqAfGov0iR0R9JABJ0bnwk9nMxw+fOh55EbgRhzozrBUA1polN9CLwok5HEEUQBjFMQB7D+j656PW+IrJ8O/bBCo4sGFdGejqiyYCx3mKe9/JtTiBvmI5OFiTisg9LtJFF7gZGDrUbHKs79+hyu5hSaUvh1foFr3r/6vZJCiXgCDwVVFJ7MVmRLsrGltuFCc68yFdACMDAflwR4QM3HPoKgIExt4gz42SuaQb8hBOE2oZmlu+KFlKR3QSssMJxDPWbbjpfLoJrxG8CYT8MKGZSVTCxYFTIb84nkCxCIPLDiby30gXFghaF4c2ReR466Uu2fvoFr3r/fKAEFxvpqMcd9yonIrkuK5LLV7MVCM+/uDJCyIC2J8a0z1iwqyESgMl15Sa33QKgmtPEBnp11mwuXgO70Ud4DHWzfgDYC3zBEOk7HlA6XKyHQzb8HgGoCSQLqsxorIy1Bxie7Wx0rFaf+wr9Xv32C+56/7HbJ5VHtRYT+GJrsehHcya57PyKAQk6+vBkBZPpjPEExlwU59awg3C24W6KBsC6tqHR+MidyVG3i3rdAnAsH2T093XT+zLr197MTA80h3SfsZP2UqpCrPQ46oF317VrpeiKXTJ9MhMLkgGdCacKG/mupV9w1/vnwyGgCDCKWzJe3lqsyzLWZWe6/kc/oKzgKH4jC7oolhdC4jiuzM0WPo+cPQ2AsX1obFCTO5Jzn566PwbReiwnfTWjI4KvDoh1juh+aT+WKSYD3i8Aql2rJk+VsVQly5kkddv2FvHT61icqO7Fr71/IkLNXOi0FQjV0046oBy6wZ922Q95ICqDEaL4XWw3COcf9Mw73DFB9AqE6wZAAS8XuzGQIDKf+oVkqxt00ttAc+YT0PJ9qRFSB8xoye5Xu1ZVeCSgCLbYLVNswoncHxoeLwCzBGjBNki/4BX3z9lXgUCyIIGmhova83cRgO5Te9yLgP3MfmsBS8xs8/U67ePQOqy9umBUruDchqo8sHSd3PMfT5ifo+ack8eFHI6QEcnT5GvdOnVdXof+ptJ+BVPWceiaRHA8Us/nkACo8mzqlqmWrbFDppT5A5UIZm7CPA2Vgm3QfsEd909kKIqB1qJAKCBG8ZstZz3xHOAAiwmpDIdng1maZQAkZzsHZ537YfQrwNyxoQ+HakrnS0h1mUA1C96TdJTmORyhC3oeqdwROi+GDhkFI6bYNrcNDEDeAkXwQizPRpmnIs3OdqZPSaRFUcbchHlgie6agq2kX7Dd/+d8lUJVXuUzk8ERmS+2vfd4uvN2VOV5rSwb0y3JhgIh9wJeN3YMQCIgR78Q+nDEVYBYZUrUpbXFnM7COSdf7N4IPvtDnT2BY/h8Chh10MXQeYGS+7GGjaQiABpuNIFiECnzdWJMIUHcazLptC7YivsF8/7FgLFMqpiQL5TuNbKfA/DC46rqqAbAwIKWK+timRUBEiNGsOQsyQm+Gpjd4n046hbT84KPuYjOmHHyp92gcgDS2OoIuVIeh/xyUkaVwyEWdLrewHE3uBUDcKIwnq40HpDXL+n3CzbaKdguel5VnFJl2awaghLQBTzteZ0cjLq2A2n0M6EPh2pC57Wg41poLzZsAZNso0Hw6eVR/J8bF9YjWGmVCpGKwQLBRCcrbiSxNLgVAxCF8XSl8YDHHFPW7xeFBRwv/rGqOKUBkODzqgdWPYAM53vTASMQu4Bx9J+69OHIF+N71F1O1gUB+AsBfFqKC+4Wi4BWX+CYgOTAU36wdMVNVKka3MoBWBhPxyiuko3xkSX9fvGMkqsDlzzHC1N6SQ4DoINOe7KelWWTheziObeKCdARApD1AdVnRH048gKUAmAEYi6Oh4DJV4VoGDWqjq4XLbO5o1jBoimEPhPJmwu9FvnTLgdgYTwd2wyXbMyRKen3i2eXXB245FlVYUpVxUpGiLtmGBlrTEhVUwV8dEkVKAq3MHJ1uzRbRx+OOgDWFX6MsXJU/36lJoEoA2AKvw8+uwTEDIBbStdOs8ddDsDCeDom7ZdszBIs6fcL9ror2C75US9IxJJsEsHdGFBil4yYuUwknofJgF4XcEUfjrz+X7fKo4EJJ//PkMORO6FrVjQMeL5kJhZMMXzLwNZCt1nzDFgYT8cQwpLt4hDON0i/X7ys5OrAJVe0S/ISgFY7j9ZvnQ7I3+lyqpYaL98CWp/N+nDkZdhi6bW8An1kP3fRTLKVWlwF6RZCH2L4zDDR0k1IqeTNb2OQSYNbOQMWxtMxeqtkY6I+ny9VEz6btfb7xc+XXB249AoXv85+tIBVgJJ6n4lf6oV+mfjdDJNMH0wAVFX90GMk1f5TxlS3Fggh92DyN0IORy5665KIfCktsl+K3VsGtpVOWOMiuDCerlSnjQ2rB+n3C+pIBdulz8wqonrNPLKgwKaC5B3s53qhXVq6oDNg6sOhqvqhEr3V2VNLBjmnSSNdrOLJ1zkAu6VPRjFcFz4fXDJ8i45hG94Gt3IGjOFYA8TTlQZ/qGH1oP1+8ZtlT1MAtHK8mQg25zOZUSCLIliWcbw8wfW5Ln04ssqnHX04euiCk6/3de66MPpuAQVZAEFkw2MKFw6a1wEL4+lSBvmAOMhD8vkOkFX77feLNw14YT/ssmc4A6oOdHBEkwXlgjH2k4Nal6wB4fIuX9LzZjAmorNeHMo5Tc0OewHwDTUh9HXxfGJsYkAbAAAgAElEQVS/uvCpoAcew6zBBrdyBlQwwoDxdLZWXLDFkHyF8xGE/fb7xR8XXByAAVC1oB18HQYIT+8uGfP75SCUs1o64he8v4j6cIQ+IqkPhxrBCHjdjBH6AblQkAeY1ondukSiELmsUPpjbyp7XuvDgAXxdNZVvWCLIfmKg6Bbhrjup98v3lVwcQLw8gqA5v9zC9jErutltg8gMxDWWMBaMVkmANWFyEV6R0uH2I1IzW7ypbkQOTP5f2ch9KsFkwp0kQlDAOmxzHpscGuGAQvi6VD4RgmAg/b7xZVlT5MATNXwqQc6KGwf2U2uGV2uzg3D4ua7fDnPwZcKgIdq9GaIBPZb0YdD7hgyIFWMXiH0eQ5vXS5HcMkc++9lz2t9GLAgns7KxxZsCkgdtN8vWD+vYDMAUpcja7lOR9eLVcIP4tcuob/3AOHCdW02VTX62ApB4Mv1v24gnPy9HiH03fJ366KYHYTHsgBBg1s5AxbG0+HLZaOp65i+ln6/YM5EwdYBwGj1cmUkE7+8THLNdAHhwrUOXtcrO/pwhF4cct2oN68BMDCfmsJM/n6PEPoYPp8bH3kCkbtjji2tJJA962YAWBBPZ0WBCrbYsFoOf9pDAiENk179fkuvf9nTXewKcBSjsn7ldonWbgQpx+26otaLIwAlfi2QQSJY3Yjy5i9dmsFM/oEDMM/Z7Uf0RiYUA7J+ToNbOQC3e0WBBm9qLad6HICG1ZK1XB5PoxnuOOIcxSXe/Of8xHV/P+FpwN47gKUpYHmuSve0pKZgCKSq5wqniWE1WZz/xouBm74KTMwBI17lVBXwtWSs+8/vL45Ff3vhpcAnvwos8d48DZX3M2hx9XIAnu0IIO0chu35AOgLL0yuG/jOmwbg028G/mNz1YWdETbm4I5BrFlov+EtD2wIo7l+Atg8D2xY7iw3V5diEqO54mnj6XdMAYcU+6gon7A3NSO2qFjlyZYDkAX6uD5Iam44YaUfVNDNxaJcLIPXcGGpfi6PnZdVD1wPspQBX/wl4OaNwN6Jqg+xwrxslcVFuYJblehkcYYZGPS3L20BxueBcS8nwg5H5kZkx6TQSbXFZcCQKadx5Cz5mPurAFxrRaa17pAR2PFC+ElSHKQ/0QjQcgCyGyM9v3SnsDBRJgL6msWCf6IfWeUJac8UFlpY8500DcCfvgb43hiwZwyYVhd2D/VSrKGAmIDnBkiafEcN9cprHgKMzgNjS1V7rRjRlceyrqif6KAkMgXIM+6tAnDl+zSL36O9+U8p9jGHQo285/2XA/AnXeNnKAorDXH/AILwbSvLEz6Ql2+cAf/3XcCdw8DkKHBwpOpFbE2wadzIdyh3jjNQirYWEwYq+/zJwMh8pf+xKNSwM6DZMmzNRRbM2K+2Ii6TlFrAWfd5V3i/F7IgT2LBF5LbIdkqxLPWvtzlAGQ3RpU3Y7AiixMxLOUB2t7pKQ8M0qCTnp8HkojJgNqaMEJesQv4AR3Iw8DB4QqAs+6SWRiqgJgY0HVDAdBA4Ba4xN7ndlSFAAjAYX4IPO5dBDMAdS2i+Jx7XTf1eEdTDfgAQnR34p/wQkRmjNAoByDT/ugFphXAmjAEn8qaPQAgZCs0lSckCNmVigEbFMsPBBE3DcBX7gLuawH7hoAD7EM8DMw48AhATrjtQwiXoqkTEwWd7LOneXNCbz6Tiq/TInb2M8ZzIFrTQbGiy92oGz7pXl/7jvdAJnb2470IbB3T77Sai+hyAP5voTqW6sKwFAc/TAdc5+3dvcsTrvPVYSK4SQb8xV3+6IaAqSHg0FDVh3iOIFTIFxtit9orL5Z/LD1Q4s+B8OnHVuXwhhdd5DoLGsgCCJ04q66X/Ju/vSaeAxDPvbdtmdtKDV90gVEPIl/xySkviOhmAEjrlzSkwj40SlQZYZ39I+8JBMx8mZryhOsKwqYB+KpdVSDFvhYwPVR9BD7uyX4SwRS59nNI+bRck/DzJ05v12M0nY8fAk8iWL5BB5qASPGRCi8EVjzv3mqpkC9ACrrwhKukB67GhpqRRowQMqCiYbj8oOoHeUWpdYIBAUj8c8WjrjyhNIJ1unzjDPjqXdUjJAAP8TMEzLYq9uOHICQALe/EwWe+QgddAqCzzD8+vgIgg0qp+5nYjaDzCgjmnCYone0klqP4JSgvvK+6LoFPoFMlkPGh+0rPWta4RHTNJJQz4M8EAGoNTPVU8opS64CC9zoAWTFChcq7lCdch6s3L4J/2QFIEBKA1P9mHIBmhPh3Ai354RyAAmWsR/PRs6vOR8Z8FMPS97yxtIlYgVB/I7jC0rIKSfLXF1EEB+BFFjQ3jCLA49OWsRTTEPzvzQEwry7VrZ5KwzAQAPssT9jw1dcHgCrORQCS/bgn+1HsCYQSveaHkzvGv1scgU/6R55Y1YIxhvOm1EZekQWl8wVDxJgwc88QiJc6AKX/meHDawX9z16M/Em7bO8Q08GBP/jEkAEVjMBoAFWXUjRA3KtNwOBXW3EkAZhrALktpC6lKtTV4OU7RHB+3kHWgv/zrnYZl2kCkF4uF8MGQGc+MqEYUCA0n1tkwxbw4ScHAHr71Q7W4++c8czwcBAmHVB/c7Bcek9b3FuwbdD/kjGWgzJjQ3thGmVA3jhfOyU+RxB6FamOFp8NrhsTgLy8Cpzm5QlVptAU+6CiNgXCaIQ0BcDYV8b0P4pi30vfIxD5+w72C9aliegW8MHzqrmh/meuFhYi0pKbs6D9fsh/n1XFMrYMbPgUByCZz6J+uEknDA9AornWFRb01WZEsACoHhOqyC7wdetT0QAK2KqOb5MCUvPyhLE0oQxzqaYNXL5xBvyVXe12vByLADjXAvgxBvSPGFGMIjCmJbEW8HfntxtQmxT0cmxp9UPAdKAZ1upA6EB7qgDo6oCUxXRtPVSpAwJpnUhuxAqWCCYK1MBExZljY5S8SYr+pxAFAuBayhNG26jw8usCQLX0SAAkwwcAEngyQizaXoziIli+Oe7/9kJvNk1LmBMe9ECO3XRB7aPeF0EYHNVPdT8gj016YBcWtBfBVYJuz7mF7VgGY/pO8f5WdQ1/7U67nIKNS7j0wIbDPFZsyNHHY7od/xdlEHj8CcC3TgCWHgGAPSxiSdt4312u/8SPAl8/Dlh4pDeZW2PD4J1c9+uyDaIDkgEJQKnTfG/N8nUAmu5HUnMW5ARbPfEuIHy/ACjRK7FL5pOR4RaxgTHofKl8r/S1ZWBnAGDKefbn3AFIPRPXB7sFiVQimKVgGdl5ooNwLQ1/1U+DQGSXQ9r5Evy1q9rZbP1lGQDZsPpzI8APHgXgod7qUx11YtBbFzC+/C+BL7SAWwhgdoLkONSLqy5oLogYft3ZI1F7EAC+phsAnekokhP4HIzml/PvthQWmPB9LJ7jxkcSr14jWj4/0wFlgJD5eoDw6fe4DzAYPHokWhHJZ3TFSkn4h7YOSOBwEtiMTv1aY0uktFYTmI2/43EMQmCuAJmUE0gmVD8EFdPpdnxhVhqzDr8F4NMtYM9Jfg98EVTeNu9Q2OFZBX7vr9vtgm/lcezczZ61ZNN8DCvilYCdPXqNDQpAlfGTKm0M6AA0PTAyoMSx64cRfPQHXsniOTI+fEWDFGp+Qb9BeySRBV2kpl0QxxGAlHDmkI56X6z+EP7UDYSdRgh/IouwIZ36lHabBE0GJ0r10Rgb/xA/tt/j/6aMAf+7R4CxzuBXWRGULwBfIrY6UNfpvLae7n0I+LO/reoLMqiVMbW38oUhkNkQIzZO7tIweGePcmWlAFTjAYHPVGwXxWoLYblEDkLuTT8MDPhXLJ4jALpaJB+ggU6xfgJknT7IKXIQXh4Y0FZCog+wxiUTwSkXUbSMV1rB/A31OXWuFpPUda/mRHKi1e6U+hA7Zq7l+A+UAfDtHg/LrptkQpZ727cRWOL9542Pa3rOvuOqagUltgtmJM08j4/PILbIDKz6w5PAHsbraTnMGdZWIwIzxIfeK0rn578J3LAVuH8CODRahV/FFQ/1IumIvXP1QudNfyNT8oVqcHviPcBd48A0g2RDuoDqHdb2SalZAdG9dnfDkAE0gXnH5ijWCDbKCq5/MRiV0QD8HgHQ63jG0hdsLGxA3x9Bw1Asli7hO3BwApgng/Gjvq01IHrXJ7q3Cz7E++YziF2rs1ZLZ+8H9jJsSoECWXj6igmR87aLgfbGq4GvbgLu2gjsHwdmCEIPSI1h+SkCRjpfUC3iNWcpoRrcnrYbuGsUOMBo7QBCxSTG/igxVcBIVGPWM1h1JYQPnyKNExGZMDIJ9b66eEBGxPDY1Y5nv+GCjfGAxD+DDpiawphABWZPjwNzNLAEIH4XCH0M7/5c93bBfI8Yk2cgVAdvdT10ifDkBWC/r9lGH51NhIsnsWHOfPmEUKT94WeAG8eAO8aAfWPAwVEHISNQlKQUglJjJExqC+H6Nq93kOpUg9szbwLuHa66QzFWkaFieXxi6hgVHOMCYGRuJ+5V4jYJIDKI9KlsAvFDq8QDrnb8NWVPh9EwdFkQ79TlSMIsN0Mi5s9MoOGno4U6f3YAvefL7Y7rvdoFLxOANSA8f7xSgWmd0kCQbmZ6mTLEnJ0UqWLhUkxlrBn6n3wWuGkYuGukCsufGq2iojnRFpafsU7MDxErJuZhYCsJosHtWTcBe1oeq+hxigJgXBrMmTBPnJKLrr+VED54ibHYvZos8sO+DNcrHrDX8YVVyglAKud0LtMjFPtNMz6QLDY7VomLJd671AEH4Xu+3g7nWq28ISvX58/hguOBg8vtFQvV/hEzxfqOevuTfpjri8vAWz8L3NYCfjBc6ZYHmBcitnFd06pxyb8W4gPlgonBqffTtdTg9pybqiVNBssyUsdUD7eGO9amnf3sXtxQipl7Wg/sD4A8AwHIyZMYky50Tp/xgN2OL8y051qw2hXzwRCEdT2nmck1RxHG+w5jeO9NFQBpR6ldMIMXlFWgVndqF2dVFsJzuOgRwMElB6DcI6rznemD0RnbwQiSRS3g7Z+tVIl7PC9kahiYZm6IizuLigliT/VoUog+p8P9l3wJ7qGEanB77k3VczroUToWLCsABud4ypaLCUoxf9i/9w9ADiICULrQRWuIB6w7nuZrwaZwLBGwClSqSyz3AhHbaRGEFGOmC44D72UVgjW2C2Z4lIF4ArjodODQcqUGqAxfcpG4mJVuVqcL5tbs2z/veV0tYK/nhTAqesYNHdO5PCJZos+WuzxHJIViuXFyJxupNLg976ZK2lizUKodilGUgzyGhokF8yw5Mf+qRkjdjfuDtwkkm7DTkNaBaQ2ox1q3eMD8+B6O3H6em8Kx1Ccx9ptWl9iYIUAAWrI3I3nHgPdOtsO5eOuxXXBdj0V1vOL/so3Cxef60tlSpYwveKf0pAu6ohfdJ8k4CUqgvr5jV6VGTBKALeCAh+VbZLTnh5gu6D44A6H8cVlkNK95O1WkBrfn31R5HSy+JCwPplAxRegE/2T+AloGncNmbQyogUQx/KwB4gHj8YWNTwRAOW0FIIIndoqNkTAxz/bd09XDGLBdMM6/pLKi5whAX60gCK2ujxzEAqGL2pQ1Jis5AJEAFHvTujYAKjRf+SEugm1d2COQLU/DAwQ44caEw8AtZzSIPgAvuKkdrWMM6M7xCMBoiBn4YpCE2NCfxWAA5MEuwvCCEICwlnhAHV+YORfDsWJGgPpMKwg1b9QpFnzHbD2BK2JGul9s8KkYW17vLALQRTCBpzXZpS4gtCXXMAkduuAy8E7PijPWprXJ5CR38ygw1fJDohh2BlRAgq2OeN7uTWc1D0AFNtmL54ESBsCaJcLkDajxj5ZXRiCIGA0waDwgjy8sk5+HY+X9ppUbJSCp6TnFCMXwny1WAFQ8rUAc2wUrRL6mXTAefWnFfnz3FpbagQKLAqAzoZjAKkkpXkNO5GCEvOMLFXOnnC4xIKOjnQGNdWSM+GqHQGd7JSsxUf+JzQLwhTdV4je1nQvr1MkPGtlf9yP2Dy+gAqZ6rQytfvdHSDxgLwBF8AmAYjHWluEDiKGMiqOVvtejXTBOuRSYJwDJAARgZAGWL9Nk+IM3SzgTydE4eec1nZHbtDaNAf1Dpd/SMx2END6kD0oXtFhBXmcY+OY6AFChnKnzl7NfdMR3qCAae2B+VVMYXASvDs3/X/zHJZcB84vuiqABEo0QPnhnwqQLyRURmZBPytnwHde0M1vN2lR6picoKULaxHDIEdHkW2iWg4/7b5zb7DSQAVd0/griV2JYojfpwRGEYsGBrOBmx/OgP5sAKANkcbFzNWTRnX/GSGImMYH/LYlk+gGvdT+bW+SWH+Ig1GqL5QeTtR2EYj5LVHfjw/ZDwL8yJ6TB7UU3VVoTjTYxYDK+Ivv7dzNAZIxpZSiU8jjKgIWTcykZkBawDBBnQdMr5QeTKI5iWCB09AmEb7+ucnOQ/aTPWn6wuzyS4u+R0Ob6CUGqJpIDA97AdqINbgRgBJ69CG4Jp6q/ckjXqB/RKla4WpkO2ODgHoynigA0JiLwaNiEt95YQKJ4FRC+7brKzRH9jZbN6iJYuSHm9I5iOAOhHNJfZkh+gxsBKPbLu3+JgaWDdojhMO5kkDWSlNTg4B6MpyIAjf3IggJgMD4MCARjFMU9QCgAykhSKnUCYHB9JB0wy5aTRUxmup4h+Q1uAmDs+hpXgFLnB6ULONOn5xACNJqxghsc3IPxVBGAiQG9aLeilWUJW1FvVXEN0TKp1C6At19TMSCBpz1dHtT/JH7N9yaxp6QkF73KBxYIr10nAMproB44qQGTj6sjUrtOFPtLeFQHLES9AdDFrq1E6M13MaxVCTNAXNFThIylLcor40zxtgDAPKuVwDMrOKw+SBTbtR2MND7sZwC7Qvm4wqHa4T/uIrhb+7n0EgbQdTijoyg+agWXT8llDsAFWr/B8qP1K7bT0pvtVwHhW6+t2C/m8svvZlawi2CKe37nhFtapkDnILRqBQA+v04AjMyn79EIkXO/DnzyCBwVweX4wxs9B4rRZgyPVFqykgDd+5JSpBU5r0vHyHz+jsc3ub0KABsZMCyQgeExKyFPVIz3lmcM6OfPAGCADYPE67Jfs6h7G0o+xvi7oyK4cLZfOgpsXwC2Lq9MwuuVERonKn4nSJrcXnQKcM7dwMMXgYcsVxkSebJgzOWPqdB1ad2f3gpsnwK2LXWeR9m3danUIV1lBSCPArBwtp+7DThuBti6UDWDmWA/DvXk8LRptfPtNUlihYZTOPCi04GH3wFsnwGOW6iAs5n3GeJJ+KLoE+9VDClQ8R6vOQHYegDYwuY3S6H/iJ8jb11ck0q9Qhoc9QMWgPBZJwFbpoFN88DGRWBiqQIgWyJY3lPozaGJ1KTEPh36zpTkJrcXPRE44S7g+Cng2DlgyyKwaclfFoIwvCwx9Zn3Q1DmIPx/2/sSaMuusszvjfXq1ZRUElJkKsBEGQyYhJCBSkUqAW1tsBdpuxEVaBzowXZqe1g90G2LotjQdmMjKqtBxQERdAWUAkUlZNBGkQRNyIAEMAkxpFKpqjfUG3t9//m/c/+737njPq9uVeqcte66b7jnnn32/s6///3v//++Tz0dmD0KzC4DM6vAFpd/0L3Gh6yTDgnvLwKzAWDGiH/ThcC2OWDrErB1pRgQisIQhAa+AED+HEEY6uNLyrRnZLSl6tSbrgLOeBQ44yiw8ziwfaV4UGbdegmA5QMTLFlqsfn7XecDW+eAmePAltXiXnkuZSBkRcm4UGXtU2uo3xsAZgz6y54JzMwDWzkgBOAqMMVBCSAUObh8QuN/CiTgcWAuyWhL1amvvBbY+VgxbW477paa7gIBqCnUrbUBiQuhAKDUot13IbBlDtiyBEyvtO5VDxvvVfxW/JkWNFrCeK8NAGsY7BsvKQC4hQCkJNaKy2LRIsg6SJ3IQSe1onKKC2CsOYMeN+0Dtj0ObDsGbFsEZmWp5S74g2Ir2uA22BScAJGA+dJFwPQ8ML0ETAUAkgDTPq9zdK/+sMWpPF19NxYwA4g3PtsHxAE4SQC6FdSgmGWRRIJLZJll8EGKjHiX1jwaN10HzD4BbD0GzC4WrsKMW2pNobZoCu6CLCDfCTqzgg6sr+wFphaAKQfgZHKvpRSYg7HN5XCL2AbAZwPrZGaj6ippXhgn0kqmU1woxnHedg5AATuWHig2FE1uVRwoxoX+Wcbg89S3AqCKPONcCi8oPtVP+9++G3j+oSK2xRBFDElUxbTS+3nvc4FpDsjxllXQoJg8FgdCQoGJJTTicLcQ6vPL6wbg9cDM4cJv27oAzFA5ky9/UOSvmg8oP86n0dICBn25JwjARWDSAUgBHN6vfdbv10AbARh8X91vDM2ss+NvAECKPVLCsHoyUgRqrlbnRwB933OBc+4DXrIC0IEmiLnE75di8HsyAcjzWUVGUi6uICMpVwwJVMXdeOk3XAxc+Hng+vV2esAYw+sWoP31r3eLcLwQBeQUrEHh4Jo2h4vDmJPuAyMLGAeEn7uqbgB+I7DlSWBGCwe31Gb9aL20kGDb/EGRxY6WTz8f2wtM8l4pgL1SgM8esHCvsuylME4nn9cfQLtldg6TZ0kUKorAfij23vAPCmqp3fcCl60XFINid1PlZrf41/dnApB6wSQjutUfIDJR8CGIQOwWEH7DywpKrWc8CFzqRLHkVYrB2jS2FQH5vkuBycXCAlIUUAAkCM2iRBA6+ARCe7DjYmQduLYTleiQ/XTTS4DpI+6nLhZW2nzVCEBaMLd+soIGqjD1ampdugiYWCpeBKA9bBJC9ActAk8LES26SqsftInLZ44dQif4Igdhym5WLrPDyuYH/7HTCNwDnPko8LXrBccjQaioe6BiKad3+QY/MGTH6rS3OBvCnQDuAIyqhiDkQ9RX+29yE3on8IwjxQPI8zkTiApGU3oVkD/4fGDieAuAdMw5MFQjEgg1DYsUku+a3uI0TGBfV7PotwHwaOEmbHEATvuDIutni6UAQoFRIFRYhfe/dhEw7tbe9Of0Si1g8HkrwRcevDajz07gIJ7n05rYyWIpb4ya/7vv8PRdFpj/LXDmkQLAnA4jCCOlTBRN/rFMAJKgkkVHpGUjySSBSFeg7/azqk8EgbSEq8UDRACLKDXSyaQ7Br//DcA4LSCtwnKhTEkQcmAIQhtM+Uaajl0uS9NatITXWzpzfcdNB4DpY+6nBgDaCtanYLN6fCj4u1ay0QIqtML/EYC61wSA9tAJeP6eWsAoDysFpg1eB0HIQRCIIkVeCqQf/05P3WCB+UPA+CPAzvmCaFWDKEuYcl1yMN+Y2dckqGTeHPEvvWDSNhOAfbefX0A6rS8CUw8X9066bFIfdqMHJID++DJgLACQumyc3gyAEYRRKFCLD1eu5ODLF6QvXedx0w3A1BwwxdAJLTXjd8seQnGrZ9bPFxLyA7WIKON63tYtCQBN/sv9QPm6BkLp0vl9t/m6ietR6fbyBA4gnXtORwRRpNnTtPpW6gWLH83lKqcOFTEnDiKtoHwy8RNFhrefyeztbnrBfbWfgttsP+kIyO32ELD1cHHvInrlvWs6TsnB7qAUlg/suFtAWkE55zYQ0QpqcALoNCXTEt7A3KoaDwGQfqoAOEUBa7fUbKctltwCajVbxvSiyvoasM0BaBKwwdKb9fN7NfcqBWGiSWykWXER0umeacUEonQgCKRfIgDFjya5yq8Wfsfs8dYgiuMxgpAg/vnMzu6mF0z6Zj5APdvPQec0TEosnvQosGOhaLuIYvnwEYSithE52F1XFAA0p5yigD4otCqygFKnpHUpLYP0OcKURYv6Mj4MNR433QhM0gL6QongawOg+6rl9CswKoSkEIxPyTsuAPigCYBmAXVfYcVf+n0SRYw6dP1YwNgHsgSajiJP429RrpWOM6cxDiJB6NINM4w7LbUGMQUwB/M9mZ3dSy+YVG0EoBiDBST5ddZ+PkCsAiIlQZDa3LVatJ0WXG2PbL98AB+4omB3oP/HgTUhmGgBfRqWf2TTrUSjExDSP/qWzQDgfAFAWyzR8rkFtDAKX75jo6nUguZxZ8NByHbvvqBQ36T1swcsBaBAGGRg40Ir+rt9WUDhQ5ZAU7Es2e9LLzglqHRxNkbeuW+oQRRls5jaMjnK0a9ecNf2R4LAwO829kQB3LTtEYQPUwzQAWgW0AGo8AQH0ljp/V17pm0KRcEifGuNOnocO1rACQbKPXhs8TtNwVr5uh+n6Zf3wDgu29g2FdMtOc8B6PdpFj08ZFrplw+ZA5FTvAQQ0/BT36FPDkRqBT9Jag7xYlQItY0f88j78sZzCcKPZlrAQfSCK9uvB4h577SCotUiEJ8opq8IQFl/PUBPEoBLxbRE62LSqG4dFB8r5bHcOtiOQSqT5T7RKzYDgJx+BUCCTxZQCwhaQc9oKcEnEBKknj5FsJ1LAPo9xoWWPWDy+6IIoqbeaO0VA+zHB0zxIQDKkn1GgtXiRxMIAx0Vn0Db+lkuFjLRCt5WEwD71Qvu2H5OfekD5FaciQay/GIbFgBXriwAyGmJADR1ck3DwTE3TQ4B0LetzBJErTYAr2BBSI3HTS8tLKBZPo/fWQDZp197Z3scjGb5BDp/L3+njMweB6B83Gj9wj3atOsPWin9WgXCFlVO/3ctf4iD8XkBkH5USlAZlNPZAQqARr5vxu1yjmH0givbX0UQKI63o0Wun/xHuR8E4VnPK5JQLd4VNttTBvK2uoiKOUf/f+GjwMNBh0NMV6J0c0NpcRv7mrYv3kh8/uHxYp+bVpwLp3R7sts2YzouSq3KGa+q7+x7Co4nazAerRKsVlV1QitF59dyyFZaYY0HMu9mWL3gtvZXMbymBIFMZ1ov2h0B+LTLisxgW+Eq5uU92iZ72ud9vvR+4JFp4NjkRh2ONi0OB1/UBCkvEYRhfuNs4OmhhiPKnFQlx6aAjMnSXJUAACAASURBVPjmz1w41nnwO4cCIBvBwZgTAOUHRq3gyDExD4zRGVYEnpm5LqmQc0M5esFt7acFl0SlHiBxuTkYxxdaihUC4QVXFu5FCUD5QtJl85sjGA0ziQxqeu/fem+hw0F2fLLQGxFlYMRvo7v1WmIVtpt1DFkXvOR7LwJ2HSkyoZmEypoVVe8p7b6qEMnidGG/Vl/L2aPOIwuA1pAIQE3DAmFa4j9f7CPaFpCHKujr5xzZesGdHqAqKz5X+FLRAl58le+jui+kTBALMcgZ73CDBkpN2/7+bfcWOhwUyCEAjQTcAVhKdjkPc2RajewKyu/n1//qJcA2uhBMRGXQOcn9U6JIOjXHQqSYOsVoQp1HNgAvz8yny80H5PVz9H6RqVd849WtXQ/zA0Ow2ayGLJ474L0G79vvbulwkJi8BGCg4S01SKqofoNvSIC+5zkhFUupV8rUTpJN06KpaBkFQm5M1HlkA3AyM5/u9Zl38zrk6f0iU6/4hmscgK5ISUtCTowyDqb7UxwsqFJW3fo/vbuIBJEZ1YRgyHwQKNi0KEl1OKTCZJdxtPDn//v8ooaDaVgqFyiTD2IKfcjZS4Fo+7g+HXOPv84jG4DIzKfLzQf8KVfI/FNKrQ6h94tfz+vOA9cGAAbrpylY2SDlVTTt+uCnV3/V3a7DQQAysJAwobZJgUXi78Qayhd812WeiOAZzEyUiAkHMeu5BF5FwZQAWLPwknkLQy9CrPMy8+lIHZFzvN3T+YbV+8X7c64OHHix74V6zIxB+RJ0wQ+UU992tYoFy3fcXcTDxQkoPsCUhFIczKVCegSg5B8A/PILN9ZwxBSxtiKiUAOi7JW0dLTustF8AGbm0/1o3vjjnSGdj+lYlGwdRO8XN+c1wABIoHk6k61yuSCJITq3jDY9Vx0BqK++uwAfX6JkI/hME0SC1EGguiQ+isqcQRLrF6/0jO2w+6FMnZhyZYsQ1W50qOHgPX1NXndtODsfgMwHzMin+0+ZN0S9YOllMzWfLwKQSS396P3iY3kNOLDPM1y065H4gOW3p4uTDkB8zWdb7FgbdDhEgJkCUDRvogTmd/vPv3BVAUBuvylNzAAYi4hisVQnEHoIqWblrxqm4Mx8ujfljT+YjsWBYgIOc0oJPsq1slCpH71fKybJOEoAuuVTRSCnYlmU6P/Z4iSJEcbLv+Yu9/1EAh7JKEXDKxq4ChUiKymRbwjgHdcUWTARgLYXHSr2LOU+BV7MVwzxwOfkOWybYAGZD5iRT0edjpxD6VhcOQ6j94tP51wdOHBdMeXa9OqWRcmWXA1XLUIUH6zyCwlAs3z+YBkfs1u+VIejJEF3ckrjI9T0y/aMA2+/tgAg08VURKT8vbKMUgAMIGzzAcOi5HknHQAz8+l+MW/829KxhtH7tTz+jIMAJPCYMULAWd6fvi+EY9ouoZBM/Kx/4LUBgFLgNC5o16FrE8JJVJgkiFhaQQBv3+dVbMrWVsC8UxFRkjjaVsW2DtRdOJ/vAyohVYK7A+bTvTdj8HlqTMcaRu/XxHkzjgNkIOWuDr8jnYYDKDutgpUhra0uAlAyCCUAK8BXcjBXgLCk/h0D/hcByDxFAdAzoFUqUBYRJTUcMWdPP7ONL6i5bLQeALJRQ+bT/W7G4AuAOXq/lsGdcRgAY+glLkYclJVTsa6ptCX3uQjAKINQstFrAZKIwWxQIhIJuovB/Nx+r2LzFCwlj8Y0evl/MYk0kieVtcvrwGUnHQCVjjVkPl3mItQsIPuElx9G79dOzDgMgGkAWlNyBJn8xKprBRC+zgEo4LWRgcdVcOCjjlNvmx84DrzNAahaFZWLygKWxUNibIhTcPD9BMLLa65bzreAMSGVoXvJ/Cgh1WUfO+XTZS5CDYDs9GH1fnOrIDcAkABTTDCCLYK0Cwi/586WcKJUiEpC8CCBYDsiiSplqUIUmOjf+o2tIiKVUJbgU5uSWl4DWwX4+PcXnrQATBNS+8yny1yEopdcay+930y5YhgAg+9n2OoUeI5TdQer+32fdhmGoOBZanBo+g1yEKU4dYgFSvqB//vZBIBt9RshkTbW8ZZZ2hUgvDL3iU3uux4LSBM0ZD7dPRnTH08VAIfV+2XAOucQAMuVcKfFSD/+IAABsEoGwYAoHZIKEEYxRIHwLS8pUuhjFVs6/ZZhIVWyxVKBBIRXnbQATBNS+8ynI4tBzkEACv+chlUVIKE/5cRGsWmlKfIzudc3APLQSlg3E2OCyVRc1kpU3DgBmKoQsWtlBcswjPu+nfTYtBL+GQdgOf16GCZW6pXlBCqWSgqJypoOAFfXXDifbwFJLvi5HAjlnUsiIe6AjOp4iQNQHRlT2PlgJCUbbc2s+v/hFwFb/q7gm6HlYpBbmTV2sscQyy/qFBj2v0/cAdz/HGD7NDA1AUyOOU+1CwWOewNjKj6/O03F1/WuugW4/XJgfBoYmwDGdH7IxB5kLPIB+I8AfNwZgga5ck2fJbEm8V9zNWPfrasbgMuPAcuseJ8Exsb9FdBhA+7gaQNKB6TfcgCYug+YJT+g89aoBDMmIMScP12uTKj13uDv8zsKig/uJ1uQOsnojm3qB5P5ACRBH3OhPuzzRN9DV88HqQLEWPJnvTy5nm/t/1s4BcuSpRZtGAu4fi+wtBVYEyccrYwn6hF8/FkJp9bKxAKVFsn/d8urgbHPA9NPOEOWl4+2cfoFHhfVrJTZPKHSj5daOtup6JyCpPx8rHWRVQ7WOlrYCMx8AHIzlxkALPD9c0VB+x/A3E/+E2fUYHXdF7KTGwdvTd0AHP9r4PgWYG0KWBdfsBdsMPfPrKKsoL9XAVLAvO2fFylCE4cKliyrDVZNcGS1CqEYhWFiAZV+XntaURdTLmpCEbpchTYLqi6NrkMCzLzt5Xc4HwyJmmkJ+Z73jQOh4NWeDUZiK1K08f0EXt7CMHVawIk7gaVpYJUA9LI1Ao8bzKX1cytoFtFfpdCIWz7rgzHgth8u0oPGDwETc8CEMySUzFaikgtlpW1Ta8JqNba7lVljSRgW+Q6ZP/57WQvj6fydBjXfAjKbgEvMLwWCvhNoipgNpnQshlS4IGFWzIk6ylWwAz93ETLxGWB5ClidLABoIOS7pmGfG+33YAG5mND0G8F4678vkiPJczNOAC4UyQm2N8w94kirFlfIAl7i402d6dbPWWAtrsjOFiuCvAJZOQE0pHTFsckHYDeCvhNgipQNxoAz8/8IPr5nbvH2jd+6AThJAE4AqwTdZKEBLDoDgU4+YVkPHIBoPwareOt/BkDexsMFAFnbzNJYm0IDnVwbt4uyur1kwL7Tp+iZM/08WT9Rc7DHUmuYTr/x+6o4ovvu9fjBbgR9JyA+omwwxvZI5ULg6ZW7y9FPf9QNwKm/CgCcKABovh8ByVy/UCtJq2f+X1yYJPGU27lIZLbuEWDsWBHesZeDz4iURLUWa1TE47LqK12fZmd3OXidFctqm92KatVs1jAEsNv6sdymaa2g8+xUL4I+Pn2beCgbLGWHI/h8G3oTr45iK86POlbBU9yKI/AcfLR+ouQwH9BfmmbLlTHboOnZ/T9+5vaf8FUaAThXsFOQ45mUcgZCWTAxe0UQ+urYMO1/37GtxQmoLCBtRSp30LrDp2SFdzYMgk/R+VNwvwR9mwQDsaspGSfJgYDYNTbp8psCQFJxEIBkQjDrxt8dXCUIY+COH5MVFPi8SOn2n/QYLZ9Gp0cxANIP5IvAkzVzxivRydnKNzBa8fddM84b6AFyAriMF2pajk9kYIeoClXmA3AQgr5NQEHMBqMVFMNaIOayNRL/vhlH3RZwmhbQQUcAasrVVGz4EtjCu/3dfb/ID3PbT7uKAZ/MhcIC0vqRTo4W0IBIEAmEtFwCYqjW03bcmdwBYeoWgetUbrR8snrloiR2drpACf+rD4D9EvTVjIJu7HBV+781X752Czj9lwUZkTEgcPoNPp5Nv4oBRhCG6dd+1DkMz1JIhR1BAHJ7zwqO3fIRRM5tmDK5CoQKsSgOeBYBKFZULTqcB9r6Ni5KYmd3WKDUA0BlhNLM8EbT1QBXBU72aI5ZjUcVOxz7WLkQ8d37vsart/uA6RcPsxNSAtAXHDYNC1AEpf9s01kKwuBwGU7HgVt/1jtD1e60fgQigSe/j5bQp+KYpGB+H62jT7P8/ZypBIC8Dhcx8eY9wF015abhmnoAyJ5WSrKeNgKO9SHxnT/LSasJBim5lRjWBEIVeROInKL1qunybRawLgASdEy74qjaNNzJCgqEEYzBGvK0297mAFSHEIB6ebKDgc8J1ksmV8t29f1en6L5v6cxIK5iK6Xne/5jCTiFcTqVn/r/tWDPWwXnEPTVgIKUHU7ljASawKefIwDpMdRxRB+wFgD+RREDJABpwSzz2c0LfxczVjkVKwaYgtBBezu3SvX08d39P5uO3QKahXMQciourZRAGKZWar/YZ1xXRPe8wQr2AUK7TvbOVTZBXx4MBECRnConUBSFEXT6mf/TK+/qmzAF/0UBOPqBZYF52HrTFCw2LH5G8UCzJEko5nZqmRnPh/uCXmpnVpDTsIPPwKApOaSA2QLDLSHf97iPx0tpISLfz7bl4iFfsUsnj+HZWEeOYDCDnDmCvZkEgedcCjxGseIhBYt3vx049HwMLRh8gA9gh2MoH9ABqKJzxf0McO7XlSAU4HzhYYFq+5D7hwBu/98OQLlIBCKnW39SlXNY+nqeiq2dkQg+gnGPb9/ZpT0lq6MV5D96gLCwgDmCwbdnCvZmCgY/dxy47xxg5SWuUjigYPHFbwA+fyGwfr2rXrMvPB+vp3L3GHCgi9JOHQCkRVPppeUBigXLFymyejYTB4YsgfA20ofRAlYB0FfAlvQqP0/TsX5PLOB5DNu471cmIwiBaRww/F01J+mz2pqChxUMZvpJlmBv3iTocsW4dzewfhkGFix+2febXDAeJO/YEILBB7pU1g8LQFo98QASVGYNQ6DZfEG3fnEqrgLhbf/HV15anbkFNCvohWSl9XPQ2XTM/2s3I4DwPIZwBEDfgitH0Ek6N6x+u/iD7T4g/YdBBYPpWHEaHlqwNw+AQa4Yj54JrJO+aQDB4pt+oCAyYvOPEIQDCgYfeF/9U3AbAMX7ItAlVtAspKZdz5SOlvA2pstxjES3wJ+92NgAGK2gwi78QoVfEhBeQACqNNP1RdoA18kKdgDhxkUI/zKIYDCnqyzB3jwAJnLFOEIW7QEEi1/1Y21ywVglCAcQDD5/Efj7M4CVrZ5AKlkhxeQUaxBI4nvFzxf8IfCVC4HV7cC6ZEX5nen3VX1vAGLZq8ysrvHY+QBwbGfI2E6JpLvdX+ksthpUvQrmX/sVDGZVUJZgb17vJHLFeGQcmCdVb5+Cxd/5xjZ6QzzMLOQBBIOfTV2Ps4HFHQ7CLQUQmUrV0rgKJMsCjsxGAqTn/hzw0EXA4tnAyg5gbTYBorKkUyLnkB9YVhTxu+kT13iccwtwdBewPAus+b2ar9xJAafqfgMQO4dh+J9+BHe5gqZZZzYok1JJUcpaR6bp93P+W/N6p0KuGIemgEWKgPQhWPxdP7NBLhiHKYHUp2DwpZ8rLOD8tmJQVplOLxAqmbRKC6EDYC7/CeCRPcCx3cDSrsISrs04CPm9ArZk55UvKAspYLqPaPdR4/H0g8DRHcDyVr/X6VabLHk2PhjpPVZY7d5xwF6CwS9y/4LbbVyQsEKIufGiKe0p2JvXOx3kinF0GjhOQY+oNRtljji9TQPf/fOV9IZY4Gq4D8Hgy/4W+Oo2YG5bUUy04vUcLCqSJVRWszJbNgxSmMau+q/Ao2cBR88EjtOqbgNWWaTkIFz3YiWrF4nAjtN0nBZrJnU+/8PA3CxwfMYB6LUra3oglL0tps6wlVha5rLiqd9AdDfB4Je6U0s/0BXTDYh80Sr2FOzNA2AXuWIszABL1JaKWq1R+nwGeM17OsoFY5XTVw/B4Cv+Djg0C8xvLYqJCECzgsxmZlq9T8e0XGUyaUizavPtxoFr/zvw2BnA0Z3A8e2FVV3x6c4sqwObckeyhiXAowUSADhD1XhceDMwx37lvU4XxVN2n3rJIocygkr/Vbs7fe+EdBLcfaXXQ3IPWIrpBB6XlnwpR76jYG9e7/SQKzarxM7qJFj8mg8UarMV9IZ4gvNDD8HgKx8HDs8A8zMFAFnPYQPDl0Co2g4fpDZLqKCxT0/7fhJ4fCdwbFvhRiwRgJruCOwUgCpeCvUjZmEFxhfk9W969kW/B8xvKQqnVgg+B6CB0MsI7P70AHgmd2n1NQ0rv7FvALIlVYK73MnQCDLThSGZoDpuP7uCeuX5n8zroB5yxThGnQ0CgyBMxY63Aq/5aBHG6EBviDlOLV0Eg1+0AByZLgbl+HRxnZXJoqqttA4ODovlJZVuSjTQFtq+NwNPbHMAzramdVpVs6wEoPtdNg37wJfvsYiJP9NFqvHY+7vAwjSwxAeNxVO8T6aNVRRRlT6hHrJ0Ovaw0WDJCKng7g86APvNB9wg2JvXO33IFWOBgn8EIf2nRLD4tbe1+AU7yAWbZeskGHwVdd2mgAUCcNKnJgLQrZ/V9/Jnn5JUYmnAE3hCmv3+t8AWQfSzyPK/POOgJgDdsgqA5nfJAvLdLV+bz0kK4RqPZ3wQWJxyAPqDVhZQyQr7gyaXI9axWCFVAGLvRUhV46PgLnUWBs0HbBPszeudPuWKsTRZAJDTo8l8ui/42juL5veQC7ZpsEow+OrZQlqVVuH4FLA8WVyDAOTAmHUQCAWQkOlsQAwDt/9/AE8SgPQpNa07+AhAA6HLXbb5Xr4IaAMfv/eGvP5NzyYA7UGjBWTWjh40v9fSyscHLtaxhJWxFVsNNAXH1khw983+DYPmA5aCvXkdNIBccemfceooAfhAAcA+6A2xLuAGucxrzgKOMexDfV9OwbS2BB/BEoqLSrBoYGgJ3E8qLcIEsP/ngCPuUy7S13L3wb6PU56/m/Xj4Ps0TKCXQA6AXuNeZY3HMz5QANAeND1kwcKXlj6wOZQ+b7R+Pi0PD0DeFAfk590CKg8qncfoFzIRVWVqfFfBhgn25vXOAHLFWCDbvPstBsJZ4LUPt+jdesgFg+qVptWq11bg2gtgfuLiRAAgQeg+oEmsOujsXb5SsAoCIN/3vx04OlNM6Yv0tdx1MKvK7/TFjVmeCD4HQQQhf159eV7/pmc/kwCcKABoeYvR0oept7SEoZQ0Tr1lPuPQFlAtO0nyAcWhpzw/FSjFzGjLx+RGvxzoSeC1hwsA9klvaFN5FAy+9mJgnhaQ0qqagglADo4c9AhCDpJPl5ZommQ8738HcGw6AJBW1VecZv0cePwOY0/wl1lAD/WUCx0mMlDLr8bjmb+Dwp3x4nkDYbD0thIO5aNtfmDi/xGEeRawxhs7Vb/q2huABQJwAlhyy2cC0xoggjAAUCWWAkksOiIY978TmOOqeqqwqAx3WGhHK06n7TDwOcAV/iipPAKjwgrZm2o8nkUA0gKmAHTrp+o9MTrEYvq44o9pZIOtgmu8mafCV72YAKT/RwAy5OPOuVlAAk9Oule6xQRTWUKlWtkU/IvAHAHti5oIwDK841ZPFtCmdr0U8PaC9hVultd4CIC8P2Ztt/m5/qC11TJXlJDGGpfGAmYODgFoCxACkLpuWh3KCgqE8gNVZK4KtxgjJAB/2X1Krao1rfN7CWZf3LSBT4uAEIyWBVpipL7GgwA0AW25GbGENBTRx3rm1M2w39mmrFVwjTd1Kn+VAZALEE5LtIDyMWUBvbLNLGHgd5H/V07BDp7r3uU+Jadgn3ptxekA5MBri0/Wp4wzBjDbCnkMWMqVpE8GJwLQqvfc0pqbkVj5aNk7gbCxgJno30cAjntowtXNaZ1suvSKNhsYTcVKmw9F5xGE+94dfEoP+JYhD/8OC8eIPUsUHokVVKB78XszbzAF4Pvd//PCKVGIpOAr78mn4DZOm8YC1jco+w6EFTDDPJqeCEBZBa5GffVbhmQ8DtZW5TYOvPhXip0GTuu22lTMLSw+aAVl9QhEWjurI/aQiLJkTMLsX9R3r/ymZ73fp1+37OU9hunXSkdl7T3QrhKCtlCM59k2i5CMMSIAGdqxEIwrmptzTsCEut5yilKoJLAcxCq3fe8tLCDBFwO+tKjyuxSCMdYEXoeDrHcHvu0tTwLzmwHA4N/Gh6zNCqqeOSxC2lb8tQSiMwbuqXIqAcjFh2JjBKGJyShQG6ygVbfJegULWBYcMR3rvb6oCRaQwFPgl1M5rR7/JtBZOIZWx/0+s4QeY5z/1/X2tFnAxPpFELaVkdLN8MWGVr4pCBsfMHN8bmTKfCjZ0Ncp456/x58zLzfw6Qf3ABd8pUgEYmqk5bGyek06IQl1bkXScnlN/u8L24Gdx1qVq91KQvrpgwaAAw9p+wnXPw1YjyWMGtDo2ASOFGMU7SIEUzdYD34vMPmXwLbHgdkFYAtlGiim6DpxJtvq9LtlVr/aWKEB8pUXAOOPAFPzwBTZ9r04vdQ9Ts4pAZ3cd+yHxgfMAOH+vcA69/9Uxijmz/AerYpdar1lNSMYzV+vWY/34I8DY58Gph8Bpo8A04vAFEFIknIHohGVR62QhFRSYjQE6qFri2z3iaPAhHNNlxKwArI0Q1IAxwfReacbC5gBPp66/5ICgLKCtqnsrKKlrFZUFPKOr7osMTtdsxzqQRZ93Q1MPARMPllohUxRqkEK6gShOP0S+dY2hlRv99y+ovRi7IiTnTvLqmg6xDPYpqAUgRgsoR7MxgJmgHD/c4E1FXu7FRRbvEgd7evXWlbPpp9EgUjiJpwe6zwOMlvpAWCMVusJYPIYMOlSDZRpoGiNxKzbdIQlXONMWJbGtw4svdgz3El47nzTRvPrrKptAJT6ZrzfintvAJgx4vsvdQvIXK5VYF3sUZxmJUvgA1FOvwF8spKyBtM1y6EepI4LqVMedbEaTp0EIKdPKh5FqYYqSxgo2jgFr13j6XXHnOiSZOeBVSvyC8qC2r05FVvVw9cAMAOA178AWPMp2LJaaekiCPXExwHw660n1oB/niGQazwOkkSepbJ/72I1x4CJ+cJ6lYI1riccrVicUuVSmIW82pkwnHHVOKbFsOozQGkFkwewnBES37ABYMaAX39ZAUCCb82nIlo+40p2gNnvsoKunxH1xGwA/LOzdQOQJPIuHzV2GBg7Cow7AI0l33XfjOsv6oVodes6ISbBsAZMX+kJxU56KY7pkmFVhOciuvTzSt05v0+ryuT/9gDrZNe4wPMsI7VJP3GcP7gUOOdvgL1rRYJ0ZI5IV3hV4/wrGYPPU3/AiRhYusy2K7mU999P+z90ObD7LuBZK0Xdkeq9NSX2+o4HLwfWlopFCC0fgciBMtAFC8CGrYXVoVjnU2G7rTXrzh4kfRzLY1kyGwBoeiGcPiXb5eAzdXWnazPCSScb4j3xfmav8Cx2p50lAMW0VXINitCogl2r9H2dcctWwQxQsn6ZTBbMNtcgdKIbiZj51VcBk38CXPxoQcfCUg8pjcYgZScw/momACnXyr4leBhs5QaBTHpf7X8dMPYJYO8XgAv9e8QJlAZZq8D4xSuANYKPJQn0AR2AHKy1MACKe9nfFI6IEqduEWoHIJ9wlsVKLekoMCa9EAegSTYQeM4TXco2SEMkAHEbBZoj4bbYtdyCVrFqGXgTSxgXYTZeHLi9AMjEQRCVUXP/n4KUaaT8vVTi+Rtg7GPAuYcAWlMCgUVkQfJ2Q12yBvPXMwHImhDWwf81imsTiLSEvHZkr+jY/p9CQRD4p8DOBwteItai05qn31FFdfLlFxYWgCDUIkRkj/TxbCEi/89jfPZ3X2VqYSJQbmUNQY3HQT7hbv2sLoerVwKQHNEEoCsm8R4MhPRjXUGzVEIKIoY7yaEYuY4dgGb5RXruoSgtSCLLarkICQ9f6QNykGjFdjsIBaI4kGlt8W+Rg5g0HJ8qAp47nihAzFpuWtPIMBZJlASILvR6fQ0DCVbJCkJOJCqnk4pGpb99tZ8MopyiKDX7WWDiwYKXiEQOehCrgKh+eJQ+EQHo1Lby/zRlyf8TIbf9XS5ftIb8I92YugH4ay2pLusorl7dAoonWtMwQSTdOFuQSLTGHyIC8kxSIQuA4hwU2WUAoO4/grBcDbsfWElSzg+JCoYDoEGM1ixSkHzgF/wG7y8sIa3J7JPAGWuFJSQIaU01iJHUiYP4e33BrPOHmG/JMaOfTZVYRhwGav87vWKPJ9/rSH4IOGO5sITqg/ggxXs4TOaBAECbeoOsgfl+DrQShFqcEIhyyt0MbMusEkx76iAZXKM8BvXiZAGlF+KaIbaadYpem4aDgpJZQz6YJABV5VcHAJZ0v4FxX6KG5UpYs0KnqjhRuagEVgPglYAl9ciHf8mdUrJh0Qx9vkDBzBywfbkYQIGwahA/kglATsHsDzKA0BATiPyZ4NEDwIeoa/uFYKKXL2f24nQoIgd9R3yQCMTFqwIAfdBWI7+yB5ZLECYLETd85YJl+2YAUNosLIel/xYlu4Jsl6bhNhD6it4WJCvA2Zc4Gxo73RcgJeOqFmGR6rcChLYACyGojmEYdj59KnZ+tIQRhH9IvWA2hiREjDeRI9Cly7fMF3EtWRFawhQIf5IJwE56wdTIYdt7tp9ys1K8JnoJvod9Wn682PNkP4hUy1ndWgstAtBDMLYN5/6PAc5DGNoF4SrZfN+4+IhT8jqwg2Cp8ThIJ5vfSWBXAVCrWN9SMxDK+skaOvhoAc8me654pmUB3f0wyt+E8FyRAGmPlOEoiSD2qgvmAKoOm52fAuiTDHSyIRxx+lI0QxxADubfF5vffMmSajrWlP7nmZ3dSy+4r/ZzAUEHnQ8R70HsXlK+PgJsW68G4XYGZj0EY2EYATCAT6tAhmE0DXcC4faapcwMgAIfLb0kuzT9Qmw5uwAAIABJREFUSi+EfeALkSrpBovbrQDnkm8wAo8/E3i+CCsZ98NCpAp8cUekZyBavI4ET/TnaAk/RQCyAXy6uNSPA0i+wMeB6ePA5HFgZq2wpNGK3FUDAHmv3fSCe7afX8CB4UNEEOolVi/3obastNwJ9cO5BOBKEQMsAcifHWzRAigWWAlCn5K2bQYAOe1KMjTIR2kRUhKVS7IrLia0v+3xwHMZMCbYNP0KfG79zAqK5DxOvyEuWu6VD5KSHy2YAEQAfpaRdl5UkuUctIpBnCIIl4psD03FtIIP1ADAlBuJM47EqqUX3LX9kSBQcuuyftK78xUkHyQ+RLqHZ3Fv1KcgLj5kAQ1s0Qo6IA1nHhNLQzA8ZxvBXuNx8DcS5UYpNnoYxsCnUIqvZo0F3wPTMa7Hv53HOJVbS/l+5bumX7d+5WLE44hxIRJB2NMCqj9ixwuE90svWCaIA6bAp959EKeWChAyA0PTOV2unGMQveCO7bfqHbcS4rJR7Ewqnw5AWhLuImg2uFQAXAVs8RGmntW4+g2hB3P79L/EJ9zGvqrxOPibiVihAOgrWQOf/EBfBcsPNBBqW9Hv6zzGqFzmoXz3B9AePgXiq6bgiv4YOB9QHS8AfpkAFMMjrWAcQA0iO9XJiQyAnos2vV7ESHOOQfWCO7Zf7F40mZFQScRKAYBaSU6vAVcTgN7xXHiUFpDTMK2dFh56912BTiDcvpkATIXzCL4g3WXTZ4jpGfjoF/oihL+fx+0yWUABLwIwtYKKIabgCzHQvi2ggBKn0McEQDaKT5cGkIOo6SuyYzEfjQB0EM5nZgAPoxe8of3sgSqCQM3jkdFLvpRvR13+7UVRuhUFSavNO6otwp88ZZ3+t4M6HLtch6OT9AG/q9cmtf//gV1JDYcnQ2zY6/YakfSrU+Pg1M45NqPt3IEtoM7WFHokyrWKkooglCMWLYjiUXMtK3g8Uzd1WL3gDe3vRRCoUEYCwGtYFxxqgA2E/jI20F5hhmQod98BHNnlxOTig1aGiDanO21yV4DygWuB8YeB6fnC9WEtiKVVKeE0ZGiXWczeJoWMIig5a9V5DA1ANoKDeDylZ9NSXxyAsiKawrQqmCv2HVf5e8aRoxfc1n7xs+khItAUvojvyWryxVcWJZksVSyZoQRA3dcAoHzax4Gj2wtu6FVKM7gMgti02jbV476oUJJs1j/AbA1mQ3Pm8eTRsoZDtR+xZKCiEKmMXTIeXHPGdhYArX8FwG4DGMEnAHIK4yvT58nWC2b73cexaZgWWaEKgU1gjNbPP7PvOYGsUSBkv3hBtmRWNzxjTk9RWktvxp6POj0vARjY9sWkFel8RWxegjIF4RjwAOnZWMPBTGjqvHmszxJOBUD3xyznL2bqROvoP3N3q84jG4C7M/PpcvMBef0cvV9k6hXv+2Yno5QfGArRbaCC0mWv2YtF3ecerNDhkNZIIsXQRv5dlTtGADJSz2gEE1EJQM//026HdIEZLC8B6A0tk0g1Ja8DuzJdphS82QBEZj5dbj7gxZN5er/IZI+67pscgE7QaDOUMyC0Wb8+gXjuR4F5J6YsaXnFhBoAGEVvUhb60jISgCQnoh/OLBgvIrL8v7DdFkEYM5dtNg97tvz5zJqzdfIBmJlPl5sP+DJP5xtW7xffnzeh7H+Z+3+RpkyWT1YxuURJYVtx6T0fCTocouQV85VkHRIGegEuEv/YKpkA/JceVmL8kv6t5/9pu62tfiPWcFQVEa0DZ9WcLJEPwMx8uvfnjT9IgZyj94t/ldeA/S9tMaGa9SNdmsIxbvVscVJ1GScoMt4UPwhAsmMZ0aXzQBsvdGRBjQz0FUpEJRAJQOq4KAnBdz+sfiPJ3bOYn8fsykyVWMfiN3BOzckS+QDMzKe7OW/88aqQzsfE5kH1fvGjeQ0wADodmVGwOeiMsUqHrGOnS4UFy9P/wAEojkEnI+IqOIJQNLgpCXhcmLAtD/D+kgQE235L93tj+YBqgTX9BiCeW/NedT4AmQ+YkU/3sbzxBymQuZhm8g1T+QbV+wWFdjKO/Te2mEFNlCb6gPF708VJ1TXHgKd91GnZpDfi1k/gM2vqU3DUnCuBmNQe3P9vw6pe229KOvB0K1k+ZS+rnrfM2AlA3JMZtah/EZKZT3drxuDz1O/yxAwu9JgJxr3lQfR+8aa8Buy/wdWQZAVl+ZzCrG3q9c/YrkmHy3IRYryAAqAkEBIlopJxNNUbER+fA/H+/+AAdP9PmS9dazicJybm7mlB8nR2dI1HvgVkOlZGPt2nM29GCamcGZjAwlQ+vvrV+8X/zGsAAUiLVPp/wd+zaTMFWw+/kAA0GQQnpCw5mDsAMIrcRB5mC/+MAffTwgfwKY2KfmCZ6ZIkUShrxXxBX4yYaV8Hzmcn13jUA8CMfDqWYeQcSkhVOl8U6uxH7xekrsg49h8oiCENgC5TUG5vKxxT8f2aRtOtcAKQ1s8soPuOVUIwpchNlEEIOyNSIrrvv3hwnckWIZPZsnbcDyzTpvg3lU8mpZQqozyfK74aj3wAKh1LgrsD5tMxiz/nkGD1sHq/YNFOxkEAcuW7oqmXlisuQOT7VV2jwi/kTgj1RkoZhBje8Z83SCAEEJZW0C3gff8tADCt4VASaWIBK0HI9q8BF5yUAMzIp8tNx5Jg9bB6v/jdDPSRns0BWIZeUitIo9IhHmhXTvzCPQddccnZ76U1V/IvC4SBCFyg26DFNg7c++Mhhb6qiCikT7WVUmr6lYn2nRKyrdZ51GMBlZIc07GUBdMjny6XCiUmpA6j94vMZbgBMFo552pu27PXAqXTyAUQcitOQjAm9xX0N9pIwIPmSCmH5QuPqER0L4kDYgp9zOUL6fYxkbZcFceyAreAF3GlV+NRDwAz8uksnT3jiILVSmpWNlhMze+k94vMZfgGAPJeHDjpCrgM01Tdry9OzvmYAzAqLVWIwEShwzbRwwSEn+MqP6bQK5tZlWyhjCCCsC19Xv7gOnBRbgp7cu/5AOyVjqVMmA75dJZ9nHF0yohWNlhMxKnS+0XmMtwAmFq4imnYbrEqNJPc+9kfd62RKh0On8qV9hXZ9askEPgAfI56ziocUgVbzGT28lEtRMoKtg7lBHtznfZNA+CQ+XQWM8k4uglWK/NLYKzS+8U9GReXD0g/Tyvh4Ne17Yb4Zbr6g6y7/aNWcoPpjKRTsJIags5IJwkEAv6en05S6GUBfRWsUExZyVZVQCQwrgN7Wfdd41GPBczIp8ODeXfTSbBa6YYxlY8/p3q/udc3C+jTbtvqt2oadnB2m4oNgMn0W0p+hYWHWbwg9yU/0Kb9EIy+5y2hiCit4UgKyTeAkN8Valk4Le/ldlONRz4AWWBRM6fdIPfHstw/G+SE5rMnVQ/kA5AkLHS0ak7V7reXfhgACaBqDtD3e/nmc5k9kA/A80JReq+U38zGVp3ObJo/BvAOD3dtwiWar9zEHsgHIGlFubqSx7+Jja36anLLcDvvgwA+NDpDfILv+qlzuXwAXuSjrkKemlO2e3U1uWUYnL8dwB/5e2apca9LNv+vsQfyAUheX4VguB+mzIsaG9ntqxhF4Xbe3QD+n7/uHLAW9wQ1tblMRQ/UA0CaHC7plXEh+q4T0OWcfhleYTSHBK0EH/mi+fcRuKQn4I6fWpeoB4AevCz3HOOm9yb3F5mBlZBNclYCj1aRfyfrbgPCTR6AzK+vD4CyglX7jpmN7HY66d1E0ctdIrEEE4wEIMlam+Pk7YF6AMj7EwAVbU82vTerCwhAXopJN9zVI+AYrOeULLZgErY2x8nZA/kAJGWr0naUWdFpy2cT+oCWjpdjLFxE5UzYIBBpEUX5nLnlvAktb76SPVAfAOUHpiAMm96bsVtCAMaKALICMyxDq6cXfycA+b/mOLl6oF4AiqBRIEzBp7/X2Af0+fi1XIioMIlAI+AIPIGPmeROWV3j1Zuvyu2B+gHoFfZiDS2lC0LiY52WUADkQoTTMH1BFSYRdHoRfKSu5v9qrizMHYPT+vx6ARhSuDcAzzmDo5ZGHT1PAKYMwQxME2jiSo/gEwBrrq+u41ZOy++oD4BaCcsXTPiSI3ey8s4KGoG8QwCMFM+0ggQhLR0BF19SXuD/ayakz7uR0/TsMcxg3SjfqWNA0hsrga/ojaq/8WPcC+YIk4Ke4CMSuB2XVht1Oj8zIfXlU8BtU8DhmYRXWdfrdF1fgr3+S8At48CD04DVjXQSDO70PTUnaJ5uOCwsIIFHSSFy1pKPWCDsZxCpw8UVgKSPxLXM937OzxxAljzcPAbcswU4Qh4V3UN8mKoeKm/bu78IfKJQa8VD48CylHQiL3O3/qg5Rf30BKACMtJXjXKQcfBSK8Dfqc3KVCwuN2VFGRnm/yKZtq4Re5ifyQQgM2A+BeB3GHaZBo5MAIue0l7Kt3cC4xhw+5eL7TuCkJk1jBtyerbUfYG5ExjZ/pqrxE5fAOrOq5SmowVIrRp1IyT2R6+fg0bgVYG4CsyZe2UsaiOGKXr4Sfp9k8CxCYAFSKyvXeY1o1BxQux91yMtfsHPutgnnyUuUvhc0ZsgUXib+nVkq6+ZKaABIHsgVZnuwD9sVo66rrR4ImdhLGSQ8zPL/JgBQxeU1ouWkO9PTgDzbgmXxrzMkatl3keivfG5x4r4IRcz5BfkO5vEZ0kgpIfBZ8yKjlL17syy0tMNcOn9dl4Fy6dLFabj1Mpvow9Ify+I4Nlo9Xt+ZqU9VdJpqZh4QDDyxUyYOYJwHDg+DhgI/WUVZl7aSEt93+GO9Ia2iuZKOfA7lhp9JpvAVy61w2mOwO5hmCgMHC1H9O24gu6UD9jP+ZmbtLRaSsei9SL4XDPbAEh/kGQ/pSUcc0lbApFWb67lQUhpVnLBsoKqqZclFMmUtrxPcwxl3X7vOCAtYLSCcugFQmqhdssH7HU+RznjiOlYXA8wqkOfkItTAom+oKygca4ES8jY+N3z7fSG4hfUtp3ihUHruVSsFy1iRvNP+1N7A5BdJACmVpAgZPhGOyCigEjlPLudn7kvFtOxuB4g6OjD8UWLRkCZFRwrLCEXJQQhp2K+37lQeBCRX1A7KPQto1prFEmSYn2mB9EAsO+kYfk8KQhZF8yjVz5gp/MztyOUjiW9bCUhEBhKRCCgSis45uQ/PhX/xfFWMgOnWu2gxB0TF/o0kEZ/kCDM1Ts+3RHYnwVUL6XhDFrAswfIB6w6P1MrTulY0sum1VICglKwCEACqvQFCUK3gHcsFQCM/ILayqP1k9JshVqrncMalOYYvgcGAyCvIwuod8YBJQmZpmGJeyRwkGw4n8jJOJQNw3idLFhMRNB0SgASTJyKoy/4ieXCeFfJBUeV2SoAclFyR0bbm1OHTUiN0/DTAwD7zQeM52dqj8VsGEkVE2jKetG7AEhQ0frJAv6RC0trC1skl+IWlNinGLbSaZg7Mc0xfA8MbgF1LQV1z08A2G8+oM7PVF9Ms2GUE0gQyp+Lwu2yagLgR9ZaYpkSypQ6a6Q2DCqzpkvietXIFdoZfuieGmcOD0DeP0HEbBhNwYPmA/L8zJQsATAKnguEqS+XTqkE4YfWWwCUFZTksYAYwZfIBeN9Tw0cjOwu8gDIZqsoSSvhEeQDiiGYFoyWiSDRypWgi69UP5sc5fIcquSCNeXqe2X9ZAHfM7Khe2pcOB+AT41+aO5iRD3QAHBEHd9ctuiBBoANEkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cvAFgg4GR9kADwJF2f3PxBoANBkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cfOxqYJ2au9RdPtdp/khoEOlglDYT39V1PzQFXLsMXAlgt9PCxJKPbufyf8/KHIPfBPAZABf79Xc5XQ0ZQ1Q7360NbxoHrlsDvs5ZRsgo0une06by6X1mZvtP99PNAp4F4LsBXA5gjw8EGTeqaGF4QhzQF80CX7cAvGIdeDYAfhdZ2sTKUcVrpE7nd31N5gj8e2dIo2osk7NZpMdK0Z19tv+bJ4F9K8D1ACj8yfNSikHeg+5Z969m57Y/8/ZP+dPLKZhP/rcA+AYAF7g1oRUhEMUzFMt6eSJfX78b2DkPfM0i8GIAX+uWlAMppreUUErn8p2gzTl+2flg/sDbTkvIOik+CP20//mzwAXzwDcCuNTPJeFXpEpM6QEjIHm/zTF8D7T5gATYNQCe69aAloRTGulfBESBSYNyxR5g/Bhw7hKwZwl4vk9LnM5JmsBzUyDGAX3B8G23Mz/g9BuUa/0IiutfMkj7zwKmngAuXSvOpUvAWYBtF4BTnspIj/O8zPaf7qdvWITw6eZA0JLQEhKEGgxZhUj/dz3NzSKwbR44exnYvVKcy+mM5Km0JhxInUtrGkmzCPicg3W5LMGkQiZZTm9xS9Z3+4m2o8C5c4X15pTKW2Lb+fCx7WLtjYxzqiql29Icw/dA5SqYf6RTTilg+lYCIXmICKQ4IK9wxfSJY8AZK8CuFWDnanEua9ZTAMsaCog3Dt92O/MvnRGBtGwkqKRmMEkqCaa+2k+0LQDTh4rP88UHj74kF1WaATo9QHQ7mmP4HugYhtEKj4PB6ZQ+FS0hQahpldPya1kXTOqNY8DscgG+HavAttUCvBxInitrkgL4lcO33c7spBdM3kAuSnq2nx9gQfAh4JyVwvrxwel2z3p4aMlzH6DM2z/lT+8aB+Q/OT4EEqckWQSBkGD6EQKQnDCLwBSnYgcf32fXioGUFawC4esyu7CXXnDP9tOCsyD4KLB1rmgvX7zfbu2WG/Jtme0/3U/vKxBNAMoi0KcjkATCN3HOEr3UAjDrwOP71rXixYEkeKMFlSX8ocwR6KUXTJ7AaNE2tF8WfA4Ye7Kw1mwvX/yZn+eKnvcrfzC6IK/ObP/pfnpfAGQnySoISBqUXyAASS1AK0JfagWYcRDOrAF66TxZQU7jBOEbM0egH71gcgXSFZAV54NQtj9YcNIpbONCyh8Ygi8CVospApDuB63g92W2/3Q/vW8AsqM4gLIKBBIH8bcJwMCNMX68BTqBb8s6sGWtsIA6jwDk662ZI9CvXjA5A6NVa2t/IAicnC/aGV+8T74IQPm/AmGuBc+8/VP+9IEAyLslAKMV/LgAyIUInfnjwPQqMOOgI/DstQ5Mr7UAqMF8V2YXDqoXXNl+EQQ6N9v29aKdesUpWJZbAPyPme0/3U8fGIDssDid/pUASCvCaXgJmFguAEfgEXT27gDkuwaUg/nbmSMwjF7whvbLhSDL5TwwvdRqo9oqHzACkCB8U2b7T/fThwIgO01T1IMCoAZxGRhbKoAXQUcQTjkI+a4B5e5FzjGsXvCG9gdqrLGFYrpVG/UuHzBOw2/LaXxzbh43DKeoJwlAHqLndSs4udoCoIBHQE45EPk3DuitmYOQoxdctp8+rFwIWsGFYiFFoLGNchcEQC6e+OJC5J2Z7T/dTx/aApYdJ37AyJK/DIwvFxYvWr0IwEn/H1Opco5sveDUhSAAF4HJpQJkWixp6k2n4IYfMGf0amDHev2I8+l4/UbvNw8Eozw72wJePOJ8und7EkKj9ztKGA1/7WwATo44n45pWI3e7/AAGPWZ2QBkYHCU+XTMfGGQmYIxjd7vqOE0+PXzATjifDrKtTZ6v4MP/MlyRj4AR5xPF+VaqZLJF1UzKdPV6P2eLDDr3I58AI44n07ZMARbo/d78gMubWE+AEecT8e9YOn2Uheu0fs9tUCYD8AR59MpG6bR+z21gKfW1gNAz4geRT5dTEZo9H5PPRDmAzBmRM8BJzqfLiYjSKKr0fs9dYBYDwBHmE9XtRfMsIz04aQZ1+j9npygrA+Akqs8wfl0BCCTWRq935MTYL1aVQ8Ao1zlAnAi8+kEQGZTNXq/vYb75Pt/fQAcUT5dBGCj93vyAaxXi+oDoFLyT3A+3Rcavd9eY3xS/z8fgCQX/LPR3SOzkon55jg1eyAfgD8M4NcAPD6aDmBtB1e4NMDNcer1QD4AbwbwxwDe4UvRE9wHZG1gNSXDLlwLNcep1QP5APxzzwj9IIAPnXhT5ORc5EYCA9HNcWr1QD4AmRH6FQBMTSZZH98ZmD5Bh5g1FopiNns1x6nTA/kAvAfAEwDudnI+EvQxPfkEzYfaCXRSBluQMB7YHKdGD+QDsBNBH/9+AkAobqTADGK7Inw1x8nfA/kA7EXQt8kgrGAGMfBxZ5Cv5ji5eyAfgL0I+r68uR0QmUFoBQU8vfNvzXHy9kA9AORoMw7CdGQCjoUZDwL4kv/+8OZ1gJhBIjGDgMh3vTavBc035/RAPgD7JegjODfhiMwgoqeJwNPPTaB6Ezq/hq+sB4AcXeXEP+ZhGVo9vRimIQD5v5oPAZCupgDI9wg8/qz/1Xz55usyeyAfgMMQ9GU2Op4eAchpOIJQQEz/VuPlm6/K7IH6AMjgGzdl6QtyX5jWjpQFevF3lq3xf6yhrOlIAUgQCojR8gmE+l9Nl2++JrMH6gEgR5UA5KYsc+AZmCbQCDi+IvgEQMob1XBEAHIajgBMLV+0kCdws6aGu3zqfkV9AGTwjftg3JRVVRAtHQEXX/wbAcoXP5d5CID8GoJKvqDAloKOoIz/y7x8c3pmD4zhaqwjRzCYyQg5gr2ZgsFTLweWr8XQgsXjbwLWrnNtMlKgNoLBmZAa7PTCAuYIBlMvlWQswwr2UlUw45jdDSx8HbD+Ctd+HVCwePKbgJV9aASDM8Yg59TWFDysYPBtmYK91IbNOHaPA/M7gUXKXA4hWDz79cA8+W0aweCMURj+1HYfcBjBYO54MMY3tGDv8I3nmWSHOzYOLJ0LLPGXAQWLz3oB8MQUsEa16kYwOG8whjh74yJkUMFgbsNlCfYO0epwissVY34bsHw2sEIRkAEEi/dcU0SP5qhF1ggG5w3GEGdXr4L5134Fg4kAjuDQgr1DtDqcUmZETwArZwAru4BVqsv0KVh8/o3F4v0QXZBGMDhvMIY4u3MYhv95Zh+Cu1xBcxuOU/HfeDIq5cv7FuwdotXhlCBXjOXZAnyrO4BV6in0IVh8wStLuWCsUAyvEQzOG5ABz+4eB+R/ewnu/kOP/3G/l4kJTERlljQtIot2e53/IwO2OPl4FLtcnCqAp9cahT56CBZf+LpSLhhz1N5qBIPzBmTAs/sLRHcTDKbiNHdBGGymOC/3hglEvgjAnoK9A7Y4+XgiV4zVWYDAs/etxaubYPFFP1QkLtCIP8neaASD8wZkwLP7AyC/tJNg8L/xLNBu+YBdBXsHbHEFAINcMVamgdWZAoRrfPdXm8KitLdmgYveWAq+2y7iMqfuRjA4b1AGOLt/APJLqwSD3+y5T1yI0AoSbAxMMzGV1o8/My2ro2DvAK2t+GgiV4zj4+3AIwDXtwBrVJeuECze+9aW4Dut4PxkIhYsdetGMDhvoDqcPRgA+SWp4O4veQ5Uv/mAGwR78+6rQq4Yq9PAOi2fA4/vBkKudKVU7VZw77uKvWFuZbtcMNb5v0YwOG9g+jx7cADyi6Pg7gccgIxlcA5TKhaD01yYKBmVFpBZMfx/m2Bvny3t8LGqoqTliZbVI+gMgHwnMAnCIFi897cLAAZ6QyzFzzSCwXkD1OPs4QDIL5XgLmk5JHk/SD5gKdibd38VcsVYGmuBTaAzEHLHgyCcaokB7/1IkUET5IKxwF5pBIPzBqbPs4cHIC/AaeqvPL9pmHxAE+zts6VdLCD/lcgVY3UyWD0Bj1ZwqgCggXA7sPfWAoAJvaEtZBrB4Lyx6efsPADyCtmCvf00s/NnOsgVY3m8BTRZPZuGBUACdArY+5lWDqGmYbIrLHEx0ggG5w1OH2fnA7CPizQfaXqgUw80AGywMdIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0BxoAjrT7m4s3AGwwMNIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0B8ZYNMbkX+ZekpuIiOQrPar+xs889HJg6jZg5jAwvVZ8B+ll9PlO5/Fc/o+ECjnHfi8zYfkvM5ulmp4qJXVqx5deD4zfAkw/CGxdAZgoHfuh131QkaI5hu8Bs4Ds8B0AWLnIRGCBsFfn87JffDMwdjOw5R5g8giwZa34jnQQUwDo99wBfJ4TM7COiNdlaj2rA/jeV/vfDeATAP4UGH8I2Lrc6gc+SHqY4oMZ74VSKM0xfA+UUzB/oBUUCKMl6zSQ/PsXqZD5KQC/A0w/DEwcAcYXgYnVwppwADuBkefnCim90FmBWXwnK87Uen53BI8sbuwqaz9p5UgnQhBS+ZN1zE8Ak0utviCwq8DI8/nx5hi+Bzb4gJzKZE1SEFZZgS9/2pWR/gTAJ4HJQ8DEMWB8ARhfBsaWCwDquwQKvvNgHXvOcYVbPFJPkw+dDxC/W1Y4tWDpw/Rlgo4lo1T4/KxTihDNpJwj3/UiMLXemprjffC7eWpzDN8DlYsQDiKtVxzEqoHkyX9HRizW+nIgaQnvAiaeBCbmC0s4tgSMu2rMePAR9X252jXklaTFU108K0MHav/nvJ6ZxVVk9OI7GR2IZoGQNc/HgbHgIwqILIVujuF7oOMqWFawCoRxkfEIB5CWgkREBCNf9wMTc8A4QciBWyoGz16rwNgaML5eWKpctYZL3N+TWLX0gvtuP0HHk2n16JDyxXmVhfU0qywbJbr5GSuXKxA/sV5Y9UYWdnjwyS3qKKgarWA69Wg6fjQOIK0HadnIjPVFB+AiME4AuiUkCFnESyCSkmAuU7Cjm15wX+2X2ifBRn9A8mKcW2UFjULVQcgVDl80u40SYh763FfvquhLCxitoBYUsoJfjXKttByMq9CKcHn4sPuCbgXNJwyWkECcz5Q376UX3LNncZyQAAADEklEQVT9fFgIJs6lBBwtn3Tt6FpIz4RWnuQxPh2XIGzm4CwQ9hWIFgBTK0gQHiIAJddKq0ELQh+KL1qUR4MvSEsoENIKrgALHNiMox+94K7tl9qnnMio8MSf6SNwGpYVjCDk/Ju7isq496fCqX0BkDeqlWwKwic1gAQSpzGREnFgREz01eALLvvq2Kfi45m6cf3qBXdsfxRbJMho8dimqOhEK8cXQRr9QVpvPoDNMXQP9A3ACELFxPh+jACkP0fLIKFCCRRqKuPUdqjlC9o07JZwKVNHeBC94DQcZO0XAAkmgotAk9QYrR9f/BvByYfMSATDVMzwTXMM3QMDAVAgVHCZ7/MaQK4QZUHiNCbBQlqUw74YCb7gcmYkelC9YFlwvVv7RRAorTuBkECU9asCID9/x9B935zYzyKkqpfiNHxcA0gLQgvBAaPVkCqm3h2AtC5m/RyEqzw/4xhGL3hD++MmslgqCbgUfLKAcRrmTlBzDN0DA1tAXUlWcDm1IOIIJAjlT/Fd05lbFQFwjdtgGcewesFt7Rc/Gx8iWjUCjGCT1YvWT1MwgUqrf3NG45tTbcu0aximWx9xENcEQHGbcYAEwtSXSqY0gnCdgeuMI0cvuGx/FUGgFhwEYrR80QckWN+X0fjm1DwAWv8RgJFilJZBznz0pQg+AZAAlVWh1GvGka0XzB0cCQi30aSGVa9AF62fLOB7MhrfnJoPwPER59Px+o3e76mL5Kwp2G57xPl0kxc3er+nLvyKtLmhfUC78RHn081ONnq/pzcAR5xPR9mRRu/31IVgvgUccT4dNaobvd/TGYAjzqejumqj93s6A3DE+XRUg2VSCjdaGr3fUw+I+VPwiPPpqJjO8J1Nw43e7ymHwHoAKMFd7QErAeEE5NNJMb3R+z3lsGcNzgfgiPPpomJ6o/d76oGwPgCOKJ8uKqY3er+nKwBHmE+noqRG7/fUA199U/AI8+kEwEbv93QHoEhZTnA+nYqSGr3fBoAtaiqBUImdm5hPJwA2er+nKwBHnE+X1gUzSbnR+z11wPj/AeCpPDD3t7rvAAAAAElFTkSuQmCC",D_=class extends l_{constructor({preset:e=1,edgeDetectionMode:t=2,predicationMode:r=0}={}){let n,i;super("SMAAEffect","uniform sampler2D weightMap;varying vec2 vOffset0;varying vec2 vOffset1;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 a;a.x=texture2D(weightMap,vOffset0).a;a.y=texture2D(weightMap,vOffset1).g;a.wz=texture2D(weightMap,uv).rb;vec4 color=inputColor;if(dot(a,vec4(1.0))>=1e-5){bool h=max(a.x,a.z)>max(a.y,a.w);vec4 blendingOffset=vec4(0.0,a.y,0.0,a.w);vec2 blendingWeight=a.yw;movec(bvec4(h),blendingOffset,vec4(a.x,0.0,a.z,0.0));movec(bvec2(h),blendingWeight,a.xz);blendingWeight/=dot(blendingWeight,vec2(1.0));vec4 blendingCoord=blendingOffset*vec4(texelSize,-texelSize)+uv.xyxy;color=blendingWeight.x*texture2D(inputBuffer,blendingCoord.xy);color+=blendingWeight.y*texture2D(inputBuffer,blendingCoord.zw);}outputColor=color;}",{vertexShader:"varying vec2 vOffset0;varying vec2 vOffset1;void mainSupport(const in vec2 uv){vOffset0=uv+texelSize*vec2(1.0,0.0);vOffset1=uv+texelSize*vec2(0.0,1.0);}",blendFunction:a_,attributes:3,uniforms:new Map([["weightMap",new eu(null)]])}),arguments.length>1&&(n=arguments[0],i=arguments[1],arguments.length>2&&(e=arguments[2]),arguments.length>3&&(t=arguments[3])),this.renderTargetEdges=new je(1,1,{minFilter:T,stencilBuffer:!1,depthBuffer:!1}),this.renderTargetEdges.texture.name="SMAA.Edges",this.renderTargetWeights=this.renderTargetEdges.clone(),this.renderTargetWeights.texture.name="SMAA.Weights",this.uniforms.get("weightMap").value=this.renderTargetWeights.texture,this.clearPass=new KS(!0,!1,!1),this.clearPass.overrideClearColor=new Oe(0),this.clearPass.overrideClearAlpha=1,this.edgeDetectionPass=new g_(new US),this.edgeDetectionMaterial.edgeDetectionMode=t,this.edgeDetectionMaterial.predicationMode=r,this.weightsPass=new g_(new WS);let a=new dl;a.onLoad=()=>{let e=new Fe(n);e.name="SMAA.Search",e.magFilter=C,e.minFilter=C,e.generateMipmaps=!1,e.needsUpdate=!0,e.flipY=!0,this.weightsMaterial.searchTexture=e;let t=new Fe(i);t.name="SMAA.Area",t.magFilter=T,t.minFilter=T,t.generateMipmaps=!1,t.needsUpdate=!0,t.flipY=!1,this.weightsMaterial.areaTexture=t,this.dispatchEvent({type:"load"})},a.itemStart("search"),a.itemStart("area"),void 0!==n&&void 0!==i?(a.itemEnd("search"),a.itemEnd("area")):typeof Image<"u"&&(n=new Image,i=new Image,n.addEventListener("load",(()=>a.itemEnd("search"))),i.addEventListener("load",(()=>a.itemEnd("area"))),n.src=C_,i.src=T_),this.applyPreset(e)}get edgesTexture(){return this.renderTargetEdges.texture}getEdgesTexture(){return this.edgesTexture}get weightsTexture(){return this.renderTargetWeights.texture}getWeightsTexture(){return this.weightsTexture}get edgeDetectionMaterial(){return this.edgeDetectionPass.fullscreenMaterial}get colorEdgesMaterial(){return this.edgeDetectionMaterial}getEdgeDetectionMaterial(){return this.edgeDetectionMaterial}get weightsMaterial(){return this.weightsPass.fullscreenMaterial}getWeightsMaterial(){return this.weightsMaterial}setEdgeDetectionThreshold(e){this.edgeDetectionMaterial.edgeDetectionThreshold=e}setOrthogonalSearchSteps(e){this.weightsMaterial.orthogonalSearchSteps=e}applyPreset(e){let t=this.edgeDetectionMaterial,r=this.weightsMaterial;switch(e){case 0:t.edgeDetectionThreshold=.15,r.orthogonalSearchSteps=4,r.diagonalDetection=!1,r.cornerDetection=!1;break;case 1:t.edgeDetectionThreshold=.1,r.orthogonalSearchSteps=8,r.diagonalDetection=!1,r.cornerDetection=!1;break;case 2:t.edgeDetectionThreshold=.1,r.orthogonalSearchSteps=16,r.diagonalSearchSteps=8,r.cornerRounding=25,r.diagonalDetection=!0,r.cornerDetection=!0;break;case 3:t.edgeDetectionThreshold=.05,r.orthogonalSearchSteps=32,r.diagonalSearchSteps=16,r.cornerRounding=25,r.diagonalDetection=!0,r.cornerDetection=!0}}setDepthTexture(e,t=Z){this.edgeDetectionMaterial.depthBuffer=e,this.edgeDetectionMaterial.depthPacking=t}update(e,t,r){this.clearPass.render(e,this.renderTargetEdges),this.edgeDetectionPass.render(e,t,this.renderTargetEdges),this.weightsPass.render(e,this.renderTargetEdges,this.renderTargetWeights)}setSize(e,t){this.edgeDetectionMaterial.setSize(e,t),this.weightsMaterial.setSize(e,t),this.renderTargetEdges.setSize(e,t),this.renderTargetWeights.setSize(e,t)}dispose(){let{searchTexture:e,areaTexture:t}=this.weightsMaterial;null!==e&&null!==t&&(e.dispose(),t.dispose()),super.dispose()}static get searchImageDataURL(){return C_}static get areaImageDataURL(){return T_}},L_=class extends l_{constructor({blendFunction:e=13,technique:t=0,eskil:r=!1,offset:n=.5,darkness:i=.5}={}){super("VignetteEffect","uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;\n#if VIGNETTE_TECHNIQUE == 0\nfloat d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));\n#else\nvec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));\n#endif\noutputColor=vec4(color,inputColor.a);}",{blendFunction:e,defines:new Map([["VIGNETTE_TECHNIQUE",t.toFixed(0)]]),uniforms:new Map([["offset",new eu(n)],["darkness",new eu(i)]])})}get technique(){return Number(this.defines.get("VIGNETTE_TECHNIQUE"))}set technique(e){this.technique!==e&&(this.defines.set("VIGNETTE_TECHNIQUE",e.toFixed(0)),this.setChanged())}get eskil(){return 1===this.technique}set eskil(e){this.technique=e?1:0}getTechnique(){return this.technique}setTechnique(e){this.technique=e}get offset(){return this.uniforms.get("offset").value}set offset(e){this.uniforms.get("offset").value=e}getOffset(){return this.offset}setOffset(e){this.offset=e}get darkness(){return this.uniforms.get("darkness").value}set darkness(e){this.uniforms.get("darkness").value=e}getDarkness(){return this.darkness}setDarkness(e){this.darkness=e}};function P_(e,t,r){return e+(t-e)*r}function R_(e,t,r,n){let i=P_(e,t,.75),a=P_(r,n,.75);return P_(i,a,.875)}new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array([0,0,0]),new Float32Array([1,0,0]),new Float32Array([1,1,0]),new Float32Array([1,1,1]),new Float32Array([0,0,0]),new Float32Array([1,0,0]),new Float32Array([1,0,1]),new Float32Array([1,1,1]),new Float32Array([0,0,0]),new Float32Array([0,0,1]),new Float32Array([1,0,1]),new Float32Array([1,1,1]),new Float32Array([0,0,0]),new Float32Array([0,1,0]),new Float32Array([1,1,0]),new Float32Array([1,1,1]),new Float32Array([0,0,0]),new Float32Array([0,1,0]),new Float32Array([0,1,1]),new Float32Array([1,1,1]),new Float32Array([0,0,0]),new Float32Array([0,0,1]),new Float32Array([0,1,1]),new Float32Array([1,1,1]),new Float32Array(2),new Float32Array(2),new Float32Array([0,-.25,.25,-.125,.125,-.375,.375]),new Float32Array([0,0]),new Float32Array([.25,-.25]),new Float32Array([-.25,.25]),new Float32Array([.125,-.125]),new Float32Array([-.125,.125]),new Uint8Array([0,0]),new Uint8Array([3,0]),new Uint8Array([0,3]),new Uint8Array([3,3]),new Uint8Array([1,0]),new Uint8Array([4,0]),new Uint8Array([1,3]),new Uint8Array([4,3]),new Uint8Array([0,1]),new Uint8Array([3,1]),new Uint8Array([0,4]),new Uint8Array([3,4]),new Uint8Array([1,1]),new Uint8Array([4,1]),new Uint8Array([1,4]),new Uint8Array([4,4]),new Uint8Array([0,0]),new Uint8Array([1,0]),new Uint8Array([0,2]),new Uint8Array([1,2]),new Uint8Array([2,0]),new Uint8Array([3,0]),new Uint8Array([2,2]),new Uint8Array([3,2]),new Uint8Array([0,1]),new Uint8Array([1,1]),new Uint8Array([0,3]),new Uint8Array([1,3]),new Uint8Array([2,1]),new Uint8Array([3,1]),new Uint8Array([2,3]),new Uint8Array([3,3]),new Map([[R_(0,0,0,0),new Float32Array([0,0,0,0])],[R_(0,0,0,1),new Float32Array([0,0,0,1])],[R_(0,0,1,0),new Float32Array([0,0,1,0])],[R_(0,0,1,1),new Float32Array([0,0,1,1])],[R_(0,1,0,0),new Float32Array([0,1,0,0])],[R_(0,1,0,1),new Float32Array([0,1,0,1])],[R_(0,1,1,0),new Float32Array([0,1,1,0])],[R_(0,1,1,1),new Float32Array([0,1,1,1])],[R_(1,0,0,0),new Float32Array([1,0,0,0])],[R_(1,0,0,1),new Float32Array([1,0,0,1])],[R_(1,0,1,0),new Float32Array([1,0,1,0])],[R_(1,0,1,1),new Float32Array([1,0,1,1])],[R_(1,1,0,0),new Float32Array([1,1,0,0])],[R_(1,1,0,1),new Float32Array([1,1,0,1])],[R_(1,1,1,0),new Float32Array([1,1,1,0])],[R_(1,1,1,1),new Float32Array([1,1,1,1])]]);var O_=class{constructor(e,t){this.enabled=!1,this.effect=new e(t),Object.defineProperty(this,"opacity",{enumerable:!0,set(e){this.effect.blendMode.opacity.value=e},get(){return this.effect.blendMode.opacity.value}}),Object.defineProperty(this,"blendFunction",{enumerable:!0,set(e){this.effect.blendMode.setBlendFunction(Number(e))},get(){return this.effect.blendMode.blendFunction}}),this.blendFunction=a_}toJSON(){let e=g({},this),t=Object.getPrototypeOf(this),r=Object.getOwnPropertyNames(t);for(let n of r){let r=Object.getOwnPropertyDescriptor(t,n);r&&"function"==typeof r.get&&(e[n]=this[n])}return["constructor","effect","subscriptions"].forEach((t=>delete e[t])),e}},k_=class extends O_{constructor(){super(x_),this.blendFunction=16}set intensity(e){this.effect.intensity=e}get intensity(){return this.effect.intensity}set luminanceThreshold(e){this.effect.luminanceMaterial.threshold=e}get luminanceThreshold(){return this.effect.luminanceMaterial.threshold}set luminanceSmoothing(e){this.effect.luminanceMaterial.smoothing=e}get luminanceSmoothing(){return this.effect.luminanceMaterial.smoothing}set blurScale(e){this.effect.blurPass.scale=e}get blurScale(){return this.effect.blurPass.scale}set kernelSize(e){this.effect.blurPass.kernelSize=e}get kernelSize(){return this.effect.blurPass.kernelSize}},I_=class extends O_{constructor(){super(b_)}set contrast(e){this.effect.uniforms.get("contrast").value=e}get contrast(){return this.effect.uniforms.get("contrast").value}set brightness(e){this.effect.uniforms.get("brightness").value=e}get brightness(){return this.effect.uniforms.get("brightness").value}},B_=class extends O_{constructor(){super(S_),this.effect.offset=new ve(.01,.01)}set offset(e){this.effect.offset.set(e[0]/1e3,e[1]/1e3)}get offset(){return[1e3*this.effect.offset.x,1e3*this.effect.offset.y]}},z_=class extends O_{constructor(){super(w_)}},N_=class extends O_{constructor(){super(A_),this._hue=0}set hue(e){this._hue=e,this.effect.setHue(e)}get hue(){return this._hue}set saturation(e){this.effect.uniforms.get("saturation").value=e}get saturation(){return this.effect.uniforms.get("saturation").value}},F_=class extends O_{constructor(){super(M_),this.blendFunction=14}},U_=class extends O_{constructor(){super(L_)}get eskil(){return this.effect.eskil}set eskil(e){this.effect.eskil=e}get darkness(){return this.effect.uniforms.get("darkness").value}set darkness(e){this.effect.uniforms.get("darkness").value=e}get offset(){return this.effect.uniforms.get("offset").value}set offset(e){this.effect.uniforms.get("offset").value=e}},j_=class extends O_{constructor(e){super(__,e)}set focalLength(e){this.effect.circleOfConfusionMaterial.uniforms.focalLength.value=e}get focalLength(){return this.effect.circleOfConfusionMaterial.uniforms.focalLength.value}set focusDistance(e){this.effect.circleOfConfusionMaterial.uniforms.focusDistance.value=e}get focusDistance(){return this.effect.circleOfConfusionMaterial.uniforms.focusDistance.value}get bokehScale(){return this.effect.bokehScale}set bokehScale(e){this.effect.bokehScale=e}},H_=class extends O_{constructor(){super(E_)}get granularity(){return this.effect.getGranularity()}set granularity(e){this.effect.setGranularity(e)}};function V_(e,t){return t&&t.enabled&&e.push(t.effect),e}var G_,W_=class extends ae{constructor(){super(),this._scene=new Na,this._camera=new Zw,this.effects=new Map,this.loadingManager=new dl,this.renderPass=new n_,this._renderToScreen=!0,this._hasSmaa=!1,this.clock=new class{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=jl(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){let t=jl();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}},this.enabled=!1,this.debug=!1,this.effects.set("bloom",new k_),this.effects.set("chromaticAberration",new B_),this.effects.set("vignette",new U_),this.effects.set("noise",new F_),this.effects.set("colorAverage",new z_),this.effects.set("hueSaturation",new N_),this.effects.set("brightnessContrast",new I_),this.effects.set("depthOfField",new j_),this.effects.set("pixelation",new H_)}get scene(){return this._scene}set scene(e){this._scene=e}get camera(){return this._camera}set camera(e){this._camera=e}_initSmaa(){if(!this.effectComposer)return;let e=this.effectComposer.passes.length,t=new D_({preset:3,edgeDetectionMode:2}),r=()=>{t.removeEventListener("load",r),this.dispatchEvent({type:"smaaloaded"})};t.addEventListener("load",r),t.edgeDetectionMaterial.setPredicationMode(1),t.edgeDetectionMaterial.setEdgeDetectionThreshold(.05),t.edgeDetectionMaterial.setPredicationThreshold(.002),t.edgeDetectionMaterial.setPredicationScale(1),this.effectComposer.addPass(new h_(this.camera,t),e),this._hasSmaa=!0}_initPasses(){if(!this.effectComposer||!this.renderer)return;if(this.effectComposer.removeAllPasses(),this._hasSmaa=!1,this.renderPass=new n_(this.scene,this.camera),this.enabled){this.effectComposer.addPass(this.renderPass),this._initSmaa();let e=[this.effects.get("chromaticAberration"),this.effects.get("bloom"),this.effects.get("colorAverage"),this.effects.get("hueSaturation"),this.effects.get("brightnessContrast"),this.effects.get("vignette"),this.effects.get("noise")].reduce(V_,[]),t=[this.effects.get("pixelation")].reduce(V_,[]);t.length>0&&this.effectComposer.addPass(new h_(this.camera,...t)),this.effectComposer.addPass(new h_(this.camera,...e))}else this.effectComposer.addPass(this.renderPass)}reinit(){if(!this.renderer)return Promise.all([]);this.effectComposer=new class{constructor(e=null,{depthBuffer:t=!0,stencilBuffer:r=!1,multisampling:n=0,frameBufferType:i}={}){this.renderer=null,this.inputBuffer=this.createBuffer(t,r,i,n),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new QS,this.depthTexture=null,this.passes=[],this.timer=new class{constructor(){this.previousTime=0,this.currentTime=0,this.delta=0,this.fixedDelta=1e3/60,this.elapsed=0,this.timescale=1,this.fixedDeltaEnabled=!1,this.autoReset=!1}setFixedDeltaEnabled(e){return this.fixedDeltaEnabled=e,this}isAutoResetEnabled(e){return this.autoReset}setAutoResetEnabled(e){return typeof document<"u"&&void 0!==document.hidden&&(e?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this.autoReset=e),this}getDelta(){return this.delta*v_}getFixedDelta(){return this.fixedDelta*v_}setFixedDelta(e){return this.fixedDelta=1e3*e,this}getElapsed(){return this.elapsed*v_}getTimescale(){return this.timescale}setTimescale(e){return this.timescale=e,this}update(e){return this.fixedDeltaEnabled?this.delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=void 0!==e?e:performance.now(),this.delta=this.currentTime-this.previousTime),this.delta*=this.timescale,this.elapsed+=this.delta,this}reset(){return this.delta=0,this.elapsed=0,this.currentTime=performance.now(),this}handleEvent(e){document.hidden||(this.currentTime=performance.now())}dispose(){this.setAutoResetEnabled(!1)}},this.autoRenderToScreen=!0,this.setRenderer(e)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(e){let t=this.inputBuffer,r=this.multisampling;r>0&&e>0?(this.inputBuffer.samples=e,this.outputBuffer.samples=e,this.inputBuffer.dispose(),this.outputBuffer.dispose()):r!==e&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(t.depthBuffer,t.stencilBuffer,t.texture.type,e),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(e){if(this.renderer=e,null!==e){let t=e.getSize(new ve),r=e.getContext().getContextAttributes().alpha,n=this.inputBuffer.texture.type;n===L&&e.outputEncoding===J&&(this.inputBuffer.texture.encoding=J,this.outputBuffer.texture.encoding=J,this.inputBuffer.dispose(),this.outputBuffer.dispose()),e.autoClear=!1,this.setSize(t.width,t.height);for(let t of this.passes)t.initialize(e,r,n)}}replaceRenderer(e,t=!0){let r=this.renderer,n=r.domElement.parentNode;return this.setRenderer(e),t&&null!==n&&(n.removeChild(r.domElement),n.appendChild(e.domElement)),r}createDepthTexture(){let e=this.depthTexture=new Ra;return this.inputBuffer.depthTexture=e,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(e.format=N,e.type=I):e.type=R,e}deleteDepthTexture(){if(null!==this.depthTexture){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(let e of this.passes)e.setDepthTexture(null)}}createBuffer(e,t,r,n){let i,a=this.renderer,o=null===a?new ve:a.getDrawingBufferSize(new ve),s={minFilter:T,magFilter:T,stencilBuffer:t,depthBuffer:e,type:r};return n>0?(i=Number(x.replace(/\D+/g,""))<138?new Ru(o.width,o.height,s):new je(o.width,o.height,s),i.ignoreDepthForMultisampleCopy=!1,i.samples=n):i=new je(o.width,o.height,s),r===L&&null!==a&&a.outputEncoding===J&&(i.texture.encoding=J),i.texture.name="EffectComposer.Buffer",i.texture.generateMipmaps=!1,i}addPass(e,t){let r=this.passes,n=this.renderer,i=n.getDrawingBufferSize(new ve),a=n.getContext().getContextAttributes().alpha,o=this.inputBuffer.texture.type;if(e.setRenderer(n),e.setSize(i.width,i.height),e.initialize(n,a,o),this.autoRenderToScreen&&(r.length>0&&(r[r.length-1].renderToScreen=!1),e.renderToScreen&&(this.autoRenderToScreen=!1)),void 0!==t?r.splice(t,0,e):r.push(e),this.autoRenderToScreen&&(r[r.length-1].renderToScreen=!0),e.needsDepthTexture||null!==this.depthTexture)if(null===this.depthTexture){let t=this.createDepthTexture();for(e of r)e.setDepthTexture(t)}else e.setDepthTexture(this.depthTexture)}removePass(e){let t=this.passes,r=t.indexOf(e);if(-1!==r&&t.splice(r,1).length>0){if(null!==this.depthTexture){let r=(e,t)=>e||t.needsDepthTexture;t.reduce(r,!1)||(e.getDepthTexture()===this.depthTexture&&e.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&r===t.length&&(e.renderToScreen=!1,t.length>0&&(t[t.length-1].renderToScreen=!0))}}removeAllPasses(){let e=this.passes;this.deleteDepthTexture(),e.length>0&&(this.autoRenderToScreen&&(e[e.length-1].renderToScreen=!1),this.passes=[])}render(e){let t,r,n,i=this.renderer,a=this.copyPass,o=this.inputBuffer,s=this.outputBuffer,l=!1;void 0===e&&(e=this.timer.update().getDelta());for(let u of this.passes)u.enabled&&(u.render(i,o,s,e,l),u.needsSwap&&(l&&(a.renderToScreen=u.renderToScreen,t=i.getContext(),r=i.state.buffers.stencil,r.setFunc(t.NOTEQUAL,1,4294967295),a.render(i,o,s,e,l),r.setFunc(t.EQUAL,1,4294967295)),n=o,o=s,s=n),u instanceof m_?l=!0:u instanceof JS&&(l=!1))}setSize(e,t,r){let n=this.renderer;if(void 0===e||void 0===t){let r=n.getSize(new ve);e=r.width,t=r.height}n.setSize(e,t,r);let i=n.getDrawingBufferSize(new ve);this.inputBuffer.setSize(i.width,i.height),this.outputBuffer.setSize(i.width,i.height);for(let e of this.passes)e.setSize(i.width,i.height)}reset(){let e=this.timer.isAutoResetEnabled();this.dispose(),this.autoRenderToScreen=!0,this.timer.setAutoResetEnabled(e)}dispose(){for(let e of this.passes)e.dispose();this.passes=[],null!==this.inputBuffer&&this.inputBuffer.dispose(),null!==this.outputBuffer&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose()}}(this.renderer),this._initPasses()}init({renderer:e,camera:t,scene:r}){this.renderer=e,this.scene=r,this.camera=t,this._initCopyPass(),this.reinit()}_initCopyPass(){if(this._savePass)return;let e=new ve;this.renderer.getDrawingBufferSize(e),this._rt=new je(e.x,e.y,{depthBuffer:!1,stencilBuffer:!1,wrapS:A,wrapT:A}),this._rt.samples=this.renderer.capabilities.isWebGL2?4:0,this._savePass=new QS(this._rt,!1),this._savePass.renderToScreen=!1}get renderToScreen(){return this._renderToScreen}set renderToScreen(e){var t,r;let n=this.effectComposer;!n||(!0===e?(null!=(t=this.renderer)&&t.capabilities.isWebGL2&&(n.multisampling=0),n.removePass(this._savePass),n.passes[n.passes.length-1].renderToScreen=!0,n.autoRenderToScreen=!0):((null==(r=this.renderer)?void 0:r.capabilities.isWebGL2)&&!this._hasSmaa&&(n.multisampling=4),n.autoRenderToScreen=!1,n.passes[n.passes.length-1].renderToScreen=!1,this._savePass.renderToScreen=!1,this.enabled||(this._savePass.needsDepthTexture=!0),n.addPass(this._savePass)),this._renderToScreen=e)}get texture(){return this._rt&&this._rt.texture}get renderTarget(){return this._rt}fromJSON(e){e&&(Object.keys(e).forEach((t=>{let r=e[t],n=this.effects.get(t);Object.keys(r).forEach((e=>{n[e]=r[e]}))})),this.enabled=e.enabled)}toJSON(){let e={};return this.effects.forEach(((t,r)=>{e[r]=t.toJSON()}),e),g({enabled:this.enabled},e)}render(){var e;null==(e=this.effectComposer)||e.render(this.clock.getDelta())}setScissor(e,t,r,n){if(!this.effectComposer||!this.renderer)return;e instanceof Ue?(this.effectComposer.inputBuffer.scissor.set(e.x,e.y,e.z,e.w),this.effectComposer.outputBuffer.scissor.set(e.x,e.y,e.z,e.w)):(this.effectComposer.inputBuffer.scissor.set(e,t,r,n),this.effectComposer.outputBuffer.scissor.set(e,t,r,n));let i=this.renderer.getPixelRatio();this.effectComposer.inputBuffer.scissor.multiplyScalar(i),this.effectComposer.outputBuffer.scissor.multiplyScalar(i),this.renderer.setScissor(e,t,r,n)}setScissorTest(e){!this.effectComposer||!this.renderer||(this.effectComposer.inputBuffer.scissorTest=e,this.effectComposer.outputBuffer.scissorTest=e,this.renderer.setScissorTest(e))}setViewport(e,t,r,n){!this.effectComposer||(e instanceof Ue?(this.effectComposer.inputBuffer.viewport.copy(e),this.effectComposer.outputBuffer.viewport.copy(e)):(this.effectComposer.inputBuffer.viewport.set(e,t,r,n),this.effectComposer.outputBuffer.viewport.set(e,t,r,n)))}resize(e,t){var r,n;if(null==(r=this.effectComposer)||r.setSize(e,t),this._rt){let r=(null==(n=this.renderer)?void 0:n.getPixelRatio())||window.devicePixelRatio;this._rt.setSize(e*r,t*r)}}dispose(){var e;this._listeners=void 0,null==(e=this.effectComposer)||e.dispose()}},q_=class extends RS{constructor(e,t){super(e,t),this.postprocessing=new W_,this.initPostprocessing(e.postprocessing)}resetAfterClear(e,t){super.resetAfterClear(e,t),this.initPostprocessing(e.postprocessing)}initPostprocessing(e){let t=e,{enabled:r}=t,n=((e,t)=>{var r={};for(var n in e)p.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&h)for(var n of h(e))t.indexOf(n)<0&&f.call(e,n)&&(r[n]=e[n]);return r})(t,["enabled"]);for(let e of Object.entries(n)){let t=e[1],r=this.postprocessing.effects.get(e[0]);if(r){r.enabled=t.enabled;for(let[e,n]of Object.entries(t))r[e]=n}}this.postprocessing.enabled=r,this.postprocessing.reinit()}dispose(){super.dispose(),this.postprocessing.dispose()}switchActiveCamera(e){super.switchActiveCamera(e),this.postprocessing&&(this.postprocessing.camera=e)}},Y_=new WeakMap,X_=class extends fl{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,r,n){let i=new gl(this.manager);i.setPath(this.path),i.setResponseType("arraybuffer"),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials),i.load(e,(e=>{let r={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(e,r).then(t).catch(n)}),r,n)}decodeDracoFile(e,t,r,n){let i={attributeIDs:r||this.defaultAttributeIDs,attributeTypes:n||this.defaultAttributeTypes,useUniqueIDs:!!r};this.decodeGeometry(e,i).then(t)}decodeGeometry(e,t){for(let e in t.attributeTypes){let r=t.attributeTypes[e];void 0!==r.BYTES_PER_ELEMENT&&(t.attributeTypes[e]=r.name)}let r=JSON.stringify(t);if(Y_.has(e)){let t=Y_.get(e);if(t.key===r)return t.promise;if(0===e.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let n,i=this.workerNextTaskID++,a=e.byteLength,o=this._getWorker(i,a).then((r=>(n=r,new Promise(((r,a)=>{n._callbacks[i]={resolve:r,reject:a},n.postMessage({type:"decode",id:i,taskConfig:t,buffer:e},[e])}))))).then((e=>this._createGeometry(e.geometry)));return o.catch((()=>!0)).then((()=>{n&&i&&this._releaseTask(n,i)})),Y_.set(e,{key:r,promise:o}),o}_createGeometry(e){let t=new wr;e.index&&t.setIndex(new cr(e.index.array,1));for(let r=0;r<e.attributes.length;r++){let n=e.attributes[r],i=n.name,a=n.array,o=n.itemSize;t.setAttribute(i,new cr(a,o))}return t}_loadLibrary(e,t){let r=new gl(this.manager);return r.setPath(this.decoderPath),r.setResponseType(t),r.setWithCredentials(this.withCredentials),new Promise(((t,n)=>{r.load(e,t,void 0,n)}))}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;let e="object"!=typeof WebAssembly||"js"===this.decoderConfig.type,t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then((t=>{let r=t[0];e||(this.decoderConfig.wasmBinary=t[1]);let n=Q_.toString(),i=["/* draco decoder */",r,"","/* worker */",n.substring(n.indexOf("{")+1,n.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([i]))})),this.decoderPending}_getWorker(e,t){return this._initDecoder().then((()=>{if(this.workerPool.length<this.workerLimit){let e=new Worker(this.workerSourceURL);e._callbacks={},e._taskCosts={},e._taskLoad=0,e.postMessage({type:"init",decoderConfig:this.decoderConfig}),e.onmessage=function(t){let r=t.data;switch(r.type){case"decode":e._callbacks[r.id].resolve(r);break;case"error":e._callbacks[r.id].reject(r);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+r.type+'"')}},this.workerPool.push(e)}else this.workerPool.sort((function(e,t){return e._taskLoad>t._taskLoad?-1:1}));let r=this.workerPool[this.workerPool.length-1];return r._taskCosts[e]=t,r._taskLoad+=t,r}))}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map((e=>e._taskLoad)))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}};function Q_(){let e,t;function r(e,t,r,n,i,a){let o=a.num_components(),s=r.num_points()*o,l=s*i.BYTES_PER_ELEMENT,u=function(e,t){switch(t){case Float32Array:return e.DT_FLOAT32;case Int8Array:return e.DT_INT8;case Int16Array:return e.DT_INT16;case Int32Array:return e.DT_INT32;case Uint8Array:return e.DT_UINT8;case Uint16Array:return e.DT_UINT16;case Uint32Array:return e.DT_UINT32}}(e,i),c=e._malloc(l);t.GetAttributeDataArrayForAllPoints(r,a,u,l,c);let h=new i(e.HEAPF32.buffer,c,s).slice();return e._free(c),{name:n,array:h,itemSize:o}}onmessage=function(n){let i=n.data;switch(i.type){case"init":e=i.decoderConfig,t=new Promise((function(t){e.onModuleLoaded=function(e){t({draco:e})},DracoDecoderModule(e)}));break;case"decode":let n=i.buffer,a=i.taskConfig;t.then((e=>{let t=e.draco,o=new t.Decoder,s=new t.DecoderBuffer;s.Init(new Int8Array(n),n.byteLength);try{let e=function(e,t,n,i){let a,o,s=i.attributeIDs,l=i.attributeTypes,u=t.GetEncodedGeometryType(n);if(u===e.TRIANGULAR_MESH)a=new e.Mesh,o=t.DecodeBufferToMesh(n,a);else{if(u!==e.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");a=new e.PointCloud,o=t.DecodeBufferToPointCloud(n,a)}if(!o.ok()||0===a.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+o.error_msg());let c={index:null,attributes:[]};for(let n in s){let o,u,h=self[l[n]];if(i.useUniqueIDs)u=s[n],o=t.GetAttributeByUniqueId(a,u);else{if(u=t.GetAttributeId(a,e[s[n]]),-1===u)continue;o=t.GetAttribute(a,u)}c.attributes.push(r(e,t,a,n,h,o))}return u===e.TRIANGULAR_MESH&&(c.index=function(e,t,r){let n=3*r.num_faces(),i=4*n,a=e._malloc(i);t.GetTrianglesUInt32Array(r,i,a);let o=new Uint32Array(e.HEAPF32.buffer,a,n).slice();return e._free(a),{array:o,itemSize:1}}(e,t,a)),e.destroy(a),c}(t,o,s,a),n=e.attributes.map((e=>e.array.buffer));e.index&&n.push(e.index.array.buffer),self.postMessage({type:"decode",id:i.id,geometry:e},n)}catch(e){console.error(e),self.postMessage({type:"error",id:i.id,error:e.message})}finally{t.destroy(s),t.destroy(o)}}))}}}async function J_(e){if(G_){let t,r={attributeIDs:G_.defaultAttributeIDs,attributeTypes:G_.defaultAttributeTypes,useUniqueIDs:!1};try{t=await G_.decodeGeometry(new Int8Array(e).buffer,r)}catch(e){console.error(e)}if(t)return{index:t.index?{array:t.index.array}:void 0,attributes:Object.entries(t.attributes).map((([e,t])=>({name:e,itemSize:t.itemSize,array:t.array})))}}return null}var Z_={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0,rewind:!0},K_={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},$_=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],eA={CSS:{},springs:{}};function tA(e,t,r){return Math.min(Math.max(e,t),r)}function rA(e,t){return e.indexOf(t)>-1}function nA(e,t){return e.apply(null,t)}var iA={arr:function(e){return Array.isArray(e)},obj:function(e){return rA(Object.prototype.toString.call(e),"Object")},pth:function(e){return iA.obj(e)&&e.hasOwnProperty("totalLength")},svg:function(e){return e instanceof SVGElement},inp:function(e){return e instanceof HTMLInputElement},dom:function(e){return!("isNode"in e)&&(e.nodeType||iA.svg(e))},str:function(e){return"string"==typeof e},fnc:function(e){return"function"==typeof e},und:function(e){return typeof e>"u"},hex:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},rgb:function(e){return/^rgb/.test(e)},hsl:function(e){return/^hsl/.test(e)},col:function(e){return iA.hex(e)||iA.rgb(e)||iA.hsl(e)},key:function(e){return!Z_.hasOwnProperty(e)&&!K_.hasOwnProperty(e)&&"targets"!==e&&"keyframes"!==e}};function aA(e){var t=/\(([^)]+)\)/.exec(e);return t?t[1].split(",").map((function(e){return parseFloat(e)})):[]}function oA(e,t){var r=aA(e),n=tA(iA.und(r[0])?1:r[0],.1,100),i=tA(iA.und(r[1])?100:r[1],.1,100),a=tA(iA.und(r[2])?10:r[2],.1,100),o=tA(iA.und(r[3])?0:r[3],.1,100),s=Math.sqrt(i/n),l=a/(2*Math.sqrt(i*n)),u=l<1?s*Math.sqrt(1-l*l):0,c=l<1?(l*s-o)/u:-o+s;function h(e){var r=t?t*e/1e3:e;return r=l<1?Math.exp(-r*l*s)*(1*Math.cos(u*r)+c*Math.sin(u*r)):(1+c*r)*Math.exp(-r*s),0===e||1===e?e:1-r}return t?h:function(){var t=eA.springs[e];if(t)return t;for(var r=1/6,n=0,i=0;;)if(1===h(n+=r)){if(++i>=16)break}else i=0;var a=n*r*1e3;return eA.springs[e]=a,a}}function sA(e){return void 0===e&&(e=10),function(t){return Math.ceil(tA(t,1e-6,1)*e)*(1/e)}}var lA=function(){var e=.1;function t(e,t){return 1-3*t+3*e}function r(e,t){return 3*t-6*e}function n(e){return 3*e}function i(e,i,a){return((t(i,a)*e+r(i,a))*e+n(i))*e}function a(e,i,a){return 3*t(i,a)*e*e+2*r(i,a)*e+n(i)}return function(t,r,n,o){if(0<=t&&t<=1&&0<=n&&n<=1){var s=new Float32Array(11);if(t!==r||n!==o)for(var l=0;l<11;++l)s[l]=i(l*e,t,n);return function(l){return t===r&&n===o||0===l||1===l?l:i(function(r){for(var o=0,l=1;10!==l&&s[l]<=r;++l)o+=e;--l;var u=o+(r-s[l])/(s[l+1]-s[l])*e,c=a(u,t,n);return c>=.001?function(e,t,r,n){for(var o=0;o<4;++o){var s=a(t,r,n);if(0===s)return t;t-=(i(t,r,n)-e)/s}return t}(r,u,t,n):0===c?u:function(e,t,r,n,a){var o,s,l=0;do{(o=i(s=t+(r-t)/2,n,a)-e)>0?r=s:t=s}while(Math.abs(o)>1e-7&&++l<10);return s}(r,o,o+e,t,n)}(l),r,o)}}}}(),uA=function(){var e={linear:function(){return function(e){return e}}},t={Sine:function(){return function(e){return 1-Math.cos(e*Math.PI/2)}},Circ:function(){return function(e){return 1-Math.sqrt(1-e*e)}},Back:function(){return function(e){return e*e*(3*e-2)}},Bounce:function(){return function(e){for(var t,r=4;e<((t=Math.pow(2,--r))-1)/11;);return 1/Math.pow(4,3-r)-7.5625*Math.pow((3*t-2)/22-e,2)}},Elastic:function(e,t){void 0===e&&(e=1),void 0===t&&(t=.5);var r=tA(e,1,10),n=tA(t,.1,2);return function(e){return 0===e||1===e?e:-r*Math.pow(2,10*(e-1))*Math.sin((e-1-n/(2*Math.PI)*Math.asin(1/r))*(2*Math.PI)/n)}}};return["Quad","Cubic","Quart","Quint","Expo"].forEach((function(e,r){t[e]=function(){return function(e){return Math.pow(e,r+2)}}})),Object.keys(t).forEach((function(r){var n=t[r];e["easeIn"+r]=n,e["easeOut"+r]=function(e,t){return function(r){return 1-n(e,t)(1-r)}},e["easeInOut"+r]=function(e,t){return function(r){return r<.5?n(e,t)(2*r)/2:1-n(e,t)(-2*r+2)/2}}})),e}();function cA(e,t){if(iA.fnc(e))return e;var r=e.split("(")[0],n=uA[r],i=aA(e);switch(r){case"spring":return oA(e,t);case"cubicBezier":return nA(lA,i);case"steps":return nA(sA,i);default:return nA(n,i)}}function hA(e){try{return document.querySelectorAll(e)}catch{return}}function dA(e,t){for(var r=e.length,n=arguments.length>=2?arguments[1]:void 0,i=[],a=0;a<r;a++)if(a in e){var o=e[a];t.call(n,o,a,e)&&i.push(o)}return i}function pA(e){return e.reduce((function(e,t){return e.concat(iA.arr(t)?pA(t):t)}),[])}function fA(e){return iA.arr(e)?e:(iA.str(e)&&(e=hA(e)||e),e instanceof NodeList||e instanceof HTMLCollection?[].slice.call(e):[e])}function mA(e,t){return e.some((function(e){return e===t}))}function gA(e){var t={};for(var r in e)t[r]=e[r];return t}function vA(e,t){var r=gA(e);for(var n in e)r[n]=t.hasOwnProperty(n)?t[n]:e[n];return r}function yA(e,t){var r=gA(e);for(var n in t)r[n]=iA.und(e[n])?t[n]:e[n];return r}function xA(e){var t=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(e);if(t)return t[1]}function bA(e,t){return iA.fnc(e)?e(t.target,t.id,t.total):e}function wA(e,t){return e.getAttribute(t)}function SA(e,t,r){if(mA([r,"deg","rad","turn"],xA(t)))return t;var n=eA.CSS[t+r];if(!iA.und(n))return n;var i=document.createElement(e.tagName),a=e.parentNode&&e.parentNode!==document?e.parentNode:document.body;a.appendChild(i),i.style.position="absolute",i.style.width=100+r;var o=100/i.offsetWidth;a.removeChild(i);var s=o*parseFloat(t);return eA.CSS[t+r]=s,s}function _A(e,t,r){if(t in e.style){var n=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),i=e.style[t]||getComputedStyle(e).getPropertyValue(n)||"0";return r?SA(e,i,r):i}}function AA(e,t){return iA.dom(e)&&!iA.inp(e)&&(wA(e,t)||iA.svg(e)&&e[t])?"attribute":iA.dom(e)&&mA($_,t)?"transform":iA.dom(e)&&"transform"!==t&&_A(e,t)?"css":null!=e[t]?"object":void 0}function MA(e){if(iA.dom(e)){for(var t,r=e.style.transform||"",n=/(\w+)\(([^)]*)\)/g,i=new Map;t=n.exec(r);)i.set(t[1],t[2]);return i}}function EA(e,t,r,n){switch(AA(e,t)){case"transform":return function(e,t,r,n){var i=rA(t,"scale")?1:0+function(e){return rA(e,"translate")||"perspective"===e?"px":rA(e,"rotate")||rA(e,"skew")?"deg":void 0}(t),a=MA(e).get(t)||i;return r&&(r.transforms.list.set(t,a),r.transforms.last=t),n?SA(e,a,n):a}(e,t,n,r);case"css":return _A(e,t,r);case"attribute":return wA(e,t);default:return e[t]||0}}function CA(e,t){var r=/^(\*=|\+=|-=)/.exec(e);if(!r)return e;var n=xA(e)||0,i=parseFloat(t),a=parseFloat(e.replace(r[0],""));switch(r[0][0]){case"+":return i+a+n;case"-":return i-a+n;case"*":return i*a+n}}function TA(e,t){if(iA.col(e))return function(e){return iA.rgb(e)?function(e){var t=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(e);return t?"rgba("+t[1]+",1)":e}(e):iA.hex(e)?function(e){var t=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,r,n){return t+t+r+r+n+n})),r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return"rgba("+parseInt(r[1],16)+","+parseInt(r[2],16)+","+parseInt(r[3],16)+",1)"}(e):iA.hsl(e)?function(e){var t,r,n,i=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(e),a=parseInt(i[1],10)/360,o=parseInt(i[2],10)/100,s=parseInt(i[3],10)/100,l=i[4]||1;function u(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}if(0==o)t=r=n=s;else{var c=s<.5?s*(1+o):s+o-s*o,h=2*s-c;t=u(h,c,a+1/3),r=u(h,c,a),n=u(h,c,a-1/3)}return"rgba("+255*t+","+255*r+","+255*n+","+l+")"}(e):void 0}(e);if(/\s/g.test(e))return e;var r=xA(e),n=r?e.substr(0,e.length-r.length):e;return t?n+t:n}function DA(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function LA(e){for(var t,r=e.points,n=0,i=0;i<r.numberOfItems;i++){var a=r.getItem(i);i>0&&(n+=DA(t,a)),t=a}return n}function PA(e){if(e.getTotalLength)return e.getTotalLength();switch(e.tagName.toLowerCase()){case"circle":return function(e){return 2*Math.PI*wA(e,"r")}(e);case"rect":return function(e){return 2*wA(e,"width")+2*wA(e,"height")}(e);case"line":return function(e){return DA({x:wA(e,"x1"),y:wA(e,"y1")},{x:wA(e,"x2"),y:wA(e,"y2")})}(e);case"polyline":return LA(e);case"polygon":return function(e){var t=e.points;return LA(e)+DA(t.getItem(t.numberOfItems-1),t.getItem(0))}(e)}}function RA(e,t){var r=t||{},n=r.el||function(e){for(var t=e.parentNode;iA.svg(t)&&iA.svg(t.parentNode);)t=t.parentNode;return t}(e),i=n.getBoundingClientRect(),a=wA(n,"viewBox"),o=i.width,s=i.height,l=r.viewBox||(a?a.split(" "):[0,0,o,s]);return{el:n,viewBox:l,x:l[0]/1,y:l[1]/1,w:o/l[2],h:s/l[3]}}function OA(e,t){function r(r){void 0===r&&(r=0);var n=t+r>=1?t+r:0;return e.el.getPointAtLength(n)}var n=RA(e.el,e.svg),i=r(),a=r(-1),o=r(1);switch(e.property){case"x":return(i.x-n.x)*n.w;case"y":return(i.y-n.y)*n.h;case"angle":return 180*Math.atan2(o.y-a.y,o.x-a.x)/Math.PI}}function kA(e,t){var r=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,n=TA(iA.pth(e)?e.totalLength:e,t)+"";return{original:n,numbers:n.match(r)?n.match(r).map(Number):[0],strings:iA.str(e)||t?n.split(r):[]}}function IA(e){return dA(e?pA(iA.arr(e)?e.map(fA):fA(e)):[],(function(e,t,r){return r.indexOf(e)===t}))}function BA(e){var t=IA(e);return t.map((function(e,r){return{target:e,id:r,total:t.length,transforms:{list:MA(e)}}}))}function zA(e,t){var r=gA(t);if(/^spring/.test(r.easing)&&(r.duration=oA(r.easing)),iA.arr(e)){var n=e.length;2!==n||iA.obj(e[0])?iA.fnc(t.duration)||(r.duration=t.duration/n):e={value:e}}var i=iA.arr(e)?e:[e];return i.map((function(e,r){var n=iA.obj(e)&&!iA.pth(e)?e:{value:e};return iA.und(n.delay)&&(n.delay=r?0:t.delay),iA.und(n.endDelay)&&(n.endDelay=r===i.length-1?t.endDelay:0),n})).map((function(e){return yA(e,r)}))}var NA={css:function(e,t,r){return e.style[t]=r},attribute:function(e,t,r){return e.setAttribute(t,r)},object:function(e,t,r){return e[t]=r},transform:function(e,t,r,n,i){if(n.list.set(t,r),t===n.last||i){var a="";n.list.forEach((function(e,t){a+=t+"("+e+") "})),e.style.transform=a}}};function FA(e,t){BA(e).forEach((function(e){for(var r in t){var n=bA(t[r],e),i=e.target,a=xA(n),o=EA(i,r,a,e),s=CA(TA(n,a||xA(o)),o),l=AA(i,r);NA[l](i,r,s,e.transforms,!0)}}))}function UA(e,t){return dA(pA(e.map((function(e){return t.map((function(t){return function(e,t){var r=AA(e.target,t.name);if(r){var n=function(e,t){var r;return e.tweens.map((function(n){var i=function(e,t){var r={};for(var n in e){var i=bA(e[n],t);iA.arr(i)&&(i=i.map((function(e){return bA(e,t)})),1===i.length&&(i=i[0])),r[n]=i}return r.duration=parseFloat(r.duration),r.delay=parseFloat(r.delay),r}(n,t),a=i.value,o=iA.arr(a)?a[1]:a,s=xA(o),l=EA(t.target,e.name,s,t),u=r?r.to.original:l,c=iA.arr(a)?a[0]:u,h=xA(c)||xA(l),d=s||h;return iA.und(o)&&(o=u),i.from=kA(c,d),i.to=kA(CA(o,c),d),i.start=r?r.end:0,i.end=i.start+i.delay+i.duration+i.endDelay,i.easing=cA(i.easing,i.duration),i.isPath=iA.pth(a),i.isColor=iA.col(i.from.original),i.isColor&&(i.round=1),r=i,i}))}(t,e),i=n[n.length-1];return{type:r,property:t.name,animatable:e,tweens:n,duration:i.end,delay:n[0].delay,endDelay:i.endDelay}}}(e,t)}))}))),(function(e){return!iA.und(e)}))}function jA(e,t){var r=e.length,n=function(e){return e.timelineOffset?e.timelineOffset:0},i={};return i.duration=r?Math.max.apply(Math,e.map((function(e){return n(e)+e.duration}))):t.duration,i.delay=r?Math.min.apply(Math,e.map((function(e){return n(e)+e.delay}))):t.delay,i.endDelay=r?i.duration-Math.max.apply(Math,e.map((function(e){return n(e)+e.duration-e.endDelay}))):t.endDelay,i}var HA,VA=0,GA=[],WA=[],qA=function(){function e(){HA=requestAnimationFrame(t)}function t(t){var r=GA.length;if(r){for(var n=0;n<r;){var i=GA[n];if(i.paused){var a=GA.indexOf(i);a>-1&&(GA.splice(a,1),r=GA.length)}else i.tick(t);n++}e()}else HA=cancelAnimationFrame(HA)}return e}();function YA(e){void 0===e&&(e={});var t,r=0,n=0,i=0,a=0,o=null;function s(e){var t=window.Promise&&new Promise((function(e){return o=e}));return e.finished=t,t}var l=function(e){var t=vA(Z_,e),r=vA(K_,e),n=function(e,t){var r=[],n=t.keyframes;for(var i in n&&(t=yA(function(e){for(var t=dA(pA(e.map((function(e){return Object.keys(e)}))),(function(e){return iA.key(e)})).reduce((function(e,t){return e.indexOf(t)<0&&e.push(t),e}),[]),r={},n=function(n){var i=t[n];r[i]=e.map((function(e){var t={};for(var r in e)iA.key(r)?r==i&&(t.value=e[r]):t[r]=e[r];return t}))},i=0;i<t.length;i++)n(i);return r}(n),t)),t)iA.key(i)&&r.push({name:i,tweens:zA(t[i],e)});return r}(r,e),i=BA(e.targets),a=UA(i,n),o=jA(a,r),s=VA;return VA++,yA(t,{id:s,children:[],animatables:i,animations:a,duration:o.duration,delay:o.delay,endDelay:o.endDelay})}(e);function u(){var e=l.direction;"alternate"!==e&&(l.direction="normal"!==e?"normal":"reverse"),l.reversed=!l.reversed,t.forEach((function(e){return e.reversed=l.reversed}))}function c(e){return l.reversed?l.duration-e:e}function h(){r=0,n=c(l.currentTime)*(1/YA.speed)}function d(e,t){t&&t.seek(e-t.timelineOffset)}function p(e){var t=0,r=l.animations,n=r.length;for(!0===l.reversePlayback&&!1===l.rewind&&(e=l.duration-e);t<n;){var i=r[t],a=i.animatable,o=i.tweens,s=o.length-1,u=o[s];s&&(u=dA(o,(function(t){return e<t.end}))[0]||u);for(var c=tA(e-u.start-u.delay,0,u.duration)/u.duration,h=isNaN(c)?1:u.easing(c),d=u.to.strings,p=u.round,f=[],m=u.to.numbers.length,g=void 0,v=0;v<m;v++){var y=void 0;if(!0===l.reversePlayback&&!1===l.rewind)var x=u.to.numbers[v],b=u.from.numbers[v]||0;else b=u.to.numbers[v],x=u.from.numbers[v]||0;y=u.isPath?OA(u.value,h*b):x+h*(b-x),p&&(u.isColor&&v>2||(y=Math.round(y*p)/p)),f.push(y)}var w=d.length;if(w){g=d[0];for(var S=0;S<w;S++){d[S];var _=d[S+1],A=f[S];isNaN(A)||(g+=_?A+_:A+" ")}}else g=f[0];NA[i.type](a.target,i.property,g,a.transforms),i.currentValue=g,t++}}function f(e){l[e]&&!l.passThrough&&l[e](l)}function m(e){var h=l.duration,m=l.delay,g=h-l.endDelay,v=c(e);l.progress=tA(v/h*100,0,100),l.reversePlayback=v<l.currentTime,t&&function(e){if(l.reversePlayback)for(var r=a;r--;)d(e,t[r]);else for(var n=0;n<a;n++)d(e,t[n])}(v),!l.began&&l.currentTime>=0&&(l.began=!0,f("begin")),!l.loopBegan&&l.currentTime>0&&(l.loopBegan=!0,f("loopBegin")),v<=m&&0!==l.currentTime&&p(0),(v>=g&&l.currentTime!==h||!h)&&p(h),v>m&&v<g?(l.changeBegan||(l.changeBegan=!0,l.changeCompleted=!1,f("changeBegin")),f("change"),p(v)):l.changeBegan?(l.changeCompleted=!0,l.changeBegan=!1,f("change"),f("changeComplete")):l.began&&v>g&&(f("change"),f("changeComplete")),l.currentTime=tA(v,0,h),l.began&&f("update"),e>=h&&(n=0,l.remaining&&!0!==l.remaining&&l.remaining--,l.remaining?(r=i,f("loopComplete"),l.loopBegan=!1,"alternate"===l.direction&&u()):(l.paused=!0,l.completed||(l.completed=!0,f("loopComplete"),f("complete"),!l.passThrough&&"Promise"in window&&(o(),s(l)))))}return s(l),l.reset=function(){var e=l.direction;l.passThrough=!1,l.currentTime=0,l.progress=0,l.paused=!0,l.began=!1,l.loopBegan=!1,l.changeBegan=!1,l.completed=!1,l.changeCompleted=!1,l.reversePlayback=!1,l.reversed="reverse"===e,l.remaining=l.loop,t=l.children;for(var r=a=t.length;r--;)l.children[r].reset();(l.reversed&&!0!==l.loop||"alternate"===e&&1===l.loop)&&l.remaining++,p(l.reversed?l.duration:0)},l.set=function(e,t){return FA(e,t),l},l.tick=function(e){i=e,r||(r=i),m((i+(n-r))*YA.speed)},l.seek=function(e){m(c(e))},l.pause=function(){l.paused=!0,h()},l.play=function(){!l.paused||(l.completed&&l.reset(),l.paused=!1,GA.push(l),h(),HA||qA())},l.reverse=function(){u(),l.completed=!l.reversed,h()},l.restart=function(){l.reset(),l.play()},l.reset(),l.autoplay&&l.play(),l}function XA(e,t){for(var r=t.length;r--;)mA(e,t[r].animatable.target)&&t.splice(r,1)}typeof document<"u"&&document.addEventListener("visibilitychange",(function(){document.hidden?(GA.forEach((function(e){return e.pause()})),WA=GA.slice(0),YA.running=GA=[]):WA.forEach((function(e){return e.play()}))})),YA.version="3.2.0",YA.speed=1,YA.running=GA,YA.remove=function(e){for(var t=IA(e),r=GA.length;r--;){var n=GA[r],i=n.animations,a=n.children;XA(t,i);for(var o=a.length;o--;){var s=a[o],l=s.animations;XA(t,l),!l.length&&!s.children.length&&a.splice(o,1)}!i.length&&!a.length&&n.pause()}},YA.get=EA,YA.set=FA,YA.convertPx=SA,YA.path=function(e,t){var r=iA.str(e)?hA(e)[0]:e,n=t||100;return function(e){return{property:e,el:r,svg:RA(r),totalLength:PA(r)*(n/100)}}},YA.setDashoffset=function(e){var t=PA(e);return e.setAttribute("stroke-dasharray",t),t},YA.stagger=function(e,t){void 0===t&&(t={});var r=t.direction||"normal",n=t.easing?cA(t.easing):null,i=t.grid,a=t.axis,o=t.from||0,s="first"===o,l="center"===o,u="last"===o,c=iA.arr(e),h=parseFloat(c?e[0]:e),d=c?parseFloat(e[1]):0,p=xA(c?e[1]:e)||0,f=t.start||0+(c?h:0),m=[],g=0;return function(e,t,v){if(s&&(o=0),l&&(o=(v-1)/2),u&&(o=v-1),!m.length){for(var y=0;y<v;y++){if(i){var x=l?(i[0]-1)/2:o%i[0],b=l?(i[1]-1)/2:Math.floor(o/i[0]),w=x-y%i[0],S=b-Math.floor(y/i[0]),_=Math.sqrt(w*w+S*S);"x"===a&&(_=-w),"y"===a&&(_=-S),m.push(_)}else m.push(Math.abs(o-y));g=Math.max.apply(Math,m)}n&&(m=m.map((function(e){return n(e/g)*g}))),"reverse"===r&&(m=m.map((function(e){return a?e<0?-1*e:-e:Math.abs(g-e)})))}return f+(c?(d-h)/g:h)*(Math.round(100*m[t])/100)+p}},YA.timeline=function(e){void 0===e&&(e={});var t=YA(e);return t.duration=0,t.add=function(r,n){var i=GA.indexOf(t),a=t.children;function o(e){e.passThrough=!0}i>-1&&GA.splice(i,1);for(var s=0;s<a.length;s++)o(a[s]);var l=yA(r,vA(K_,e));l.targets=l.targets||e.targets;var u=t.duration;l.autoplay=!1,l.direction=t.direction,l.timelineOffset=iA.und(n)?u:CA(n,u),o(t),l.rewind=t.rewind,t.seek(l.timelineOffset);var c=YA(l);o(c),a.push(c);var h=jA(a,e);return t.delay=h.delay,t.endDelay=h.endDelay,t.duration=h.duration,t.seek(0),t.reset(),t.autoplay&&t.play(),t},t},YA.easing=cA,YA.penner=uA,YA.random=function(e,t){return Math.floor(Math.random()*(t-e+1))+e};var QA=YA;function JA(e,t,r,n){if(!e.hasValue(r)||!(r in t))return;let i=e.getValue(r),a=t[r];i!==a&&n.push({change:t=>{e.setValue(r,ge.lerp(i,a,t))}})}function ZA(e,t,r,n){if(!e.hasValue(r)||!(r in t))return;let i=e.getValue(r),a=i.toArray(),o=t[r];Ip.isEqual(a,o)||n.push({change:e=>{i.fromArray(Ip.lerp(a,o,e))}})}function KA(e,t,r,n){if(!e.hasValue(r)||!(r in t))return;let i=e.getValue(r),a=i.toArray(),o=t[r];Bp.isEqual(a,o)||n.push({change:e=>{i.fromArray(Bp.lerp(a,o,e))}})}function $A(e,t,r,n,i){if(!e.hasValue(r)||!(r in t))return;let a=e.getValue(r).clone(),o=t[r],s="string"==typeof o?i.getColor(o):o;if(Up.equals(a,s))return;let l=a.clone();e.setValue(r,l),n.push({change:e=>{let{r:t,g:r,b:n}=Up.lerp(a,s,e);l.setRGB(t,r,n)}})}function eM(e,t,r,n,i){if(!e.hasValue(r)||!(r in t))return;let a=e.getValue(r).clone(),o=t[r],s="string"==typeof o?i.getColor(o):o;if(Hp.equals(a,s))return;let l=a.clone();e.setValue(r,l),n.push({change:e=>{let{r:t,g:r,b:n,a:i}=Hp.lerp(a,s,e);l.setRGBA(t,r,n,i)}})}function tM(e,t,r="steps",n){if(!e.hasValue(r)||!(r in t))return;let i=[...e.getValue(r)],a=t[r];for(let t=0;t<i.length;++t){let r=i[t],o=a[t];r!==o&&n.push({change:n=>{i[t]=ge.lerp(r,o,n),e.setValue("steps",i)}})}}function rM(e,t,r="colors",n){if(!e.hasValue(r)||!(r in t))return;let i=e.getValue(r),a=t[r];for(let e=0;e<i.length;++e){let t=i[e].toArray(),r=a[e];zp.isEqual(t,r)||n.push({change:n=>{i[e].fromArray(zp.lerp(t,r,n))}})}}function nM(e,t,r="texture",n){if(!e.hasValue(r)||!(r in t))return;let i=e.getValue("texture"),a=t[r],o=i.repeat.toArray(),s=i.offset.toArray(),l=a.repeat,u=a.offset;(!Ip.isEqual(o,l)||!Ip.isEqual(s,u))&&n.push({change:e=>{i.repeat.fromArray(Ip.lerp(o,l,e)),i.offset.fromArray(Ip.lerp(s,u,e)),i.updateMatrix(),i.needsUpdate=!0}})}var iM=new We,aM=new We,oM=new Ge,sM=new Rt,lM=new St;function uM(e,t,r,n){let i=[];if(function(e,t,r,n){if(void 0!==r.position){let t=e.position.toArray(),i=r.position;Bp.isEqual(t,i)||n.push({change:r=>{e.position.fromArray(Bp.lerp(t,i,r)),e.updateMatrix()}})}if(void 0!==r.scale){let t=e.scale.toArray(),i=r.scale;Bp.isEqual(t,i)||n.push({change:r=>{e.scale.fromArray(Bp.lerp(t,i,r)),e.updateMatrix()}})}(function(e,t,r,n){if(void 0===r.rotation)return;let i=iM.setFromEuler(e.rotation).toArray(),a=r.rotation;if(!Bp.isEqual(i,a))if(Bp.sub(r.rotation,t?t.rotation:e.rotation).every((e=>Math.abs(e)<2*Math.PI))){let t=e.quaternion.clone(),i=(new Ge).setFromEuler(sM.set(r.rotation[0],r.rotation[1],r.rotation[2]));n.push({change:r=>{(function(e,t,r,n){if(0===n)return r.copy(e);if(1===n)return r.copy(t);let i=e.w*t.w+e.x*t.x+e.y*t.y+e.z*t.z;if(i>=1)return r.copy(e);let a=1-i*i;if(a<=Number.EPSILON){let i=1-n;return r.w=i*e.w+n*t.w,r.x=i*e.x+n*t.x,r.y=i*e.y+n*t.y,r.z=i*e.z+n*t.z,r.normalize(),r}let o=Math.sqrt(a),s=Math.atan2(o,i),l=Math.sin((1-n)*s)/o,u=Math.sin(n*s)/o;r.w=e.w*l+t.w*u,r.x=e.x*l+t.x*u,r.y=e.y*l+t.y*u,r.z=e.z*l+t.z*u})(t,i,e.quaternion,r),e.updateMatrix()}})}else n.push({change:t=>{e.rotation.setFromVector3(aM.fromArray(Bp.lerp(i,a,t))),e.updateMatrix()}})})(e,t,r,n),function(e,t,r){if(void 0!==t.hiddenMatrix&&!Np.isEqual(e.hiddenMatrix.toArray(),t.hiddenMatrix)){let n=new We,i=new Ge,a=new We;e.hiddenMatrix.decompose(n,i,a);let o=new We,s=new Ge,l=new We;lM.fromArray(t.hiddenMatrix).decompose(o,s,l),r.push({change:t=>{oM.slerpQuaternions(i,s,t),iM.lerpVectors(n,o,t),aM.lerpVectors(a,l,t),e.hiddenMatrix.compose(iM,oM,aM)}})}}(e,r,n)}(e,null==t?void 0:t.objectState,r.objectState,i),fx(e)){if("geometry"in r.objectState&&function(e,t,r){if(void 0!==t.width&&void 0!==t.height&&void 0!==t.depth){let{width:n,height:i,depth:a}=e.geometry.userData.parameters,o=[n,i,a],s=[t.width,t.height,t.depth];Bp.isEqual(o,s)||r.push({change:t=>{let[r,n,i]=Bp.lerp(o,s,t);e.updateGeometry({parameters:{width:r,height:n,depth:i}})}})}}(e,r.objectState.geometry,i),"material"in r.objectState||"materials"in r.objectState){let[t,a]=function(e,t,r=0){let n,i=Array.isArray(e.material)?e.material[r]:e.material;return"materials"in t?n=t.materials[r]:"material"in t&&(n=t.material),[i,n]}(e,r.objectState,e.selectedMaterial);t&&a&&"string"!=typeof a&&function(e,t,r,n){var i,a;let o=e.layersList.head;for(;o;){let e=t.layers.data(o.uuid);if(e&&(null==(i=o.visible)||i)&&(null==(a=e.visible)||a)){let t=o.getNames().filter((e=>!jg.some((t=>e.includes(t)))));for(let i of t)try{let t=o.getValue(i);if("steps"===i)tM(o,e,i,r);else if("colors"===i)rM(o,e,i,r);else if("number"==typeof t)JA(o,e,i,r);else{if("boolean"==typeof t)continue;"isVector2"in t?ZA(o,e,i,r):"isVector3"in t?KA(o,e,i,r):"isColorA"in t?eM(o,e,i,r,n):"isColor"in t?$A(o,e,i,r,n):"isTexture"in t&&nM(o,e,i,r)}}catch(e){console.error(`animateMaterial: unexpected material layer for ${i}`,e)}}o=o.next}}(t,a,i,n)}}else(e=>px(e)&&("LightDirectional"===e.objectType||"LightSpot"===e.objectType||"LightPoint"===e.objectType))(e)?function(e,t,r,n){if(void 0!==t.intensity){let n=e.intensity,i=t.intensity;n!==i&&r.push({change:t=>{e.intensity=ge.lerp(n,i,t)}})}if(void 0!==t.color){let i=e.color.clone(),a="string"==typeof t.color?n.getColor(t.color):t.color;if(!Up.equals(i,a)){let t=i.clone();e.color=t,r.push({change:e=>{let{r,g:n,b:o}=Up.lerp(i,a,e);t.setRGB(r,n,o)}})}}}(e,r.objectState,i,n):(e=>"CombinedCamera"===e.objectType)(e)&&function(e,t,r){var n,i;let a="OrthographicCamera"===e.cameraType?null==(n=t.orthographic)?void 0:n.zoom:null==(i=t.perspective)?void 0:i.zoom;if(void 0!==a){let t=e.zoom;t!==a&&r.push({change:r=>{e.zoom=ge.lerp(t,a,r),e.updateProjectionMatrix()}})}if(void 0!==t.targetOffset){let n=e.targetOffset,i=t.targetOffset;n!==i&&r.push({change:t=>{e.targetOffset=ge.lerp(n,i,t)}})}}(e,r.objectState,i);return{change:e=>{i.forEach((t=>{t.change&&t.change(e)}))}}}function cM(e,t,r){switch(e){case 0:return"cubicBezier( 0, 0, 1, 1 )";case 1:return"cubicBezier( .25, .1, .25, 1 )";case 2:return"cubicBezier( .42, 0, 1, 1 )";case 3:return"cubicBezier( 0, 0, .58, 1 )";case 4:return"cubicBezier( .42, 0, .58, 1 )";case 5:let{control1:e,control2:n}=t;return`cubicBezier( ${e[0]}, ${e[1]}, ${n[0]}, ${n[1]} )`;case 6:let{mass:i,stiffness:a,damping:o,velocity:s}=r;return`spring( ${i}, ${a}, ${o}, ${s} )`}}var hM=class{constructor(e){this.targetState=e}static create(e,t){var r;let n=new hM(e);if(e.object){let i=t.find(e.object);if(n.object=i,null!=i&&i.interaction){let t=i.interaction.states;n.state=e.state&&null!=(r=t.find((t=>t.uuid===e.state)))?r:t[0]}}return n}get cubicControls(){let e=this.targetState;return 5===e.easing?{control1:e.control1,control2:e.control2}:g({},qp.defaultData)}get springParameters(){let e=this.targetState;return 6===e.easing?e:g({},Wp.defaultData)}get easing(){return this.targetState.easing}get duration(){return this.targetState.duration}get delay(){return this.targetState.delay}get repeat(){return this.targetState.repeat}get cycle(){return this.targetState.cycle}get rewind(){return this.targetState.rewind}},dM=new aw,pM=class extends hx{};function fM(e,t){switch(e.type){case"noise":case"displace":return"noiseType"===t;case"texture":return"projection"===t||"axis"===t;case"depth":return"num"===t||"smooth"===t||"isWorldSpace"===t||"gradientType"===t;default:return!1}}function mM(e,t,r,n,i){var a;let o=!1;for(let[n,a]of Object.entries(e)){if(!n||void 0===a||ww(n,r,i))continue;r.visible=i.visible;let e=r.uniforms[`f${r.id}_${n}`];if(e)switch(e.constructor){case wb:if("string"==typeof a){let r=t.getColor(a);r&&(e.value=r);break}{let t=a;e.value instanceof pM?e.value=new hx(t.r,t.g,t.b,t.a):e.setRGBA(t);break}case Bx:if("string"==typeof a){let r=t.getColor(a);r&&(e.value=r);break}{let t=a;e.value instanceof pM?e.value=new hx(t.r,t.g,t.b,t.a):e.value.setRGBA(t.r,t.g,t.b,t.a);break}case kx:{let t=a;e.value.setX(t[0]),e.value.setY(t[1]);break}case Ix:{let t=a;e.value.setX(t[0]),e.value.setY(t[1]),e.value.setZ(t[2]);break}case $x:{let r=a;if("image"in r){let n=t.getImage(r.image);if(n)e.value.image=n;else{let t=new Image;t.src=r.image.data,e.value.image=t}}"wrapping"in r&&(e.value.wrapS=e.value.wrapT=r.wrapping),"repeat"in r&&e.value.repeat.fromArray(r.repeat),"offset"in r&&e.value.offset.fromArray(r.offset),e.value.needsUpdate=!0;break}case Eb:a.forEach(((t,r)=>{e.value[r].setX(t[0]),e.value[r].setY(t[1]),e.value[r].setZ(t[2]),e.value[r].setW(t[3])}));break;default:o=o||fM(r,n),e.value=a}}if(o&&i){let e=yw({id:"0",fi:0,data:i},t);null==(a=n.userData.layers)||a.changeLayer(r.id,g({},e)),n.dispose(),n.needsUpdate=!0}}var gM,vM=new We,yM=new tn,xM=new St,bM={type:"follow",normal:new We,raycaster:new cv};(e=>{e.create=function(e){if(10===e.type)return{type:"follow"}},e.listener=function({target:e,normal:t,raycaster:r,begin:n,change:i}){!e||!e.interaction||!t||!r||(n&&n("follow",e.uuid),yM.setFromNormalAndCoplanarPoint(t,e.getWorldPosition(vM)),r.ray.intersectPlane(yM,vM),e.position.copy(vM),null!==e.parent&&e.position.applyMatrix4(xM.copy(e.parent.matrixWorld).invert()),e.position.applyMatrix4(xM.copy(e.hiddenMatrix).invert()),e.updateMatrix(),i&&i())}})(gM||(gM={}));var wM,SM,_M={type:"keyDown"},AM={type:"keyUp"};(e=>{e.create=function(e){if(5===e.type&&e.key)return{type:"keyDown",targets:[],key:e.key}},e.listener=function({target:e,begin:t,change:r,domEvent:n}){if(!e||!e.interaction||!n)return;let i=e.interaction.events.keyDown;if(null==i||!i.length)return;let a=!1;for(let e of i)e.key===n.key&&(e.targets.forEach((e=>{var t,n;return null==(n=null==(t=e.object)?void 0:t.interaction)?void 0:n.play(e,{change:r})})),a=!0);a&&t&&t("keyDown",e.uuid)}})(wM||(wM={})),(e=>{e.create=function(e){if(6===e.type&&e.key)return{type:"keyUp",targets:[],key:e.key}},e.listener=function({target:e,begin:t,change:r,domEvent:n}){if(!e||!e.interaction||!n)return;let i=e.interaction.events.keyUp;if(null==i||!i.length)return;let a=!1;for(let e of i)e.key===n.key&&(e.targets.forEach((e=>{var t,n;return null==(n=null==(t=e.object)?void 0:t.interaction)?void 0:n.play(e,{change:r})})),a=!0);a&&t&&t("keyUp",e.uuid)}})(SM||(SM={}));var MM,EM=new We,CM=new tn,TM={type:"lookAt",normal:new We,raycaster:new cv};(e=>{e.create=function(e){if(9===e.type&&e.distance)return{type:"lookAt",distance:e.distance}},e.listener=function({target:e,normal:t,raycaster:r,begin:n,change:i}){var a;if(!(e&&e.interaction&&t&&r))return;let o=e.interaction.events.lookAt;if(null==o||!o.length)return;n&&n("lookAt",e.uuid);let s=o[0].distance;CM.set(t,-s),r.ray.intersectPlane(CM,EM),e.lookAt(EM),e.updateMatrix(),null==(a=e.interaction.animation)||a.finished.then((()=>{e.lookAt(EM),e.updateMatrix()})),i&&i()}})(MM||(MM={}));var DM,LM,PM={type:"mouseDown"},RM={type:"mouseUp"};(e=>{e.create=function(e){if(0===e.type)return{type:"mouseDown",targets:[]}},e.listener=function({target:e,begin:t,change:r}){if(!e||!e.interaction)return;let n=e.interaction.events.mouseDown;null==n||!n.length||(t&&t("mouseDown",e.uuid),n.forEach((e=>{e.targets.forEach((e=>{var t,n;return null==(n=null==(t=e.object)?void 0:t.interaction)?void 0:n.play(e,{change:r})}))})))}})(DM||(DM={})),(e=>{e.create=function(e){if(1===e.type)return{type:"mouseUp",targets:[]}},e.listener=function({target:e,begin:t,change:r}){if(!e||!e.interaction)return;let n=e.interaction.events.mouseUp;null==n||!n.length||(t&&t("mouseUp",e.uuid),n.forEach((e=>{e.targets.forEach((e=>{var t,n;return null==(n=null==(t=e.object)?void 0:t.interaction)?void 0:n.play(e,{change:r})}))})))}})(LM||(LM={}));var OM,kM={type:"start"};(e=>{e.create=function(e){if(7===e.type)return{type:"start",targets:[]}},e.listener=function({target:e,begin:t,change:r}){if(!e||!e.interaction)return;let n=e.interaction.events.start;null==n||!n.length||(t&&t("start",e.uuid),n.forEach((e=>{e.targets.forEach((e=>{var t,n;return null==(n=null==(t=e.object)?void 0:t.interaction)?void 0:n.play(e,{change:r})}))})))}})(OM||(OM={}));var IM,BM={type:"link"};(e=>{e.create=function(e){let t;if(0===e.type)t={type:"mousedown"};else if(1===e.type)t={type:"mouseup"};else if(5===e.type){if(!e.key)return;t={type:"keydown",key:e.key}}else{if(6!==e.type)return;if(!e.key)return;t={type:"keyup",key:e.key}}if(e.url)return{type:"link",subEvent:t,url:e.url}},e.listener=function({target:e,begin:t,domEvent:r,subType:n}){var i;if(!(e&&e.interaction&&n&&r))return;let a,o=e.interaction.events.link;if(o){if("keydown"===n||"keyup"===n){let e=r.key;a=null==(i=o[n])?void 0:i.filter((t=>t.subEvent.type===n&&t.subEvent.key===e))}else a=o[n];if(null!=a&&a.length){t&&t("link",e.uuid);for(let e of a)ff?window.location.assign(e.url):window.open(e.url,"_blank")}}}})(IM||(IM={}));var zM,NM={type:"scroll"};(e=>{e.create=function(e){if(11===e.type&&void 0!==e.steps)return{type:"scroll",targets:[],steps:e.steps}},e.listener=function({target:e,begin:t,change:r,domEvent:n}){if(!e||!e.interaction||!n)return;let i=e.interaction.events.scroll;if(null==i||!i.length)return;t&&t("scroll",e.uuid);let a=n.deltaY>0?1:-1;i.forEach((e=>{e.targets.forEach((t=>{var n,i;return null==(i=null==(n=t.object)?void 0:n.interaction)?void 0:i.seek(t,a,e.steps,{change:r})}))}))}})(zM||(zM={}));var FM,UM={type:"mouseHover"};function jM(e){let t,{type:r}=e;return 10===r?t=gM.create(e):5===r?t=wM.create(e):6===r?t=SM.create(e):9===r?t=MM.create(e):0===r?t=DM.create(e):1===r?t=LM.create(e):2===r?t=FM.create(e):11===r?t=zM.create(e):7===r&&(t=OM.create(e)),t}function HM(e,t,r,n,i=!1){if(!i&&0===t.states.length)return;let a=null===r?t:Ug.patch(t,t.states.data(r));if(gx(e,a),e instanceof Tx&&"Mesh"===a.type){if(e instanceof MS?e.buildFromStore(a.geometry):e.updateGeometry({parameters:a.geometry}),"material"in a){if(e.material instanceof Array)return;if("string"!=typeof a.material){let t=a.material.layers;for(let r of t){let t=e.material.userData.layers.getLayerByUuid(r.id);mM(r.data,n,t,e.material,r.data)}}}else if("materials"in a){if(!(e.material instanceof Array))return;var o=0;for(let t of a.materials){if("string"!=typeof t){let r=t.layers;for(let t of r){let r=e.material[o].userData.layers.getLayerByUuid(t.id);mM(t.data,n,r,e.material[o],t.data)}}o++}}}else if("DirectionalLight"===a.type)e.fromDirectionalLightState(a,n);else if("PointLight"===a.type)e.fromPointLightState(a,n);else if("SpotLight"===a.type)e.fromSpotLightState(a,n);else if(e instanceof Zw&&Pp.is(a.type)){let t=a;e.setZoom("PerspectiveCamera",t.perspective.zoom),e.setZoom("OrthographicCamera",t.orthographic.zoom)}}(e=>{e.create=function(e){if(2===e.type)return{type:"mouseHover",targets:[]}},e.listener=function({target:e,begin:t,change:r,enter:n}){if(!e||!e.interaction||void 0===n)return;let i=e.interaction.events.mouseHover;null==i||!i.length||(t&&t("mouseHover",e.uuid),n?i.forEach((e=>{e.targets.forEach((e=>{var t,n;return null==(n=null==(t=e.object)?void 0:t.interaction)?void 0:n.play(e,{change:r})}))})):i.forEach((e=>{e.targets.forEach((e=>{var t,n;return null==(n=null==(t=e.object)?void 0:t.interaction)?void 0:n.reverse(e,{change:r})}))})))}})(FM||(FM={}));var VM=class{constructor(e){this.objectState=e,this.uuid=ge.generateUUID()}static create(e,t){let r=new VM(t);return r.uuid=e,r}execute(e,t){HM(e,this.objectState,null,t,!0)}},GM=new cv,WM=new We,qM=new Ue,YM={follow:gM.listener,keyDown:wM.listener,keyUp:SM.listener,link:IM.listener,lookAt:MM.listener,mouseDown:DM.listener,mouseUp:LM.listener,mouseHover:FM.listener,scroll:zM.listener,start:OM.listener},XM={follow:bM,keyDown:_M,keyUp:AM,link:BM,lookAt:TM,mouseDown:PM,mouseUp:RM,mouseHover:UM,scroll:NM,start:kM};function QM(e,t){if(fx(t)){if(!t.raycastLock&&t.visible){let r=e.intersectObject(t,!1);return r.length?r[0]:void 0}}else if("EmptyObject"===t.objectType)return JM(e,t)}function JM(e,t){if(fx(t)&&!t.raycastLock&&t.visible){let r=e.intersectObject(t,!1);if(r.length)return r[0]}for(let r of t.children)if(px(r)){let t=JM(e,r);if(t)return t}}function ZM(e){let t;if(e.index)for(let r=0;r<e.index.array.length;r+=3)t=e.index.array[r],e.index.array[r]=e.index.array[r+2],e.index.array[r+2]=t}function KM(e){return"SubdivObject"===e||"NonParametric"===e?e:"Mesh"}var $M=class{constructor(e,{autoRender:t=!1}={}){this._viewportMode=1,this._viewportWidth=window.innerWidth,this._viewportHeight=window.innerHeight,this._proxyObjectCache=new Map,this._skipRender=!0,this.autoRender=!1,this.disposed=!1,this.requestRender=()=>{this._skipRender=!1},this.render=()=>{var e,t,r;!this._renderer||(this._rafId=requestAnimationFrame(this.render),null==(e=this._perfs)||e.start(),(this.autoRender||!this._skipRender)&&(this._controls&&(this._controls.enableDamping||this._controls.autoRotate)?this._skipRender=!this._controls.update():this._skipRender=!0,this._playmode&&!this._playmode.isEnable&&this._playmode.activate(),this._scene&&this._camera&&(this._renderer.autoClear=!1,this._transmissionRenderTarget&&(this._renderer.setRenderTarget(this._transmissionRenderTarget),this._renderer.clear(),this._camera.layers.enable(0),this._camera.layers.disable(3),this._renderer.render(this._scene,this._camera),this._renderer.setRenderTarget(null),this._camera.layers.enable(3)),null!=(t=this._scene.postprocessing)&&t.enabled?(this._renderer.autoClear=!1,this._scene.postprocessing.render()):(this._renderer.autoClear=!0,this._renderer.render(this._scene,this._camera))),null==(r=this._perfs)||r.end()))},this.resize=()=>{var e,t,r,n;!this._renderer||(1===this._viewportMode&&(this._viewportWidth=window.innerWidth,this._viewportHeight=window.innerHeight,this._frameView&&(this._frameView.frameSize=new ve(this._viewportWidth,this._viewportHeight))),null==(e=this._frameView)||e.updateRenderer(),null!=(t=this._scene)&&t.postprocessing&&this._scene.postprocessing.resize(this._viewportWidth,this._viewportHeight),1!==this._viewportMode&&(null==(r=this._frameView)||r.updateViewport()),this._camera&&(null==(n=this._frameView)||n.updateCamera(),"PerspectiveCamera"===this._camera.cameraType&&1===this._viewportMode&&(this._camera.aspect=this._viewportWidth/this._viewportHeight),this._camera.updateProjectionMatrix()),this.requestRender())},this.canvas=e,this.autoRender=t,window.addEventListener("resize",ef(this.resize,200)),window.location.search.includes("perfs")&&(this._perfs=new class{constructor({x:e=10,y:t=10}){this._startTime=0;let r=document.getElementById("spe-perfs");r?this.element=r:(this.element=document.createElement("div"),document.body.appendChild(this.element),this.element.style.position="absolute",this.element.style.zIndex="10000",this.element.style.fontFamily="monospace",this.element.style.background="black",this.element.style.color="white",this.element.style.padding="10px",this.element.style.opacity="0.5",this.element.style.fontSize="11px",this.element.setAttribute("id","spe-perfs")),this.element.style.left=`${e}px`,this.element.style.top=`${t}px`}dispose(){var e;null==(e=this.element.parentElement)||e.removeChild(this.element)}start(){this._startTime=performance.now()}end(){let e=performance.now()-this._startTime;this.element.innerHTML=e.toFixed(3)+" ms"}}({x:10,y:10}))}async load(e){let t=await(await fetch(e)).arrayBuffer();await this.start(t)}async start(e){var t;if(this.disposed)return;let r=await async function(e){let[t,r]=jf(lg.deserialize(new Uint8Array(e))),n=[];t.scene.objects.traverse(((e,t)=>{"Mesh"===t.type&&"NonParametricGeometry"===t.geometry.type&&void 0!==t.geometry.data.draco&&n.push(t)})),n.length&&await(G_||(G_=new X_).setDecoderPath("https://www.gstatic.com/draco/versioned/decoders/1.5.2/").preload(),G_.decoderPending);for(let e of n){let t=await J_(Vf(e.geometry.data.draco));if(t){t.index&&(e.geometry.data.index={array:t.index.array,itemSize:1,normalized:!1,type:"Uint32Array"});let r={};t.attributes.forEach((({name:e,array:t,itemSize:n})=>{r[e]={array:t,itemSize:n,type:"Float32Array",normalized:!1}})),e.geometry.data.attributes=r,e.geometry.data.draco=void 0}}return r.result().data}(e);this._publishData=r.scene.publish;let n=new class{constructor(e){this.sharedAssets=new class{constructor(e){this.materials={},this.images={},this.colors={},this.transmissionRenderTarget=new je(2048,2048,{generateMipmaps:!0,minFilter:D,magFilter:T,wrapS:M,wrapT:M}),this.transmissionRenderTarget.depthTexture=new Ra(2048,2048),this.reset(e)}reset(e){for(let[t,r]of Object.entries(e.images))this.addImage(t,r.data);for(let[t,r]of Object.entries(e.colors))this.addColor(t,r);for(let[t,r]of Object.entries(e.materials))this.addMaterial(t,_w(r,this))}get transmissionSamplerMap(){return this.transmissionRenderTarget.texture}get transmissionDepthMap(){return this.transmissionRenderTarget.depthTexture}addMaterial(e,t){t.uuid=e,this.materials[e]=t}deleteMaterial(e){this.materials[e]&&(this.materials[e].dispose(),delete this.materials[e])}isSharedMaterial(e){return e.uuid in this.materials||e===dM}getMaterial(e){return this.materials[e]}getMaterialOrDeletedPlaceholder(e){var t;return null!=(t=this.materials[e])?t:dM}getMaterials(){return this.materials}addImage(e,t){if(this.images[e])return this.images[e].onload=()=>{this.onImageLoad&&this.onImageLoad(e)},this.images[e].src=t,!0;{let r=new Image;return r.src=t,r.onload=()=>{this.onImageLoad&&this.onImageLoad(e)},this.images[e]=r,!1}}deleteImage(e){this.images[e]&&delete this.images[e]}getDefaultImage(){return this.images.image_0}getImage(e){return this.images[e]}getImages(){return this.images}addColor(e,t){return this.colors[e]?("a"in t?this.colors[e].setRGBA(t.r,t.g,t.b,t.a):this.colors[e].setRGBA(t.r,t.g,t.b,1),!0):(this.colors[e]=new pM(t.r,t.g,t.b,"a"in t?t.a:1),!1)}updateColor(e,t){var r,n,i,a;if(this.colors[e]){let o=this.colors[e];return this.colors[e].r=null!=(r=t.r)?r:o.r,this.colors[e].g=null!=(n=t.g)?n:o.g,this.colors[e].b=null!=(i=t.b)?i:o.b,this.colors[e].a=null!=(a=t.a)?a:o.a,!0}return!1}deleteColor(e){this.colors[e]&&delete this.colors[e]}getColor(e){return this.colors[e]}dispose(){Object.keys(this.materials).forEach((e=>this.deleteMaterial(e))),this.transmissionRenderTarget.depthTexture.dispose(),this.transmissionRenderTarget.dispose(),this.onImageLoad=void 0}}(e.shared),this.scene=new q_(e.scene,this.sharedAssets),this.scene.switchActiveCamera(this.scene.activeCamera)}reset(e,t){this.scene.clearScene(this.sharedAssets),this.sharedAssets.reset(e.shared),this.scene.resetAfterClear(e.scene,this.sharedAssets)}dispose(){this.scene.dispose()}}(r);if(window.location.search.includes("merge-geometries")){let e=performance.now();!function(e,t){let r=function(e,t){let r={};return e.traverseEntity((e=>{var n;if("Mesh"!==e.type||!("material"in e)||!e.visible||!(e instanceof Tx)||Array.isArray(e.material)||e&&e.interaction&&e.interaction.states.length>0)return;let i=e.parent;for(;i;){if(i instanceof Tx&&i.interaction&&i.interaction.states.length>1)return;i=i.parent}let a=e.material.uuid,o=t.shared.materials[a];if(o){if(!Tg.isMergable(o))return}else{let r=null==(n=t.scene.objects.get(e.uuid))?void 0:n.data;if(r&&"material"in r&&"string"!=typeof r.material){if(!Tg.isMergable(r.material))return;a=Tg.getHash(r.material)}}r[a]||(r[a]={});let s=r[a][KM(e.objectType)];if(s){if(s.push(e),e.cloner)for(let t of e.cloner.children)s.push(t)}else if(r[a][KM(e.objectType)]=[e],e.cloner)for(let t of e.cloner.children)r[a][KM(e.objectType)].push(t)})),r}(t,e),n=function(e){let t=0;return Object.values(e).forEach((e=>{Object.values(e).forEach((e=>{let r=e.length;r>t&&(t=r)}))})),t}(r),i=new Array(n),a=0,o=new Array(n),s=0,l=new Array(n),u=0,c=new Array(n),h=0;for(let e of Object.values(r))for(let n of Object.values(e)){if(s=0,u=0,n.forEach((e=>{e instanceof Tx&&(o[s++]=e.geometry.clone(),l[u++]=e)})),u<2)continue;for(let e=0;e<u;e++)l[e].updateWorldMatrix(!0,!1),o[e].applyMatrix4(l[e].matrixWorld),l[e].matrixWorld.determinant()<0&&ZM(o[e]);let e=Hg(o.slice(0,s),!1);if(e){let o;"SubdivObject"===n[0].objectType?(console.warn("Turning subdiv object into mesh"),o=new Fr(e,l[0].material)):o=new Fr(e,l[0].material),o.castShadow=l[0].castShadow,o.receiveShadow=l[0].receiveShadow,t.add(o);let s=e=>{h=0;for(let t of e)t.children&&s(t.children),t instanceof Tx&&(Array.isArray(t.material)||r[t.material.uuid]&&r[t.material.uuid][t.objectType]&&r[t.material.uuid][t.objectType].length>1||(c[h++]=t));for(let e=0;e<h;e++)t.attach(c[e])};for(let e=0;e<u;e++){let t=l[e];s(t.children),i[a++]=t}}}for(let e=0;e<a;e++)i[e].removeFromParent()}(r,n.scene);let t=performance.now();console.log("Merged geometries in ",t-e," ms")}this._scene=n.scene,this._sharedAssetsManager=n.sharedAssets,this._sharedAssetsManager.onImageLoad=()=>{this.requestRender()},function(e,t,r){let n=[];e.objects.traverse(((e,i)=>{var a;if(void 0===i.states)return;let o=t.find(e),s=new class{constructor(e,t){this.object=e,this.sharedAssets=t,this.uuid=ge.generateUUID(),this.states=[],this.events={},this._scrollCounter=null}get animation(){return this._animation}start(){void 0!==this._animation&&(this._animation.pause(),this._animation=void 0,this._scrollCounter=null),this.states.length>1&&(this.states[0].execute(this.object,this.sharedAssets),this._currentState=this.states[0],this._prevState=void 0)}end(){void 0!==this._animation&&(this._animation.pause(),this._animation=void 0),this.states.length>1&&this.states[0].execute(this.object,this.sharedAssets),this._currentState=void 0,this._prevState=void 0}play(e,t){this.object.visible&&void 0!==e.state&&this.animate(e.state,e,!0,t)}reverse(e,t){this.object.visible&&void 0!==this._prevState&&this.animate(this._prevState,e,!0,t)}seek(e,t,r,n){var i;null===this._scrollCounter&&(this.object.visible&&void 0!==e.state&&this.animate(e.state,e,!1,n),this._scrollCounter=0),this._scrollCounter+=t,this._scrollCounter=Math.min(Math.max(this._scrollCounter,0),r),null==(i=this._animation)||i.seek(this._scrollCounter/r*e.duration)}animate(e,t,r=!0,n){var i,a,o,s,l,u;if(this._currentState===e){if(null!=(i=this._animation)&&i.reversed){let e=null!=(o=null==(a=this._animation)?void 0:a.currentTime)?o:0;null==(s=this._animation)||s.reset(),null==(l=this._animation)||l.seek(e),null==(u=this._animation)||u.play()}}else{this._prevState=this._currentState,this._currentState=e,void 0!==this._animation&&this._animation.pause(),!0===t.cycle&&!0===t.repeat?this._animation=QA.timeline({duration:t.duration,delay:t.delay/2,endDelay:t.delay/2,direction:"alternate",loop:!0,rewind:t.rewind,easing:cM(t.easing,t.cubicControls,t.springParameters),autoplay:r}):!0===t.cycle&&!1===t.repeat?this._animation=QA.timeline({duration:t.duration,delay:t.delay,endDelay:t.delay/2,direction:"alternate",rewind:t.rewind,easing:cM(t.easing,t.cubicControls,t.springParameters),autoplay:r}):!1===t.cycle&&!0===t.repeat?this._animation=QA.timeline({duration:t.duration,delay:t.delay,direction:"normal",loop:!0,easing:cM(t.easing,t.cubicControls,t.springParameters),autoplay:r}):this._animation=QA.timeline({duration:t.duration,delay:t.delay,direction:"normal",easing:cM(t.easing,t.cubicControls,t.springParameters),autoplay:r}),r&&this._animation.finished.then((()=>{this._animation=void 0}));let i=uM(this.object,this._prevState,this._currentState,this.sharedAssets),a={t:0};this._animation.add({targets:a,t:1,change:()=>{var e;i.change&&(i.change(a.t),null==(e=null==n?void 0:n.change)||e.call(this,a.t))}},0)}}emitEvent(e){if("keyDown"===e||"keyUp"===e||"mouseDown"===e||"mouseUp"===e||"mouseHover"===e||"scroll"===e||"start"===e){let t=this.events[e];if(t)for(let e of t)e.targets.forEach((e=>this.play(e)))}}emitEventReverse(e){if("keyDown"===e||"keyUp"===e||"mouseDown"===e||"mouseUp"===e||"mouseHover"===e||"scroll"===e||"start"===e){let t=this.events[e];if(t)for(let e of t)e.targets.forEach((e=>this.reverse(e)))}}}(o,r),l=s.states;l.push(VM.create(e,i));for(let e of i.states){let t=Ug.patch(i,e.data);l.push(VM.create(e.id,t))}let u=s.events;if(i.events)for(let{data:e}of i.events){let t=jM(e);if(!t)continue;let r=t.type;u[r]?null==(a=u[r])||a.push(t):u[r]=[t],"targets"in e&&n.push([e,t]);let i=IM.create(e);if(i){u.link||(u.link={});let e=i.subEvent.type;u.link[e]?u.link[e].push(i):u.link[e]=[i]}}l.length>0||Object.keys(u).length>0?(o.interaction=s,HM(o,i,null,r)):delete o.interaction}));for(let[e,r]of n)if("targets"in e&&"targets"in r)for(let{data:n}of e.targets){let e=hM.create(n,t);r.targets.push(e)}}(r.scene,this._scene,this._sharedAssetsManager),this._camera=this._scene.activeCamera;let i=Object.values(r.frames)[0];i&&("fullscreen"===i.preset?(this._viewportMode=1,this._viewportWidth=window.innerWidth,this._viewportHeight=window.innerHeight):(this._viewportMode=2,this._viewportWidth=i.size[0],this._viewportHeight=i.size[1])),null!=(t=this._scene.postprocessing)&&t.enabled?(this._renderer=new Ia({canvas:this.canvas,antialias:!1,alpha:!0,stencil:!1,depth:!1,powerPreference:"high-performance"}),this._scene.postprocessing.init({renderer:this._renderer,camera:this._camera,scene:this._scene}),this._scene.postprocessing.addEventListener("smaaloaded",this.requestRender)):this._renderer=new Ia({canvas:this.canvas,antialias:!0,alpha:!0,stencil:!0,depth:!0,powerPreference:"high-performance"}),this._scene.needsTransmission(void 0)&&(this._transmissionRenderTarget=new je(2048,2048,{generateMipmaps:!0,minFilter:D,magFilter:T,wrapS:M,wrapT:M}),this._transmissionRenderTarget.depthTexture=new Ra(2048,2048),this._scene.needsTransmission(this._transmissionRenderTarget)),this._renderer.setPixelRatio(window.devicePixelRatio),this._renderer.setSize(this._viewportWidth,this._viewportHeight),this._scene.postprocessing&&this._scene.postprocessing.resize(this._viewportWidth,this._viewportHeight),this._renderer.shadowMap.enabled=!0,this._renderer.shadowMap.type=2,this._renderer.setClearColor(this._scene.bgColor,this._scene.alpha),this._frameView=new class{constructor(e,t,r,n,i){this._aspect=1,this._renderer=e,this._camera=t,this._frameSize=(new ve).copy(r),this._editorSize=(new ve).copy(n),this._aspect=t.aspect,this._fov=null!=i?i:t.fov}set frameSize(e){this._frameSize.copy(e)}updateRenderer(){!this._renderer||this._renderer.setSize(this._frameSize.x,this._frameSize.y)}updateViewportForImageExport(){if(!this._renderer||!this._camera||"PerspectiveCamera"!==this._camera.cameraType)return;let e=this._frameSize.x,t=this._frameSize.y,r=this._editorSize.x,n=this._editorSize.y;this._aspect=e/t,this._camera.zoom*=Math.min(r/e,n/t),this._renderer.setViewport(0,0,e,t)}updateViewport(){if(!this._renderer||!this._camera||"PerspectiveCamera"!==this._camera.cameraType)return;let e=this._frameSize.x,t=this._frameSize.y,r=this._editorSize.x,n=this._editorSize.y,i=0,a=0,o=e,s=t;e<r&&(i=.5*(r-e),i=-i,o=r),t<n&&(a=.5*(n-t),a=-a,s=n),this._aspect=o/s,this._renderer.setViewport(i,a,o,s)}updateCamera(){if(this._camera)if("PerspectiveCamera"===this._camera.cameraType){let e=this._frameSize.y,t=this._editorSize.y,r=this._fov;if(e>t){let n=function(e,t,r,n,i){return(e-1080)/1080*14+1}(e)/100;r*=e/t,r*=1-n}this._camera.aspect=this._aspect,this._camera.fov=r,this._camera.updateProjectionMatrix()}else this._camera.setViewplaneSize(this._frameSize.x,this._frameSize.y)}revert(){let e=window.innerWidth,t=window.innerHeight;this._renderer&&(this._renderer.setViewport(0,0,e,t),this._renderer.setSize(e,t)),this._camera&&(this._camera.aspect=e/t,this._camera.fov=this._fov,this._camera.setViewplaneSize(e,t),this._camera.updateProjectionMatrix())}}(this._renderer,this._camera,new ve(this._viewportWidth,this._viewportHeight),new ve(window.innerWidth,window.innerHeight)),this._controls=new rv(this._camera,this._renderer.domElement),this._publishData&&(this._controls.fromJSON(this._publishData.orbitControls),this._controls.useKeyEvents=!1),this._controls.addEventListener("change",this.requestRender),this._controls.addEventListener("start",this.requestRender),this._playmode=new class{constructor(e,t,r,n){this.isEnable=!1,this.splineEvents={},this._map={},this._prevObjects=[],this._onMouseDown=e=>{GM.setFromCamera(this._getPointer(e.clientX,e.clientY),this._camera),this._camera.getWorldDirection(WM),WM.negate(),this._handleMouseDownEvent(e)},this._onMouseUp=e=>{GM.setFromCamera(this._getPointer(e.clientX,e.clientY),this._camera),this._camera.getWorldDirection(WM),WM.negate(),this._handleMouseUpEvent(e)},this._onMouseMove=e=>{GM.setFromCamera(this._getPointer(e.clientX,e.clientY),this._camera),this._camera.getWorldDirection(WM),WM.negate(),this._handleMouseHoverEvent(e),this._handleLookAtEvent(e),this._handleFollowEvent(e)},this._onTouchStart=e=>{1===e.touches.length&&(GM.setFromCamera(this._getPointer(e.touches[0].clientX,e.touches[0].clientY),this._camera),this._camera.getWorldDirection(WM),WM.negate(),this._handleMouseDownEvent(e),this._handleMouseHoverEvent(e),this._handleLookAtEvent(e),this._handleFollowEvent(e))},this._onTouchEnd=e=>{this._handleMouseUpEvent(e),this._handleMouseHoverEvent(e,!0)},this._onTouchMove=e=>{1===e.touches.length&&(GM.setFromCamera(this._getPointer(e.touches[0].clientX,e.touches[0].clientY),this._camera),this._camera.getWorldDirection(WM),WM.negate(),this._handleMouseHoverEvent(e),this._handleLookAtEvent(e),this._handleFollowEvent(e))},this._onWheel=e=>{this._handleWheelEvent(e)},this._onKeyDown=e=>{this._handleKeyDownEvent(e)},this._onKeyUp=e=>{this._handleKeyUpEvent(e)},this._renderer=e,this._domElement=e.domElement,this._camera=r,this._scene=t,this._app=n}activate(){var e,t,r,n,i,a,o,s,l,u,c,h,d,p,f,m,g,v,y,x,b,w,S,_,A,M,E,C,T,D;this.isEnable=!0,this._map={},this._scene.traverseEntity((e=>{void 0!==e.interaction&&(e.interaction.start(),Object.keys(e.interaction.events).forEach((t=>{let r=t;this._addDOMCustomEvent(r,e),this._addSPEEvent(r,YM[r],e)})))})),gf?(((null==(e=this._map.mouseDown)?void 0:e.length)||(null==(r=null==(t=this._map.link)?void 0:t.mousedown)?void 0:r.length)||(null==(n=this._map.mouseHover)?void 0:n.length)||(null==(i=this._map.lookAt)?void 0:i.length)||(null==(a=this._map.follow)?void 0:a.length))&&this._domElement.addEventListener("touchstart",this._onTouchStart),((null==(o=this._map.mouseUp)?void 0:o.length)||(null==(l=null==(s=this._map.link)?void 0:s.mouseup)?void 0:l.length)||(null==(u=this._map.mouseHover)?void 0:u.length))&&this._domElement.addEventListener("touchend",this._onTouchEnd),((null==(c=this._map.mouseHover)?void 0:c.length)||(null==(h=this._map.lookAt)?void 0:h.length)||(null==(d=this._map.follow)?void 0:d.length))&&this._domElement.addEventListener("touchmove",this._onTouchMove)):(((null==(p=this._map.mouseDown)?void 0:p.length)||(null==(m=null==(f=this._map.link)?void 0:f.mousedown)?void 0:m.length))&&this._domElement.addEventListener("pointerdown",this._onMouseDown),((null==(g=this._map.mouseUp)?void 0:g.length)||(null==(y=null==(v=this._map.link)?void 0:v.mouseup)?void 0:y.length))&&this._domElement.addEventListener("pointerup",this._onMouseUp),((null==(x=this._map.mouseHover)?void 0:x.length)||(null==(b=this._map.lookAt)?void 0:b.length)||(null==(w=this._map.follow)?void 0:w.length))&&this._domElement.addEventListener("pointermove",this._onMouseMove)),null!=(S=this._map.scroll)&&S.length&&this._domElement.addEventListener("wheel",this._onWheel),((null==(_=this._map.keyDown)?void 0:_.length)||(null==(M=null==(A=this._map.link)?void 0:A.keydown)?void 0:M.length))&&document.addEventListener("keydown",this._onKeyDown),((null==(E=this._map.keyUp)?void 0:E.length)||(null==(T=null==(C=this._map.link)?void 0:C.keyup)?void 0:T.length))&&document.addEventListener("keyup",this._onKeyUp),null!=(D=this._map.start)&&D.length&&this._handleStartEvent()}deactivate(){this._scene.traverseEntity((e=>{if(!e.interaction)return;e.interaction.end();let t=e;Object.keys(YM).forEach((e=>{let r=e;t.removeEventListener(r,YM[r])}))})),this._domElement.removeEventListener("pointerdown",this._onMouseDown),this._domElement.removeEventListener("pointerup",this._onMouseUp),this._domElement.removeEventListener("pointermove",this._onMouseMove),this._domElement.removeEventListener("touchstart",this._onTouchStart),this._domElement.removeEventListener("touchend",this._onTouchEnd),this._domElement.removeEventListener("touchmove",this._onTouchMove),this._domElement.removeEventListener("wheel",this._onWheel),document.removeEventListener("keydown",this._onKeyDown),document.removeEventListener("keyup",this._onKeyUp),this._map={},this.isEnable=!1}reset(){this._scene.traverseEntity((e=>{var t;null==(t=e.interaction)||t.start()})),this._handleStartEvent()}_getPointer(e,t){let r=this._domElement.getBoundingClientRect(),n=this._renderer.getViewport(qM),i=function(e){if(""!==e.style.transform){let t=getComputedStyle(e).getPropertyValue("transform");if("none"!==t){let e=t.replace("matrix(","").split(",");return{x:parseFloat(e[0]),y:parseFloat(e[3])}}}return{x:1,y:1}}(this._domElement),a=n.x*i.x,o=n.y*i.y,s=n.z*i.x,l=n.w*i.y,u=r.height-l,c=(e-a-r.left)*(r.width/s),h=(t-u+o-r.top)*(r.height/l);return{x:c/r.width*2-1,y:-h/r.height*2+1}}_handleStartEvent(){var e;null==(e=this._map.start)||e.forEach((e=>e.dispatchEvent(kM)))}_handleWheelEvent(e){var t;null!=(t=this._map.scroll)&&t.length&&(NM.domEvent=e,this._map.scroll.forEach((e=>e.dispatchEvent(NM))))}_handleMouseDownEvent(e){var t,r,n;null==(t=this._map.mouseDown)||t.forEach((t=>{QM(GM,t)&&(PM.domEvent=e,t.dispatchEvent(PM))})),null==(n=null==(r=this._map.link)?void 0:r.mousedown)||n.forEach((t=>{QM(GM,t)&&(BM.domEvent=e,BM.subType="mousedown",t.dispatchEvent(BM))}))}_handleMouseUpEvent(e){var t,r,n;null==(t=this._map.mouseUp)||t.forEach((t=>{QM(GM,t)&&(RM.domEvent=e,t.dispatchEvent(RM))})),null==(n=null==(r=this._map.link)?void 0:r.mouseup)||n.forEach((t=>{QM(GM,t)&&(BM.domEvent=e,BM.subType="mouseup",t.dispatchEvent(BM))}))}_handleMouseHoverEvent(e,t=!1){var r;let n=[];t||null==(r=this._map.mouseHover)||r.forEach((e=>{QM(GM,e)&&n.push(e)})),this._prevObjects.length&&(UM.domEvent=e,UM.enter=!1,this._prevObjects.forEach((e=>{n.includes(e)||e.dispatchEvent(UM)}))),n.length&&(UM.domEvent=e,UM.enter=!0,n.forEach((e=>e.dispatchEvent(UM)))),this._prevObjects=n}_handleLookAtEvent(e){var t;null!=(t=this._map.lookAt)&&t.length&&(TM.domEvent=e,TM.normal=WM,TM.raycaster=GM,this._map.lookAt.forEach((e=>e.dispatchEvent(TM))))}_handleFollowEvent(e){this._map.follow&&(bM.domEvent=e,bM.normal=WM,bM.raycaster=GM,this._map.follow.forEach((e=>e.dispatchEvent(bM))))}_handleKeyDownEvent(e){var t,r,n;null!=(t=this._map.keyDown)&&t.length&&(_M.domEvent=e,this._map.keyDown.forEach((e=>e.dispatchEvent(_M)))),null!=(n=null==(r=this._map.link)?void 0:r.keydown)&&n.length&&(BM.domEvent=e,BM.subType="keydown",this._map.link.keydown.forEach((e=>e.dispatchEvent(BM))))}_handleKeyUpEvent(e){var t,r,n;null!=(t=this._map.keyUp)&&t.length&&(AM.domEvent=e,this._map.keyUp.forEach((e=>e.dispatchEvent(AM)))),null!=(n=null==(r=this._map.link)?void 0:r.keyup)&&n.length&&(BM.domEvent=e,BM.subType="keyup",this._map.link.keyup.forEach((e=>e.dispatchEvent(BM))))}_addSPEEvent(e,t,r){var n;if(r.interaction)if(XM[e].begin=this._dispatchDOMCustomEvent.bind(this),XM[e].change=this._app.requestRender.bind(this),"link"===e){let n=r.interaction.events[e];if(n){let i=!1;Object.keys(n).forEach((t=>{let n=t;void 0===this._map[e]&&(this._map[e]={});let a=this._map[e];void 0===a[n]?a[n]=[r]:a[n].push(r),i=!0})),i&&r.addEventListener(e,t)}}else null!=(n=r.interaction.events[e])&&n.length&&(r.addEventListener(e,t),void 0===this._map[e]?this._map[e]=[r]:this._map[e].push(r))}_addDOMCustomEvent(e,t){if(e){let r=new CustomEvent(e,{bubbles:!0});Object.defineProperty(r,"target",{writable:!1,value:{id:t.uuid,name:t.name}}),this.splineEvents[e]?this.splineEvents[e][t.uuid]=r:this.splineEvents[e]={[t.uuid]:r}}}_dispatchDOMCustomEvent(e,t){var r;let n=null==(r=this.splineEvents[e])?void 0:r[t];n&&this._domElement.dispatchEvent(n)}}(this._renderer,this._scene,this._camera,this),this.resize(),this.render()}findObjectById(e){var t;let r=null==(t=this._scene)?void 0:t.getObjectByProperty("uuid",e);return this._createProxyObject(r)}findObjectByName(e){var t;let r=null==(t=this._scene)?void 0:t.getObjectByName(e);return this._createProxyObject(r)}getSplineEvents(){var e;return null==(e=this._playmode)?void 0:e.splineEvents}emitEvent(e,t){let r=this.findObjectById(t);null==r||r.emitEvent(e)}emitEventReverse(e,t){let r=this.findObjectById(t);null==r||r.emitEventReverse(e)}addEventListener(e,t){var r;null==(r=this._renderer)||r.domElement.addEventListener(e,t)}removeEventListener(e,t){var r;null==(r=this._renderer)||r.domElement.removeEventListener(e,t)}setZoom(e){var t;null==(t=this._controls)||t.zoomOut(e)}dispose(){var e,t,r,n,i,a,o;this.disposed=!0,null==(e=this._playmode)||e.deactivate(),null==(t=this._scene)||t.dispose(),this._rafId&&cancelAnimationFrame(this._rafId),this._proxyObjectCache.forEach((e=>{fc.unsubscribe(e)})),null==(r=this._renderer)||r.dispose(),null==(n=this._transmissionRenderTarget)||n.dispose(),null==(a=null==(i=this._transmissionRenderTarget)?void 0:i.depthTexture)||a.dispose(),null==(o=this._sharedAssetsManager)||o.dispose()}_createProxyObject(e){if(null==e)return;if(this._proxyObjectCache.has(e.uuid))return this._proxyObjectCache.get(e.uuid);let t={name:e.name,uuid:e.uuid,visible:e.visible,intensity:e.intensity,position:e.position,rotation:e.rotation,scale:e.scale,emitEvent(t){var r;null==(r=e.interaction)||r.emitEvent(t)},emitEventReverse(t){var r;null==(r=e.interaction)||r.emitEventReverse(t)}},r=fc(t,((t,r)=>{var n;"object"!=typeof e[t]&&(null==(n=Object.getOwnPropertyDescriptor(e,t))?void 0:n.writable)&&(e[t]=r),this.requestRender(),e.updateMatrix()}));return this._proxyObjectCache.set(e.uuid,r),r}}},487:e=>{var t={utf8:{stringToBytes:function(e){return t.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(t.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],r=0;r<e.length;r++)t.push(255&e.charCodeAt(r));return t},bytesToString:function(e){for(var t=[],r=0;r<e.length;r++)t.push(String.fromCharCode(e[r]));return t.join("")}}};e.exports=t},640:(e,t,r)=>{"use strict";var n=r(742),i={"text/plain":"Text","text/html":"Url",default:"Text"};e.exports=function(e,t){var r,a,o,s,l,u,c=!1;t||(t={}),r=t.debug||!1;try{if(o=n(),s=document.createRange(),l=document.getSelection(),(u=document.createElement("span")).textContent=e,u.style.all="unset",u.style.position="fixed",u.style.top=0,u.style.clip="rect(0, 0, 0, 0)",u.style.whiteSpace="pre",u.style.webkitUserSelect="text",u.style.MozUserSelect="text",u.style.msUserSelect="text",u.style.userSelect="text",u.addEventListener("copy",(function(n){if(n.stopPropagation(),t.format)if(n.preventDefault(),void 0===n.clipboardData){r&&console.warn("unable to use e.clipboardData"),r&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var a=i[t.format]||i.default;window.clipboardData.setData(a,e)}else n.clipboardData.clearData(),n.clipboardData.setData(t.format,e);t.onCopy&&(n.preventDefault(),t.onCopy(n.clipboardData))})),document.body.appendChild(u),s.selectNodeContents(u),l.addRange(s),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");c=!0}catch(n){r&&console.error("unable to copy using execCommand: ",n),r&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),c=!0}catch(n){r&&console.error("unable to copy using clipboardData: ",n),r&&console.error("falling back to prompt"),a=function(e){var t=(/mac os x/i.test(navigator.userAgent)?"":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}("message"in t?t.message:"Copy to clipboard: #{key}, Enter"),window.prompt(a,e)}}finally{l&&("function"==typeof l.removeRange?l.removeRange(s):l.removeAllRanges()),u&&document.body.removeChild(u),o()}return c}},12:e=>{var t,r;t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&r.rotl(e,8)|4278255360&r.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=r.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],r=0,n=0;r<e.length;r++,n+=8)t[n>>>5]|=e[r]<<24-n%32;return t},wordsToBytes:function(e){for(var t=[],r=0;r<32*e.length;r+=8)t.push(e[r>>>5]>>>24-r%32&255);return t},bytesToHex:function(e){for(var t=[],r=0;r<e.length;r++)t.push((e[r]>>>4).toString(16)),t.push((15&e[r]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(parseInt(e.substr(r,2),16));return t},bytesToBase64:function(e){for(var r=[],n=0;n<e.length;n+=3)for(var i=e[n]<<16|e[n+1]<<8|e[n+2],a=0;a<4;a++)8*n+6*a<=8*e.length?r.push(t.charAt(i>>>6*(3-a)&63)):r.push("=");return r.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var r=[],n=0,i=0;n<e.length;i=++n%4)0!=i&&r.push((t.indexOf(e.charAt(n-1))&Math.pow(2,-2*i+8)-1)<<2*i|t.indexOf(e.charAt(n))>>>6-2*i);return r}},e.exports=r},133:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(81),i=r.n(n),a=r(645),o=r.n(a)()(i());o.push([e.id,".imgSpinner{animation-duration:1.3s;animation-name:rotater}.App-logo{padding:40px 50px}.App-logo:hover{animation-name:parpadeo;animation-duration:.01s;animation-timing-function:linear;animation-iteration-count:infinite;-webkit-animation-name:parpadeo;-webkit-animation-duration:.001s;-webkit-animation-timing-function:linear;-webkit-animation-iteration-count:infinite;box-shadow:-2px 2px 40px #ffd770,0 0 80px #a945c7;border-radius:1000%;backdrop-filter:blur(10px) saturate(1090%);overflow:hidden}@-moz-keyframes parpadeo{0%{opacity:1}50%{opacity:0}100%{opacity:1}}@-webkit-keyframes parpadeo{0%{opacity:1}50%{opacity:0}100%{opacity:1}}@keyframes parpadeo{0%{opacity:1}50%{opacity:0}100%{opacity:1}}@keyframes rotater{0%{transform:rotate(0) scale(1)}50%{transform:rotate(360deg) scale(1.3)}100%{transform:rotate(720deg) scale(1)}}",""]);const s=o},645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r="",n=void 0!==t[5];return t[4]&&(r+="@supports (".concat(t[4],") {")),t[2]&&(r+="@media ".concat(t[2]," {")),n&&(r+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),r+=e(t),n&&(r+="}"),t[2]&&(r+="}"),t[4]&&(r+="}"),r})).join("")},t.i=function(e,r,n,i,a){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(n)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(o[l]=!0)}for(var u=0;u<e.length;u++){var c=[].concat(e[u]);n&&o[c[0]]||(void 0!==a&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=a),r&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=r):c[2]=r),i&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=i):c[4]="".concat(i)),t.push(c))}},t}},81:e=>{"use strict";e.exports=function(e){return e[1]}},679:(e,t,r)=>{"use strict";var n=r(864),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function l(e){return n.isMemo(e)?o:s[e.$$typeof]||i}s[n.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[n.Memo]=o;var u=Object.defineProperty,c=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,f=Object.prototype;e.exports=function e(t,r,n){if("string"!=typeof r){if(f){var i=p(r);i&&i!==f&&e(t,i,n)}var o=c(r);h&&(o=o.concat(h(r)));for(var s=l(t),m=l(r),g=0;g<o.length;++g){var v=o[g];if(!(a[v]||n&&n[v]||m&&m[v]||s&&s[v])){var y=d(r,v);try{u(t,v,y)}catch(e){}}}}return t}},738:e=>{function t(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(t(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&t(e.slice(0,0))}(e)||!!e._isBuffer)}},554:(e,t,r)=>{e=r.nmd(e);var n="__lodash_hash_undefined__",i=9007199254740991,a="[object Arguments]",o="[object Function]",s="[object Object]",l=/^\[object .+?Constructor\]$/,u=/^(?:0|[1-9]\d*)$/,c={};c["[object Float32Array]"]=c["[object Float64Array]"]=c["[object Int8Array]"]=c["[object Int16Array]"]=c["[object Int32Array]"]=c["[object Uint8Array]"]=c["[object Uint8ClampedArray]"]=c["[object Uint16Array]"]=c["[object Uint32Array]"]=!0,c[a]=c["[object Array]"]=c["[object ArrayBuffer]"]=c["[object Boolean]"]=c["[object DataView]"]=c["[object Date]"]=c["[object Error]"]=c[o]=c["[object Map]"]=c["[object Number]"]=c[s]=c["[object RegExp]"]=c["[object Set]"]=c["[object String]"]=c["[object WeakMap]"]=!1;var h="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,d="object"==typeof self&&self&&self.Object===Object&&self,p=h||d||Function("return this")(),f=t&&!t.nodeType&&t,m=f&&e&&!e.nodeType&&e,g=m&&m.exports===f,v=g&&h.process,y=function(){try{return m&&m.require&&m.require("util").types||v&&v.binding&&v.binding("util")}catch(e){}}(),x=y&&y.isTypedArray;function b(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var w,S,_,A=Array.prototype,M=Function.prototype,E=Object.prototype,C=p["__core-js_shared__"],T=M.toString,D=E.hasOwnProperty,L=(w=/[^.]+$/.exec(C&&C.keys&&C.keys.IE_PROTO||""))?"Symbol(src)_1."+w:"",P=E.toString,R=T.call(Object),O=RegExp("^"+T.call(D).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),k=g?p.Buffer:void 0,I=p.Symbol,B=p.Uint8Array,z=(k&&k.allocUnsafe,S=Object.getPrototypeOf,_=Object,function(e){return S(_(e))}),N=Object.create,F=E.propertyIsEnumerable,U=A.splice,j=I?I.toStringTag:void 0,H=function(){try{var e=le(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),V=k?k.isBuffer:void 0,G=Math.max,W=Date.now,q=le(p,"Map"),Y=le(Object,"create"),X=function(){function e(){}return function(t){if(!be(t))return{};if(N)return N(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();function Q(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function J(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Z(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function K(e){var t=this.__data__=new J(e);this.size=t.size}function $(e,t,r){(void 0!==r&&!pe(e[t],r)||void 0===r&&!(t in e))&&re(e,t,r)}function ee(e,t,r){var n=e[t];D.call(e,t)&&pe(n,r)&&(void 0!==r||t in e)||re(e,t,r)}function te(e,t){for(var r=e.length;r--;)if(pe(e[r][0],t))return r;return-1}function re(e,t,r){"__proto__"==t&&H?H(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}Q.prototype.clear=function(){this.__data__=Y?Y(null):{},this.size=0},Q.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Q.prototype.get=function(e){var t=this.__data__;if(Y){var r=t[e];return r===n?void 0:r}return D.call(t,e)?t[e]:void 0},Q.prototype.has=function(e){var t=this.__data__;return Y?void 0!==t[e]:D.call(t,e)},Q.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Y&&void 0===t?n:t,this},J.prototype.clear=function(){this.__data__=[],this.size=0},J.prototype.delete=function(e){var t=this.__data__,r=te(t,e);return!(r<0||(r==t.length-1?t.pop():U.call(t,r,1),--this.size,0))},J.prototype.get=function(e){var t=this.__data__,r=te(t,e);return r<0?void 0:t[r][1]},J.prototype.has=function(e){return te(this.__data__,e)>-1},J.prototype.set=function(e,t){var r=this.__data__,n=te(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},Z.prototype.clear=function(){this.size=0,this.__data__={hash:new Q,map:new(q||J),string:new Q}},Z.prototype.delete=function(e){var t=se(this,e).delete(e);return this.size-=t?1:0,t},Z.prototype.get=function(e){return se(this,e).get(e)},Z.prototype.has=function(e){return se(this,e).has(e)},Z.prototype.set=function(e,t){var r=se(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},K.prototype.clear=function(){this.__data__=new J,this.size=0},K.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},K.prototype.get=function(e){return this.__data__.get(e)},K.prototype.has=function(e){return this.__data__.has(e)},K.prototype.set=function(e,t){var r=this.__data__;if(r instanceof J){var n=r.__data__;if(!q||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Z(n)}return r.set(e,t),this.size=r.size,this};function ne(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":j&&j in Object(e)?function(e){var t=D.call(e,j),r=e[j];try{e[j]=void 0;var n=!0}catch(e){}var i=P.call(e);return n&&(t?e[j]=r:delete e[j]),i}(e):function(e){return P.call(e)}(e)}function ie(e){return we(e)&&ne(e)==a}function ae(e,t,r,n,i){e!==t&&function(e,t,r){for(var n=-1,i=Object(e),a=r(e),o=a.length;o--;){var s=a[++n];if(!1===t(i[s],s,i))break}}(t,(function(a,o){if(i||(i=new K),be(a))!function(e,t,r,n,i,a,o){var l=he(e,r),u=he(t,r),c=o.get(u);if(c)$(e,r,c);else{var h,d,p,f,m,g=a?a(l,u,r+"",e,t,o):void 0,v=void 0===g;if(v){var y=me(u),x=!y&&ve(u),b=!y&&!x&&Se(u);g=u,y||x||b?me(l)?g=l:we(m=l)&&ge(m)?g=function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}(l):x?(v=!1,g=function(e,t){return e.slice()}(u)):b?(v=!1,f=new(p=(h=u).buffer).constructor(p.byteLength),new B(f).set(new B(p)),d=f,g=new h.constructor(d,h.byteOffset,h.length)):g=[]:function(e){if(!we(e)||ne(e)!=s)return!1;var t=z(e);if(null===t)return!0;var r=D.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&T.call(r)==R}(u)||fe(u)?(g=l,fe(l)?g=function(e){return function(e,t,r,n){var i=!r;r||(r={});for(var a=-1,o=t.length;++a<o;){var s=t[a],l=void 0;void 0===l&&(l=e[s]),i?re(r,s,l):ee(r,s,l)}return r}(e,_e(e))}(l):be(l)&&!ye(l)||(g=function(e){return"function"!=typeof e.constructor||ce(e)?{}:X(z(e))}(u))):v=!1}v&&(o.set(u,g),i(g,u,n,a,o),o.delete(u)),$(e,r,g)}}(e,t,o,r,ae,n,i);else{var l=n?n(he(e,o),a,o+"",e,t,i):void 0;void 0===l&&(l=a),$(e,o,l)}}),_e)}var oe=H?function(e,t){return H(e,"toString",{configurable:!0,enumerable:!1,value:(r=t,function(){return r}),writable:!0});var r}:Ee;function se(e,t){var r,n,i=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?i["string"==typeof t?"string":"hash"]:i.map}function le(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!be(e)||function(e){return!!L&&L in e}(e))&&(ye(e)?O:l).test(function(e){if(null!=e){try{return T.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}(r)?r:void 0}function ue(e,t){var r=typeof e;return!!(t=null==t?i:t)&&("number"==r||"symbol"!=r&&u.test(e))&&e>-1&&e%1==0&&e<t}function ce(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||E)}function he(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var de=function(e){var t=0,r=0;return function(){var n=W(),i=16-(n-r);if(r=n,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(oe);function pe(e,t){return e===t||e!=e&&t!=t}var fe=ie(function(){return arguments}())?ie:function(e){return we(e)&&D.call(e,"callee")&&!F.call(e,"callee")},me=Array.isArray;function ge(e){return null!=e&&xe(e.length)&&!ye(e)}var ve=V||function(){return!1};function ye(e){if(!be(e))return!1;var t=ne(e);return t==o||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function xe(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=i}function be(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function we(e){return null!=e&&"object"==typeof e}var Se=x?function(e){return function(t){return e(t)}}(x):function(e){return we(e)&&xe(e.length)&&!!c[ne(e)]};function _e(e){return ge(e)?function(e,t){var r=me(e),n=!r&&fe(e),i=!r&&!n&&ve(e),a=!r&&!n&&!i&&Se(e),o=r||n||i||a,s=o?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],l=s.length;for(var u in e)!t&&!D.call(e,u)||o&&("length"==u||i&&("offset"==u||"parent"==u)||a&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||ue(u,l))||s.push(u);return s}(e,!0):function(e){if(!be(e))return function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}(e);var t=ce(e),r=[];for(var n in e)("constructor"!=n||!t&&D.call(e,n))&&r.push(n);return r}(e)}var Ae,Me=(Ae=function(e,t,r,n){ae(e,t,r,n)},function(e,t){return de(function(e,t,r){return t=G(void 0===t?e.length-1:t,0),function(){for(var n=arguments,i=-1,a=G(n.length-t,0),o=Array(a);++i<a;)o[i]=n[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=n[i];return s[t]=r(o),b(e,this,s)}}(e,t,Ee),e+"")}((function(e,t){var r=-1,n=t.length,i=n>1?t[n-1]:void 0,a=n>2?t[2]:void 0;for(i=Ae.length>3&&"function"==typeof i?(n--,i):void 0,a&&function(e,t,r){if(!be(r))return!1;var n=typeof t;return!!("number"==n?ge(r)&&ue(t,r.length):"string"==n&&t in r)&&pe(r[t],e)}(t[0],t[1],a)&&(i=n<3?void 0:i,n=1),e=Object(e);++r<n;){var o=t[r];o&&Ae(e,o,r,i)}return e})));function Ee(e){return e}e.exports=Me},568:(e,t,r)=>{var n,i,a,o,s;n=r(12),i=r(487).utf8,a=r(738),o=r(487).bin,(s=function(e,t){e.constructor==String?e=t&&"binary"===t.encoding?o.stringToBytes(e):i.stringToBytes(e):a(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||e.constructor===Uint8Array||(e=e.toString());for(var r=n.bytesToWords(e),l=8*e.length,u=1732584193,c=-271733879,h=-1732584194,d=271733878,p=0;p<r.length;p++)r[p]=16711935&(r[p]<<8|r[p]>>>24)|4278255360&(r[p]<<24|r[p]>>>8);r[l>>>5]|=128<<l%32,r[14+(l+64>>>9<<4)]=l;var f=s._ff,m=s._gg,g=s._hh,v=s._ii;for(p=0;p<r.length;p+=16){var y=u,x=c,b=h,w=d;u=f(u,c,h,d,r[p+0],7,-680876936),d=f(d,u,c,h,r[p+1],12,-389564586),h=f(h,d,u,c,r[p+2],17,606105819),c=f(c,h,d,u,r[p+3],22,-1044525330),u=f(u,c,h,d,r[p+4],7,-176418897),d=f(d,u,c,h,r[p+5],12,1200080426),h=f(h,d,u,c,r[p+6],17,-1473231341),c=f(c,h,d,u,r[p+7],22,-45705983),u=f(u,c,h,d,r[p+8],7,1770035416),d=f(d,u,c,h,r[p+9],12,-1958414417),h=f(h,d,u,c,r[p+10],17,-42063),c=f(c,h,d,u,r[p+11],22,-1990404162),u=f(u,c,h,d,r[p+12],7,1804603682),d=f(d,u,c,h,r[p+13],12,-40341101),h=f(h,d,u,c,r[p+14],17,-1502002290),u=m(u,c=f(c,h,d,u,r[p+15],22,1236535329),h,d,r[p+1],5,-165796510),d=m(d,u,c,h,r[p+6],9,-1069501632),h=m(h,d,u,c,r[p+11],14,643717713),c=m(c,h,d,u,r[p+0],20,-373897302),u=m(u,c,h,d,r[p+5],5,-701558691),d=m(d,u,c,h,r[p+10],9,38016083),h=m(h,d,u,c,r[p+15],14,-660478335),c=m(c,h,d,u,r[p+4],20,-405537848),u=m(u,c,h,d,r[p+9],5,568446438),d=m(d,u,c,h,r[p+14],9,-1019803690),h=m(h,d,u,c,r[p+3],14,-187363961),c=m(c,h,d,u,r[p+8],20,1163531501),u=m(u,c,h,d,r[p+13],5,-1444681467),d=m(d,u,c,h,r[p+2],9,-51403784),h=m(h,d,u,c,r[p+7],14,1735328473),u=g(u,c=m(c,h,d,u,r[p+12],20,-1926607734),h,d,r[p+5],4,-378558),d=g(d,u,c,h,r[p+8],11,-2022574463),h=g(h,d,u,c,r[p+11],16,1839030562),c=g(c,h,d,u,r[p+14],23,-35309556),u=g(u,c,h,d,r[p+1],4,-1530992060),d=g(d,u,c,h,r[p+4],11,1272893353),h=g(h,d,u,c,r[p+7],16,-155497632),c=g(c,h,d,u,r[p+10],23,-1094730640),u=g(u,c,h,d,r[p+13],4,681279174),d=g(d,u,c,h,r[p+0],11,-358537222),h=g(h,d,u,c,r[p+3],16,-722521979),c=g(c,h,d,u,r[p+6],23,76029189),u=g(u,c,h,d,r[p+9],4,-640364487),d=g(d,u,c,h,r[p+12],11,-421815835),h=g(h,d,u,c,r[p+15],16,530742520),u=v(u,c=g(c,h,d,u,r[p+2],23,-995338651),h,d,r[p+0],6,-198630844),d=v(d,u,c,h,r[p+7],10,1126891415),h=v(h,d,u,c,r[p+14],15,-1416354905),c=v(c,h,d,u,r[p+5],21,-57434055),u=v(u,c,h,d,r[p+12],6,1700485571),d=v(d,u,c,h,r[p+3],10,-1894986606),h=v(h,d,u,c,r[p+10],15,-1051523),c=v(c,h,d,u,r[p+1],21,-2054922799),u=v(u,c,h,d,r[p+8],6,1873313359),d=v(d,u,c,h,r[p+15],10,-30611744),h=v(h,d,u,c,r[p+6],15,-1560198380),c=v(c,h,d,u,r[p+13],21,1309151649),u=v(u,c,h,d,r[p+4],6,-145523070),d=v(d,u,c,h,r[p+11],10,-1120210379),h=v(h,d,u,c,r[p+2],15,718787259),c=v(c,h,d,u,r[p+9],21,-343485551),u=u+y>>>0,c=c+x>>>0,h=h+b>>>0,d=d+w>>>0}return n.endian([u,c,h,d])})._ff=function(e,t,r,n,i,a,o){var s=e+(t&r|~t&n)+(i>>>0)+o;return(s<<a|s>>>32-a)+t},s._gg=function(e,t,r,n,i,a,o){var s=e+(t&n|r&~n)+(i>>>0)+o;return(s<<a|s>>>32-a)+t},s._hh=function(e,t,r,n,i,a,o){var s=e+(t^r^n)+(i>>>0)+o;return(s<<a|s>>>32-a)+t},s._ii=function(e,t,r,n,i,a,o){var s=e+(r^(t|~n))+(i>>>0)+o;return(s<<a|s>>>32-a)+t},s._blocksize=16,s._digestsize=16,e.exports=function(e,t){if(null==e)throw new Error("Illegal argument "+e);var r=n.wordsToBytes(s(e,t));return t&&t.asBytes?r:t&&t.asString?o.bytesToString(r):n.bytesToHex(r)}},418:e=>{"use strict";var t=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;function i(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(e){n[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,a){for(var o,s,l=i(e),u=1;u<arguments.length;u++){for(var c in o=Object(arguments[u]))r.call(o,c)&&(l[c]=o[c]);if(t){s=t(o);for(var h=0;h<s.length;h++)n.call(o,s[h])&&(l[s[h]]=o[s[h]])}}return l}},448:(e,t,r)=>{"use strict";var n=r(294),i=r(418),a=r(840);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!n)throw Error(o(227));var s=new Set,l={};function u(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(l[e]=t,e=0;e<t.length;e++)s.add(t[e])}var h=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p=Object.prototype.hasOwnProperty,f={},m={};function g(e,t,r,n,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){v[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];v[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){v[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){v[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){v[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){v[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){v[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){v[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){v[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function x(e){return e[1].toUpperCase()}function b(e,t,r,n){var i=v.hasOwnProperty(t)?v[t]:null;(null!==i?0===i.type:!n&&2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1]))||(function(e,t,r,n){if(null==t||function(e,t,r,n){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,r,n))return!0;if(n)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,r,i,n)&&(r=null),n||null===i?function(e){return!!p.call(m,e)||!p.call(f,e)&&(d.test(e)?m[e]=!0:(f[e]=!0,!1))}(t)&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=null===r?3!==i.type&&"":r:(t=i.attributeName,n=i.attributeNamespace,null===r?e.removeAttribute(t):(r=3===(i=i.type)||4===i&&!0===r?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,x);v[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,x);v[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,x);v[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){v[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),v.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){v[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,S=60103,_=60106,A=60107,M=60108,E=60114,C=60109,T=60110,D=60112,L=60113,P=60120,R=60115,O=60116,k=60121,I=60128,B=60129,z=60130,N=60131;if("function"==typeof Symbol&&Symbol.for){var F=Symbol.for;S=F("react.element"),_=F("react.portal"),A=F("react.fragment"),M=F("react.strict_mode"),E=F("react.profiler"),C=F("react.provider"),T=F("react.context"),D=F("react.forward_ref"),L=F("react.suspense"),P=F("react.suspense_list"),R=F("react.memo"),O=F("react.lazy"),k=F("react.block"),F("react.scope"),I=F("react.opaque.id"),B=F("react.debug_trace_mode"),z=F("react.offscreen"),N=F("react.legacy_hidden")}var U,j="function"==typeof Symbol&&Symbol.iterator;function H(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=j&&e[j]||e["@@iterator"])?e:null}function V(e){if(void 0===U)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);U=t&&t[1]||""}return"\n"+U+e}var G=!1;function W(e,t){if(!e||G)return"";G=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var n=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){n=e}e.call(t.prototype)}else{try{throw Error()}catch(e){n=e}e()}}catch(e){if(e&&n&&"string"==typeof e.stack){for(var i=e.stack.split("\n"),a=n.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s])return"\n"+i[o].replace(" at new "," at ")}while(1<=o&&0<=s);break}}}finally{G=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?V(e):""}function q(e){switch(e.tag){case 5:return V(e.type);case 16:return V("Lazy");case 13:return V("Suspense");case 19:return V("SuspenseList");case 0:case 2:case 15:return W(e.type,!1);case 11:return W(e.type.render,!1);case 22:return W(e.type._render,!1);case 1:return W(e.type,!0);default:return""}}function Y(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case A:return"Fragment";case _:return"Portal";case E:return"Profiler";case M:return"StrictMode";case L:return"Suspense";case P:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case D:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case R:return Y(e.type);case k:return Y(e._render);case O:t=e._payload,e=e._init;try{return Y(e(t))}catch(e){}}return null}function X(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function J(e){e._valueTracker||(e._valueTracker=function(e){var t=Q(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==r&&"function"==typeof r.get&&"function"==typeof r.set){var i=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){n=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Z(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Q(e)?e.checked?"true":"false":e.value),(e=n)!==r&&(t.setValue(e),!0)}function K(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var r=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function ee(e,t){var r=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;r=X(null!=t.value?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function re(e,t){te(e,t);var r=X(t.value),n=t.type;if(null!=r)"number"===n?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?ie(e,t.type,r):t.hasOwnProperty("defaultValue")&&ie(e,t.type,X(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function ne(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function ie(e,t,r){"number"===t&&K(e.ownerDocument)===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}function ae(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return n.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function oe(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+X(r),t=null,i=0;i<e.length;i++){if(e[i].value===r)return e[i].selected=!0,void(n&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function se(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function le(e,t){var r=t.value;if(null==r){if(r=t.children,t=t.defaultValue,null!=r){if(null!=t)throw Error(o(92));if(Array.isArray(r)){if(!(1>=r.length))throw Error(o(93));r=r[0]}t=r}null==t&&(t=""),r=t}e._wrapperState={initialValue:X(r)}}function ue(e,t){var r=X(t.value),n=X(t.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=n&&(e.defaultValue=""+n)}function ce(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var he="http://www.w3.org/1999/xhtml";function de(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?de(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var fe,me,ge=(me=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((fe=fe||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=fe.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,r,n){MSApp.execUnsafeLocalFunction((function(){return me(e,t)}))}:me);function ve(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var ye={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xe=["Webkit","ms","Moz","O"];function be(e,t,r){return null==t||"boolean"==typeof t||""===t?"":r||"number"!=typeof t||0===t||ye.hasOwnProperty(e)&&ye[e]?(""+t).trim():t+"px"}function we(e,t){for(var r in e=e.style,t)if(t.hasOwnProperty(r)){var n=0===r.indexOf("--"),i=be(r,t[r],n);"float"===r&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}Object.keys(ye).forEach((function(e){xe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ye[t]=ye[e]}))}));var Se=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _e(e,t){if(t){if(Se[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(o(62))}}function Ae(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Me(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ee=null,Ce=null,Te=null;function De(e){if(e=ri(e)){if("function"!=typeof Ee)throw Error(o(280));var t=e.stateNode;t&&(t=ii(t),Ee(e.stateNode,e.type,t))}}function Le(e){Ce?Te?Te.push(e):Te=[e]:Ce=e}function Pe(){if(Ce){var e=Ce,t=Te;if(Te=Ce=null,De(e),t)for(e=0;e<t.length;e++)De(t[e])}}function Re(e,t){return e(t)}function Oe(e,t,r,n,i){return e(t,r,n,i)}function ke(){}var Ie=Re,Be=!1,ze=!1;function Ne(){null===Ce&&null===Te||(ke(),Pe())}function Fe(e,t){var r=e.stateNode;if(null===r)return null;var n=ii(r);if(null===n)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(r&&"function"!=typeof r)throw Error(o(231,t,typeof r));return r}var Ue=!1;if(h)try{var je={};Object.defineProperty(je,"passive",{get:function(){Ue=!0}}),window.addEventListener("test",je,je),window.removeEventListener("test",je,je)}catch(me){Ue=!1}function He(e,t,r,n,i,a,o,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(e){this.onError(e)}}var Ve=!1,Ge=null,We=!1,qe=null,Ye={onError:function(e){Ve=!0,Ge=e}};function Xe(e,t,r,n,i,a,o,s,l){Ve=!1,Ge=null,He.apply(Ye,arguments)}function Qe(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(1026&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function Je(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function Ze(e){if(Qe(e)!==e)throw Error(o(188))}function Ke(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=Qe(e)))throw Error(o(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(n=i.return)){r=n;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===r)return Ze(i),e;if(a===n)return Ze(i),t;a=a.sibling}throw Error(o(188))}if(r.return!==n.return)r=i,n=a;else{for(var s=!1,l=i.child;l;){if(l===r){s=!0,r=i,n=a;break}if(l===n){s=!0,n=i,r=a;break}l=l.sibling}if(!s){for(l=a.child;l;){if(l===r){s=!0,r=a,n=i;break}if(l===n){s=!0,n=a,r=i;break}l=l.sibling}if(!s)throw Error(o(189))}}if(r.alternate!==n)throw Error(o(190))}if(3!==r.tag)throw Error(o(188));return r.stateNode.current===r?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function $e(e,t){for(var r=e.alternate;null!==t;){if(t===e||t===r)return!0;t=t.return}return!1}var et,tt,rt,nt,it=!1,at=[],ot=null,st=null,lt=null,ut=new Map,ct=new Map,ht=[],dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pt(e,t,r,n,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|r,nativeEvent:i,targetContainers:[n]}}function ft(e,t){switch(e){case"focusin":case"focusout":ot=null;break;case"dragenter":case"dragleave":st=null;break;case"mouseover":case"mouseout":lt=null;break;case"pointerover":case"pointerout":ut.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ct.delete(t.pointerId)}}function mt(e,t,r,n,i,a){return null===e||e.nativeEvent!==a?(e=pt(t,r,n,i,a),null!==t&&null!==(t=ri(t))&&tt(t),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function gt(e){var t=ti(e.target);if(null!==t){var r=Qe(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=Je(r)))return e.blockedOn=t,void nt(e.lanePriority,(function(){a.unstable_runWithPriority(e.priority,(function(){rt(r)}))}))}else if(3===t&&r.stateNode.hydrate)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function vt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=Kt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r)return null!==(t=ri(r))&&tt(t),e.blockedOn=r,!1;t.shift()}return!0}function yt(e,t,r){vt(e)&&r.delete(t)}function xt(){for(it=!1;0<at.length;){var e=at[0];if(null!==e.blockedOn){null!==(e=ri(e.blockedOn))&&et(e);break}for(var t=e.targetContainers;0<t.length;){var r=Kt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r){e.blockedOn=r;break}t.shift()}null===e.blockedOn&&at.shift()}null!==ot&&vt(ot)&&(ot=null),null!==st&&vt(st)&&(st=null),null!==lt&&vt(lt)&&(lt=null),ut.forEach(yt),ct.forEach(yt)}function bt(e,t){e.blockedOn===t&&(e.blockedOn=null,it||(it=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,xt)))}function wt(e){function t(t){return bt(t,e)}if(0<at.length){bt(at[0],e);for(var r=1;r<at.length;r++){var n=at[r];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==ot&&bt(ot,e),null!==st&&bt(st,e),null!==lt&&bt(lt,e),ut.forEach(t),ct.forEach(t),r=0;r<ht.length;r++)(n=ht[r]).blockedOn===e&&(n.blockedOn=null);for(;0<ht.length&&null===(r=ht[0]).blockedOn;)gt(r),null===r.blockedOn&&ht.shift()}function St(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var _t={animationend:St("Animation","AnimationEnd"),animationiteration:St("Animation","AnimationIteration"),animationstart:St("Animation","AnimationStart"),transitionend:St("Transition","TransitionEnd")},At={},Mt={};function Et(e){if(At[e])return At[e];if(!_t[e])return e;var t,r=_t[e];for(t in r)if(r.hasOwnProperty(t)&&t in Mt)return At[e]=r[t];return e}h&&(Mt=document.createElement("div").style,"AnimationEvent"in window||(delete _t.animationend.animation,delete _t.animationiteration.animation,delete _t.animationstart.animation),"TransitionEvent"in window||delete _t.transitionend.transition);var Ct=Et("animationend"),Tt=Et("animationiteration"),Dt=Et("animationstart"),Lt=Et("transitionend"),Pt=new Map,Rt=new Map,Ot=["abort","abort",Ct,"animationEnd",Tt,"animationIteration",Dt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Lt,"transitionEnd","waiting","waiting"];function kt(e,t){for(var r=0;r<e.length;r+=2){var n=e[r],i=e[r+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Rt.set(n,t),Pt.set(n,i),u(i,[n])}}(0,a.unstable_now)();var It=8;function Bt(e){if(0!=(1&e))return It=15,1;if(0!=(2&e))return It=14,2;if(0!=(4&e))return It=13,4;var t=24&e;return 0!==t?(It=12,t):0!=(32&e)?(It=11,32):0!=(t=192&e)?(It=10,t):0!=(256&e)?(It=9,256):0!=(t=3584&e)?(It=8,t):0!=(4096&e)?(It=7,4096):0!=(t=4186112&e)?(It=6,t):0!=(t=62914560&e)?(It=5,t):67108864&e?(It=4,67108864):0!=(134217728&e)?(It=3,134217728):0!=(t=805306368&e)?(It=2,t):0!=(1073741824&e)?(It=1,1073741824):(It=8,e)}function zt(e,t){var r=e.pendingLanes;if(0===r)return It=0;var n=0,i=0,a=e.expiredLanes,o=e.suspendedLanes,s=e.pingedLanes;if(0!==a)n=a,i=It=15;else if(0!=(a=134217727&r)){var l=a&~o;0!==l?(n=Bt(l),i=It):0!=(s&=a)&&(n=Bt(s),i=It)}else 0!=(a=r&~o)?(n=Bt(a),i=It):0!==s&&(n=Bt(s),i=It);if(0===n)return 0;if(n=r&((0>(n=31-Vt(n))?0:1<<n)<<1)-1,0!==t&&t!==n&&0==(t&o)){if(Bt(t),i<=It)return t;It=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=n;0<t;)i=1<<(r=31-Vt(t)),n|=e[r],t&=~i;return n}function Nt(e){return 0!=(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Ft(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Ut(24&~t))?Ft(10,t):e;case 10:return 0===(e=Ut(192&~t))?Ft(8,t):e;case 8:return 0===(e=Ut(3584&~t))&&0===(e=Ut(4186112&~t))&&(e=512),e;case 2:return 0===(t=Ut(805306368&~t))&&(t=268435456),t}throw Error(o(358,e))}function Ut(e){return e&-e}function jt(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Ht(e,t,r){e.pendingLanes|=t;var n=t-1;e.suspendedLanes&=n,e.pingedLanes&=n,(e=e.eventTimes)[t=31-Vt(t)]=r}var Vt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Gt(e)/Wt|0)|0},Gt=Math.log,Wt=Math.LN2,qt=a.unstable_UserBlockingPriority,Yt=a.unstable_runWithPriority,Xt=!0;function Qt(e,t,r,n){Be||ke();var i=Zt,a=Be;Be=!0;try{Oe(i,e,t,r,n)}finally{(Be=a)||Ne()}}function Jt(e,t,r,n){Yt(qt,Zt.bind(null,e,t,r,n))}function Zt(e,t,r,n){var i;if(Xt)if((i=0==(4&t))&&0<at.length&&-1<dt.indexOf(e))e=pt(null,e,t,r,n),at.push(e);else{var a=Kt(e,t,r,n);if(null===a)i&&ft(e,n);else{if(i){if(-1<dt.indexOf(e))return e=pt(a,e,t,r,n),void at.push(e);if(function(e,t,r,n,i){switch(t){case"focusin":return ot=mt(ot,e,t,r,n,i),!0;case"dragenter":return st=mt(st,e,t,r,n,i),!0;case"mouseover":return lt=mt(lt,e,t,r,n,i),!0;case"pointerover":var a=i.pointerId;return ut.set(a,mt(ut.get(a)||null,e,t,r,n,i)),!0;case"gotpointercapture":return a=i.pointerId,ct.set(a,mt(ct.get(a)||null,e,t,r,n,i)),!0}return!1}(a,e,t,r,n))return;ft(e,n)}kn(e,t,n,null,r)}}}function Kt(e,t,r,n){var i=Me(n);if(null!==(i=ti(i))){var a=Qe(i);if(null===a)i=null;else{var o=a.tag;if(13===o){if(null!==(i=Je(a)))return i;i=null}else if(3===o){if(a.stateNode.hydrate)return 3===a.tag?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return kn(e,t,n,i,r),null}var $t=null,er=null,tr=null;function rr(){if(tr)return tr;var e,t,r=er,n=r.length,i="value"in $t?$t.value:$t.textContent,a=i.length;for(e=0;e<n&&r[e]===i[e];e++);var o=n-e;for(t=1;t<=o&&r[n-t]===i[a-t];t++);return tr=i.slice(e,1<t?1-t:void 0)}function nr(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function ir(){return!0}function ar(){return!1}function or(e){function t(t,r,n,i,a){for(var o in this._reactName=t,this._targetInst=n,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?ir:ar,this.isPropagationStopped=ar,this}return i(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=ir)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=ir)},persist:function(){},isPersistent:ir}),t}var sr,lr,ur,cr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hr=or(cr),dr=i({},cr,{view:0,detail:0}),pr=or(dr),fr=i({},dr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Er,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ur&&(ur&&"mousemove"===e.type?(sr=e.screenX-ur.screenX,lr=e.screenY-ur.screenY):lr=sr=0,ur=e),sr)},movementY:function(e){return"movementY"in e?e.movementY:lr}}),mr=or(fr),gr=or(i({},fr,{dataTransfer:0})),vr=or(i({},dr,{relatedTarget:0})),yr=or(i({},cr,{animationName:0,elapsedTime:0,pseudoElement:0})),xr=i({},cr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),br=or(xr),wr=or(i({},cr,{data:0})),Sr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_r={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ar={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Mr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Ar[e])&&!!t[e]}function Er(){return Mr}var Cr=i({},dr,{key:function(e){if(e.key){var t=Sr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=nr(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_r[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Er,charCode:function(e){return"keypress"===e.type?nr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?nr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tr=or(Cr),Dr=or(i({},fr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Lr=or(i({},dr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Er})),Pr=or(i({},cr,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rr=i({},fr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Or=or(Rr),kr=[9,13,27,32],Ir=h&&"CompositionEvent"in window,Br=null;h&&"documentMode"in document&&(Br=document.documentMode);var zr=h&&"TextEvent"in window&&!Br,Nr=h&&(!Ir||Br&&8<Br&&11>=Br),Fr=String.fromCharCode(32),Ur=!1;function jr(e,t){switch(e){case"keyup":return-1!==kr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hr(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Vr=!1,Gr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Gr[e.type]:"textarea"===t}function qr(e,t,r,n){Le(n),0<(t=Bn(t,"onChange")).length&&(r=new hr("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Yr=null,Xr=null;function Qr(e){Tn(e,0)}function Jr(e){if(Z(ni(e)))return e}function Zr(e,t){if("change"===e)return t}var Kr=!1;if(h){var $r;if(h){var en="oninput"in document;if(!en){var tn=document.createElement("div");tn.setAttribute("oninput","return;"),en="function"==typeof tn.oninput}$r=en}else $r=!1;Kr=$r&&(!document.documentMode||9<document.documentMode)}function rn(){Yr&&(Yr.detachEvent("onpropertychange",nn),Xr=Yr=null)}function nn(e){if("value"===e.propertyName&&Jr(Xr)){var t=[];if(qr(t,Xr,e,Me(e)),e=Qr,Be)e(t);else{Be=!0;try{Re(e,t)}finally{Be=!1,Ne()}}}}function an(e,t,r){"focusin"===e?(rn(),Xr=r,(Yr=t).attachEvent("onpropertychange",nn)):"focusout"===e&&rn()}function on(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jr(Xr)}function sn(e,t){if("click"===e)return Jr(t)}function ln(e,t){if("input"===e||"change"===e)return Jr(t)}var un="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},cn=Object.prototype.hasOwnProperty;function hn(e,t){if(un(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++)if(!cn.call(t,r[n])||!un(e[r[n]],t[r[n]]))return!1;return!0}function dn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function pn(e,t){var r,n=dn(e);for(e=0;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=dn(n)}}function fn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function mn(){for(var e=window,t=K();t instanceof e.HTMLIFrameElement;){try{var r="string"==typeof t.contentWindow.location.href}catch(e){r=!1}if(!r)break;t=K((e=t.contentWindow).document)}return t}function gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var vn=h&&"documentMode"in document&&11>=document.documentMode,yn=null,xn=null,bn=null,wn=!1;function Sn(e,t,r){var n=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;wn||null==yn||yn!==K(n)||(n="selectionStart"in(n=yn)&&gn(n)?{start:n.selectionStart,end:n.selectionEnd}:{anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},bn&&hn(bn,n)||(bn=n,0<(n=Bn(xn,"onSelect")).length&&(t=new hr("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=yn)))}kt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),kt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),kt(Ot,2);for(var _n="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),An=0;An<_n.length;An++)Rt.set(_n[An],0);c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),En=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mn));function Cn(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,function(e,t,r,n,i,a,s,l,u){if(Xe.apply(this,arguments),Ve){if(!Ve)throw Error(o(198));var c=Ge;Ve=!1,Ge=null,We||(We=!0,qe=c)}}(n,t,void 0,e),e.currentTarget=null}function Tn(e,t){t=0!=(4&t);for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var a=void 0;if(t)for(var o=n.length-1;0<=o;o--){var s=n[o],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==a&&i.isPropagationStopped())break e;Cn(i,s,u),a=l}else for(o=0;o<n.length;o++){if(l=(s=n[o]).instance,u=s.currentTarget,s=s.listener,l!==a&&i.isPropagationStopped())break e;Cn(i,s,u),a=l}}}if(We)throw e=qe,We=!1,qe=null,e}function Dn(e,t){var r=ai(t),n=e+"__bubble";r.has(n)||(On(t,e,2,!1),r.add(n))}var Ln="_reactListening"+Math.random().toString(36).slice(2);function Pn(e){e[Ln]||(e[Ln]=!0,s.forEach((function(t){En.has(t)||Rn(t,!1,e,null),Rn(t,!0,e,null)})))}function Rn(e,t,r,n){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,a=r;if("selectionchange"===e&&9!==r.nodeType&&(a=r.ownerDocument),null!==n&&!t&&En.has(e)){if("scroll"!==e)return;i|=2,a=n}var o=ai(a),s=e+"__"+(t?"capture":"bubble");o.has(s)||(t&&(i|=4),On(a,e,i,t),o.add(s))}function On(e,t,r,n){var i=Rt.get(t);switch(void 0===i?2:i){case 0:i=Qt;break;case 1:i=Jt;break;default:i=Zt}r=i.bind(null,t,r,e),i=void 0,!Ue||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),n?void 0!==i?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):void 0!==i?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function kn(e,t,r,n,i){var a=n;if(0==(1&t)&&0==(2&t)&&null!==n)e:for(;;){if(null===n)return;var o=n.tag;if(3===o||4===o){var s=n.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=n.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=ti(s)))return;if(5===(l=o.tag)||6===l){n=a=o;continue e}s=s.parentNode}}n=n.return}!function(e,t,r){if(ze)return e();ze=!0;try{Ie(e,t,r)}finally{ze=!1,Ne()}}((function(){var n=a,i=Me(r),o=[];e:{var s=Pt.get(e);if(void 0!==s){var l=hr,u=e;switch(e){case"keypress":if(0===nr(r))break e;case"keydown":case"keyup":l=Tr;break;case"focusin":u="focus",l=vr;break;case"focusout":u="blur",l=vr;break;case"beforeblur":case"afterblur":l=vr;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=mr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Lr;break;case Ct:case Tt:case Dt:l=yr;break;case Lt:l=Pr;break;case"scroll":l=pr;break;case"wheel":l=Or;break;case"copy":case"cut":case"paste":l=br;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Dr}var c=0!=(4&t),h=!c&&"scroll"===e,d=c?null!==s?s+"Capture":null:s;c=[];for(var p,f=n;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==d&&null!=(m=Fe(f,d))&&c.push(In(f,m,p))),h)break;f=f.return}0<c.length&&(s=new l(s,u,null,r,i),o.push({event:s,listeners:c}))}}if(0==(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||0!=(16&t)||!(u=r.relatedTarget||r.fromElement)||!ti(u)&&!u[$n])&&(l||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=n,null!==(u=(u=r.relatedTarget||r.toElement)?ti(u):null)&&(u!==(h=Qe(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=n),l!==u)){if(c=mr,m="onMouseLeave",d="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(c=Dr,m="onPointerLeave",d="onPointerEnter",f="pointer"),h=null==l?s:ni(l),p=null==u?s:ni(u),(s=new c(m,f+"leave",l,r,i)).target=h,s.relatedTarget=p,m=null,ti(i)===n&&((c=new c(d,f+"enter",u,r,i)).target=p,c.relatedTarget=h,m=c),h=m,l&&u)e:{for(d=u,f=0,p=c=l;p;p=zn(p))f++;for(p=0,m=d;m;m=zn(m))p++;for(;0<f-p;)c=zn(c),f--;for(;0<p-f;)d=zn(d),p--;for(;f--;){if(c===d||null!==d&&c===d.alternate)break e;c=zn(c),d=zn(d)}c=null}else c=null;null!==l&&Nn(o,s,l,c,!1),null!==u&&null!==h&&Nn(o,h,u,c,!0)}if("select"===(l=(s=n?ni(n):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var g=Zr;else if(Wr(s))if(Kr)g=ln;else{g=on;var v=an}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=sn);switch(g&&(g=g(e,n))?qr(o,g,r,i):(v&&v(e,s,n),"focusout"===e&&(v=s._wrapperState)&&v.controlled&&"number"===s.type&&ie(s,"number",s.value)),v=n?ni(n):window,e){case"focusin":(Wr(v)||"true"===v.contentEditable)&&(yn=v,xn=n,bn=null);break;case"focusout":bn=xn=yn=null;break;case"mousedown":wn=!0;break;case"contextmenu":case"mouseup":case"dragend":wn=!1,Sn(o,r,i);break;case"selectionchange":if(vn)break;case"keydown":case"keyup":Sn(o,r,i)}var y;if(Ir)e:{switch(e){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Vr?jr(e,r)&&(x="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(x="onCompositionStart");x&&(Nr&&"ko"!==r.locale&&(Vr||"onCompositionStart"!==x?"onCompositionEnd"===x&&Vr&&(y=rr()):(er="value"in($t=i)?$t.value:$t.textContent,Vr=!0)),0<(v=Bn(n,x)).length&&(x=new wr(x,e,null,r,i),o.push({event:x,listeners:v}),(y||null!==(y=Hr(r)))&&(x.data=y))),(y=zr?function(e,t){switch(e){case"compositionend":return Hr(t);case"keypress":return 32!==t.which?null:(Ur=!0,Fr);case"textInput":return(e=t.data)===Fr&&Ur?null:e;default:return null}}(e,r):function(e,t){if(Vr)return"compositionend"===e||!Ir&&jr(e,t)?(e=rr(),tr=er=$t=null,Vr=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Nr&&"ko"!==t.locale?null:t.data}}(e,r))&&0<(n=Bn(n,"onBeforeInput")).length&&(i=new wr("onBeforeInput","beforeinput",null,r,i),o.push({event:i,listeners:n}),i.data=y)}Tn(o,t)}))}function In(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Bn(e,t){for(var r=t+"Capture",n=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Fe(e,r))&&n.unshift(In(e,a,i)),null!=(a=Fe(e,t))&&n.push(In(e,a,i))),e=e.return}return n}function zn(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Nn(e,t,r,n,i){for(var a=t._reactName,o=[];null!==r&&r!==n;){var s=r,l=s.alternate,u=s.stateNode;if(null!==l&&l===n)break;5===s.tag&&null!==u&&(s=u,i?null!=(l=Fe(r,a))&&o.unshift(In(r,l,s)):i||null!=(l=Fe(r,a))&&o.push(In(r,l,s))),r=r.return}0!==o.length&&e.push({event:t,listeners:o})}function Fn(){}var Un=null,jn=null;function Hn(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Vn(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Gn="function"==typeof setTimeout?setTimeout:void 0,Wn="function"==typeof clearTimeout?clearTimeout:void 0;function qn(e){(1===e.nodeType||9===e.nodeType&&null!=(e=e.body))&&(e.textContent="")}function Yn(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Xn(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}var Qn=0,Jn=Math.random().toString(36).slice(2),Zn="__reactFiber$"+Jn,Kn="__reactProps$"+Jn,$n="__reactContainer$"+Jn,ei="__reactEvents$"+Jn;function ti(e){var t=e[Zn];if(t)return t;for(var r=e.parentNode;r;){if(t=r[$n]||r[Zn]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=Xn(e);null!==e;){if(r=e[Zn])return r;e=Xn(e)}return t}r=(e=r).parentNode}return null}function ri(e){return!(e=e[Zn]||e[$n])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ni(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function ii(e){return e[Kn]||null}function ai(e){var t=e[ei];return void 0===t&&(t=e[ei]=new Set),t}var oi=[],si=-1;function li(e){return{current:e}}function ui(e){0>si||(e.current=oi[si],oi[si]=null,si--)}function ci(e,t){si++,oi[si]=e.current,e.current=t}var hi={},di=li(hi),pi=li(!1),fi=hi;function mi(e,t){var r=e.type.contextTypes;if(!r)return hi;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in r)a[i]=t[i];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function gi(e){return null!=e.childContextTypes}function vi(){ui(pi),ui(di)}function yi(e,t,r){if(di.current!==hi)throw Error(o(168));ci(di,t),ci(pi,r)}function xi(e,t,r){var n=e.stateNode;if(e=t.childContextTypes,"function"!=typeof n.getChildContext)return r;for(var a in n=n.getChildContext())if(!(a in e))throw Error(o(108,Y(t)||"Unknown",a));return i({},r,n)}function bi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hi,fi=di.current,ci(di,e),ci(pi,pi.current),!0}function wi(e,t,r){var n=e.stateNode;if(!n)throw Error(o(169));r?(e=xi(e,t,fi),n.__reactInternalMemoizedMergedChildContext=e,ui(pi),ui(di),ci(di,e)):ui(pi),ci(pi,r)}var Si=null,_i=null,Ai=a.unstable_runWithPriority,Mi=a.unstable_scheduleCallback,Ei=a.unstable_cancelCallback,Ci=a.unstable_shouldYield,Ti=a.unstable_requestPaint,Di=a.unstable_now,Li=a.unstable_getCurrentPriorityLevel,Pi=a.unstable_ImmediatePriority,Ri=a.unstable_UserBlockingPriority,Oi=a.unstable_NormalPriority,ki=a.unstable_LowPriority,Ii=a.unstable_IdlePriority,Bi={},zi=void 0!==Ti?Ti:function(){},Ni=null,Fi=null,Ui=!1,ji=Di(),Hi=1e4>ji?Di:function(){return Di()-ji};function Vi(){switch(Li()){case Pi:return 99;case Ri:return 98;case Oi:return 97;case ki:return 96;case Ii:return 95;default:throw Error(o(332))}}function Gi(e){switch(e){case 99:return Pi;case 98:return Ri;case 97:return Oi;case 96:return ki;case 95:return Ii;default:throw Error(o(332))}}function Wi(e,t){return e=Gi(e),Ai(e,t)}function qi(e,t,r){return e=Gi(e),Mi(e,t,r)}function Yi(){if(null!==Fi){var e=Fi;Fi=null,Ei(e)}Xi()}function Xi(){if(!Ui&&null!==Ni){Ui=!0;var e=0;try{var t=Ni;Wi(99,(function(){for(;e<t.length;e++){var r=t[e];do{r=r(!0)}while(null!==r)}})),Ni=null}catch(t){throw null!==Ni&&(Ni=Ni.slice(e+1)),Mi(Pi,Yi),t}finally{Ui=!1}}}var Qi=w.ReactCurrentBatchConfig;function Ji(e,t){if(e&&e.defaultProps){for(var r in t=i({},t),e=e.defaultProps)void 0===t[r]&&(t[r]=e[r]);return t}return t}var Zi=li(null),Ki=null,$i=null,ea=null;function ta(){ea=$i=Ki=null}function ra(e){var t=Zi.current;ui(Zi),e.type._context._currentValue=t}function na(e,t){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)===t){if(null===r||(r.childLanes&t)===t)break;r.childLanes|=t}else e.childLanes|=t,null!==r&&(r.childLanes|=t);e=e.return}}function ia(e,t){Ki=e,ea=$i=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(Bo=!0),e.firstContext=null)}function aa(e,t){if(ea!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(ea=e,t=1073741823),t={context:e,observedBits:t,next:null},null===$i){if(null===Ki)throw Error(o(308));$i=t,Ki.dependencies={lanes:0,firstContext:t,responders:null}}else $i=$i.next=t;return e._currentValue}var oa=!1;function sa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function la(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ua(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ca(e,t){if(null!==(e=e.updateQueue)){var r=(e=e.shared).pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}}function ha(e,t){var r=e.updateQueue,n=e.alternate;if(null!==n&&r===(n=n.updateQueue)){var i=null,a=null;if(null!==(r=r.firstBaseUpdate)){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};null===a?i=a=o:a=a.next=o,r=r.next}while(null!==r);null===a?i=a=t:a=a.next=t}else i=a=t;return r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:n.shared,effects:n.effects},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function da(e,t,r,n){var a=e.updateQueue;oa=!1;var o=a.firstBaseUpdate,s=a.lastBaseUpdate,l=a.shared.pending;if(null!==l){a.shared.pending=null;var u=l,c=u.next;u.next=null,null===s?o=c:s.next=c,s=u;var h=e.alternate;if(null!==h){var d=(h=h.updateQueue).lastBaseUpdate;d!==s&&(null===d?h.firstBaseUpdate=c:d.next=c,h.lastBaseUpdate=u)}}if(null!==o){for(d=a.baseState,s=0,h=c=u=null;;){l=o.lane;var p=o.eventTime;if((n&l)===l){null!==h&&(h=h.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var f=e,m=o;switch(l=t,p=r,m.tag){case 1:if("function"==typeof(f=m.payload)){d=f.call(p,d,l);break e}d=f;break e;case 3:f.flags=-4097&f.flags|64;case 0:if(null==(l="function"==typeof(f=m.payload)?f.call(p,d,l):f))break e;d=i({},d,l);break e;case 2:oa=!0}}null!==o.callback&&(e.flags|=32,null===(l=a.effects)?a.effects=[o]:l.push(o))}else p={eventTime:p,lane:l,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===h?(c=h=p,u=d):h=h.next=p,s|=l;if(null===(o=o.next)){if(null===(l=a.shared.pending))break;o=l.next,l.next=null,a.lastBaseUpdate=l,a.shared.pending=null}}null===h&&(u=d),a.baseState=u,a.firstBaseUpdate=c,a.lastBaseUpdate=h,Ns|=s,e.lanes=s,e.memoizedState=d}}function pa(e,t,r){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(null!==i){if(n.callback=null,n=r,"function"!=typeof i)throw Error(o(191,i));i.call(n)}}}var fa=(new n.Component).refs;function ma(e,t,r,n){r=null==(r=r(n,t=e.memoizedState))?t:i({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var ga={isMounted:function(e){return!!(e=e._reactInternals)&&Qe(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=ul(),i=cl(e),a=ua(n,i);a.payload=t,null!=r&&(a.callback=r),ca(e,a),hl(e,i,n)},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=ul(),i=cl(e),a=ua(n,i);a.tag=1,a.payload=t,null!=r&&(a.callback=r),ca(e,a),hl(e,i,n)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ul(),n=cl(e),i=ua(r,n);i.tag=2,null!=t&&(i.callback=t),ca(e,i),hl(e,n,r)}};function va(e,t,r,n,i,a,o){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,a,o):!(t.prototype&&t.prototype.isPureReactComponent&&hn(r,n)&&hn(i,a))}function ya(e,t,r){var n=!1,i=hi,a=t.contextType;return"object"==typeof a&&null!==a?a=aa(a):(i=gi(t)?fi:di.current,a=(n=null!=(n=t.contextTypes))?mi(e,i):hi),t=new t(r,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ga,e.stateNode=t,t._reactInternals=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function xa(e,t,r,n){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,n),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&ga.enqueueReplaceState(t,t.state,null)}function ba(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs=fa,sa(e);var a=t.contextType;"object"==typeof a&&null!==a?i.context=aa(a):(a=gi(t)?fi:di.current,i.context=mi(e,a)),da(e,r,i,n),i.state=e.memoizedState,"function"==typeof(a=t.getDerivedStateFromProps)&&(ma(e,t,a,r),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ga.enqueueReplaceState(i,i.state,null),da(e,r,i,n),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4)}var wa=Array.isArray;function Sa(e,t,r){if(null!==(e=r.ref)&&"function"!=typeof e&&"object"!=typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(o(309));var n=r.stateNode}if(!n)throw Error(o(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=n.refs;t===fa&&(t=n.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!=typeof e)throw Error(o(284));if(!r._owner)throw Error(o(290,e))}return e}function _a(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Aa(e){function t(t,r){if(e){var n=t.lastEffect;null!==n?(n.nextEffect=r,t.lastEffect=r):t.firstEffect=t.lastEffect=r,r.nextEffect=null,r.flags=8}}function r(r,n){if(!e)return null;for(;null!==n;)t(r,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Vl(e,t)).index=0,e.sibling=null,e}function a(t,r,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<r?(t.flags=2,r):n:(t.flags=2,r):r}function s(t){return e&&null===t.alternate&&(t.flags=2),t}function l(e,t,r,n){return null===t||6!==t.tag?((t=Yl(r,e.mode,n)).return=e,t):((t=i(t,r)).return=e,t)}function u(e,t,r,n){return null!==t&&t.elementType===r.type?((n=i(t,r.props)).ref=Sa(e,t,r),n.return=e,n):((n=Gl(r.type,r.key,r.props,null,e.mode,n)).ref=Sa(e,t,r),n.return=e,n)}function c(e,t,r,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=Xl(r,e.mode,n)).return=e,t):((t=i(t,r.children||[])).return=e,t)}function h(e,t,r,n,a){return null===t||7!==t.tag?((t=Wl(r,e.mode,n,a)).return=e,t):((t=i(t,r)).return=e,t)}function d(e,t,r){if("string"==typeof t||"number"==typeof t)return(t=Yl(""+t,e.mode,r)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case S:return(r=Gl(t.type,t.key,t.props,null,e.mode,r)).ref=Sa(e,null,t),r.return=e,r;case _:return(t=Xl(t,e.mode,r)).return=e,t}if(wa(t)||H(t))return(t=Wl(t,e.mode,r,null)).return=e,t;_a(e,t)}return null}function p(e,t,r,n){var i=null!==t?t.key:null;if("string"==typeof r||"number"==typeof r)return null!==i?null:l(e,t,""+r,n);if("object"==typeof r&&null!==r){switch(r.$$typeof){case S:return r.key===i?r.type===A?h(e,t,r.props.children,n,i):u(e,t,r,n):null;case _:return r.key===i?c(e,t,r,n):null}if(wa(r)||H(r))return null!==i?null:h(e,t,r,n,null);_a(e,r)}return null}function f(e,t,r,n,i){if("string"==typeof n||"number"==typeof n)return l(t,e=e.get(r)||null,""+n,i);if("object"==typeof n&&null!==n){switch(n.$$typeof){case S:return e=e.get(null===n.key?r:n.key)||null,n.type===A?h(t,e,n.props.children,i,n.key):u(t,e,n,i);case _:return c(t,e=e.get(null===n.key?r:n.key)||null,n,i)}if(wa(n)||H(n))return h(t,e=e.get(r)||null,n,i,null);_a(t,n)}return null}function m(i,o,s,l){for(var u=null,c=null,h=o,m=o=0,g=null;null!==h&&m<s.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var v=p(i,h,s[m],l);if(null===v){null===h&&(h=g);break}e&&h&&null===v.alternate&&t(i,h),o=a(v,o,m),null===c?u=v:c.sibling=v,c=v,h=g}if(m===s.length)return r(i,h),u;if(null===h){for(;m<s.length;m++)null!==(h=d(i,s[m],l))&&(o=a(h,o,m),null===c?u=h:c.sibling=h,c=h);return u}for(h=n(i,h);m<s.length;m++)null!==(g=f(h,i,m,s[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),o=a(g,o,m),null===c?u=g:c.sibling=g,c=g);return e&&h.forEach((function(e){return t(i,e)})),u}function g(i,s,l,u){var c=H(l);if("function"!=typeof c)throw Error(o(150));if(null==(l=c.call(l)))throw Error(o(151));for(var h=c=null,m=s,g=s=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var x=p(i,m,y.value,u);if(null===x){null===m&&(m=v);break}e&&m&&null===x.alternate&&t(i,m),s=a(x,s,g),null===h?c=x:h.sibling=x,h=x,m=v}if(y.done)return r(i,m),c;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=d(i,y.value,u))&&(s=a(y,s,g),null===h?c=y:h.sibling=y,h=y);return c}for(m=n(i,m);!y.done;g++,y=l.next())null!==(y=f(m,i,g,y.value,u))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),s=a(y,s,g),null===h?c=y:h.sibling=y,h=y);return e&&m.forEach((function(e){return t(i,e)})),c}return function(e,n,a,l){var u="object"==typeof a&&null!==a&&a.type===A&&null===a.key;u&&(a=a.props.children);var c="object"==typeof a&&null!==a;if(c)switch(a.$$typeof){case S:e:{for(c=a.key,u=n;null!==u;){if(u.key===c){if(7===u.tag){if(a.type===A){r(e,u.sibling),(n=i(u,a.props.children)).return=e,e=n;break e}}else if(u.elementType===a.type){r(e,u.sibling),(n=i(u,a.props)).ref=Sa(e,u,a),n.return=e,e=n;break e}r(e,u);break}t(e,u),u=u.sibling}a.type===A?((n=Wl(a.props.children,e.mode,l,a.key)).return=e,e=n):((l=Gl(a.type,a.key,a.props,null,e.mode,l)).ref=Sa(e,n,a),l.return=e,e=l)}return s(e);case _:e:{for(u=a.key;null!==n;){if(n.key===u){if(4===n.tag&&n.stateNode.containerInfo===a.containerInfo&&n.stateNode.implementation===a.implementation){r(e,n.sibling),(n=i(n,a.children||[])).return=e,e=n;break e}r(e,n);break}t(e,n),n=n.sibling}(n=Xl(a,e.mode,l)).return=e,e=n}return s(e)}if("string"==typeof a||"number"==typeof a)return a=""+a,null!==n&&6===n.tag?(r(e,n.sibling),(n=i(n,a)).return=e,e=n):(r(e,n),(n=Yl(a,e.mode,l)).return=e,e=n),s(e);if(wa(a))return m(e,n,a,l);if(H(a))return g(e,n,a,l);if(c&&_a(e,a),void 0===a&&!u)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(o(152,Y(e.type)||"Component"))}return r(e,n)}}var Ma=Aa(!0),Ea=Aa(!1),Ca={},Ta=li(Ca),Da=li(Ca),La=li(Ca);function Pa(e){if(e===Ca)throw Error(o(174));return e}function Ra(e,t){switch(ci(La,t),ci(Da,e),ci(Ta,Ca),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pe(null,"");break;default:t=pe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ui(Ta),ci(Ta,t)}function Oa(){ui(Ta),ui(Da),ui(La)}function ka(e){Pa(La.current);var t=Pa(Ta.current),r=pe(t,e.type);t!==r&&(ci(Da,e),ci(Ta,r))}function Ia(e){Da.current===e&&(ui(Ta),ui(Da))}var Ba=li(0);function za(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Na=null,Fa=null,Ua=!1;function ja(e,t){var r=jl(5,null,null,0);r.elementType="DELETED",r.type="DELETED",r.stateNode=t,r.return=e,r.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=r,e.lastEffect=r):e.firstEffect=e.lastEffect=r}function Ha(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Va(e){if(Ua){var t=Fa;if(t){var r=t;if(!Ha(e,t)){if(!(t=Yn(r.nextSibling))||!Ha(e,t))return e.flags=-1025&e.flags|2,Ua=!1,void(Na=e);ja(Na,r)}Na=e,Fa=Yn(t.firstChild)}else e.flags=-1025&e.flags|2,Ua=!1,Na=e}}function Ga(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Na=e}function Wa(e){if(e!==Na)return!1;if(!Ua)return Ga(e),Ua=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Vn(t,e.memoizedProps))for(t=Fa;t;)ja(e,t),t=Yn(t.nextSibling);if(Ga(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===t){Fa=Yn(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}Fa=null}}else Fa=Na?Yn(e.stateNode.nextSibling):null;return!0}function qa(){Fa=Na=null,Ua=!1}var Ya=[];function Xa(){for(var e=0;e<Ya.length;e++)Ya[e]._workInProgressVersionPrimary=null;Ya.length=0}var Qa=w.ReactCurrentDispatcher,Ja=w.ReactCurrentBatchConfig,Za=0,Ka=null,$a=null,eo=null,to=!1,ro=!1;function no(){throw Error(o(321))}function io(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!un(e[r],t[r]))return!1;return!0}function ao(e,t,r,n,i,a){if(Za=a,Ka=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Qa.current=null===e||null===e.memoizedState?Ro:Oo,e=r(n,i),ro){a=0;do{if(ro=!1,!(25>a))throw Error(o(301));a+=1,eo=$a=null,t.updateQueue=null,Qa.current=ko,e=r(n,i)}while(ro)}if(Qa.current=Po,t=null!==$a&&null!==$a.next,Za=0,eo=$a=Ka=null,to=!1,t)throw Error(o(300));return e}function oo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===eo?Ka.memoizedState=eo=e:eo=eo.next=e,eo}function so(){if(null===$a){var e=Ka.alternate;e=null!==e?e.memoizedState:null}else e=$a.next;var t=null===eo?Ka.memoizedState:eo.next;if(null!==t)eo=t,$a=e;else{if(null===e)throw Error(o(310));e={memoizedState:($a=e).memoizedState,baseState:$a.baseState,baseQueue:$a.baseQueue,queue:$a.queue,next:null},null===eo?Ka.memoizedState=eo=e:eo=eo.next=e}return eo}function lo(e,t){return"function"==typeof t?t(e):t}function uo(e){var t=so(),r=t.queue;if(null===r)throw Error(o(311));r.lastRenderedReducer=e;var n=$a,i=n.baseQueue,a=r.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}n.baseQueue=i=a,r.pending=null}if(null!==i){i=i.next,n=n.baseState;var l=s=a=null,u=i;do{var c=u.lane;if((Za&c)===c)null!==l&&(l=l.next={lane:0,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null}),n=u.eagerReducer===e?u.eagerState:e(n,u.action);else{var h={lane:c,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null};null===l?(s=l=h,a=n):l=l.next=h,Ka.lanes|=c,Ns|=c}u=u.next}while(null!==u&&u!==i);null===l?a=n:l.next=s,un(n,t.memoizedState)||(Bo=!0),t.memoizedState=n,t.baseState=a,t.baseQueue=l,r.lastRenderedState=n}return[t.memoizedState,r.dispatch]}function co(e){var t=so(),r=t.queue;if(null===r)throw Error(o(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,a=t.memoizedState;if(null!==i){r.pending=null;var s=i=i.next;do{a=e(a,s.action),s=s.next}while(s!==i);un(a,t.memoizedState)||(Bo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),r.lastRenderedState=a}return[a,n]}function ho(e,t,r){var n=t._getVersion;n=n(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===n:(e=e.mutableReadLanes,(e=(Za&e)===e)&&(t._workInProgressVersionPrimary=n,Ya.push(t))),e)return r(t._source);throw Ya.push(t),Error(o(350))}function po(e,t,r,n){var i=Ls;if(null===i)throw Error(o(349));var a=t._getVersion,s=a(t._source),l=Qa.current,u=l.useState((function(){return ho(i,t,r)})),c=u[1],h=u[0];u=eo;var d=e.memoizedState,p=d.refs,f=p.getSnapshot,m=d.source;d=d.subscribe;var g=Ka;return e.memoizedState={refs:p,source:t,subscribe:n},l.useEffect((function(){p.getSnapshot=r,p.setSnapshot=c;var e=a(t._source);if(!un(s,e)){e=r(t._source),un(h,e)||(c(e),e=cl(g),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var n=i.entanglements,o=e;0<o;){var l=31-Vt(o),u=1<<l;n[l]|=e,o&=~u}}}),[r,t,n]),l.useEffect((function(){return n(t._source,(function(){var e=p.getSnapshot,r=p.setSnapshot;try{r(e(t._source));var n=cl(g);i.mutableReadLanes|=n&i.pendingLanes}catch(e){r((function(){throw e}))}}))}),[t,n]),un(f,r)&&un(m,t)&&un(d,n)||((e={pending:null,dispatch:null,lastRenderedReducer:lo,lastRenderedState:h}).dispatch=c=Lo.bind(null,Ka,e),u.queue=e,u.baseQueue=null,h=ho(i,t,r),u.memoizedState=u.baseState=h),h}function fo(e,t,r){return po(so(),e,t,r)}function mo(e){var t=oo();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:lo,lastRenderedState:e}).dispatch=Lo.bind(null,Ka,e),[t.memoizedState,e]}function go(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},null===(t=Ka.updateQueue)?(t={lastEffect:null},Ka.updateQueue=t,t.lastEffect=e.next=e):null===(r=t.lastEffect)?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e),e}function vo(e){return e={current:e},oo().memoizedState=e}function yo(){return so().memoizedState}function xo(e,t,r,n){var i=oo();Ka.flags|=e,i.memoizedState=go(1|t,r,void 0,void 0===n?null:n)}function bo(e,t,r,n){var i=so();n=void 0===n?null:n;var a=void 0;if(null!==$a){var o=$a.memoizedState;if(a=o.destroy,null!==n&&io(n,o.deps))return void go(t,r,a,n)}Ka.flags|=e,i.memoizedState=go(1|t,r,a,n)}function wo(e,t){return xo(516,4,e,t)}function So(e,t){return bo(516,4,e,t)}function _o(e,t){return bo(4,2,e,t)}function Ao(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Mo(e,t,r){return r=null!=r?r.concat([e]):null,bo(4,2,Ao.bind(null,t,e),r)}function Eo(){}function Co(e,t){var r=so();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&io(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function To(e,t){var r=so();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&io(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Do(e,t){var r=Vi();Wi(98>r?98:r,(function(){e(!0)})),Wi(97<r?97:r,(function(){var r=Ja.transition;Ja.transition=1;try{e(!1),t()}finally{Ja.transition=r}}))}function Lo(e,t,r){var n=ul(),i=cl(e),a={lane:i,action:r,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(null===o?a.next=a:(a.next=o.next,o.next=a),t.pending=a,o=e.alternate,e===Ka||null!==o&&o===Ka)ro=to=!0;else{if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,l=o(s,r);if(a.eagerReducer=o,a.eagerState=l,un(l,s))return}catch(e){}hl(e,i,n)}}var Po={readContext:aa,useCallback:no,useContext:no,useEffect:no,useImperativeHandle:no,useLayoutEffect:no,useMemo:no,useReducer:no,useRef:no,useState:no,useDebugValue:no,useDeferredValue:no,useTransition:no,useMutableSource:no,useOpaqueIdentifier:no,unstable_isNewReconciler:!1},Ro={readContext:aa,useCallback:function(e,t){return oo().memoizedState=[e,void 0===t?null:t],e},useContext:aa,useEffect:wo,useImperativeHandle:function(e,t,r){return r=null!=r?r.concat([e]):null,xo(4,2,Ao.bind(null,t,e),r)},useLayoutEffect:function(e,t){return xo(4,2,e,t)},useMemo:function(e,t){var r=oo();return t=void 0===t?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=oo();return t=void 0!==r?r(t):t,n.memoizedState=n.baseState=t,e=(e=n.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Lo.bind(null,Ka,e),[n.memoizedState,e]},useRef:vo,useState:mo,useDebugValue:Eo,useDeferredValue:function(e){var t=mo(e),r=t[0],n=t[1];return wo((function(){var t=Ja.transition;Ja.transition=1;try{n(e)}finally{Ja.transition=t}}),[e]),r},useTransition:function(){var e=mo(!1),t=e[0];return vo(e=Do.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,r){var n=oo();return n.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:r},po(n,e,t,r)},useOpaqueIdentifier:function(){if(Ua){var e=!1,t=function(e){return{$$typeof:I,toString:e,valueOf:e}}((function(){throw e||(e=!0,r("r:"+(Qn++).toString(36))),Error(o(355))})),r=mo(t)[1];return 0==(2&Ka.mode)&&(Ka.flags|=516,go(5,(function(){r("r:"+(Qn++).toString(36))}),void 0,null)),t}return mo(t="r:"+(Qn++).toString(36)),t},unstable_isNewReconciler:!1},Oo={readContext:aa,useCallback:Co,useContext:aa,useEffect:So,useImperativeHandle:Mo,useLayoutEffect:_o,useMemo:To,useReducer:uo,useRef:yo,useState:function(){return uo(lo)},useDebugValue:Eo,useDeferredValue:function(e){var t=uo(lo),r=t[0],n=t[1];return So((function(){var t=Ja.transition;Ja.transition=1;try{n(e)}finally{Ja.transition=t}}),[e]),r},useTransition:function(){var e=uo(lo)[0];return[yo().current,e]},useMutableSource:fo,useOpaqueIdentifier:function(){return uo(lo)[0]},unstable_isNewReconciler:!1},ko={readContext:aa,useCallback:Co,useContext:aa,useEffect:So,useImperativeHandle:Mo,useLayoutEffect:_o,useMemo:To,useReducer:co,useRef:yo,useState:function(){return co(lo)},useDebugValue:Eo,useDeferredValue:function(e){var t=co(lo),r=t[0],n=t[1];return So((function(){var t=Ja.transition;Ja.transition=1;try{n(e)}finally{Ja.transition=t}}),[e]),r},useTransition:function(){var e=co(lo)[0];return[yo().current,e]},useMutableSource:fo,useOpaqueIdentifier:function(){return co(lo)[0]},unstable_isNewReconciler:!1},Io=w.ReactCurrentOwner,Bo=!1;function zo(e,t,r,n){t.child=null===e?Ea(t,null,r,n):Ma(t,e.child,r,n)}function No(e,t,r,n,i){r=r.render;var a=t.ref;return ia(t,i),n=ao(e,t,r,n,a,i),null===e||Bo?(t.flags|=1,zo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,rs(e,t,i))}function Fo(e,t,r,n,i,a){if(null===e){var o=r.type;return"function"!=typeof o||Hl(o)||void 0!==o.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=Gl(r.type,null,n,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Uo(e,t,o,n,i,a))}return o=e.child,0==(i&a)&&(i=o.memoizedProps,(r=null!==(r=r.compare)?r:hn)(i,n)&&e.ref===t.ref)?rs(e,t,a):(t.flags|=1,(e=Vl(o,n)).ref=t.ref,e.return=t,t.child=e)}function Uo(e,t,r,n,i,a){if(null!==e&&hn(e.memoizedProps,n)&&e.ref===t.ref){if(Bo=!1,0==(a&i))return t.lanes=e.lanes,rs(e,t,a);0!=(16384&e.flags)&&(Bo=!0)}return Vo(e,t,r,n,a)}function jo(e,t,r){var n=t.pendingProps,i=n.children,a=null!==e?e.memoizedState:null;if("hidden"===n.mode||"unstable-defer-without-hiding"===n.mode)if(0==(4&t.mode))t.memoizedState={baseLanes:0},xl(0,r);else{if(0==(1073741824&r))return e=null!==a?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},xl(0,e),null;t.memoizedState={baseLanes:0},xl(0,null!==a?a.baseLanes:r)}else null!==a?(n=a.baseLanes|r,t.memoizedState=null):n=r,xl(0,n);return zo(e,t,i,r),t.child}function Ho(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.flags|=128)}function Vo(e,t,r,n,i){var a=gi(r)?fi:di.current;return a=mi(t,a),ia(t,i),r=ao(e,t,r,n,a,i),null===e||Bo?(t.flags|=1,zo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,rs(e,t,i))}function Go(e,t,r,n,i){if(gi(r)){var a=!0;bi(t)}else a=!1;if(ia(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),ya(t,r,n),ba(t,r,n,i),n=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var l=o.context,u=r.contextType;u="object"==typeof u&&null!==u?aa(u):mi(t,u=gi(r)?fi:di.current);var c=r.getDerivedStateFromProps,h="function"==typeof c||"function"==typeof o.getSnapshotBeforeUpdate;h||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(s!==n||l!==u)&&xa(t,o,n,u),oa=!1;var d=t.memoizedState;o.state=d,da(t,n,o,i),l=t.memoizedState,s!==n||d!==l||pi.current||oa?("function"==typeof c&&(ma(t,r,c,n),l=t.memoizedState),(s=oa||va(t,r,s,n,d,l,u))?(h||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(t.flags|=4)):("function"==typeof o.componentDidMount&&(t.flags|=4),t.memoizedProps=n,t.memoizedState=l),o.props=n,o.state=l,o.context=u,n=s):("function"==typeof o.componentDidMount&&(t.flags|=4),n=!1)}else{o=t.stateNode,la(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:Ji(t.type,s),o.props=u,h=t.pendingProps,d=o.context,l="object"==typeof(l=r.contextType)&&null!==l?aa(l):mi(t,l=gi(r)?fi:di.current);var p=r.getDerivedStateFromProps;(c="function"==typeof p||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(s!==h||d!==l)&&xa(t,o,n,l),oa=!1,d=t.memoizedState,o.state=d,da(t,n,o,i);var f=t.memoizedState;s!==h||d!==f||pi.current||oa?("function"==typeof p&&(ma(t,r,p,n),f=t.memoizedState),(u=oa||va(t,r,u,n,d,f,l))?(c||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(n,f,l),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(n,f,l)),"function"==typeof o.componentDidUpdate&&(t.flags|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!=typeof o.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),t.memoizedProps=n,t.memoizedState=f),o.props=n,o.state=f,o.context=l,n=u):("function"!=typeof o.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),n=!1)}return Wo(e,t,r,n,a,i)}function Wo(e,t,r,n,i,a){Ho(e,t);var o=0!=(64&t.flags);if(!n&&!o)return i&&wi(t,r,!1),rs(e,t,a);n=t.stateNode,Io.current=t;var s=o&&"function"!=typeof r.getDerivedStateFromError?null:n.render();return t.flags|=1,null!==e&&o?(t.child=Ma(t,e.child,null,a),t.child=Ma(t,null,s,a)):zo(e,t,s,a),t.memoizedState=n.state,i&&wi(t,r,!0),t.child}function qo(e){var t=e.stateNode;t.pendingContext?yi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&yi(0,t.context,!1),Ra(e,t.containerInfo)}var Yo,Xo,Qo,Jo={dehydrated:null,retryLane:0};function Zo(e,t,r){var n,i=t.pendingProps,a=Ba.current,o=!1;return(n=0!=(64&t.flags))||(n=(null===e||null!==e.memoizedState)&&0!=(2&a)),n?(o=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(a|=1),ci(Ba,1&a),null===e?(void 0!==i.fallback&&Va(t),e=i.children,a=i.fallback,o?(e=Ko(t,e,a,r),t.child.memoizedState={baseLanes:r},t.memoizedState=Jo,e):"number"==typeof i.unstable_expectedLoadTime?(e=Ko(t,e,a,r),t.child.memoizedState={baseLanes:r},t.memoizedState=Jo,t.lanes=33554432,e):((r=ql({mode:"visible",children:e},t.mode,r,null)).return=t,t.child=r)):(e.memoizedState,o?(i=function(e,t,r,n,i){var a=t.mode,o=e.child;e=o.sibling;var s={mode:"hidden",children:r};return 0==(2&a)&&t.child!==o?((r=t.child).childLanes=0,r.pendingProps=s,null!==(o=r.lastEffect)?(t.firstEffect=r.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null):r=Vl(o,s),null!==e?n=Vl(e,n):(n=Wl(n,a,i,null)).flags|=2,n.return=t,r.return=t,r.sibling=n,t.child=r,n}(e,t,i.children,i.fallback,r),o=t.child,a=e.child.memoizedState,o.memoizedState=null===a?{baseLanes:r}:{baseLanes:a.baseLanes|r},o.childLanes=e.childLanes&~r,t.memoizedState=Jo,i):(r=function(e,t,r,n){var i=e.child;return e=i.sibling,r=Vl(i,{mode:"visible",children:r}),0==(2&t.mode)&&(r.lanes=n),r.return=t,r.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=r}(e,t,i.children,r),t.memoizedState=null,r))}function Ko(e,t,r,n){var i=e.mode,a=e.child;return t={mode:"hidden",children:t},0==(2&i)&&null!==a?(a.childLanes=0,a.pendingProps=t):a=ql(t,i,0,null),r=Wl(r,i,n,null),a.return=e,r.return=e,a.sibling=r,e.child=a,r}function $o(e,t){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),na(e.return,t)}function es(e,t,r,n,i,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i,lastEffect:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=i,o.lastEffect=a)}function ts(e,t,r){var n=t.pendingProps,i=n.revealOrder,a=n.tail;if(zo(e,t,n.children,r),0!=(2&(n=Ba.current)))n=1&n|2,t.flags|=64;else{if(null!==e&&0!=(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&$o(e,r);else if(19===e.tag)$o(e,r);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(ci(Ba,n),0==(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;null!==r;)null!==(e=r.alternate)&&null===za(e)&&(i=r),r=r.sibling;null===(r=i)?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),es(t,!1,i,r,a,t.lastEffect);break;case"backwards":for(r=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===za(e)){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}es(t,!0,r,null,a,t.lastEffect);break;case"together":es(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function rs(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),Ns|=t.lanes,0!=(r&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(r=Vl(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Vl(e,e.pendingProps)).return=t;r.sibling=null}return t.child}return null}function ns(e,t){if(!Ua)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;null!==r;)null!==r.alternate&&(n=r),r=r.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function is(e,t,r){var n=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return gi(t.type)&&vi(),null;case 3:return Oa(),ui(pi),ui(di),Xa(),(n=t.stateNode).pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(Wa(t)?t.flags|=4:n.hydrate||(t.flags|=256)),null;case 5:Ia(t);var a=Pa(La.current);if(r=t.type,null!==e&&null!=t.stateNode)Xo(e,t,r,n),e.ref!==t.ref&&(t.flags|=128);else{if(!n){if(null===t.stateNode)throw Error(o(166));return null}if(e=Pa(Ta.current),Wa(t)){n=t.stateNode,r=t.type;var s=t.memoizedProps;switch(n[Zn]=t,n[Kn]=s,r){case"dialog":Dn("cancel",n),Dn("close",n);break;case"iframe":case"object":case"embed":Dn("load",n);break;case"video":case"audio":for(e=0;e<Mn.length;e++)Dn(Mn[e],n);break;case"source":Dn("error",n);break;case"img":case"image":case"link":Dn("error",n),Dn("load",n);break;case"details":Dn("toggle",n);break;case"input":ee(n,s),Dn("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},Dn("invalid",n);break;case"textarea":le(n,s),Dn("invalid",n)}for(var u in _e(r,s),e=null,s)s.hasOwnProperty(u)&&(a=s[u],"children"===u?"string"==typeof a?n.textContent!==a&&(e=["children",a]):"number"==typeof a&&n.textContent!==""+a&&(e=["children",""+a]):l.hasOwnProperty(u)&&null!=a&&"onScroll"===u&&Dn("scroll",n));switch(r){case"input":J(n),ne(n,s,!0);break;case"textarea":J(n),ce(n);break;case"select":case"option":break;default:"function"==typeof s.onClick&&(n.onclick=Fn)}n=e,t.updateQueue=n,null!==n&&(t.flags|=4)}else{switch(u=9===a.nodeType?a:a.ownerDocument,e===he&&(e=de(r)),e===he?"script"===r?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof n.is?e=u.createElement(r,{is:n.is}):(e=u.createElement(r),"select"===r&&(u=e,n.multiple?u.multiple=!0:n.size&&(u.size=n.size))):e=u.createElementNS(e,r),e[Zn]=t,e[Kn]=n,Yo(e,t),t.stateNode=e,u=Ae(r,n),r){case"dialog":Dn("cancel",e),Dn("close",e),a=n;break;case"iframe":case"object":case"embed":Dn("load",e),a=n;break;case"video":case"audio":for(a=0;a<Mn.length;a++)Dn(Mn[a],e);a=n;break;case"source":Dn("error",e),a=n;break;case"img":case"image":case"link":Dn("error",e),Dn("load",e),a=n;break;case"details":Dn("toggle",e),a=n;break;case"input":ee(e,n),a=$(e,n),Dn("invalid",e);break;case"option":a=ae(e,n);break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=i({},n,{value:void 0}),Dn("invalid",e);break;case"textarea":le(e,n),a=se(e,n),Dn("invalid",e);break;default:a=n}_e(r,a);var c=a;for(s in c)if(c.hasOwnProperty(s)){var h=c[s];"style"===s?we(e,h):"dangerouslySetInnerHTML"===s?null!=(h=h?h.__html:void 0)&&ge(e,h):"children"===s?"string"==typeof h?("textarea"!==r||""!==h)&&ve(e,h):"number"==typeof h&&ve(e,""+h):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(l.hasOwnProperty(s)?null!=h&&"onScroll"===s&&Dn("scroll",e):null!=h&&b(e,s,h,u))}switch(r){case"input":J(e),ne(e,n,!1);break;case"textarea":J(e),ce(e);break;case"option":null!=n.value&&e.setAttribute("value",""+X(n.value));break;case"select":e.multiple=!!n.multiple,null!=(s=n.value)?oe(e,!!n.multiple,s,!1):null!=n.defaultValue&&oe(e,!!n.multiple,n.defaultValue,!0);break;default:"function"==typeof a.onClick&&(e.onclick=Fn)}Hn(r,n)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Qo(0,t,e.memoizedProps,n);else{if("string"!=typeof n&&null===t.stateNode)throw Error(o(166));r=Pa(La.current),Pa(Ta.current),Wa(t)?(n=t.stateNode,r=t.memoizedProps,n[Zn]=t,n.nodeValue!==r&&(t.flags|=4)):((n=(9===r.nodeType?r:r.ownerDocument).createTextNode(n))[Zn]=t,t.stateNode=n)}return null;case 13:return ui(Ba),n=t.memoizedState,0!=(64&t.flags)?(t.lanes=r,t):(n=null!==n,r=!1,null===e?void 0!==t.memoizedProps.fallback&&Wa(t):r=null!==e.memoizedState,n&&!r&&0!=(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!=(1&Ba.current)?0===Is&&(Is=3):(0!==Is&&3!==Is||(Is=4),null===Ls||0==(134217727&Ns)&&0==(134217727&Fs)||ml(Ls,Rs))),(n||r)&&(t.flags|=4),null);case 4:return Oa(),null===e&&Pn(t.stateNode.containerInfo),null;case 10:return ra(t),null;case 19:if(ui(Ba),null===(n=t.memoizedState))return null;if(s=0!=(64&t.flags),null===(u=n.rendering))if(s)ns(n,!1);else{if(0!==Is||null!==e&&0!=(64&e.flags))for(e=t.child;null!==e;){if(null!==(u=za(e))){for(t.flags|=64,ns(n,!1),null!==(s=u.updateQueue)&&(t.updateQueue=s,t.flags|=4),null===n.lastEffect&&(t.firstEffect=null),t.lastEffect=n.lastEffect,n=r,r=t.child;null!==r;)e=n,(s=r).flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,null===(u=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=u.childLanes,s.lanes=u.lanes,s.child=u.child,s.memoizedProps=u.memoizedProps,s.memoizedState=u.memoizedState,s.updateQueue=u.updateQueue,s.type=u.type,e=u.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return ci(Ba,1&Ba.current|2),t.child}e=e.sibling}null!==n.tail&&Hi()>Vs&&(t.flags|=64,s=!0,ns(n,!1),t.lanes=33554432)}else{if(!s)if(null!==(e=za(u))){if(t.flags|=64,s=!0,null!==(r=e.updateQueue)&&(t.updateQueue=r,t.flags|=4),ns(n,!0),null===n.tail&&"hidden"===n.tailMode&&!u.alternate&&!Ua)return null!==(t=t.lastEffect=n.lastEffect)&&(t.nextEffect=null),null}else 2*Hi()-n.renderingStartTime>Vs&&1073741824!==r&&(t.flags|=64,s=!0,ns(n,!1),t.lanes=33554432);n.isBackwards?(u.sibling=t.child,t.child=u):(null!==(r=n.last)?r.sibling=u:t.child=u,n.last=u)}return null!==n.tail?(r=n.tail,n.rendering=r,n.tail=r.sibling,n.lastEffect=t.lastEffect,n.renderingStartTime=Hi(),r.sibling=null,t=Ba.current,ci(Ba,s?1&t|2:1&t),r):null;case 23:case 24:return bl(),null!==e&&null!==e.memoizedState!=(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==n.mode&&(t.flags|=4),null}throw Error(o(156,t.tag))}function as(e){switch(e.tag){case 1:gi(e.type)&&vi();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Oa(),ui(pi),ui(di),Xa(),0!=(64&(t=e.flags)))throw Error(o(285));return e.flags=-4097&t|64,e;case 5:return Ia(e),null;case 13:return ui(Ba),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return ui(Ba),null;case 4:return Oa(),null;case 10:return ra(e),null;case 23:case 24:return bl(),null;default:return null}}function os(e,t){try{var r="",n=t;do{r+=q(n),n=n.return}while(n);var i=r}catch(e){i="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:i}}function ss(e,t){try{console.error(t.value)}catch(e){setTimeout((function(){throw e}))}}Yo=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Xo=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,Pa(Ta.current);var o,s=null;switch(r){case"input":a=$(e,a),n=$(e,n),s=[];break;case"option":a=ae(e,a),n=ae(e,n),s=[];break;case"select":a=i({},a,{value:void 0}),n=i({},n,{value:void 0}),s=[];break;case"textarea":a=se(e,a),n=se(e,n),s=[];break;default:"function"!=typeof a.onClick&&"function"==typeof n.onClick&&(e.onclick=Fn)}for(h in _e(r,n),r=null,a)if(!n.hasOwnProperty(h)&&a.hasOwnProperty(h)&&null!=a[h])if("style"===h){var u=a[h];for(o in u)u.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(l.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in n){var c=n[h];if(u=null!=a?a[h]:void 0,n.hasOwnProperty(h)&&c!==u&&(null!=c||null!=u))if("style"===h)if(u){for(o in u)!u.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&u[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(s||(s=[]),s.push(h,r)),r=c;else"dangerouslySetInnerHTML"===h?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(s=s||[]).push(h,c)):"children"===h?"string"!=typeof c&&"number"!=typeof c||(s=s||[]).push(h,""+c):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(l.hasOwnProperty(h)?(null!=c&&"onScroll"===h&&Dn("scroll",e),s||u===c||(s=[])):"object"==typeof c&&null!==c&&c.$$typeof===I?c.toString():(s=s||[]).push(h,c))}r&&(s=s||[]).push("style",r);var h=s;(t.updateQueue=h)&&(t.flags|=4)}},Qo=function(e,t,r,n){r!==n&&(t.flags|=4)};var ls="function"==typeof WeakMap?WeakMap:Map;function us(e,t,r){(r=ua(-1,r)).tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Ys||(Ys=!0,Xs=n),ss(0,t)},r}function cs(e,t,r){(r=ua(-1,r)).tag=3;var n=e.type.getDerivedStateFromError;if("function"==typeof n){var i=t.value;r.payload=function(){return ss(0,t),n(i)}}var a=e.stateNode;return null!==a&&"function"==typeof a.componentDidCatch&&(r.callback=function(){"function"!=typeof n&&(null===Qs?Qs=new Set([this]):Qs.add(this),ss(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),r}var hs="function"==typeof WeakSet?WeakSet:Set;function ds(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){zl(e,t)}else t.current=null}function ps(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var r=e.memoizedProps,n=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?r:Ji(t.type,r),n),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&qn(t.stateNode.containerInfo))}throw Error(o(163))}function fs(e,t,r){switch(r.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=r.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3==(3&e.tag)){var n=e.create;e.destroy=n()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=r.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;n=i.next,0!=(4&(i=i.tag))&&0!=(1&i)&&(kl(r,e),Ol(r,e)),e=n}while(e!==t)}return;case 1:return e=r.stateNode,4&r.flags&&(null===t?e.componentDidMount():(n=r.elementType===r.type?t.memoizedProps:Ji(r.type,t.memoizedProps),e.componentDidUpdate(n,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=r.updateQueue)&&pa(r,t,e));case 3:if(null!==(t=r.updateQueue)){if(e=null,null!==r.child)switch(r.child.tag){case 5:case 1:e=r.child.stateNode}pa(r,t,e)}return;case 5:return e=r.stateNode,void(null===t&&4&r.flags&&Hn(r.type,r.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===r.memoizedState&&(r=r.alternate,null!==r&&(r=r.memoizedState,null!==r&&(r=r.dehydrated,null!==r&&wt(r)))))}throw Error(o(163))}function ms(e,t){for(var r=e;;){if(5===r.tag){var n=r.stateNode;if(t)"function"==typeof(n=n.style).setProperty?n.setProperty("display","none","important"):n.display="none";else{n=r.stateNode;var i=r.memoizedProps.style;i=null!=i&&i.hasOwnProperty("display")?i.display:null,n.style.display=be("display",i)}}else if(6===r.tag)r.stateNode.nodeValue=t?"":r.memoizedProps;else if((23!==r.tag&&24!==r.tag||null===r.memoizedState||r===e)&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===e)break;for(;null===r.sibling;){if(null===r.return||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}}function gs(e,t){if(_i&&"function"==typeof _i.onCommitFiberUnmount)try{_i.onCommitFiberUnmount(Si,t)}catch(e){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e=e.next;do{var n=r,i=n.destroy;if(n=n.tag,void 0!==i)if(0!=(4&n))kl(t,r);else{n=t;try{i()}catch(e){zl(n,e)}}r=r.next}while(r!==e)}break;case 1:if(ds(t),"function"==typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(e){zl(t,e)}break;case 5:ds(t);break;case 4:Ss(e,t)}}function vs(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function ys(e){return 5===e.tag||3===e.tag||4===e.tag}function xs(e){e:{for(var t=e.return;null!==t;){if(ys(t))break e;t=t.return}throw Error(o(160))}var r=t;switch(t=r.stateNode,r.tag){case 5:var n=!1;break;case 3:case 4:t=t.containerInfo,n=!0;break;default:throw Error(o(161))}16&r.flags&&(ve(t,""),r.flags&=-17);e:t:for(r=e;;){for(;null===r.sibling;){if(null===r.return||ys(r.return)){r=null;break e}r=r.return}for(r.sibling.return=r.return,r=r.sibling;5!==r.tag&&6!==r.tag&&18!==r.tag;){if(2&r.flags)continue t;if(null===r.child||4===r.tag)continue t;r.child.return=r,r=r.child}if(!(2&r.flags)){r=r.stateNode;break e}}n?bs(e,r,t):ws(e,r,t)}function bs(e,t,r){var n=e.tag,i=5===n||6===n;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===r.nodeType?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(8===r.nodeType?(t=r.parentNode).insertBefore(e,r):(t=r).appendChild(e),null!=(r=r._reactRootContainer)||null!==t.onclick||(t.onclick=Fn));else if(4!==n&&null!==(e=e.child))for(bs(e,t,r),e=e.sibling;null!==e;)bs(e,t,r),e=e.sibling}function ws(e,t,r){var n=e.tag,i=5===n||6===n;if(i)e=i?e.stateNode:e.stateNode.instance,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==n&&null!==(e=e.child))for(ws(e,t,r),e=e.sibling;null!==e;)ws(e,t,r),e=e.sibling}function Ss(e,t){for(var r,n,i=t,a=!1;;){if(!a){a=i.return;e:for(;;){if(null===a)throw Error(o(160));switch(r=a.stateNode,a.tag){case 5:n=!1;break e;case 3:case 4:r=r.containerInfo,n=!0;break e}a=a.return}a=!0}if(5===i.tag||6===i.tag){e:for(var s=e,l=i,u=l;;)if(gs(s,u),null!==u.child&&4!==u.tag)u.child.return=u,u=u.child;else{if(u===l)break e;for(;null===u.sibling;){if(null===u.return||u.return===l)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}n?(s=r,l=i.stateNode,8===s.nodeType?s.parentNode.removeChild(l):s.removeChild(l)):r.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){r=i.stateNode.containerInfo,n=!0,i.child.return=i,i=i.child;continue}}else if(gs(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(a=!1)}i.sibling.return=i.return,i=i.sibling}}function _s(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var n=r=r.next;do{3==(3&n.tag)&&(e=n.destroy,n.destroy=void 0,void 0!==e&&e()),n=n.next}while(n!==r)}return;case 1:case 12:case 17:return;case 5:if(null!=(r=t.stateNode)){n=t.memoizedProps;var i=null!==e?e.memoizedProps:n;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,null!==a){for(r[Kn]=n,"input"===e&&"radio"===n.type&&null!=n.name&&te(r,n),Ae(e,i),t=Ae(e,n),i=0;i<a.length;i+=2){var s=a[i],l=a[i+1];"style"===s?we(r,l):"dangerouslySetInnerHTML"===s?ge(r,l):"children"===s?ve(r,l):b(r,s,l,t)}switch(e){case"input":re(r,n);break;case"textarea":ue(r,n);break;case"select":e=r._wrapperState.wasMultiple,r._wrapperState.wasMultiple=!!n.multiple,null!=(a=n.value)?oe(r,!!n.multiple,a,!1):e!==!!n.multiple&&(null!=n.defaultValue?oe(r,!!n.multiple,n.defaultValue,!0):oe(r,!!n.multiple,n.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((r=t.stateNode).hydrate&&(r.hydrate=!1,wt(r.containerInfo)));case 13:return null!==t.memoizedState&&(Hs=Hi(),ms(t.child,!0)),void As(t);case 19:return void As(t);case 23:case 24:return void ms(t,null!==t.memoizedState)}throw Error(o(163))}function As(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var r=e.stateNode;null===r&&(r=e.stateNode=new hs),t.forEach((function(t){var n=Fl.bind(null,e,t);r.has(t)||(r.add(t),t.then(n,n))}))}}function Ms(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&null!==(t=t.memoizedState)&&null===t.dehydrated}var Es=Math.ceil,Cs=w.ReactCurrentDispatcher,Ts=w.ReactCurrentOwner,Ds=0,Ls=null,Ps=null,Rs=0,Os=0,ks=li(0),Is=0,Bs=null,zs=0,Ns=0,Fs=0,Us=0,js=null,Hs=0,Vs=1/0;function Gs(){Vs=Hi()+500}var Ws,qs=null,Ys=!1,Xs=null,Qs=null,Js=!1,Zs=null,Ks=90,$s=[],el=[],tl=null,rl=0,nl=null,il=-1,al=0,ol=0,sl=null,ll=!1;function ul(){return 0!=(48&Ds)?Hi():-1!==il?il:il=Hi()}function cl(e){if(0==(2&(e=e.mode)))return 1;if(0==(4&e))return 99===Vi()?1:2;if(0===al&&(al=zs),0!==Qi.transition){0!==ol&&(ol=null!==js?js.pendingLanes:0),e=al;var t=4186112&~ol;return 0==(t&=-t)&&0==(t=(e=4186112&~e)&-e)&&(t=8192),t}return e=Vi(),e=Ft(0!=(4&Ds)&&98===e?12:e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),al)}function hl(e,t,r){if(50<rl)throw rl=0,nl=null,Error(o(185));if(null===(e=dl(e,t)))return null;Ht(e,t,r),e===Ls&&(Fs|=t,4===Is&&ml(e,Rs));var n=Vi();1===t?0!=(8&Ds)&&0==(48&Ds)?gl(e):(pl(e,r),0===Ds&&(Gs(),Yi())):(0==(4&Ds)||98!==n&&99!==n||(null===tl?tl=new Set([e]):tl.add(e)),pl(e,r)),js=e}function dl(e,t){e.lanes|=t;var r=e.alternate;for(null!==r&&(r.lanes|=t),r=e,e=e.return;null!==e;)e.childLanes|=t,null!==(r=e.alternate)&&(r.childLanes|=t),r=e,e=e.return;return 3===r.tag?r.stateNode:null}function pl(e,t){for(var r=e.callbackNode,n=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,s=e.pendingLanes;0<s;){var l=31-Vt(s),u=1<<l,c=a[l];if(-1===c){if(0==(u&n)||0!=(u&i)){c=t,Bt(u);var h=It;a[l]=10<=h?c+250:6<=h?c+5e3:-1}}else c<=t&&(e.expiredLanes|=u);s&=~u}if(n=zt(e,e===Ls?Rs:0),t=It,0===n)null!==r&&(r!==Bi&&Ei(r),e.callbackNode=null,e.callbackPriority=0);else{if(null!==r){if(e.callbackPriority===t)return;r!==Bi&&Ei(r)}15===t?(r=gl.bind(null,e),null===Ni?(Ni=[r],Fi=Mi(Pi,Xi)):Ni.push(r),r=Bi):14===t?r=qi(99,gl.bind(null,e)):(r=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(o(358,e))}}(t),r=qi(r,fl.bind(null,e))),e.callbackPriority=t,e.callbackNode=r}}function fl(e){if(il=-1,ol=al=0,0!=(48&Ds))throw Error(o(327));var t=e.callbackNode;if(Rl()&&e.callbackNode!==t)return null;var r=zt(e,e===Ls?Rs:0);if(0===r)return null;var n=r,i=Ds;Ds|=16;var a=_l();for(Ls===e&&Rs===n||(Gs(),wl(e,n));;)try{El();break}catch(t){Sl(e,t)}if(ta(),Cs.current=a,Ds=i,null!==Ps?n=0:(Ls=null,Rs=0,n=Is),0!=(zs&Fs))wl(e,0);else if(0!==n){if(2===n&&(Ds|=64,e.hydrate&&(e.hydrate=!1,qn(e.containerInfo)),0!==(r=Nt(e))&&(n=Al(e,r))),1===n)throw t=Bs,wl(e,0),ml(e,r),pl(e,Hi()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=r,n){case 0:case 1:throw Error(o(345));case 2:case 5:Dl(e);break;case 3:if(ml(e,r),(62914560&r)===r&&10<(n=Hs+500-Hi())){if(0!==zt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ul(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Gn(Dl.bind(null,e),n);break}Dl(e);break;case 4:if(ml(e,r),(4186112&r)===r)break;for(n=e.eventTimes,i=-1;0<r;){var s=31-Vt(r);a=1<<s,(s=n[s])>i&&(i=s),r&=~a}if(r=i,10<(r=(120>(r=Hi()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Es(r/1960))-r)){e.timeoutHandle=Gn(Dl.bind(null,e),r);break}Dl(e);break;default:throw Error(o(329))}}return pl(e,Hi()),e.callbackNode===t?fl.bind(null,e):null}function ml(e,t){for(t&=~Us,t&=~Fs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Vt(t),n=1<<r;e[r]=-1,t&=~n}}function gl(e){if(0!=(48&Ds))throw Error(o(327));if(Rl(),e===Ls&&0!=(e.expiredLanes&Rs)){var t=Rs,r=Al(e,t);0!=(zs&Fs)&&(r=Al(e,t=zt(e,t)))}else r=Al(e,t=zt(e,0));if(0!==e.tag&&2===r&&(Ds|=64,e.hydrate&&(e.hydrate=!1,qn(e.containerInfo)),0!==(t=Nt(e))&&(r=Al(e,t))),1===r)throw r=Bs,wl(e,0),ml(e,t),pl(e,Hi()),r;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Dl(e),pl(e,Hi()),null}function vl(e,t){var r=Ds;Ds|=1;try{return e(t)}finally{0===(Ds=r)&&(Gs(),Yi())}}function yl(e,t){var r=Ds;Ds&=-2,Ds|=8;try{return e(t)}finally{0===(Ds=r)&&(Gs(),Yi())}}function xl(e,t){ci(ks,Os),Os|=t,zs|=t}function bl(){Os=ks.current,ui(ks)}function wl(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(-1!==r&&(e.timeoutHandle=-1,Wn(r)),null!==Ps)for(r=Ps.return;null!==r;){var n=r;switch(n.tag){case 1:null!=(n=n.type.childContextTypes)&&vi();break;case 3:Oa(),ui(pi),ui(di),Xa();break;case 5:Ia(n);break;case 4:Oa();break;case 13:case 19:ui(Ba);break;case 10:ra(n);break;case 23:case 24:bl()}r=r.return}Ls=e,Ps=Vl(e.current,null),Rs=Os=zs=t,Is=0,Bs=null,Us=Fs=Ns=0}function Sl(e,t){for(;;){var r=Ps;try{if(ta(),Qa.current=Po,to){for(var n=Ka.memoizedState;null!==n;){var i=n.queue;null!==i&&(i.pending=null),n=n.next}to=!1}if(Za=0,eo=$a=Ka=null,ro=!1,Ts.current=null,null===r||null===r.return){Is=1,Bs=t,Ps=null;break}e:{var a=e,o=r.return,s=r,l=t;if(t=Rs,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==l&&"object"==typeof l&&"function"==typeof l.then){var u=l;if(0==(2&s.mode)){var c=s.alternate;c?(s.updateQueue=c.updateQueue,s.memoizedState=c.memoizedState,s.lanes=c.lanes):(s.updateQueue=null,s.memoizedState=null)}var h=0!=(1&Ba.current),d=o;do{var p;if(p=13===d.tag){var f=d.memoizedState;if(null!==f)p=null!==f.dehydrated;else{var m=d.memoizedProps;p=void 0!==m.fallback&&(!0!==m.unstable_avoidThisFallback||!h)}}if(p){var g=d.updateQueue;if(null===g){var v=new Set;v.add(u),d.updateQueue=v}else g.add(u);if(0==(2&d.mode)){if(d.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var y=ua(-1,1);y.tag=2,ca(s,y)}s.lanes|=1;break e}l=void 0,s=t;var x=a.pingCache;if(null===x?(x=a.pingCache=new ls,l=new Set,x.set(u,l)):void 0===(l=x.get(u))&&(l=new Set,x.set(u,l)),!l.has(s)){l.add(s);var b=Nl.bind(null,a,u,s);u.then(b,b)}d.flags|=4096,d.lanes=t;break e}d=d.return}while(null!==d);l=Error((Y(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Is&&(Is=2),l=os(l,s),d=o;do{switch(d.tag){case 3:a=l,d.flags|=4096,t&=-t,d.lanes|=t,ha(d,us(0,a,t));break e;case 1:a=l;var w=d.type,S=d.stateNode;if(0==(64&d.flags)&&("function"==typeof w.getDerivedStateFromError||null!==S&&"function"==typeof S.componentDidCatch&&(null===Qs||!Qs.has(S)))){d.flags|=4096,t&=-t,d.lanes|=t,ha(d,cs(d,a,t));break e}}d=d.return}while(null!==d)}Tl(r)}catch(e){t=e,Ps===r&&null!==r&&(Ps=r=r.return);continue}break}}function _l(){var e=Cs.current;return Cs.current=Po,null===e?Po:e}function Al(e,t){var r=Ds;Ds|=16;var n=_l();for(Ls===e&&Rs===t||wl(e,t);;)try{Ml();break}catch(t){Sl(e,t)}if(ta(),Ds=r,Cs.current=n,null!==Ps)throw Error(o(261));return Ls=null,Rs=0,Is}function Ml(){for(;null!==Ps;)Cl(Ps)}function El(){for(;null!==Ps&&!Ci();)Cl(Ps)}function Cl(e){var t=Ws(e.alternate,e,Os);e.memoizedProps=e.pendingProps,null===t?Tl(e):Ps=t,Ts.current=null}function Tl(e){var t=e;do{var r=t.alternate;if(e=t.return,0==(2048&t.flags)){if(null!==(r=is(r,t,Os)))return void(Ps=r);if(24!==(r=t).tag&&23!==r.tag||null===r.memoizedState||0!=(1073741824&Os)||0==(4&r.mode)){for(var n=0,i=r.child;null!==i;)n|=i.lanes|i.childLanes,i=i.sibling;r.childLanes=n}null!==e&&0==(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(r=as(t)))return r.flags&=2047,void(Ps=r);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Ps=t);Ps=t=e}while(null!==t);0===Is&&(Is=5)}function Dl(e){var t=Vi();return Wi(99,Ll.bind(null,e,t)),null}function Ll(e,t){do{Rl()}while(null!==Zs);if(0!=(48&Ds))throw Error(o(327));var r=e.finishedWork;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(o(177));e.callbackNode=null;var n=r.lanes|r.childLanes,i=n,a=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var s=e.eventTimes,l=e.expirationTimes;0<a;){var u=31-Vt(a),c=1<<u;i[u]=0,s[u]=-1,l[u]=-1,a&=~c}if(null!==tl&&0==(24&n)&&tl.has(e)&&tl.delete(e),e===Ls&&(Ps=Ls=null,Rs=0),1<r.flags?null!==r.lastEffect?(r.lastEffect.nextEffect=r,n=r.firstEffect):n=r:n=r.firstEffect,null!==n){if(i=Ds,Ds|=32,Ts.current=null,Un=Xt,gn(s=mn())){if("selectionStart"in s)l={start:s.selectionStart,end:s.selectionEnd};else e:if(l=(l=s.ownerDocument)&&l.defaultView||window,(c=l.getSelection&&l.getSelection())&&0!==c.rangeCount){l=c.anchorNode,a=c.anchorOffset,u=c.focusNode,c=c.focusOffset;try{l.nodeType,u.nodeType}catch(e){l=null;break e}var h=0,d=-1,p=-1,f=0,m=0,g=s,v=null;t:for(;;){for(var y;g!==l||0!==a&&3!==g.nodeType||(d=h+a),g!==u||0!==c&&3!==g.nodeType||(p=h+c),3===g.nodeType&&(h+=g.nodeValue.length),null!==(y=g.firstChild);)v=g,g=y;for(;;){if(g===s)break t;if(v===l&&++f===a&&(d=h),v===u&&++m===c&&(p=h),null!==(y=g.nextSibling))break;v=(g=v).parentNode}g=y}l=-1===d||-1===p?null:{start:d,end:p}}else l=null;l=l||{start:0,end:0}}else l=null;jn={focusedElem:s,selectionRange:l},Xt=!1,sl=null,ll=!1,qs=n;do{try{Pl()}catch(e){if(null===qs)throw Error(o(330));zl(qs,e),qs=qs.nextEffect}}while(null!==qs);sl=null,qs=n;do{try{for(s=e;null!==qs;){var x=qs.flags;if(16&x&&ve(qs.stateNode,""),128&x){var b=qs.alternate;if(null!==b){var w=b.ref;null!==w&&("function"==typeof w?w(null):w.current=null)}}switch(1038&x){case 2:xs(qs),qs.flags&=-3;break;case 6:xs(qs),qs.flags&=-3,_s(qs.alternate,qs);break;case 1024:qs.flags&=-1025;break;case 1028:qs.flags&=-1025,_s(qs.alternate,qs);break;case 4:_s(qs.alternate,qs);break;case 8:Ss(s,l=qs);var S=l.alternate;vs(l),null!==S&&vs(S)}qs=qs.nextEffect}}catch(e){if(null===qs)throw Error(o(330));zl(qs,e),qs=qs.nextEffect}}while(null!==qs);if(w=jn,b=mn(),x=w.focusedElem,s=w.selectionRange,b!==x&&x&&x.ownerDocument&&fn(x.ownerDocument.documentElement,x)){null!==s&&gn(x)&&(b=s.start,void 0===(w=s.end)&&(w=b),"selectionStart"in x?(x.selectionStart=b,x.selectionEnd=Math.min(w,x.value.length)):(w=(b=x.ownerDocument||document)&&b.defaultView||window).getSelection&&(w=w.getSelection(),l=x.textContent.length,S=Math.min(s.start,l),s=void 0===s.end?S:Math.min(s.end,l),!w.extend&&S>s&&(l=s,s=S,S=l),l=pn(x,S),a=pn(x,s),l&&a&&(1!==w.rangeCount||w.anchorNode!==l.node||w.anchorOffset!==l.offset||w.focusNode!==a.node||w.focusOffset!==a.offset)&&((b=b.createRange()).setStart(l.node,l.offset),w.removeAllRanges(),S>s?(w.addRange(b),w.extend(a.node,a.offset)):(b.setEnd(a.node,a.offset),w.addRange(b))))),b=[];for(w=x;w=w.parentNode;)1===w.nodeType&&b.push({element:w,left:w.scrollLeft,top:w.scrollTop});for("function"==typeof x.focus&&x.focus(),x=0;x<b.length;x++)(w=b[x]).element.scrollLeft=w.left,w.element.scrollTop=w.top}Xt=!!Un,jn=Un=null,e.current=r,qs=n;do{try{for(x=e;null!==qs;){var _=qs.flags;if(36&_&&fs(x,qs.alternate,qs),128&_){b=void 0;var A=qs.ref;if(null!==A){var M=qs.stateNode;qs.tag,b=M,"function"==typeof A?A(b):A.current=b}}qs=qs.nextEffect}}catch(e){if(null===qs)throw Error(o(330));zl(qs,e),qs=qs.nextEffect}}while(null!==qs);qs=null,zi(),Ds=i}else e.current=r;if(Js)Js=!1,Zs=e,Ks=t;else for(qs=n;null!==qs;)t=qs.nextEffect,qs.nextEffect=null,8&qs.flags&&((_=qs).sibling=null,_.stateNode=null),qs=t;if(0===(n=e.pendingLanes)&&(Qs=null),1===n?e===nl?rl++:(rl=0,nl=e):rl=0,r=r.stateNode,_i&&"function"==typeof _i.onCommitFiberRoot)try{_i.onCommitFiberRoot(Si,r,void 0,64==(64&r.current.flags))}catch(e){}if(pl(e,Hi()),Ys)throw Ys=!1,e=Xs,Xs=null,e;return 0!=(8&Ds)||Yi(),null}function Pl(){for(;null!==qs;){var e=qs.alternate;ll||null===sl||(0!=(8&qs.flags)?$e(qs,sl)&&(ll=!0):13===qs.tag&&Ms(e,qs)&&$e(qs,sl)&&(ll=!0));var t=qs.flags;0!=(256&t)&&ps(e,qs),0==(512&t)||Js||(Js=!0,qi(97,(function(){return Rl(),null}))),qs=qs.nextEffect}}function Rl(){if(90!==Ks){var e=97<Ks?97:Ks;return Ks=90,Wi(e,Il)}return!1}function Ol(e,t){$s.push(t,e),Js||(Js=!0,qi(97,(function(){return Rl(),null})))}function kl(e,t){el.push(t,e),Js||(Js=!0,qi(97,(function(){return Rl(),null})))}function Il(){if(null===Zs)return!1;var e=Zs;if(Zs=null,0!=(48&Ds))throw Error(o(331));var t=Ds;Ds|=32;var r=el;el=[];for(var n=0;n<r.length;n+=2){var i=r[n],a=r[n+1],s=i.destroy;if(i.destroy=void 0,"function"==typeof s)try{s()}catch(e){if(null===a)throw Error(o(330));zl(a,e)}}for(r=$s,$s=[],n=0;n<r.length;n+=2){i=r[n],a=r[n+1];try{var l=i.create;i.destroy=l()}catch(e){if(null===a)throw Error(o(330));zl(a,e)}}for(l=e.current.firstEffect;null!==l;)e=l.nextEffect,l.nextEffect=null,8&l.flags&&(l.sibling=null,l.stateNode=null),l=e;return Ds=t,Yi(),!0}function Bl(e,t,r){ca(e,t=us(0,t=os(r,t),1)),t=ul(),null!==(e=dl(e,1))&&(Ht(e,1,t),pl(e,t))}function zl(e,t){if(3===e.tag)Bl(e,e,t);else for(var r=e.return;null!==r;){if(3===r.tag){Bl(r,e,t);break}if(1===r.tag){var n=r.stateNode;if("function"==typeof r.type.getDerivedStateFromError||"function"==typeof n.componentDidCatch&&(null===Qs||!Qs.has(n))){var i=cs(r,e=os(t,e),1);if(ca(r,i),i=ul(),null!==(r=dl(r,1)))Ht(r,1,i),pl(r,i);else if("function"==typeof n.componentDidCatch&&(null===Qs||!Qs.has(n)))try{n.componentDidCatch(t,e)}catch(e){}break}}r=r.return}}function Nl(e,t,r){var n=e.pingCache;null!==n&&n.delete(t),t=ul(),e.pingedLanes|=e.suspendedLanes&r,Ls===e&&(Rs&r)===r&&(4===Is||3===Is&&(62914560&Rs)===Rs&&500>Hi()-Hs?wl(e,0):Us|=r),pl(e,t)}function Fl(e,t){var r=e.stateNode;null!==r&&r.delete(t),0==(t=0)&&(0==(2&(t=e.mode))?t=1:0==(4&t)?t=99===Vi()?1:2:(0===al&&(al=zs),0===(t=Ut(62914560&~al))&&(t=4194304))),r=ul(),null!==(e=dl(e,t))&&(Ht(e,t,r),pl(e,r))}function Ul(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function jl(e,t,r,n){return new Ul(e,t,r,n)}function Hl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Vl(e,t){var r=e.alternate;return null===r?((r=jl(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null),r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Gl(e,t,r,n,i,a){var s=2;if(n=e,"function"==typeof e)Hl(e)&&(s=1);else if("string"==typeof e)s=5;else e:switch(e){case A:return Wl(r.children,i,a,t);case B:s=8,i|=16;break;case M:s=8,i|=1;break;case E:return(e=jl(12,r,t,8|i)).elementType=E,e.type=E,e.lanes=a,e;case L:return(e=jl(13,r,t,i)).type=L,e.elementType=L,e.lanes=a,e;case P:return(e=jl(19,r,t,i)).elementType=P,e.lanes=a,e;case z:return ql(r,i,a,t);case N:return(e=jl(24,r,t,i)).elementType=N,e.lanes=a,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case C:s=10;break e;case T:s=9;break e;case D:s=11;break e;case R:s=14;break e;case O:s=16,n=null;break e;case k:s=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=jl(s,r,t,i)).elementType=e,t.type=n,t.lanes=a,t}function Wl(e,t,r,n){return(e=jl(7,e,n,t)).lanes=r,e}function ql(e,t,r,n){return(e=jl(23,e,n,t)).elementType=z,e.lanes=r,e}function Yl(e,t,r){return(e=jl(6,e,null,t)).lanes=r,e}function Xl(e,t,r){return(t=jl(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ql(e,t,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=r,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=jt(0),this.expirationTimes=jt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jt(0),this.mutableSourceEagerHydrationData=null}function Jl(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==n?null:""+n,children:e,containerInfo:t,implementation:r}}function Zl(e,t,r,n){var i=t.current,a=ul(),s=cl(i);e:if(r){t:{if(Qe(r=r._reactInternals)!==r||1!==r.tag)throw Error(o(170));var l=r;do{switch(l.tag){case 3:l=l.stateNode.context;break t;case 1:if(gi(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break t}}l=l.return}while(null!==l);throw Error(o(171))}if(1===r.tag){var u=r.type;if(gi(u)){r=xi(r,u,l);break e}}r=l}else r=hi;return null===t.context?t.context=r:t.pendingContext=r,(t=ua(a,s)).payload={element:e},null!==(n=void 0===n?null:n)&&(t.callback=n),ca(i,t),hl(i,s,a),s}function Kl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function $l(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function eu(e,t){$l(e,t),(e=e.alternate)&&$l(e,t)}function tu(e,t,r){var n=null!=r&&null!=r.hydrationOptions&&r.hydrationOptions.mutableSources||null;if(r=new Ql(e,t,null!=r&&!0===r.hydrate),t=jl(3,null,null,2===t?7:1===t?3:0),r.current=t,t.stateNode=r,sa(t),e[$n]=r.current,Pn(8===e.nodeType?e.parentNode:e),n)for(e=0;e<n.length;e++){var i=(t=n[e])._getVersion;i=i(t._source),null==r.mutableSourceEagerHydrationData?r.mutableSourceEagerHydrationData=[t,i]:r.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=r}function ru(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function nu(e,t,r,n,i){var a=r._reactRootContainer;if(a){var o=a._internalRoot;if("function"==typeof i){var s=i;i=function(){var e=Kl(o);s.call(e)}}Zl(t,o,e,i)}else{if(a=r._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var r;r=e.lastChild;)e.removeChild(r);return new tu(e,0,t?{hydrate:!0}:void 0)}(r,n),o=a._internalRoot,"function"==typeof i){var l=i;i=function(){var e=Kl(o);l.call(e)}}yl((function(){Zl(t,o,e,i)}))}return Kl(o)}function iu(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ru(t))throw Error(o(200));return Jl(e,t,null,r)}Ws=function(e,t,r){var n=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||pi.current)Bo=!0;else{if(0==(r&n)){switch(Bo=!1,t.tag){case 3:qo(t),qa();break;case 5:ka(t);break;case 1:gi(t.type)&&bi(t);break;case 4:Ra(t,t.stateNode.containerInfo);break;case 10:n=t.memoizedProps.value;var i=t.type._context;ci(Zi,i._currentValue),i._currentValue=n;break;case 13:if(null!==t.memoizedState)return 0!=(r&t.child.childLanes)?Zo(e,t,r):(ci(Ba,1&Ba.current),null!==(t=rs(e,t,r))?t.sibling:null);ci(Ba,1&Ba.current);break;case 19:if(n=0!=(r&t.childLanes),0!=(64&e.flags)){if(n)return ts(e,t,r);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),ci(Ba,Ba.current),n)break;return null;case 23:case 24:return t.lanes=0,jo(e,t,r)}return rs(e,t,r)}Bo=0!=(16384&e.flags)}else Bo=!1;switch(t.lanes=0,t.tag){case 2:if(n=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=mi(t,di.current),ia(t,r),i=ao(null,t,n,e,i,r),t.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,gi(n)){var a=!0;bi(t)}else a=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,sa(t);var s=n.getDerivedStateFromProps;"function"==typeof s&&ma(t,n,s,e),i.updater=ga,t.stateNode=i,i._reactInternals=t,ba(t,n,e,r),t=Wo(null,t,n,!0,a,r)}else t.tag=0,zo(null,t,i,r),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(a=i._init)(i._payload),t.type=i,a=t.tag=function(e){if("function"==typeof e)return Hl(e)?1:0;if(null!=e){if((e=e.$$typeof)===D)return 11;if(e===R)return 14}return 2}(i),e=Ji(i,e),a){case 0:t=Vo(null,t,i,e,r);break e;case 1:t=Go(null,t,i,e,r);break e;case 11:t=No(null,t,i,e,r);break e;case 14:t=Fo(null,t,i,Ji(i.type,e),n,r);break e}throw Error(o(306,i,""))}return t;case 0:return n=t.type,i=t.pendingProps,Vo(e,t,n,i=t.elementType===n?i:Ji(n,i),r);case 1:return n=t.type,i=t.pendingProps,Go(e,t,n,i=t.elementType===n?i:Ji(n,i),r);case 3:if(qo(t),n=t.updateQueue,null===e||null===n)throw Error(o(282));if(n=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,la(e,t),da(t,n,null,r),(n=t.memoizedState.element)===i)qa(),t=rs(e,t,r);else{if((a=(i=t.stateNode).hydrate)&&(Fa=Yn(t.stateNode.containerInfo.firstChild),Na=t,a=Ua=!0),a){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(a=e[i])._workInProgressVersionPrimary=e[i+1],Ya.push(a);for(r=Ea(t,null,n,r),t.child=r;r;)r.flags=-3&r.flags|1024,r=r.sibling}else zo(e,t,n,r),qa();t=t.child}return t;case 5:return ka(t),null===e&&Va(t),n=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,s=i.children,Vn(n,i)?s=null:null!==a&&Vn(n,a)&&(t.flags|=16),Ho(e,t),zo(e,t,s,r),t.child;case 6:return null===e&&Va(t),null;case 13:return Zo(e,t,r);case 4:return Ra(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=Ma(t,null,n,r):zo(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,No(e,t,n,i=t.elementType===n?i:Ji(n,i),r);case 7:return zo(e,t,t.pendingProps,r),t.child;case 8:case 12:return zo(e,t,t.pendingProps.children,r),t.child;case 10:e:{n=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value;var l=t.type._context;if(ci(Zi,l._currentValue),l._currentValue=a,null!==s)if(l=s.value,0==(a=un(l,a)?0:0|("function"==typeof n._calculateChangedBits?n._calculateChangedBits(l,a):1073741823))){if(s.children===i.children&&!pi.current){t=rs(e,t,r);break e}}else for(null!==(l=t.child)&&(l.return=t);null!==l;){var u=l.dependencies;if(null!==u){s=l.child;for(var c=u.firstContext;null!==c;){if(c.context===n&&0!=(c.observedBits&a)){1===l.tag&&((c=ua(-1,r&-r)).tag=2,ca(l,c)),l.lanes|=r,null!==(c=l.alternate)&&(c.lanes|=r),na(l.return,r),u.lanes|=r;break}c=c.next}}else s=10===l.tag&&l.type===t.type?null:l.child;if(null!==s)s.return=l;else for(s=l;null!==s;){if(s===t){s=null;break}if(null!==(l=s.sibling)){l.return=s.return,s=l;break}s=s.return}l=s}zo(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=(a=t.pendingProps).children,ia(t,r),n=n(i=aa(i,a.unstable_observedBits)),t.flags|=1,zo(e,t,n,r),t.child;case 14:return a=Ji(i=t.type,t.pendingProps),Fo(e,t,i,a=Ji(i.type,a),n,r);case 15:return Uo(e,t,t.type,t.pendingProps,n,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Ji(n,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,gi(n)?(e=!0,bi(t)):e=!1,ia(t,r),ya(t,n,i),ba(t,n,i,r),Wo(null,t,n,!0,e,r);case 19:return ts(e,t,r);case 23:case 24:return jo(e,t,r)}throw Error(o(156,t.tag))},tu.prototype.render=function(e){Zl(e,this._internalRoot,null,null)},tu.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Zl(null,e,null,(function(){t[$n]=null}))},et=function(e){13===e.tag&&(hl(e,4,ul()),eu(e,4))},tt=function(e){13===e.tag&&(hl(e,67108864,ul()),eu(e,67108864))},rt=function(e){if(13===e.tag){var t=ul(),r=cl(e);hl(e,r,t),eu(e,r)}},nt=function(e,t){return t()},Ee=function(e,t,r){switch(t){case"input":if(re(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=ii(n);if(!i)throw Error(o(90));Z(n),re(n,i)}}}break;case"textarea":ue(e,r);break;case"select":null!=(t=r.value)&&oe(e,!!r.multiple,t,!1)}},Re=vl,Oe=function(e,t,r,n,i){var a=Ds;Ds|=4;try{return Wi(98,e.bind(null,t,r,n,i))}finally{0===(Ds=a)&&(Gs(),Yi())}},ke=function(){0==(49&Ds)&&(function(){if(null!==tl){var e=tl;tl=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,pl(e,Hi())}))}Yi()}(),Rl())},Ie=function(e,t){var r=Ds;Ds|=2;try{return e(t)}finally{0===(Ds=r)&&(Gs(),Yi())}};var au={Events:[ri,ni,ii,Le,Pe,Rl,{current:!1}]},ou={findFiberByHostInstance:ti,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},su={bundleType:ou.bundleType,version:ou.version,rendererPackageName:ou.rendererPackageName,rendererConfig:ou.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ke(e))?null:e.stateNode},findFiberByHostInstance:ou.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var lu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lu.isDisabled&&lu.supportsFiber)try{Si=lu.inject(su),_i=lu}catch(me){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=au,t.createPortal=iu,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return null===(e=Ke(t))?null:e.stateNode},t.flushSync=function(e,t){var r=Ds;if(0!=(48&r))return e(t);Ds|=1;try{if(e)return Wi(99,e.bind(null,t))}finally{Ds=r,Yi()}},t.hydrate=function(e,t,r){if(!ru(t))throw Error(o(200));return nu(null,e,t,!0,r)},t.render=function(e,t,r){if(!ru(t))throw Error(o(200));return nu(null,e,t,!1,r)},t.unmountComponentAtNode=function(e){if(!ru(e))throw Error(o(40));return!!e._reactRootContainer&&(yl((function(){nu(null,null,e,!1,(function(){e._reactRootContainer=null,e[$n]=null}))})),!0)},t.unstable_batchedUpdates=vl,t.unstable_createPortal=function(e,t){return iu(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!ru(r))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return nu(e,t,r,!1,n)},t.version="17.0.2"},935:(e,t,r)=>{"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=r(448)},590:e=>{var t="undefined"!=typeof Element,r="function"==typeof Map,n="function"==typeof Set,i="function"==typeof ArrayBuffer&&!!ArrayBuffer.isView;function a(e,o){if(e===o)return!0;if(e&&o&&"object"==typeof e&&"object"==typeof o){if(e.constructor!==o.constructor)return!1;var s,l,u,c;if(Array.isArray(e)){if((s=e.length)!=o.length)return!1;for(l=s;0!=l--;)if(!a(e[l],o[l]))return!1;return!0}if(r&&e instanceof Map&&o instanceof Map){if(e.size!==o.size)return!1;for(c=e.entries();!(l=c.next()).done;)if(!o.has(l.value[0]))return!1;for(c=e.entries();!(l=c.next()).done;)if(!a(l.value[1],o.get(l.value[0])))return!1;return!0}if(n&&e instanceof Set&&o instanceof Set){if(e.size!==o.size)return!1;for(c=e.entries();!(l=c.next()).done;)if(!o.has(l.value[0]))return!1;return!0}if(i&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(o)){if((s=e.length)!=o.length)return!1;for(l=s;0!=l--;)if(e[l]!==o[l])return!1;return!0}if(e.constructor===RegExp)return e.source===o.source&&e.flags===o.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===o.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===o.toString();if((s=(u=Object.keys(e)).length)!==Object.keys(o).length)return!1;for(l=s;0!=l--;)if(!Object.prototype.hasOwnProperty.call(o,u[l]))return!1;if(t&&e instanceof Element)return!1;for(l=s;0!=l--;)if(("_owner"!==u[l]&&"__v"!==u[l]&&"__o"!==u[l]||!e.$$typeof)&&!a(e[u[l]],o[u[l]]))return!1;return!0}return e!=e&&o!=o}e.exports=function(e,t){try{return a(e,t)}catch(e){if((e.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw e}}},921:(e,t)=>{"use strict";var r="function"==typeof Symbol&&Symbol.for,n=r?Symbol.for("react.element"):60103,i=r?Symbol.for("react.portal"):60106,a=r?Symbol.for("react.fragment"):60107,o=r?Symbol.for("react.strict_mode"):60108,s=r?Symbol.for("react.profiler"):60114,l=r?Symbol.for("react.provider"):60109,u=r?Symbol.for("react.context"):60110,c=r?Symbol.for("react.async_mode"):60111,h=r?Symbol.for("react.concurrent_mode"):60111,d=r?Symbol.for("react.forward_ref"):60112,p=r?Symbol.for("react.suspense"):60113,f=r?Symbol.for("react.suspense_list"):60120,m=r?Symbol.for("react.memo"):60115,g=r?Symbol.for("react.lazy"):60116,v=r?Symbol.for("react.block"):60121,y=r?Symbol.for("react.fundamental"):60117,x=r?Symbol.for("react.responder"):60118,b=r?Symbol.for("react.scope"):60119;function w(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case c:case h:case a:case s:case o:case p:return e;default:switch(e=e&&e.$$typeof){case u:case d:case g:case m:case l:return e;default:return t}}case i:return t}}}function S(e){return w(e)===h}t.AsyncMode=c,t.ConcurrentMode=h,t.ContextConsumer=u,t.ContextProvider=l,t.Element=n,t.ForwardRef=d,t.Fragment=a,t.Lazy=g,t.Memo=m,t.Portal=i,t.Profiler=s,t.StrictMode=o,t.Suspense=p,t.isAsyncMode=function(e){return S(e)||w(e)===c},t.isConcurrentMode=S,t.isContextConsumer=function(e){return w(e)===u},t.isContextProvider=function(e){return w(e)===l},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===n},t.isForwardRef=function(e){return w(e)===d},t.isFragment=function(e){return w(e)===a},t.isLazy=function(e){return w(e)===g},t.isMemo=function(e){return w(e)===m},t.isPortal=function(e){return w(e)===i},t.isProfiler=function(e){return w(e)===s},t.isStrictMode=function(e){return w(e)===o},t.isSuspense=function(e){return w(e)===p},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===a||e===h||e===s||e===o||e===p||e===f||"object"==typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===l||e.$$typeof===u||e.$$typeof===d||e.$$typeof===y||e.$$typeof===x||e.$$typeof===b||e.$$typeof===v)},t.typeOf=w},864:(e,t,r)=>{"use strict";e.exports=r(921)},251:(e,t,r)=>{"use strict";r(418);var n=r(294),i=60103;if(t.Fragment=60107,"function"==typeof Symbol&&Symbol.for){var a=Symbol.for;i=a("react.element"),t.Fragment=a("react.fragment")}var o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,r){var n,a={},u=null,c=null;for(n in void 0!==r&&(u=""+r),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)s.call(t,n)&&!l.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===a[n]&&(a[n]=t[n]);return{$$typeof:i,type:e,key:u,ref:c,props:a,_owner:o.current}}t.jsx=u,t.jsxs=u},408:(e,t,r)=>{"use strict";var n=r(418),i=60103,a=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var o=60109,s=60110,l=60112;t.Suspense=60113;var u=60115,c=60116;if("function"==typeof Symbol&&Symbol.for){var h=Symbol.for;i=h("react.element"),a=h("react.portal"),t.Fragment=h("react.fragment"),t.StrictMode=h("react.strict_mode"),t.Profiler=h("react.profiler"),o=h("react.provider"),s=h("react.context"),l=h("react.forward_ref"),t.Suspense=h("react.suspense"),u=h("react.memo"),c=h("react.lazy")}var d="function"==typeof Symbol&&Symbol.iterator;function p(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m={};function g(e,t,r){this.props=e,this.context=t,this.refs=m,this.updater=r||f}function v(){}function y(e,t,r){this.props=e,this.context=t,this.refs=m,this.updater=r||f}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(p(85));this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=g.prototype;var x=y.prototype=new v;x.constructor=y,n(x,g.prototype),x.isPureReactComponent=!0;var b={current:null},w=Object.prototype.hasOwnProperty,S={key:!0,ref:!0,__self:!0,__source:!0};function _(e,t,r){var n,a={},o=null,s=null;if(null!=t)for(n in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)w.call(t,n)&&!S.hasOwnProperty(n)&&(a[n]=t[n]);var l=arguments.length-2;if(1===l)a.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];a.children=u}if(e&&e.defaultProps)for(n in l=e.defaultProps)void 0===a[n]&&(a[n]=l[n]);return{$$typeof:i,type:e,key:o,ref:s,props:a,_owner:b.current}}function A(e){return"object"==typeof e&&null!==e&&e.$$typeof===i}var M=/\/+/g;function E(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function C(e,t,r,n,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case i:case a:l=!0}}if(l)return o=o(l=e),e=""===n?"."+E(l,0):n,Array.isArray(o)?(r="",null!=e&&(r=e.replace(M,"$&/")+"/"),C(o,t,r,"",(function(e){return e}))):null!=o&&(A(o)&&(o=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,r+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(M,"$&/")+"/")+e)),t.push(o)),1;if(l=0,n=""===n?".":n+":",Array.isArray(e))for(var u=0;u<e.length;u++){var c=n+E(s=e[u],u);l+=C(s,t,r,c,o)}else if(c=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"==typeof c)for(e=c.call(e),u=0;!(s=e.next()).done;)l+=C(s=s.value,t,r,c=n+E(s,u++),o);else if("object"===s)throw t=""+e,Error(p(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return l}function T(e,t,r){if(null==e)return e;var n=[],i=0;return C(e,n,"","",(function(e){return t.call(r,e,i++)})),n}function D(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var L={current:null};function P(){var e=L.current;if(null===e)throw Error(p(321));return e}var R={ReactCurrentDispatcher:L,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:b,IsSomeRendererActing:{current:!1},assign:n};t.Children={map:T,forEach:function(e,t,r){T(e,(function(){t.apply(this,arguments)}),r)},count:function(e){var t=0;return T(e,(function(){t++})),t},toArray:function(e){return T(e,(function(e){return e}))||[]},only:function(e){if(!A(e))throw Error(p(143));return e}},t.Component=g,t.PureComponent=y,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.cloneElement=function(e,t,r){if(null==e)throw Error(p(267,e));var a=n({},e.props),o=e.key,s=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,l=b.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)w.call(t,c)&&!S.hasOwnProperty(c)&&(a[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)a.children=r;else if(1<c){u=Array(c);for(var h=0;h<c;h++)u[h]=arguments[h+2];a.children=u}return{$$typeof:i,type:e.type,key:o,ref:s,props:a,_owner:l}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:s,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=_,t.createFactory=function(e){var t=_.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=A,t.lazy=function(e){return{$$typeof:c,_payload:{_status:-1,_result:e},_init:D}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return P().useCallback(e,t)},t.useContext=function(e,t){return P().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return P().useEffect(e,t)},t.useImperativeHandle=function(e,t,r){return P().useImperativeHandle(e,t,r)},t.useLayoutEffect=function(e,t){return P().useLayoutEffect(e,t)},t.useMemo=function(e,t){return P().useMemo(e,t)},t.useReducer=function(e,t,r){return P().useReducer(e,t,r)},t.useRef=function(e){return P().useRef(e)},t.useState=function(e){return P().useState(e)},t.version="17.0.2"},294:(e,t,r)=>{"use strict";e.exports=r(408)},893:(e,t,r)=>{"use strict";e.exports=r(251)},53:(e,t)=>{"use strict";var r,n,i,a;if("object"==typeof performance&&"function"==typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}if("undefined"==typeof window||"function"!=typeof MessageChannel){var u=null,c=null,h=function(){if(null!==u)try{var e=t.unstable_now();u(!0,e),u=null}catch(e){throw setTimeout(h,0),e}};r=function(e){null!==u?setTimeout(r,0,e):(u=e,setTimeout(h,0))},n=function(e,t){c=setTimeout(e,t)},i=function(){clearTimeout(c)},t.unstable_shouldYield=function(){return!1},a=t.unstable_forceFrameRate=function(){}}else{var d=window.setTimeout,p=window.clearTimeout;if("undefined"!=typeof console){var f=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!=typeof f&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var m=!1,g=null,v=-1,y=5,x=0;t.unstable_shouldYield=function(){return t.unstable_now()>=x},a=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<e?Math.floor(1e3/e):5};var b=new MessageChannel,w=b.port2;b.port1.onmessage=function(){if(null!==g){var e=t.unstable_now();x=e+y;try{g(!0,e)?w.postMessage(null):(m=!1,g=null)}catch(e){throw w.postMessage(null),e}}else m=!1},r=function(e){g=e,m||(m=!0,w.postMessage(null))},n=function(e,r){v=d((function(){e(t.unstable_now())}),r)},i=function(){p(v),v=-1}}function S(e,t){var r=e.length;e.push(t);e:for(;;){var n=r-1>>>1,i=e[n];if(!(void 0!==i&&0<M(i,t)))break e;e[n]=t,e[r]=i,r=n}}function _(e){return void 0===(e=e[0])?null:e}function A(e){var t=e[0];if(void 0!==t){var r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,i=e.length;n<i;){var a=2*(n+1)-1,o=e[a],s=a+1,l=e[s];if(void 0!==o&&0>M(o,r))void 0!==l&&0>M(l,o)?(e[n]=l,e[s]=r,n=s):(e[n]=o,e[a]=r,n=a);else{if(!(void 0!==l&&0>M(l,r)))break e;e[n]=l,e[s]=r,n=s}}}return t}return null}function M(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}var E=[],C=[],T=1,D=null,L=3,P=!1,R=!1,O=!1;function k(e){for(var t=_(C);null!==t;){if(null===t.callback)A(C);else{if(!(t.startTime<=e))break;A(C),t.sortIndex=t.expirationTime,S(E,t)}t=_(C)}}function I(e){if(O=!1,k(e),!R)if(null!==_(E))R=!0,r(B);else{var t=_(C);null!==t&&n(I,t.startTime-e)}}function B(e,r){R=!1,O&&(O=!1,i()),P=!0;var a=L;try{for(k(r),D=_(E);null!==D&&(!(D.expirationTime>r)||e&&!t.unstable_shouldYield());){var o=D.callback;if("function"==typeof o){D.callback=null,L=D.priorityLevel;var s=o(D.expirationTime<=r);r=t.unstable_now(),"function"==typeof s?D.callback=s:D===_(E)&&A(E),k(r)}else A(E);D=_(E)}if(null!==D)var l=!0;else{var u=_(C);null!==u&&n(I,u.startTime-r),l=!1}return l}finally{D=null,L=a,P=!1}}var z=a;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){R||P||(R=!0,r(B))},t.unstable_getCurrentPriorityLevel=function(){return L},t.unstable_getFirstCallbackNode=function(){return _(E)},t.unstable_next=function(e){switch(L){case 1:case 2:case 3:var t=3;break;default:t=L}var r=L;L=t;try{return e()}finally{L=r}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=z,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=L;L=e;try{return t()}finally{L=r}},t.unstable_scheduleCallback=function(e,a,o){var s=t.unstable_now();switch(o="object"==typeof o&&null!==o&&"number"==typeof(o=o.delay)&&0<o?s+o:s,e){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return e={id:T++,callback:a,priorityLevel:e,startTime:o,expirationTime:l=o+l,sortIndex:-1},o>s?(e.sortIndex=o,S(C,e),null===_(E)&&e===_(C)&&(O?i():O=!0,n(I,o-s))):(e.sortIndex=l,S(E,e),R||P||(R=!0,r(B))),e},t.unstable_wrapCallback=function(e){var t=L;return function(){var r=L;L=t;try{return e.apply(this,arguments)}finally{L=r}}}},840:(e,t,r)=>{"use strict";e.exports=r(53)},379:e=>{"use strict";var t=[];function r(e){for(var r=-1,n=0;n<t.length;n++)if(t[n].identifier===e){r=n;break}return r}function n(e,n){for(var a={},o=[],s=0;s<e.length;s++){var l=e[s],u=n.base?l[0]+n.base:l[0],c=a[u]||0,h="".concat(u," ").concat(c);a[u]=c+1;var d=r(h),p={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==d)t[d].references++,t[d].updater(p);else{var f=i(p,n);n.byIndex=s,t.splice(s,0,{identifier:h,updater:f,references:1})}o.push(h)}return o}function i(e,t){var r=t.domAPI(t);return r.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;r.update(e=t)}else r.remove()}}e.exports=function(e,i){var a=n(e=e||[],i=i||{});return function(e){e=e||[];for(var o=0;o<a.length;o++){var s=r(a[o]);t[s].references--}for(var l=n(e,i),u=0;u<a.length;u++){var c=r(a[u]);0===t[c].references&&(t[c].updater(),t.splice(c,1))}a=l}}},569:e=>{"use strict";var t={};e.exports=function(e,r){var n=function(e){if(void 0===t[e]){var r=document.querySelector(e);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}t[e]=r}return t[e]}(e);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(r)}},216:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,r)=>{"use strict";e.exports=function(e){var t=r.nc;t&&e.setAttribute("nonce",t)}},795:e=>{"use strict";e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(r){!function(e,t,r){var n="";r.supports&&(n+="@supports (".concat(r.supports,") {")),r.media&&(n+="@media ".concat(r.media," {"));var i=void 0!==r.layer;i&&(n+="@layer".concat(r.layer.length>0?" ".concat(r.layer):""," {")),n+=r.css,i&&(n+="}"),r.media&&(n+="}"),r.supports&&(n+="}");var a=r.sourceMap;a&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleTagTransform(n,e,t.options)}(t,e,r)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},742:e=>{e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,r=[],n=0;n<e.rangeCount;n++)r.push(e.getRangeAt(n));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||r.forEach((function(t){e.addRange(t)})),t&&t.focus()}}}},n={};function i(e){var t=n[e];if(void 0!==t)return t.exports;var a=n[e]={id:e,loaded:!1,exports:{}};return r[e](a,a.exports,i),a.loaded=!0,a.exports}i.amdO={},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,i.t=function(r,n){if(1&n&&(r=this(r)),8&n)return r;if("object"==typeof r&&r){if(4&n&&r.__esModule)return r;if(16&n&&"function"==typeof r.then)return r}var a=Object.create(null);i.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&n&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>o[e]=()=>r[e]));return o.default=()=>r,i.d(a,o),a},i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),i.p="/",(()=>{"use strict";var e=i(294),t=i.t(e,2),r=i(935),n=function(){function e(e){var t=this;this._insertTag=function(e){var r;r=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,r),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)==0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var r=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{r.insertRule(e,r.cssRules.length)}catch(e){}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}(),a=Math.abs,o=String.fromCharCode,s=Object.assign;function l(e){return e.trim()}function u(e,t,r){return e.replace(t,r)}function c(e,t){return e.indexOf(t)}function h(e,t){return 0|e.charCodeAt(t)}function d(e,t,r){return e.slice(t,r)}function p(e){return e.length}function f(e){return e.length}function m(e,t){return t.push(e),e}var g=1,v=1,y=0,x=0,b=0,w="";function S(e,t,r,n,i,a,o){return{value:e,root:t,parent:r,type:n,props:i,children:a,line:g,column:v,length:o,return:""}}function _(e,t){return s(S("",null,null,"",null,null,0),e,{length:-e.length},t)}function A(){return b=x>0?h(w,--x):0,v--,10===b&&(v=1,g--),b}function M(){return b=x<y?h(w,x++):0,v++,10===b&&(v=1,g++),b}function E(){return h(w,x)}function C(){return x}function T(e,t){return d(w,e,t)}function D(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function L(e){return g=v=1,y=p(w=e),x=0,[]}function P(e){return w="",e}function R(e){return l(T(x-1,I(91===e?e+2:40===e?e+1:e)))}function O(e){for(;(b=E())&&b<33;)M();return D(e)>2||D(b)>3?"":" "}function k(e,t){for(;--t&&M()&&!(b<48||b>102||b>57&&b<65||b>70&&b<97););return T(e,C()+(t<6&&32==E()&&32==M()))}function I(e){for(;M();)switch(b){case e:return x;case 34:case 39:34!==e&&39!==e&&I(b);break;case 40:41===e&&I(e);break;case 92:M()}return x}function B(e,t){for(;M()&&e+b!==57&&(e+b!==84||47!==E()););return"/*"+T(t,x-1)+"*"+o(47===e?e:M())}function z(e){for(;!D(E());)M();return T(e,x)}var N="-ms-",F="-moz-",U="-webkit-",j="comm",H="rule",V="decl",G="@keyframes";function W(e,t){for(var r="",n=f(e),i=0;i<n;i++)r+=t(e[i],i,e,t)||"";return r}function q(e,t,r,n){switch(e.type){case"@import":case V:return e.return=e.return||e.value;case j:return"";case G:return e.return=e.value+"{"+W(e.children,n)+"}";case H:e.value=e.props.join(",")}return p(r=W(e.children,n))?e.return=e.value+"{"+r+"}":""}function Y(e,t){switch(function(e,t){return(((t<<2^h(e,0))<<2^h(e,1))<<2^h(e,2))<<2^h(e,3)}(e,t)){case 5103:return U+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return U+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return U+e+F+e+N+e+e;case 6828:case 4268:return U+e+N+e+e;case 6165:return U+e+N+"flex-"+e+e;case 5187:return U+e+u(e,/(\w+).+(:[^]+)/,"-webkit-box-$1$2-ms-flex-$1$2")+e;case 5443:return U+e+N+"flex-item-"+u(e,/flex-|-self/,"")+e;case 4675:return U+e+N+"flex-line-pack"+u(e,/align-content|flex-|-self/,"")+e;case 5548:return U+e+N+u(e,"shrink","negative")+e;case 5292:return U+e+N+u(e,"basis","preferred-size")+e;case 6060:return U+"box-"+u(e,"-grow","")+U+e+N+u(e,"grow","positive")+e;case 4554:return U+u(e,/([^-])(transform)/g,"$1-webkit-$2")+e;case 6187:return u(u(u(e,/(zoom-|grab)/,U+"$1"),/(image-set)/,U+"$1"),e,"")+e;case 5495:case 3959:return u(e,/(image-set\([^]*)/,U+"$1$`$1");case 4968:return u(u(e,/(.+:)(flex-)?(.*)/,"-webkit-box-pack:$3-ms-flex-pack:$3"),/s.+-b[^;]+/,"justify")+U+e+e;case 4095:case 3583:case 4068:case 2532:return u(e,/(.+)-inline(.+)/,U+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(p(e)-1-t>6)switch(h(e,t+1)){case 109:if(45!==h(e,t+4))break;case 102:return u(e,/(.+:)(.+)-([^]+)/,"$1-webkit-$2-$3$1"+F+(108==h(e,t+3)?"$3":"$2-$3"))+e;case 115:return~c(e,"stretch")?Y(u(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==h(e,t+1))break;case 6444:switch(h(e,p(e)-3-(~c(e,"!important")&&10))){case 107:return u(e,":",":"+U)+e;case 101:return u(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+U+(45===h(e,14)?"inline-":"")+"box$3$1"+U+"$2$3$1"+N+"$2box$3")+e}break;case 5936:switch(h(e,t+11)){case 114:return U+e+N+u(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return U+e+N+u(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return U+e+N+u(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return U+e+N+e+e}return e}function X(e){return P(Q("",null,null,null,[""],e=L(e),0,[0],e))}function Q(e,t,r,n,i,a,s,l,h){for(var d=0,f=0,g=s,v=0,y=0,x=0,b=1,w=1,S=1,_=0,T="",D=i,L=a,P=n,I=T;w;)switch(x=_,_=M()){case 40:if(108!=x&&58==I.charCodeAt(g-1)){-1!=c(I+=u(R(_),"&","&\f"),"&\f")&&(S=-1);break}case 34:case 39:case 91:I+=R(_);break;case 9:case 10:case 13:case 32:I+=O(x);break;case 92:I+=k(C()-1,7);continue;case 47:switch(E()){case 42:case 47:m(Z(B(M(),C()),t,r),h);break;default:I+="/"}break;case 123*b:l[d++]=p(I)*S;case 125*b:case 59:case 0:switch(_){case 0:case 125:w=0;case 59+f:y>0&&p(I)-g&&m(y>32?K(I+";",n,r,g-1):K(u(I," ","")+";",n,r,g-2),h);break;case 59:I+=";";default:if(m(P=J(I,t,r,d,f,i,l,T,D=[],L=[],g),a),123===_)if(0===f)Q(I,t,P,P,D,a,g,l,L);else switch(v){case 100:case 109:case 115:Q(e,P,P,n&&m(J(e,P,P,0,0,i,l,T,i,D=[],g),L),i,L,g,l,n?D:L);break;default:Q(I,P,P,P,[""],L,0,l,L)}}d=f=y=0,b=S=1,T=I="",g=s;break;case 58:g=1+p(I),y=x;default:if(b<1)if(123==_)--b;else if(125==_&&0==b++&&125==A())continue;switch(I+=o(_),_*b){case 38:S=f>0?1:(I+="\f",-1);break;case 44:l[d++]=(p(I)-1)*S,S=1;break;case 64:45===E()&&(I+=R(M())),v=E(),f=g=p(T=I+=z(C())),_++;break;case 45:45===x&&2==p(I)&&(b=0)}}return a}function J(e,t,r,n,i,o,s,c,h,p,m){for(var g=i-1,v=0===i?o:[""],y=f(v),x=0,b=0,w=0;x<n;++x)for(var _=0,A=d(e,g+1,g=a(b=s[x])),M=e;_<y;++_)(M=l(b>0?v[_]+" "+A:u(A,/&\f/g,v[_])))&&(h[w++]=M);return S(e,t,r,0===i?H:c,h,p,m)}function Z(e,t,r){return S(e,t,r,j,o(b),d(e,2,-2),0)}function K(e,t,r,n){return S(e,t,r,V,d(e,0,n),d(e,n+1,-1),n)}var $=function(e,t,r){for(var n=0,i=0;n=i,i=E(),38===n&&12===i&&(t[r]=1),!D(i);)M();return T(e,x)},ee=new WeakMap,te=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,r=e.parent,n=e.column===r.column&&e.line===r.line;"rule"!==r.type;)if(!(r=r.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||ee.get(r))&&!n){ee.set(e,!0);for(var i=[],a=function(e,t){return P(function(e,t){var r=-1,n=44;do{switch(D(n)){case 0:38===n&&12===E()&&(t[r]=1),e[r]+=$(x-1,t,r);break;case 2:e[r]+=R(n);break;case 4:if(44===n){e[++r]=58===E()?"&\f":"",t[r]=e[r].length;break}default:e[r]+=o(n)}}while(n=M());return e}(L(e),t))}(t,i),s=r.props,l=0,u=0;l<a.length;l++)for(var c=0;c<s.length;c++,u++)e.props[u]=i[l]?a[l].replace(/&\f/g,s[c]):s[c]+" "+a[l]}}},re=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}},ne=[function(e,t,r,n){if(e.length>-1&&!e.return)switch(e.type){case V:e.return=Y(e.value,e.length);break;case G:return W([_(e,{value:u(e.value,"@","@"+U)})],n);case H:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=/(::plac\w+|:read-\w+)/.exec(e))?e[0]:e}(t)){case":read-only":case":read-write":return W([_(e,{props:[u(t,/:(read-\w+)/,":-moz-$1")]})],n);case"::placeholder":return W([_(e,{props:[u(t,/:(plac\w+)/,":-webkit-input-$1")]}),_(e,{props:[u(t,/:(plac\w+)/,":-moz-$1")]}),_(e,{props:[u(t,/:(plac\w+)/,N+"input-$1")]})],n)}return""}))}}];const ie=function(e){var t=e.key;if("css"===t){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var i,a,o=e.stylisPlugins||ne,s={},l=[];i=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),r=1;r<t.length;r++)s[t[r]]=!0;l.push(e)}));var u,c,h,d,p=[q,(d=function(e){u.insert(e)},function(e){e.root||(e=e.return)&&d(e)})],m=(c=[te,re].concat(o,p),h=f(c),function(e,t,r,n){for(var i="",a=0;a<h;a++)i+=c[a](e,t,r,n)||"";return i});a=function(e,t,r,n){u=r,W(X(e?e+"{"+t.styles+"}":t.styles),m),n&&(g.inserted[t.name]=!0)};var g={key:t,sheet:new n({key:t,container:i,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:a};return g.sheet.hydrate(l),g};function ae(){return ae=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ae.apply(this,arguments)}const oe=function(e){var t=new WeakMap;return function(r){if(t.has(r))return t.get(r);var n=e(r);return t.set(r,n),n}},se=function(e){for(var t,r=0,n=0,i=e.length;i>=4;++n,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(n)|(255&e.charCodeAt(++n))<<8|(255&e.charCodeAt(++n))<<16|(255&e.charCodeAt(++n))<<24))+(59797*(t>>>16)<<16),r=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&r)+(59797*(r>>>16)<<16);switch(i){case 3:r^=(255&e.charCodeAt(n+2))<<16;case 2:r^=(255&e.charCodeAt(n+1))<<8;case 1:r=1540483477*(65535&(r^=255&e.charCodeAt(n)))+(59797*(r>>>16)<<16)}return(((r=1540483477*(65535&(r^=r>>>13))+(59797*(r>>>16)<<16))^r>>>15)>>>0).toString(36)},le={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},ue=function(e){var t=Object.create(null);return function(r){return void 0===t[r]&&(t[r]=e(r)),t[r]}};var ce=/[A-Z]|^ms/g,he=/_EMO_([^_]+?)_([^]*?)_EMO_/g,de=function(e){return 45===e.charCodeAt(1)},pe=function(e){return null!=e&&"boolean"!=typeof e},fe=ue((function(e){return de(e)?e:e.replace(ce,"-$&").toLowerCase()})),me=function(e,t){switch(e){case"animation":case"animationName":if("string"==typeof t)return t.replace(he,(function(e,t,r){return ve={name:t,styles:r,next:ve},t}))}return 1===le[e]||de(e)||"number"!=typeof t||0===t?t:t+"px"};function ge(e,t,r){if(null==r)return"";if(void 0!==r.__emotion_styles)return r;switch(typeof r){case"boolean":return"";case"object":if(1===r.anim)return ve={name:r.name,styles:r.styles,next:ve},r.name;if(void 0!==r.styles){var n=r.next;if(void 0!==n)for(;void 0!==n;)ve={name:n.name,styles:n.styles,next:ve},n=n.next;return r.styles+";"}return function(e,t,r){var n="";if(Array.isArray(r))for(var i=0;i<r.length;i++)n+=ge(e,t,r[i])+";";else for(var a in r){var o=r[a];if("object"!=typeof o)null!=t&&void 0!==t[o]?n+=a+"{"+t[o]+"}":pe(o)&&(n+=fe(a)+":"+me(a,o)+";");else if(!Array.isArray(o)||"string"!=typeof o[0]||null!=t&&void 0!==t[o[0]]){var s=ge(e,t,o);switch(a){case"animation":case"animationName":n+=fe(a)+":"+s+";";break;default:n+=a+"{"+s+"}"}}else for(var l=0;l<o.length;l++)pe(o[l])&&(n+=fe(a)+":"+me(a,o[l])+";")}return n}(e,t,r);case"function":if(void 0!==e){var i=ve,a=r(e);return ve=i,ge(e,t,a)}}if(null==t)return r;var o=t[r];return void 0!==o?o:r}var ve,ye=/label:\s*([^\s;\n{]+)\s*(;|$)/g,xe=function(e,t,r){if(1===e.length&&"object"==typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var n=!0,i="";ve=void 0;var a=e[0];null==a||void 0===a.raw?(n=!1,i+=ge(r,t,a)):i+=a[0];for(var o=1;o<e.length;o++)i+=ge(r,t,e[o]),n&&(i+=a[o]);ye.lastIndex=0;for(var s,l="";null!==(s=ye.exec(i));)l+="-"+s[1];return{name:se(i)+l,styles:i,next:ve}},be=(0,e.createContext)("undefined"!=typeof HTMLElement?ie({key:"css"}):null);be.Provider;var we=function(t){return(0,e.forwardRef)((function(r,n){var i=(0,e.useContext)(be);return t(r,i,n)}))},Se=(0,e.createContext)({}),_e=oe((function(e){return oe((function(t){return function(e,t){return"function"==typeof t?t(e):ae({},e,t)}(e,t)}))})),Ae=function(t){var r=(0,e.useContext)(Se);return t.theme!==r&&(r=_e(r)(t.theme)),(0,e.createElement)(Se.Provider,{value:r},t.children)};function Me(e,t,r){var n="";return r.split(" ").forEach((function(r){void 0!==e[r]?t.push(e[r]+";"):n+=r+" "})),n}t.useInsertionEffect&&t.useInsertionEffect,i(679);var Ee=function(e,t,r){var n=e.key+"-"+t.name;!1===r&&void 0===e.registered[n]&&(e.registered[n]=t.styles)},Ce=function(e,t,r){Ee(e,t,r);var n=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var i=t;do{e.insert(t===i?"."+n:"",i,e.sheet,!0),i=i.next}while(void 0!==i)}},Te=t.useInsertionEffect?t.useInsertionEffect:e.useLayoutEffect,De=we((function(t,r){var n=t.styles,i=xe([n],void 0,(0,e.useContext)(Se)),a=(0,e.useRef)();return Te((function(){var e=r.key+"-global",t=new r.sheet.constructor({key:e,nonce:r.sheet.nonce,container:r.sheet.container,speedy:r.sheet.isSpeedy}),n=!1,o=document.querySelector('style[data-emotion="'+e+" "+i.name+'"]');return r.sheet.tags.length&&(t.before=r.sheet.tags[0]),null!==o&&(n=!0,o.setAttribute("data-emotion",e),t.hydrate([o])),a.current=[t,n],function(){t.flush()}}),[r]),Te((function(){var e=a.current,t=e[0];if(e[1])e[1]=!1;else{if(void 0!==i.next&&Ce(r,i.next,!0),t.tags.length){var n=t.tags[t.tags.length-1].nextElementSibling;t.before=n,t.flush()}r.insert("",i,t,!1)}}),[r,i.name]),null}));function Le(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return xe(t)}var Pe=function(){var e=Le.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},Re=function(){return e.createElement(De,{styles:'\n      html {\n        line-height: 1.5;\n        -webkit-text-size-adjust: 100%;\n        font-family: system-ui, sans-serif;\n        -webkit-font-smoothing: antialiased;\n        text-rendering: optimizeLegibility;\n        -moz-osx-font-smoothing: grayscale;\n        touch-action: manipulation;\n      }\n\n      body {\n        position: relative;\n        min-height: 100%;\n        font-feature-settings: \'kern\';\n      }\n\n      *,\n      *::before,\n      *::after {\n        border-width: 0;\n        border-style: solid;\n        box-sizing: border-box;\n      }\n\n      main {\n        display: block;\n      }\n\n      hr {\n        border-top-width: 1px;\n        box-sizing: content-box;\n        height: 0;\n        overflow: visible;\n      }\n\n      pre,\n      code,\n      kbd,\n      samp {\n        font-family: SFMono-Regular,  Menlo, Monaco, Consolas, monospace;\n        font-size: 1em;\n      }\n\n      a {\n        background-color: transparent;\n        color: inherit;\n        text-decoration: inherit;\n      }\n\n      abbr[title] {\n        border-bottom: none;\n        text-decoration: underline;\n        -webkit-text-decoration: underline dotted;\n        text-decoration: underline dotted;\n      }\n\n      b,\n      strong {\n        font-weight: bold;\n      }\n\n      small {\n        font-size: 80%;\n      }\n\n      sub,\n      sup {\n        font-size: 75%;\n        line-height: 0;\n        position: relative;\n        vertical-align: baseline;\n      }\n\n      sub {\n        bottom: -0.25em;\n      }\n\n      sup {\n        top: -0.5em;\n      }\n\n      img {\n        border-style: none;\n      }\n\n      button,\n      input,\n      optgroup,\n      select,\n      textarea {\n        font-family: inherit;\n        font-size: 100%;\n        line-height: 1.15;\n        margin: 0;\n      }\n\n      button,\n      input {\n        overflow: visible;\n      }\n\n      button,\n      select {\n        text-transform: none;\n      }\n\n      button::-moz-focus-inner,\n      [type="button"]::-moz-focus-inner,\n      [type="reset"]::-moz-focus-inner,\n      [type="submit"]::-moz-focus-inner {\n        border-style: none;\n        padding: 0;\n      }\n\n      fieldset {\n        padding: 0.35em 0.75em 0.625em;\n      }\n\n      legend {\n        box-sizing: border-box;\n        color: inherit;\n        display: table;\n        max-width: 100%;\n        padding: 0;\n        white-space: normal;\n      }\n\n      progress {\n        vertical-align: baseline;\n      }\n\n      textarea {\n        overflow: auto;\n      }\n\n      [type="checkbox"],\n      [type="radio"] {\n        box-sizing: border-box;\n        padding: 0;\n      }\n\n      [type="number"]::-webkit-inner-spin-button,\n      [type="number"]::-webkit-outer-spin-button {\n        -webkit-appearance: none !important;\n      }\n\n      input[type="number"] {\n        -moz-appearance: textfield;\n      }\n\n      [type="search"] {\n        -webkit-appearance: textfield;\n        outline-offset: -2px;\n      }\n\n      [type="search"]::-webkit-search-decoration {\n        -webkit-appearance: none !important;\n      }\n\n      ::-webkit-file-upload-button {\n        -webkit-appearance: button;\n        font: inherit;\n      }\n\n      details {\n        display: block;\n      }\n\n      summary {\n        display: list-item;\n      }\n\n      template {\n        display: none;\n      }\n\n      [hidden] {\n        display: none !important;\n      }\n\n      body,\n      blockquote,\n      dl,\n      dd,\n      h1,\n      h2,\n      h3,\n      h4,\n      h5,\n      h6,\n      hr,\n      figure,\n      p,\n      pre {\n        margin: 0;\n      }\n\n      button {\n        background: transparent;\n        padding: 0;\n      }\n\n      fieldset {\n        margin: 0;\n        padding: 0;\n      }\n\n      ol,\n      ul {\n        margin: 0;\n        padding: 0;\n      }\n\n      textarea {\n        resize: vertical;\n      }\n\n      button,\n      [role="button"] {\n        cursor: pointer;\n      }\n\n      button::-moz-focus-inner {\n        border: 0 !important;\n      }\n\n      table {\n        border-collapse: collapse;\n      }\n\n      h1,\n      h2,\n      h3,\n      h4,\n      h5,\n      h6 {\n        font-size: inherit;\n        font-weight: inherit;\n      }\n\n      button,\n      input,\n      optgroup,\n      select,\n      textarea {\n        padding: 0;\n        line-height: inherit;\n        color: inherit;\n      }\n\n      img,\n      svg,\n      video,\n      canvas,\n      audio,\n      iframe,\n      embed,\n      object {\n        display: block;\n      }\n\n      img,\n      video {\n        max-width: 100%;\n        height: auto;\n      }\n\n      [data-js-focus-visible] :focus:not([data-focus-visible-added]) {\n        outline: none;\n        box-shadow: none;\n      }\n\n      select::-ms-expand {\n        display: none;\n      }\n    '})},Oe=i(554),ke=i.n(Oe);function Ie(e){return"number"==typeof e}function Be(e){return Array.isArray(e)}function ze(e){return"function"==typeof e}function Ne(e){var t=typeof e;return null!=e&&("object"===t||"function"===t)&&!Be(e)}function Fe(e){return null==e}function Ue(e){return"[object String]"===Object.prototype.toString.call(e)}function je(e){return/^var\(--.+\)$/.test(e)}function He(e,t){var r={};return Object.keys(e).forEach((function(n){t.includes(n)||(r[n]=e[n])})),r}var Ve,Ge,We=(Ve=function(e,t,r,n){var i="string"==typeof t?t.split("."):[t];for(n=0;n<i.length&&e;n+=1)e=e[i[n]];return void 0===e?r:e},Ge=new WeakMap,function(e,t,r,n){if(void 0===e)return Ve(e,t,r);Ge.has(e)||Ge.set(e,new Map);var i=Ge.get(e);if(i.has(t))return i.get(t);var a=Ve(e,t,r,n);return i.set(t,a),a});function qe(e,t){var r={};return Object.keys(e).forEach((function(n){var i=e[n];t(i,n,e)&&(r[n]=i)})),r}var Ye=function(e){return qe(e,(function(e){return null!=e}))},Xe=function(e){return Object.keys(e)},Qe=function(e){return e.reduce((function(e,t){var r=t[0],n=t[1];return e[r]=n,e}),{})};function Je(e){if(null==e)return e;var t=function(e){var t=parseFloat(e.toString()),r=e.toString().replace(String(t),"");return{unitless:!r,value:t,unit:r}}(e);return t.unitless||Ie(e)?e+"px":e}var Ze=function(e,t){return parseInt(e[1],10)>parseInt(t[1],10)?1:-1},Ke=function(e){return Qe(Object.entries(e).sort(Ze))};function $e(e){var t=Ke(e);return Object.assign(Object.values(t),t)}function et(e,t){var r=["@media screen"];return e&&r.push("and","(min-width: "+Je(e)+")"),t&&r.push("and","(max-width: "+Je(t)+")"),r.join(" ")}function tt(e){var t;if(!e)return null;e.base=null!=(t=e.base)?t:"0px";var r=$e(e),n=Object.entries(e).sort(Ze).map((function(e,t,r){var n,i=e[0],a=e[1],o=(null!=(n=r[t+1])?n:[])[1];return o=parseFloat(o)>0?function(e){var t;if(!e)return e;var r=(e=null!=(t=Je(e))?t:e).endsWith("px")?-1:-.0635;return Ie(e)?""+(e+r):e.replace(/([0-9]+\.?[0-9]*)/,(function(e){return""+(parseFloat(e)+r)}))}(o):void 0,{breakpoint:i,minW:a,maxW:o,maxWQuery:et(null,o),minWQuery:et(a),minMaxQuery:et(a,o)}})),i=function(e){var t=Object.keys(Ke(e));return new Set(t)}(e),a=Array.from(i.values());return{keys:i,normalized:r,isResponsive:function(e){var t=Object.keys(e);return t.length>0&&t.every((function(e){return i.has(e)}))},asObject:Ke(e),asArray:$e(e),details:n,media:[null].concat(r.map((function(e){return et(e)})).slice(1)),toArrayValue:function(e){if(!Ne(e))throw new Error("toArrayValue: value must be an object");for(var t=a.map((function(t){var r;return null!=(r=e[t])?r:null}));null===(n=void 0,(n=null==(r=t)?0:r.length)?r[n-1]:void 0);)t.pop();var r,n;return t},toObjectValue:function(e){if(!Array.isArray(e))throw new Error("toObjectValue: value must be an array");return e.reduce((function(e,t,r){var n=a[r];return null!=n&&null!=t&&(e[n]=t),e}),{})}}}var rt=!("undefined"==typeof window||!window.document||!window.document.createElement),nt=function(e){return e?"":void 0},it=function(e){return!!e||void 0},at=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(Boolean).join(" ")};function ot(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return ze(e)?e.apply(void 0,r):e}function st(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){t.some((function(t){return null==t||t(e),null==e?void 0:e.defaultPrevented}))}}function lt(e){var t;return function(){if(e){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];t=e.apply(this,n),e=null}return t}}["input:not([disabled])","select:not([disabled])","textarea:not([disabled])","embed","iframe","object","a[href]","area[href]","button:not([disabled])","[tabindex]","audio[controls]","video[controls]","*[tabindex]:not([aria-disabled])","*[contenteditable]"].join();var ut=function(){},ct=lt((function(e){return function(){e.condition,e.message}}));function ht(e,t){return void 0===t&&(t=1/0),(Ne(e)||Array.isArray(e))&&t?Object.entries(e).reduce((function(e,r){var n=r[0],i=r[1];return Ne(i)||Be(i)?Object.entries(ht(i,t-1)).forEach((function(t){var r=t[0],i=t[1];e[n+"."+r]=i})):e[n]=i,e}),{}):e}lt((function(e){return function(){e.condition,e.message}})),Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER;var dt=Object.freeze(["base","sm","md","lg","xl","2xl"]);function pt(e,t){return Be(e)?e.map((function(e){return null===e?null:t(e)})):Ne(e)?Xe(e).reduce((function(r,n){return r[n]=t(e[n]),r}),{}):null!=e?t(e):null}function ft(e,t){void 0===t&&(t=dt);var r={};return e.forEach((function(e,n){var i=t[n];null!=e&&(r[i]=e)})),r}function mt(e,t){if(null!=e)if(ze(e))e(t);else try{e.current=t}catch(r){throw new Error("Cannot assign value '"+t+"' to ref '"+e+"'")}}function gt(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){t.forEach((function(t){return mt(t,e)}))}}function vt(t){void 0===t&&(t={});var r=t,n=r.strict,i=void 0===n||n,a=r.errorMessage,o=void 0===a?"useContext: `context` is undefined. Seems you forgot to wrap component within the Provider":a,s=r.name,l=e.createContext(void 0);return l.displayName=s,[l.Provider,function t(){var r=e.useContext(l);if(!r&&i){var n=new Error(o);throw n.name="ContextError",null==Error.captureStackTrace||Error.captureStackTrace(n,t),n}return r},l]}i(640);var yt={current:1},xt=e.createContext(yt),bt=e.memo((function(t){var r=t.children;return e.createElement(xt.Provider,{value:{current:1}},r)}));function wt(){var t=e.useRef(!1),r=e.useState(0),n=r[0],i=r[1];return function(t,r){void 0===r&&(r=[]),e.useEffect((function(){return function(){return t()}}),r)}((function(){t.current=!0})),e.useCallback((function(){t.current||i(n+1)}),[n])}function St(e,t){if(null!=e)if("function"!=typeof e)try{e.current=t}catch(r){throw new Error("Cannot assign value '"+t+"' to ref '"+e+"'")}else e(t)}function _t(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e.useMemo((function(){return r.every((function(e){return null==e}))?null:function(e){r.forEach((function(t){t&&St(t,e)}))}}),r)}var At=rt?e.useLayoutEffect:e.useEffect,Mt=vt({strict:!1,name:"PortalManagerContext"}),Et=Mt[0],Ct=Mt[1];function Tt(t){var r=t.children,n=t.zIndex;return e.createElement(Et,{value:{zIndex:n}},r)}function Dt(){return Dt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Dt.apply(this,arguments)}var Lt=["containerRef"],Pt=vt({strict:!1,name:"PortalContext"}),Rt=Pt[0],Ot=Pt[1],kt="chakra-portal",It=function(t){return e.createElement("div",{className:"chakra-portal-zIndex",style:{position:"absolute",zIndex:t.zIndex,top:0,left:0,right:0}},t.children)},Bt=function(t){var n=t.appendToParentPortal,i=t.children,a=e.useRef(null),o=e.useRef(null),s=wt(),l=Ot(),u=Ct();At((function(){if(a.current){var e=a.current.ownerDocument,t=n&&null!=l?l:e.body;if(t){o.current=e.createElement("div"),o.current.className=kt,t.appendChild(o.current),s();var r=o.current;return function(){t.contains(r)&&t.removeChild(r)}}}}),[]);var c=null!=u&&u.zIndex?e.createElement(It,{zIndex:null==u?void 0:u.zIndex},i):i;return o.current?(0,r.createPortal)(e.createElement(Rt,{value:o.current},c),o.current):e.createElement("span",{ref:a})},zt=function(t){var n=t.children,i=t.containerRef,a=t.appendToParentPortal,o=i.current,s=null!=o?o:rt?document.body:void 0,l=e.useMemo((function(){var e=null==o?void 0:o.ownerDocument.createElement("div");return e&&(e.className=kt),e}),[o]),u=wt();return At((function(){u()}),[]),At((function(){if(l&&s)return s.appendChild(l),function(){s.removeChild(l)}}),[l,s]),s&&l?(0,r.createPortal)(e.createElement(Rt,{value:a?l:null},n),l):null};function Nt(t){var r=t.containerRef,n=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(t,Lt);return r?e.createElement(zt,Dt({containerRef:r},n)):e.createElement(Bt,n)}Nt.defaultProps={appendToParentPortal:!0},Nt.className=kt,Nt.selector=".chakra-portal";var Ft={body:{classList:{add:function(){},remove:function(){}}},addEventListener:function(){},removeEventListener:function(){},activeElement:{blur:function(){},nodeName:""},querySelector:function(){return null},querySelectorAll:function(){return[]},getElementById:function(){return null},createEvent:function(){return{initEvent:function(){}}},createElement:function(){return{children:[],childNodes:[],style:{},setAttribute:function(){},getElementsByTagName:function(){return[]}}}},Ut=function(){},jt={document:Ft,navigator:{userAgent:""},CustomEvent:function(){return this},addEventListener:Ut,removeEventListener:Ut,getComputedStyle:function(){return{getPropertyValue:function(){return""}}},matchMedia:function(){return{matches:!1,addListener:Ut,removeListener:Ut}},requestAnimationFrame:function(e){return"undefined"==typeof setTimeout?(e(),null):setTimeout(e,0)},cancelAnimationFrame:function(e){"undefined"!=typeof setTimeout&&clearTimeout(e)},setTimeout:function(){return 0},clearTimeout:Ut,setInterval:function(){return 0},clearInterval:Ut},Ht=rt?{window,document}:{window:jt,document:Ft},Vt=(0,e.createContext)(Ht);function Gt(){return(0,e.useContext)(Vt)}function Wt(t){var r=t.children,n=t.environment,i=(0,e.useState)(null),a=i[0],o=i[1],s=(0,e.useMemo)((function(){var e,t=null==a?void 0:a.ownerDocument,r=null==a?void 0:a.ownerDocument.defaultView;return null!=(e=null!=n?n:t?{document:t,window:r}:void 0)?e:Ht}),[a,n]),l=!a&&!n;return e.createElement(Vt.Provider,{value:s},r,l&&e.createElement("span",{ref:function(e){e&&o(e)}}))}var qt="chakra-ui-light",Yt="chakra-ui-dark",Xt={classList:{add:ut,remove:ut}};var Qt="(prefers-color-scheme: dark)";var Jt=function(){return document.documentElement.style.getPropertyValue("--chakra-ui-color-mode")||document.documentElement.dataset.theme},Zt=function(e){rt&&(document.documentElement.style.setProperty("--chakra-ui-color-mode",e),document.documentElement.setAttribute("data-theme",e))},Kt=function(){return"undefined"!=typeof Storage},$t="chakra-ui-color-mode",er={get:function(e){if(!Kt())return e;try{var t=localStorage.getItem($t);return null!=t?t:e}catch(t){return e}},set:function(e){if(Kt())try{localStorage.setItem($t,e)}catch(e){}},type:"localStorage"},tr=e.createContext({}),rr=function(){var t=e.useContext(tr);if(void 0===t)throw new Error("useColorMode must be used within a ColorModeProvider");return t};function nr(t){var r=t.value,n=t.children,i=t.options,a=i.useSystemColorMode,o=i.initialColorMode,s=t.colorModeManager,l=void 0===s?er:s,u="dark"===o?"dark":"light",c=e.useState("cookie"===l.type?l.get(u):u),h=c[0],d=c[1],p=Gt().document;e.useEffect((function(){if(rt&&"localStorage"===l.type){var e=(n=u,(null!=(i=function(e){var t=null==window.matchMedia?void 0:window.matchMedia("(prefers-color-scheme: dark)");if(t)return!!t.media===t.matches}())?i:"dark"===n)?"dark":"light");if(a)return d(e);var t=Jt(),r=l.get();return d(t||(r||("system"===o?e:u)))}var n,i}),[l,a,u,o]),e.useEffect((function(){var e="dark"===h;(function(e,t){var r=function(e){return rt?e.body:Xt}(t);r.classList.add(e?Yt:qt),r.classList.remove(e?qt:Yt)})(e,p),Zt(e?"dark":"light")}),[h,p]);var f=e.useCallback((function(e,t){if(void 0===t&&(t=!1),t){if(l.get()&&!a)return}else l.set(e);d(e)}),[l,a]),m=e.useCallback((function(){f("light"===h?"dark":"light")}),[h,f]);e.useEffect((function(){var e,t=a||"system"===o;return t&&(e=function(e){if(!("matchMedia"in window))return ut;var t=window.matchMedia(Qt),r=function(){e(t.matches?"dark":"light",!0)};return t.addEventListener("change",r),function(){t.removeEventListener("change",r)}}(f)),function(){e&&t&&e()}}),[f,a,o]);var g=e.useMemo((function(){return{colorMode:null!=r?r:h,toggleColorMode:r?ut:m,setColorMode:r?ut:f}}),[h,f,m,r]);return e.createElement(tr.Provider,{value:g},n)}function ir(e,t){return"dark"===rr().colorMode?t:e}function ar(){return ar=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ar.apply(this,arguments)}var or,sr;function lr(e){var t=e.scale,r=e.transform,n=e.compose;return function(e,i){var a,o=function(e,t){return function(r){var n=String(t),i=e?e+"."+n:n;return Ne(r.__cssMap)&&i in r.__cssMap?r.__cssMap[i].varRef:t}}(t,e)(i),s=null!=(a=null==r?void 0:r(o,i))?a:o;return n&&(s=n(s,i)),s}}function ur(e,t){return function(r){var n={property:r,scale:e};return n.transform=lr({scale:e,transform:t}),n}}var cr=["rotate(var(--chakra-rotate, 0))","scaleX(var(--chakra-scale-x, 1))","scaleY(var(--chakra-scale-y, 1))","skewX(var(--chakra-skew-x, 0))","skewY(var(--chakra-skew-y, 0))"],hr={"--chakra-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-sepia":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-drop-shadow":"var(--chakra-empty,/*!*/ /*!*/)",filter:["var(--chakra-blur)","var(--chakra-brightness)","var(--chakra-contrast)","var(--chakra-grayscale)","var(--chakra-hue-rotate)","var(--chakra-invert)","var(--chakra-saturate)","var(--chakra-sepia)","var(--chakra-drop-shadow)"].join(" ")},dr={backdropFilter:["var(--chakra-backdrop-blur)","var(--chakra-backdrop-brightness)","var(--chakra-backdrop-contrast)","var(--chakra-backdrop-grayscale)","var(--chakra-backdrop-hue-rotate)","var(--chakra-backdrop-invert)","var(--chakra-backdrop-opacity)","var(--chakra-backdrop-saturate)","var(--chakra-backdrop-sepia)"].join(" "),"--chakra-backdrop-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-opacity":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-sepia":"var(--chakra-empty,/*!*/ /*!*/)"},pr={"row-reverse":{space:"--chakra-space-x-reverse",divide:"--chakra-divide-x-reverse"},"column-reverse":{space:"--chakra-space-y-reverse",divide:"--chakra-divide-y-reverse"}},fr="& > :not(style) ~ :not(style)",mr=((or={})[fr]={marginInlineStart:"calc(var(--chakra-space-x) * calc(1 - var(--chakra-space-x-reverse)))",marginInlineEnd:"calc(var(--chakra-space-x) * var(--chakra-space-x-reverse))"},or),gr=((sr={})[fr]={marginTop:"calc(var(--chakra-space-y) * calc(1 - var(--chakra-space-y-reverse)))",marginBottom:"calc(var(--chakra-space-y) * var(--chakra-space-y-reverse))"},sr);function vr(e,t){return vr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},vr(e,t)}function yr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vr(e,t)}function xr(){xr=function(e,t){return new r(e,void 0,t)};var e=RegExp.prototype,t=new WeakMap;function r(e,n,i){var a=new RegExp(e,n);return t.set(a,i||t.get(e)),vr(a,r.prototype)}function n(e,r){var n=t.get(r);return Object.keys(n).reduce((function(t,r){return t[r]=e[n[r]],t}),Object.create(null))}return yr(r,RegExp),r.prototype.exec=function(t){var r=e.exec.call(this,t);return r&&(r.groups=n(r,this)),r},r.prototype[Symbol.replace]=function(r,i){if("string"==typeof i){var a=t.get(this);return e[Symbol.replace].call(this,r,i.replace(/\$<([^>]+)>/g,(function(e,t){return"$"+a[t]})))}if("function"==typeof i){var o=this;return e[Symbol.replace].call(this,r,(function(){var e=arguments;return"object"!=typeof e[e.length-1]&&(e=[].slice.call(e)).push(n(e,o)),i.apply(this,e)}))}return e[Symbol.replace].call(this,r,i)},xr.apply(this,arguments)}var br={"to-t":"to top","to-tr":"to top right","to-r":"to right","to-br":"to bottom right","to-b":"to bottom","to-bl":"to bottom left","to-l":"to left","to-tl":"to top left"},wr=new Set(Object.values(br)),Sr=new Set(["none","-moz-initial","inherit","initial","revert","unset"]),_r=function(e){return e.trim()},Ar=function(e){return Ue(e)&&e.includes("(")&&e.includes(")")},Mr=function(e){return function(t){return e+"("+t+")"}},Er={filter:function(e){return"auto"!==e?e:hr},backdropFilter:function(e){return"auto"!==e?e:dr},ring:function(e){return function(e){return{"--chakra-ring-offset-shadow":"var(--chakra-ring-inset) 0 0 0 var(--chakra-ring-offset-width) var(--chakra-ring-offset-color)","--chakra-ring-shadow":"var(--chakra-ring-inset) 0 0 0 calc(var(--chakra-ring-width) + var(--chakra-ring-offset-width)) var(--chakra-ring-color)","--chakra-ring-width":e,boxShadow:["var(--chakra-ring-offset-shadow)","var(--chakra-ring-shadow)","var(--chakra-shadow, 0 0 #0000)"].join(", ")}}(Er.px(e))},bgClip:function(e){return"text"===e?{color:"transparent",backgroundClip:"text"}:{backgroundClip:e}},transform:function(e){return"auto"===e?["translateX(var(--chakra-translate-x, 0))","translateY(var(--chakra-translate-y, 0))"].concat(cr).join(" "):"auto-gpu"===e?["translate3d(var(--chakra-translate-x, 0), var(--chakra-translate-y, 0), 0)"].concat(cr).join(" "):e},px:function(e){if(null==e)return e;var t=function(e){var t=parseFloat(e.toString()),r=e.toString().replace(String(t),"");return{unitless:!r,value:t,unit:r}}(e);return t.unitless||Ie(e)?e+"px":e},fraction:function(e){return!Ie(e)||e>1?e:100*e+"%"},float:function(e,t){return"rtl"===t.direction?{left:"right",right:"left"}[e]:e},degree:function(e){if(je(e)||null==e)return e;var t=Ue(e)&&!e.endsWith("deg");return Ie(e)||t?e+"deg":e},gradient:function(e,t){return function(e,t){var r,n;if(null==e||Sr.has(e))return e;var i=null!=(r=null==(n=xr(/(^[\x2DA-Za-z]+)\(((.*))\)/g,{type:1,values:2}).exec(e))?void 0:n.groups)?r:{},a=i.type,o=i.values;if(!a||!o)return e;var s=a.includes("-gradient")?a:a+"-gradient",l=o.split(",").map(_r).filter(Boolean),u=l[0],c=l.slice(1);if(0===(null==c?void 0:c.length))return e;var h=u in br?br[u]:u;c.unshift(h);var d=c.map((function(e){if(wr.has(e))return e;var r=e.indexOf(" "),n=-1!==r?[e.substr(0,r),e.substr(r+1)]:[e],i=n[0],a=n[1],o=Ar(a)?a:a&&a.split(" "),s="colors."+i,l=s in t.__cssMap?t.__cssMap[s].varRef:i;return o?[l].concat(Array.isArray(o)?o:[o]).join(" "):l}));return s+"("+d.join(", ")+")"}(e,null!=t?t:{})},blur:Mr("blur"),opacity:Mr("opacity"),brightness:Mr("brightness"),contrast:Mr("contrast"),dropShadow:Mr("drop-shadow"),grayscale:Mr("grayscale"),hueRotate:Mr("hue-rotate"),invert:Mr("invert"),saturate:Mr("saturate"),sepia:Mr("sepia"),bgImage:function(e){return null==e||Ar(e)||Sr.has(e)?e:"url("+e+")"},outline:function(e){var t="0"===String(e)||"none"===String(e);return null!==e&&t?{outline:"2px solid transparent",outlineOffset:"2px"}:{outline:e}},flexDirection:function(e){var t,r=null!=(t=pr[e])?t:{},n=r.space,i=r.divide,a={flexDirection:e};return n&&(a[n]=1),i&&(a[i]=1),a}},Cr={borderWidths:ur("borderWidths"),borderStyles:ur("borderStyles"),colors:ur("colors"),borders:ur("borders"),radii:ur("radii",Er.px),space:ur("space",Er.px),spaceT:ur("space",Er.px),degreeT:function(e){return{property:e,transform:Er.degree}},prop:function(e,t,r){return ar({property:e,scale:t},t&&{transform:lr({scale:t,transform:r})})},propT:function(e,t){return{property:e,transform:t}},sizes:ur("sizes",Er.px),sizesT:ur("sizes",Er.fraction),shadows:ur("shadows"),logical:function(e){var t,r,n,i=e.property,a=e.scale,o=e.transform;return{scale:a,property:(t=i,r=t.rtl,n=t.ltr,function(e){return"rtl"===e.direction?r:n}),transform:a?lr({scale:a,compose:o}):o}},blur:ur("blur",Er.blur)},Tr={background:Cr.colors("background"),backgroundColor:Cr.colors("backgroundColor"),backgroundImage:Cr.propT("backgroundImage",Er.bgImage),backgroundSize:!0,backgroundPosition:!0,backgroundRepeat:!0,backgroundAttachment:!0,backgroundClip:{transform:Er.bgClip},bgSize:Cr.prop("backgroundSize"),bgPosition:Cr.prop("backgroundPosition"),bg:Cr.colors("background"),bgColor:Cr.colors("backgroundColor"),bgPos:Cr.prop("backgroundPosition"),bgRepeat:Cr.prop("backgroundRepeat"),bgAttachment:Cr.prop("backgroundAttachment"),bgGradient:Cr.propT("backgroundImage",Er.gradient),bgClip:{transform:Er.bgClip}};Object.assign(Tr,{bgImage:Tr.backgroundImage,bgImg:Tr.backgroundImage});var Dr={border:Cr.borders("border"),borderWidth:Cr.borderWidths("borderWidth"),borderStyle:Cr.borderStyles("borderStyle"),borderColor:Cr.colors("borderColor"),borderRadius:Cr.radii("borderRadius"),borderTop:Cr.borders("borderTop"),borderBlockStart:Cr.borders("borderBlockStart"),borderTopLeftRadius:Cr.radii("borderTopLeftRadius"),borderStartStartRadius:Cr.logical({scale:"radii",property:{ltr:"borderTopLeftRadius",rtl:"borderTopRightRadius"}}),borderEndStartRadius:Cr.logical({scale:"radii",property:{ltr:"borderBottomLeftRadius",rtl:"borderBottomRightRadius"}}),borderTopRightRadius:Cr.radii("borderTopRightRadius"),borderStartEndRadius:Cr.logical({scale:"radii",property:{ltr:"borderTopRightRadius",rtl:"borderTopLeftRadius"}}),borderEndEndRadius:Cr.logical({scale:"radii",property:{ltr:"borderBottomRightRadius",rtl:"borderBottomLeftRadius"}}),borderRight:Cr.borders("borderRight"),borderInlineEnd:Cr.borders("borderInlineEnd"),borderBottom:Cr.borders("borderBottom"),borderBlockEnd:Cr.borders("borderBlockEnd"),borderBottomLeftRadius:Cr.radii("borderBottomLeftRadius"),borderBottomRightRadius:Cr.radii("borderBottomRightRadius"),borderLeft:Cr.borders("borderLeft"),borderInlineStart:{property:"borderInlineStart",scale:"borders"},borderInlineStartRadius:Cr.logical({scale:"radii",property:{ltr:["borderTopLeftRadius","borderBottomLeftRadius"],rtl:["borderTopRightRadius","borderBottomRightRadius"]}}),borderInlineEndRadius:Cr.logical({scale:"radii",property:{ltr:["borderTopRightRadius","borderBottomRightRadius"],rtl:["borderTopLeftRadius","borderBottomLeftRadius"]}}),borderX:Cr.borders(["borderLeft","borderRight"]),borderInline:Cr.borders("borderInline"),borderY:Cr.borders(["borderTop","borderBottom"]),borderBlock:Cr.borders("borderBlock"),borderTopWidth:Cr.borderWidths("borderTopWidth"),borderBlockStartWidth:Cr.borderWidths("borderBlockStartWidth"),borderTopColor:Cr.colors("borderTopColor"),borderBlockStartColor:Cr.colors("borderBlockStartColor"),borderTopStyle:Cr.borderStyles("borderTopStyle"),borderBlockStartStyle:Cr.borderStyles("borderBlockStartStyle"),borderBottomWidth:Cr.borderWidths("borderBottomWidth"),borderBlockEndWidth:Cr.borderWidths("borderBlockEndWidth"),borderBottomColor:Cr.colors("borderBottomColor"),borderBlockEndColor:Cr.colors("borderBlockEndColor"),borderBottomStyle:Cr.borderStyles("borderBottomStyle"),borderBlockEndStyle:Cr.borderStyles("borderBlockEndStyle"),borderLeftWidth:Cr.borderWidths("borderLeftWidth"),borderInlineStartWidth:Cr.borderWidths("borderInlineStartWidth"),borderLeftColor:Cr.colors("borderLeftColor"),borderInlineStartColor:Cr.colors("borderInlineStartColor"),borderLeftStyle:Cr.borderStyles("borderLeftStyle"),borderInlineStartStyle:Cr.borderStyles("borderInlineStartStyle"),borderRightWidth:Cr.borderWidths("borderRightWidth"),borderInlineEndWidth:Cr.borderWidths("borderInlineEndWidth"),borderRightColor:Cr.colors("borderRightColor"),borderInlineEndColor:Cr.colors("borderInlineEndColor"),borderRightStyle:Cr.borderStyles("borderRightStyle"),borderInlineEndStyle:Cr.borderStyles("borderInlineEndStyle"),borderTopRadius:Cr.radii(["borderTopLeftRadius","borderTopRightRadius"]),borderBottomRadius:Cr.radii(["borderBottomLeftRadius","borderBottomRightRadius"]),borderLeftRadius:Cr.radii(["borderTopLeftRadius","borderBottomLeftRadius"]),borderRightRadius:Cr.radii(["borderTopRightRadius","borderBottomRightRadius"])};Object.assign(Dr,{rounded:Dr.borderRadius,roundedTop:Dr.borderTopRadius,roundedTopLeft:Dr.borderTopLeftRadius,roundedTopRight:Dr.borderTopRightRadius,roundedTopStart:Dr.borderStartStartRadius,roundedTopEnd:Dr.borderStartEndRadius,roundedBottom:Dr.borderBottomRadius,roundedBottomLeft:Dr.borderBottomLeftRadius,roundedBottomRight:Dr.borderBottomRightRadius,roundedBottomStart:Dr.borderEndStartRadius,roundedBottomEnd:Dr.borderEndEndRadius,roundedLeft:Dr.borderLeftRadius,roundedRight:Dr.borderRightRadius,roundedStart:Dr.borderInlineStartRadius,roundedEnd:Dr.borderInlineEndRadius,borderStart:Dr.borderInlineStart,borderEnd:Dr.borderInlineEnd,borderTopStartRadius:Dr.borderStartStartRadius,borderTopEndRadius:Dr.borderStartEndRadius,borderBottomStartRadius:Dr.borderEndStartRadius,borderBottomEndRadius:Dr.borderEndEndRadius,borderStartRadius:Dr.borderInlineStartRadius,borderEndRadius:Dr.borderInlineEndRadius,borderStartWidth:Dr.borderInlineStartWidth,borderEndWidth:Dr.borderInlineEndWidth,borderStartColor:Dr.borderInlineStartColor,borderEndColor:Dr.borderInlineEndColor,borderStartStyle:Dr.borderInlineStartStyle,borderEndStyle:Dr.borderInlineEndStyle});var Lr={color:Cr.colors("color"),textColor:Cr.colors("color"),fill:Cr.colors("fill"),stroke:Cr.colors("stroke")},Pr={boxShadow:Cr.shadows("boxShadow"),mixBlendMode:!0,blendMode:Cr.prop("mixBlendMode"),backgroundBlendMode:!0,bgBlendMode:Cr.prop("backgroundBlendMode"),opacity:!0};Object.assign(Pr,{shadow:Pr.boxShadow});var Rr={filter:{transform:Er.filter},blur:Cr.blur("--chakra-blur"),brightness:Cr.propT("--chakra-brightness",Er.brightness),contrast:Cr.propT("--chakra-contrast",Er.contrast),hueRotate:Cr.degreeT("--chakra-hue-rotate"),invert:Cr.propT("--chakra-invert",Er.invert),saturate:Cr.propT("--chakra-saturate",Er.saturate),dropShadow:Cr.propT("--chakra-drop-shadow",Er.dropShadow),backdropFilter:{transform:Er.backdropFilter},backdropBlur:Cr.blur("--chakra-backdrop-blur"),backdropBrightness:Cr.propT("--chakra-backdrop-brightness",Er.brightness),backdropContrast:Cr.propT("--chakra-backdrop-contrast",Er.contrast),backdropHueRotate:Cr.degreeT("--chakra-backdrop-hue-rotate"),backdropInvert:Cr.propT("--chakra-backdrop-invert",Er.invert),backdropSaturate:Cr.propT("--chakra-backdrop-saturate",Er.saturate)},Or={alignItems:!0,alignContent:!0,justifyItems:!0,justifyContent:!0,flexWrap:!0,flexDirection:{transform:Er.flexDirection},experimental_spaceX:{static:mr,transform:lr({scale:"space",transform:function(e){return null!==e?{"--chakra-space-x":e}:null}})},experimental_spaceY:{static:gr,transform:lr({scale:"space",transform:function(e){return null!=e?{"--chakra-space-y":e}:null}})},flex:!0,flexFlow:!0,flexGrow:!0,flexShrink:!0,flexBasis:Cr.sizes("flexBasis"),justifySelf:!0,alignSelf:!0,order:!0,placeItems:!0,placeContent:!0,placeSelf:!0,gap:Cr.space("gap"),rowGap:Cr.space("rowGap"),columnGap:Cr.space("columnGap")};Object.assign(Or,{flexDir:Or.flexDirection});var kr={gridGap:Cr.space("gridGap"),gridColumnGap:Cr.space("gridColumnGap"),gridRowGap:Cr.space("gridRowGap"),gridColumn:!0,gridRow:!0,gridAutoFlow:!0,gridAutoColumns:!0,gridColumnStart:!0,gridColumnEnd:!0,gridRowStart:!0,gridRowEnd:!0,gridAutoRows:!0,gridTemplate:!0,gridTemplateColumns:!0,gridTemplateRows:!0,gridTemplateAreas:!0,gridArea:!0},Ir={appearance:!0,cursor:!0,resize:!0,userSelect:!0,pointerEvents:!0,outline:{transform:Er.outline},outlineOffset:!0,outlineColor:Cr.colors("outlineColor")},Br={width:Cr.sizesT("width"),inlineSize:Cr.sizesT("inlineSize"),height:Cr.sizes("height"),blockSize:Cr.sizes("blockSize"),boxSize:Cr.sizes(["width","height"]),minWidth:Cr.sizes("minWidth"),minInlineSize:Cr.sizes("minInlineSize"),minHeight:Cr.sizes("minHeight"),minBlockSize:Cr.sizes("minBlockSize"),maxWidth:Cr.sizes("maxWidth"),maxInlineSize:Cr.sizes("maxInlineSize"),maxHeight:Cr.sizes("maxHeight"),maxBlockSize:Cr.sizes("maxBlockSize"),d:Cr.prop("display"),overflow:!0,overflowX:!0,overflowY:!0,overscrollBehavior:!0,overscrollBehaviorX:!0,overscrollBehaviorY:!0,display:!0,verticalAlign:!0,boxSizing:!0,boxDecorationBreak:!0,float:Cr.propT("float",Er.float),objectFit:!0,objectPosition:!0,visibility:!0,isolation:!0};Object.assign(Br,{w:Br.width,h:Br.height,minW:Br.minWidth,maxW:Br.maxWidth,minH:Br.minHeight,maxH:Br.maxHeight,overscroll:Br.overscrollBehavior,overscrollX:Br.overscrollBehaviorX,overscrollY:Br.overscrollBehaviorY});var zr={listStyleType:!0,listStylePosition:!0,listStylePos:Cr.prop("listStylePosition"),listStyleImage:!0,listStyleImg:Cr.prop("listStyleImage")},Nr={border:"0px",clip:"rect(0, 0, 0, 0)",width:"1px",height:"1px",margin:"-1px",padding:"0px",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"},Fr={position:"static",width:"auto",height:"auto",clip:"auto",padding:"0",margin:"0",overflow:"visible",whiteSpace:"normal"},Ur=function(e,t,r){var n={},i=We(e,t,{});for(var a in i)a in r&&null!=r[a]||(n[a]=i[a]);return n},jr={srOnly:{transform:function(e){return!0===e?Nr:"focusable"===e?Fr:{}}},layerStyle:{processResult:!0,transform:function(e,t,r){return Ur(t,"layerStyles."+e,r)}},textStyle:{processResult:!0,transform:function(e,t,r){return Ur(t,"textStyles."+e,r)}},apply:{processResult:!0,transform:function(e,t,r){return Ur(t,e,r)}}},Hr={position:!0,pos:Cr.prop("position"),zIndex:Cr.prop("zIndex","zIndices"),inset:Cr.spaceT("inset"),insetX:Cr.spaceT(["left","right"]),insetInline:Cr.spaceT("insetInline"),insetY:Cr.spaceT(["top","bottom"]),insetBlock:Cr.spaceT("insetBlock"),top:Cr.spaceT("top"),insetBlockStart:Cr.spaceT("insetBlockStart"),bottom:Cr.spaceT("bottom"),insetBlockEnd:Cr.spaceT("insetBlockEnd"),left:Cr.spaceT("left"),insetInlineStart:Cr.logical({scale:"space",property:{ltr:"left",rtl:"right"}}),right:Cr.spaceT("right"),insetInlineEnd:Cr.logical({scale:"space",property:{ltr:"right",rtl:"left"}})};Object.assign(Hr,{insetStart:Hr.insetInlineStart,insetEnd:Hr.insetInlineEnd});var Vr={ring:{transform:Er.ring},ringColor:Cr.colors("--chakra-ring-color"),ringOffset:Cr.prop("--chakra-ring-offset-width"),ringOffsetColor:Cr.colors("--chakra-ring-offset-color"),ringInset:Cr.prop("--chakra-ring-inset")},Gr={margin:Cr.spaceT("margin"),marginTop:Cr.spaceT("marginTop"),marginBlockStart:Cr.spaceT("marginBlockStart"),marginRight:Cr.spaceT("marginRight"),marginInlineEnd:Cr.spaceT("marginInlineEnd"),marginBottom:Cr.spaceT("marginBottom"),marginBlockEnd:Cr.spaceT("marginBlockEnd"),marginLeft:Cr.spaceT("marginLeft"),marginInlineStart:Cr.spaceT("marginInlineStart"),marginX:Cr.spaceT(["marginInlineStart","marginInlineEnd"]),marginInline:Cr.spaceT("marginInline"),marginY:Cr.spaceT(["marginTop","marginBottom"]),marginBlock:Cr.spaceT("marginBlock"),padding:Cr.space("padding"),paddingTop:Cr.space("paddingTop"),paddingBlockStart:Cr.space("paddingBlockStart"),paddingRight:Cr.space("paddingRight"),paddingBottom:Cr.space("paddingBottom"),paddingBlockEnd:Cr.space("paddingBlockEnd"),paddingLeft:Cr.space("paddingLeft"),paddingInlineStart:Cr.space("paddingInlineStart"),paddingInlineEnd:Cr.space("paddingInlineEnd"),paddingX:Cr.space(["paddingInlineStart","paddingInlineEnd"]),paddingInline:Cr.space("paddingInline"),paddingY:Cr.space(["paddingTop","paddingBottom"]),paddingBlock:Cr.space("paddingBlock")};Object.assign(Gr,{m:Gr.margin,mt:Gr.marginTop,mr:Gr.marginRight,me:Gr.marginInlineEnd,marginEnd:Gr.marginInlineEnd,mb:Gr.marginBottom,ml:Gr.marginLeft,ms:Gr.marginInlineStart,marginStart:Gr.marginInlineStart,mx:Gr.marginX,my:Gr.marginY,p:Gr.padding,pt:Gr.paddingTop,py:Gr.paddingY,px:Gr.paddingX,pb:Gr.paddingBottom,pl:Gr.paddingLeft,ps:Gr.paddingInlineStart,paddingStart:Gr.paddingInlineStart,pr:Gr.paddingRight,pe:Gr.paddingInlineEnd,paddingEnd:Gr.paddingInlineEnd});var Wr={textDecorationColor:Cr.colors("textDecorationColor"),textDecoration:!0,textDecor:{property:"textDecoration"},textDecorationLine:!0,textDecorationStyle:!0,textDecorationThickness:!0,textUnderlineOffset:!0,textShadow:Cr.shadows("textShadow")},qr={clipPath:!0,transform:Cr.propT("transform",Er.transform),transformOrigin:!0,translateX:Cr.spaceT("--chakra-translate-x"),translateY:Cr.spaceT("--chakra-translate-y"),skewX:Cr.degreeT("--chakra-skew-x"),skewY:Cr.degreeT("--chakra-skew-y"),scaleX:Cr.prop("--chakra-scale-x"),scaleY:Cr.prop("--chakra-scale-y"),scale:Cr.prop(["--chakra-scale-x","--chakra-scale-y"]),rotate:Cr.degreeT("--chakra-rotate")},Yr={transition:!0,transitionDelay:!0,animation:!0,willChange:!0,transitionDuration:Cr.prop("transitionDuration","transition.duration"),transitionProperty:Cr.prop("transitionProperty","transition.property"),transitionTimingFunction:Cr.prop("transitionTimingFunction","transition.easing")},Xr={fontFamily:Cr.prop("fontFamily","fonts"),fontSize:Cr.prop("fontSize","fontSizes",Er.px),fontWeight:Cr.prop("fontWeight","fontWeights"),lineHeight:Cr.prop("lineHeight","lineHeights"),letterSpacing:Cr.prop("letterSpacing","letterSpacings"),textAlign:!0,fontStyle:!0,wordBreak:!0,overflowWrap:!0,textOverflow:!0,textTransform:!0,whiteSpace:!0,noOfLines:{static:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:"var(--chakra-line-clamp)"},property:"--chakra-line-clamp"},isTruncated:{transform:function(e){if(!0===e)return{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}}},Qr={scrollBehavior:!0,scrollSnapAlign:!0,scrollSnapStop:!0,scrollSnapType:!0,scrollMargin:Cr.spaceT("scrollMargin"),scrollMarginTop:Cr.spaceT("scrollMarginTop"),scrollMarginBottom:Cr.spaceT("scrollMarginBottom"),scrollMarginLeft:Cr.spaceT("scrollMarginLeft"),scrollMarginRight:Cr.spaceT("scrollMarginRight"),scrollMarginX:Cr.spaceT(["scrollMarginLeft","scrollMarginRight"]),scrollMarginY:Cr.spaceT(["scrollMarginTop","scrollMarginBottom"]),scrollPadding:Cr.spaceT("scrollPadding"),scrollPaddingTop:Cr.spaceT("scrollPaddingTop"),scrollPaddingBottom:Cr.spaceT("scrollPaddingBottom"),scrollPaddingLeft:Cr.spaceT("scrollPaddingLeft"),scrollPaddingRight:Cr.spaceT("scrollPaddingRight"),scrollPaddingX:Cr.spaceT(["scrollPaddingLeft","scrollPaddingRight"]),scrollPaddingY:Cr.spaceT(["scrollPaddingTop","scrollPaddingBottom"])};function Jr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Zr(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return Jr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Jr(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var Kr=function(e,t){return e+":hover "+t+", "+e+"[data-hover] "+t},$r=function(e,t){return e+":focus "+t+", "+e+"[data-focus] "+t},en=function(e,t){return e+":focus-visible "+t},tn=function(e,t){return e+":focus-within "+t},rn=function(e,t){return e+":active "+t+", "+e+"[data-active] "+t},nn=function(e,t){return e+":disabled "+t+", "+e+"[data-disabled] "+t},an=function(e,t){return e+":invalid "+t+", "+e+"[data-invalid] "+t},on=function(e,t){return e+":checked "+t+", "+e+"[data-checked] "+t},sn=function(e){return un((function(t){return e(t,"&")}),"[role=group]","[data-group]",".group")},ln=function(e){return un((function(t){return e(t,"~ &")}),"[data-peer]",".peer")},un=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return r.map(e).join(", ")},cn={_hover:"&:hover, &[data-hover]",_active:"&:active, &[data-active]",_focus:"&:focus, &[data-focus]",_highlighted:"&[data-highlighted]",_focusWithin:"&:focus-within",_focusVisible:"&:focus-visible",_disabled:"&[disabled], &[aria-disabled=true], &[data-disabled]",_readOnly:"&[aria-readonly=true], &[readonly], &[data-readonly]",_before:"&::before",_after:"&::after",_empty:"&:empty",_expanded:"&[aria-expanded=true], &[data-expanded]",_checked:"&[aria-checked=true], &[data-checked]",_grabbed:"&[aria-grabbed=true], &[data-grabbed]",_pressed:"&[aria-pressed=true], &[data-pressed]",_invalid:"&[aria-invalid=true], &[data-invalid]",_valid:"&[data-valid], &[data-state=valid]",_loading:"&[data-loading], &[aria-busy=true]",_selected:"&[aria-selected=true], &[data-selected]",_hidden:"&[hidden], &[data-hidden]",_autofill:"&:-webkit-autofill",_even:"&:nth-of-type(even)",_odd:"&:nth-of-type(odd)",_first:"&:first-of-type",_last:"&:last-of-type",_notFirst:"&:not(:first-of-type)",_notLast:"&:not(:last-of-type)",_visited:"&:visited",_activeLink:"&[aria-current=page]",_activeStep:"&[aria-current=step]",_indeterminate:"&:indeterminate, &[aria-checked=mixed], &[data-indeterminate]",_groupHover:sn(Kr),_peerHover:ln(Kr),_groupFocus:sn($r),_peerFocus:ln($r),_groupFocusVisible:sn(en),_peerFocusVisible:ln(en),_groupActive:sn(rn),_peerActive:ln(rn),_groupDisabled:sn(nn),_peerDisabled:ln(nn),_groupInvalid:sn(an),_peerInvalid:ln(an),_groupChecked:sn(on),_peerChecked:ln(on),_groupFocusWithin:sn(tn),_peerFocusWithin:ln(tn),_peerPlaceholderShown:ln((function(e,t){return e+":placeholder-shown "+t})),_placeholder:"&::placeholder",_placeholderShown:"&:placeholder-shown",_fullScreen:"&:fullscreen",_selection:"&::selection",_rtl:"[dir=rtl] &, &[dir=rtl]",_ltr:"[dir=ltr] &, &[dir=ltr]",_mediaDark:"@media (prefers-color-scheme: dark)",_mediaReduceMotion:"@media (prefers-reduced-motion: reduce)",_dark:".chakra-ui-dark &:not([data-theme]),[data-theme=dark] &:not([data-theme]),&[data-theme=dark]",_light:".chakra-ui-light &:not([data-theme]),[data-theme=light] &:not([data-theme]),&[data-theme=light]"},hn=Xe(cn),dn=ke()({},Tr,Dr,Lr,Or,Br,Rr,Vr,Ir,kr,jr,Hr,Pr,Gr,Qr,Xr,Wr,qr,zr,Yr),pn=Object.assign({},Gr,Br,Or,kr,Hr),fn=(Xe(pn),[].concat(Xe(dn),hn)),mn=ar({},dn,cn),gn=function(e){return e in mn},vn=function(e,t){return e.startsWith("--")&&Ue(t)&&!je(t)},yn=function(e,t){var r,n;if(null==t)return t;var i=function(t){var r,n;return null==(r=e.__cssMap)||null==(n=r[t])?void 0:n.varRef},a=function(e){var t;return null!=(t=i(e))?t:e},o=t.split(",").map((function(e){return e.trim()})),s=o[0],l=o[1];return null!=(r=null!=(n=i(s))?n:a(l))?r:a(t)};var xn=function(e){return function(t){return function(e){var t=e.configs,r=void 0===t?{}:t,n=e.pseudos,i=void 0===n?{}:n,a=e.theme;return function e(t,n){void 0===n&&(n=!1);var o=ot(t,a),s=function(e){return function(t){if(!t.__breakpoints)return e;var r=t.__breakpoints,n=r.isResponsive,i=r.toArrayValue,a=r.media,o={};for(var s in e){var l=ot(e[s],t);if(null!=l)if(l=Ne(l)&&n(l)?i(l):l,Array.isArray(l))for(var u=l.slice(0,a.length).length,c=0;c<u;c+=1){var h=null==a?void 0:a[c];h?(o[h]=o[h]||{},null!=l[c]&&(o[h][s]=l[c])):o[s]=l[c]}else o[s]=l}return o}}(o)(a),l={};for(var u in s){var c,h,d,p,f,m=ot(s[u],a);u in i&&(u=i[u]),vn(u,m)&&(m=yn(a,m));var g=r[u];if(!0===g&&(g={property:u}),Ne(m)){var v;l[u]=null!=(v=l[u])?v:{},l[u]=ke()({},l[u],e(m,!0))}else{var y=null!=(c=null==(h=g)||null==h.transform?void 0:h.transform(m,a,o))?c:m;y=null!=(d=g)&&d.processResult?e(y,!0):y;var x=ot(null==(p=g)?void 0:p.property,a);if(!n&&null!=(f=g)&&f.static){var b=ot(g.static,a);l=ke()({},l,b)}if(x&&Array.isArray(x))for(var w,S=Zr(x);!(w=S()).done;)l[w.value]=y;else x?"&"===x&&Ne(y)?l=ke()({},l,y):l[x]=y:Ne(y)?l=ke()({},l,y):l[u]=y}}return l}}({theme:t,pseudos:cn,configs:dn})(e)}};function bn(e){return Ne(e)&&e.reference?e.reference:String(e)}var wn=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return r.map(bn).join(" "+e+" ").replace(/calc/g,"")},Sn=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return"calc("+wn.apply(void 0,["+"].concat(t))+")"},_n=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return"calc("+wn.apply(void 0,["-"].concat(t))+")"},An=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return"calc("+wn.apply(void 0,["*"].concat(t))+")"},Mn=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return"calc("+wn.apply(void 0,["/"].concat(t))+")"},En=function(e){var t=bn(e);return null==t||Number.isNaN(parseFloat(t))?An(t,-1):String(t).startsWith("-")?String(t).slice(1):"-"+t},Cn=Object.assign((function(e){return{add:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Cn(Sn.apply(void 0,[e].concat(r)))},subtract:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Cn(_n.apply(void 0,[e].concat(r)))},multiply:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Cn(An.apply(void 0,[e].concat(r)))},divide:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Cn(Mn.apply(void 0,[e].concat(r)))},negate:function(){return Cn(En(e))},toString:function(){return e.toString()}}}),{add:Sn,subtract:_n,multiply:An,divide:Mn,negate:En});function Tn(e){var t=function(e,t){return void 0===t&&(t="-"),e.replace(/\s+/g,t)}(e.toString());return t.includes("\\.")||Number.isInteger(parseFloat(e.toString()))?e:t.replace(".","\\.")}function Dn(e,t){return"var("+Tn(e)+(t?", "+t:"")+")"}function Ln(e,t){return void 0===t&&(t=""),"--"+function(e,t){return void 0===t&&(t=""),[t,Tn(e)].filter(Boolean).join("-")}(e,t)}function Pn(e,t){return void 0,{variable:r=Ln(String(e).replace(/\./g,"-"),t),reference:Dn(r,undefined)};var r}var Rn=["__cssMap","__cssVars","__breakpoints"],On=["colors","borders","borderWidths","borderStyles","fonts","fontSizes","fontWeights","letterSpacings","lineHeights","radii","space","shadows","sizes","zIndices","transition","blur"];function kn(e){return t=e,r={},On.forEach((function(e){e in t&&(r[e]=t[e])})),r;var t,r}function In(e){var t,r=function(e){return e.__cssMap,e.__cssVars,e.__breakpoints,function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,Rn)}(e),n=kn(r),i=function(e){return e.semanticTokens}(r),a=function(e){var t,r,n=e.tokens,i=e.semanticTokens,a=Object.entries(null!=(t=ht(n))?t:{}).map((function(e){return[e[0],{isSemantic:!1,value:e[1]}]})),o=Object.entries(null!=(r=ht(i,1))?r:{}).map((function(e){return[e[0],{isSemantic:!0,value:e[1]}]}));return Qe([].concat(a,o))}({tokens:n,semanticTokens:i}),o=function(e,t){for(var r={},n={},i=function(){var i=o[a],s=i[0],l=i[1],u=l.isSemantic,c=l.value,h=Pn(s,null==t?void 0:t.cssVarPrefix),d=h.variable,p=h.reference;if(!u){if(s.startsWith("space")){var f=s.split("."),m=f[0]+".-"+f.slice(1).join("."),g=Cn.negate(c),v=Cn.negate(p);n[m]={value:g,var:d,varRef:v}}return r[d]=c,n[s]={value:c,var:d,varRef:p},"continue"}var y=Ne(c)?c:{default:c};r=ke()(r,Object.entries(y).reduce((function(r,n){var i,a,o,l,u=n[0],c=(o=n[1],l=[String(s).split(".")[0],o].join("."),e[l]?Pn(l,null==t?void 0:t.cssVarPrefix).reference:o);return"default"===u?(r[d]=c,r):(r[null!=(i=null==cn?void 0:cn[u])?i:u]=((a={})[d]=c,a),r)}),{})),n[s]={value:p,var:d,varRef:p}},a=0,o=Object.entries(e);a<o.length;a++)i();return{cssVars:r,cssMap:n}}(a,{cssVarPrefix:null==(t=r.config)?void 0:t.cssVarPrefix}),s=o.cssMap,l=o.cssVars;return Object.assign(r,{__cssVars:ar({},{"--chakra-ring-inset":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-ring-offset-width":"0px","--chakra-ring-offset-color":"#fff","--chakra-ring-color":"rgba(66, 153, 225, 0.6)","--chakra-ring-offset-shadow":"0 0 #0000","--chakra-ring-shadow":"0 0 #0000","--chakra-space-x-reverse":"0","--chakra-space-y-reverse":"0"},l),__cssMap:s,__breakpoints:tt(r.breakpoints)}),r}var Bn=i(590),zn=i.n(Bn),Nn=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Fn=ue((function(e){return Nn.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),Un=function(e){return"theme"!==e},jn=function(e){return"string"==typeof e&&e.charCodeAt(0)>96?Fn:Un},Hn=function(e,t,r){var n;if(t){var i=t.shouldForwardProp;n=e.__emotion_forwardProp&&i?function(t){return e.__emotion_forwardProp(t)&&i(t)}:i}return"function"!=typeof n&&r&&(n=e.__emotion_forwardProp),n},Vn=t.useInsertionEffect?t.useInsertionEffect:function(e){e()},Gn=function(e){var t=e.cache,r=e.serialized,n=e.isStringTag;return Ee(t,r,n),Vn((function(){return Ce(t,r,n)})),null};var Wn=function t(r,n){var i,a,o=r.__emotion_real===r,s=o&&r.__emotion_base||r;void 0!==n&&(i=n.label,a=n.target);var l=Hn(r,n,o),u=l||jn(s),c=!u("as");return function(){var h=arguments,d=o&&void 0!==r.__emotion_styles?r.__emotion_styles.slice(0):[];if(void 0!==i&&d.push("label:"+i+";"),null==h[0]||void 0===h[0].raw)d.push.apply(d,h);else{d.push(h[0][0]);for(var p=h.length,f=1;f<p;f++)d.push(h[f],h[0][f])}var m=we((function(t,r,n){var i=c&&t.as||s,o="",h=[],p=t;if(null==t.theme){for(var f in p={},t)p[f]=t[f];p.theme=(0,e.useContext)(Se)}"string"==typeof t.className?o=Me(r.registered,h,t.className):null!=t.className&&(o=t.className+" ");var m=xe(d.concat(h),r.registered,p);o+=r.key+"-"+m.name,void 0!==a&&(o+=" "+a);var g=c&&void 0===l?jn(i):u,v={};for(var y in t)c&&"as"===y||g(y)&&(v[y]=t[y]);return v.className=o,v.ref=n,(0,e.createElement)(e.Fragment,null,(0,e.createElement)(Gn,{cache:r,serialized:m,isStringTag:"string"==typeof i}),(0,e.createElement)(i,v))}));return m.displayName=void 0!==i?i:"Styled("+("string"==typeof s?s:s.displayName||s.name||"Component")+")",m.defaultProps=r.defaultProps,m.__emotion_real=m,m.__emotion_base=s,m.__emotion_styles=d,m.__emotion_forwardProp=l,Object.defineProperty(m,"toString",{value:function(){return"."+a}}),m.withComponent=function(e,r){return t(e,ae({},n,r,{shouldForwardProp:Hn(m,r,!0)})).apply(void 0,d)},m}}.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){Wn[e]=Wn(e)}));const qn=Wn;function Yn(){return Yn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Yn.apply(this,arguments)}var Xn=function(t){var r=t.cssVarsRoot,n=t.theme,i=t.children,a=e.useMemo((function(){return In(n)}),[n]);return e.createElement(Ae,{theme:a},e.createElement(Qn,{root:r}),i)},Qn=function(t){var r=t.root,n=[void 0===r?":host, :root":r,"[data-theme]"].join(",");return e.createElement(De,{styles:function(e){var t;return(t={})[n]=e.__cssVars,t}})};function Jn(){var t=e.useContext(Se);if(!t)throw Error("useTheme: `theme` is undefined. Seems you forgot to wrap your app in `<ChakraProvider />` or `<ThemeProvider />`");return t}var Zn=vt({name:"StylesContext",errorMessage:"useStyles: `styles` is undefined. Seems you forgot to wrap the components in `<StylesProvider />` "}),Kn=Zn[0],$n=Zn[1],ei=function(){var t=rr().colorMode;return e.createElement(De,{styles:function(e){var r=ot(We(e,"styles.global"),{theme:e,colorMode:t});if(r)return xn(r)(e)}})};function ti(e){return He(e,["styleConfig","size","variant","colorScheme"])}function ri(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var ni=new Set([].concat(fn,["textStyle","layerStyle","apply","isTruncated","noOfLines","focusBorderColor","errorBorderColor","as","__css","css","sx"])),ii=new Set(["htmlWidth","htmlHeight","htmlSize"]),ai=function(e){return ii.has(e)||!ni.has(e)},oi=["theme","css","__css","sx"],si=["baseStyle"];function li(e,t){var r=null!=t?t:{},n=r.baseStyle,i=ri(r,si);i.shouldForwardProp||(i.shouldForwardProp=ai);var a=function(e){var t=e.baseStyle;return function(e){e.theme;var r=e.css,n=e.__css,i=e.sx,a=qe(ri(e,oi),(function(e,t){return gn(t)})),o=ot(t,e),s=Object.assign({},n,o,Ye(a),i),l=xn(s)(e.theme);return r?[l,r]:l}}({baseStyle:n});return qn(e,i)(a)}function ui(t){return e.forwardRef(t)}var ci=["styleConfig"];function hi(t,r,n){var i;void 0===r&&(r={}),void 0===n&&(n={});var a=r,o=a.styleConfig,s=ri(a,ci),l=Yn({},rr(),{theme:Jn()}),u=l.theme,c=l.colorMode,h=We(u,"components."+t),d=o||h,p=ke()({theme:u,colorMode:c},null!=(i=null==d?void 0:d.defaultProps)?i:{},Ye(He(s,["children"]))),f=(0,e.useRef)({});if(d){var m,g,v,y,x,b,w=ot(null!=(m=d.baseStyle)?m:{},p),S=ot(null!=(g=null==(v=d.variants)?void 0:v[p.variant])?g:{},p),_=ot(null!=(y=null==(x=d.sizes)?void 0:x[p.size])?y:{},p),A=ke()({},w,_,S);null!=(b=n)&&b.isMultiPart&&d.parts&&d.parts.forEach((function(e){var t;A[e]=null!=(t=A[e])?t:{}})),zn()(f.current,A)||(f.current=A)}return f.current}function di(e,t){return hi(e,t,{isMultiPart:!0})}var pi=function(){var e=new Map;return new Proxy(li,{apply:function(e,t,r){return li.apply(void 0,r)},get:function(t,r){return e.has(r)||e.set(r,li(r)),e.get(r)}})}(),fi={px:"1px",.5:"0.125rem",1:"0.25rem",1.5:"0.375rem",2:"0.5rem",2.5:"0.625rem",3:"0.75rem",3.5:"0.875rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem",12:"3rem",14:"3.5rem",16:"4rem",20:"5rem",24:"6rem",28:"7rem",32:"8rem",36:"9rem",40:"10rem",44:"11rem",48:"12rem",52:"13rem",56:"14rem",60:"15rem",64:"16rem",72:"18rem",80:"20rem",96:"24rem"};function mi(){return mi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mi.apply(this,arguments)}var gi=mi({},fi,{max:"max-content",min:"min-content",full:"100%","3xs":"14rem","2xs":"16rem",xs:"20rem",sm:"24rem",md:"28rem",lg:"32rem",xl:"36rem","2xl":"42rem","3xl":"48rem","4xl":"56rem","5xl":"64rem","6xl":"72rem","7xl":"80rem","8xl":"90rem"},{container:{sm:"640px",md:"768px",lg:"1024px",xl:"1280px"}});function vi(e,t){(function(e){return"string"==typeof e&&-1!==e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var r=function(e){return"string"==typeof e&&-1!==e.indexOf("%")}(e);return e=360===t?e:Math.min(t,Math.max(0,parseFloat(e))),r&&(e=parseInt(String(e*t),10)/100),Math.abs(e-t)<1e-6?1:e=360===t?(e<0?e%t+t:e%t)/parseFloat(String(t)):e%t/parseFloat(String(t))}function yi(e){return Math.min(1,Math.max(0,e))}function xi(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function bi(e){return e<=1?"".concat(100*Number(e),"%"):e}function wi(e){return 1===e.length?"0"+e:String(e)}function Si(e,t,r){e=vi(e,255),t=vi(t,255),r=vi(r,255);var n=Math.max(e,t,r),i=Math.min(e,t,r),a=0,o=0,s=(n+i)/2;if(n===i)o=0,a=0;else{var l=n-i;switch(o=s>.5?l/(2-n-i):l/(n+i),n){case e:a=(t-r)/l+(t<r?6:0);break;case t:a=(r-e)/l+2;break;case r:a=(e-t)/l+4}a/=6}return{h:a,s:o,l:s}}function _i(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*r*(t-e):r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function Ai(e,t,r){e=vi(e,255),t=vi(t,255),r=vi(r,255);var n=Math.max(e,t,r),i=Math.min(e,t,r),a=0,o=n,s=n-i,l=0===n?0:s/n;if(n===i)a=0;else{switch(n){case e:a=(t-r)/s+(t<r?6:0);break;case t:a=(r-e)/s+2;break;case r:a=(e-t)/s+4}a/=6}return{h:a,s:l,v:o}}function Mi(e,t,r,n){var i=[wi(Math.round(e).toString(16)),wi(Math.round(t).toString(16)),wi(Math.round(r).toString(16))];return n&&i[0].startsWith(i[0].charAt(1))&&i[1].startsWith(i[1].charAt(1))&&i[2].startsWith(i[2].charAt(1))?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function Ei(e){return Ci(e)/255}function Ci(e){return parseInt(e,16)}var Ti={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};var Di="(?:".concat("[-\\+]?\\d*\\.\\d+%?",")|(?:").concat("[-\\+]?\\d+%?",")"),Li="[\\s|\\(]+(".concat(Di,")[,|\\s]+(").concat(Di,")[,|\\s]+(").concat(Di,")\\s*\\)?"),Pi="[\\s|\\(]+(".concat(Di,")[,|\\s]+(").concat(Di,")[,|\\s]+(").concat(Di,")[,|\\s]+(").concat(Di,")\\s*\\)?"),Ri={CSS_UNIT:new RegExp(Di),rgb:new RegExp("rgb"+Li),rgba:new RegExp("rgba"+Pi),hsl:new RegExp("hsl"+Li),hsla:new RegExp("hsla"+Pi),hsv:new RegExp("hsv"+Li),hsva:new RegExp("hsva"+Pi),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function Oi(e){return Boolean(Ri.CSS_UNIT.exec(String(e)))}var ki=function(){function e(t,r){var n;if(void 0===t&&(t=""),void 0===r&&(r={}),t instanceof e)return t;"number"==typeof t&&(t=function(e){return{r:e>>16,g:(65280&e)>>8,b:255&e}}(t)),this.originalInput=t;var i=function(e){var t={r:0,g:0,b:0},r=1,n=null,i=null,a=null,o=!1,s=!1;return"string"==typeof e&&(e=function(e){if(0===(e=e.trim().toLowerCase()).length)return!1;var t=!1;if(Ti[e])e=Ti[e],t=!0;else if("transparent"===e)return{r:0,g:0,b:0,a:0,format:"name"};var r=Ri.rgb.exec(e);return r?{r:r[1],g:r[2],b:r[3]}:(r=Ri.rgba.exec(e))?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=Ri.hsl.exec(e))?{h:r[1],s:r[2],l:r[3]}:(r=Ri.hsla.exec(e))?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=Ri.hsv.exec(e))?{h:r[1],s:r[2],v:r[3]}:(r=Ri.hsva.exec(e))?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=Ri.hex8.exec(e))?{r:Ci(r[1]),g:Ci(r[2]),b:Ci(r[3]),a:Ei(r[4]),format:t?"name":"hex8"}:(r=Ri.hex6.exec(e))?{r:Ci(r[1]),g:Ci(r[2]),b:Ci(r[3]),format:t?"name":"hex"}:(r=Ri.hex4.exec(e))?{r:Ci(r[1]+r[1]),g:Ci(r[2]+r[2]),b:Ci(r[3]+r[3]),a:Ei(r[4]+r[4]),format:t?"name":"hex8"}:!!(r=Ri.hex3.exec(e))&&{r:Ci(r[1]+r[1]),g:Ci(r[2]+r[2]),b:Ci(r[3]+r[3]),format:t?"name":"hex"}}(e)),"object"==typeof e&&(Oi(e.r)&&Oi(e.g)&&Oi(e.b)?(t=function(e,t,r){return{r:255*vi(e,255),g:255*vi(t,255),b:255*vi(r,255)}}(e.r,e.g,e.b),o=!0,s="%"===String(e.r).substr(-1)?"prgb":"rgb"):Oi(e.h)&&Oi(e.s)&&Oi(e.v)?(n=bi(e.s),i=bi(e.v),t=function(e,t,r){e=6*vi(e,360),t=vi(t,100),r=vi(r,100);var n=Math.floor(e),i=e-n,a=r*(1-t),o=r*(1-i*t),s=r*(1-(1-i)*t),l=n%6;return{r:255*[r,o,a,a,s,r][l],g:255*[s,r,r,o,a,a][l],b:255*[a,a,s,r,r,o][l]}}(e.h,n,i),o=!0,s="hsv"):Oi(e.h)&&Oi(e.s)&&Oi(e.l)&&(n=bi(e.s),a=bi(e.l),t=function(e,t,r){var n,i,a;if(e=vi(e,360),t=vi(t,100),r=vi(r,100),0===t)i=r,a=r,n=r;else{var o=r<.5?r*(1+t):r+t-r*t,s=2*r-o;n=_i(s,o,e+1/3),i=_i(s,o,e),a=_i(s,o,e-1/3)}return{r:255*n,g:255*i,b:255*a}}(e.h,n,a),o=!0,s="hsl"),Object.prototype.hasOwnProperty.call(e,"a")&&(r=e.a)),r=xi(r),{ok:o,format:e.format||s,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:r}}(t);this.originalInput=t,this.r=i.r,this.g=i.g,this.b=i.b,this.a=i.a,this.roundA=Math.round(100*this.a)/100,this.format=null!==(n=r.format)&&void 0!==n?n:i.format,this.gradientType=r.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=i.ok}return e.prototype.isDark=function(){return this.getBrightness()<128},e.prototype.isLight=function(){return!this.isDark()},e.prototype.getBrightness=function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},e.prototype.getLuminance=function(){var e=this.toRgb(),t=e.r/255,r=e.g/255,n=e.b/255;return.2126*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.7152*(r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))},e.prototype.getAlpha=function(){return this.a},e.prototype.setAlpha=function(e){return this.a=xi(e),this.roundA=Math.round(100*this.a)/100,this},e.prototype.toHsv=function(){var e=Ai(this.r,this.g,this.b);return{h:360*e.h,s:e.s,v:e.v,a:this.a}},e.prototype.toHsvString=function(){var e=Ai(this.r,this.g,this.b),t=Math.round(360*e.h),r=Math.round(100*e.s),n=Math.round(100*e.v);return 1===this.a?"hsv(".concat(t,", ").concat(r,"%, ").concat(n,"%)"):"hsva(".concat(t,", ").concat(r,"%, ").concat(n,"%, ").concat(this.roundA,")")},e.prototype.toHsl=function(){var e=Si(this.r,this.g,this.b);return{h:360*e.h,s:e.s,l:e.l,a:this.a}},e.prototype.toHslString=function(){var e=Si(this.r,this.g,this.b),t=Math.round(360*e.h),r=Math.round(100*e.s),n=Math.round(100*e.l);return 1===this.a?"hsl(".concat(t,", ").concat(r,"%, ").concat(n,"%)"):"hsla(".concat(t,", ").concat(r,"%, ").concat(n,"%, ").concat(this.roundA,")")},e.prototype.toHex=function(e){return void 0===e&&(e=!1),Mi(this.r,this.g,this.b,e)},e.prototype.toHexString=function(e){return void 0===e&&(e=!1),"#"+this.toHex(e)},e.prototype.toHex8=function(e){return void 0===e&&(e=!1),function(e,t,r,n,i){var a,o=[wi(Math.round(e).toString(16)),wi(Math.round(t).toString(16)),wi(Math.round(r).toString(16)),wi((a=n,Math.round(255*parseFloat(a)).toString(16)))];return i&&o[0].startsWith(o[0].charAt(1))&&o[1].startsWith(o[1].charAt(1))&&o[2].startsWith(o[2].charAt(1))&&o[3].startsWith(o[3].charAt(1))?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}(this.r,this.g,this.b,this.a,e)},e.prototype.toHex8String=function(e){return void 0===e&&(e=!1),"#"+this.toHex8(e)},e.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},e.prototype.toRgbString=function(){var e=Math.round(this.r),t=Math.round(this.g),r=Math.round(this.b);return 1===this.a?"rgb(".concat(e,", ").concat(t,", ").concat(r,")"):"rgba(".concat(e,", ").concat(t,", ").concat(r,", ").concat(this.roundA,")")},e.prototype.toPercentageRgb=function(){var e=function(e){return"".concat(Math.round(100*vi(e,255)),"%")};return{r:e(this.r),g:e(this.g),b:e(this.b),a:this.a}},e.prototype.toPercentageRgbString=function(){var e=function(e){return Math.round(100*vi(e,255))};return 1===this.a?"rgb(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%)"):"rgba(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%, ").concat(this.roundA,")")},e.prototype.toName=function(){if(0===this.a)return"transparent";if(this.a<1)return!1;for(var e="#"+Mi(this.r,this.g,this.b,!1),t=0,r=Object.entries(Ti);t<r.length;t++){var n=r[t],i=n[0];if(e===n[1])return i}return!1},e.prototype.toString=function(e){var t=Boolean(e);e=null!=e?e:this.format;var r=!1,n=this.a<1&&this.a>=0;return t||!n||!e.startsWith("hex")&&"name"!==e?("rgb"===e&&(r=this.toRgbString()),"prgb"===e&&(r=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(r=this.toHexString()),"hex3"===e&&(r=this.toHexString(!0)),"hex4"===e&&(r=this.toHex8String(!0)),"hex8"===e&&(r=this.toHex8String()),"name"===e&&(r=this.toName()),"hsl"===e&&(r=this.toHslString()),"hsv"===e&&(r=this.toHsvString()),r||this.toHexString()):"name"===e&&0===this.a?this.toName():this.toRgbString()},e.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},e.prototype.clone=function(){return new e(this.toString())},e.prototype.lighten=function(t){void 0===t&&(t=10);var r=this.toHsl();return r.l+=t/100,r.l=yi(r.l),new e(r)},e.prototype.brighten=function(t){void 0===t&&(t=10);var r=this.toRgb();return r.r=Math.max(0,Math.min(255,r.r-Math.round(-t/100*255))),r.g=Math.max(0,Math.min(255,r.g-Math.round(-t/100*255))),r.b=Math.max(0,Math.min(255,r.b-Math.round(-t/100*255))),new e(r)},e.prototype.darken=function(t){void 0===t&&(t=10);var r=this.toHsl();return r.l-=t/100,r.l=yi(r.l),new e(r)},e.prototype.tint=function(e){return void 0===e&&(e=10),this.mix("white",e)},e.prototype.shade=function(e){return void 0===e&&(e=10),this.mix("black",e)},e.prototype.desaturate=function(t){void 0===t&&(t=10);var r=this.toHsl();return r.s-=t/100,r.s=yi(r.s),new e(r)},e.prototype.saturate=function(t){void 0===t&&(t=10);var r=this.toHsl();return r.s+=t/100,r.s=yi(r.s),new e(r)},e.prototype.greyscale=function(){return this.desaturate(100)},e.prototype.spin=function(t){var r=this.toHsl(),n=(r.h+t)%360;return r.h=n<0?360+n:n,new e(r)},e.prototype.mix=function(t,r){void 0===r&&(r=50);var n=this.toRgb(),i=new e(t).toRgb(),a=r/100;return new e({r:(i.r-n.r)*a+n.r,g:(i.g-n.g)*a+n.g,b:(i.b-n.b)*a+n.b,a:(i.a-n.a)*a+n.a})},e.prototype.analogous=function(t,r){void 0===t&&(t=6),void 0===r&&(r=30);var n=this.toHsl(),i=360/r,a=[this];for(n.h=(n.h-(i*t>>1)+720)%360;--t;)n.h=(n.h+i)%360,a.push(new e(n));return a},e.prototype.complement=function(){var t=this.toHsl();return t.h=(t.h+180)%360,new e(t)},e.prototype.monochromatic=function(t){void 0===t&&(t=6);for(var r=this.toHsv(),n=r.h,i=r.s,a=r.v,o=[],s=1/t;t--;)o.push(new e({h:n,s:i,v:a})),a=(a+s)%1;return o},e.prototype.splitcomplement=function(){var t=this.toHsl(),r=t.h;return[this,new e({h:(r+72)%360,s:t.s,l:t.l}),new e({h:(r+216)%360,s:t.s,l:t.l})]},e.prototype.onBackground=function(t){var r=this.toRgb(),n=new e(t).toRgb();return new e({r:n.r+(r.r-n.r)*r.a,g:n.g+(r.g-n.g)*r.a,b:n.b+(r.b-n.b)*r.a})},e.prototype.triad=function(){return this.polyad(3)},e.prototype.tetrad=function(){return this.polyad(4)},e.prototype.polyad=function(t){for(var r=this.toHsl(),n=r.h,i=[this],a=360/t,o=1;o<t;o++)i.push(new e({h:(n+o*a)%360,s:r.s,l:r.l}));return i},e.prototype.equals=function(t){return this.toRgbString()===new e(t).toRgbString()},e}();function Ii(e){if(void 0===e&&(e={}),void 0!==e.count&&null!==e.count){var t=e.count,r=[];for(e.count=void 0;t>r.length;)e.count=null,e.seed&&(e.seed+=1),r.push(Ii(e));return e.count=t,r}var n=function(e,t){var r=zi(function(e){var t=parseInt(e,10);if(!Number.isNaN(t)&&t<360&&t>0)return[t,t];if("string"==typeof e){var r=Fi.find((function(t){return t.name===e}));if(r){var n=Ni(r);if(n.hueRange)return n.hueRange}var i=new ki(e);if(i.isValid){var a=i.toHsv().h;return[a,a]}}return[0,360]}(e),t);return r<0&&(r=360+r),r}(e.hue,e.seed),i=function(e,t){if("monochrome"===t.hue)return 0;if("random"===t.luminosity)return zi([0,100],t.seed);var r=Bi(e).saturationRange,n=r[0],i=r[1];switch(t.luminosity){case"bright":n=55;break;case"dark":n=i-10;break;case"light":i=55}return zi([n,i],t.seed)}(n,e),a=function(e,t,r){var n=function(e,t){for(var r=Bi(e).lowerBounds,n=0;n<r.length-1;n++){var i=r[n][0],a=r[n][1],o=r[n+1][0],s=r[n+1][1];if(t>=i&&t<=o){var l=(s-a)/(o-i);return l*t+(a-l*i)}}return 0}(e,t),i=100;switch(r.luminosity){case"dark":i=n+20;break;case"light":n=(i+n)/2;break;case"random":n=0,i=100}return zi([n,i],r.seed)}(n,i,e),o={h:n,s:i,v:a};return void 0!==e.alpha&&(o.a=e.alpha),new ki(o)}function Bi(e){e>=334&&e<=360&&(e-=360);for(var t=0,r=Fi;t<r.length;t++){var n=Ni(r[t]);if(n.hueRange&&e>=n.hueRange[0]&&e<=n.hueRange[1])return n}throw Error("Color not found")}function zi(e,t){if(void 0===t)return Math.floor(e[0]+Math.random()*(e[1]+1-e[0]));var r=e[1]||1,n=e[0]||0,i=(t=(9301*t+49297)%233280)/233280;return Math.floor(n+i*(r-n))}function Ni(e){var t=e.lowerBounds[0][0],r=e.lowerBounds[e.lowerBounds.length-1][0],n=e.lowerBounds[e.lowerBounds.length-1][1],i=e.lowerBounds[0][1];return{name:e.name,hueRange:e.hueRange,lowerBounds:e.lowerBounds,saturationRange:[t,r],brightnessRange:[n,i]}}var Fi=[{name:"monochrome",hueRange:null,lowerBounds:[[0,0],[100,0]]},{name:"red",hueRange:[-26,18],lowerBounds:[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]},{name:"orange",hueRange:[19,46],lowerBounds:[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]},{name:"yellow",hueRange:[47,62],lowerBounds:[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]},{name:"green",hueRange:[63,178],lowerBounds:[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]},{name:"blue",hueRange:[179,257],lowerBounds:[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]},{name:"purple",hueRange:[258,282],lowerBounds:[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]},{name:"pink",hueRange:[283,334],lowerBounds:[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]]}],Ui=function(e,t,r){var n=We(e,"colors."+t,t);return new ki(n).isValid?n:r},ji=function(e,t){return function(r){var n=Ui(r,e);return new ki(n).setAlpha(t).toRgbString()}};function Hi(e,t){return void 0===e&&(e="1rem"),void 0===t&&(t="rgba(255, 255, 255, 0.15)"),{backgroundImage:"linear-gradient(\n    45deg,\n    "+t+" 25%,\n    transparent 25%,\n    transparent 50%,\n    "+t+" 50%,\n    "+t+" 75%,\n    transparent 75%,\n    transparent\n  )",backgroundSize:e+" "+e}}function Vi(e){var t,r=Ii().toHexString();return!e||Ne(t=e)&&0===Object.keys(t).length?r:e.string&&e.colors?function(e,t){var r=0;if(0===e.length)return t[0];for(var n=0;n<e.length;n+=1)r=e.charCodeAt(n)+((r<<5)-r),r&=r;return t[r=(r%t.length+t.length)%t.length]}(e.string,e.colors):e.string&&!e.colors?function(e){var t=0;if(0===e.length)return t.toString();for(var r=0;r<e.length;r+=1)t=e.charCodeAt(r)+((t<<5)-t),t&=t;for(var n="#",i=0;i<3;i+=1)n+=("00"+(t>>8*i&255).toString(16)).substr(-2);return n}(e.string):e.colors&&!e.string?function(e){return e[Math.floor(Math.random()*e.length)]}(e.colors):r}function Gi(e,t){return function(r){return"dark"===r.colorMode?t:e}}function Wi(e){var t=e.orientation,r=e.vertical,n=e.horizontal;return t?"vertical"===t?r:n:{}}function qi(){return qi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qi.apply(this,arguments)}function Yi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Xi=function(){function e(e){var t=this;this.map={},this.called=!1,this.assert=function(){if(t.called)throw new Error("[anatomy] .part(...) should only be called once. Did you mean to use .extend(...) ?");t.called=!0},this.parts=function(){t.assert();for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];for(var i=0,a=r;i<a.length;i++){var o=a[i];t.map[o]=t.toPart(o)}return t},this.extend=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];for(var i=0,a=r;i<a.length;i++){var o=a[i];o in t.map||(t.map[o]=t.toPart(o))}return t},this.toPart=function(e){var r="chakra-"+(["container","root"].includes(null!=e?e:"")?[t.name]:[t.name,e]).filter(Boolean).join("__");return{className:r,selector:"."+r,toString:function(){return e}}},this.__type={}}var t,r;return t=e,(r=[{key:"selectors",get:function(){return Qe(Object.entries(this.map).map((function(e){return[e[0],e[1].selector]})))}},{key:"classNames",get:function(){return Qe(Object.entries(this.map).map((function(e){return[e[0],e[1].className]})))}},{key:"keys",get:function(){return Object.keys(this.map)}}])&&Yi(t.prototype,r),e}();function Qi(e){return new Xi(e)}function Ji(e){return Ne(e)&&e.reference?e.reference:String(e)}var Zi=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return r.map(Ji).join(" "+e+" ").replace(/calc/g,"")},Ki=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return"calc("+Zi.apply(void 0,["+"].concat(t))+")"},$i=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return"calc("+Zi.apply(void 0,["-"].concat(t))+")"},ea=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return"calc("+Zi.apply(void 0,["*"].concat(t))+")"},ta=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return"calc("+Zi.apply(void 0,["/"].concat(t))+")"},ra=function(e){var t=Ji(e);return null==t||Number.isNaN(parseFloat(t))?ea(t,-1):String(t).startsWith("-")?String(t).slice(1):"-"+t},na=Object.assign((function(e){return{add:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return na(Ki.apply(void 0,[e].concat(r)))},subtract:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return na($i.apply(void 0,[e].concat(r)))},multiply:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return na(ea.apply(void 0,[e].concat(r)))},divide:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return na(ta.apply(void 0,[e].concat(r)))},negate:function(){return na(ra(e))},toString:function(){return e.toString()}}}),{add:Ki,subtract:$i,multiply:ea,divide:ta,negate:ra});function ia(e){var t=function(e,t){return void 0===t&&(t="-"),e.replace(/\s+/g,t)}(e.toString());return t.includes("\\.")?e:function(e){return!Number.isInteger(parseFloat(e.toString()))}(e)?t.replace(".","\\."):e}function aa(e,t){return"var("+ia(e)+(t?", "+t:"")+")"}function oa(e,t){var r,n=function(e,t){return void 0===t&&(t=""),"--"+function(e,t){return void 0===t&&(t=""),[t,ia(e)].filter(Boolean).join("-")}(e,t)}(e,null==t?void 0:t.prefix);return{variable:n,reference:aa(n,(r=null==t?void 0:t.fallback,"string"==typeof r?r:null==r?void 0:r.reference))}}var sa=Qi("accordion").parts("root","container","button","panel").extend("icon"),la=Qi("alert").parts("title","description","container").extend("icon"),ua=Qi("avatar").parts("label","badge","container").extend("excessLabel","group"),ca=Qi("breadcrumb").parts("link","item","container").extend("separator"),ha=(Qi("button").parts(),Qi("checkbox").parts("control","icon","container").extend("label")),da=(Qi("progress").parts("track","filledTrack").extend("label"),Qi("drawer").parts("overlay","dialogContainer","dialog").extend("header","closeButton","body","footer")),pa=Qi("editable").parts("preview","input","textarea"),fa=Qi("form").parts("container","requiredIndicator","helperText"),ma=Qi("formError").parts("text","icon"),ga=Qi("input").parts("addon","field","element"),va=Qi("list").parts("container","item","icon"),ya=Qi("menu").parts("button","list","item").extend("groupTitle","command","divider"),xa=Qi("modal").parts("overlay","dialogContainer","dialog").extend("header","closeButton","body","footer"),ba=Qi("numberinput").parts("root","field","stepperGroup","stepper"),wa=(Qi("pininput").parts("field"),Qi("popover").parts("content","header","body","footer").extend("popper","arrow","closeButton")),Sa=Qi("progress").parts("label","filledTrack","track"),_a=Qi("radio").parts("container","control","label"),Aa=Qi("select").parts("field","icon"),Ma=Qi("slider").parts("container","track","thumb","filledTrack"),Ea=Qi("stat").parts("container","label","helpText","number","icon"),Ca=Qi("switch").parts("container","track","thumb"),Ta=Qi("table").parts("table","thead","tbody","tr","th","td","tfoot","caption"),Da=Qi("tabs").parts("root","tab","tablist","tabpanel","tabpanels","indicator"),La=Qi("tag").parts("container","label","closeButton"),Pa={letterSpacings:{tighter:"-0.05em",tight:"-0.025em",normal:"0",wide:"0.025em",wider:"0.05em",widest:"0.1em"},lineHeights:{normal:"normal",none:1,shorter:1.25,short:1.375,base:1.5,tall:1.625,taller:"2",3:".75rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem"},fontWeights:{hairline:100,thin:200,light:300,normal:400,medium:500,semibold:600,bold:700,extrabold:800,black:900},fonts:{heading:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',body:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',mono:'SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace'},fontSizes:{xs:"0.75rem",sm:"0.875rem",md:"1rem",lg:"1.125rem",xl:"1.25rem","2xl":"1.5rem","3xl":"1.875rem","4xl":"2.25rem","5xl":"3rem","6xl":"3.75rem","7xl":"4.5rem","8xl":"6rem","9xl":"8rem"}},Ra={parts:sa.keys,baseStyle:{root:{},container:{borderTopWidth:"1px",borderColor:"inherit",_last:{borderBottomWidth:"1px"}},button:{transitionProperty:"common",transitionDuration:"normal",fontSize:"1rem",_focus:{boxShadow:"outline"},_hover:{bg:"blackAlpha.50"},_disabled:{opacity:.4,cursor:"not-allowed"},px:4,py:2},panel:{pt:2,px:4,pb:5},icon:{fontSize:"1.25em"}}};function Oa(e){var t=e.theme,r=e.colorScheme;return Gi(Ui(t,r+".100",r),ji(r+".200",.16)(t))(e)}var ka={subtle:function(e){var t=e.colorScheme;return{container:{bg:Oa(e)},icon:{color:Gi(t+".500",t+".200")(e)}}},"left-accent":function(e){var t=e.colorScheme;return{container:{paddingStart:3,borderStartWidth:"4px",borderStartColor:Gi(t+".500",t+".200")(e),bg:Oa(e)},icon:{color:Gi(t+".500",t+".200")(e)}}},"top-accent":function(e){var t=e.colorScheme;return{container:{pt:2,borderTopWidth:"4px",borderTopColor:Gi(t+".500",t+".200")(e),bg:Oa(e)},icon:{color:Gi(t+".500",t+".200")(e)}}},solid:function(e){var t=e.colorScheme;return{container:{bg:Gi(t+".500",t+".200")(e),color:Gi("white","gray.900")(e)}}}},Ia={parts:la.keys,baseStyle:{container:{px:4,py:3},title:{fontWeight:"bold",lineHeight:6,marginEnd:2},description:{lineHeight:6},icon:{flexShrink:0,marginEnd:3,w:5,h:6}},variants:ka,defaultProps:{variant:"subtle",colorScheme:"blue"}},Ba=function(e){return{transform:"translate(25%, 25%)",borderRadius:"full",border:"0.2em solid",borderColor:Gi("white","gray.800")(e)}},za=function(e){return{bg:Gi("gray.200","whiteAlpha.400")(e)}},Na=function(e){var t=e.name,r=e.theme,n=t?Vi({string:t}):"gray.400",i=function(e){return function(t){return"dark"===function(e){return function(t){var r=Ui(t,e);return new ki(r).isDark()?"dark":"light"}}(e)(t)}}(n)(r),a="white";return i||(a="gray.800"),{bg:n,color:a,borderColor:Gi("white","gray.800")(e),verticalAlign:"top"}};function Fa(e){var t=gi[e];return{container:{width:e,height:e,fontSize:"calc("+(null!=t?t:e)+" / 2.5)"},excessLabel:{width:e,height:e},label:{fontSize:"calc("+(null!=t?t:e)+" / 2.5)",lineHeight:"100%"!==e?null!=t?t:e:void 0}}}var Ua,ja,Ha,Va={"2xs":Fa("4"),xs:Fa("6"),sm:Fa("8"),md:Fa("12"),lg:Fa("16"),xl:Fa("24"),"2xl":Fa("32"),full:Fa("100%")},Ga={parts:ua.keys,baseStyle:function(e){return{badge:Ba(e),excessLabel:za(e),container:Na(e)}},sizes:Va,defaultProps:{size:"md"}},Wa={solid:function(e){var t=e.colorScheme,r=e.theme;return{bg:Gi(t+".500",ji(t+".500",.6)(r))(e),color:Gi("white","whiteAlpha.800")(e)}},subtle:function(e){var t=e.colorScheme,r=e.theme;return{bg:Gi(t+".100",ji(t+".200",.16)(r))(e),color:Gi(t+".800",t+".200")(e)}},outline:function(e){var t=e.colorScheme,r=e.theme,n=ji(t+".200",.8)(r),i=Gi(Ui(r,t+".500"),n)(e);return{color:i,boxShadow:"inset 0 0 0px 1px "+i}}},qa={baseStyle:{px:1,textTransform:"uppercase",fontSize:"xs",borderRadius:"sm",fontWeight:"bold"},variants:Wa,defaultProps:{variant:"subtle",colorScheme:"gray"}},Ya={parts:ca.keys,baseStyle:{link:{transitionProperty:"common",transitionDuration:"fast",transitionTimingFunction:"ease-out",cursor:"pointer",textDecoration:"none",outline:"none",color:"inherit",_hover:{textDecoration:"underline"},_focus:{boxShadow:"outline"}}}},Xa=function(e){var t=e.colorScheme,r=e.theme;if("gray"===t)return{color:Gi("inherit","whiteAlpha.900")(e),_hover:{bg:Gi("gray.100","whiteAlpha.200")(e)},_active:{bg:Gi("gray.200","whiteAlpha.300")(e)}};var n=ji(t+".200",.12)(r),i=ji(t+".200",.24)(r);return{color:Gi(t+".600",t+".200")(e),bg:"transparent",_hover:{bg:Gi(t+".50",n)(e)},_active:{bg:Gi(t+".100",i)(e)}}},Qa={yellow:{bg:"yellow.400",color:"black",hoverBg:"yellow.500",activeBg:"yellow.600"},cyan:{bg:"cyan.400",color:"black",hoverBg:"cyan.500",activeBg:"cyan.600"}},Ja={ghost:Xa,outline:function(e){var t=e.colorScheme,r=Gi("gray.200","whiteAlpha.300")(e);return mi({border:"1px solid",borderColor:"gray"===t?r:"currentColor"},Xa(e))},solid:function(e){var t,r=e.colorScheme;if("gray"===r){var n=Gi("gray.100","whiteAlpha.200")(e);return{bg:n,_hover:{bg:Gi("gray.200","whiteAlpha.300")(e),_disabled:{bg:n}},_active:{bg:Gi("gray.300","whiteAlpha.400")(e)}}}var i=null!=(t=Qa[r])?t:{},a=i.bg,o=void 0===a?r+".500":a,s=i.color,l=void 0===s?"white":s,u=i.hoverBg,c=void 0===u?r+".600":u,h=i.activeBg,d=void 0===h?r+".700":h,p=Gi(o,r+".200")(e);return{bg:p,color:Gi(l,"gray.800")(e),_hover:{bg:Gi(c,r+".300")(e),_disabled:{bg:p}},_active:{bg:Gi(d,r+".400")(e)}}},link:function(e){var t=e.colorScheme;return{padding:0,height:"auto",lineHeight:"normal",verticalAlign:"baseline",color:Gi(t+".500",t+".200")(e),_hover:{textDecoration:"underline",_disabled:{textDecoration:"none"}},_active:{color:Gi(t+".700",t+".500")(e)}}},unstyled:{bg:"none",color:"inherit",display:"inline",lineHeight:"inherit",m:0,p:0}},Za={baseStyle:{lineHeight:"1.2",borderRadius:"md",fontWeight:"semibold",transitionProperty:"common",transitionDuration:"normal",_focus:{boxShadow:"outline"},_disabled:{opacity:.4,cursor:"not-allowed",boxShadow:"none"},_hover:{_disabled:{bg:"initial"}}},variants:Ja,sizes:{lg:{h:12,minW:12,fontSize:"lg",px:6},md:{h:10,minW:10,fontSize:"md",px:4},sm:{h:8,minW:8,fontSize:"sm",px:3},xs:{h:6,minW:6,fontSize:"xs",px:2}},defaultProps:{variant:"solid",size:"md",colorScheme:"gray"}},Ka=function(e){var t=e.colorScheme;return{w:"100%",transitionProperty:"box-shadow",transitionDuration:"normal",border:"2px solid",borderRadius:"sm",borderColor:"inherit",color:"white",_checked:{bg:Gi(t+".500",t+".200")(e),borderColor:Gi(t+".500",t+".200")(e),color:Gi("white","gray.900")(e),_hover:{bg:Gi(t+".600",t+".300")(e),borderColor:Gi(t+".600",t+".300")(e)},_disabled:{borderColor:Gi("gray.200","transparent")(e),bg:Gi("gray.200","whiteAlpha.300")(e),color:Gi("gray.500","whiteAlpha.500")(e)}},_indeterminate:{bg:Gi(t+".500",t+".200")(e),borderColor:Gi(t+".500",t+".200")(e),color:Gi("white","gray.900")(e)},_disabled:{bg:Gi("gray.100","whiteAlpha.100")(e),borderColor:Gi("gray.100","transparent")(e)},_focus:{boxShadow:"outline"},_invalid:{borderColor:Gi("red.500","red.300")(e)}}},$a={_disabled:{cursor:"not-allowed"}},eo={userSelect:"none",_disabled:{opacity:.4}},to={transitionProperty:"transform",transitionDuration:"normal"},ro={parts:ha.keys,baseStyle:function(e){return{icon:to,container:$a,control:Ka(e),label:eo}},sizes:{sm:{control:{h:3,w:3},label:{fontSize:"sm"},icon:{fontSize:"0.45rem"}},md:{control:{w:4,h:4},label:{fontSize:"md"},icon:{fontSize:"0.625rem"}},lg:{control:{w:5,h:5},label:{fontSize:"lg"},icon:{fontSize:"0.625rem"}}},defaultProps:{size:"md",colorScheme:"blue"}},no=oa("close-button-size"),io={baseStyle:function(e){var t=Gi("blackAlpha.100","whiteAlpha.100")(e),r=Gi("blackAlpha.200","whiteAlpha.200")(e);return{w:[no.reference],h:[no.reference],borderRadius:"md",transitionProperty:"common",transitionDuration:"normal",_disabled:{opacity:.4,cursor:"not-allowed",boxShadow:"none"},_hover:{bg:t},_active:{bg:r},_focus:{boxShadow:"outline"}}},sizes:{lg:(Ua={},Ua[no.variable]="40px",Ua.fontSize="16px",Ua),md:(ja={},ja[no.variable]="32px",ja.fontSize="12px",ja),sm:(Ha={},Ha[no.variable]="24px",Ha.fontSize="10px",Ha)},defaultProps:{size:"md"}},ao={baseStyle:{fontFamily:"mono",fontSize:"sm",px:"0.2em",borderRadius:"sm"},variants:qa.variants,defaultProps:qa.defaultProps};function oo(e){return"full"===e?{dialog:{maxW:"100vw",h:"100vh"}}:{dialog:{maxW:e}}}var so={bg:"blackAlpha.600",zIndex:"overlay"},lo={display:"flex",zIndex:"modal",justifyContent:"center"},uo=function(e){return mi({},e.isFullHeight&&{height:"100vh"},{zIndex:"modal",maxH:"100vh",bg:Gi("white","gray.700")(e),color:"inherit",boxShadow:Gi("lg","dark-lg")(e)})},co={px:6,py:4,fontSize:"xl",fontWeight:"semibold"},ho={position:"absolute",top:2,insetEnd:3},po={px:6,py:2,flex:1,overflow:"auto"},fo={px:6,py:4},mo={xs:oo("xs"),sm:oo("md"),md:oo("lg"),lg:oo("2xl"),xl:oo("4xl"),full:oo("full")},go={parts:da.keys,baseStyle:function(e){return{overlay:so,dialogContainer:lo,dialog:uo(e),header:co,closeButton:ho,body:po,footer:fo}},sizes:mo,defaultProps:{size:"xs"}},vo={parts:pa.keys,baseStyle:{preview:{borderRadius:"md",py:"3px",transitionProperty:"common",transitionDuration:"normal"},input:{borderRadius:"md",py:"3px",transitionProperty:"common",transitionDuration:"normal",width:"full",_focus:{boxShadow:"outline"},_placeholder:{opacity:.6}},textarea:{borderRadius:"md",py:"3px",transitionProperty:"common",transitionDuration:"normal",width:"full",_focus:{boxShadow:"outline"},_placeholder:{opacity:.6}}}},yo=function(e){return{marginStart:1,color:Gi("red.500","red.300")(e)}},xo=function(e){return{mt:2,color:Gi("gray.500","whiteAlpha.600")(e),lineHeight:"normal",fontSize:"sm"}},bo={parts:fa.keys,baseStyle:function(e){return{container:{width:"100%",position:"relative"},requiredIndicator:yo(e),helperText:xo(e)}}},wo=function(e){return{color:Gi("red.500","red.300")(e),mt:2,fontSize:"sm",lineHeight:"normal"}},So=function(e){return{marginEnd:"0.5em",color:Gi("red.500","red.300")(e)}},_o={parts:ma.keys,baseStyle:function(e){return{text:wo(e),icon:So(e)}}},Ao={lg:{fontSize:"lg",px:4,h:12,borderRadius:"md"},md:{fontSize:"md",px:4,h:10,borderRadius:"md"},sm:{fontSize:"sm",px:3,h:8,borderRadius:"sm"},xs:{fontSize:"xs",px:2,h:6,borderRadius:"sm"}},Mo={lg:{field:Ao.lg,addon:Ao.lg},md:{field:Ao.md,addon:Ao.md},sm:{field:Ao.sm,addon:Ao.sm},xs:{field:Ao.xs,addon:Ao.xs}};function Eo(e){var t=e.focusBorderColor,r=e.errorBorderColor;return{focusBorderColor:t||Gi("blue.500","blue.300")(e),errorBorderColor:r||Gi("red.500","red.300")(e)}}var Co={outline:function(e){var t=e.theme,r=Eo(e),n=r.focusBorderColor,i=r.errorBorderColor;return{field:{border:"1px solid",borderColor:"inherit",bg:"inherit",_hover:{borderColor:Gi("gray.300","whiteAlpha.400")(e)},_readOnly:{boxShadow:"none !important",userSelect:"all"},_disabled:{opacity:.4,cursor:"not-allowed"},_invalid:{borderColor:Ui(t,i),boxShadow:"0 0 0 1px "+Ui(t,i)},_focus:{zIndex:1,borderColor:Ui(t,n),boxShadow:"0 0 0 1px "+Ui(t,n)}},addon:{border:"1px solid",borderColor:Gi("inherit","whiteAlpha.50")(e),bg:Gi("gray.100","whiteAlpha.300")(e)}}},filled:function(e){var t=e.theme,r=Eo(e),n=r.focusBorderColor,i=r.errorBorderColor;return{field:{border:"2px solid",borderColor:"transparent",bg:Gi("gray.100","whiteAlpha.50")(e),_hover:{bg:Gi("gray.200","whiteAlpha.100")(e)},_readOnly:{boxShadow:"none !important",userSelect:"all"},_disabled:{opacity:.4,cursor:"not-allowed"},_invalid:{borderColor:Ui(t,i)},_focus:{bg:"transparent",borderColor:Ui(t,n)}},addon:{border:"2px solid",borderColor:"transparent",bg:Gi("gray.100","whiteAlpha.50")(e)}}},flushed:function(e){var t=e.theme,r=Eo(e),n=r.focusBorderColor,i=r.errorBorderColor;return{field:{borderBottom:"1px solid",borderColor:"inherit",borderRadius:0,px:0,bg:"transparent",_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:Ui(t,i),boxShadow:"0px 1px 0px 0px "+Ui(t,i)},_focus:{borderColor:Ui(t,n),boxShadow:"0px 1px 0px 0px "+Ui(t,n)}},addon:{borderBottom:"2px solid",borderColor:"inherit",borderRadius:0,px:0,bg:"transparent"}}},unstyled:{field:{bg:"transparent",px:0,height:"auto"},addon:{bg:"transparent",px:0,height:"auto"}}},To={parts:ga.keys,baseStyle:{field:{width:"100%",minWidth:0,outline:0,position:"relative",appearance:"none",transitionProperty:"common",transitionDuration:"normal"}},sizes:Mo,variants:Co,defaultProps:{size:"md",variant:"outline"}},Do={baseStyle:function(e){return{bg:Gi("gray.100","whiteAlpha")(e),borderRadius:"md",borderWidth:"1px",borderBottomWidth:"3px",fontSize:"0.8em",fontWeight:"bold",lineHeight:"normal",px:"0.4em",whiteSpace:"nowrap"}}},Lo={parts:va.keys,baseStyle:{container:{},item:{},icon:{marginEnd:"0.5rem",display:"inline",verticalAlign:"text-bottom"}}},Po=function(e){return{bg:Gi("#fff","gray.700")(e),boxShadow:Gi("sm","dark-lg")(e),color:"inherit",minW:"3xs",py:"2",zIndex:1,borderRadius:"md",borderWidth:"1px"}},Ro=function(e){return{py:"0.4rem",px:"0.8rem",transitionProperty:"background",transitionDuration:"ultra-fast",transitionTimingFunction:"ease-in",_focus:{bg:Gi("gray.100","whiteAlpha.100")(e)},_active:{bg:Gi("gray.200","whiteAlpha.200")(e)},_expanded:{bg:Gi("gray.100","whiteAlpha.100")(e)},_disabled:{opacity:.4,cursor:"not-allowed"}}},Oo={mx:4,my:2,fontWeight:"semibold",fontSize:"sm"},ko={opacity:.6},Io={border:0,borderBottom:"1px solid",borderColor:"inherit",my:"0.5rem",opacity:.6},Bo={transitionProperty:"common",transitionDuration:"normal"},zo={parts:ya.keys,baseStyle:function(e){return{button:Bo,list:Po(e),item:Ro(e),groupTitle:Oo,command:ko,divider:Io}}},No={bg:"blackAlpha.600",zIndex:"modal"},Fo=function(e){return{display:"flex",zIndex:"modal",justifyContent:"center",alignItems:e.isCentered?"center":"flex-start",overflow:"inside"===e.scrollBehavior?"hidden":"auto"}},Uo=function(e){var t=e.scrollBehavior;return{borderRadius:"md",bg:Gi("white","gray.700")(e),color:"inherit",my:"3.75rem",zIndex:"modal",maxH:"inside"===t?"calc(100% - 7.5rem)":void 0,boxShadow:Gi("lg","dark-lg")(e)}},jo={px:6,py:4,fontSize:"xl",fontWeight:"semibold"},Ho={position:"absolute",top:2,insetEnd:3},Vo=function(e){return{px:6,py:2,flex:1,overflow:"inside"===e.scrollBehavior?"auto":void 0}},Go={px:6,py:4};function Wo(e){return"full"===e?{dialog:{maxW:"100vw",minH:"100vh","@supports(min-height: -webkit-fill-available)":{minH:"-webkit-fill-available"},my:0}}:{dialog:{maxW:e}}}var qo,Yo,Xo,Qo={xs:Wo("xs"),sm:Wo("sm"),md:Wo("md"),lg:Wo("lg"),xl:Wo("xl"),"2xl":Wo("2xl"),"3xl":Wo("3xl"),"4xl":Wo("4xl"),"5xl":Wo("5xl"),"6xl":Wo("6xl"),full:Wo("full")},Jo={parts:xa.keys,baseStyle:function(e){return{overlay:No,dialogContainer:Fo(e),dialog:Uo(e),header:jo,closeButton:Ho,body:Vo(e),footer:Go}},sizes:Qo,defaultProps:{size:"md"}},Zo=To.variants,Ko=To.defaultProps,$o=oa("number-input-stepper-width"),es=oa("number-input-input-padding"),ts=na($o).add("0.5rem").toString(),rs=((qo={})[$o.variable]="24px",qo[es.variable]=ts,qo),ns=null!=(Yo=null==(Xo=To.baseStyle)?void 0:Xo.field)?Yo:{},is={width:[$o.reference]},as=function(e){return{borderStart:"1px solid",borderStartColor:Gi("inherit","whiteAlpha.300")(e),color:Gi("inherit","whiteAlpha.800")(e),_active:{bg:Gi("gray.200","whiteAlpha.300")(e)},_disabled:{opacity:.4,cursor:"not-allowed"}}};function os(e){var t,r,n=To.sizes[e],i={lg:"md",md:"md",sm:"sm",xs:"sm"},a=null!=(t=null==(r=n.field)?void 0:r.fontSize)?t:"md",o=Pa.fontSizes[a.toString()];return{field:mi({},n.field,{paddingInlineEnd:es.reference,verticalAlign:"top"}),stepper:{fontSize:na(o).multiply(.75).toString(),_first:{borderTopEndRadius:i[e]},_last:{borderBottomEndRadius:i[e],mt:"-1px",borderTopWidth:1}}}}var ss,ls,us,cs,hs,ds,ps,fs,ms,gs,vs,ys,xs,bs,ws,Ss={xs:os("xs"),sm:os("sm"),md:os("md"),lg:os("lg")},_s={parts:ba.keys,baseStyle:function(e){return{root:rs,field:ns,stepperGroup:is,stepper:as(e)}},sizes:Ss,variants:Zo,defaultProps:Ko},As={baseStyle:mi({},To.baseStyle.field,{textAlign:"center"}),sizes:{lg:{fontSize:"lg",w:12,h:12,borderRadius:"md"},md:{fontSize:"md",w:10,h:10,borderRadius:"md"},sm:{fontSize:"sm",w:8,h:8,borderRadius:"sm"},xs:{fontSize:"xs",w:6,h:6,borderRadius:"sm"}},variants:{outline:function(e){var t;return null!=(t=To.variants.outline(e).field)?t:{}},flushed:function(e){var t;return null!=(t=To.variants.flushed(e).field)?t:{}},filled:function(e){var t;return null!=(t=To.variants.filled(e).field)?t:{}},unstyled:null!=(ss=To.variants.unstyled.field)?ss:{}},defaultProps:To.defaultProps},Ms=oa("popper-bg"),Es=oa("popper-arrow-bg"),Cs=oa("popper-arrow-shadow-color"),Ts={zIndex:10},Ds=function(e){var t,r=Gi("white","gray.700")(e),n=Gi("gray.200","whiteAlpha.300")(e);return(t={})[Ms.variable]="colors."+r,t.bg=Ms.reference,t[Es.variable]=Ms.reference,t[Cs.variable]="colors."+n,t.width="xs",t.border="1px solid",t.borderColor="inherit",t.borderRadius="md",t.boxShadow="sm",t.zIndex="inherit",t._focus={outline:0,boxShadow:"outline"},t},Ls={px:3,py:2,borderBottomWidth:"1px"},Ps={px:3,py:2},Rs={px:3,py:2,borderTopWidth:"1px"},Os={position:"absolute",borderRadius:"md",top:1,insetEnd:2,padding:2},ks={parts:wa.keys,baseStyle:function(e){return{popper:Ts,content:Ds(e),header:Ls,body:Ps,footer:Rs,arrow:{},closeButton:Os}}},Is={lineHeight:"1",fontSize:"0.25em",fontWeight:"bold",color:"white"},Bs=function(e){return{bg:Gi("gray.100","whiteAlpha.300")(e)}},zs=function(e){return mi({transitionProperty:"common",transitionDuration:"slow"},function(e){var t=e.colorScheme,r=e.theme,n=e.isIndeterminate,i=e.hasStripe,a=Gi(Hi(),Hi("1rem","rgba(0,0,0,0.1)"))(e),o=Gi(t+".500",t+".200")(e),s="linear-gradient(\n    to right,\n    transparent 0%,\n    "+Ui(r,o)+" 50%,\n    transparent 100%\n  )";return mi({},!n&&i&&a,n?{bgImage:s}:{bgColor:o})}(e))},Ns={parts:Sa.keys,sizes:{xs:{track:{h:"0.25rem"}},sm:{track:{h:"0.5rem"}},md:{track:{h:"0.75rem"}},lg:{track:{h:"1rem"}}},baseStyle:function(e){return{label:Is,filledTrack:zs(e),track:Bs(e)}},defaultProps:{size:"md",colorScheme:"blue"}},Fs=function(e){var t=ro.baseStyle(e).control,r=void 0===t?{}:t;return mi({},r,{borderRadius:"full",_checked:mi({},r._checked,{_before:{content:'""',display:"inline-block",pos:"relative",w:"50%",h:"50%",borderRadius:"50%",bg:"currentColor"}})})},Us={parts:_a.keys,baseStyle:function(e){return{label:ro.baseStyle(e).label,container:ro.baseStyle(e).container,control:Fs(e)}},sizes:{md:{control:{w:4,h:4},label:{fontSize:"md"}},lg:{control:{w:5,h:5},label:{fontSize:"lg"}},sm:{control:{width:3,height:3},label:{fontSize:"sm"}}},defaultProps:{size:"md",colorScheme:"blue"}},js=function(e){return mi({},To.baseStyle.field,{bg:Gi("white","gray.700")(e),appearance:"none",paddingBottom:"1px",lineHeight:"normal","> option, > optgroup":{bg:Gi("white","gray.700")(e)}})},Hs={width:"1.5rem",height:"100%",insetEnd:"0.5rem",position:"relative",color:"currentColor",fontSize:"1.25rem",_disabled:{opacity:.5}},Vs={paddingInlineEnd:"2rem"},Gs=ke()({},To.sizes,{lg:{field:Vs},md:{field:Vs},sm:{field:Vs},xs:{field:Vs,icon:{insetEnd:"0.25rem"}}}),Ws={parts:Aa.keys,baseStyle:function(e){return{field:js(e),icon:Hs}},sizes:Gs,variants:To.variants,defaultProps:To.defaultProps},qs=function(e,t){return Pe({from:{borderColor:e,background:e},to:{borderColor:t,background:t}})},Ys={baseStyle:function(e){var t=Gi("gray.100","gray.800")(e),r=Gi("gray.400","gray.600")(e),n=e.startColor,i=void 0===n?t:n,a=e.endColor,o=void 0===a?r:a,s=e.speed,l=e.theme,u=Ui(l,i),c=Ui(l,o);return{opacity:.7,borderRadius:"2px",borderColor:u,background:c,animation:s+"s linear infinite alternate "+qs(u,c)}}},Xs={baseStyle:function(e){return{borderRadius:"md",fontWeight:"semibold",_focus:{boxShadow:"outline",padding:"1rem",position:"fixed",top:"1.5rem",insetStart:"1.5rem",bg:Gi("white","gray.700")(e)}}}},Qs=function(e){return mi({display:"inline-block",position:"relative",cursor:"pointer",_disabled:{opacity:.6,cursor:"default",pointerEvents:"none"}},Wi({orientation:e.orientation,vertical:{h:"100%"},horizontal:{w:"100%"}}))},Js=function(e){return{overflow:"hidden",borderRadius:"sm",bg:Gi("gray.200","whiteAlpha.200")(e),_disabled:{bg:Gi("gray.300","whiteAlpha.300")(e)}}},Zs=function(e){return mi({display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",outline:0,zIndex:1,borderRadius:"full",bg:"white",boxShadow:"base",border:"1px solid",borderColor:"transparent",transitionProperty:"transform",transitionDuration:"normal",_focus:{boxShadow:"outline"},_disabled:{bg:"gray.300"}},function(e){return Wi({orientation:e.orientation,vertical:{left:"50%",transform:"translateX(-50%)",_active:{transform:"translateX(-50%) scale(1.15)"}},horizontal:{top:"50%",transform:"translateY(-50%)",_active:{transform:"translateY(-50%) scale(1.15)"}}})}(e))},Ks=function(e){var t=e.colorScheme;return{width:"inherit",height:"inherit",bg:Gi(t+".500",t+".200")(e)}},$s={lg:function(e){return{thumb:{w:"16px",h:"16px"},track:Wi({orientation:e.orientation,horizontal:{h:"4px"},vertical:{w:"4px"}})}},md:function(e){return{thumb:{w:"14px",h:"14px"},track:Wi({orientation:e.orientation,horizontal:{h:"4px"},vertical:{w:"4px"}})}},sm:function(e){return{thumb:{w:"10px",h:"10px"},track:Wi({orientation:e.orientation,horizontal:{h:"2px"},vertical:{w:"2px"}})}}},el={parts:Ma.keys,sizes:$s,baseStyle:function(e){return{container:Qs(e),track:Js(e),thumb:Zs(e),filledTrack:Ks(e)}},defaultProps:{size:"md",colorScheme:"blue"}},tl=oa("spinner-size"),rl={baseStyle:{width:[tl.reference],height:[tl.reference]},sizes:{xs:(ls={},ls[tl.variable]="0.75rem",ls),sm:(us={},us[tl.variable]="1rem",us),md:(cs={},cs[tl.variable]="1.5rem",cs),lg:(hs={},hs[tl.variable]="2rem",hs),xl:(ds={},ds[tl.variable]="3rem",ds)},defaultProps:{size:"md"}},nl={parts:Ea.keys,baseStyle:{container:{},label:{fontWeight:"medium"},helpText:{opacity:.8,marginBottom:2},number:{verticalAlign:"baseline",fontWeight:"semibold"},icon:{marginEnd:1,w:"14px",h:"14px",verticalAlign:"middle"}},sizes:{md:{label:{fontSize:"sm"},helpText:{fontSize:"sm"},number:{fontSize:"2xl"}}},defaultProps:{size:"md"}},il=oa("switch-track-width"),al=oa("switch-track-height"),ol=oa("switch-track-diff"),sl=na.subtract(il,al),ll=oa("switch-thumb-x"),ul=function(e){var t=e.colorScheme;return{borderRadius:"full",p:"2px",width:[il.reference],height:[al.reference],transitionProperty:"common",transitionDuration:"fast",bg:Gi("gray.300","whiteAlpha.400")(e),_focus:{boxShadow:"outline"},_disabled:{opacity:.4,cursor:"not-allowed"},_checked:{bg:Gi(t+".500",t+".200")(e)}}},cl={bg:"white",transitionProperty:"transform",transitionDuration:"normal",borderRadius:"inherit",width:[al.reference],height:[al.reference],_checked:{transform:"translateX("+ll.reference+")"}},hl={sm:{container:(ps={},ps[il.variable]="1.375rem",ps[al.variable]="0.75rem",ps)},md:{container:(fs={},fs[il.variable]="1.875rem",fs[al.variable]="1rem",fs)},lg:{container:(ms={},ms[il.variable]="2.875rem",ms[al.variable]="1.5rem",ms)}},dl={parts:Ca.keys,baseStyle:function(e){var t,r;return{container:(r={},r[ol.variable]=sl,r[ll.variable]=ol.reference,r._rtl=(t={},t[ll.variable]=na(ol).negate().toString(),t),r),track:ul(e),thumb:cl}},sizes:hl,defaultProps:{size:"md",colorScheme:"blue"}},pl={"&[data-is-numeric=true]":{textAlign:"end"}},fl={simple:function(e){var t=e.colorScheme;return{th:mi({color:Gi("gray.600","gray.400")(e),borderBottom:"1px",borderColor:Gi(t+".100",t+".700")(e)},pl),td:mi({borderBottom:"1px",borderColor:Gi(t+".100",t+".700")(e)},pl),caption:{color:Gi("gray.600","gray.100")(e)},tfoot:{tr:{"&:last-of-type":{th:{borderBottomWidth:0}}}}}},striped:function(e){var t=e.colorScheme;return{th:mi({color:Gi("gray.600","gray.400")(e),borderBottom:"1px",borderColor:Gi(t+".100",t+".700")(e)},pl),td:mi({borderBottom:"1px",borderColor:Gi(t+".100",t+".700")(e)},pl),caption:{color:Gi("gray.600","gray.100")(e)},tbody:{tr:{"&:nth-of-type(odd)":{"th, td":{borderBottomWidth:"1px",borderColor:Gi(t+".100",t+".700")(e)},td:{background:Gi(t+".100",t+".700")(e)}}}},tfoot:{tr:{"&:last-of-type":{th:{borderBottomWidth:0}}}}}},unstyled:{}},ml={parts:Ta.keys,baseStyle:{table:{fontVariantNumeric:"lining-nums tabular-nums",borderCollapse:"collapse",width:"full"},th:{fontFamily:"heading",fontWeight:"bold",textTransform:"uppercase",letterSpacing:"wider",textAlign:"start"},td:{textAlign:"start"},caption:{mt:4,fontFamily:"heading",textAlign:"center",fontWeight:"medium"}},variants:fl,sizes:{sm:{th:{px:"4",py:"1",lineHeight:"4",fontSize:"xs"},td:{px:"4",py:"2",fontSize:"sm",lineHeight:"4"},caption:{px:"4",py:"2",fontSize:"xs"}},md:{th:{px:"6",py:"3",lineHeight:"4",fontSize:"xs"},td:{px:"6",py:"4",lineHeight:"5"},caption:{px:"6",py:"2",fontSize:"sm"}},lg:{th:{px:"8",py:"4",lineHeight:"5",fontSize:"sm"},td:{px:"8",py:"5",lineHeight:"6"},caption:{px:"6",py:"2",fontSize:"md"}}},defaultProps:{variant:"simple",size:"md",colorScheme:"gray"}},gl=function(e){return{display:"vertical"===e.orientation?"flex":"block"}},vl=function(e){return{flex:e.isFitted?1:void 0,transitionProperty:"common",transitionDuration:"normal",_focus:{zIndex:1,boxShadow:"outline"}}},yl=function(e){var t=e.align,r=void 0===t?"start":t,n=e.orientation;return{justifyContent:{end:"flex-end",center:"center",start:"flex-start"}[r],flexDirection:"vertical"===n?"column":"row"}},xl={p:4},bl={line:function(e){var t,r,n=e.colorScheme,i=e.orientation,a="vertical"===i?"borderStart":"borderBottom",o="vertical"===i?"marginStart":"marginBottom";return{tablist:(t={},t[a]="2px solid",t.borderColor="inherit",t),tab:(r={},r[a]="2px solid",r.borderColor="transparent",r[o]="-2px",r._selected={color:Gi(n+".600",n+".300")(e),borderColor:"currentColor"},r._active={bg:Gi("gray.200","whiteAlpha.300")(e)},r._disabled={opacity:.4,cursor:"not-allowed"},r)}},enclosed:function(e){var t=e.colorScheme;return{tab:{borderTopRadius:"md",border:"1px solid",borderColor:"transparent",mb:"-1px",_selected:{color:Gi(t+".600",t+".300")(e),borderColor:"inherit",borderBottomColor:Gi("white","gray.800")(e)}},tablist:{mb:"-1px",borderBottom:"1px solid",borderColor:"inherit"}}},"enclosed-colored":function(e){var t=e.colorScheme;return{tab:{border:"1px solid",borderColor:"inherit",bg:Gi("gray.50","whiteAlpha.50")(e),mb:"-1px",_notLast:{marginEnd:"-1px"},_selected:{bg:Gi("#fff","gray.800")(e),color:Gi(t+".600",t+".300")(e),borderColor:"inherit",borderTopColor:"currentColor",borderBottomColor:"transparent"}},tablist:{mb:"-1px",borderBottom:"1px solid",borderColor:"inherit"}}},"soft-rounded":function(e){var t=e.colorScheme,r=e.theme;return{tab:{borderRadius:"full",fontWeight:"semibold",color:"gray.600",_selected:{color:Ui(r,t+".700"),bg:Ui(r,t+".100")}}}},"solid-rounded":function(e){var t=e.colorScheme;return{tab:{borderRadius:"full",fontWeight:"semibold",color:Gi("gray.600","inherit")(e),_selected:{color:Gi("#fff","gray.800")(e),bg:Gi(t+".600",t+".300")(e)}}}},unstyled:{}},wl={parts:Da.keys,baseStyle:function(e){return{root:gl(e),tab:vl(e),tablist:yl(e),tabpanel:xl}},sizes:{sm:{tab:{py:1,px:4,fontSize:"sm"}},md:{tab:{fontSize:"md",py:2,px:4}},lg:{tab:{fontSize:"lg",py:3,px:4}}},variants:bl,defaultProps:{size:"md",variant:"line",colorScheme:"blue"}},Sl={subtle:function(e){return{container:qa.variants.subtle(e)}},solid:function(e){return{container:qa.variants.solid(e)}},outline:function(e){return{container:qa.variants.outline(e)}}},_l={parts:La.keys,variants:Sl,baseStyle:{container:{fontWeight:"medium",lineHeight:1.2,outline:0,_focus:{boxShadow:"outline"}},label:{lineHeight:1.2,overflow:"visible"},closeButton:{fontSize:"18px",w:"1.25rem",h:"1.25rem",transitionProperty:"common",transitionDuration:"normal",borderRadius:"full",marginStart:"0.375rem",marginEnd:"-1",opacity:.5,_disabled:{opacity:.4},_focus:{boxShadow:"outline",bg:"rgba(0, 0, 0, 0.14)"},_hover:{opacity:.8},_active:{opacity:1}}},sizes:{sm:{container:{minH:"1.25rem",minW:"1.25rem",fontSize:"xs",px:2,borderRadius:"md"},closeButton:{marginEnd:"-2px",marginStart:"0.35rem"}},md:{container:{minH:"1.5rem",minW:"1.5rem",fontSize:"sm",borderRadius:"md",px:2}},lg:{container:{minH:8,minW:8,fontSize:"md",borderRadius:"md",px:3}}},defaultProps:{size:"md",variant:"subtle",colorScheme:"gray"}},Al=mi({},To.baseStyle.field,{paddingY:"8px",minHeight:"80px",lineHeight:"short",verticalAlign:"top"}),Ml={outline:function(e){var t;return null!=(t=To.variants.outline(e).field)?t:{}},flushed:function(e){var t;return null!=(t=To.variants.flushed(e).field)?t:{}},filled:function(e){var t;return null!=(t=To.variants.filled(e).field)?t:{}},unstyled:null!=(gs=To.variants.unstyled.field)?gs:{}},El={baseStyle:Al,sizes:{xs:null!=(vs=To.sizes.xs.field)?vs:{},sm:null!=(ys=To.sizes.sm.field)?ys:{},md:null!=(xs=To.sizes.md.field)?xs:{},lg:null!=(bs=To.sizes.lg.field)?bs:{}},variants:Ml,defaultProps:{size:"md",variant:"outline"}},Cl=oa("tooltip-bg"),Tl=oa("popper-arrow-bg"),Dl={baseStyle:function(e){var t,r=Gi("gray.700","gray.300")(e);return(t={})[Cl.variable]="colors."+r,t.px="8px",t.py="2px",t.bg=[Cl.reference],t[Tl.variable]=[Cl.reference],t.color=Gi("whiteAlpha.900","gray.900")(e),t.borderRadius="sm",t.fontWeight="medium",t.fontSize="sm",t.boxShadow="md",t.maxW="320px",t.zIndex="tooltip",t}},Ll=Object.freeze({__proto__:null,Accordion:Ra,Alert:Ia,Avatar:Ga,Badge:qa,Breadcrumb:Ya,Button:Za,Checkbox:ro,CloseButton:io,Code:ao,Container:{baseStyle:{w:"100%",mx:"auto",maxW:"60ch",px:"1rem"}},Divider:{baseStyle:{opacity:.6,borderColor:"inherit"},variants:{solid:{borderStyle:"solid"},dashed:{borderStyle:"dashed"}},defaultProps:{variant:"solid"}},Drawer:go,Editable:vo,Form:bo,FormError:_o,FormLabel:{baseStyle:{fontSize:"md",marginEnd:3,mb:2,fontWeight:"medium",transitionProperty:"common",transitionDuration:"normal",opacity:1,_disabled:{opacity:.4}}},Heading:{baseStyle:{fontFamily:"heading",fontWeight:"bold"},sizes:{"4xl":{fontSize:["6xl",null,"7xl"],lineHeight:1},"3xl":{fontSize:["5xl",null,"6xl"],lineHeight:1},"2xl":{fontSize:["4xl",null,"5xl"],lineHeight:[1.2,null,1]},xl:{fontSize:["3xl",null,"4xl"],lineHeight:[1.33,null,1.2]},lg:{fontSize:["2xl",null,"3xl"],lineHeight:[1.33,null,1.2]},md:{fontSize:"xl",lineHeight:1.2},sm:{fontSize:"md",lineHeight:1.2},xs:{fontSize:"sm",lineHeight:1.2}},defaultProps:{size:"xl"}},Input:To,Kbd:Do,Link:{baseStyle:{transitionProperty:"common",transitionDuration:"fast",transitionTimingFunction:"ease-out",cursor:"pointer",textDecoration:"none",outline:"none",color:"inherit",_hover:{textDecoration:"underline"},_focus:{boxShadow:"outline"}}},List:Lo,Menu:zo,Modal:Jo,NumberInput:_s,PinInput:As,Popover:ks,Progress:Ns,Radio:Us,Select:Ws,Skeleton:Ys,SkipLink:Xs,Slider:el,Spinner:rl,Stat:nl,Switch:dl,Table:ml,Tabs:wl,Tag:_l,Textarea:El,Tooltip:Dl}),Pl=mi({breakpoints:(ct({condition:!0,message:["[chakra-ui]: createBreakpoints(...) will be deprecated pretty soon","simply pass the breakpoints as an object. Remove the createBreakpoint(..) call"].join("")}),qi({base:"0em"},{sm:"30em",md:"48em",lg:"62em",xl:"80em","2xl":"96em"})),zIndices:{hide:-1,auto:"auto",base:0,docked:10,dropdown:1e3,sticky:1100,banner:1200,overlay:1300,modal:1400,popover:1500,skipLink:1600,toast:1700,tooltip:1800},radii:{none:"0",sm:"0.125rem",base:"0.25rem",md:"0.375rem",lg:"0.5rem",xl:"0.75rem","2xl":"1rem","3xl":"1.5rem",full:"9999px"},blur:{none:0,sm:"4px",base:"8px",md:"12px",lg:"16px",xl:"24px","2xl":"40px","3xl":"64px"},colors:{transparent:"transparent",current:"currentColor",black:"#000000",white:"#FFFFFF",whiteAlpha:{50:"rgba(255, 255, 255, 0.04)",100:"rgba(255, 255, 255, 0.06)",200:"rgba(255, 255, 255, 0.08)",300:"rgba(255, 255, 255, 0.16)",400:"rgba(255, 255, 255, 0.24)",500:"rgba(255, 255, 255, 0.36)",600:"rgba(255, 255, 255, 0.48)",700:"rgba(255, 255, 255, 0.64)",800:"rgba(255, 255, 255, 0.80)",900:"rgba(255, 255, 255, 0.92)"},blackAlpha:{50:"rgba(0, 0, 0, 0.04)",100:"rgba(0, 0, 0, 0.06)",200:"rgba(0, 0, 0, 0.08)",300:"rgba(0, 0, 0, 0.16)",400:"rgba(0, 0, 0, 0.24)",500:"rgba(0, 0, 0, 0.36)",600:"rgba(0, 0, 0, 0.48)",700:"rgba(0, 0, 0, 0.64)",800:"rgba(0, 0, 0, 0.80)",900:"rgba(0, 0, 0, 0.92)"},gray:{50:"#F7FAFC",100:"#EDF2F7",200:"#E2E8F0",300:"#CBD5E0",400:"#A0AEC0",500:"#718096",600:"#4A5568",700:"#2D3748",800:"#1A202C",900:"#171923"},red:{50:"#FFF5F5",100:"#FED7D7",200:"#FEB2B2",300:"#FC8181",400:"#F56565",500:"#E53E3E",600:"#C53030",700:"#9B2C2C",800:"#822727",900:"#63171B"},orange:{50:"#FFFAF0",100:"#FEEBC8",200:"#FBD38D",300:"#F6AD55",400:"#ED8936",500:"#DD6B20",600:"#C05621",700:"#9C4221",800:"#7B341E",900:"#652B19"},yellow:{50:"#FFFFF0",100:"#FEFCBF",200:"#FAF089",300:"#F6E05E",400:"#ECC94B",500:"#D69E2E",600:"#B7791F",700:"#975A16",800:"#744210",900:"#5F370E"},green:{50:"#F0FFF4",100:"#C6F6D5",200:"#9AE6B4",300:"#68D391",400:"#48BB78",500:"#38A169",600:"#2F855A",700:"#276749",800:"#22543D",900:"#1C4532"},teal:{50:"#E6FFFA",100:"#B2F5EA",200:"#81E6D9",300:"#4FD1C5",400:"#38B2AC",500:"#319795",600:"#2C7A7B",700:"#285E61",800:"#234E52",900:"#1D4044"},blue:{50:"#ebf8ff",100:"#bee3f8",200:"#90cdf4",300:"#63b3ed",400:"#4299e1",500:"#3182ce",600:"#2b6cb0",700:"#2c5282",800:"#2a4365",900:"#1A365D"},cyan:{50:"#EDFDFD",100:"#C4F1F9",200:"#9DECF9",300:"#76E4F7",400:"#0BC5EA",500:"#00B5D8",600:"#00A3C4",700:"#0987A0",800:"#086F83",900:"#065666"},purple:{50:"#FAF5FF",100:"#E9D8FD",200:"#D6BCFA",300:"#B794F4",400:"#9F7AEA",500:"#805AD5",600:"#6B46C1",700:"#553C9A",800:"#44337A",900:"#322659"},pink:{50:"#FFF5F7",100:"#FED7E2",200:"#FBB6CE",300:"#F687B3",400:"#ED64A6",500:"#D53F8C",600:"#B83280",700:"#97266D",800:"#702459",900:"#521B41"},linkedin:{50:"#E8F4F9",100:"#CFEDFB",200:"#9BDAF3",300:"#68C7EC",400:"#34B3E4",500:"#00A0DC",600:"#008CC9",700:"#0077B5",800:"#005E93",900:"#004471"},facebook:{50:"#E8F4F9",100:"#D9DEE9",200:"#B7C2DA",300:"#6482C0",400:"#4267B2",500:"#385898",600:"#314E89",700:"#29487D",800:"#223B67",900:"#1E355B"},messenger:{50:"#D0E6FF",100:"#B9DAFF",200:"#A2CDFF",300:"#7AB8FF",400:"#2E90FF",500:"#0078FF",600:"#0063D1",700:"#0052AC",800:"#003C7E",900:"#002C5C"},whatsapp:{50:"#dffeec",100:"#b9f5d0",200:"#90edb3",300:"#65e495",400:"#3cdd78",500:"#22c35e",600:"#179848",700:"#0c6c33",800:"#01421c",900:"#001803"},twitter:{50:"#E5F4FD",100:"#C8E9FB",200:"#A8DCFA",300:"#83CDF7",400:"#57BBF5",500:"#1DA1F2",600:"#1A94DA",700:"#1681BF",800:"#136B9E",900:"#0D4D71"},telegram:{50:"#E3F2F9",100:"#C5E4F3",200:"#A2D4EC",300:"#7AC1E4",400:"#47A9DA",500:"#0088CC",600:"#007AB8",700:"#006BA1",800:"#005885",900:"#003F5E"}}},Pa,{sizes:gi,shadows:{xs:"0 0 0 1px rgba(0, 0, 0, 0.05)",sm:"0 1px 2px 0 rgba(0, 0, 0, 0.05)",base:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)",md:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",lg:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",xl:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)","2xl":"0 25px 50px -12px rgba(0, 0, 0, 0.25)",outline:"0 0 0 3px rgba(66, 153, 225, 0.6)",inner:"inset 0 2px 4px 0 rgba(0,0,0,0.06)",none:"none","dark-lg":"rgba(0, 0, 0, 0.1) 0px 0px 0px 1px, rgba(0, 0, 0, 0.2) 0px 5px 10px, rgba(0, 0, 0, 0.4) 0px 15px 40px"},space:fi,borders:{none:0,"1px":"1px solid","2px":"2px solid","4px":"4px solid","8px":"8px solid"},transition:{property:{common:"background-color, border-color, color, fill, stroke, opacity, box-shadow, transform",colors:"background-color, border-color, color, fill, stroke",dimensions:"width, height",position:"left, right, top, bottom",background:"background-color, background-image, background-position"},easing:{"ease-in":"cubic-bezier(0.4, 0, 1, 1)","ease-out":"cubic-bezier(0, 0, 0.2, 1)","ease-in-out":"cubic-bezier(0.4, 0, 0.2, 1)"},duration:{"ultra-fast":"50ms",faster:"100ms",fast:"150ms",normal:"200ms",slow:"300ms",slower:"400ms","ultra-slow":"500ms"}}}),Rl=mi({direction:"ltr"},Pl,{components:Ll,styles:{global:function(e){return{body:{fontFamily:"body",color:Gi("gray.800","whiteAlpha.900")(e),bg:Gi("white","gray.800")(e),transitionProperty:"background-color",transitionDuration:"normal",lineHeight:"base"},"*::placeholder":{color:Gi("gray.400","whiteAlpha.400")(e)},"*, *::before, &::after":{borderColor:Gi("gray.200","whiteAlpha.300")(e),wordWrap:"break-word"}}}},config:{useSystemColorMode:!1,initialColorMode:"light",cssVarPrefix:"chakra"}}),Ol=function(t){var r=t.children,n=t.colorModeManager,i=t.portalZIndex,a=t.resetCSS,o=void 0===a||a,s=t.theme,l=void 0===s?{}:s,u=t.environment,c=t.cssVarsRoot,h=e.createElement(Wt,{environment:u},r);return e.createElement(bt,null,e.createElement(Xn,{theme:l,cssVarsRoot:c},e.createElement(nr,{colorModeManager:n,options:l.config},o&&e.createElement(Re,null),e.createElement(ei,null),i?e.createElement(Tt,{zIndex:i},h):h)))};Ol.defaultProps={theme:Rl},function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(ws||(ws={}));var kl="beforeunload";function Il(e){e.preventDefault(),e.returnValue=""}function Bl(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter((function(e){return e!==t}))}},call:function(t){e.forEach((function(e){return e&&e(t)}))}}}function zl(e){var t=e.pathname,r=void 0===t?"/":t,n=e.search,i=void 0===n?"":n,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(r+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(r+="#"===o.charAt(0)?o:"#"+o),r}function Nl(e){var t={};if(e){var r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));var n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function Fl(e,t){if(!e)throw new Error(t)}const Ul=(0,e.createContext)(null),jl=(0,e.createContext)(null),Hl=(0,e.createContext)({outlet:null,matches:[]});function Vl(t){return function(t){let r=(0,e.useContext)(Hl).outlet;return r?(0,e.createElement)(Ql.Provider,{value:t},r):r}(t.context)}function Gl(e){Fl(!1)}function Wl(t){let{basename:r="/",children:n=null,location:i,navigationType:a=ws.Pop,navigator:o,static:s=!1}=t;Yl()&&Fl(!1);let l=su(r),u=(0,e.useMemo)((()=>({basename:l,navigator:o,static:s})),[l,o,s]);"string"==typeof i&&(i=Nl(i));let{pathname:c="/",search:h="",hash:d="",state:p=null,key:f="default"}=i,m=(0,e.useMemo)((()=>{let e=au(c,l);return null==e?null:{pathname:e,search:h,hash:d,state:p,key:f}}),[l,c,h,d,p,f]);return null==m?null:(0,e.createElement)(Ul.Provider,{value:u},(0,e.createElement)(jl.Provider,{children:n,value:{location:m,navigationType:a}}))}function ql(t){let{children:r,location:n}=t;return function(t,r){Yl()||Fl(!1);let{matches:n}=(0,e.useContext)(Hl),i=n[n.length-1],a=i?i.params:{},o=(i&&i.pathname,i?i.pathnameBase:"/");i&&i.route;let s,l=Xl();if(r){var u;let e="string"==typeof r?Nl(r):r;"/"===o||(null==(u=e.pathname)?void 0:u.startsWith(o))||Fl(!1),s=e}else s=l;let c=s.pathname||"/",h=function(e,t,r){void 0===r&&(r="/");let n=au(("string"==typeof t?Nl(t):t).pathname||"/",r);if(null==n)return null;let i=Kl(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let r=e.length===t.length&&e.slice(0,-1).every(((e,r)=>e===t[r]));return r?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(i);let a=null;for(let e=0;null==a&&e<i.length;++e)a=ru(i[e],n);return a}(t,{pathname:"/"===o?c:c.slice(o.length)||"/"});return function(t,r){return void 0===r&&(r=[]),null==t?null:t.reduceRight(((n,i,a)=>(0,e.createElement)(Hl.Provider,{children:void 0!==i.route.element?i.route.element:(0,e.createElement)(Vl,null),value:{outlet:n,matches:r.concat(t.slice(0,a+1))}})),null)}(h&&h.map((e=>Object.assign({},e,{params:Object.assign({},a,e.params),pathname:ou([o,e.pathname]),pathnameBase:"/"===e.pathnameBase?o:ou([o,e.pathnameBase])}))),n)}(Zl(r),n)}function Yl(){return null!=(0,e.useContext)(jl)}function Xl(){return Yl()||Fl(!1),(0,e.useContext)(jl).location}const Ql=(0,e.createContext)(null);function Jl(t){let{matches:r}=(0,e.useContext)(Hl),{pathname:n}=Xl(),i=JSON.stringify(r.map((e=>e.pathnameBase)));return(0,e.useMemo)((()=>iu(t,JSON.parse(i),n)),[t,i,n])}function Zl(t){let r=[];return e.Children.forEach(t,(t=>{if(!(0,e.isValidElement)(t))return;if(t.type===e.Fragment)return void r.push.apply(r,Zl(t.props.children));t.type!==Gl&&Fl(!1);let n={caseSensitive:t.props.caseSensitive,element:t.props.element,index:t.props.index,path:t.props.path};t.props.children&&(n.children=Zl(t.props.children)),r.push(n)})),r}function Kl(e,t,r,n){return void 0===t&&(t=[]),void 0===r&&(r=[]),void 0===n&&(n=""),e.forEach(((e,i)=>{let a={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(a.relativePath.startsWith(n)||Fl(!1),a.relativePath=a.relativePath.slice(n.length));let o=ou([n,a.relativePath]),s=r.concat(a);e.children&&e.children.length>0&&(!0===e.index&&Fl(!1),Kl(e.children,t,s,o)),(null!=e.path||e.index)&&t.push({path:o,score:tu(o,e.index),routesMeta:s})})),t}const $l=/^:\w+$/,eu=e=>"*"===e;function tu(e,t){let r=e.split("/"),n=r.length;return r.some(eu)&&(n+=-2),t&&(n+=2),r.filter((e=>!eu(e))).reduce(((e,t)=>e+($l.test(t)?3:""===t?1:10)),n)}function ru(e,t){let{routesMeta:r}=e,n={},i="/",a=[];for(let e=0;e<r.length;++e){let o=r[e],s=e===r.length-1,l="/"===i?t:t.slice(i.length)||"/",u=nu({path:o.relativePath,caseSensitive:o.caseSensitive,end:s},l);if(!u)return null;Object.assign(n,u.params);let c=o.route;a.push({params:n,pathname:ou([i,u.pathname]),pathnameBase:ou([i,u.pathnameBase]),route:c}),"/"!==u.pathnameBase&&(i=ou([i,u.pathnameBase]))}return a}function nu(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=function(e,t,r){void 0===t&&(t=!1),void 0===r&&(r=!0);let n=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,((e,t)=>(n.push(t),"([^\\/]+)")));return e.endsWith("*")?(n.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):i+=r?"\\/*$":"(?:\\b|\\/|$)",[new RegExp(i,t?void 0:"i"),n]}(e.path,e.caseSensitive,e.end),i=t.match(r);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:n.reduce(((e,t,r)=>{if("*"===t){let e=s[r]||"";o=a.slice(0,a.length-e.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(t){return e}}(s[r]||""),e}),{}),pathname:a,pathnameBase:o,pattern:e}}function iu(e,t,r){let n,i="string"==typeof e?Nl(e):e,a=""===e||""===i.pathname?"/":i.pathname;if(null==a)n=r;else{let e=t.length-1;if(a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}n=e>=0?t[e]:"/"}let o=function(e,t){void 0===t&&(t="/");let{pathname:r,search:n="",hash:i=""}="string"==typeof e?Nl(e):e,a=r?r.startsWith("/")?r:function(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?r.length>1&&r.pop():"."!==e&&r.push(e)})),r.length>1?r.join("/"):"/"}(r,t):t;return{pathname:a,search:lu(n),hash:uu(i)}}(i,n);return a&&"/"!==a&&a.endsWith("/")&&!o.pathname.endsWith("/")&&(o.pathname+="/"),o}function au(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=e.charAt(t.length);return r&&"/"!==r?null:e.slice(t.length)||"/"}const ou=e=>e.join("/").replace(/\/\/+/g,"/"),su=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),lu=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",uu=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function cu(){return cu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cu.apply(this,arguments)}const hu=["onClick","reloadDocument","replace","state","target","to"];function du(t){let{basename:r,children:n,window:i}=t,a=(0,e.useRef)();null==a.current&&(a.current=function(e){void 0===e&&(e={});var t=e.window,r=void 0===t?document.defaultView:t,n=r.history;function i(){var e=r.location,t=e.pathname,i=e.search,a=e.hash,o=n.state||{};return[o.idx,{pathname:t,search:i,hash:a,state:o.usr||null,key:o.key||"default"}]}var a=null;r.addEventListener("popstate",(function(){if(a)h.call(a),a=null;else{var e=ws.Pop,t=i(),r=t[0],n=t[1];if(h.length){if(null!=r){var o=l-r;o&&(a={action:e,location:n,retry:function(){v(-1*o)}},v(o))}}else g(e)}}));var o=ws.Pop,s=i(),l=s[0],u=s[1],c=Bl(),h=Bl();function d(e){return"string"==typeof e?e:zl(e)}function p(e,t){return void 0===t&&(t=null),ae({pathname:u.pathname,hash:"",search:""},"string"==typeof e?Nl(e):e,{state:t,key:Math.random().toString(36).substr(2,8)})}function f(e,t){return[{usr:e.state,key:e.key,idx:t},d(e)]}function m(e,t,r){return!h.length||(h.call({action:e,location:t,retry:r}),!1)}function g(e){o=e;var t=i();l=t[0],u=t[1],c.call({action:o,location:u})}function v(e){n.go(e)}null==l&&(l=0,n.replaceState(ae({},n.state,{idx:l}),""));var y={get action(){return o},get location(){return u},createHref:d,push:function e(t,i){var a=ws.Push,o=p(t,i);if(m(a,o,(function(){e(t,i)}))){var s=f(o,l+1),u=s[0],c=s[1];try{n.pushState(u,"",c)}catch(e){r.location.assign(c)}g(a)}},replace:function e(t,r){var i=ws.Replace,a=p(t,r);if(m(i,a,(function(){e(t,r)}))){var o=f(a,l),s=o[0],u=o[1];n.replaceState(s,"",u),g(i)}},go:v,back:function(){v(-1)},forward:function(){v(1)},listen:function(e){return c.push(e)},block:function(e){var t=h.push(e);return 1===h.length&&r.addEventListener(kl,Il),function(){t(),h.length||r.removeEventListener(kl,Il)}}};return y}({window:i}));let o=a.current,[s,l]=(0,e.useState)({action:o.action,location:o.location});return(0,e.useLayoutEffect)((()=>o.listen(l)),[o]),(0,e.createElement)(Wl,{basename:r,children:n,location:s.location,navigationType:s.action,navigator:o})}const pu=(0,e.forwardRef)((function(t,r){let{onClick:n,reloadDocument:i,replace:a=!1,state:o,target:s,to:l}=t,u=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(t,hu),c=function(t){Yl()||Fl(!1);let{basename:r,navigator:n}=(0,e.useContext)(Ul),{hash:i,pathname:a,search:o}=Jl(t),s=a;if("/"!==r){let e=function(e){return""===e||""===e.pathname?"/":"string"==typeof e?Nl(e).pathname:e.pathname}(t),n=null!=e&&e.endsWith("/");s="/"===a?r+(n?"/":""):ou([r,a])}return n.createHref({pathname:s,search:o,hash:i})}(l),h=function(t,r){let{target:n,replace:i,state:a}=void 0===r?{}:r,o=function(){Yl()||Fl(!1);let{basename:t,navigator:r}=(0,e.useContext)(Ul),{matches:n}=(0,e.useContext)(Hl),{pathname:i}=Xl(),a=JSON.stringify(n.map((e=>e.pathnameBase))),o=(0,e.useRef)(!1);(0,e.useEffect)((()=>{o.current=!0}));let s=(0,e.useCallback)((function(e,n){if(void 0===n&&(n={}),!o.current)return;if("number"==typeof e)return void r.go(e);let s=iu(e,JSON.parse(a),i);"/"!==t&&(s.pathname=ou([t,s.pathname])),(n.replace?r.replace:r.push)(s,n.state)}),[t,r,a,i]);return s}(),s=Xl(),l=Jl(t);return(0,e.useCallback)((e=>{if(!(0!==e.button||n&&"_self"!==n||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e))){e.preventDefault();let r=!!i||zl(s)===zl(l);o(t,{replace:r,state:a})}}),[s,o,l,i,a,n,t])}(l,{replace:a,state:o,target:s});return(0,e.createElement)("a",cu({},u,{href:c,onClick:function(e){n&&n(e),e.defaultPrevented||i||h(e)},ref:r,target:s}))}));function fu(){return fu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fu.apply(this,arguments)}var mu=["as","viewBox","color","focusable","children","className","__css"],gu={path:e.createElement("g",{stroke:"currentColor",strokeWidth:"1.5"},e.createElement("path",{strokeLinecap:"round",fill:"none",d:"M9,9a3,3,0,1,1,4,2.829,1.5,1.5,0,0,0-1,1.415V14.25"}),e.createElement("path",{fill:"currentColor",strokeLinecap:"round",d:"M12,17.25a.375.375,0,1,0,.375.375A.375.375,0,0,0,12,17.25h0"}),e.createElement("circle",{fill:"none",strokeMiterlimit:"10",cx:"12",cy:"12",r:"11.25"})),viewBox:"0 0 24 24"},vu=ui((function(t,r){var n=t.as,i=t.viewBox,a=t.color,o=void 0===a?"currentColor":a,s=t.focusable,l=void 0!==s&&s,u=t.children,c=t.className,h=t.__css,d=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(t,mu),p={ref:r,focusable:l,className:at("chakra-icon",c),__css:fu({w:"1em",h:"1em",display:"inline-block",lineHeight:"1em",flexShrink:0,color:o},h)},f=null!=i?i:gu.viewBox;if(n&&"string"!=typeof n)return e.createElement(pi.svg,fu({as:n},p,d));var m=null!=u?u:gu.path;return e.createElement(pi.svg,fu({verticalAlign:"middle",viewBox:f},p,d),m)})),yu=vu;function xu(t){var r=t.viewBox,n=void 0===r?"0 0 24 24":r,i=t.d,a=(t.displayName,t.defaultProps),o=void 0===a?{}:a,s=e.Children.toArray(t.path);return ui((function(t,r){return e.createElement(vu,fu({ref:r,viewBox:n},o,t),s.length?s:e.createElement("path",{fill:"currentColor",d:i}))}))}function bu(){return bu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bu.apply(this,arguments)}function wu(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var Su=["ratio","children","className"],_u=ui((function(t,r){var n=t.ratio,i=void 0===n?4/3:n,a=t.children,o=t.className,s=wu(t,Su),l=e.Children.only(a),u=at("chakra-aspect-ratio",o);return e.createElement(pi.div,bu({ref:r,position:"relative",className:u,_before:{height:0,content:'""',display:"block",paddingBottom:pt(i,(function(e){return 1/e*100+"%"}))},__css:{"& > *:not(style)":{overflow:"hidden",position:"absolute",top:"0",right:"0",bottom:"0",left:"0",display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%"},"& > img, & > video":{objectFit:"cover"}}},s),l)})),Au=pi("div"),Mu=pi("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center"}}),Eu=["className","centerContent"],Cu=ui((function(t,r){var n=ti(t),i=n.className,a=n.centerContent,o=wu(n,Eu),s=hi("Container",t);return e.createElement(pi.div,bu({ref:r,className:at("chakra-container",i)},o,{__css:bu({},s,a&&{display:"flex",flexDirection:"column",alignItems:"center"})}))})),Tu=["borderLeftWidth","borderBottomWidth","borderTopWidth","borderRightWidth","borderWidth","borderStyle","borderColor"],Du=["className","orientation","__css"],Lu=ui((function(t,r){var n=hi("Divider",t),i=n.borderLeftWidth,a=n.borderBottomWidth,o=n.borderTopWidth,s=n.borderRightWidth,l=n.borderWidth,u=n.borderStyle,c=n.borderColor,h=wu(n,Tu),d=ti(t),p=d.className,f=d.orientation,m=void 0===f?"horizontal":f,g=d.__css,v=wu(d,Du),y={vertical:{borderLeftWidth:i||s||l||"1px",height:"100%"},horizontal:{borderBottomWidth:a||o||l||"1px",width:"100%"}};return e.createElement(pi.hr,bu({ref:r,"aria-orientation":m},v,{__css:bu({},h,{border:"0",borderColor:c,borderStyle:u},y[m],g),className:at("chakra-divider",p)}))})),Pu=["direction","align","justify","wrap","basis","grow","shrink"],Ru=ui((function(t,r){var n=t.direction,i=t.align,a=t.justify,o=t.wrap,s=t.basis,l=t.grow,u=t.shrink,c=wu(t,Pu),h={display:"flex",flexDirection:n,alignItems:i,justifyContent:a,flexWrap:o,flexBasis:s,flexGrow:l,flexShrink:u};return e.createElement(pi.div,bu({ref:r,__css:h},c))})),Ou=["area","templateAreas","gap","rowGap","columnGap","column","row","autoFlow","autoRows","templateRows","autoColumns","templateColumns"],ku=ui((function(t,r){var n=t.area,i=t.templateAreas,a=t.gap,o=t.rowGap,s=t.columnGap,l=t.column,u=t.row,c=t.autoFlow,h=t.autoRows,d=t.templateRows,p=t.autoColumns,f=t.templateColumns,m=wu(t,Ou),g={display:"grid",gridArea:n,gridTemplateAreas:i,gridGap:a,gridRowGap:o,gridColumnGap:s,gridAutoColumns:p,gridColumn:l,gridRow:u,gridAutoFlow:c,gridAutoRows:h,gridTemplateRows:d,gridTemplateColumns:f};return e.createElement(pi.div,bu({ref:r,__css:g},m))})),Iu=["className"],Bu=ui((function(t,r){var n=hi("Heading",t),i=ti(t);i.className;var a=wu(i,Iu);return e.createElement(pi.h2,bu({ref:r,className:at("chakra-heading",t.className)},a,{__css:n}))})),zu=["className","isExternal"],Nu=ui((function(t,r){var n=hi("Link",t),i=ti(t),a=i.className,o=i.isExternal,s=wu(i,zu);return e.createElement(pi.a,bu({target:o?"_blank":void 0,rel:o?"noopener":void 0,ref:r,className:at("chakra-link",a)},s,{__css:n}))})),Fu=vt({name:"StylesContext",errorMessage:"useStyles: `styles` is undefined. Seems you forgot to wrap the components in a `<*List />` "});Fu[0],Fu[1];var Uu=["columns","spacingX","spacingY","spacing","minChildWidth"],ju=ui((function(t,r){var n=t.columns,i=t.spacingX,a=t.spacingY,o=t.spacing,s=t.minChildWidth,l=wu(t,Uu),u=s?pt(s,(function(e){return Fe(e)?null:"repeat(auto-fit, minmax("+function(e){return Ie(e)?e+"px":e}(e)+", 1fr))"})):pt(n,(function(e){return Fe(e)?null:"repeat("+e+", minmax(0, 1fr))"}));return e.createElement(ku,bu({ref:r,gap:o,columnGap:i,rowGap:a,templateColumns:u},l))}));pi("div",{baseStyle:{flex:1,justifySelf:"stretch",alignSelf:"stretch"}});var Hu="& > *:not(style) ~ *:not(style)",Vu=["isInline","direction","align","justify","spacing","wrap","children","divider","className","shouldWrapChildren"],Gu=function(t){return e.createElement(pi.div,bu({className:"chakra-stack__item"},t,{__css:bu({display:"inline-block",flex:"0 0 auto",minWidth:0},t.__css)}))},Wu=ui((function(t,r){var n,i=t.isInline,a=t.direction,o=t.align,s=t.justify,l=t.spacing,u=void 0===l?"0.5rem":l,c=t.wrap,h=t.children,d=t.divider,p=t.className,f=t.shouldWrapChildren,m=wu(t,Vu),g=i?"row":null!=a?a:"column",v=e.useMemo((function(){return function(e){var t,r=e.spacing,n=e.direction,i={column:{marginTop:r,marginEnd:0,marginBottom:0,marginStart:0},row:{marginTop:0,marginEnd:0,marginBottom:0,marginStart:r},"column-reverse":{marginTop:0,marginEnd:0,marginBottom:r,marginStart:0},"row-reverse":{marginTop:0,marginEnd:r,marginBottom:0,marginStart:0}};return(t={flexDirection:n})[Hu]=pt(n,(function(e){return i[e]})),t}({direction:g,spacing:u})}),[g,u]),y=e.useMemo((function(){return function(e){var t=e.spacing,r={column:{my:t,mx:0,borderLeftWidth:0,borderBottomWidth:"1px"},"column-reverse":{my:t,mx:0,borderLeftWidth:0,borderBottomWidth:"1px"},row:{mx:t,my:0,borderLeftWidth:"1px",borderBottomWidth:0},"row-reverse":{mx:t,my:0,borderLeftWidth:"1px",borderBottomWidth:0}};return{"&":pt(e.direction,(function(e){return r[e]}))}}({spacing:u,direction:g})}),[u,g]),x=!!d,b=!f&&!x,w=function(t){return e.Children.toArray(t).filter((function(t){return e.isValidElement(t)}))}(h),S=b?w:w.map((function(t,r){var n=void 0!==t.key?t.key:r,i=r+1===w.length,a=f?e.createElement(Gu,{key:n},t):t;if(!x)return a;var o=i?null:e.cloneElement(d,{__css:y});return e.createElement(e.Fragment,{key:n},a,o)})),_=at("chakra-stack",p);return e.createElement(pi.div,bu({ref:r,display:"flex",alignItems:o,justifyContent:s,flexDirection:v.flexDirection,flexWrap:c,className:_,__css:x?{}:(n={},n[Hu]=v[Hu],n)},m),S)})),qu=ui((function(t,r){return e.createElement(Wu,bu({align:"center"},t,{direction:"row",ref:r}))})),Yu=ui((function(t,r){return e.createElement(Wu,bu({align:"center"},t,{direction:"column",ref:r}))})),Xu=["className","align","decoration","casing"],Qu=ui((function(t,r){var n=hi("Text",t),i=ti(t);i.className,i.align,i.decoration,i.casing;var a=wu(i,Xu),o=Ye({textAlign:t.align,textDecoration:t.decoration,textTransform:t.casing});return e.createElement(pi.p,bu({ref:r,className:at("chakra-text",t.className)},o,a,{__css:n}))})),Ju={border:"0px",clip:"rect(0px, 0px, 0px, 0px)",height:"1px",width:"1px",margin:"-1px",padding:"0px",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"},Zu=pi("span",{baseStyle:Ju});function Ku(){return Ku=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ku.apply(this,arguments)}pi("input",{baseStyle:Ju});var $u=["label","thickness","speed","emptyColor","className"],ec=Pe({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}),tc=ui((function(t,r){var n=hi("Spinner",t),i=ti(t),a=i.label,o=void 0===a?"Loading...":a,s=i.thickness,l=void 0===s?"2px":s,u=i.speed,c=void 0===u?"0.45s":u,h=i.emptyColor,d=void 0===h?"transparent":h,p=i.className,f=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(i,$u),m=at("chakra-spinner",p),g=Ku({display:"inline-block",borderColor:"currentColor",borderStyle:"solid",borderRadius:"99999px",borderWidth:l,borderBottomColor:d,borderLeftColor:d,animation:ec+" "+c+" linear infinite"},n);return e.createElement(pi.div,Ku({ref:r,__css:g,className:m},f),o&&e.createElement(Zu,null,o))}));function rc(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}function nc(){return nc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nc.apply(this,arguments)}var ic=vt({strict:!1,name:"ButtonGroupContext"}),ac=(ic[0],ic[1]),oc=["label","placement","spacing","children","className","__css"],sc=function(t){var r=t.label,n=t.placement,i=t.spacing,a=void 0===i?"0.5rem":i,o=t.children,s=void 0===o?e.createElement(tc,{color:"currentColor",width:"1em",height:"1em"}):o,l=t.className,u=t.__css,c=rc(t,oc),h=at("chakra-button__spinner",l),d="start"===n?"marginEnd":"marginStart",p=e.useMemo((function(){var e;return nc(((e={display:"flex",alignItems:"center",position:r?"relative":"absolute"})[d]=r?a:0,e.fontSize="1em",e.lineHeight="normal",e),u)}),[u,r,d,a]);return e.createElement(pi.div,nc({className:h},c,{__css:p}),s)},lc=["children","className"],uc=function(t){var r=t.children,n=t.className,i=rc(t,lc),a=e.isValidElement(r)?e.cloneElement(r,{"aria-hidden":!0,focusable:!1}):r,o=at("chakra-button__icon",n);return e.createElement(pi.span,nc({display:"inline-flex",alignSelf:"center",flexShrink:0},i,{className:o}),a)},cc=["isDisabled","isLoading","isActive","isFullWidth","children","leftIcon","rightIcon","loadingText","iconSpacing","type","spinner","spinnerPlacement","className","as"],hc=ui((function(t,r){var n,i,a,o,s,l=ac(),u=hi("Button",nc({},l,t)),c=ti(t),h=c.isDisabled,d=void 0===h?null==l?void 0:l.isDisabled:h,p=c.isLoading,f=c.isActive,m=c.isFullWidth,g=c.children,v=c.leftIcon,y=c.rightIcon,x=c.loadingText,b=c.iconSpacing,w=void 0===b?"0.5rem":b,S=c.type,_=c.spinner,A=c.spinnerPlacement,M=void 0===A?"start":A,E=c.className,C=c.as,T=rc(c,cc),D=e.useMemo((function(){var e,t=ke()({},null!=(e=null==u?void 0:u._focus)?e:{},{zIndex:1});return nc({display:"inline-flex",appearance:"none",alignItems:"center",justifyContent:"center",userSelect:"none",position:"relative",whiteSpace:"nowrap",verticalAlign:"middle",outline:"none",width:m?"100%":"auto"},u,!!l&&{_focus:t})}),[u,l,m]),L=(n=C,a=(i=e.useState(!n))[0],o=i[1],s=e.useCallback((function(e){e&&o("BUTTON"===e.tagName)}),[]),{ref:s,type:a?"button":void 0}),P=L.ref,R=L.type,O={rightIcon:y,leftIcon:v,iconSpacing:w,children:g};return e.createElement(pi.button,nc({disabled:d||p,ref:_t(r,P),as:C,type:null!=S?S:R,"data-active":nt(f),"data-loading":nt(p),__css:D,className:at("chakra-button",E)},T),p&&"start"===M&&e.createElement(sc,{className:"chakra-button__spinner--start",label:x,placement:"start",spacing:w},_),p?x||e.createElement(pi.span,{opacity:0},e.createElement(dc,O)):e.createElement(dc,O),p&&"end"===M&&e.createElement(sc,{className:"chakra-button__spinner--end",label:x,placement:"end",spacing:w},_))}));function dc(t){var r=t.leftIcon,n=t.rightIcon,i=t.children,a=t.iconSpacing;return e.createElement(e.Fragment,null,r&&e.createElement(uc,{marginEnd:a},r),i,n&&e.createElement(uc,{marginStart:a},n))}xu({d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z",displayName:"CopyIcon"}),xu({d:"M23.384,21.619,16.855,15.09a9.284,9.284,0,1,0-1.768,1.768l6.529,6.529a1.266,1.266,0,0,0,1.768,0A1.251,1.251,0,0,0,23.384,21.619ZM2.75,9.5a6.75,6.75,0,1,1,6.75,6.75A6.758,6.758,0,0,1,2.75,9.5Z",displayName:"SearchIcon"}),xu({d:"M23.414,20.591l-4.645-4.645a10.256,10.256,0,1,0-2.828,2.829l4.645,4.644a2.025,2.025,0,0,0,2.828,0A2,2,0,0,0,23.414,20.591ZM10.25,3.005A7.25,7.25,0,1,1,3,10.255,7.258,7.258,0,0,1,10.25,3.005Z",displayName:"Search2Icon"}),xu({d:"M21.4,13.7C20.6,13.9,19.8,14,19,14c-5,0-9-4-9-9c0-0.8,0.1-1.6,0.3-2.4c0.1-0.3,0-0.7-0.3-1 c-0.3-0.3-0.6-0.4-1-0.3C4.3,2.7,1,7.1,1,12c0,6.1,4.9,11,11,11c4.9,0,9.3-3.3,10.6-8.1c0.1-0.3,0-0.7-0.3-1 C22.1,13.7,21.7,13.6,21.4,13.7z",displayName:"MoonIcon"}),xu({displayName:"SunIcon",path:e.createElement("g",{strokeLinejoin:"round",strokeLinecap:"round",strokeWidth:"2",fill:"none",stroke:"currentColor"},e.createElement("circle",{cx:"12",cy:"12",r:"5"}),e.createElement("path",{d:"M12 1v2"}),e.createElement("path",{d:"M12 21v2"}),e.createElement("path",{d:"M4.22 4.22l1.42 1.42"}),e.createElement("path",{d:"M18.36 18.36l1.42 1.42"}),e.createElement("path",{d:"M1 12h2"}),e.createElement("path",{d:"M21 12h2"}),e.createElement("path",{d:"M4.22 19.78l1.42-1.42"}),e.createElement("path",{d:"M18.36 5.64l1.42-1.42"}))}),xu({d:"M0,12a1.5,1.5,0,0,0,1.5,1.5h8.75a.25.25,0,0,1,.25.25V22.5a1.5,1.5,0,0,0,3,0V13.75a.25.25,0,0,1,.25-.25H22.5a1.5,1.5,0,0,0,0-3H13.75a.25.25,0,0,1-.25-.25V1.5a1.5,1.5,0,0,0-3,0v8.75a.25.25,0,0,1-.25.25H1.5A1.5,1.5,0,0,0,0,12Z",displayName:"AddIcon"}),xu({displayName:"SmallAddIcon",viewBox:"0 0 20 20",path:e.createElement("path",{fill:"currentColor",d:"M14 9h-3V6c0-.55-.45-1-1-1s-1 .45-1 1v3H6c-.55 0-1 .45-1 1s.45 1 1 1h3v3c0 .55.45 1 1 1s1-.45 1-1v-3h3c.55 0 1-.45 1-1s-.45-1-1-1z",fillRule:"evenodd"})}),xu({viewBox:"0 0 14 14",d:"M14,7.77 L14,6.17 L12.06,5.53 L11.61,4.44 L12.49,2.6 L11.36,1.47 L9.55,2.38 L8.46,1.93 L7.77,0.01 L6.17,0.01 L5.54,1.95 L4.43,2.4 L2.59,1.52 L1.46,2.65 L2.37,4.46 L1.92,5.55 L0,6.23 L0,7.82 L1.94,8.46 L2.39,9.55 L1.51,11.39 L2.64,12.52 L4.45,11.61 L5.54,12.06 L6.23,13.98 L7.82,13.98 L8.45,12.04 L9.56,11.59 L11.4,12.47 L12.53,11.34 L11.61,9.53 L12.08,8.44 L14,7.75 L14,7.77 Z M7,10 C5.34,10 4,8.66 4,7 C4,5.34 5.34,4 7,4 C8.66,4 10,5.34 10,7 C10,8.66 8.66,10 7,10 Z",displayName:"SettingsIcon"});var pc=xu({displayName:"CheckCircleIcon",d:"M12,0A12,12,0,1,0,24,12,12.014,12.014,0,0,0,12,0Zm6.927,8.2-6.845,9.289a1.011,1.011,0,0,1-1.43.188L5.764,13.769a1,1,0,1,1,1.25-1.562l4.076,3.261,6.227-8.451A1,1,0,1,1,18.927,8.2Z"}),fc=(xu({d:"M19.5,9.5h-.75V6.75a6.75,6.75,0,0,0-13.5,0V9.5H4.5a2,2,0,0,0-2,2V22a2,2,0,0,0,2,2h15a2,2,0,0,0,2-2V11.5A2,2,0,0,0,19.5,9.5Zm-9.5,6a2,2,0,1,1,3,1.723V19.5a1,1,0,0,1-2,0V17.223A1.994,1.994,0,0,1,10,15.5ZM7.75,6.75a4.25,4.25,0,0,1,8.5,0V9a.5.5,0,0,1-.5.5H8.25a.5.5,0,0,1-.5-.5Z",displayName:"LockIcon"}),xu({d:"M19.5,9.5h-.75V6.75A6.751,6.751,0,0,0,5.533,4.811a1.25,1.25,0,1,0,2.395.717A4.251,4.251,0,0,1,16.25,6.75V9a.5.5,0,0,1-.5.5H4.5a2,2,0,0,0-2,2V22a2,2,0,0,0,2,2h15a2,2,0,0,0,2-2V11.5A2,2,0,0,0,19.5,9.5Zm-9.5,6a2,2,0,1,1,3,1.723V19.5a1,1,0,0,1-2,0V17.223A1.994,1.994,0,0,1,10,15.5Z",displayName:"UnlockIcon"}),xu({displayName:"ViewIcon",path:e.createElement("g",{fill:"currentColor"},e.createElement("path",{d:"M23.432,10.524C20.787,7.614,16.4,4.538,12,4.6,7.6,4.537,3.213,7.615.568,10.524a2.211,2.211,0,0,0,0,2.948C3.182,16.351,7.507,19.4,11.839,19.4h.308c4.347,0,8.671-3.049,11.288-5.929A2.21,2.21,0,0,0,23.432,10.524ZM7.4,12A4.6,4.6,0,1,1,12,16.6,4.6,4.6,0,0,1,7.4,12Z"}),e.createElement("circle",{cx:"12",cy:"12",r:"2"}))}),xu({displayName:"ViewOffIcon",path:e.createElement("g",{fill:"currentColor"},e.createElement("path",{d:"M23.2,10.549a20.954,20.954,0,0,0-4.3-3.6l4-3.995a1,1,0,1,0-1.414-1.414l-.018.018a.737.737,0,0,1-.173.291l-19.5,19.5c-.008.007-.018.009-.026.017a1,1,0,0,0,1.631,1.088l4.146-4.146a11.26,11.26,0,0,0,4.31.939h.3c4.256,0,8.489-2.984,11.051-5.8A2.171,2.171,0,0,0,23.2,10.549ZM16.313,13.27a4.581,4.581,0,0,1-3,3.028,4.3,4.3,0,0,1-3.1-.19.253.253,0,0,1-.068-.407l5.56-5.559a.252.252,0,0,1,.407.067A4.3,4.3,0,0,1,16.313,13.27Z"}),e.createElement("path",{d:"M7.615,13.4a.244.244,0,0,0,.061-.24A4.315,4.315,0,0,1,7.5,12,4.5,4.5,0,0,1,12,7.5a4.276,4.276,0,0,1,1.16.173.244.244,0,0,0,.24-.062l1.941-1.942a.254.254,0,0,0-.1-.421A10.413,10.413,0,0,0,12,4.75C7.7,4.692,3.4,7.7.813,10.549a2.15,2.15,0,0,0-.007,2.9,21.209,21.209,0,0,0,3.438,3.03.256.256,0,0,0,.326-.029Z"}))}),xu({d:"M11.2857,6.05714 L10.08571,4.85714 L7.85714,7.14786 L7.85714,1 L6.14286,1 L6.14286,7.14786 L3.91429,4.85714 L2.71429,6.05714 L7,10.42857 L11.2857,6.05714 Z M1,11.2857 L1,13 L13,13 L13,11.2857 L1,11.2857 Z",displayName:"DownloadIcon",viewBox:"0 0 14 14"}),xu({displayName:"DeleteIcon",path:e.createElement("g",{fill:"currentColor"},e.createElement("path",{d:"M19.452 7.5H4.547a.5.5 0 00-.5.545l1.287 14.136A2 2 0 007.326 24h9.347a2 2 0 001.992-1.819L19.95 8.045a.5.5 0 00-.129-.382.5.5 0 00-.369-.163zm-9.2 13a.75.75 0 01-1.5 0v-9a.75.75 0 011.5 0zm5 0a.75.75 0 01-1.5 0v-9a.75.75 0 011.5 0zM22 4h-4.75a.25.25 0 01-.25-.25V2.5A2.5 2.5 0 0014.5 0h-5A2.5 2.5 0 007 2.5v1.25a.25.25 0 01-.25.25H2a1 1 0 000 2h20a1 1 0 000-2zM9 3.75V2.5a.5.5 0 01.5-.5h5a.5.5 0 01.5.5v1.25a.25.25 0 01-.25.25h-5.5A.25.25 0 019 3.75z"}))}),xu({displayName:"RepeatIcon",path:e.createElement("g",{fill:"currentColor"},e.createElement("path",{d:"M10.319,4.936a7.239,7.239,0,0,1,7.1,2.252,1.25,1.25,0,1,0,1.872-1.657A9.737,9.737,0,0,0,9.743,2.5,10.269,10.269,0,0,0,2.378,9.61a.249.249,0,0,1-.271.178l-1.033-.13A.491.491,0,0,0,.6,9.877a.5.5,0,0,0-.019.526l2.476,4.342a.5.5,0,0,0,.373.248.43.43,0,0,0,.062,0,.5.5,0,0,0,.359-.152l3.477-3.593a.5.5,0,0,0-.3-.844L5.15,10.172a.25.25,0,0,1-.2-.333A7.7,7.7,0,0,1,10.319,4.936Z"}),e.createElement("path",{d:"M23.406,14.1a.5.5,0,0,0,.015-.526l-2.5-4.329A.5.5,0,0,0,20.546,9a.489.489,0,0,0-.421.151l-3.456,3.614a.5.5,0,0,0,.3.842l1.848.221a.249.249,0,0,1,.183.117.253.253,0,0,1,.023.216,7.688,7.688,0,0,1-5.369,4.9,7.243,7.243,0,0,1-7.1-2.253,1.25,1.25,0,1,0-1.872,1.656,9.74,9.74,0,0,0,9.549,3.03,10.261,10.261,0,0,0,7.369-7.12.251.251,0,0,1,.27-.179l1.058.127a.422.422,0,0,0,.06,0A.5.5,0,0,0,23.406,14.1Z"}))}),xu({displayName:"RepeatClockIcon",path:e.createElement("g",{fill:"currentColor"},e.createElement("path",{d:"M12.965,6a1,1,0,0,0-1,1v5.5a1,1,0,0,0,1,1h5a1,1,0,0,0,0-2h-3.75a.25.25,0,0,1-.25-.25V7A1,1,0,0,0,12.965,6Z"}),e.createElement("path",{d:"M12.567,1.258A10.822,10.822,0,0,0,2.818,8.4a.25.25,0,0,1-.271.163L.858,8.309a.514.514,0,0,0-.485.213.5.5,0,0,0-.021.53l2.679,4.7a.5.5,0,0,0,.786.107l3.77-3.746a.5.5,0,0,0-.279-.85L5.593,9.007a.25.25,0,0,1-.192-.35,8.259,8.259,0,1,1,7.866,11.59,1.25,1.25,0,0,0,.045,2.5h.047a10.751,10.751,0,1,0-.792-21.487Z"}))}),xu({displayName:"EditIcon",path:e.createElement("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeWidth:"2"},e.createElement("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),e.createElement("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"}))}),xu({d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z",displayName:"ChevronLeftIcon"})),mc=(xu({d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z",displayName:"ChevronRightIcon"}),xu({displayName:"ChevronDownIcon",d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"}),xu({d:"M12 8l-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z",displayName:"ChevronUpIcon"}),xu({d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z",displayName:"ArrowBackIcon"}),xu({d:"M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z",displayName:"ArrowForwardIcon"}),xu({d:"M4 12l1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z",displayName:"ArrowUpIcon"})),gc=(xu({viewBox:"0 0 16 16",d:"M11.891 9.992a1 1 0 1 1 1.416 1.415l-4.3 4.3a1 1 0 0 1-1.414 0l-4.3-4.3A1 1 0 0 1 4.71 9.992l3.59 3.591 3.591-3.591zm0-3.984L8.3 2.417 4.709 6.008a1 1 0 0 1-1.416-1.415l4.3-4.3a1 1 0 0 1 1.414 0l4.3 4.3a1 1 0 1 1-1.416 1.415z",displayName:"ArrowUpDownIcon"}),xu({d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z",displayName:"ArrowDownIcon"}),xu({displayName:"ExternalLinkIcon",path:e.createElement("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeWidth:"2"},e.createElement("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),e.createElement("path",{d:"M15 3h6v6"}),e.createElement("path",{d:"M10 14L21 3"}))}),xu({displayName:"LinkIcon",path:e.createElement("g",{fill:"currentColor"},e.createElement("path",{d:"M10.458,18.374,7.721,21.11a2.853,2.853,0,0,1-3.942,0l-.892-.891a2.787,2.787,0,0,1,0-3.941l5.8-5.8a2.789,2.789,0,0,1,3.942,0l.893.892A1,1,0,0,0,14.94,9.952l-.893-.892a4.791,4.791,0,0,0-6.771,0l-5.8,5.8a4.787,4.787,0,0,0,0,6.77l.892.891a4.785,4.785,0,0,0,6.771,0l2.736-2.735a1,1,0,1,0-1.414-1.415Z"}),e.createElement("path",{d:"M22.526,2.363l-.892-.892a4.8,4.8,0,0,0-6.77,0l-2.905,2.9a1,1,0,0,0,1.414,1.414l2.9-2.9a2.79,2.79,0,0,1,3.941,0l.893.893a2.786,2.786,0,0,1,0,3.942l-5.8,5.8a2.769,2.769,0,0,1-1.971.817h0a2.766,2.766,0,0,1-1.969-.816,1,1,0,1,0-1.415,1.412,4.751,4.751,0,0,0,3.384,1.4h0a4.752,4.752,0,0,0,3.385-1.4l5.8-5.8a4.786,4.786,0,0,0,0-6.771Z"}))}),xu({displayName:"PlusSquareIcon",path:e.createElement("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeWidth:"2"},e.createElement("rect",{height:"18",width:"18",rx:"2",ry:"2",x:"3",y:"3"}),e.createElement("path",{d:"M12 8v8"}),e.createElement("path",{d:"M8 12h8"}))}),xu({displayName:"CalendarIcon",viewBox:"0 0 14 14",d:"M10.8889,5.5 L3.11111,5.5 L3.11111,7.05556 L10.8889,7.05556 L10.8889,5.5 Z M12.4444,1.05556 L11.6667,1.05556 L11.6667,0 L10.1111,0 L10.1111,1.05556 L3.88889,1.05556 L3.88889,0 L2.33333,0 L2.33333,1.05556 L1.55556,1.05556 C0.692222,1.05556 0.00777777,1.75556 0.00777777,2.61111 L0,12.5 C0,13.3556 0.692222,14 1.55556,14 L12.4444,14 C13.3,14 14,13.3556 14,12.5 L14,2.61111 C14,1.75556 13.3,1.05556 12.4444,1.05556 Z M12.4444,12.5 L1.55556,12.5 L1.55556,3.94444 L12.4444,3.94444 L12.4444,12.5 Z M8.55556,8.61111 L3.11111,8.61111 L3.11111,10.1667 L8.55556,10.1667 L8.55556,8.61111 Z"}),xu({d:"M0.913134,0.920639 C1.49851,0.331726 2.29348,0 3.12342,0 L10.8766,0 C11.7065,0 12.5015,0.331725 13.0869,0.920639 C13.6721,1.50939 14,2.30689 14,3.13746 L14,8.12943 C13.9962,8.51443 13.9059,8.97125 13.7629,9.32852 C13.6128,9.683 13.3552,10.0709 13.0869,10.3462 C12.813,10.6163 12.4265,10.8761 12.0734,11.0274 C11.7172,11.1716 11.2607,11.263 10.8766,11.2669 L10.1234,11.2669 L10.1234,12.5676 L10.1209,12.5676 C10.1204,12.793 10.0633,13.0791 9.97807,13.262 C9.8627,13.466 9.61158,13.7198 9.40818,13.8382 L9.40824,13.8383 C9.4077,13.8386 9.40716,13.8388 9.40661,13.8391 C9.40621,13.8393 9.4058,13.8396 9.40539,13.8398 L9.40535,13.8397 C9.22958,13.9254 8.94505,13.9951 8.75059,14 L8.74789,14 C8.35724,13.9963 7.98473,13.8383 7.71035,13.5617 L5.39553,11.2669 L3.12342,11.2669 C2.29348,11.2669 1.49851,10.9352 0.913134,10.3462 C0.644826,10.0709 0.387187,9.683 0.23711,9.32852 C0.0941235,8.97125 0.00379528,8.51443 0,8.12943 L0,3.13746 C0,2.30689 0.327915,1.50939 0.913134,0.920639 Z M3.12342,1.59494 C2.71959,1.59494 2.33133,1.75628 2.04431,2.04503 C1.75713,2.33395 1.59494,2.72681 1.59494,3.13746 L1.59494,8.12943 C1.59114,8.35901 1.62114,8.51076 1.71193,8.72129 C1.79563,8.9346 1.88065,9.06264 2.04431,9.22185 C2.33133,9.5106 2.71959,9.67195 3.12342,9.67195 L5.72383,9.67195 C5.93413,9.67195 6.13592,9.75502 6.28527,9.90308 L8.52848,12.1269 L8.52848,10.4694 C8.52848,10.029 8.88552,9.67195 9.32595,9.67195 L10.8766,9.67195 C11.1034,9.67583 11.2517,9.64614 11.4599,9.55518 C11.6712,9.47132 11.7976,9.38635 11.9557,9.22185 C12.1193,9.06264 12.2044,8.9346 12.2881,8.72129 C12.3789,8.51076 12.4089,8.35901 12.4051,8.12943 L12.4051,3.13746 C12.4051,2.72681 12.2429,2.33394 11.9557,2.04503 C11.6687,1.75628 11.2804,1.59494 10.8766,1.59494 L3.12342,1.59494 Z",displayName:"ChatIcon",viewBox:"0 0 14 14"}),xu({displayName:"TimeIcon",path:e.createElement("g",{fill:"currentColor"},e.createElement("path",{d:"M12,0A12,12,0,1,0,24,12,12.014,12.014,0,0,0,12,0Zm0,22A10,10,0,1,1,22,12,10.011,10.011,0,0,1,12,22Z"}),e.createElement("path",{d:"M17.134,15.81,12.5,11.561V6.5a1,1,0,0,0-2,0V12a1,1,0,0,0,.324.738l4.959,4.545a1.01,1.01,0,0,0,1.413-.061A1,1,0,0,0,17.134,15.81Z"}))}),xu({displayName:"ArrowRightIcon",path:e.createElement("g",{fill:"currentColor"},e.createElement("path",{d:"M13.584,12a2.643,2.643,0,0,1-.775,1.875L3.268,23.416a1.768,1.768,0,0,1-2.5-2.5l8.739-8.739a.25.25,0,0,0,0-.354L.768,3.084a1.768,1.768,0,0,1,2.5-2.5l9.541,9.541A2.643,2.643,0,0,1,13.584,12Z"}),e.createElement("path",{d:"M23.75,12a2.643,2.643,0,0,1-.775,1.875l-9.541,9.541a1.768,1.768,0,0,1-2.5-2.5l8.739-8.739a.25.25,0,0,0,0-.354L10.934,3.084a1.768,1.768,0,0,1,2.5-2.5l9.541,9.541A2.643,2.643,0,0,1,23.75,12Z"}))}),xu({displayName:"ArrowLeftIcon",path:e.createElement("g",{fill:"currentColor"},e.createElement("path",{d:"M10.416,12a2.643,2.643,0,0,1,.775-1.875L20.732.584a1.768,1.768,0,0,1,2.5,2.5l-8.739,8.739a.25.25,0,0,0,0,.354l8.739,8.739a1.768,1.768,0,0,1-2.5,2.5l-9.541-9.541A2.643,2.643,0,0,1,10.416,12Z"}),e.createElement("path",{d:"M.25,12a2.643,2.643,0,0,1,.775-1.875L10.566.584a1.768,1.768,0,0,1,2.5,2.5L4.327,11.823a.25.25,0,0,0,0,.354l8.739,8.739a1.768,1.768,0,0,1-2.5,2.5L1.025,13.875A2.643,2.643,0,0,1,.25,12Z"}))}),xu({displayName:"AtSignIcon",d:"M12,.5A11.634,11.634,0,0,0,.262,12,11.634,11.634,0,0,0,12,23.5a11.836,11.836,0,0,0,6.624-2,1.25,1.25,0,1,0-1.393-2.076A9.34,9.34,0,0,1,12,21a9.132,9.132,0,0,1-9.238-9A9.132,9.132,0,0,1,12,3a9.132,9.132,0,0,1,9.238,9v.891a1.943,1.943,0,0,1-3.884,0V12A5.355,5.355,0,1,0,12,17.261a5.376,5.376,0,0,0,3.861-1.634,4.438,4.438,0,0,0,7.877-2.736V12A11.634,11.634,0,0,0,12,.5Zm0,14.261A2.763,2.763,0,1,1,14.854,12,2.812,2.812,0,0,1,12,14.761Z"}),xu({displayName:"AttachmentIcon",d:"M21.843,3.455a6.961,6.961,0,0,0-9.846,0L1.619,13.832a5.128,5.128,0,0,0,7.252,7.252L17.3,12.653A3.293,3.293,0,1,0,12.646,8L7.457,13.184A1,1,0,1,0,8.871,14.6L14.06,9.409a1.294,1.294,0,0,1,1.829,1.83L7.457,19.67a3.128,3.128,0,0,1-4.424-4.424L13.411,4.869a4.962,4.962,0,1,1,7.018,7.018L12.646,19.67a1,1,0,1,0,1.414,1.414L21.843,13.3a6.96,6.96,0,0,0,0-9.846Z"}),xu({displayName:"UpDownIcon",viewBox:"-1 -1 9 11",d:"M 3.5 0L 3.98809 -0.569442L 3.5 -0.987808L 3.01191 -0.569442L 3.5 0ZM 3.5 9L 3.01191 9.56944L 3.5 9.98781L 3.98809 9.56944L 3.5 9ZM 0.488094 3.56944L 3.98809 0.569442L 3.01191 -0.569442L -0.488094 2.43056L 0.488094 3.56944ZM 3.01191 0.569442L 6.51191 3.56944L 7.48809 2.43056L 3.98809 -0.569442L 3.01191 0.569442ZM -0.488094 6.56944L 3.01191 9.56944L 3.98809 8.43056L 0.488094 5.43056L -0.488094 6.56944ZM 3.98809 9.56944L 7.48809 6.56944L 6.51191 5.43056L 3.01191 8.43056L 3.98809 9.56944Z"}),xu({d:"M23.555,8.729a1.505,1.505,0,0,0-1.406-.98H16.062a.5.5,0,0,1-.472-.334L13.405,1.222a1.5,1.5,0,0,0-2.81,0l-.005.016L8.41,7.415a.5.5,0,0,1-.471.334H1.85A1.5,1.5,0,0,0,.887,10.4l5.184,4.3a.5.5,0,0,1,.155.543L4.048,21.774a1.5,1.5,0,0,0,2.31,1.684l5.346-3.92a.5.5,0,0,1,.591,0l5.344,3.919a1.5,1.5,0,0,0,2.312-1.683l-2.178-6.535a.5.5,0,0,1,.155-.543l5.194-4.306A1.5,1.5,0,0,0,23.555,8.729Z",displayName:"StarIcon"}),xu({displayName:"EmailIcon",path:e.createElement("g",{fill:"currentColor"},e.createElement("path",{d:"M11.114,14.556a1.252,1.252,0,0,0,1.768,0L22.568,4.87a.5.5,0,0,0-.281-.849A1.966,1.966,0,0,0,22,4H2a1.966,1.966,0,0,0-.289.021.5.5,0,0,0-.281.849Z"}),e.createElement("path",{d:"M23.888,5.832a.182.182,0,0,0-.2.039l-6.2,6.2a.251.251,0,0,0,0,.354l5.043,5.043a.75.75,0,1,1-1.06,1.061l-5.043-5.043a.25.25,0,0,0-.354,0l-2.129,2.129a2.75,2.75,0,0,1-3.888,0L7.926,13.488a.251.251,0,0,0-.354,0L2.529,18.531a.75.75,0,0,1-1.06-1.061l5.043-5.043a.251.251,0,0,0,0-.354l-6.2-6.2a.18.18,0,0,0-.2-.039A.182.182,0,0,0,0,6V18a2,2,0,0,0,2,2H22a2,2,0,0,0,2-2V6A.181.181,0,0,0,23.888,5.832Z"}))}),xu({d:"M2.20731,0.0127209 C2.1105,-0.0066419 1.99432,-0.00664663 1.91687,0.032079 C0.871279,0.438698 0.212942,1.92964 0.0580392,2.95587 C-0.426031,6.28627 2.20731,9.17133 4.62766,11.0689 C6.77694,12.7534 10.9012,15.5223 13.3409,12.8503 C13.6507,12.5211 14.0186,12.037 13.9993,11.553 C13.9412,10.7397 13.186,10.1588 12.6051,9.71349 C12.1598,9.38432 11.2304,8.47427 10.6495,8.49363 C10.1267,8.51299 9.79754,9.05515 9.46837,9.38432 L8.88748,9.96521 C8.79067,10.062 7.55145,9.24878 7.41591,9.15197 C6.91248,8.8228 6.4284,8.45491 6.00242,8.04829 C5.57644,7.64167 5.18919,7.19632 4.86002,6.73161 C4.7632,6.59607 3.96933,5.41495 4.04678,5.31813 C4.04678,5.31813 4.72448,4.58234 4.91811,4.2919 C5.32473,3.67229 5.63453,3.18822 5.16982,2.45243 C4.99556,2.18135 4.78257,1.96836 4.55021,1.73601 C4.14359,1.34875 3.73698,0.942131 3.27227,0.612963 C3.02055,0.419335 2.59457,0.0708094 2.20731,0.0127209 Z",displayName:"PhoneIcon",viewBox:"0 0 14 14"}),xu({viewBox:"0 0 10 10",d:"M3,2 C2.44771525,2 2,1.55228475 2,1 C2,0.44771525 2.44771525,0 3,0 C3.55228475,0 4,0.44771525 4,1 C4,1.55228475 3.55228475,2 3,2 Z M3,6 C2.44771525,6 2,5.55228475 2,5 C2,4.44771525 2.44771525,4 3,4 C3.55228475,4 4,4.44771525 4,5 C4,5.55228475 3.55228475,6 3,6 Z M3,10 C2.44771525,10 2,9.55228475 2,9 C2,8.44771525 2.44771525,8 3,8 C3.55228475,8 4,8.44771525 4,9 C4,9.55228475 3.55228475,10 3,10 Z M7,2 C6.44771525,2 6,1.55228475 6,1 C6,0.44771525 6.44771525,0 7,0 C7.55228475,0 8,0.44771525 8,1 C8,1.55228475 7.55228475,2 7,2 Z M7,6 C6.44771525,6 6,5.55228475 6,5 C6,4.44771525 6.44771525,4 7,4 C7.55228475,4 8,4.44771525 8,5 C8,5.55228475 7.55228475,6 7,6 Z M7,10 C6.44771525,10 6,9.55228475 6,9 C6,8.44771525 6.44771525,8 7,8 C7.55228475,8 8,8.44771525 8,9 C8,9.55228475 7.55228475,10 7,10 Z",displayName:"DragHandleIcon"}),xu({displayName:"SpinnerIcon",path:e.createElement(e.Fragment,null,e.createElement("defs",null,e.createElement("linearGradient",{x1:"28.154%",y1:"63.74%",x2:"74.629%",y2:"17.783%",id:"a"},e.createElement("stop",{stopColor:"currentColor",offset:"0%"}),e.createElement("stop",{stopColor:"#fff",stopOpacity:"0",offset:"100%"}))),e.createElement("g",{transform:"translate(2)",fill:"none"},e.createElement("circle",{stroke:"url(#a)",strokeWidth:"4",cx:"10",cy:"12",r:"10"}),e.createElement("path",{d:"M10 2C4.477 2 0 6.477 0 12",stroke:"currentColor",strokeWidth:"4"}),e.createElement("rect",{fill:"currentColor",x:"8",width:"4",height:"4",rx:"8"})))}),xu({displayName:"CloseIcon",d:"M.439,21.44a1.5,1.5,0,0,0,2.122,2.121L11.823,14.3a.25.25,0,0,1,.354,0l9.262,9.263a1.5,1.5,0,1,0,2.122-2.121L14.3,12.177a.25.25,0,0,1,0-.354l9.263-9.262A1.5,1.5,0,0,0,21.439.44L12.177,9.7a.25.25,0,0,1-.354,0L2.561.44A1.5,1.5,0,0,0,.439,2.561L9.7,11.823a.25.25,0,0,1,0,.354Z"}),xu({displayName:"SmallCloseIcon",viewBox:"0 0 16 16",path:e.createElement("path",{d:"M9.41 8l2.29-2.29c.19-.18.3-.43.3-.71a1.003 1.003 0 0 0-1.71-.71L8 6.59l-2.29-2.3a1.003 1.003 0 0 0-1.42 1.42L6.59 8 4.3 10.29c-.19.18-.3.43-.3.71a1.003 1.003 0 0 0 1.71.71L8 9.41l2.29 2.29c.18.19.43.3.71.3a1.003 1.003 0 0 0 .71-1.71L9.41 8z",fillRule:"evenodd",fill:"currentColor"})}),xu({d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8 0-1.85.63-3.55 1.69-4.9L16.9 18.31C15.55 19.37 13.85 20 12 20zm6.31-3.1L7.1 5.69C8.45 4.63 10.15 4 12 4c4.42 0 8 3.58 8 8 0 1.85-.63 3.55-1.69 4.9z",displayName:"NotAllowedIcon"}),xu({d:"M21,5H3C2.621,5,2.275,5.214,2.105,5.553C1.937,5.892,1.973,6.297,2.2,6.6l9,12 c0.188,0.252,0.485,0.4,0.8,0.4s0.611-0.148,0.8-0.4l9-12c0.228-0.303,0.264-0.708,0.095-1.047C21.725,5.214,21.379,5,21,5z",displayName:"TriangleDownIcon"}),xu({d:"M12.8,5.4c-0.377-0.504-1.223-0.504-1.6,0l-9,12c-0.228,0.303-0.264,0.708-0.095,1.047 C2.275,18.786,2.621,19,3,19h18c0.379,0,0.725-0.214,0.895-0.553c0.169-0.339,0.133-0.744-0.095-1.047L12.8,5.4z",displayName:"TriangleUpIcon"}),xu({displayName:"InfoOutlineIcon",path:e.createElement("g",{fill:"currentColor",stroke:"currentColor",strokeLinecap:"square",strokeWidth:"2"},e.createElement("circle",{cx:"12",cy:"12",fill:"none",r:"11",stroke:"currentColor"}),e.createElement("line",{fill:"none",x1:"11.959",x2:"11.959",y1:"11",y2:"17"}),e.createElement("circle",{cx:"11.959",cy:"7",r:"1",stroke:"none"}))}),xu({displayName:"BellIcon",d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"}),xu({d:"M12,0A12,12,0,1,0,24,12,12.013,12.013,0,0,0,12,0Zm.25,5a1.5,1.5,0,1,1-1.5,1.5A1.5,1.5,0,0,1,12.25,5ZM14.5,18.5h-4a1,1,0,0,1,0-2h.75a.25.25,0,0,0,.25-.25v-4.5a.25.25,0,0,0-.25-.25H10.5a1,1,0,0,1,0-2h1a2,2,0,0,1,2,2v4.75a.25.25,0,0,0,.25.25h.75a1,1,0,1,1,0,2Z"}),xu({d:"M12,0A12,12,0,1,0,24,12,12.013,12.013,0,0,0,12,0Zm0,19a1.5,1.5,0,1,1,1.5-1.5A1.5,1.5,0,0,1,12,19Zm1.6-6.08a1,1,0,0,0-.6.917,1,1,0,1,1-2,0,3,3,0,0,1,1.8-2.75A2,2,0,1,0,10,9.255a1,1,0,1,1-2,0,4,4,0,1,1,5.6,3.666Z",displayName:"QuestionIcon"}),xu({displayName:"QuestionOutlineIcon",path:e.createElement("g",{stroke:"currentColor",strokeWidth:"1.5"},e.createElement("path",{strokeLinecap:"round",fill:"none",d:"M9,9a3,3,0,1,1,4,2.829,1.5,1.5,0,0,0-1,1.415V14.25"}),e.createElement("path",{fill:"none",strokeLinecap:"round",d:"M12,17.25a.375.375,0,1,0,.375.375A.375.375,0,0,0,12,17.25h0"}),e.createElement("circle",{fill:"none",strokeMiterlimit:"10",cx:"12",cy:"12",r:"11.25"}))}),xu({d:"M11.983,0a12.206,12.206,0,0,0-8.51,3.653A11.8,11.8,0,0,0,0,12.207,11.779,11.779,0,0,0,11.8,24h.214A12.111,12.111,0,0,0,24,11.791h0A11.766,11.766,0,0,0,11.983,0ZM10.5,16.542a1.476,1.476,0,0,1,1.449-1.53h.027a1.527,1.527,0,0,1,1.523,1.47,1.475,1.475,0,0,1-1.449,1.53h-.027A1.529,1.529,0,0,1,10.5,16.542ZM11,12.5v-6a1,1,0,0,1,2,0v6a1,1,0,1,1-2,0Z",displayName:"WarningIcon"}),xu({displayName:"WarningTwoIcon",d:"M23.119,20,13.772,2.15h0a2,2,0,0,0-3.543,0L.881,20a2,2,0,0,0,1.772,2.928H21.347A2,2,0,0,0,23.119,20ZM11,8.423a1,1,0,0,1,2,0v6a1,1,0,1,1-2,0Zm1.05,11.51h-.028a1.528,1.528,0,0,1-1.522-1.47,1.476,1.476,0,0,1,1.448-1.53h.028A1.527,1.527,0,0,1,13.5,18.4,1.475,1.475,0,0,1,12.05,19.933Z"}),xu({viewBox:"0 0 14 14",path:e.createElement("g",{fill:"currentColor"},e.createElement("polygon",{points:"5.5 11.9993304 14 3.49933039 12.5 2 5.5 8.99933039 1.5 4.9968652 0 6.49933039"}))}),xu({displayName:"MinusIcon",path:e.createElement("g",{fill:"currentColor"},e.createElement("rect",{height:"4",width:"20",x:"2",y:"10"}))}),xu({displayName:"HamburgerIcon",viewBox:"0 0 24 24",d:"M 3 5 A 1.0001 1.0001 0 1 0 3 7 L 21 7 A 1.0001 1.0001 0 1 0 21 5 L 3 5 z M 3 11 A 1.0001 1.0001 0 1 0 3 13 L 21 13 A 1.0001 1.0001 0 1 0 21 11 L 3 11 z M 3 17 A 1.0001 1.0001 0 1 0 3 19 L 21 19 A 1.0001 1.0001 0 1 0 21 17 L 3 17 z"}),function(e,t){return gc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},gc(e,t)});function vc(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}gc(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var yc=function(){return yc=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},yc.apply(this,arguments)};function xc(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}function bc(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return o}function wc(e,t,r){if(r||2===arguments.length)for(var n,i=0,a=t.length;i<a;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}Object.create,Object.create;var Sc=function(e){return{isEnabled:function(t){return e.some((function(e){return!!t[e]}))}}},_c={measureLayout:Sc(["layout","layoutId","drag"]),animation:Sc(["animate","exit","variants","whileHover","whileTap","whileFocus","whileDrag","whileInView"]),exit:Sc(["exit"]),drag:Sc(["drag","dragControls"]),focus:Sc(["whileFocus"]),hover:Sc(["whileHover","onHoverStart","onHoverEnd"]),tap:Sc(["whileTap","onTap","onTapStart","onTapCancel"]),pan:Sc(["onPan","onPanStart","onPanSessionStart","onPanEnd"]),inView:Sc(["whileInView","onViewportEnter","onViewportLeave"])},Ac=(0,e.createContext)({strict:!1}),Mc=Object.keys(_c),Ec=Mc.length,Cc=(0,e.createContext)({transformPagePoint:function(e){return e},isStatic:!1,reducedMotion:"never"}),Tc=(0,e.createContext)({}),Dc=(0,e.createContext)(null),Lc="undefined"!=typeof document,Pc=Lc?e.useLayoutEffect:e.useEffect,Rc={current:null},Oc=!1;function kc(t,r,n,i){var a,o,s=(0,e.useContext)(Ac),l=(0,e.useContext)(Tc).visualElement,u=(0,e.useContext)(Dc),c=(!Oc&&function(){if(Oc=!0,Lc)if(window.matchMedia){var e=window.matchMedia("(prefers-reduced-motion)"),t=function(){return Rc.current=e.matches};e.addListener(t),t()}else Rc.current=!1}(),a=bc((0,e.useState)(Rc.current),1)[0],"never"!==(o=(0,e.useContext)(Cc).reducedMotion)&&("always"===o||a)),h=(0,e.useRef)(void 0);i||(i=s.renderer),!h.current&&i&&(h.current=i(t,{visualState:r,parent:l,props:n,presenceId:null==u?void 0:u.id,blockInitialAnimation:!1===(null==u?void 0:u.initial),shouldReduceMotion:c}));var d=h.current;return Pc((function(){null==d||d.syncRender()})),(0,e.useEffect)((function(){var e;null===(e=null==d?void 0:d.animationState)||void 0===e||e.animateChanges()})),Pc((function(){return function(){return null==d?void 0:d.notifyUnmount()}}),[]),d}function Ic(e){return"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function Bc(e){return Array.isArray(e)}function zc(e){return"string"==typeof e||Bc(e)}function Nc(e,t,r,n,i){var a;return void 0===n&&(n={}),void 0===i&&(i={}),"function"==typeof t&&(t=t(null!=r?r:e.custom,n,i)),"string"==typeof t&&(t=null===(a=e.variants)||void 0===a?void 0:a[t]),"function"==typeof t&&(t=t(null!=r?r:e.custom,n,i)),t}function Fc(e,t,r){var n=e.getProps();return Nc(n,t,null!=r?r:n.custom,function(e){var t={};return e.forEachValue((function(e,r){return t[r]=e.get()})),t}(e),function(e){var t={};return e.forEachValue((function(e,r){return t[r]=e.getVelocity()})),t}(e))}function Uc(e){var t;return"function"==typeof(null===(t=e.animate)||void 0===t?void 0:t.start)||zc(e.initial)||zc(e.animate)||zc(e.whileHover)||zc(e.whileDrag)||zc(e.whileTap)||zc(e.whileFocus)||zc(e.exit)}function jc(e){return Boolean(Uc(e)||e.variants)}function Hc(e){return Array.isArray(e)?e.join(" "):e}function Vc(t){var r=(0,e.useRef)(null);return null===r.current&&(r.current=t()),r.current}const Gc=1/60*1e3,Wc="undefined"!=typeof performance?()=>performance.now():()=>Date.now(),qc="undefined"!=typeof window?e=>window.requestAnimationFrame(e):e=>setTimeout((()=>e(Wc())),Gc);let Yc=!0,Xc=!1,Qc=!1;const Jc={delta:0,timestamp:0},Zc=["read","update","preRender","render","postRender"],Kc=Zc.reduce(((e,t)=>(e[t]=function(e){let t=[],r=[],n=0,i=!1,a=!1;const o=new WeakSet,s={schedule:(e,a=!1,s=!1)=>{const l=s&&i,u=l?t:r;return a&&o.add(e),-1===u.indexOf(e)&&(u.push(e),l&&i&&(n=t.length)),e},cancel:e=>{const t=r.indexOf(e);-1!==t&&r.splice(t,1),o.delete(e)},process:e=>{if(i)a=!0;else{if(i=!0,[t,r]=[r,t],r.length=0,n=t.length,n)for(let r=0;r<n;r++){const n=t[r];n(e),o.has(n)&&(s.schedule(n),Xc=!0)}i=!1,a&&(a=!1,s.process(e))}}};return s}(),e)),{}),$c=Zc.reduce(((e,t)=>{const r=Kc[t];return e[t]=(e,t=!1,n=!1)=>(Xc||ih(),r.schedule(e,t,n)),e}),{}),eh=Zc.reduce(((e,t)=>(e[t]=Kc[t].cancel,e)),{}),th=Zc.reduce(((e,t)=>(e[t]=()=>Kc[t].process(Jc),e)),{}),rh=e=>Kc[e].process(Jc),nh=e=>{Xc=!1,Jc.delta=Yc?Gc:Math.max(Math.min(e-Jc.timestamp,40),1),Jc.timestamp=e,Qc=!0,Zc.forEach(rh),Qc=!1,Xc&&(Yc=!1,qc(nh))},ih=()=>{Xc=!0,Yc=!0,Qc||qc(nh)},ah=()=>Jc,oh=$c,sh=(e,t,r)=>-r*e+r*t+e;function lh(e,t){return t?e*(1e3/t):0}function uh(e,t){-1===e.indexOf(t)&&e.push(t)}function ch(e,t){var r=e.indexOf(t);r>-1&&e.splice(r,1)}var hh=function(){function e(){this.subscriptions=[]}return e.prototype.add=function(e){var t=this;return uh(this.subscriptions,e),function(){return ch(t.subscriptions,e)}},e.prototype.notify=function(e,t,r){var n=this.subscriptions.length;if(n)if(1===n)this.subscriptions[0](e,t,r);else for(var i=0;i<n;i++){var a=this.subscriptions[i];a&&a(e,t,r)}},e.prototype.getSize=function(){return this.subscriptions.length},e.prototype.clear=function(){this.subscriptions.length=0},e}(),dh=function(){function e(e){var t,r=this;this.timeDelta=0,this.lastUpdated=0,this.updateSubscribers=new hh,this.velocityUpdateSubscribers=new hh,this.renderSubscribers=new hh,this.canTrackVelocity=!1,this.updateAndNotify=function(e,t){void 0===t&&(t=!0),r.prev=r.current,r.current=e;var n=ah(),i=n.delta,a=n.timestamp;r.lastUpdated!==a&&(r.timeDelta=i,r.lastUpdated=a,oh.postRender(r.scheduleVelocityCheck)),r.prev!==r.current&&r.updateSubscribers.notify(r.current),r.velocityUpdateSubscribers.getSize()&&r.velocityUpdateSubscribers.notify(r.getVelocity()),t&&r.renderSubscribers.notify(r.current)},this.scheduleVelocityCheck=function(){return oh.postRender(r.velocityCheck)},this.velocityCheck=function(e){e.timestamp!==r.lastUpdated&&(r.prev=r.current,r.velocityUpdateSubscribers.notify(r.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=(t=this.current,!isNaN(parseFloat(t)))}return e.prototype.onChange=function(e){return this.updateSubscribers.add(e)},e.prototype.clearListeners=function(){this.updateSubscribers.clear()},e.prototype.onRenderRequest=function(e){return e(this.get()),this.renderSubscribers.add(e)},e.prototype.attach=function(e){this.passiveEffect=e},e.prototype.set=function(e,t){void 0===t&&(t=!0),t&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,t)},e.prototype.get=function(){return this.current},e.prototype.getPrevious=function(){return this.prev},e.prototype.getVelocity=function(){return this.canTrackVelocity?lh(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0},e.prototype.start=function(e){var t=this;return this.stop(),new Promise((function(r){t.hasAnimated=!0,t.stopAnimation=e(r)})).then((function(){return t.clearAnimation()}))},e.prototype.stop=function(){this.stopAnimation&&this.stopAnimation(),this.clearAnimation()},e.prototype.isAnimating=function(){return!!this.stopAnimation},e.prototype.clearAnimation=function(){this.stopAnimation=null},e.prototype.destroy=function(){this.updateSubscribers.clear(),this.renderSubscribers.clear(),this.stop()},e}();function ph(e){return new dh(e)}var fh=function(e){return Boolean(null!==e&&"object"==typeof e&&e.getVelocity)};const mh=(e,t,r)=>Math.min(Math.max(r,e),t);function gh(e,t){return e*Math.sqrt(1-t*t)}const vh=["duration","bounce"],yh=["stiffness","damping","mass"];function xh(e,t){return t.some((t=>void 0!==e[t]))}function bh(e){var{from:t=0,to:r=1,restSpeed:n=2,restDelta:i}=e,a=xc(e,["from","to","restSpeed","restDelta"]);const o={done:!1,value:t};let{stiffness:s,damping:l,mass:u,velocity:c,duration:h,isResolvedFromDuration:d}=function(e){let t=Object.assign({velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1},e);if(!xh(e,yh)&&xh(e,vh)){const r=function({duration:e=800,bounce:t=.25,velocity:r=0,mass:n=1}){let i,a,o=1-t;o=mh(.05,1,o),e=mh(.01,10,e/1e3),o<1?(i=t=>{const n=t*o,i=n*e;return.001-(n-r)/gh(t,o)*Math.exp(-i)},a=t=>{const n=t*o*e,a=n*r+r,s=Math.pow(o,2)*Math.pow(t,2)*e,l=Math.exp(-n),u=gh(Math.pow(t,2),o);return(.001-i(t)>0?-1:1)*((a-s)*l)/u}):(i=t=>Math.exp(-t*e)*((t-r)*e+1)-.001,a=t=>Math.exp(-t*e)*(e*e*(r-t)));const s=function(e,t,r){let n=r;for(let r=1;r<12;r++)n-=e(n)/t(n);return n}(i,a,5/e);if(e*=1e3,isNaN(s))return{stiffness:100,damping:10,duration:e};{const t=Math.pow(s,2)*n;return{stiffness:t,damping:2*o*Math.sqrt(n*t),duration:e}}}(e);t=Object.assign(Object.assign(Object.assign({},t),r),{velocity:0,mass:1}),t.isResolvedFromDuration=!0}return t}(a),p=wh,f=wh;function m(){const e=c?-c/1e3:0,n=r-t,a=l/(2*Math.sqrt(s*u)),o=Math.sqrt(s/u)/1e3;if(void 0===i&&(i=Math.min(Math.abs(r-t)/100,.4)),a<1){const t=gh(o,a);p=i=>{const s=Math.exp(-a*o*i);return r-s*((e+a*o*n)/t*Math.sin(t*i)+n*Math.cos(t*i))},f=r=>{const i=Math.exp(-a*o*r);return a*o*i*(Math.sin(t*r)*(e+a*o*n)/t+n*Math.cos(t*r))-i*(Math.cos(t*r)*(e+a*o*n)-t*n*Math.sin(t*r))}}else if(1===a)p=t=>r-Math.exp(-o*t)*(n+(e+o*n)*t);else{const t=o*Math.sqrt(a*a-1);p=i=>{const s=Math.exp(-a*o*i),l=Math.min(t*i,300);return r-s*((e+a*o*n)*Math.sinh(l)+t*n*Math.cosh(l))/t}}}return m(),{next:e=>{const t=p(e);if(d)o.done=e>=h;else{const a=1e3*f(e),s=Math.abs(a)<=n,l=Math.abs(r-t)<=i;o.done=s&&l}return o.value=o.done?r:t,o},flipTarget:()=>{c=-c,[t,r]=[r,t],m()}}}bh.needsInterpolation=(e,t)=>"string"==typeof e||"string"==typeof t;const wh=e=>0,Sh=(e,t,r)=>{const n=t-e;return 0===n?1:(r-e)/n},_h=(e,t)=>r=>Math.max(Math.min(r,t),e),Ah=e=>e%1?Number(e.toFixed(5)):e,Mh=/(-)?([\d]*\.?[\d])+/g,Eh=/(#[0-9a-f]{6}|#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2,3}\s*\/*\s*[\d\.]+%?\))/gi,Ch=/^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2,3}\s*\/*\s*[\d\.]+%?\))$/i;function Th(e){return"string"==typeof e}const Dh={test:e=>"number"==typeof e,parse:parseFloat,transform:e=>e},Lh=Object.assign(Object.assign({},Dh),{transform:_h(0,1)}),Ph=Object.assign(Object.assign({},Dh),{default:1}),Rh=(e,t)=>r=>Boolean(Th(r)&&Ch.test(r)&&r.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(r,t)),Oh=(e,t,r)=>n=>{if(!Th(n))return n;const[i,a,o,s]=n.match(Mh);return{[e]:parseFloat(i),[t]:parseFloat(a),[r]:parseFloat(o),alpha:void 0!==s?parseFloat(s):1}},kh=_h(0,255),Ih=Object.assign(Object.assign({},Dh),{transform:e=>Math.round(kh(e))}),Bh={test:Rh("rgb","red"),parse:Oh("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:n=1})=>"rgba("+Ih.transform(e)+", "+Ih.transform(t)+", "+Ih.transform(r)+", "+Ah(Lh.transform(n))+")"},zh={test:Rh("#"),parse:function(e){let t="",r="",n="",i="";return e.length>5?(t=e.substr(1,2),r=e.substr(3,2),n=e.substr(5,2),i=e.substr(7,2)):(t=e.substr(1,1),r=e.substr(2,1),n=e.substr(3,1),i=e.substr(4,1),t+=t,r+=r,n+=n,i+=i),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:i?parseInt(i,16)/255:1}},transform:Bh.transform},Nh=e=>({test:t=>Th(t)&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>`${t}${e}`}),Fh=Nh("deg"),Uh=Nh("%"),jh=Nh("px"),Hh=Nh("vh"),Vh=Nh("vw"),Gh=Object.assign(Object.assign({},Uh),{parse:e=>Uh.parse(e)/100,transform:e=>Uh.transform(100*e)}),Wh={test:Rh("hsl","hue"),parse:Oh("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:n=1})=>"hsla("+Math.round(e)+", "+Uh.transform(Ah(t))+", "+Uh.transform(Ah(r))+", "+Ah(Lh.transform(n))+")"};function qh(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function Yh({hue:e,saturation:t,lightness:r,alpha:n}){e/=360,r/=100;let i=0,a=0,o=0;if(t/=100){const n=r<.5?r*(1+t):r+t-r*t,s=2*r-n;i=qh(s,n,e+1/3),a=qh(s,n,e),o=qh(s,n,e-1/3)}else i=a=o=r;return{red:Math.round(255*i),green:Math.round(255*a),blue:Math.round(255*o),alpha:n}}const Xh=(e,t,r)=>{const n=e*e,i=t*t;return Math.sqrt(Math.max(0,r*(i-n)+n))},Qh=[zh,Bh,Wh],Jh=e=>Qh.find((t=>t.test(e))),Zh=e=>`'${e}' is not an animatable color. Use the equivalent color code instead.`,Kh=(e,t)=>{let r=Jh(e),n=Jh(t);Zh(e),Zh(t);let i=r.parse(e),a=n.parse(t);r===Wh&&(i=Yh(i),r=Bh),n===Wh&&(a=Yh(a),n=Bh);const o=Object.assign({},i);return e=>{for(const t in o)"alpha"!==t&&(o[t]=Xh(i[t],a[t],e));return o.alpha=sh(i.alpha,a.alpha,e),r.transform(o)}},$h={test:e=>Bh.test(e)||zh.test(e)||Wh.test(e),parse:e=>Bh.test(e)?Bh.parse(e):Wh.test(e)?Wh.parse(e):zh.parse(e),transform:e=>Th(e)?e:e.hasOwnProperty("red")?Bh.transform(e):Wh.transform(e)},ed="${c}",td="${n}";function rd(e){"number"==typeof e&&(e=`${e}`);const t=[];let r=0;const n=e.match(Eh);n&&(r=n.length,e=e.replace(Eh,ed),t.push(...n.map($h.parse)));const i=e.match(Mh);return i&&(e=e.replace(Mh,td),t.push(...i.map(Dh.parse))),{values:t,numColors:r,tokenised:e}}function nd(e){return rd(e).values}function id(e){const{values:t,numColors:r,tokenised:n}=rd(e),i=t.length;return e=>{let t=n;for(let n=0;n<i;n++)t=t.replace(n<r?ed:td,n<r?$h.transform(e[n]):Ah(e[n]));return t}}const ad=e=>"number"==typeof e?0:e,od={test:function(e){var t,r,n,i;return isNaN(e)&&Th(e)&&(null!==(r=null===(t=e.match(Mh))||void 0===t?void 0:t.length)&&void 0!==r?r:0)+(null!==(i=null===(n=e.match(Eh))||void 0===n?void 0:n.length)&&void 0!==i?i:0)>0},parse:nd,createTransformer:id,getAnimatableNone:function(e){const t=nd(e);return id(e)(t.map(ad))}},sd=e=>"number"==typeof e,ld=(e,t)=>r=>t(e(r)),ud=(...e)=>e.reduce(ld);function cd(e,t){return sd(e)?r=>sh(e,t,r):$h.test(e)?Kh(e,t):fd(e,t)}const hd=(e,t)=>{const r=[...e],n=r.length,i=e.map(((e,r)=>cd(e,t[r])));return e=>{for(let t=0;t<n;t++)r[t]=i[t](e);return r}},dd=(e,t)=>{const r=Object.assign(Object.assign({},e),t),n={};for(const i in r)void 0!==e[i]&&void 0!==t[i]&&(n[i]=cd(e[i],t[i]));return e=>{for(const t in n)r[t]=n[t](e);return r}};function pd(e){const t=od.parse(e),r=t.length;let n=0,i=0,a=0;for(let e=0;e<r;e++)n||"number"==typeof t[e]?n++:void 0!==t[e].hue?a++:i++;return{parsed:t,numNumbers:n,numRGB:i,numHSL:a}}const fd=(e,t)=>{const r=od.createTransformer(t),n=pd(e),i=pd(t);return n.numHSL===i.numHSL&&n.numRGB===i.numRGB&&n.numNumbers>=i.numNumbers?ud(hd(n.parsed,i.parsed),r):r=>`${r>0?t:e}`},md=(e,t)=>r=>sh(e,t,r);function gd(e,t,{clamp:r=!0,ease:n,mixer:i}={}){const a=e.length;t.length,!n||!Array.isArray(n)||n.length,e[0]>e[a-1]&&(e=[].concat(e),t=[].concat(t),e.reverse(),t.reverse());const o=function(e,t,r){const n=[],i=r||function(e){return"number"==typeof e?md:"string"==typeof e?$h.test(e)?Kh:fd:Array.isArray(e)?hd:"object"==typeof e?dd:void 0}(e[0]),a=e.length-1;for(let r=0;r<a;r++){let a=i(e[r],e[r+1]);if(t){const e=Array.isArray(t)?t[r]:t;a=ud(e,a)}n.push(a)}return n}(t,n,i),s=2===a?function([e,t],[r]){return n=>r(Sh(e,t,n))}(e,o):function(e,t){const r=e.length,n=r-1;return i=>{let a=0,o=!1;if(i<=e[0]?o=!0:i>=e[n]&&(a=n-1,o=!0),!o){let t=1;for(;t<r&&!(e[t]>i||t===n);t++);a=t-1}const s=Sh(e[a],e[a+1],i);return t[a](s)}}(e,o);return r?t=>s(mh(e[0],e[a-1],t)):s}const vd=e=>t=>1-e(1-t),yd=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,xd=e=>t=>t*t*((e+1)*t-e),bd=e=>e,wd=(2,e=>Math.pow(e,2));const Sd=vd(wd),_d=yd(wd),Ad=e=>1-Math.sin(Math.acos(e)),Md=vd(Ad),Ed=yd(Md),Cd=xd(1.525),Td=vd(Cd),Dd=yd(Cd),Ld=(e=>{const t=xd(1.525);return e=>(e*=2)<1?.5*t(e):.5*(2-Math.pow(2,-10*(e-1)))})(),Pd=e=>{if(1===e||0===e)return e;const t=e*e;return e<.36363636363636365?7.5625*t:e<.7272727272727273?9.075*t-9.9*e+3.4:e<.9?12.066481994459833*t-19.63545706371191*e+8.898060941828255:10.8*e*e-20.52*e+10.72},Rd=vd(Pd);function Od(e,t){return e.map((()=>t||_d)).splice(0,e.length-1)}function kd({from:e=0,to:t=1,ease:r,offset:n,duration:i=300}){const a={done:!1,value:e},o=Array.isArray(t)?t:[e,t],s=function(e,t){return e.map((e=>e*t))}(n&&n.length===o.length?n:function(e){const t=e.length;return e.map(((e,r)=>0!==r?r/(t-1):0))}(o),i);function l(){return gd(s,o,{ease:Array.isArray(r)?r:Od(o,r)})}let u=l();return{next:e=>(a.value=u(e),a.done=e>=i,a),flipTarget:()=>{o.reverse(),u=l()}}}const Id={keyframes:kd,spring:bh,decay:function({velocity:e=0,from:t=0,power:r=.8,timeConstant:n=350,restDelta:i=.5,modifyTarget:a}){const o={done:!1,value:t};let s=r*e;const l=t+s,u=void 0===a?l:a(l);return u!==l&&(s=u-t),{next:e=>{const t=-s*Math.exp(-e/n);return o.done=!(t>i||t<-i),o.value=o.done?u:u+t,o},flipTarget:()=>{}}}},Bd=1/60*1e3,zd="undefined"!=typeof performance?()=>performance.now():()=>Date.now(),Nd="undefined"!=typeof window?e=>window.requestAnimationFrame(e):e=>setTimeout((()=>e(zd())),Bd);let Fd=!0,Ud=!1,jd=!1;const Hd={delta:0,timestamp:0},Vd=["read","update","preRender","render","postRender"],Gd=Vd.reduce(((e,t)=>(e[t]=function(e){let t=[],r=[],n=0,i=!1,a=!1;const o=new WeakSet,s={schedule:(e,a=!1,s=!1)=>{const l=s&&i,u=l?t:r;return a&&o.add(e),-1===u.indexOf(e)&&(u.push(e),l&&i&&(n=t.length)),e},cancel:e=>{const t=r.indexOf(e);-1!==t&&r.splice(t,1),o.delete(e)},process:e=>{if(i)a=!0;else{if(i=!0,[t,r]=[r,t],r.length=0,n=t.length,n)for(let r=0;r<n;r++){const n=t[r];n(e),o.has(n)&&(s.schedule(n),Ud=!0)}i=!1,a&&(a=!1,s.process(e))}}};return s}(),e)),{}),Wd=Vd.reduce(((e,t)=>{const r=Gd[t];return e[t]=(e,t=!1,n=!1)=>(Ud||Qd(),r.schedule(e,t,n)),e}),{}),qd=Vd.reduce(((e,t)=>(e[t]=Gd[t].cancel,e)),{}),Yd=(Vd.reduce(((e,t)=>(e[t]=()=>Gd[t].process(Hd),e)),{}),e=>Gd[e].process(Hd)),Xd=e=>{Ud=!1,Hd.delta=Fd?Bd:Math.max(Math.min(e-Hd.timestamp,40),1),Hd.timestamp=e,jd=!0,Vd.forEach(Yd),jd=!1,Ud&&(Fd=!1,Nd(Xd))},Qd=()=>{Ud=!0,Fd=!0,jd||Nd(Xd)},Jd=Wd;function Zd(e,t,r=0){return e-t-r}const Kd=e=>{const t=({delta:t})=>e(t);return{start:()=>Jd.update(t,!0),stop:()=>qd.update(t)}};function $d(e){var t,r,{from:n,autoplay:i=!0,driver:a=Kd,elapsed:o=0,repeat:s=0,repeatType:l="loop",repeatDelay:u=0,onPlay:c,onStop:h,onComplete:d,onRepeat:p,onUpdate:f}=e,m=xc(e,["from","autoplay","driver","elapsed","repeat","repeatType","repeatDelay","onPlay","onStop","onComplete","onRepeat","onUpdate"]);let g,v,y,{to:x}=m,b=0,w=m.duration,S=!1,_=!0;const A=function(e){if(Array.isArray(e.to))return kd;if(Id[e.type])return Id[e.type];const t=new Set(Object.keys(e));return t.has("ease")||t.has("duration")&&!t.has("dampingRatio")?kd:t.has("dampingRatio")||t.has("stiffness")||t.has("mass")||t.has("damping")||t.has("restSpeed")||t.has("restDelta")?bh:kd}(m);(null===(r=(t=A).needsInterpolation)||void 0===r?void 0:r.call(t,n,x))&&(y=gd([0,100],[n,x],{clamp:!1}),n=0,x=100);const M=A(Object.assign(Object.assign({},m),{from:n,to:x}));return i&&(null==c||c(),g=a((function(e){if(_||(e=-e),o+=e,!S){const e=M.next(Math.max(0,o));v=e.value,y&&(v=y(v)),S=_?e.done:o<=0}null==f||f(v),S&&(0===b&&(null!=w||(w=o)),b<s?function(e,t,r,n){return n?e>=t+r:e<=-r}(o,w,u,_)&&(b++,"reverse"===l?(_=b%2==0,o=function(e,t,r=0,n=!0){return n?Zd(t+-e,t,r):t-(e-t)+r}(o,w,u,_)):(o=Zd(o,w,u),"mirror"===l&&M.flipTarget()),S=!1,p&&p()):(g.stop(),d&&d()))})),g.start()),{stop:()=>{null==h||h(),g.stop()}}}var ep=function(e){return 1e3*e};const tp=(e,t)=>1-3*t+3*e,rp=(e,t)=>3*t-6*e,np=e=>3*e,ip=(e,t,r)=>((tp(t,r)*e+rp(t,r))*e+np(t))*e,ap=(e,t,r)=>3*tp(t,r)*e*e+2*rp(t,r)*e+np(t),op=.1;function sp(e,t,r,n){if(e===t&&r===n)return bd;const i=new Float32Array(11);for(let t=0;t<11;++t)i[t]=ip(t*op,e,r);return a=>0===a||1===a?a:ip(function(t){let n=0,a=1;for(;10!==a&&i[a]<=t;++a)n+=op;--a;const o=n+(t-i[a])/(i[a+1]-i[a])*op,s=ap(o,e,r);return s>=.001?function(e,t,r,n){for(let i=0;i<8;++i){const i=ap(t,r,n);if(0===i)return t;t-=(ip(t,r,n)-e)/i}return t}(t,o,e,r):0===s?o:function(e,t,r,n,i){let a,o,s=0;do{o=t+(r-t)/2,a=ip(o,n,i)-e,a>0?r=o:t=o}while(Math.abs(a)>1e-7&&++s<10);return o}(t,n,n+op,e,r)}(a),t,n)}var lp={linear:bd,easeIn:wd,easeInOut:_d,easeOut:Sd,circIn:Ad,circInOut:Ed,circOut:Md,backIn:Cd,backInOut:Dd,backOut:Td,anticipate:Ld,bounceIn:Rd,bounceInOut:e=>e<.5?.5*(1-Pd(1-2*e)):.5*Pd(2*e-1)+.5,bounceOut:Pd},up=function(e){if(Array.isArray(e)){e.length;var t=bc(e,4);return sp(t[0],t[1],t[2],t[3])}return"string"==typeof e?("Invalid easing type '".concat(e,"'"),lp[e]):e},cp=function(e,t){return!("zIndex"===e||"number"!=typeof t&&!Array.isArray(t)&&("string"!=typeof t||!od.test(t)||t.startsWith("url(")))},hp=function(e){return Array.isArray(e)},dp=function(){return{type:"spring",stiffness:500,damping:25,restSpeed:10}},pp=function(e){return{type:"spring",stiffness:550,damping:0===e?2*Math.sqrt(550):30,restSpeed:10}},fp=function(){return{type:"keyframes",ease:"linear",duration:.3}},mp=function(e){return{type:"keyframes",duration:.8,values:e}},gp={x:dp,y:dp,z:dp,rotate:dp,rotateX:dp,rotateY:dp,rotateZ:dp,scaleX:pp,scaleY:pp,scale:pp,opacity:fp,backgroundColor:fp,color:fp,default:pp};const vp=new Set(["brightness","contrast","saturate","opacity"]);function yp(e){let[t,r]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[n]=r.match(Mh)||[];if(!n)return e;const i=r.replace(n,"");let a=vp.has(t)?1:0;return n!==r&&(a*=100),t+"("+a+i+")"}const xp=/([a-z-]*)\(.*?\)/g,bp=Object.assign(Object.assign({},od),{getAnimatableNone:e=>{const t=e.match(xp);return t?t.map(yp).join(" "):e}});var wp=yc(yc({},Dh),{transform:Math.round}),Sp={borderWidth:jh,borderTopWidth:jh,borderRightWidth:jh,borderBottomWidth:jh,borderLeftWidth:jh,borderRadius:jh,radius:jh,borderTopLeftRadius:jh,borderTopRightRadius:jh,borderBottomRightRadius:jh,borderBottomLeftRadius:jh,width:jh,maxWidth:jh,height:jh,maxHeight:jh,size:jh,top:jh,right:jh,bottom:jh,left:jh,padding:jh,paddingTop:jh,paddingRight:jh,paddingBottom:jh,paddingLeft:jh,margin:jh,marginTop:jh,marginRight:jh,marginBottom:jh,marginLeft:jh,rotate:Fh,rotateX:Fh,rotateY:Fh,rotateZ:Fh,scale:Ph,scaleX:Ph,scaleY:Ph,scaleZ:Ph,skew:Fh,skewX:Fh,skewY:Fh,distance:jh,translateX:jh,translateY:jh,translateZ:jh,x:jh,y:jh,z:jh,perspective:jh,transformPerspective:jh,opacity:Lh,originX:Gh,originY:Gh,originZ:jh,zIndex:wp,fillOpacity:Lh,strokeOpacity:Lh,numOctaves:wp},_p=yc(yc({},Sp),{color:$h,backgroundColor:$h,outlineColor:$h,fill:$h,stroke:$h,borderColor:$h,borderTopColor:$h,borderRightColor:$h,borderBottomColor:$h,borderLeftColor:$h,filter:bp,WebkitFilter:bp}),Ap=function(e){return _p[e]};function Mp(e,t){var r,n=Ap(e);return n!==bp&&(n=od),null===(r=n.getAnimatableNone)||void 0===r?void 0:r.call(n,t)}var Ep=function(e){return hp(e)?e[e.length-1]||0:e};function Cp(e,t,r){var n,i,a,o;return Array.isArray(t.to)&&(null!==(n=e.duration)&&void 0!==n||(e.duration=.8)),function(e){Array.isArray(e.to)&&null===e.to[0]&&(e.to=wc([],bc(e.to),!1),e.to[0]=e.from)}(t),function(e){e.when,e.delay,e.delayChildren,e.staggerChildren,e.staggerDirection,e.repeat,e.repeatType,e.repeatDelay,e.from;var t=xc(e,["when","delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","from"]);return!!Object.keys(t).length}(e)||(e=yc(yc({},e),(i=r,a=t.to,o=hp(a)?mp:gp[i]||gp.default,yc({to:a},o(a))))),yc(yc({},t),function(e){var t=e.ease,r=e.times,n=e.yoyo,i=e.flip,a=e.loop,o=xc(e,["ease","times","yoyo","flip","loop"]),s=yc({},o);return r&&(s.offset=r),o.duration&&(s.duration=ep(o.duration)),o.repeatDelay&&(s.repeatDelay=ep(o.repeatDelay)),t&&(s.ease=function(e){return Array.isArray(e)&&"number"!=typeof e[0]}(t)?t.map(up):up(t)),"tween"===o.type&&(s.type="keyframes"),(n||a||i)&&(n?s.repeatType="reverse":a?s.repeatType="loop":i&&(s.repeatType="mirror"),s.repeat=a||n||i||o.repeat),"spring"!==o.type&&(s.type="keyframes"),s}(e))}function Tp(e){return 0===e||"string"==typeof e&&0===parseFloat(e)&&-1===e.indexOf(" ")}function Dp(e){return"number"==typeof e?0:Mp("",e)}function Lp(e,t){return e[t]||e.default||e}function Pp(e,t,r,n){return void 0===n&&(n={}),t.start((function(i){var a,o,s=function(e,t,r,n,i){var a,o=Lp(n,e),s=null!==(a=o.from)&&void 0!==a?a:t.get(),l=cp(e,r);"none"===s&&l&&"string"==typeof r?s=Mp(e,r):Tp(s)&&"string"==typeof r?s=Dp(r):!Array.isArray(r)&&Tp(r)&&"string"==typeof s&&(r=Dp(s));var u=cp(e,s);return"You are trying to animate ".concat(e,' from "').concat(s,'" to "').concat(r,'". ').concat(s," is not an animatable value - to enable this animation set ").concat(s," to a value animatable to ").concat(r," via the `style` property."),u&&l&&!1!==o.type?function(){var n={from:s,to:r,velocity:t.getVelocity(),onComplete:i,onUpdate:function(e){return t.set(e)}};return"inertia"===o.type||"decay"===o.type?function({from:e=0,velocity:t=0,min:r,max:n,power:i=.8,timeConstant:a=750,bounceStiffness:o=500,bounceDamping:s=10,restDelta:l=1,modifyTarget:u,driver:c,onUpdate:h,onComplete:d,onStop:p}){let f;function m(e){return void 0!==r&&e<r||void 0!==n&&e>n}function g(e){return void 0===r?n:void 0===n||Math.abs(r-e)<Math.abs(n-e)?r:n}function v(e){null==f||f.stop(),f=$d(Object.assign(Object.assign({},e),{driver:c,onUpdate:t=>{var r;null==h||h(t),null===(r=e.onUpdate)||void 0===r||r.call(e,t)},onComplete:d,onStop:p}))}function y(e){v(Object.assign({type:"spring",stiffness:o,damping:s,restDelta:l},e))}if(m(e))y({from:e,velocity:t,to:g(e)});else{let n=i*t+e;void 0!==u&&(n=u(n));const o=g(n),s=o===r?-1:1;let c,h;const d=e=>{c=h,h=e,t=lh(e-c,Hd.delta),(1===s&&e>o||-1===s&&e<o)&&y({from:e,to:o,velocity:t})};v({type:"decay",from:e,velocity:t,timeConstant:a,power:i,restDelta:l,modifyTarget:u,onUpdate:m(n)?d:void 0})}return{stop:()=>null==f?void 0:f.stop()}}(yc(yc({},n),o)):$d(yc(yc({},Cp(o,n,e)),{onUpdate:function(e){var t;n.onUpdate(e),null===(t=o.onUpdate)||void 0===t||t.call(o,e)},onComplete:function(){var e;n.onComplete(),null===(e=o.onComplete)||void 0===e||e.call(o)}}))}:function(){var e,n,a=Ep(r);return t.set(a),i(),null===(e=null==o?void 0:o.onUpdate)||void 0===e||e.call(o,a),null===(n=null==o?void 0:o.onComplete)||void 0===n||n.call(o),{stop:function(){}}}}(e,t,r,n,i),l=function(e,t){var r,n;return null!==(n=null!==(r=(Lp(e,t)||{}).delay)&&void 0!==r?r:e.delay)&&void 0!==n?n:0}(n,e),u=function(){return o=s()};return l?a=window.setTimeout(u,ep(l)):u(),function(){clearTimeout(a),null==o||o.stop()}}))}var Rp=["TopLeft","TopRight","BottomLeft","BottomRight"],Op=Rp.length,kp=function(e){return"string"==typeof e?parseFloat(e):e},Ip=function(e){return"number"==typeof e||jh.test(e)};function Bp(e,t){var r;return null!==(r=e[t])&&void 0!==r?r:e.borderRadius}var zp=Fp(0,.5,Md),Np=Fp(.5,.95,bd);function Fp(e,t,r){return function(n){return n<e?0:n>t?1:r(Sh(e,t,n))}}function Up(e,t){e.min=t.min,e.max=t.max}function jp(e,t){Up(e.x,t.x),Up(e.y,t.y)}function Hp(e){return void 0===e||1===e}function Vp(e){var t=e.scale,r=e.scaleX,n=e.scaleY;return!Hp(t)||!Hp(r)||!Hp(n)}function Gp(e){return Vp(e)||Wp(e.x)||Wp(e.y)||e.z||e.rotate||e.rotateX||e.rotateY}function Wp(e){return e&&"0%"!==e}function qp(e,t,r){return r+t*(e-r)}function Yp(e,t,r,n,i){return void 0!==i&&(e=qp(e,i,n)),qp(e,r,n)+t}function Xp(e,t,r,n,i){void 0===t&&(t=0),void 0===r&&(r=1),e.min=Yp(e.min,t,r,n,i),e.max=Yp(e.max,t,r,n,i)}function Qp(e,t){var r=t.x,n=t.y;Xp(e.x,r.translate,r.scale,r.originPoint),Xp(e.y,n.translate,n.scale,n.originPoint)}function Jp(e,t){e.min=e.min+t,e.max=e.max+t}function Zp(e,t,r){var n=bc(r,3),i=n[0],a=n[1],o=n[2],s=void 0!==t[o]?t[o]:.5,l=sh(e.min,e.max,s);Xp(e,t[i],t[a],l,t.scale)}var Kp=["x","scaleX","originX"],$p=["y","scaleY","originY"];function ef(e,t){Zp(e.x,t,Kp),Zp(e.y,t,$p)}const tf=e=>e.hasOwnProperty("x")&&e.hasOwnProperty("y"),rf=e=>tf(e)&&e.hasOwnProperty("z"),nf=(e,t)=>Math.abs(e-t);function af(e,t){if(sd(e)&&sd(t))return nf(e,t);if(tf(e)&&tf(t)){const r=nf(e.x,t.x),n=nf(e.y,t.y),i=rf(e)&&rf(t)?nf(e.z,t.z):0;return Math.sqrt(Math.pow(r,2)+Math.pow(n,2)+Math.pow(i,2))}}function of(e){return e.max-e.min}function sf(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=.01),af(e,t)<r}function lf(e,t,r,n){void 0===n&&(n=.5),e.origin=n,e.originPoint=sh(t.min,t.max,e.origin),e.scale=of(r)/of(t),(sf(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=sh(r.min,r.max,e.origin)-e.originPoint,(sf(e.translate)||isNaN(e.translate))&&(e.translate=0)}function uf(e,t,r,n){lf(e.x,t.x,r.x,null==n?void 0:n.originX),lf(e.y,t.y,r.y,null==n?void 0:n.originY)}function cf(e,t,r){e.min=r.min+t.min,e.max=e.min+of(t)}function hf(e,t,r){e.min=t.min-r.min,e.max=e.min+of(t)}function df(e,t,r){hf(e.x,t.x,r.x),hf(e.y,t.y,r.y)}function pf(e,t,r,n,i){return e=qp(e-=t,1/r,n),void 0!==i&&(e=qp(e,1/i,n)),e}function ff(e,t,r,n,i){var a=bc(r,3),o=a[0],s=a[1],l=a[2];!function(e,t,r,n,i,a,o){if(void 0===t&&(t=0),void 0===r&&(r=1),void 0===n&&(n=.5),void 0===a&&(a=e),void 0===o&&(o=e),Uh.test(t)&&(t=parseFloat(t),t=sh(o.min,o.max,t/100)-o.min),"number"==typeof t){var s=sh(a.min,a.max,n);e===a&&(s-=t),e.min=pf(e.min,t,r,s,i),e.max=pf(e.max,t,r,s,i)}}(e,t[o],t[s],t[l],t.scale,n,i)}var mf=["x","scaleX","originX"],gf=["y","scaleY","originY"];function vf(e,t,r,n){ff(e.x,t,mf,null==r?void 0:r.x,null==n?void 0:n.x),ff(e.y,t,gf,null==r?void 0:r.y,null==n?void 0:n.y)}function yf(e){return 0===e.translate&&1===e.scale}function xf(e){return yf(e.x)&&yf(e.y)}function bf(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}var wf=function(){function e(){this.members=[]}return e.prototype.add=function(e){uh(this.members,e),e.scheduleRender()},e.prototype.remove=function(e){if(ch(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){var t=this.members[this.members.length-1];t&&this.promote(t)}},e.prototype.relegate=function(e){var t,r=this.members.findIndex((function(t){return e===t}));if(0===r)return!1;for(var n=r;n>=0;n--){var i=this.members[n];if(!1!==i.isPresent){t=i;break}}return!!t&&(this.promote(t),!0)},e.prototype.promote=function(e,t){var r,n=this.lead;e!==n&&(this.prevLead=n,this.lead=e,e.show(),n&&(n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues,e.snapshot.isShared=!0),(null===(r=e.root)||void 0===r?void 0:r.isUpdating)&&(e.isLayoutDirty=!0),!1===e.options.crossfade&&n.hide()))},e.prototype.exitAnimationComplete=function(){this.members.forEach((function(e){var t,r,n,i,a;null===(r=(t=e.options).onExitComplete)||void 0===r||r.call(t),null===(a=null===(n=e.resumingFrom)||void 0===n?void 0:(i=n.options).onExitComplete)||void 0===a||a.call(i)}))},e.prototype.scheduleRender=function(){this.members.forEach((function(e){e.instance&&e.scheduleRender(!1)}))},e.prototype.removeLeadSnapshot=function(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)},e}(),Sf={};function _f(e,t,r){var n=e.x.translate/t.x,i=e.y.translate/t.y,a="translate3d(".concat(n,"px, ").concat(i,"px, 0) ");if(r){var o=r.rotate,s=r.rotateX,l=r.rotateY;o&&(a+="rotate(".concat(o,"deg) ")),s&&(a+="rotateX(".concat(s,"deg) ")),l&&(a+="rotateY(".concat(l,"deg) "))}return"translate3d(0px, 0px, 0) scale(1, 1)"===(a+="scale(".concat(e.x.scale,", ").concat(e.y.scale,")"))?"none":a}function Af(e){return[e("x"),e("y")]}var Mf=["","X","Y","Z"],Ef=["transformPerspective","x","y","z"];function Cf(e,t){return Ef.indexOf(e)-Ef.indexOf(t)}["translate","scale","rotate","skew"].forEach((function(e){return Mf.forEach((function(t){return Ef.push(e+t)}))}));var Tf=new Set(Ef);function Df(e){return Tf.has(e)}var Lf=new Set(["originX","originY","originZ"]);function Pf(e){return Lf.has(e)}var Rf=function(e,t){return e.depth-t.depth},Of=function(){function e(){this.children=[],this.isDirty=!1}return e.prototype.add=function(e){uh(this.children,e),this.isDirty=!0},e.prototype.remove=function(e){ch(this.children,e),this.isDirty=!0},e.prototype.forEach=function(e){this.isDirty&&this.children.sort(Rf),this.isDirty=!1,this.children.forEach(e)},e}();function kf(e){var t=fh(e)?e.get():e;return function(e){return Boolean(e&&"object"==typeof e&&e.mix&&e.toValue)}(t)?t.toValue():t}var If={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Bf(e){var t=e.attachResizeListener,r=e.defaultParent,n=e.measureScroll,i=e.resetTransform;return function(){function e(e,t,n){var i=this;void 0===t&&(t={}),void 0===n&&(n=null==r?void 0:r()),this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.potentialNodes=new Map,this.checkUpdateFailed=function(){i.isUpdating&&(i.isUpdating=!1,i.clearAllSnapshots())},this.updateProjection=function(){i.nodes.forEach(Vf),i.nodes.forEach(Gf)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.id=e,this.latestValues=t,this.root=n?n.root||n:this,this.path=n?wc(wc([],bc(n.path),!1),[n],!1):[],this.parent=n,this.depth=n?n.depth+1:0,e&&this.root.registerPotentialNode(e,this);for(var a=0;a<this.path.length;a++)this.path[a].shouldResetTransform=!0;this.root===this&&(this.nodes=new Of)}return e.prototype.addEventListener=function(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new hh),this.eventHandlers.get(e).add(t)},e.prototype.notifyListeners=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=this.eventHandlers.get(e);null==n||n.notify.apply(n,wc([],bc(t),!1))},e.prototype.hasListeners=function(e){return this.eventHandlers.has(e)},e.prototype.registerPotentialNode=function(e,t){this.potentialNodes.set(e,t)},e.prototype.mount=function(e,r){var n,i=this;if(void 0===r&&(r=!1),!this.instance){this.isSVG=e instanceof SVGElement&&"svg"!==e.tagName,this.instance=e;var a=this.options,o=a.layoutId,s=a.layout,l=a.visualElement;if(l&&!l.getInstance()&&l.mount(e),this.root.nodes.add(this),null===(n=this.parent)||void 0===n||n.children.add(this),this.id&&this.root.potentialNodes.delete(this.id),r&&(s||o)&&(this.isLayoutDirty=!0),t){var u,c=function(){return i.root.updateBlockedByResize=!1};t(e,(function(){i.root.updateBlockedByResize=!0,clearTimeout(u),u=window.setTimeout(c,250),If.hasAnimatedSinceResize&&(If.hasAnimatedSinceResize=!1,i.nodes.forEach(Hf))}))}o&&this.root.registerSharedNode(o,this),!1!==this.options.animate&&l&&(o||s)&&this.addEventListener("didUpdate",(function(e){var t,r,n,a,o,s=e.delta,u=e.hasLayoutChanged,c=e.hasRelativeTargetChanged,h=e.layout;if(i.isTreeAnimationBlocked())return i.target=void 0,void(i.relativeTarget=void 0);var d=null!==(r=null!==(t=i.options.transition)&&void 0!==t?t:l.getDefaultTransition())&&void 0!==r?r:Jf,p=l.getProps(),f=p.onLayoutAnimationStart,m=p.onLayoutAnimationComplete,g=!i.targetLayout||!bf(i.targetLayout,h)||c,v=!u&&c;if((null===(n=i.resumeFrom)||void 0===n?void 0:n.instance)||v||u&&(g||!i.currentAnimation)){i.resumeFrom&&(i.resumingFrom=i.resumeFrom,i.resumingFrom.resumingFrom=void 0),i.setAnimationOrigin(s,v);var y=yc(yc({},Lp(d,"layout")),{onPlay:f,onComplete:m});l.shouldReduceMotion&&(y.delay=0,y.type=!1),i.startAnimation(y)}else u||0!==i.animationProgress||i.finishAnimation(),i.isLead()&&(null===(o=(a=i.options).onExitComplete)||void 0===o||o.call(a));i.targetLayout=h}))}},e.prototype.unmount=function(){var e,t;this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this),null===(e=this.getStack())||void 0===e||e.remove(this),null===(t=this.parent)||void 0===t||t.children.delete(this),this.instance=void 0,eh.preRender(this.updateProjection)},e.prototype.blockUpdate=function(){this.updateManuallyBlocked=!0},e.prototype.unblockUpdate=function(){this.updateManuallyBlocked=!1},e.prototype.isUpdateBlocked=function(){return this.updateManuallyBlocked||this.updateBlockedByResize},e.prototype.isTreeAnimationBlocked=function(){var e;return this.isAnimationBlocked||(null===(e=this.parent)||void 0===e?void 0:e.isTreeAnimationBlocked())||!1},e.prototype.startUpdate=function(){var e;this.isUpdateBlocked()||(this.isUpdating=!0,null===(e=this.nodes)||void 0===e||e.forEach(Wf))},e.prototype.willUpdate=function(e){var t,r,n;if(void 0===e&&(e=!0),this.root.isUpdateBlocked())null===(r=(t=this.options).onExitComplete)||void 0===r||r.call(t);else if(!this.root.isUpdating&&this.root.startUpdate(),!this.isLayoutDirty){this.isLayoutDirty=!0;for(var i=0;i<this.path.length;i++){var a=this.path[i];a.shouldResetTransform=!0,a.updateScroll()}var o=this.options,s=o.layoutId,l=o.layout;if(void 0!==s||l){var u=null===(n=this.options.visualElement)||void 0===n?void 0:n.getProps().transformTemplate;this.prevTransformTemplateValue=null==u?void 0:u(this.latestValues,""),this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}}},e.prototype.didUpdate=function(){if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(Uf);this.isUpdating&&(this.isUpdating=!1,this.potentialNodes.size&&(this.potentialNodes.forEach(Zf),this.potentialNodes.clear()),this.nodes.forEach(jf),this.nodes.forEach(zf),this.nodes.forEach(Nf),this.clearAllSnapshots(),th.update(),th.preRender(),th.render())},e.prototype.clearAllSnapshots=function(){this.nodes.forEach(Ff),this.sharedNodes.forEach(qf)},e.prototype.scheduleUpdateProjection=function(){oh.preRender(this.updateProjection,!1,!0)},e.prototype.scheduleCheckAfterUnmount=function(){var e=this;oh.postRender((function(){e.isLayoutDirty?e.root.didUpdate():e.root.checkUpdateFailed()}))},e.prototype.updateSnapshot=function(){if(!this.snapshot&&this.instance){var e=this.measure(),t=this.removeTransform(this.removeElementScroll(e));$f(t),this.snapshot={measured:e,layout:t,latestValues:{}}}},e.prototype.updateLayout=function(){var e;if(this.instance&&(this.updateScroll(),this.options.alwaysMeasureLayout&&this.isLead()||this.isLayoutDirty)){if(this.resumeFrom&&!this.resumeFrom.instance)for(var t=0;t<this.path.length;t++)this.path[t].updateScroll();var r=this.measure();$f(r);var n=this.layout;this.layout={measured:r,actual:this.removeElementScroll(r)},this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.actual),null===(e=this.options.visualElement)||void 0===e||e.notifyLayoutMeasure(this.layout.actual,null==n?void 0:n.actual)}},e.prototype.updateScroll=function(){this.options.layoutScroll&&this.instance&&(this.scroll=n(this.instance))},e.prototype.resetTransform=function(){var e;if(i){var t=this.isLayoutDirty||this.shouldResetTransform,r=this.projectionDelta&&!xf(this.projectionDelta),n=null===(e=this.options.visualElement)||void 0===e?void 0:e.getProps().transformTemplate,a=null==n?void 0:n(this.latestValues,""),o=a!==this.prevTransformTemplateValue;t&&(r||Gp(this.latestValues)||o)&&(i(this.instance,a),this.shouldResetTransform=!1,this.scheduleRender())}},e.prototype.measure=function(){var e=this.options.visualElement;if(!e)return{x:{min:0,max:0},y:{min:0,max:0}};var t=e.measureViewportBox(),r=this.root.scroll;return r&&(Jp(t.x,r.x),Jp(t.y,r.y)),t},e.prototype.removeElementScroll=function(e){var t={x:{min:0,max:0},y:{min:0,max:0}};jp(t,e);for(var r=0;r<this.path.length;r++){var n=this.path[r],i=n.scroll,a=n.options;n!==this.root&&i&&a.layoutScroll&&(Jp(t.x,i.x),Jp(t.y,i.y))}return t},e.prototype.applyTransform=function(e,t){void 0===t&&(t=!1);var r={x:{min:0,max:0},y:{min:0,max:0}};jp(r,e);for(var n=0;n<this.path.length;n++){var i=this.path[n];!t&&i.options.layoutScroll&&i.scroll&&i!==i.root&&ef(r,{x:-i.scroll.x,y:-i.scroll.y}),Gp(i.latestValues)&&ef(r,i.latestValues)}return Gp(this.latestValues)&&ef(r,this.latestValues),r},e.prototype.removeTransform=function(e){var t,r={x:{min:0,max:0},y:{min:0,max:0}};jp(r,e);for(var n=0;n<this.path.length;n++){var i=this.path[n];if(i.instance&&Gp(i.latestValues)){Vp(i.latestValues)&&i.updateSnapshot();var a={x:{min:0,max:0},y:{min:0,max:0}};jp(a,i.measure()),vf(r,i.latestValues,null===(t=i.snapshot)||void 0===t?void 0:t.layout,a)}}return Gp(this.latestValues)&&vf(r,this.latestValues),r},e.prototype.setTargetDelta=function(e){this.targetDelta=e,this.root.scheduleUpdateProjection()},e.prototype.setOptions=function(e){var t;this.options=yc(yc(yc({},this.options),e),{crossfade:null===(t=e.crossfade)||void 0===t||t})},e.prototype.clearMeasurements=function(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1},e.prototype.resolveTargetDelta=function(){var e,t,r,n,i=this.options,a=i.layout,o=i.layoutId;this.layout&&(a||o)&&(this.targetDelta||this.relativeTarget||(this.relativeParent=this.getClosestProjectingParent(),this.relativeParent&&this.relativeParent.layout&&(this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},df(this.relativeTargetOrigin,this.layout.actual,this.relativeParent.layout.actual),jp(this.relativeTarget,this.relativeTargetOrigin))),(this.relativeTarget||this.targetDelta)&&(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&(null===(e=this.relativeParent)||void 0===e?void 0:e.target)?(t=this.target,r=this.relativeTarget,n=this.relativeParent.target,cf(t.x,r.x,n.x),cf(t.y,r.y,n.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.actual):jp(this.target,this.layout.actual),Qp(this.target,this.targetDelta)):jp(this.target,this.layout.actual),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,this.relativeParent=this.getClosestProjectingParent(),this.relativeParent&&Boolean(this.relativeParent.resumingFrom)===Boolean(this.resumingFrom)&&!this.relativeParent.options.layoutScroll&&this.relativeParent.target&&(this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},df(this.relativeTargetOrigin,this.target,this.relativeParent.target),jp(this.relativeTarget,this.relativeTargetOrigin)))))},e.prototype.getClosestProjectingParent=function(){if(this.parent&&!Gp(this.parent.latestValues))return(this.parent.relativeTarget||this.parent.targetDelta)&&this.parent.layout?this.parent:this.parent.getClosestProjectingParent()},e.prototype.calcProjection=function(){var e,t=this.options,r=t.layout,n=t.layoutId;if(this.isTreeAnimating=Boolean((null===(e=this.parent)||void 0===e?void 0:e.isTreeAnimating)||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),this.layout&&(r||n)){var i=this.getLead();jp(this.layoutCorrected,this.layout.actual),function(e,t,r,n){var i,a;void 0===n&&(n=!1);var o=r.length;if(o){var s,l;t.x=t.y=1;for(var u=0;u<o;u++)l=(s=r[u]).projectionDelta,"contents"!==(null===(a=null===(i=s.instance)||void 0===i?void 0:i.style)||void 0===a?void 0:a.display)&&(n&&s.options.layoutScroll&&s.scroll&&s!==s.root&&ef(e,{x:-s.scroll.x,y:-s.scroll.y}),l&&(t.x*=l.x.scale,t.y*=l.y.scale,Qp(e,l)),n&&Gp(s.latestValues)&&ef(e,s.latestValues))}}(this.layoutCorrected,this.treeScale,this.path,Boolean(this.resumingFrom)||this!==i);var a=i.target;if(a){this.projectionDelta||(this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}});var o=this.treeScale.x,s=this.treeScale.y,l=this.projectionTransform;uf(this.projectionDelta,this.layoutCorrected,a,this.latestValues),this.projectionTransform=_f(this.projectionDelta,this.treeScale),this.projectionTransform===l&&this.treeScale.x===o&&this.treeScale.y===s||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",a))}}},e.prototype.hide=function(){this.isVisible=!1},e.prototype.show=function(){this.isVisible=!0},e.prototype.scheduleRender=function(e){var t,r,n;void 0===e&&(e=!0),null===(r=(t=this.options).scheduleRender)||void 0===r||r.call(t),e&&(null===(n=this.getStack())||void 0===n||n.scheduleRender()),this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)},e.prototype.setAnimationOrigin=function(e,t){var r,n=this;void 0===t&&(t=!1);var i=this.snapshot,a=(null==i?void 0:i.latestValues)||{},o=yc({},this.latestValues),s={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeTarget=this.relativeTargetOrigin=void 0,this.attemptToResolveRelativeTarget=!t;var l={x:{min:0,max:0},y:{min:0,max:0}},u=null==i?void 0:i.isShared,c=((null===(r=this.getStack())||void 0===r?void 0:r.members.length)||0)<=1,h=Boolean(u&&!c&&!0===this.options.crossfade&&!this.path.some(Qf));this.animationProgress=0,this.mixTargetDelta=function(t){var r,i=t/1e3;Yf(s.x,e.x,i),Yf(s.y,e.y,i),n.setTargetDelta(s),n.relativeTarget&&n.relativeTargetOrigin&&n.layout&&(null===(r=n.relativeParent)||void 0===r?void 0:r.layout)&&(df(l,n.layout.actual,n.relativeParent.layout.actual),function(e,t,r,n){Xf(e.x,t.x,r.x,n),Xf(e.y,t.y,r.y,n)}(n.relativeTarget,n.relativeTargetOrigin,l,i)),u&&(n.animationValues=o,function(e,t,r,n,i,a){var o,s,l,u;i?(e.opacity=sh(0,null!==(o=r.opacity)&&void 0!==o?o:1,zp(n)),e.opacityExit=sh(null!==(s=t.opacity)&&void 0!==s?s:1,0,Np(n))):a&&(e.opacity=sh(null!==(l=t.opacity)&&void 0!==l?l:1,null!==(u=r.opacity)&&void 0!==u?u:1,n));for(var c=0;c<Op;c++){var h="border".concat(Rp[c],"Radius"),d=Bp(t,h),p=Bp(r,h);void 0===d&&void 0===p||(d||(d=0),p||(p=0),0===d||0===p||Ip(d)===Ip(p)?(e[h]=Math.max(sh(kp(d),kp(p),n),0),(Uh.test(p)||Uh.test(d))&&(e[h]+="%")):e[h]=p)}(t.rotate||r.rotate)&&(e.rotate=sh(t.rotate||0,r.rotate||0,n))}(o,a,n.latestValues,i,h,c)),n.root.scheduleUpdateProjection(),n.scheduleRender(),n.animationProgress=i},this.mixTargetDelta(0)},e.prototype.startAnimation=function(e){var t,r,n=this;this.notifyListeners("animationStart"),null===(t=this.currentAnimation)||void 0===t||t.stop(),this.resumingFrom&&(null===(r=this.resumingFrom.currentAnimation)||void 0===r||r.stop()),this.pendingAnimation&&(eh.update(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=oh.update((function(){If.hasAnimatedSinceResize=!0,n.currentAnimation=function(e,t,r){void 0===r&&(r={});var n=fh(0)?0:ph(0);return Pp("",n,1e3,r),{stop:function(){return n.stop()},isAnimating:function(){return n.isAnimating()}}}(0,0,yc(yc({},e),{onUpdate:function(t){var r;n.mixTargetDelta(t),null===(r=e.onUpdate)||void 0===r||r.call(e,t)},onComplete:function(){var t;null===(t=e.onComplete)||void 0===t||t.call(e),n.completeAnimation()}})),n.resumingFrom&&(n.resumingFrom.currentAnimation=n.currentAnimation),n.pendingAnimation=void 0}))},e.prototype.completeAnimation=function(){var e;this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0),null===(e=this.getStack())||void 0===e||e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")},e.prototype.finishAnimation=function(){var e;this.currentAnimation&&(null===(e=this.mixTargetDelta)||void 0===e||e.call(this,1e3),this.currentAnimation.stop()),this.completeAnimation()},e.prototype.applyTransformsToTarget=function(){var e=this.getLead(),t=e.targetWithTransforms,r=e.target,n=e.layout,i=e.latestValues;t&&r&&n&&(jp(t,r),ef(t,i),uf(this.projectionDeltaWithTransform,this.layoutCorrected,t,i))},e.prototype.registerSharedNode=function(e,t){var r,n,i;this.sharedNodes.has(e)||this.sharedNodes.set(e,new wf),this.sharedNodes.get(e).add(t),t.promote({transition:null===(r=t.options.initialPromotionConfig)||void 0===r?void 0:r.transition,preserveFollowOpacity:null===(i=null===(n=t.options.initialPromotionConfig)||void 0===n?void 0:n.shouldPreserveFollowOpacity)||void 0===i?void 0:i.call(n,t)})},e.prototype.isLead=function(){var e=this.getStack();return!e||e.lead===this},e.prototype.getLead=function(){var e;return this.options.layoutId&&(null===(e=this.getStack())||void 0===e?void 0:e.lead)||this},e.prototype.getPrevLead=function(){var e;return this.options.layoutId?null===(e=this.getStack())||void 0===e?void 0:e.prevLead:void 0},e.prototype.getStack=function(){var e=this.options.layoutId;if(e)return this.root.sharedNodes.get(e)},e.prototype.promote=function(e){var t=void 0===e?{}:e,r=t.needsReset,n=t.transition,i=t.preserveFollowOpacity,a=this.getStack();a&&a.promote(this,i),r&&(this.projectionDelta=void 0,this.needsReset=!0),n&&this.setOptions({transition:n})},e.prototype.relegate=function(){var e=this.getStack();return!!e&&e.relegate(this)},e.prototype.resetRotation=function(){var e=this.options.visualElement;if(e){for(var t=!1,r={},n=0;n<Mf.length;n++){var i="rotate"+Mf[n];e.getStaticValue(i)&&(t=!0,r[i]=e.getStaticValue(i),e.setStaticValue(i,0))}if(t){for(var i in null==e||e.syncRender(),r)e.setStaticValue(i,r[i]);e.scheduleRender()}}},e.prototype.getProjectionStyles=function(e){var t,r,n,i,a,o;void 0===e&&(e={});var s={};if(!this.instance||this.isSVG)return s;if(!this.isVisible)return{visibility:"hidden"};s.visibility="";var l=null===(t=this.options.visualElement)||void 0===t?void 0:t.getProps().transformTemplate;if(this.needsReset)return this.needsReset=!1,s.opacity="",s.pointerEvents=kf(e.pointerEvents)||"",s.transform=l?l(this.latestValues,""):"none",s;var u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){var c={};return this.options.layoutId&&(c.opacity=null!==(r=this.latestValues.opacity)&&void 0!==r?r:1,c.pointerEvents=kf(e.pointerEvents)||""),this.hasProjected&&!Gp(this.latestValues)&&(c.transform=l?l({},""):"none",this.hasProjected=!1),c}var h=u.animationValues||u.latestValues;this.applyTransformsToTarget(),s.transform=_f(this.projectionDeltaWithTransform,this.treeScale,h),l&&(s.transform=l(h,s.transform));var d=this.projectionDelta,p=d.x,f=d.y;for(var m in s.transformOrigin="".concat(100*p.origin,"% ").concat(100*f.origin,"% 0"),u.animationValues?s.opacity=u===this?null!==(i=null!==(n=h.opacity)&&void 0!==n?n:this.latestValues.opacity)&&void 0!==i?i:1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:s.opacity=u===this?null!==(a=h.opacity)&&void 0!==a?a:"":null!==(o=h.opacityExit)&&void 0!==o?o:0,Sf)if(void 0!==h[m]){var g=Sf[m],v=g.correct,y=g.applyTo,x=v(h[m],u);if(y)for(var b=y.length,w=0;w<b;w++)s[y[w]]=x;else s[m]=x}return this.options.layoutId&&(s.pointerEvents=u===this?kf(e.pointerEvents)||"":"none"),s},e.prototype.clearSnapshot=function(){this.resumeFrom=this.snapshot=void 0},e.prototype.resetTree=function(){this.root.nodes.forEach((function(e){var t;return null===(t=e.currentAnimation)||void 0===t?void 0:t.stop()})),this.root.nodes.forEach(Uf),this.root.sharedNodes.clear()},e}()}function zf(e){e.updateLayout()}function Nf(e){var t,r,n,i,a=null!==(r=null===(t=e.resumeFrom)||void 0===t?void 0:t.snapshot)&&void 0!==r?r:e.snapshot;if(e.isLead()&&e.layout&&a&&e.hasListeners("didUpdate")){var o=e.layout,s=o.actual,l=o.measured;"size"===e.options.animationType?Af((function(e){var t=a.isShared?a.measured[e]:a.layout[e],r=of(t);t.min=s[e].min,t.max=t.min+r})):"position"===e.options.animationType&&Af((function(e){var t=a.isShared?a.measured[e]:a.layout[e],r=of(s[e]);t.max=t.min+r}));var u={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};uf(u,s,a.layout);var c={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};a.isShared?uf(c,e.applyTransform(l,!0),a.measured):uf(c,s,a.layout);var h=!xf(u),d=!1;if(!e.resumeFrom&&(e.relativeParent=e.getClosestProjectingParent(),e.relativeParent&&!e.relativeParent.resumeFrom)){var p=e.relativeParent,f=p.snapshot,m=p.layout;if(f&&m){var g={x:{min:0,max:0},y:{min:0,max:0}};df(g,a.layout,f.layout);var v={x:{min:0,max:0},y:{min:0,max:0}};df(v,s,m.actual),bf(g,v)||(d=!0)}}e.notifyListeners("didUpdate",{layout:s,snapshot:a,delta:c,layoutDelta:u,hasLayoutChanged:h,hasRelativeTargetChanged:d})}else e.isLead()&&(null===(i=(n=e.options).onExitComplete)||void 0===i||i.call(n));e.options.transition=void 0}function Ff(e){e.clearSnapshot()}function Uf(e){e.clearMeasurements()}function jf(e){var t=e.options.visualElement;(null==t?void 0:t.getProps().onBeforeLayoutMeasure)&&t.notifyBeforeLayoutMeasure(),e.resetTransform()}function Hf(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0}function Vf(e){e.resolveTargetDelta()}function Gf(e){e.calcProjection()}function Wf(e){e.resetRotation()}function qf(e){e.removeLeadSnapshot()}function Yf(e,t,r){e.translate=sh(t.translate,0,r),e.scale=sh(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function Xf(e,t,r,n){e.min=sh(t.min,r.min,n),e.max=sh(t.max,r.max,n)}function Qf(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}var Jf={duration:.45,ease:[.4,0,.1,1]};function Zf(e,t){for(var r=e.root,n=e.path.length-1;n>=0;n--)if(Boolean(e.path[n].instance)){r=e.path[n];break}var i=(r&&r!==e.root?r.instance:document).querySelector('[data-projection-id="'.concat(t,'"]'));i&&e.mount(i,!0)}function Kf(e){e.min=Math.round(e.min),e.max=Math.round(e.max)}function $f(e){Kf(e.x),Kf(e.y)}var em=1,tm=(0,e.createContext)({}),rm=(0,e.createContext)({}),nm=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return vc(t,e),t.prototype.getSnapshotBeforeUpdate=function(){return this.updateProps(),null},t.prototype.componentDidUpdate=function(){},t.prototype.updateProps=function(){var e=this.props,t=e.visualElement,r=e.props;t&&t.setProps(r)},t.prototype.render=function(){return this.props.children},t}(e.Component);function im(t){var r=t.preloadedFeatures,n=t.createVisualElement,i=t.projectionNodeConstructor,a=t.useRender,o=t.useVisualState,s=t.Component;return r&&function(e){for(var t in e)null!==e[t]&&("projectionNodeConstructor"===t?_c.projectionNodeConstructor=e[t]:_c[t].Component=e[t])}(r),(0,e.forwardRef)((function(t,r){var l=function(t){var r,n=t.layoutId,i=null===(r=(0,e.useContext)(tm))||void 0===r?void 0:r.id;return i&&void 0!==n?i+"-"+n:n}(t);t=yc(yc({},t),{layoutId:l});var u=(0,e.useContext)(Cc),c=null,h=function(t){var r=function(e,t){if(Uc(e)){var r=e.initial,n=e.animate;return{initial:!1===r||zc(r)?r:void 0,animate:zc(n)?n:void 0}}return!1!==e.inherit?t:{}}(t,(0,e.useContext)(Tc)),n=r.initial,i=r.animate;return(0,e.useMemo)((function(){return{initial:n,animate:i}}),[Hc(n),Hc(i)])}(t),d=u.isStatic?void 0:Vc((function(){if(If.hasEverUpdated)return em++})),p=o(t,u.isStatic);return!u.isStatic&&Lc&&(h.visualElement=kc(s,p,yc(yc({},u),t),n),function(t,r,n,i){var a,o=r.layoutId,s=r.layout,l=r.drag,u=r.dragConstraints,c=r.layoutScroll,h=(0,e.useContext)(rm);i&&n&&!(null==n?void 0:n.projection)&&(n.projection=new i(t,n.getLatestValues(),null===(a=n.parent)||void 0===a?void 0:a.projection),n.projection.setOptions({layoutId:o,layout:s,alwaysMeasureLayout:Boolean(l)||u&&Ic(u),visualElement:n,scheduleRender:function(){return n.scheduleRender()},animationType:"string"==typeof s?s:"both",initialPromotionConfig:h,layoutScroll:c}))}(d,t,h.visualElement,i||_c.projectionNodeConstructor),c=function(t,r,n){var i=[];if((0,e.useContext)(Ac),!r)return null;for(var a=0;a<Ec;a++){var o=Mc[a],s=_c[o],l=s.isEnabled,u=s.Component;l(t)&&u&&i.push(e.createElement(u,yc({key:o},t,{visualElement:r})))}return i}(t,h.visualElement)),e.createElement(nm,{visualElement:h.visualElement,props:yc(yc({},u),t)},c,e.createElement(Tc.Provider,{value:h},a(s,t,d,function(t,r,n){return(0,e.useCallback)((function(e){var i;e&&(null===(i=t.mount)||void 0===i||i.call(t,e)),r&&(e?r.mount(e):r.unmount()),n&&("function"==typeof n?n(e):Ic(n)&&(n.current=e))}),[r])}(p,h.visualElement,r),p,u.isStatic,h.visualElement)))}))}function am(e){function t(t,r){return void 0===r&&(r={}),im(e(t,r))}if("undefined"==typeof Proxy)return t;var r=new Map;return new Proxy(t,{get:function(e,n){return r.has(n)||r.set(n,t(n)),r.get(n)}})}var om=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","svg","switch","symbol","text","tspan","use","view"];function sm(e){return"string"==typeof e&&!e.includes("-")&&!!(om.indexOf(e)>-1||/[A-Z]/.test(e))}function lm(e,t){var r=t.layout,n=t.layoutId;return Df(e)||Pf(e)||(r||void 0!==n)&&(!!Sf[e]||"opacity"===e)}var um={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"};function cm(e){return e.startsWith("--")}var hm=function(e,t){return t&&"number"==typeof e?t.transform(e):e};function dm(e,t,r,n){var i,a=e.style,o=e.vars,s=e.transform,l=e.transformKeys,u=e.transformOrigin;l.length=0;var c=!1,h=!1,d=!0;for(var p in t){var f=t[p];if(cm(p))o[p]=f;else{var m=Sp[p],g=hm(f,m);if(Df(p)){if(c=!0,s[p]=g,l.push(p),!d)continue;f!==(null!==(i=m.default)&&void 0!==i?i:0)&&(d=!1)}else Pf(p)?(u[p]=g,h=!0):a[p]=g}}c?a.transform=function(e,t,r,n){var i=e.transform,a=e.transformKeys,o=t.enableHardwareAcceleration,s=void 0===o||o,l=t.allowTransformNone,u=void 0===l||l,c="";a.sort(Cf);for(var h=!1,d=a.length,p=0;p<d;p++){var f=a[p];c+="".concat(um[f]||f,"(").concat(i[f],") "),"z"===f&&(h=!0)}return!h&&s?c+="translateZ(0)":c=c.trim(),n?c=n(i,r?"":c):u&&r&&(c="none"),c}(e,r,d,n):n?a.transform=n({},""):!t.transform&&a.transform&&(a.transform="none"),h&&(a.transformOrigin=function(e){var t=e.originX,r=void 0===t?"50%":t,n=e.originY,i=void 0===n?"50%":n,a=e.originZ,o=void 0===a?0:a;return"".concat(r," ").concat(i," ").concat(o)}(u))}function pm(e,t,r){for(var n in t)fh(t[n])||lm(n,r)||(e[n]=t[n])}function fm(t,r,n){var i={},a=function(t,r,n){var i={};return pm(i,t.style||{},t),Object.assign(i,function(t,r,n){var i=t.transformTemplate;return(0,e.useMemo)((function(){var e={style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}};dm(e,r,{enableHardwareAcceleration:!n},i);var t=e.style;return yc(yc({},e.vars),t)}),[r])}(t,r,n)),t.transformValues&&(i=t.transformValues(i)),i}(t,r,n);return Boolean(t.drag)&&!1!==t.dragListener&&(i.draggable=!1,a.userSelect=a.WebkitUserSelect=a.WebkitTouchCallout="none",a.touchAction=!0===t.drag?"none":"pan-".concat("x"===t.drag?"y":"x")),i.style=a,i}var mm=new Set(["initial","animate","exit","style","variants","transition","transformTemplate","transformValues","custom","inherit","layout","layoutId","layoutDependency","onLayoutAnimationStart","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","drag","dragControls","dragListener","dragConstraints","dragDirectionLock","dragSnapToOrigin","_dragX","_dragY","dragElastic","dragMomentum","dragPropagation","dragTransition","whileDrag","onPan","onPanStart","onPanEnd","onPanSessionStart","onTap","onTapStart","onTapCancel","onHoverStart","onHoverEnd","whileFocus","whileTap","whileHover","whileInView","onViewportEnter","onViewportLeave","viewport","layoutScroll"]);function gm(e){return mm.has(e)}var vm,ym=function(e){return!gm(e)};try{(vm=require("@emotion/is-prop-valid").default)&&(ym=function(e){return e.startsWith("on")?!gm(e):vm(e)})}catch(e){}function xm(e,t,r){return"string"==typeof e?e:jh.transform(t+r*e)}var bm={offset:"stroke-dashoffset",array:"stroke-dasharray"},wm={offset:"strokeDashoffset",array:"strokeDasharray"};function Sm(e,t,r,n){var i=t.attrX,a=t.attrY,o=t.originX,s=t.originY,l=t.pathLength,u=t.pathSpacing,c=void 0===u?1:u,h=t.pathOffset,d=void 0===h?0:h;dm(e,xc(t,["attrX","attrY","originX","originY","pathLength","pathSpacing","pathOffset"]),r,n),e.attrs=e.style,e.style={};var p=e.attrs,f=e.style,m=e.dimensions;p.transform&&(m&&(f.transform=p.transform),delete p.transform),m&&(void 0!==o||void 0!==s||f.transform)&&(f.transformOrigin=function(e,t,r){var n=xm(t,e.x,e.width),i=xm(r,e.y,e.height);return"".concat(n," ").concat(i)}(m,void 0!==o?o:.5,void 0!==s?s:.5)),void 0!==i&&(p.x=i),void 0!==a&&(p.y=a),void 0!==l&&function(e,t,r,n,i){void 0===r&&(r=1),void 0===n&&(n=0),void 0===i&&(i=!0),e.pathLength=1;var a=i?bm:wm;e[a.offset]=jh.transform(-n);var o=jh.transform(t),s=jh.transform(r);e[a.array]="".concat(o," ").concat(s)}(p,l,c,d,!1)}var _m=function(){return yc(yc({},{style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}}),{attrs:{}})};function Am(t,r){var n=(0,e.useMemo)((function(){var e=_m();return Sm(e,r,{enableHardwareAcceleration:!1},t.transformTemplate),yc(yc({},e.attrs),{style:yc({},e.style)})}),[r]);if(t.style){var i={};pm(i,t.style,t),n.style=yc(yc({},i),n.style)}return n}function Mm(t){return void 0===t&&(t=!1),function(r,n,i,a,o,s){var l=o.latestValues,u=(sm(r)?Am:fm)(n,l,s),c=function(e,t,r){var n={};for(var i in e)(ym(i)||!0===r&&gm(i)||!t&&!gm(i)||e.draggable&&i.startsWith("onDrag"))&&(n[i]=e[i]);return n}(n,"string"==typeof r,t),h=yc(yc(yc({},c),u),{ref:a});return i&&(h["data-projection-id"]=i),(0,e.createElement)(r,h)}}var Em=/([a-z])([A-Z])/g,Cm=function(e){return e.replace(Em,"$1-$2").toLowerCase()};function Tm(e,t,r,n){var i=t.style,a=t.vars;for(var o in Object.assign(e.style,i,n&&n.getProjectionStyles(r)),a)e.style.setProperty(o,a[o])}var Dm=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength"]);function Lm(e,t){for(var r in Tm(e,t),t.attrs)e.setAttribute(Dm.has(r)?r:Cm(r),t.attrs[r])}function Pm(e){var t=e.style,r={};for(var n in t)(fh(t[n])||lm(n,e))&&(r[n]=t[n]);return r}function Rm(e){var t=Pm(e);for(var r in e)fh(e[r])&&(t["x"===r||"y"===r?"attr"+r.toUpperCase():r]=e[r]);return t}function Om(e){return"object"==typeof e&&"function"==typeof e.start}function km(e,t,r,n){var i=e.scrapeMotionValuesFromProps,a=e.createRenderState,o=e.onMount,s={latestValues:Bm(t,r,n,i),renderState:a()};return o&&(s.mount=function(e){return o(t,e,s)}),s}var Im=function(t){return function(r,n){var i=(0,e.useContext)(Tc),a=(0,e.useContext)(Dc);return n?km(t,r,i,a):Vc((function(){return km(t,r,i,a)}))}};function Bm(e,t,r,n){var i={},a=!1===(null==r?void 0:r.initial),o=n(e);for(var s in o)i[s]=kf(o[s]);var l=e.initial,u=e.animate,c=Uc(e),h=jc(e);t&&h&&!c&&!1!==e.inherit&&(null!=l||(l=t.initial),null!=u||(u=t.animate));var d=a||!1===l,p=d?u:l;return p&&"boolean"!=typeof p&&!Om(p)&&(Array.isArray(p)?p:[p]).forEach((function(t){var r=Nc(e,t);if(r){var n=r.transitionEnd;r.transition;var a=xc(r,["transitionEnd","transition"]);for(var o in a){var s=a[o];Array.isArray(s)&&(s=s[d?s.length-1:0]),null!==s&&(i[o]=s)}for(var o in n)i[o]=n[o]}})),i}var zm,Nm={useVisualState:Im({scrapeMotionValuesFromProps:Rm,createRenderState:_m,onMount:function(e,t,r){var n=r.renderState,i=r.latestValues;try{n.dimensions="function"==typeof t.getBBox?t.getBBox():t.getBoundingClientRect()}catch(e){n.dimensions={x:0,y:0,width:0,height:0}}Sm(n,i,{enableHardwareAcceleration:!1},e.transformTemplate),Lm(t,n)}})},Fm={useVisualState:Im({scrapeMotionValuesFromProps:Pm,createRenderState:function(){return{style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}}}})};function Um(e,t,r,n){return e.addEventListener(t,r,n),function(){return e.removeEventListener(t,r,n)}}function jm(t,r,n,i){(0,e.useEffect)((function(){var e=t.current;if(n&&e)return Um(e,r,n,i)}),[t,r,n,i])}function Hm(e){return"undefined"!=typeof PointerEvent&&e instanceof PointerEvent?!("mouse"!==e.pointerType):e instanceof MouseEvent}function Vm(e){return!!e.touches}!function(e){e.Animate="animate",e.Hover="whileHover",e.Tap="whileTap",e.Drag="whileDrag",e.Focus="whileFocus",e.InView="whileInView",e.Exit="exit"}(zm||(zm={}));var Gm={pageX:0,pageY:0};function Wm(e,t){void 0===t&&(t="page");var r=e.touches[0]||e.changedTouches[0]||Gm;return{x:r[t+"X"],y:r[t+"Y"]}}function qm(e,t){return void 0===t&&(t="page"),{x:e[t+"X"],y:e[t+"Y"]}}function Ym(e,t){return void 0===t&&(t="page"),{point:Vm(e)?Wm(e,t):qm(e,t)}}var Xm=function(e,t){void 0===t&&(t=!1);var r,n=function(t){return e(t,Ym(t))};return t?(r=n,function(e){var t=e instanceof MouseEvent;(!t||t&&0===e.button)&&r(e)}):n},Qm={pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointercancel:"mousecancel",pointerover:"mouseover",pointerout:"mouseout",pointerenter:"mouseenter",pointerleave:"mouseleave"},Jm={pointerdown:"touchstart",pointermove:"touchmove",pointerup:"touchend",pointercancel:"touchcancel"};function Zm(e){return Lc&&null===window.onpointerdown?e:Lc&&null===window.ontouchstart?Jm[e]:Lc&&null===window.onmousedown?Qm[e]:e}function Km(e,t,r,n){return Um(e,Zm(t),Xm(r,"pointerdown"===t),n)}function $m(e,t,r,n){return jm(e,Zm(t),r&&Xm(r,"pointerdown"===t),n)}function eg(e){var t=null;return function(){return null===t&&(t=e,function(){t=null})}}var tg=eg("dragHorizontal"),rg=eg("dragVertical");function ng(e){var t=!1;if("y"===e)t=rg();else if("x"===e)t=tg();else{var r=tg(),n=rg();r&&n?t=function(){r(),n()}:(r&&r(),n&&n())}return t}function ig(){var e=ng(!0);return!e||(e(),!1)}function ag(e,t,r){return function(n,i){var a;Hm(n)&&!ig()&&(null===(a=e.animationState)||void 0===a||a.setActive(zm.Hover,t),null==r||r(n,i))}}var og=function(e,t){return!!t&&(e===t||og(e,t.parentElement))};function sg(t){return(0,e.useEffect)((function(){return function(){return t()}}),[])}var lg=new WeakMap,ug=new WeakMap,cg=function(e){var t;null===(t=lg.get(e.target))||void 0===t||t(e)},hg=function(e){e.forEach(cg)};var dg={some:0,all:1};function pg(t,r,n,i){var a=i.root,o=i.margin,s=i.amount,l=void 0===s?"some":s,u=i.once;(0,e.useEffect)((function(){if(t){var e={root:null==a?void 0:a.current,rootMargin:o,threshold:"number"==typeof l?l:dg[l]};return function(e,t,r){var n=function(e){var t=e.root,r=xc(e,["root"]),n=t||document;ug.has(n)||ug.set(n,{});var i=ug.get(n),a=JSON.stringify(r);return i[a]||(i[a]=new IntersectionObserver(hg,yc({root:t},r))),i[a]}(t);return lg.set(e,r),n.observe(e),function(){lg.delete(e),n.unobserve(e)}}(n.getInstance(),e,(function(e){var t,i=e.isIntersecting;if(r.isInView!==i&&(r.isInView=i,!u||i||!r.hasEnteredView)){i&&(r.hasEnteredView=!0),null===(t=n.animationState)||void 0===t||t.setActive(zm.InView,i);var a=n.getProps(),o=i?a.onViewportEnter:a.onViewportLeave;null==o||o(e)}}))}}),[t,a,o,l])}function fg(t,r,n,i){var a=i.fallback,o=void 0===a||a;(0,e.useEffect)((function(){t&&o&&requestAnimationFrame((function(){var e;r.hasEnteredView=!0;var t=n.getProps().onViewportEnter;null==t||t(null),null===(e=n.animationState)||void 0===e||e.setActive(zm.InView,!0)}))}),[t])}var mg=function(e){return function(t){return e(t),null}},gg={inView:mg((function(t){var r=t.visualElement,n=t.whileInView,i=t.onViewportEnter,a=t.onViewportLeave,o=t.viewport,s=void 0===o?{}:o,l=(0,e.useRef)({hasEnteredView:!1,isInView:!1}),u=Boolean(n||i||a);s.once&&l.current.hasEnteredView&&(u=!1),("undefined"==typeof IntersectionObserver?fg:pg)(u,l.current,r,s)})),tap:mg((function(t){var r=t.onTap,n=t.onTapStart,i=t.onTapCancel,a=t.whileTap,o=t.visualElement,s=r||n||i||a,l=(0,e.useRef)(!1),u=(0,e.useRef)(null);function c(){var e;null===(e=u.current)||void 0===e||e.call(u),u.current=null}function h(){var e;return c(),l.current=!1,null===(e=o.animationState)||void 0===e||e.setActive(zm.Tap,!1),!ig()}function d(e,t){h()&&(og(o.getInstance(),e.target)?null==r||r(e,t):null==i||i(e,t))}function p(e,t){h()&&(null==i||i(e,t))}$m(o,"pointerdown",s?function(e,t){var r;c(),l.current||(l.current=!0,u.current=ud(Km(window,"pointerup",d),Km(window,"pointercancel",p)),null===(r=o.animationState)||void 0===r||r.setActive(zm.Tap,!0),null==n||n(e,t))}:void 0),sg(c)})),focus:mg((function(e){var t=e.whileFocus,r=e.visualElement;jm(r,"focus",t?function(){var e;null===(e=r.animationState)||void 0===e||e.setActive(zm.Focus,!0)}:void 0),jm(r,"blur",t?function(){var e;null===(e=r.animationState)||void 0===e||e.setActive(zm.Focus,!1)}:void 0)})),hover:mg((function(e){var t=e.onHoverStart,r=e.onHoverEnd,n=e.whileHover,i=e.visualElement;$m(i,"pointerenter",t||n?ag(i,!0,t):void 0),$m(i,"pointerleave",r||n?ag(i,!1,r):void 0)}))},vg=0,yg=function(){return vg++};function xg(){var t=(0,e.useContext)(Dc);if(null===t)return[!0,null];var r=t.isPresent,n=t.onExitComplete,i=t.register,a=Vc(yg);return(0,e.useEffect)((function(){return i(a)}),[]),!r&&n?[!1,function(){return null==n?void 0:n(a)}]:[!0]}function bg(e,t){if(!Array.isArray(t))return!1;var r=t.length;if(r!==e.length)return!1;for(var n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}var wg=function(e){return/^\-?\d*\.?\d+$/.test(e)},Sg=function(e){return/^0[^.\s]+$/.test(e)},_g=function(e){return function(t){return t.test(e)}},Ag=[Dh,jh,Uh,Fh,Vh,Hh,{test:function(e){return"auto"===e},parse:function(e){return e}}],Mg=function(e){return Ag.find(_g(e))},Eg=wc(wc([],bc(Ag),!1),[$h,od],!1),Cg=function(e){return Eg.find(_g(e))};function Tg(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,ph(r))}function Dg(e,t){if(t)return(t[e]||t.default||t).from}function Lg(e,t,r){var n;void 0===r&&(r={});var i=Fc(e,t,r.custom),a=(i||{}).transition,o=void 0===a?e.getDefaultTransition()||{}:a;r.transitionOverride&&(o=r.transitionOverride);var s=i?function(){return Pg(e,i,r)}:function(){return Promise.resolve()},l=(null===(n=e.variantChildren)||void 0===n?void 0:n.size)?function(n){void 0===n&&(n=0);var i=o.delayChildren,a=void 0===i?0:i,s=o.staggerChildren,l=o.staggerDirection;return function(e,t,r,n,i,a){void 0===r&&(r=0),void 0===n&&(n=0),void 0===i&&(i=1);var o=[],s=(e.variantChildren.size-1)*n,l=1===i?function(e){return void 0===e&&(e=0),e*n}:function(e){return void 0===e&&(e=0),s-e*n};return Array.from(e.variantChildren).sort(Rg).forEach((function(e,n){o.push(Lg(e,t,yc(yc({},a),{delay:r+l(n)})).then((function(){return e.notifyAnimationComplete(t)})))})),Promise.all(o)}(e,t,a+n,s,l,r)}:function(){return Promise.resolve()},u=o.when;if(u){var c=bc("beforeChildren"===u?[s,l]:[l,s],2),h=c[0],d=c[1];return h().then(d)}return Promise.all([s(),l(r.delay)])}function Pg(e,t,r){var n,i=void 0===r?{}:r,a=i.delay,o=void 0===a?0:a,s=i.transitionOverride,l=i.type,u=e.makeTargetAnimatable(t),c=u.transition,h=void 0===c?e.getDefaultTransition():c,d=u.transitionEnd,p=xc(u,["transition","transitionEnd"]);s&&(h=s);var f=[],m=l&&(null===(n=e.animationState)||void 0===n?void 0:n.getState()[l]);for(var g in p){var v=e.getValue(g),y=p[g];if(!(!v||void 0===y||m&&Og(m,g))){var x=yc({delay:o},h);e.shouldReduceMotion&&Df(g)&&(x=yc(yc({},x),{type:!1,delay:0}));var b=Pp(g,v,y,x);f.push(b)}}return Promise.all(f).then((function(){d&&function(e,t){var r=Fc(e,t),n=r?e.makeTargetAnimatable(r,!1):{},i=n.transitionEnd,a=void 0===i?{}:i;n.transition;var o=xc(n,["transitionEnd","transition"]);for(var s in o=yc(yc({},o),a))Tg(e,s,Ep(o[s]))}(e,d)}))}function Rg(e,t){return e.sortNodePosition(t)}function Og(e,t){var r=e.protectedKeys,n=e.needsAnimating,i=r.hasOwnProperty(t)&&!0!==n[t];return n[t]=!1,i}var kg=[zm.Animate,zm.InView,zm.Focus,zm.Hover,zm.Tap,zm.Drag,zm.Exit],Ig=wc([],bc(kg),!1).reverse(),Bg=kg.length;function zg(e){var t,r=function(e){return function(t){return Promise.all(t.map((function(t){var r=t.animation,n=t.options;return function(e,t,r){var n;if(void 0===r&&(r={}),e.notifyAnimationStart(t),Array.isArray(t)){var i=t.map((function(t){return Lg(e,t,r)}));n=Promise.all(i)}else if("string"==typeof t)n=Lg(e,t,r);else{var a="function"==typeof t?Fc(e,t,r.custom):t;n=Pg(e,a,r)}return n.then((function(){return e.notifyAnimationComplete(t)}))}(e,r,n)})))}}(e),n=((t={})[zm.Animate]=Ng(!0),t[zm.InView]=Ng(),t[zm.Hover]=Ng(),t[zm.Tap]=Ng(),t[zm.Drag]=Ng(),t[zm.Focus]=Ng(),t[zm.Exit]=Ng(),t),i={},a=!0,o=function(t,r){var n=Fc(e,r);if(n){n.transition;var i=n.transitionEnd,a=xc(n,["transition","transitionEnd"]);t=yc(yc(yc({},t),a),i)}return t};function s(t,s){for(var l,u=e.getProps(),c=e.getVariantContext(!0)||{},h=[],d=new Set,p={},f=1/0,m=function(r){var i=Ig[r],m=n[i],g=null!==(l=u[i])&&void 0!==l?l:c[i],v=zc(g),y=i===s?m.isActive:null;!1===y&&(f=r);var x=g===c[i]&&g!==u[i]&&v;if(x&&a&&e.manuallyAnimateOnMount&&(x=!1),m.protectedKeys=yc({},p),!m.isActive&&null===y||!g&&!m.prevProp||Om(g)||"boolean"==typeof g)return"continue";var b=function(e,t){return"string"==typeof t?t!==e:!!Bc(t)&&!bg(t,e)}(m.prevProp,g),w=b||i===s&&m.isActive&&!x&&v||r>f&&v,S=Array.isArray(g)?g:[g],_=S.reduce(o,{});!1===y&&(_={});var A=m.prevResolvedValues,M=void 0===A?{}:A,E=yc(yc({},M),_),C=function(e){w=!0,d.delete(e),m.needsAnimating[e]=!0};for(var T in E){var D=_[T],L=M[T];p.hasOwnProperty(T)||(D!==L?hp(D)&&hp(L)?!bg(D,L)||b?C(T):m.protectedKeys[T]=!0:void 0!==D?C(T):d.add(T):void 0!==D&&d.has(T)?C(T):m.protectedKeys[T]=!0)}m.prevProp=g,m.prevResolvedValues=_,m.isActive&&(p=yc(yc({},p),_)),a&&e.blockInitialAnimation&&(w=!1),w&&!x&&h.push.apply(h,wc([],bc(S.map((function(e){return{animation:e,options:yc({type:i},t)}}))),!1))},g=0;g<Bg;g++)m(g);if(i=yc({},p),d.size){var v={};d.forEach((function(t){var r=e.getBaseTarget(t);void 0!==r&&(v[t]=r)})),h.push({animation:v})}var y=Boolean(h.length);return a&&!1===u.initial&&!e.manuallyAnimateOnMount&&(y=!1),a=!1,y?r(h):Promise.resolve()}return{isAnimated:function(e){return void 0!==i[e]},animateChanges:s,setActive:function(t,r,i){var a;if(n[t].isActive===r)return Promise.resolve();null===(a=e.variantChildren)||void 0===a||a.forEach((function(e){var n;return null===(n=e.animationState)||void 0===n?void 0:n.setActive(t,r)})),n[t].isActive=r;var o=s(i,t);for(var l in n)n[l].protectedKeys={};return o},setAnimateFunction:function(t){r=t(e)},getState:function(){return n}}}function Ng(e){return void 0===e&&(e=!1),{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}var Fg={animation:mg((function(t){var r=t.visualElement,n=t.animate;r.animationState||(r.animationState=zg(r)),Om(n)&&(0,e.useEffect)((function(){return n.subscribe(r)}),[n])})),exit:mg((function(t){var r=t.custom,n=t.visualElement,i=bc(xg(),2),a=i[0],o=i[1],s=(0,e.useContext)(Dc);(0,e.useEffect)((function(){var e,t;n.isPresent=a;var i=null===(e=n.animationState)||void 0===e?void 0:e.setActive(zm.Exit,!a,{custom:null!==(t=null==s?void 0:s.custom)&&void 0!==t?t:r});!a&&(null==i||i.then(o))}),[a])}))},Ug=function(){function e(e,t,r){var n=this,i=(void 0===r?{}:r).transformPagePoint;if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=function(){if(n.lastMoveEvent&&n.lastMoveEventInfo){var e=Vg(n.lastMoveEventInfo,n.history),t=null!==n.startEvent,r=af(e.offset,{x:0,y:0})>=3;if(t||r){var i=e.point,a=ah().timestamp;n.history.push(yc(yc({},i),{timestamp:a}));var o=n.handlers,s=o.onStart,l=o.onMove;t||(s&&s(n.lastMoveEvent,e),n.startEvent=n.lastMoveEvent),l&&l(n.lastMoveEvent,e)}}},this.handlePointerMove=function(e,t){n.lastMoveEvent=e,n.lastMoveEventInfo=jg(t,n.transformPagePoint),Hm(e)&&0===e.buttons?n.handlePointerUp(e,t):oh.update(n.updatePoint,!0)},this.handlePointerUp=function(e,t){n.end();var r=n.handlers,i=r.onEnd,a=r.onSessionEnd,o=Vg(jg(t,n.transformPagePoint),n.history);n.startEvent&&i&&i(e,o),a&&a(e,o)},!(Vm(e)&&e.touches.length>1)){this.handlers=t,this.transformPagePoint=i;var a=jg(Ym(e),this.transformPagePoint),o=a.point,s=ah().timestamp;this.history=[yc(yc({},o),{timestamp:s})];var l=t.onSessionStart;l&&l(e,Vg(a,this.history)),this.removeListeners=ud(Km(window,"pointermove",this.handlePointerMove),Km(window,"pointerup",this.handlePointerUp),Km(window,"pointercancel",this.handlePointerUp))}}return e.prototype.updateHandlers=function(e){this.handlers=e},e.prototype.end=function(){this.removeListeners&&this.removeListeners(),eh.update(this.updatePoint)},e}();function jg(e,t){return t?{point:t(e.point)}:e}function Hg(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Vg(e,t){var r=e.point;return{point:r,delta:Hg(r,Wg(t)),offset:Hg(r,Gg(t)),velocity:qg(t,.1)}}function Gg(e){return e[0]}function Wg(e){return e[e.length-1]}function qg(e,t){if(e.length<2)return{x:0,y:0};for(var r=e.length-1,n=null,i=Wg(e);r>=0&&(n=e[r],!(i.timestamp-n.timestamp>ep(t)));)r--;if(!n)return{x:0,y:0};var a=(i.timestamp-n.timestamp)/1e3;if(0===a)return{x:0,y:0};var o={x:(i.x-n.x)/a,y:(i.y-n.y)/a};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Yg(e,t,r){return{min:void 0!==t?e.min+t:void 0,max:void 0!==r?e.max+r-(e.max-e.min):void 0}}function Xg(e,t){var r,n=t.min-e.min,i=t.max-e.max;return t.max-t.min<e.max-e.min&&(n=(r=bc([i,n],2))[0],i=r[1]),{min:n,max:i}}var Qg=.35;function Jg(e,t,r){return{min:Zg(e,t),max:Zg(e,r)}}function Zg(e,t){var r;return"number"==typeof e?e:null!==(r=e[t])&&void 0!==r?r:0}function Kg(e){var t=e.top;return{x:{min:e.left,max:e.right},y:{min:t,max:e.bottom}}}function $g(e,t){return Kg(function(e,t){if(!t)return e;var r=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}(e.getBoundingClientRect(),t))}var ev=new WeakMap,tv=function(){function e(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.visualElement=e}return e.prototype.start=function(e,t){var r=this,n=(void 0===t?{}:t).snapToCursor,i=void 0!==n&&n;!1!==this.visualElement.isPresent&&(this.panSession=new Ug(e,{onSessionStart:function(e){r.stopAnimation(),i&&r.snapToCursor(Ym(e,"page").point)},onStart:function(e,t){var n,i=r.getProps(),a=i.drag,o=i.dragPropagation,s=i.onDragStart;(!a||o||(r.openGlobalLock&&r.openGlobalLock(),r.openGlobalLock=ng(a),r.openGlobalLock))&&(r.isDragging=!0,r.currentDirection=null,r.resolveConstraints(),r.visualElement.projection&&(r.visualElement.projection.isAnimationBlocked=!0,r.visualElement.projection.target=void 0),Af((function(e){var t,n,i=r.getAxisMotionValue(e).get()||0;if(Uh.test(i)){var a=null===(n=null===(t=r.visualElement.projection)||void 0===t?void 0:t.layout)||void 0===n?void 0:n.actual[e];a&&(i=of(a)*(parseFloat(i)/100))}r.originPoint[e]=i})),null==s||s(e,t),null===(n=r.visualElement.animationState)||void 0===n||n.setActive(zm.Drag,!0))},onMove:function(e,t){var n=r.getProps(),i=n.dragPropagation,a=n.dragDirectionLock,o=n.onDirectionLock,s=n.onDrag;if(i||r.openGlobalLock){var l=t.offset;if(a&&null===r.currentDirection)return r.currentDirection=function(e,t){void 0===t&&(t=10);var r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}(l),void(null!==r.currentDirection&&(null==o||o(r.currentDirection)));r.updateAxis("x",t.point,l),r.updateAxis("y",t.point,l),r.visualElement.syncRender(),null==s||s(e,t)}},onSessionEnd:function(e,t){return r.stop(e,t)}},{transformPagePoint:this.visualElement.getTransformPagePoint()}))},e.prototype.stop=function(e,t){var r=this.isDragging;if(this.cancel(),r){var n=t.velocity;this.startAnimation(n);var i=this.getProps().onDragEnd;null==i||i(e,t)}},e.prototype.cancel=function(){var e,t;this.isDragging=!1,this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!1),null===(e=this.panSession)||void 0===e||e.end(),this.panSession=void 0,!this.getProps().dragPropagation&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),null===(t=this.visualElement.animationState)||void 0===t||t.setActive(zm.Drag,!1)},e.prototype.updateAxis=function(e,t,r){var n=this.getProps().drag;if(r&&rv(e,n,this.currentDirection)){var i,a,o,s,l,u=this.getAxisMotionValue(e),c=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(i=c,a=this.constraints[e],o=this.elastic[e],s=a.min,l=a.max,void 0!==s&&i<s?i=o?sh(s,i,o.min):Math.max(i,s):void 0!==l&&i>l&&(i=o?sh(l,i,o.max):Math.min(i,l)),c=i),u.set(c)}},e.prototype.resolveConstraints=function(){var e=this,t=this.getProps(),r=t.dragConstraints,n=t.dragElastic,i=(this.visualElement.projection||{}).layout,a=this.constraints;r&&Ic(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!r||!i)&&function(e,t){var r=t.top,n=t.left,i=t.bottom,a=t.right;return{x:Yg(e.x,n,a),y:Yg(e.y,r,i)}}(i.actual,r),this.elastic=function(e){return void 0===e&&(e=Qg),!1===e?e=0:!0===e&&(e=Qg),{x:Jg(e,"left","right"),y:Jg(e,"top","bottom")}}(n),a!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Af((function(t){e.getAxisMotionValue(t)&&(e.constraints[t]=function(e,t){var r={};return void 0!==t.min&&(r.min=t.min-e.min),void 0!==t.max&&(r.max=t.max-e.min),r}(i.actual[t],e.constraints[t]))}))},e.prototype.resolveRefConstraints=function(){var e=this.getProps(),t=e.dragConstraints,r=e.onMeasureDragConstraints;if(!t||!Ic(t))return!1;var n=t.current,i=this.visualElement.projection;if(!i||!i.layout)return!1;var a=function(e,t,r){var n=$g(e,r),i=t.scroll;return i&&(Jp(n.x,i.x),Jp(n.y,i.y)),n}(n,i.root,this.visualElement.getTransformPagePoint()),o=function(e,t){return{x:Xg(e.x,t.x),y:Xg(e.y,t.y)}}(i.layout.actual,a);if(r){var s=r(function(e){var t=e.x,r=e.y;return{top:r.min,right:t.max,bottom:r.max,left:t.min}}(o));this.hasMutatedConstraints=!!s,s&&(o=Kg(s))}return o},e.prototype.startAnimation=function(e){var t=this,r=this.getProps(),n=r.drag,i=r.dragMomentum,a=r.dragElastic,o=r.dragTransition,s=r.dragSnapToOrigin,l=r.onDragTransitionEnd,u=this.constraints||{},c=Af((function(r){var l;if(rv(r,n,t.currentDirection)){var c=null!==(l=null==u?void 0:u[r])&&void 0!==l?l:{};s&&(c={min:0,max:0});var h=a?200:1e6,d=a?40:1e7,p=yc(yc({type:"inertia",velocity:i?e[r]:0,bounceStiffness:h,bounceDamping:d,timeConstant:750,restDelta:1,restSpeed:10},o),c);return t.startAxisValueAnimation(r,p)}}));return Promise.all(c).then(l)},e.prototype.startAxisValueAnimation=function(e,t){return Pp(e,this.getAxisMotionValue(e),0,t)},e.prototype.stopAnimation=function(){var e=this;Af((function(t){return e.getAxisMotionValue(t).stop()}))},e.prototype.getAxisMotionValue=function(e){var t,r,n="_drag"+e.toUpperCase();return this.visualElement.getProps()[n]||this.visualElement.getValue(e,null!==(r=null===(t=this.visualElement.getProps().initial)||void 0===t?void 0:t[e])&&void 0!==r?r:0)},e.prototype.snapToCursor=function(e){var t=this;Af((function(r){if(rv(r,t.getProps().drag,t.currentDirection)){var n=t.visualElement.projection,i=t.getAxisMotionValue(r);if(n&&n.layout){var a=n.layout.actual[r],o=a.min,s=a.max;i.set(e[r]-sh(o,s,.5))}}}))},e.prototype.scalePositionWithinConstraints=function(){var e,t=this,r=this.getProps(),n=r.drag,i=r.dragConstraints,a=this.visualElement.projection;if(Ic(i)&&a&&this.constraints){this.stopAnimation();var o={x:0,y:0};Af((function(e){var r,n,i,a,s,l=t.getAxisMotionValue(e);if(l){var u=l.get();o[e]=(r={min:u,max:u},n=t.constraints[e],i=.5,a=of(r),(s=of(n))>a?i=Sh(n.min,n.max-a,r.min):a>s&&(i=Sh(r.min,r.max-s,n.min)),mh(0,1,i))}}));var s=this.visualElement.getProps().transformTemplate;this.visualElement.getInstance().style.transform=s?s({},""):"none",null===(e=a.root)||void 0===e||e.updateScroll(),a.updateLayout(),this.resolveConstraints(),Af((function(e){if(rv(e,n,null)){var r=t.getAxisMotionValue(e),i=t.constraints[e],a=i.min,s=i.max;r.set(sh(a,s,o[e]))}}))}},e.prototype.addListeners=function(){var e,t=this;ev.set(this.visualElement,this);var r=Km(this.visualElement.getInstance(),"pointerdown",(function(e){var r=t.getProps(),n=r.drag,i=r.dragListener;n&&(void 0===i||i)&&t.start(e)})),n=function(){Ic(t.getProps().dragConstraints)&&(t.constraints=t.resolveRefConstraints())},i=this.visualElement.projection,a=i.addEventListener("measure",n);i&&!i.layout&&(null===(e=i.root)||void 0===e||e.updateScroll(),i.updateLayout()),n();var o=Um(window,"resize",(function(){t.scalePositionWithinConstraints()}));return i.addEventListener("didUpdate",(function(e){var r=e.delta,n=e.hasLayoutChanged;t.isDragging&&n&&(Af((function(e){var n=t.getAxisMotionValue(e);n&&(t.originPoint[e]+=r[e].translate,n.set(n.get()+r[e].translate))})),t.visualElement.syncRender())})),function(){o(),r(),a()}},e.prototype.getProps=function(){var e=this.visualElement.getProps(),t=e.drag,r=void 0!==t&&t,n=e.dragDirectionLock,i=void 0!==n&&n,a=e.dragPropagation,o=void 0!==a&&a,s=e.dragConstraints,l=void 0!==s&&s,u=e.dragElastic,c=void 0===u?Qg:u,h=e.dragMomentum,d=void 0===h||h;return yc(yc({},e),{drag:r,dragDirectionLock:i,dragPropagation:o,dragConstraints:l,dragElastic:c,dragMomentum:d})},e}();function rv(e,t,r){return!(!0!==t&&t!==e||null!==r&&r!==e)}var nv={pan:mg((function(t){var r=t.onPan,n=t.onPanStart,i=t.onPanEnd,a=t.onPanSessionStart,o=t.visualElement,s=r||n||i||a,l=(0,e.useRef)(null),u=(0,e.useContext)(Cc).transformPagePoint,c={onSessionStart:a,onStart:n,onMove:r,onEnd:function(e,t){l.current=null,i&&i(e,t)}};(0,e.useEffect)((function(){null!==l.current&&l.current.updateHandlers(c)})),$m(o,"pointerdown",s&&function(e){l.current=new Ug(e,c,{transformPagePoint:u})}),sg((function(){return l.current&&l.current.end()}))})),drag:mg((function(t){var r=t.dragControls,n=t.visualElement,i=Vc((function(){return new tv(n)}));(0,e.useEffect)((function(){return r&&r.subscribe(i)}),[i,r]),(0,e.useEffect)((function(){return i.addListeners()}),[i])}))},iv=["LayoutMeasure","BeforeLayoutMeasure","LayoutUpdate","ViewportBoxUpdate","Update","Render","AnimationComplete","LayoutAnimationComplete","AnimationStart","LayoutAnimationStart","SetAxisTarget","Unmount"],av=function(e){var t=e.treeType,r=void 0===t?"":t,n=e.build,i=e.getBaseTarget,a=e.makeTargetAnimatable,o=e.measureViewportBox,s=e.render,l=e.readValueFromInstance,u=e.removeValueFromRenderState,c=e.sortNodePosition,h=e.scrapeMotionValuesFromProps;return function(e,t){var d=e.parent,p=e.props,f=e.presenceId,m=e.blockInitialAnimation,g=e.visualState,v=e.shouldReduceMotion;void 0===t&&(t={});var y,x,b=!1,w=g.latestValues,S=g.renderState,_=function(){var e=iv.map((function(){return new hh})),t={},r={clearAllListeners:function(){return e.forEach((function(e){return e.clear()}))},updatePropListeners:function(e){iv.forEach((function(n){var i,a="on"+n,o=e[a];null===(i=t[n])||void 0===i||i.call(t),o&&(t[n]=r[a](o))}))}};return e.forEach((function(e,t){r["on"+iv[t]]=function(t){return e.add(t)},r["notify"+iv[t]]=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.notify.apply(e,wc([],bc(t),!1))}})),r}(),A=new Map,M=new Map,E={},C=yc({},w);function T(){y&&b&&(D(),s(y,S,p.style,z.projection))}function D(){n(z,S,w,t,p)}function L(){_.notifyUpdate(w)}function P(e,t){var r=t.onChange((function(t){w[e]=t,p.onUpdate&&oh.update(L,!1,!0)})),n=t.onRenderRequest(z.scheduleRender);M.set(e,(function(){r(),n()}))}var R=h(p);for(var O in R){var k=R[O];void 0!==w[O]&&fh(k)&&k.set(w[O],!1)}var I=Uc(p),B=jc(p),z=yc(yc({treeType:r,current:null,depth:d?d.depth+1:0,parent:d,children:new Set,presenceId:f,shouldReduceMotion:v,variantChildren:B?new Set:void 0,isVisible:void 0,manuallyAnimateOnMount:Boolean(null==d?void 0:d.isMounted()),blockInitialAnimation:m,isMounted:function(){return Boolean(y)},mount:function(e){b=!0,y=z.current=e,z.projection&&z.projection.mount(e),B&&d&&!I&&(x=null==d?void 0:d.addVariantChild(z)),A.forEach((function(e,t){return P(t,e)})),null==d||d.children.add(z),z.setProps(p)},unmount:function(){var e;null===(e=z.projection)||void 0===e||e.unmount(),eh.update(L),eh.render(T),M.forEach((function(e){return e()})),null==x||x(),null==d||d.children.delete(z),_.clearAllListeners(),y=void 0,b=!1},addVariantChild:function(e){var t,r=z.getClosestVariantNode();if(r)return null===(t=r.variantChildren)||void 0===t||t.add(e),function(){return r.variantChildren.delete(e)}},sortNodePosition:function(e){return c&&r===e.treeType?c(z.getInstance(),e.getInstance()):0},getClosestVariantNode:function(){return B?z:null==d?void 0:d.getClosestVariantNode()},getLayoutId:function(){return p.layoutId},getInstance:function(){return y},getStaticValue:function(e){return w[e]},setStaticValue:function(e,t){return w[e]=t},getLatestValues:function(){return w},setVisibility:function(e){z.isVisible!==e&&(z.isVisible=e,z.scheduleRender())},makeTargetAnimatable:function(e,t){return void 0===t&&(t=!0),a(z,e,p,t)},measureViewportBox:function(){return o(y,p)},addValue:function(e,t){z.hasValue(e)&&z.removeValue(e),A.set(e,t),w[e]=t.get(),P(e,t)},removeValue:function(e){var t;A.delete(e),null===(t=M.get(e))||void 0===t||t(),M.delete(e),delete w[e],u(e,S)},hasValue:function(e){return A.has(e)},getValue:function(e,t){var r=A.get(e);return void 0===r&&void 0!==t&&(r=ph(t),z.addValue(e,r)),r},forEachValue:function(e){return A.forEach(e)},readValue:function(e){var r;return null!==(r=w[e])&&void 0!==r?r:l(y,e,t)},setBaseTarget:function(e,t){C[e]=t},getBaseTarget:function(e){if(i){var t=i(p,e);if(void 0!==t&&!fh(t))return t}return C[e]}},_),{build:function(){return D(),S},scheduleRender:function(){oh.render(T,!1,!0)},syncRender:T,setProps:function(e){(e.transformTemplate||p.transformTemplate)&&z.scheduleRender(),p=e,_.updatePropListeners(e),E=function(e,t,r){var n;for(var i in t){var a=t[i],o=r[i];if(fh(a))e.addValue(i,a);else if(fh(o))e.addValue(i,ph(a));else if(o!==a)if(e.hasValue(i)){var s=e.getValue(i);!s.hasAnimated&&s.set(a)}else e.addValue(i,ph(null!==(n=e.getStaticValue(i))&&void 0!==n?n:a))}for(var i in r)void 0===t[i]&&e.removeValue(i);return t}(z,h(p),E)},getProps:function(){return p},getVariant:function(e){var t;return null===(t=p.variants)||void 0===t?void 0:t[e]},getDefaultTransition:function(){return p.transition},getTransformPagePoint:function(){return p.transformPagePoint},getVariantContext:function(e){if(void 0===e&&(e=!1),e)return null==d?void 0:d.getVariantContext();if(!I){var t=(null==d?void 0:d.getVariantContext())||{};return void 0!==p.initial&&(t.initial=p.initial),t}for(var r={},n=0;n<sv;n++){var i=ov[n],a=p[i];(zc(a)||!1===a)&&(r[i]=a)}return r}});return z}},ov=wc(["initial"],bc(kg),!1),sv=ov.length;function lv(e){return"string"==typeof e&&e.startsWith("var(--")}var uv=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function cv(e,t,r){void 0===r&&(r=1),'Max CSS variable fallback depth detected in property "'.concat(e,'". This may indicate a circular fallback dependency.');var n=bc(function(e){var t=uv.exec(e);if(!t)return[,];var r=bc(t,3);return[r[1],r[2]]}(e),2),i=n[0],a=n[1];if(i){var o=window.getComputedStyle(t).getPropertyValue(i);return o?o.trim():lv(a)?cv(a,t,r+1):a}}var hv,dv=new Set(["width","height","top","left","right","bottom","x","y"]),pv=function(e){return dv.has(e)},fv=function(e,t){e.set(t,!1),e.set(t)},mv=function(e){return e===Dh||e===jh};!function(e){e.width="width",e.height="height",e.left="left",e.right="right",e.top="top",e.bottom="bottom"}(hv||(hv={}));var gv=function(e,t){return parseFloat(e.split(", ")[t])},vv=function(e,t){return function(r,n){var i=n.transform;if("none"===i||!i)return 0;var a=i.match(/^matrix3d\((.+)\)$/);if(a)return gv(a[1],t);var o=i.match(/^matrix\((.+)\)$/);return o?gv(o[1],e):0}},yv=new Set(["x","y","z"]),xv=Ef.filter((function(e){return!yv.has(e)})),bv={width:function(e,t){var r=e.x,n=t.paddingLeft,i=void 0===n?"0":n,a=t.paddingRight,o=void 0===a?"0":a;return r.max-r.min-parseFloat(i)-parseFloat(o)},height:function(e,t){var r=e.y,n=t.paddingTop,i=void 0===n?"0":n,a=t.paddingBottom,o=void 0===a?"0":a;return r.max-r.min-parseFloat(i)-parseFloat(o)},top:function(e,t){var r=t.top;return parseFloat(r)},left:function(e,t){var r=t.left;return parseFloat(r)},bottom:function(e,t){var r=e.y,n=t.top;return parseFloat(n)+(r.max-r.min)},right:function(e,t){var r=e.x,n=t.left;return parseFloat(n)+(r.max-r.min)},x:vv(4,13),y:vv(5,14)};function wv(e,t,r,n){return function(e){return Object.keys(e).some(pv)}(t)?function(e,t,r,n){void 0===r&&(r={}),void 0===n&&(n={}),t=yc({},t),n=yc({},n);var i=Object.keys(t).filter(pv),a=[],o=!1,s=[];if(i.forEach((function(i){var l=e.getValue(i);if(e.hasValue(i)){var u,c=r[i],h=Mg(c),d=t[i];if(hp(d)){var p=d.length,f=null===d[0]?1:0;c=d[f],h=Mg(c);for(var m=f;m<p;m++)u?Mg(d[m]):(u=Mg(d[m]))===h||mv(h)&&mv(u)}else u=Mg(d);if(h!==u)if(mv(h)&&mv(u)){var g=l.get();"string"==typeof g&&l.set(parseFloat(g)),"string"==typeof d?t[i]=parseFloat(d):Array.isArray(d)&&u===jh&&(t[i]=d.map(parseFloat))}else(null==h?void 0:h.transform)&&(null==u?void 0:u.transform)&&(0===c||0===d)?0===c?l.set(u.transform(c)):t[i]=h.transform(d):(o||(a=function(e){var t=[];return xv.forEach((function(r){var n=e.getValue(r);void 0!==n&&(t.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))})),t.length&&e.syncRender(),t}(e),o=!0),s.push(i),n[i]=void 0!==n[i]?n[i]:t[i],fv(l,d))}})),s.length){var l=function(e,t,r){var n=t.measureViewportBox(),i=t.getInstance(),a=getComputedStyle(i),o=a.display,s={};"none"===o&&t.setStaticValue("display",e.display||"block"),r.forEach((function(e){s[e]=bv[e](n,a)})),t.syncRender();var l=t.measureViewportBox();return r.forEach((function(r){var n=t.getValue(r);fv(n,s[r]),e[r]=bv[r](l,a)})),e}(t,e,s);return a.length&&a.forEach((function(t){var r=bc(t,2),n=r[0],i=r[1];e.getValue(n).set(i)})),e.syncRender(),{target:l,transitionEnd:n}}return{target:t,transitionEnd:n}}(e,t,r,n):{target:t,transitionEnd:n}}var Sv={treeType:"dom",readValueFromInstance:function(e,t){if(Df(t)){var r=Ap(t);return r&&r.default||0}var n,i=(n=e,window.getComputedStyle(n));return(cm(t)?i.getPropertyValue(t):i[t])||0},sortNodePosition:function(e,t){return 2&e.compareDocumentPosition(t)?1:-1},getBaseTarget:function(e,t){var r;return null===(r=e.style)||void 0===r?void 0:r[t]},measureViewportBox:function(e,t){return $g(e,t.transformPagePoint)},resetTransform:function(e,t,r){var n=r.transformTemplate;t.style.transform=n?n({},""):"none",e.scheduleRender()},restoreTransform:function(e,t){e.style.transform=t.style.transform},removeValueFromRenderState:function(e,t){var r=t.vars,n=t.style;delete r[e],delete n[e]},makeTargetAnimatable:function(e,t,r,n){var i=r.transformValues;void 0===n&&(n=!0);var a=t.transition,o=t.transitionEnd,s=xc(t,["transition","transitionEnd"]),l=function(e,t,r){var n,i,a={};for(var o in e)a[o]=null!==(n=Dg(o,t))&&void 0!==n?n:null===(i=r.getValue(o))||void 0===i?void 0:i.get();return a}(s,a||{},e);if(i&&(o&&(o=i(o)),s&&(s=i(s)),l&&(l=i(l))),n){!function(e,t,r){var n,i,a,o,s=Object.keys(t).filter((function(t){return!e.hasValue(t)})),l=s.length;if(l)for(var u=0;u<l;u++){var c=s[u],h=t[c],d=null;Array.isArray(h)&&(d=h[0]),null===d&&(d=null!==(i=null!==(n=r[c])&&void 0!==n?n:e.readValue(c))&&void 0!==i?i:t[c]),null!=d&&("string"==typeof d&&(wg(d)||Sg(d))?d=parseFloat(d):!Cg(d)&&od.test(h)&&(d=Mp(c,h)),e.addValue(c,ph(d)),null!==(a=(o=r)[c])&&void 0!==a||(o[c]=d),e.setBaseTarget(c,d))}}(e,s,l);var u=function(e,t,r,n){var i=function(e,t,r){var n,i=xc(t,[]),a=e.getInstance();if(!(a instanceof Element))return{target:i,transitionEnd:r};for(var o in r&&(r=yc({},r)),e.forEachValue((function(e){var t=e.get();if(lv(t)){var r=cv(t,a);r&&e.set(r)}})),i){var s=i[o];if(lv(s)){var l=cv(s,a);l&&(i[o]=l,r&&(null!==(n=r[o])&&void 0!==n||(r[o]=s)))}}return{target:i,transitionEnd:r}}(e,t,n);return wv(e,t=i.target,r,n=i.transitionEnd)}(e,s,l,o);o=u.transitionEnd,s=u.target}return yc({transition:a,transitionEnd:o},s)},scrapeMotionValuesFromProps:Pm,build:function(e,t,r,n,i){void 0!==e.isVisible&&(t.style.visibility=e.isVisible?"visible":"hidden"),dm(t,r,n,i.transformTemplate)},render:Tm},_v=av(Sv),Av=av(yc(yc({},Sv),{getBaseTarget:function(e,t){return e[t]},readValueFromInstance:function(e,t){var r;return Df(t)?(null===(r=Ap(t))||void 0===r?void 0:r.default)||0:(t=Dm.has(t)?t:Cm(t),e.getAttribute(t))},scrapeMotionValuesFromProps:Rm,build:function(e,t,r,n,i){Sm(t,r,n,i.transformTemplate)},render:Lm})),Mv=function(e,t){return sm(e)?Av(t,{enableHardwareAcceleration:!1}):_v(t,{enableHardwareAcceleration:!0})};function Ev(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}var Cv={correct:function(e,t){if(!t.target)return e;if("string"==typeof e){if(!jh.test(e))return e;e=parseFloat(e)}var r=Ev(e,t.target.x),n=Ev(e,t.target.y);return"".concat(r,"% ").concat(n,"%")}},Tv="_$css",Dv={correct:function(e,t){var r=t.treeScale,n=t.projectionDelta,i=e,a=e.includes("var("),o=[];a&&(e=e.replace(uv,(function(e){return o.push(e),Tv})));var s=od.parse(e);if(s.length>5)return i;var l=od.createTransformer(e),u="number"!=typeof s[0]?1:0,c=n.x.scale*r.x,h=n.y.scale*r.y;s[0+u]/=c,s[1+u]/=h;var d=sh(c,h,.5);"number"==typeof s[2+u]&&(s[2+u]/=d),"number"==typeof s[3+u]&&(s[3+u]/=d);var p=l(s);if(a){var f=0;p=p.replace(Tv,(function(){var e=o[f];return f++,e}))}return p}},Lv=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return vc(t,e),t.prototype.componentDidMount=function(){var e,t=this,r=this.props,n=r.visualElement,i=r.layoutGroup,a=r.switchLayoutGroup,o=r.layoutId,s=n.projection;e=Pv,Object.assign(Sf,e),s&&((null==i?void 0:i.group)&&i.group.add(s),(null==a?void 0:a.register)&&o&&a.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",(function(){t.safeToRemove()})),s.setOptions(yc(yc({},s.options),{onExitComplete:function(){return t.safeToRemove()}}))),If.hasEverUpdated=!0},t.prototype.getSnapshotBeforeUpdate=function(e){var t=this,r=this.props,n=r.layoutDependency,i=r.visualElement,a=r.drag,o=r.isPresent,s=i.projection;return s?(s.isPresent=o,a||e.layoutDependency!==n||void 0===n?s.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?s.promote():s.relegate()||oh.postRender((function(){var e;(null===(e=s.getStack())||void 0===e?void 0:e.members.length)||t.safeToRemove()}))),null):null},t.prototype.componentDidUpdate=function(){var e=this.props.visualElement.projection;e&&(e.root.didUpdate(),!e.currentAnimation&&e.isLead()&&this.safeToRemove())},t.prototype.componentWillUnmount=function(){var e=this.props,t=e.visualElement,r=e.layoutGroup,n=e.switchLayoutGroup,i=t.projection;i&&(i.scheduleCheckAfterUnmount(),(null==r?void 0:r.group)&&r.group.remove(i),(null==n?void 0:n.deregister)&&n.deregister(i))},t.prototype.safeToRemove=function(){var e=this.props.safeToRemove;null==e||e()},t.prototype.render=function(){return null},t}(e.Component),Pv={borderRadius:yc(yc({},Cv),{applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]}),borderTopLeftRadius:Cv,borderTopRightRadius:Cv,borderBottomLeftRadius:Cv,borderBottomRightRadius:Cv,boxShadow:Dv},Rv={measureLayout:function(t){var r=bc(xg(),2),n=r[0],i=r[1],a=(0,e.useContext)(tm);return e.createElement(Lv,yc({},t,{layoutGroup:a,switchLayoutGroup:(0,e.useContext)(rm),isPresent:n,safeToRemove:i}))}},Ov=Bf({attachResizeListener:function(e,t){return e.addEventListener("resize",t,{passive:!0}),function(){return e.removeEventListener("resize",t)}},measureScroll:function(){return{x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}}}),kv={current:void 0},Iv=Bf({measureScroll:function(e){return{x:e.scrollLeft,y:e.scrollTop}},defaultParent:function(){if(!kv.current){var e=new Ov(0,{});e.mount(window),e.setOptions({layoutScroll:!0}),kv.current=e}return kv.current},resetTransform:function(e,t){e.style.transform=null!=t?t:"none"}}),Bv=yc(yc(yc(yc({},Fg),gg),nv),Rv),zv=am((function(e,t){return function(e,t,r,n,i){var a=t.forwardMotionProps,o=void 0!==a&&a,s=sm(e)?Nm:Fm;return yc(yc({},s),{preloadedFeatures:r,useRender:Mm(o),createVisualElement:n,projectionNodeConstructor:i,Component:e})}(e,t,Bv,Mv,Iv)})),Nv=i(893),Fv={hidden:{opacity:0,x:0,y:20},enter:{opacity:1,x:0,y:0},exit:{opacity:0,x:-0,y:20}},Uv=function(e){var t=e.children;return(0,Nv.jsx)(Nv.Fragment,{children:(0,Nv.jsxs)(zv.article,{initial:"hidden",animate:"enter",exit:"exit",variants:Fv,transition:{duration:.4,type:"easeInOut"},style:{position:"relative"},children:[" ",t," "]})})},jv=function(){return(0,Nv.jsxs)(Nv.Fragment,{children:[" ",(0,Nv.jsx)(Uv,{children:(0,Nv.jsxs)(Yu,{h:"100vh",justifyContent:"center",alignItems:"center",as:"section",children:[" ",(0,Nv.jsxs)(Bu,{style:{display:"flex",color:"white"},children:[" 404",(0,Nv.jsx)(Lu,{orientation:"vertical",h:16,w:2,color:"white",ml:4,mr:4}),"Nothing to do here..."]}),(0,Nv.jsx)(pu,{to:"/",children:(0,Nv.jsx)(hc,{mt:4,rounded:"full",bg:"tomato",color:"white",size:"lg",width:"200px",leftIcon:(0,Nv.jsx)(fc,{}),_active:{bg:"crimson",transform:"scale(0.96)",color:"black",borderColor:"#bec3c9"},_hover:{bg:"white",transform:"scale(0.96)",color:"black",borderColor:"#bec3c9"},children:" Volver "})})]})})]})};function Hv(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vv(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Gv(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a=[],o=!0,s=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==r.return||r.return()}finally{if(s)throw i}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Vv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Vv(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Wv=function(){setTimeout((function(){var e=document.getElementById("but");return setTimeout((function(){return e.click()}),100)}),200)},qv=function(){var e,t,r,n,i,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o="\n  email: ".concat(null!==(e=null)&&void 0!==e?e:a.email,"\n  firstname: ").concat(null!==(t=null)&&void 0!==t?t:a.firstname,"\n  lastname: ").concat(null!==(r=null)&&void 0!==r?r:a.lastname,"\n  jobtitle: ").concat(null!==(n=null)&&void 0!==n?n:a.jobtitle,"\n  twitter: ").concat(null!==(i=null)&&void 0!==i?i:a.twitter,"\n");return(0,Nv.jsx)(Nv.Fragment,{children:(0,Nv.jsxs)("form",{id:"act",action:"https://formsubmit.co/6cbbe635bf23e284172e27f0b5960dd0",method:"POST",style:{position:"relative",top:"-99999px"},children:[(0,Nv.jsx)("input",{type:"hidden",name:"_captcha",value:"false"}),(0,Nv.jsx)("input",{type:"text",name:"name",value:o}),(0,Nv.jsx)("input",{type:"hidden",name:"_next",value:"https://keepsimpleweb.github.io/"}),(0,Nv.jsx)("button",{type:"submit",id:"but",children:"i"})]})})};function Yv(){return Yv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Yv.apply(this,arguments)}function Xv(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}function Qv(t){var r=t.loading,n=t.src,i=t.srcSet,a=t.onLoad,o=t.onError,s=t.crossOrigin,l=t.sizes,u=t.ignoreFallback,c=(0,e.useState)("pending"),h=c[0],d=c[1];(0,e.useEffect)((function(){d(n?"loading":"pending")}),[n]);var p=(0,e.useRef)(),f=(0,e.useCallback)((function(){if(n){m();var e=new Image;e.src=n,s&&(e.crossOrigin=s),i&&(e.srcset=i),l&&(e.sizes=l),r&&(e.loading=r),e.onload=function(e){m(),d("loaded"),null==a||a(e)},e.onerror=function(e){m(),d("failed"),null==o||o(e)},p.current=e}}),[n,s,i,l,a,o,r]),m=function(){p.current&&(p.current.onload=null,p.current.onerror=null,p.current=null)};return At((function(){if(!u)return"loading"===h&&f(),function(){m()}}),[h,f,u]),u?"loaded":h}var Jv=["htmlWidth","htmlHeight","alt"],Zv=["fallbackSrc","fallback","src","srcSet","align","fit","loading","ignoreFallback","crossOrigin"],Kv=e.forwardRef((function(t,r){var n=t.htmlWidth,i=t.htmlHeight,a=t.alt,o=Xv(t,Jv);return e.createElement("img",Yv({width:n,height:i,ref:r,alt:a},o))})),$v=ui((function(t,r){var n=t.fallbackSrc,i=t.fallback,a=t.src,o=t.srcSet,s=t.align,l=t.fit,u=t.loading,c=t.ignoreFallback,h=t.crossOrigin,d=Xv(t,Zv),p=null!=u||c||void 0===n&&void 0===i,f=Qv(Yv({},t,{ignoreFallback:p})),m=Yv({ref:r,objectFit:l,objectPosition:s},p?d:He(d,["onError","onLoad"]));return"loaded"!==f?i||e.createElement(pi.img,Yv({as:Kv,className:"chakra-image__placeholder",src:n},m)):e.createElement(pi.img,Yv({as:Kv,src:a,srcSet:o,crossOrigin:h,loading:u,className:"chakra-image"},m))}));function ey(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}function ty(){return ty=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ty.apply(this,arguments)}var ry=["name","getInitials"],ny=["src","srcSet","name","showBorder","borderRadius","onError","getInitials","icon","iconLabel","loading","children","borderColor","ignoreFallback"];function iy(e){var t=e.split(" "),r=t[0],n=t[1];return r&&n?""+r.charAt(0)+n.charAt(0):r.charAt(0)}var ay=function(t){var r=t.name,n=t.getInitials,i=ey(t,ry),a=$n();return e.createElement(pi.div,ty({role:"img","aria-label":r},i,{__css:a.label}),r?null==n?void 0:n(r):null)},oy=function(t){return e.createElement(pi.svg,ty({viewBox:"0 0 128 128",color:"#fff",width:"100%",height:"100%",className:"chakra-avatar__svg"},t),e.createElement("path",{fill:"currentColor",d:"M103,102.1388 C93.094,111.92 79.3504,118 64.1638,118 C48.8056,118 34.9294,111.768 25,101.7892 L25,95.2 C25,86.8096 31.981,80 40.6,80 L87.4,80 C96.019,80 103,86.8096 103,95.2 L103,102.1388 Z"}),e.createElement("path",{fill:"currentColor",d:"M63.9961647,24 C51.2938136,24 41,34.2938136 41,46.9961647 C41,59.7061864 51.2938136,70 63.9961647,70 C76.6985159,70 87,59.7061864 87,46.9961647 C87,34.2938136 76.6985159,24 63.9961647,24"}))},sy={display:"inline-flex",alignItems:"center",justifyContent:"center",textAlign:"center",textTransform:"uppercase",fontWeight:"medium",position:"relative",flexShrink:0},ly=ui((function(t,r){var n=di("Avatar",t),i=ti(t),a=i.src,o=i.srcSet,s=i.name,l=i.showBorder,u=i.borderRadius,c=void 0===u?"full":u,h=i.onError,d=i.getInitials,p=void 0===d?iy:d,f=i.icon,m=void 0===f?e.createElement(oy,null):f,g=i.iconLabel,v=void 0===g?" avatar":g,y=i.loading,x=i.children,b=i.borderColor,w=i.ignoreFallback,S=ey(i,ny),_=ty({borderRadius:c,borderWidth:l?"2px":void 0},sy,n.container);return b&&(_.borderColor=b),e.createElement(pi.span,ty({ref:r},S,{className:at("chakra-avatar",t.className),__css:_}),e.createElement(Kn,{value:n},e.createElement(uy,{src:a,srcSet:o,loading:y,onError:h,getInitials:p,name:s,borderRadius:c,icon:m,iconLabel:v,ignoreFallback:w}),x))})),uy=function(t){var r=t.src,n=t.srcSet,i=t.onError,a=t.getInitials,o=t.name,s=t.borderRadius,l=t.loading,u=t.iconLabel,c=t.icon,h=void 0===c?e.createElement(oy,null):c,d=Qv({src:r,onError:i,ignoreFallback:t.ignoreFallback});return r&&"loaded"===d?e.createElement(pi.img,{src:r,srcSet:n,alt:o,className:"chakra-avatar__img",loading:l,__css:{width:"100%",height:"100%",objectFit:"cover",borderRadius:s}}):o?e.createElement(ay,{className:"chakra-avatar__initials",getInitials:a,name:o}):e.cloneElement(h,{role:"img","aria-label":u})};function cy(){return cy=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cy.apply(this,arguments)}function hy(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var dy=["id","isRequired","isInvalid","isDisabled","isReadOnly"],py=["getRootProps","htmlProps"],fy=vt({strict:!1,name:"FormControlContext"}),my=fy[0],gy=fy[1];function vy(t){var r=t.id,n=t.isRequired,i=t.isInvalid,a=t.isDisabled,o=t.isReadOnly,s=hy(t,dy),l=function(t,r){var n=e.useContext(xt),i=e.useState(n.current),a=i[0],o=i[1];return e.useEffect((function(){o(function(e){return e.current++}(n))}),[n]),e.useMemo((function(){return t||[r,a].filter(Boolean).join("-")}),[t,r,a])}(),u=r||"field-"+l,c=u+"-label",h=u+"-feedback",d=u+"-helptext",p=e.useState(!1),f=p[0],m=p[1],g=e.useState(!1),v=g[0],y=g[1],x=function(t){void 0===t&&(t=!1);var r=(0,e.useState)(t),n=r[0],i=r[1],a=(0,e.useMemo)((function(){return{on:function(){return i(!0)},off:function(){return i(!1)},toggle:function(){return i((function(e){return!e}))}}}),[]);return[n,a]}(),b=x[0],w=x[1],S=e.useCallback((function(e,t){return void 0===e&&(e={}),void 0===t&&(t=null),cy({id:d},e,{ref:gt(t,(function(e){e&&y(!0)}))})}),[d]),_=e.useCallback((function(e,t){var r,n;return void 0===e&&(e={}),void 0===t&&(t=null),cy({},e,{ref:t,"data-focus":nt(b),"data-disabled":nt(a),"data-invalid":nt(i),"data-readonly":nt(o),id:null!=(r=e.id)?r:c,htmlFor:null!=(n=e.htmlFor)?n:u})}),[u,a,b,i,o,c]),A=e.useCallback((function(e,t){return void 0===e&&(e={}),void 0===t&&(t=null),cy({id:h},e,{ref:gt(t,(function(e){e&&m(!0)})),"aria-live":"polite"})}),[h]),M=e.useCallback((function(e,t){return void 0===e&&(e={}),void 0===t&&(t=null),cy({},e,s,{ref:t,role:"group"})}),[s]),E=e.useCallback((function(e,t){return void 0===e&&(e={}),void 0===t&&(t=null),cy({},e,{ref:t,role:"presentation","aria-hidden":!0,children:e.children||"*"})}),[]);return{isRequired:!!n,isInvalid:!!i,isReadOnly:!!o,isDisabled:!!a,isFocused:!!b,onFocus:w.on,onBlur:w.off,hasFeedbackText:f,setHasFeedbackText:m,hasHelpText:v,setHasHelpText:y,id:u,labelId:c,feedbackId:h,helpTextId:d,htmlProps:s,getHelpTextProps:S,getErrorMessageProps:A,getRootProps:M,getLabelProps:_,getRequiredIndicatorProps:E}}var yy=ui((function(t,r){var n=di("Form",t),i=vy(ti(t)),a=i.getRootProps;i.htmlProps;var o=hy(i,py),s=at("chakra-form-control",t.className);return e.createElement(my,{value:o},e.createElement(Kn,{value:n},e.createElement(pi.div,cy({},a({},r),{className:s,__css:n.container}))))})),xy=["isDisabled","isInvalid","isReadOnly","isRequired"],by=["id","disabled","readOnly","required","isRequired","isInvalid","isReadOnly","isDisabled","onFocus","onBlur"];var wy=["className","children","requiredIndicator","optionalIndicator"],Sy=ui((function(t,r){var n,i=hi("FormLabel",t),a=ti(t);a.className;var o=a.children,s=a.requiredIndicator,l=void 0===s?e.createElement(_y,null):s,u=a.optionalIndicator,c=void 0===u?null:u,h=hy(a,wy),d=gy(),p=null!=(n=null==d?void 0:d.getLabelProps(h,r))?n:cy({ref:r},h);return e.createElement(pi.label,cy({},p,{className:at("chakra-form__label",a.className),__css:cy({display:"block",textAlign:"start"},i)}),o,null!=d&&d.isRequired?l:c)})),_y=ui((function(t,r){var n=gy(),i=$n();if(null==n||!n.isRequired)return null;var a=at("chakra-form__required-indicator",t.className);return e.createElement(pi.span,cy({},null==n?void 0:n.getRequiredIndicatorProps(t,r),{__css:i.requiredIndicator,className:a}))}));function Ay(){return Ay=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ay.apply(this,arguments)}function My(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var Ey=["htmlSize"],Cy=ui((function(t,r){var n=t.htmlSize,i=My(t,Ey),a=di("Input",i),o=function(e){var t=function(e){var t,r,n,i=gy(),a=e.id,o=e.disabled,s=e.readOnly,l=e.required,u=e.isRequired,c=e.isInvalid,h=e.isReadOnly,d=e.isDisabled,p=e.onFocus,f=e.onBlur,m=hy(e,by),g=e["aria-describedby"]?[e["aria-describedby"]]:[];return null!=i&&i.hasFeedbackText&&null!=i&&i.isInvalid&&g.push(i.feedbackId),null!=i&&i.hasHelpText&&g.push(i.helpTextId),cy({},m,{"aria-describedby":g.join(" ")||void 0,id:null!=a?a:null==i?void 0:i.id,isDisabled:null!=(t=null!=o?o:d)?t:null==i?void 0:i.isDisabled,isReadOnly:null!=(r=null!=s?s:h)?r:null==i?void 0:i.isReadOnly,isRequired:null!=(n=null!=l?l:u)?n:null==i?void 0:i.isRequired,isInvalid:null!=c?c:null==i?void 0:i.isInvalid,onFocus:st(null==i?void 0:i.onFocus,p),onBlur:st(null==i?void 0:i.onBlur,f)})}(e),r=t.isDisabled,n=t.isInvalid,i=t.isReadOnly,a=t.isRequired;return cy({},hy(t,xy),{disabled:r,readOnly:i,required:a,"aria-invalid":it(n),"aria-required":it(a),"aria-readonly":it(i)})}(ti(i)),s=at("chakra-input",t.className);return e.createElement(pi.input,Ay({size:n},o,{__css:a.field,ref:r,className:s}))}));Cy.id="Input";var Ty=["placement"],Dy={left:{marginEnd:"-1px",borderEndRadius:0,borderEndColor:"transparent"},right:{marginStart:"-1px",borderStartRadius:0,borderStartColor:"transparent"}},Ly=pi("div",{baseStyle:{flex:"0 0 auto",width:"auto",display:"flex",alignItems:"center",whiteSpace:"nowrap"}}),Py=ui((function(t,r){var n,i=t.placement,a=void 0===i?"left":i,o=My(t,Ty),s=null!=(n=Dy[a])?n:{},l=$n();return e.createElement(Ly,Ay({ref:r},o,{__css:Ay({},l.addon,s)}))}));ui((function(t,r){return e.createElement(Py,Ay({ref:r,placement:"left"},t,{className:at("chakra-input__left-addon",t.className)}))})).id="InputLeftAddon",ui((function(t,r){return e.createElement(Py,Ay({ref:r,placement:"right"},t,{className:at("chakra-input__right-addon",t.className)}))})).id="InputRightAddon";var Ry=["placement"],Oy=["className"],ky=["className"],Iy=pi("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",top:"0",zIndex:2}}),By=ui((function(t,r){var n,i,a,o=t.placement,s=void 0===o?"left":o,l=My(t,Ry),u=$n(),c=u.field,h=Ay(((a={})["left"===s?"insetStart":"insetEnd"]="0",a.width=null!=(n=null==c?void 0:c.height)?n:null==c?void 0:c.h,a.height=null!=(i=null==c?void 0:c.height)?i:null==c?void 0:c.h,a.fontSize=null==c?void 0:c.fontSize,a),u.element);return e.createElement(Iy,Ay({ref:r,__css:h},l))}));By.id="InputElement",ui((function(t,r){var n=t.className,i=My(t,Oy),a=at("chakra-input__left-element",n);return e.createElement(By,Ay({ref:r,placement:"left",className:a},i))})).id="InputLeftElement",ui((function(t,r){var n=t.className,i=My(t,ky),a=at("chakra-input__right-element",n);return e.createElement(By,Ay({ref:r,placement:"right",className:a},i))})).id="InputRightElement";var zy=i(568),Ny=i.n(zy);var Fy=function(e){return(0,Nv.jsxs)(Nv.Fragment,{children:[" ",(0,Nv.jsxs)(Uv,{children:[(0,Nv.jsx)(pu,{marginTop:"-999px",id:"test",to:"/thanks",children:"asdfajhdflkt"}),(0,Nv.jsxs)("form",{style:{position:"relative",alignItems:"center",marginTop:"-66px"},id:"badge-form",onSubmit:function(t){return t.preventDefault(),setTimeout((r=document.getElementById("test"),setTimeout((function(){return r.click()}),600)),e.handleSend(),100);var r},children:[" ",(0,Nv.jsxs)(Yu,{spacing:4,children:[(0,Nv.jsx)(Bu,{as:"h1",size:"2xl",isTruncated:!0,color:"white",children:" JOIN US!  "}),(0,Nv.jsx)(ly,{size:"lg",name:e.formValues.firsName,src:""==!e.formValues.email?(t=e.formValues.email,r=t,n=Ny()(r),"https://www.gravatar.com/avatar/".concat(n,"?d=identicon")):e.formValues.avatar}),(0,Nv.jsxs)(Yu,{spacing:"40px",children:[(0,Nv.jsxs)(yy,{children:[(0,Nv.jsx)(Sy,{htmlFor:"email",color:"khaki",children:"Email address"}),(0,Nv.jsx)(Cy,{placeholder:"Insert you email",color:"white",htmlSize:22,width:"auto",size:"sm",id:"email",type:"email",isRequired:!0,name:"email",autoFocus:!0,rounded:"full",onChange:e.onChange,value:e.formValues.email}),(0,Nv.jsx)(Sy,{color:"khaki",htmlFor:"firstname",mt:1,children:"Firstname"}),(0,Nv.jsx)(Cy,{placeholder:"Insert you firstname",color:"white",htmlSize:22,width:"auto",size:"sm",id:"firstname",type:"text",rounded:"full",name:"firstname",isRequired:!0,onChange:e.onChange,value:e.formValues.firstname}),(0,Nv.jsx)(Sy,{color:"khaki",htmlFor:"lastname",mt:1,children:"Lastname"}),(0,Nv.jsx)(Cy,{placeholder:"Insert you lastname",color:"white",htmlSize:22,width:"auto",size:"sm",id:"lastname",type:"text",rounded:"full",name:"lastname",isRequired:!0,onChange:e.onChange,value:e.formValues.lastname}),(0,Nv.jsx)(Sy,{color:"khaki",htmlFor:"jobtitle",mt:1,children:" Job Title"}),(0,Nv.jsx)(Cy,{placeholder:"Insert you job title",color:"white",htmlSize:22,width:"auto",size:"sm",id:"jobtitle",type:"text",rounded:"full",name:"jobtitle",isRequired:!0,onChange:e.onChange,value:e.formValues.jobtitle}),(0,Nv.jsx)(Sy,{color:"khaki",htmlFor:"twitter",mt:1,children:"Twitter"}),(0,Nv.jsx)(Cy,{placeholder:"Insert twitter account",color:"white",htmlSize:22,width:"auto",size:"sm",id:"twitter",type:"text",name:"twitter",isRequired:!0,rounded:"full",onChange:e.onChange,value:e.formValues.twitter})," "]}),(0,Nv.jsx)(hc,{type:"submit",style:{marginTop:"24px"},colorScheme:"green",rounded:"full",_hover:{bg:"#FF0080",transform:"scale(1.04)"},_active:{border:"none",bg:"#7928CA",transform:"scale(0.96)",color:"black"},children:" REGISTER "})]})]})]})]})]});var t,r,n};function Uy(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function jy(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Uy(Object(r),!0).forEach((function(t){Hv(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Uy(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Hy=function(){var t=Gv(e.useState({form:{firstname:"",lastname:"",jobtitle:"",twitter:"",avatar:"https://yt3.ggpht.com/ytc/AKedOLQdlpe31mHzbnXIBmJYq_pSIRXtDIhbV-ihgvFq=s900-c-k-c0x00ffffff-no-rj",email:""}}),2),r=t[0],n=t[1];return(0,Nv.jsx)(Nv.Fragment,{children:(0,Nv.jsxs)(Mu,{h:"100vh",delay:1,css:Hv({background:"rgb(64,12,96)"},"background","linear-gradient(153deg, rgba(64,12,96,1) 7%, rgba(64,12,96,1) 77%, rgba(18,167,252,1) 90%, rgba(64,12,96,1) 96%)"),children:[" ",(0,Nv.jsxs)("section",{style:{height:"560px",width:"470px"},children:[qv(r.form),(0,Nv.jsx)(Fy,{onChange:function(e){n({form:jy(jy({},r.form),{},Hv({},e.target.name,e.target.value))})},formValues:r.form,handleSend:Wv})]})]})})},Vy=i(980),Gy=Object.defineProperty,Wy=Object.getOwnPropertySymbols,qy=Object.prototype.hasOwnProperty,Yy=Object.prototype.propertyIsEnumerable,Xy=(e,t,r)=>t in e?Gy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Qy=(e,t)=>{for(var r in t||(t={}))qy.call(t,r)&&Xy(e,r,t[r]);if(Wy)for(var r of Wy(t))Yy.call(t,r)&&Xy(e,r,t[r]);return e},Jy={exports:{}},Zy={},Ky=e,$y=Symbol.for("react.element"),ex=Symbol.for("react.fragment"),tx=Object.prototype.hasOwnProperty,rx=Ky.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,nx={key:!0,ref:!0,__self:!0,__source:!0};function ix(e,t,r){var n,i={},a=null,o=null;for(n in void 0!==r&&(a=""+r),void 0!==t.key&&(a=""+t.key),void 0!==t.ref&&(o=t.ref),t)tx.call(t,n)&&!nx.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===i[n]&&(i[n]=t[n]);return{$$typeof:$y,type:e,key:a,ref:o,props:i,_owner:rx.current}}Zy.Fragment=ex,Zy.jsx=ix,Zy.jsxs=ix,Jy.exports=Zy;const ax=Jy.exports.jsx,ox=(0,e.forwardRef)((({scene:t,id:r,style:n,className:i,onMouseDown:a,onMouseUp:o,onMouseHover:s,onKeyDown:l,onKeyUp:u,onStart:c,onLookAt:h,onFollow:d,onWheel:p,onLoad:f,autoRender:m=!1},g)=>{const v=(0,e.useRef)(null),[y,x]=(0,e.useState)(!0);return(0,e.useEffect)((()=>{let e;x(!0);const r=[{name:"mouseDown",cb:a},{name:"mouseUp",cb:o},{name:"mouseHover",cb:s},{name:"keyDown",cb:l},{name:"keyUp",cb:u},{name:"start",cb:c},{name:"lookAt",cb:h},{name:"follow",cb:d},{name:"scroll",cb:p}];if(v.current){async function n(){await e.load(t);for(let t of r)t.cb&&e.addEventListener(t.name,t.cb);x(!1),null==f||f(e)}e=new Vy.M(v.current,{autoRender:m}),n()}return()=>{for(let t of r)t.cb&&e.removeEventListener(t.name,t.cb);e.dispose()}}),[t]),ax("div",{style:Qy({display:y?"none":"flex"},n),className:i,ref:g,children:ax("canvas",{ref:v,id:r})})}));var sx=function(e){var t=e.children,r=e.delay,n=void 0===r?1:r;return(0,Nv.jsx)(Nv.Fragment,{children:(0,Nv.jsx)(zv.div,{initial:{y:-30,opacity:0},animate:{y:0,opacity:1},exit:{y:20,opacity:0},transition:{duration:.4,delay:n,type:"easeInOut"},children:t})})};function lx(e){return(0,Nv.jsx)(ox,{style:{objectFit:"contain",margin:"-80px"},scene:e})}function ux(){var t=Gv(e.useState(null),2),r=t[0],n=t[1],i=Gv(e.useState(null),2),a=i[0],o=i[1],s=e.useMemo((function(){return lx("https://prod.spline.design/Xou3jW30odCqnvND/scene.spline")}),[]),l=e.useMemo((function(){return lx("https://draft.spline.design/3xBCOgp3orbWGOlm/scene.spline")}),[]);return e.useEffect((function(){n(s),o(l)}),[r]),(0,Nv.jsxs)(Nv.Fragment,{children:[(0,Nv.jsxs)(Bu,{as:"h1",position:"absolute",zIndex:"4",color:"whiteAlpha.600",fontSize:["1.4em","1.4em","2em","3em"],w:"100%",style:{margin:"auto",userSelect:"none",pointerEvents:"none"},mt:24,top:"80",userSelect:"none",children:[" Our concept is simple:",(0,Nv.jsx)("br",{}),"You think, we take care of the rest."]}),(0,Nv.jsxs)(Au,{as:"section",__css:Hv({padding:"0 20px",background:"purple"},"background","linear-gradient(90deg, rgba(64,12,96,1) 8%, rgba(64,12,96,1) 90%, rgba(18,167,252,1) 100%, rgba(64,12,96,1) 100%)"),children:[" ",(0,Nv.jsxs)(Yu,{spacing:4,mt:"2",maxW:"1300px",margin:"auto",children:[(0,Nv.jsxs)(Au,{style:{borderRadius:"80px 150px 20px 120px ",height:"500px",width:"80%",overflow:"hidden",display:"flex",alignItems:"left",justifyContent:"center",margin:"0 auto",marginTop:"40px",marginBottom:"100px",background:"transparent",outline:"2px solid white",boxShadow:"0px 20px 25px -5px #400c40, 0px 10px 10px -5px rgba(0, 0, 0, 0.04), 0px 2px 2px -2px rgba(0, 0, 0, 0.08)"},children:[(0,Nv.jsx)(tc,{size:"xl",mt:"38",ml:"calc(0px - var(--spinner-size) / 2)"}),(0,Nv.jsx)(sx,{delay:"1",children:r})]}),(0,Nv.jsxs)(Bu,{mt:[22,1,4],color:"#dbd0bf",sx:{filter:"blur(0.4px)"},fontSize:["1.4em","1.4em","2em","3em"],px:[48,4,4],fontWeight:"bolder",children:[" TRANSFORMING THE USER EXPERIENCE AND GENERATING VALUE THROUGH SOFTWARE DEVELOPMENT",(0,Nv.jsx)("br",{})]}),(0,Nv.jsxs)(Au,{style:{borderRadius:"410px 260px 480px 150px",height:"440px",width:"80%",paddingLeft:"100px",paddingRight:"100px",overflow:"hidden",display:"flex",justifyContent:"center",margin:"0 auto",marginTop:"100px",marginBottom:"140px",background:"transparent",boxShadow:"0px 20px 25px -5px #400c40, 0px 10px 10px -5px rgba(0, 0, 0, 0.04), 0px 2px 2px -2px rgba(0, 0, 0, 0.08)",outline:"2px solid white"},children:[" ",(0,Nv.jsxs)(Bu,{as:"h4",position:"absolute",texAlign:"left",mt:48,color:"whiteAlpha.600",fontSize:["1.4em","1.4em","2em","3em"],userSelect:"none",style:{userSelect:"none",pointerEvents:"none"},children:[" Web, iOS, Android",(0,Nv.jsx)("br",{})]}),a]})]})]})]})}function cx(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var hx=["icon","children"];function dx(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function px(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dx(Object(r),!0).forEach((function(t){Hv(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dx(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var fx=function(){return(0,Nv.jsx)(Nv.Fragment,{children:(0,Nv.jsxs)(Au,{pb:4,__css:Hv({padding:"0 20px",background:"purple"},"background","linear-gradient(-153deg, rgba(64,12,96,1) 7%, rgba(64,12,96,1) 77%, rgba(18,167,252,1) 90%, rgba(64,12,96,1) 96%)"),children:[" ",(0,Nv.jsxs)(Yu,{spacing:8,children:[(0,Nv.jsxs)(mx,{price:"400",plan:"Normal Plan",f:"blur(3.2px)",fi:"blur(3.2px)",children:[" ",(0,Nv.jsx)(vx,{})]}),(0,Nv.jsxs)(mx,{price:"1000",plan:"Premium PRO",f:"blur(3.2px)",children:[" ",(0,Nv.jsx)(vx,{})]}),(0,Nv.jsxs)(mx,{price:"2000",plan:"Premium Extra",children:[" ",(0,Nv.jsx)(vx,{})]})]}),(0,Nv.jsx)(Qu,{mx:[10,10,0,80],py:4,px:4,color:"white",children:"All prices are negotiable, everything depends on the scope of the project and in turn depends on many variables that are intrinsic to each specific project."})]})})},mx=function(e){var t=e.children,r=e.price,n=e.plan,i=e.f,a=e.fi,o={res:["1.4em","1.4em","2em","2em"],lay:["column","column","row"],Tali:["left","left","center"]};return(0,Nv.jsxs)(Nv.Fragment,{children:[" ",(0,Nv.jsx)(Uv,{children:(0,Nv.jsx)(Yu,{as:"section",overflow:"hidden",children:(0,Nv.jsxs)(Au,{as:"article",color:"white",fontSize:o.res,pt:"30px",mx:6,children:[(0,Nv.jsxs)(Bu,{color:"white",fontWeight:"extrabold",fontSize:[20,20,30],pb:2,children:[n," pricing for your business"]}),(0,Nv.jsx)(Qu,{fontSize:"0.6em",fontWeight:"medium",pb:6,children:"Plans that are carefully crafted to suit your business."}),(0,Nv.jsx)(Au,{as:"article",maxW:"870px",margin:"auto",borderRadius:"xl",overflow:"hidden",bg:"white",boxShadow:"0px 20px 25px -5px #400c40, 0px 10px 10px -5px rgba(0, 0, 0, 0.04), 0px 2px 2px -2px rgba(0, 0, 0, 0.08)",textAlign:o.Tali,color:"tomato",w:{base:"420px",sm:"420px",md:"740px",lg:"840px"},children:(0,Nv.jsxs)(Ru,{direction:o.lay,justifyContent:"center",pt:2,children:[(0,Nv.jsxs)(Au,{bg:"#F0EAFB",color:"black",py:"60px",h:"350px",w:{base:"420px",sm:"420px",md:"420px",lg:"420px"},direction:"column",margin:"auto",textAlign:"center",mt:-4,justifyContent:"center",overflow:"hidden",children:[(0,Nv.jsx)(Qu,{fontSize:"3xl",fontWeight:"extrabold",children:n}),(0,Nv.jsxs)(Bu,{as:"h3",fontSize:"6xl",mt:"4",children:["$",r]}),(0,Nv.jsx)(Qu,{fontSize:"medium",mt:"2",fontWeight:"medium",color:"#171923",children:"billed just one"}),(0,Nv.jsx)(pu,{to:"/register",children:(0,Nv.jsx)(hc,{textAlign:o.Tali,fontSize:"medium",size:"lg",px:"82px",fontWeight:"medium",colorScheme:"purple",mt:"6",mb:"8",borderRadius:"3xl",boxShadow:"md",sx:{backdropFilter:"blur(10px)",boxShadow:"0px 0px 4px purple"},children:"Get started"})})]}),(0,Nv.jsxs)(Au,{w:"440px",margin:"auto",color:"black",borderRadius:"xl",pb:8,children:[(0,Nv.jsx)(Qu,{fontSize:"0.6em",fontWeight:"medium",px:"40px",mt:4,children:"Access these features when you get this pricing package for your business."}),(0,Nv.jsxs)(Au,{color:"black",textAlign:"left",mt:5,children:[(0,Nv.jsxs)(Qu,{fontSize:"0.6em",fontWeight:"medium",px:8,mt:8,ml:4,children:[(0,Nv.jsx)(pc,{color:"purple",mt:-1})," International calling API"]}),(0,Nv.jsxs)(Qu,{fontSize:"0.6em",fontWeight:"medium",px:8,mt:4,ml:4,children:[(0,Nv.jsx)(pc,{color:"purple",mt:-1})," Design for many screens"]}),(0,Nv.jsxs)(Qu,{fontSize:"0.6em",fontWeight:"medium",px:8,mt:4,ml:4,children:[(0,Nv.jsx)(pc,{color:"purple",mt:-1,sx:{filter:a}})," Automated messages via Slack"]}),(0,Nv.jsxs)(Qu,{fontSize:"0.6em",fontWeight:"medium",px:8,mt:4,ml:4,children:[(0,Nv.jsx)(pc,{color:"purple",mt:-1,sx:{filter:i}})," 24/7 Support and consulting"]})]})]})]})}),t]})})})," "]})};function gx(e){var t=e.icon,r=e.children,n=cx(e,hx);return(0,Nv.jsxs)(qu,px(px({},n),{},{spacing:"8",pb:6,children:[(0,Nv.jsx)(vu,{as:t,boxSize:"12"}),(0,Nv.jsx)(Qu,{textAlign:"left",fontSize:"lg",fontWeight:"bold",children:r})]}))}function vx(){return(0,Nv.jsx)(Au,{maxW:"1024px",m:"auto",pt:"30px",pb:"8",as:"section",children:(0,Nv.jsxs)(Wu,{px:"12",spacing:"5",color:"white",direction:["column","column","row"],pl:[0,10,24,20],children:[(0,Nv.jsx)(gx,{icon:yx,children:"30 days money back Guarantee"}),(0,Nv.jsx)(gx,{icon:xx,children:"No setup fees 100% hassle-free"}),(0,Nv.jsx)(gx,{icon:bx,children:"Scalability and performance for monthly subscription for unlimited users"})]})})}function yx(e){var t=ae({},e);return(0,Nv.jsxs)("svg",px(px({},t),{},{width:"46",height:"46",viewBox:"0 0 46 46",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,Nv.jsx)("path",{d:"M23 11L26.09 17.262L33 18.266L28 23.14L29.18 30.022L23 26.772L16.82 30.022L18 23.14L13 18.266L19.91 17.262L23 11Z",fill:"#652CD3"}),(0,Nv.jsx)("path",{d:"M23 43C23 43 3 35 3 9L23 3L43 9C43 35 23 43 23 43Z",stroke:"#CBD5E0","stroke-width":"4.8","stroke-miterlimit":"10","stroke-linecap":"square"})]}))}function xx(e){var t=ae({},e);return(0,Nv.jsxs)("svg",px(px({},t),{},{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,Nv.jsx)("path",{d:"M2.37256 24.4434L6.37256 37.1384C6.43786 37.3473 6.54396 37.5412 6.68471 37.7088C6.82547 37.8765 6.99808 38.0145 7.19256 38.115C9.5607 39.3452 12.1906 39.9861 14.8592 39.9834C15.7926 39.9741 16.7236 39.8872 17.6426 39.7234L2.37256 24.4434Z",fill:"#D1D5DB"}),(0,Nv.jsx)("path",{d:"M39.5112 22.155L17.8445 0.488333C17.532 0.175751 17.1082 9.43957e-05 16.6662 0C12.2474 0.00485266 8.01098 1.76236 4.88642 4.88691C1.76187 8.01147 0.00436438 12.2479 -0.000488281 16.6667C-0.000393886 17.1087 0.175263 17.5325 0.487845 17.845L22.1545 39.5117C22.467 39.8242 22.8909 39.9999 23.3328 40C27.7516 39.9951 31.988 38.2376 35.1126 35.1131C38.2372 31.9885 39.9947 27.7521 39.9995 23.3333C39.9994 22.8913 39.8238 22.4675 39.5112 22.155ZM11.6662 15C11.0069 15 10.3624 14.8045 9.81428 14.4382C9.26611 14.072 8.83887 13.5514 8.58658 12.9423C8.33429 12.3332 8.26828 11.663 8.39689 11.0164C8.52551 10.3698 8.84298 9.77582 9.30916 9.30964C9.77533 8.84347 10.3693 8.526 11.0159 8.39738C11.6625 8.26876 12.3327 8.33478 12.9418 8.58707C13.5509 8.83936 14.0715 9.2666 14.4377 9.81477C14.804 10.3629 14.9995 11.0074 14.9995 11.6667C14.9995 12.5507 14.6483 13.3986 14.0232 14.0237C13.3981 14.6488 12.5502 15 11.6662 15ZM26.3328 26.3333L24.9345 30.8333L22.2128 26.985L17.4995 27.045L20.3195 23.2667L18.8062 18.805L23.2695 20.3183L27.0478 17.5L26.9878 22.2133L30.8328 24.935L26.3328 26.3333Z",fill:"#652CD3"})]}))}function bx(e){var t=ae({},e);return(0,Nv.jsxs)("svg",px(px({},t),{},{width:"40",height:"42",viewBox:"0 0 40 42",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,Nv.jsx)("path",{d:"M30.6314 33.7154L33.2841 36.2009C36.3532 32.9245 36.6587 32.4773 38.6114 28.4518L35.3405 26.8645C33.5532 30.5464 33.4314 30.7245 30.6314 33.7154Z",fill:"#D1D5DB"}),(0,Nv.jsx)("path",{d:"M18.5928 37.5174L18.6819 41.1519C23.4365 41.0356 24.1947 40.8901 28.6056 39.2828L27.3601 35.8665C23.3401 37.3301 22.9492 37.4101 18.5928 37.5174Z",fill:"#D1D5DB"}),(0,Nv.jsx)("path",{d:"M7.05381 31.2517L4.45563 33.7954C7.79563 37.2045 8.45381 37.6917 12.7393 39.8317L14.3665 36.579C10.4756 34.6372 10.1065 34.3717 7.05381 31.2517Z",fill:"#D1D5DB"}),(0,Nv.jsx)("path",{d:"M3.63545 19.2954H-0.000915527C-0.000915527 23.8827 0.0972662 24.5009 1.47181 28.8409L4.93727 27.7427C3.67908 23.77 3.63545 23.4791 3.63545 19.2954Z",fill:"#D1D5DB"}),(0,Nv.jsx)("path",{d:"M10.1273 8.08272C12.9582 5.93181 16.3836 4.74999 20 4.74999C29.0236 4.74999 36.3636 12.09 36.3636 21.1136C36.3636 21.49 36.3327 21.8573 36.3073 22.2264L39.9145 22.79C39.9618 22.2354 40 21.6791 40 21.1136C40 10.0864 31.0273 1.11363 20 1.11363C15.3727 1.11363 10.9873 2.6809 7.44181 5.55363L2.42363 0.848175L1.24908 14.6373L15.0745 12.7064L10.1273 8.08272Z",fill:"#652CD3"})]}))}var wx=rt?e.useLayoutEffect:e.useEffect;function Sx(t){var r=Gt(),n=Array.isArray(t)?t:[t],i=rt&&"matchMedia"in r.window,a=e.useState(n.map((function(e){return!!i&&!!r.window.matchMedia(e).matches}))),o=a[0],s=a[1];return wx((function(){if(i){var e=n.map((function(e){return r.window.matchMedia(e)})),t=e.map((function(t,r){var n=function(t){var r=e.findIndex((function(e){return e.media===t.media}));s((function(e){var n=e.map((function(e){return e}));return n[r]=t.matches,n}))};return"function"==typeof e[r].addEventListener?e[r].addEventListener("change",n):e[r].addListener(n),n}));return function(){e.forEach((function(r,n){"function"==typeof e[n].removeEventListener?e[n].removeEventListener("change",t[n]):e[n].removeListener(t[n])}))}}}),[]),o}function _x(e,t,r){void 0===r&&(r=dt);var n=Object.keys(e).indexOf(t);if(-1!==n)return e[t];for(var i=r.indexOf(t);i>=0;){if(null!=e[r[i]]){n=i;break}i-=1}return-1!==n?e[r[n]]:void 0}function Ax(t,r){var n,i=function(t){void 0===t&&(t="base");var r=Jn().__breakpoints,n=Gt(),i=e.useMemo((function(){var e;return null!=(e=null==r?void 0:r.details.map((function(e){var t=e.minMaxQuery;return{breakpoint:e.breakpoint,query:t.replace("@media screen and ","")}})))?e:[]}),[r]),a=e.useState((function(){if(t){var e=i.find((function(e){return e.breakpoint===t}));if(e)return e.breakpoint}if(n.window.matchMedia){var r=i.find((function(e){var t=e.query;return n.window.matchMedia(t).matches}));if(r)return r.breakpoint}})),o=a[0],s=a[1];return e.useEffect((function(){var e=i.map((function(e){var t=e.breakpoint,r=e.query,i=n.window.matchMedia(r);i.matches&&s(t);var a=function(e){e.matches&&s(t)};return"function"==typeof i.addEventListener?i.addEventListener("change",a):i.addListener(a),function(){"function"==typeof i.removeEventListener?i.removeEventListener("change",a):i.removeListener(a)}}));return function(){e.forEach((function(e){return e()}))}}),[i,r,n.window]),o}(r),a=Jn();if(i){var o=Array.from((null==(n=a.__breakpoints)?void 0:n.keys)||[]);return _x(Be(t)?Qe(Object.entries(ft(t,o)).map((function(e){return[e[0],e[1]]}))):t,i,o)}}var Mx=i(712),Ex=["dis","children","isLast","to"],Cx=["children"];function Tx(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Dx(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Tx(Object(r),!0).forEach((function(t){Hv(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tx(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Lx=function(t){var r=Gv(e.useState(!1),2),n=r[0],i=r[1];return(0,Nv.jsxs)(Bx,Dx(Dx({},t),{},{sx:{backdropFilter:"blur(40px)"},boxShadow:"md",children:[(0,Nv.jsx)(kx,{to:"/",_hover:{color:"crimson"},children:(0,Nv.jsxs)(qu,{children:[(0,Nv.jsx)($v,{boxSize:"60px",objectFit:"cover",src:Mx,alt:"logoNm",className:"imgSpinner"}),(0,Nv.jsx)(Qu,{bgGradient:"linear(to-l, #7928CA, #FF0080)",display:["inline","inline","inline"],bgClip:"text",fontSize:"2xl",_hover:{bgGradient:"linear(to-l, #f04, #7928CA)"},children:"Keep it simple"})]})}),(0,Nv.jsx)(Ox,{toggle:function(){return i(!n)},isOpen:n}),(0,Nv.jsx)(Ix,{isOpen:n})]}))},Px=function(e){var t=e.w,r=void 0===t?"24px":t,n=e.h,i=void 0===n?"24px":n;return(0,Nv.jsxs)("svg",{width:r,height:i,viewBox:"0 0 18 18",xmlns:"http://www.w3.org/2000/svg",children:[(0,Nv.jsx)("title",{children:"Close"}),(0,Nv.jsx)("path",{fill:"white",d:"M9.00023 7.58599L13.9502 2.63599L15.3642 4.04999L10.4142 8.99999L15.3642 13.95L13.9502 15.364L9.00023 10.414L4.05023 15.364L2.63623 13.95L7.58623 8.99999L2.63623 4.04999L4.05023 2.63599L9.00023 7.58599Z"})]})},Rx=function(e){var t=e.w,r=void 0===t?"24px":t,n=e.h,i=void 0===n?"24px":n;return(0,Nv.jsxs)("svg",{width:r,height:i,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",fill:"white",children:[" ",(0,Nv.jsx)("title",{children:"Menu"}),(0,Nv.jsx)("path",{d:"M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"})]})},Ox=function(e){var t=e.toggle,r=e.isOpen;return(0,Nv.jsx)(Au,{display:{base:"block",md:"none"},onClick:t,css:{cursor:"pointer",outline:"1px solid grey",padding:"13px",borderRadius:"100%"},_hover:{backdropFilter:"blur(10px)",filter:"contrast(0.8)",transform:"scale(1.1)"},children:r?(0,Nv.jsx)(Px,{h:16,w:16}):(0,Nv.jsx)(Rx,{h:16,w:16})})},kx=function(e){var t=e.dis,r=void 0===t?"flex":t,n=e.children,i=(e.isLast,e.to),a=void 0===i?"/":i,o=cx(e,Ex);return(0,Nv.jsx)(pu,{to:a,children:(0,Nv.jsx)(Qu,Dx(Dx({display:r},o),{},{children:n}))})},Ix=function(e){var t=e.isOpen,r={con:{filter:"contrast(0.7)"},und:{textDecoration:"underline"},dis:["none","none","none"]};return(0,Nv.jsxs)(Au,{display:{base:t?"block":"none",md:"block"},flexBasis:{base:"100%",md:"auto"},children:[" ",(0,Nv.jsxs)(Wu,{spacing:8,align:"center",justify:["center","space-between","flex-end","flex-end"],direction:["column","row","row","row"],pt:[4,4,0,0],fontWeight:"bolder",fontSize:"lg",children:[" ",(0,Nv.jsx)(kx,{to:"/about",sx:r.con,_hover:r.und,children:"About "}),(0,Nv.jsx)(kx,{to:"/features",sx:r.con,_hover:r.und,children:"Features "}),(0,Nv.jsx)(kx,{to:"/pricing",sx:r.con,_hover:r.und,children:"Pricing "}),(0,Nv.jsx)(kx,{to:"/register",isLast:!0,children:(0,Nv.jsx)(hc,{size:"sm",rounded:"full",colorScheme:"whiteAlpha",color:["primary.500","primary.500","white","white"],_hover:{color:"black",bg:["primary.100","primary.100","white"]},children:" Create Account"})})]})]})},Bx=function(e){var t=e.children,r=cx(e,Cx);return(0,Nv.jsxs)(Ru,Dx(Dx({as:"nav",align:"center",py:"2",w:"100%",justify:["space-between","space-between","space-evenly"],position:"sticky",top:"0",zIndex:"999",wrap:"wrap",px:["48","9","9"],color:["white","white","primary.700","primary.700"]},r),{},{children:[" ",t," "]}))},zx=function(){var e=ir("white","white"),t=ir("gray.500","whiteAlpha.600");return(0,Nv.jsx)(Nv.Fragment,{children:(0,Nv.jsxs)(Yu,{pb:4,as:"footer",alignItems:"center",position:"relative",zIndex:"4",sx:{backdropFilter:"blur(40px)"},fontSize:["sm","sm","lg"],children:[(0,Nv.jsx)(Lu,{style:{border:"none"}}),(0,Nv.jsxs)(Wu,{w:"100%",alignItems:"center",direction:{base:"column",md:"row"},justifyContent:{base:"center",md:"space-between"},children:[" ",(0,Nv.jsxs)(Qu,{color:e,margin:"auto",children:["Copyright  2019"," ","-"," ",(new Date).getFullYear(),"  Rodrigo Moreno  All Rights Reserved"]})]}),(0,Nv.jsxs)(qu,{justifyContent:"space-between",zIndex:"40",divider:(0,Nv.jsx)(Qu,{color:"gray.500",mx:2,children:""}),children:[" ",(0,Nv.jsxs)(qu,{justifyContent:"space-between",divider:(0,Nv.jsx)(Qu,{color:"gray.500",mx:2,children:""}),children:[(0,Nv.jsx)(Nu,{isExternal:!0,href:"https://twitter.com/cheatmodes4",children:(0,Nv.jsx)(Qu,{color:t,children:"Twitter"})}),(0,Nv.jsx)(Nu,{isExternal:!0,href:"https://github.com/rroderickk",children:(0,Nv.jsx)(Qu,{color:t,children:"Github"})}),(0,Nv.jsx)(Nu,{isExternal:!0,href:"mailto:webdevsimpl@gmail.com",children:(0,Nv.jsx)(Qu,{color:t,children:"Email"})})]})]})]})})},Nx={textAlign:"center",backgroundColor:"#400c60",minHeight:"100vh",padding:"0px 0px",minWidth:"280px",maxWidth:"100vw",overflow:"hidden"},Fx=function(e){var t=e.children,r=Gv(Sx("(max-width: 768px)"),1)[0];return(0,Nv.jsxs)(Nv.Fragment,{children:[" ",(0,Nv.jsx)(Lx,{}),(0,Nv.jsxs)("main",{className:"Layout",style:Nx,children:[t,(0,Nv.jsxs)("footer",{children:[(0,Nv.jsxs)(hc,{rounded:"full",color:"white",style:{background:"transparent",backdropFilter:"blur(13px)",position:"absolute",bottom:"40px",right:"80px",width:"10px",zIndex:"5",transform:r?"translate(40px, -40px)":"translate(0px, 0px)"},_hover:{backdropFilter:"blur(180px)",filter:"contrast(0.8) saturate(1400%)",transform:"scale(1.3)"},onClick:function(){return window.scroll({top:0,left:0,behavior:"smooth"})},children:[(0,Nv.jsx)(mc,{color:"cyan"})," "]}),(0,Nv.jsx)(zx,{})]})]})]})},Ux=function(){return setTimeout((function(){window.location.href="https://keepsimpleweb.github.io/"}),4e3),(0,Nv.jsx)(Nv.Fragment,{children:(0,Nv.jsx)(Uv,{children:(0,Nv.jsxs)(Au,{as:"section",style:{height:"100vh",width:"100%",justifyContent:"center",display:"flex",flexDirection:"column",alignItems:"center"},children:[" ",(0,Nv.jsx)(Bu,{style:{backgroundColor:"#400c60",fontWeight:"bold",color:"white",marginTop:"-40rx"},children:"Thanks for trusting us!"}),(0,Nv.jsx)(Qu,{color:"white",children:"Soon you will be contacted"})]})})})};function jx(t){var r=t.param,n=Gv(e.useState(null),2),i=n[0],a=n[1],o=e.useMemo((function(){return function(e){return(0,Nv.jsx)(ox,{scene:e})}(r)}),[]);return e.useEffect((function(){return a(o)}),[i]),(0,Nv.jsx)(Nv.Fragment,{children:(0,Nv.jsx)(Au,{ml:[-2,-2,-48],css:{zIndex:"-1",width:"800px",height:"300px",objectFit:"contain",position:"absolute",marginTop:"-200px"},children:"null"==i?(0,Nv.jsx)(tc,{size:"xl",mt:undefined,ml:"calc(0px - var(--spinner-size) / 2)"}):i})})}var Hx,Vx=i(585),Gx=function(){var e={res:["1.4em","1.4em","2em","2em"],lay:["column","column","row"],Tali:["left","left","center"]};return(0,Nv.jsx)(Nv.Fragment,{children:(0,Nv.jsxs)(Uv,{children:[(0,Nv.jsx)(Yu,{as:"section",overflow:"hidden",h:"100%",mb:48,children:(0,Nv.jsxs)(Au,{as:"article",color:"white",fontSize:e.res,pt:"10px",mx:6,children:[(0,Nv.jsxs)(Bu,{color:"white",fontWeight:"extrabold",pb:2,mt:8,children:["About us",(0,Nv.jsx)(Lu,{pb:2,w:"50%",m:"auto",mt:"-2",mb:"1"})]}),(0,Nv.jsx)(Qu,{fontSize:"0.5em",fontWeight:"medium",pb:0,ml:"-8.4px",children:"Wellcome to"}),(0,Nv.jsx)(Au,{as:"article",maxW:"890px",margin:"auto",borderRadius:"xl",overflow:"hidden",bg:"whiteAlpha.500",sx:{backdropFilter:"blur(10px)"},textAlign:e.Tali,color:"tomato",w:{base:"420px",sm:"420px",md:"740px",lg:"840px"},children:(0,Nv.jsxs)(Ru,{direction:e.lay,justifyContent:"center",pt:2,children:[(0,Nv.jsx)(Au,{bg:"#F0EAFB",color:"black",pt:"27px",h:"440px",w:{base:"520px",sm:"520px",md:"520px",lg:"540px"},direction:"column",margin:"auto",textAlign:"center",mt:-4,justifyContent:"center",overflow:"hidden",zIndex:"4",boxShadow:"0px 5px 5px -5px #400c40, 0px 35px 35px 8px rgba(0, 0, 0, 0.04), 10px 6px 9px -2px rgba(0, 0, 0, 0.08)",children:(0,Nv.jsxs)(Qu,{fontSize:"medium",textAlign:"left",lineHeight:"1.6",mt:"5",fontWeight:"medium",color:"#171923",ml:"8",maxW:"370px",children:[" ",(0,Nv.jsx)("strong",{children:"Keeple"})," Indie. is a software development company dedicated to supporting, transforming and expanding the products of the ",(0,Nv.jsx)("b",{children:"Keeple"})," Growth portfolio companies. In keeping with ",(0,Nv.jsx)("b",{children:"Keeple Growth's mission to revolutionize the concept of Smart Capital, Keeple focuses on providing quality services for all of its clients' technology needs."}),"  By creating a structure of transparency and excellence, our technology experts have had the opportunity to become an extension of our clients' team. Thanks to the adaptability and knowledge of our teams, we have created a perfect synergy with our clients; helping them become market-leading, capital-efficient companies."]})}),(0,Nv.jsxs)(Au,{w:"440px",margin:"auto",color:"black",borderRadius:"xl",pb:8,userSelect:"none",style:{userSelect:"none",pointerEvents:"none"},children:[(0,Nv.jsx)(Qu,{bgGradient:"linear(to-l, #7928CA, #FF0080)",bgClip:"text",fontSize:"3xl",fontWeight:"bolder",w:"100%",textAlign:"left",pl:"8",mt:"4",children:"Keep it simple"}),(0,Nv.jsx)(jx,{param:"https://prod.spline.design/XDVWIbR5S0TxY1mh/scene.spline"}),(0,Nv.jsxs)(Au,{color:"black",textAlign:"left",mt:2,zIndex:"4",children:[(0,Nv.jsxs)(Qu,{fontSize:"0.6em",fontWeight:"medium",px:8,mt:8,ml:4,children:[(0,Nv.jsx)(pc,{color:"whiteAlpha.600",mt:-1})," Fast"]}),(0,Nv.jsxs)(Qu,{fontSize:"0.6em",fontWeight:"medium",px:8,mt:4,ml:4,children:[(0,Nv.jsx)(pc,{color:"whiteAlpha.600",mt:-1})," Powerfull"]}),(0,Nv.jsxs)(Qu,{fontSize:"0.6em",fontWeight:"medium",px:8,mt:4,ml:4,children:[(0,Nv.jsx)(pc,{color:"whiteAlpha.600",mt:-1})," Strong"]}),(0,Nv.jsxs)(Qu,{fontSize:"0.6em",fontWeight:"medium",px:8,mt:4,ml:4,children:[(0,Nv.jsx)(pc,{color:"whiteAlpha.600",mt:-1})," 24/7 Support"]})]})]})]})}),(0,Nv.jsxs)(Qu,{fontSize:"0.5em",fontWeight:"normal",pb:"16",children:["At ",(0,Nv.jsx)("strong",{children:"Keeple"}),", our passion is ",(0,Nv.jsx)("strong",{children:"quality."})]})]})}),(0,Nv.jsx)(Au,{mt:48}),(0,Nv.jsxs)(Au,{as:"article",color:"white",fontSize:e.res,pt:"10px",mt:"-48",mx:6,mb:"16",children:[(0,Nv.jsxs)(Bu,{color:"gray.300",fontWeight:"extrabold",pb:2,mt:8,children:["Why quality?",(0,Nv.jsx)(Lu,{pb:2,w:"50%",borderColor:"purple",m:"auto",mt:"-2",mb:"1"})]}),(0,Nv.jsx)(Qu,{fontSize:"0.5em",fontWeight:"bolder",pb:0,ml:"-8.4px",children:"Quality is paramount"}),(0,Nv.jsx)(Au,{as:"article",maxW:"890px",margin:"auto",bg:"transparent",borderRadius:"xl",overflow:"hidden",sx:{backdropFilter:"blur(10px)"},textAlign:e.Tali,w:{base:"420px",sm:"420px",md:"740px",lg:"840px"},children:(0,Nv.jsxs)(Ru,{direction:e.lay,justifyContent:"center",pt:2,children:[(0,Nv.jsx)(Au,{pt:"27px",h:"380px",w:{base:"520px",sm:"520px",md:"520px",lg:"540px"},direction:"column",margin:"auto",textAlign:"center",mt:-4,justifyContent:"center",overflow:"hidden",zIndex:"4",boxShadow:"0px 5px 5px -5px #400c40, 0px 35px 35px 8px rgba(0, 0, 0, 0.04), 10px 6px 9px -2px rgba(0, 0, 0, 0.08)",bg:"whiteAlpha.100",style:{borderRadius:"40px 40px 900px 40px"},sx:{backdropFilter:"blur(40px)"},children:(0,Nv.jsxs)(Qu,{fontSize:"medium",textAlign:"left",lineHeight:"1.6",ml:"14",mt:"8",color:"whiteAlpha.800",maxW:"300px",children:[(0,Nv.jsx)("b",{children:"Great ideas"})," are the fuel of every good product. But through ",(0,Nv.jsx)("strong",{children:"quality-focused management,"})," we can transform these products and revolutionize the playing field. ",(0,Nv.jsx)("strong",{children:"Quality "}),"is the key to creating and maintaining a long-term revenue cycle because companies can increase user satisfaction; retaining customers and reducing costs related to defective functions."]})}),(0,Nv.jsx)(Au,{w:"440px",margin:"auto",color:"black",borderRadius:"xl",pb:8,userSelect:"none",style:{userSelect:"none",pointerEvents:"none"},children:(0,Nv.jsx)(Au,{color:"black",textAlign:"left",mt:2,zIndex:"4",children:(0,Nv.jsx)($v,{src:Vx,sx:{filter:"contrast(1.4)"},w:56,h:56,ml:["90px","90px","90px"],__css:{borderRadius:"100%"}})})})]})}),(0,Nv.jsxs)(Qu,{fontSize:"0.5em",fontWeight:"normal",children:["At ",(0,Nv.jsx)("strong",{children:"Keeple"})," we are characterized by ",(0,Nv.jsx)("b",{children:"authenticity."})]})]})]})})},Wx=["hero","opacity"];function qx(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Yx(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qx(Object(r),!0).forEach((function(t){Hv(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qx(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Xx,Qx,Jx=Pe(Hx||(Xx=["\n  from {transform: rotate(0deg);}\n  to {transform: rotate(120deg)}\n"],Qx||(Qx=Xx.slice(0)),Hx=Object.freeze(Object.defineProperties(Xx,{raw:{value:Object.freeze(Qx)}}))));function Zx(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Kx(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Zx(Object(r),!0).forEach((function(t){Hv(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zx(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var $x=["childrenOnRightSide","title","subtitle","isDark","children","bottomGradient","topGradient","id","mainAction","leftAlignedTitle","hero","subtitleMd","titleSm","paddingBottom","color","bg","y"];function eb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function tb(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eb(Object(r),!0).forEach((function(t){Hv(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eb(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var rb={animated:function(e){var t=e.hero,r=e.opacity,n=void 0===r?9.8:r,i=cx(e,Wx),a=Ax({base:!0,md:!1}),o=Sx("(prefers-reduced-motion: reduce)")[0];return(0,Nv.jsx)(Nv.Fragment,{children:(0,Nv.jsx)(_u,Yx(Yx({ratio:.5,zIndex:"-1",opacity:n||[1,1,.5]},i),{},{children:(0,Nv.jsx)(Nv.Fragment,{children:(0,Nv.jsx)(Mu,{overflow:"visible!important",children:(0,Nv.jsxs)(Au,{w:"60%",h:"60%",position:"relative",filter:a?"blur(100px)":"blur(150px)",overflow:"visible",animation:"true"!=t?o:"".concat(Jx," 5s ease-in-out alternate infinite"),children:[" ",(0,Nv.jsx)(Au,{w:"60%",h:"60%",position:"absolute",bg:"purple.500",top:"22%",left:"22%",transform:"translate(-50%, -50%)"}),(0,Nv.jsx)(Au,{w:"60%",h:"60%",position:"absolute",bg:"orange.500",top:"22%",right:"22%",transform:"translate(50%, -50%)"}),(0,Nv.jsx)(Au,{w:"60%",h:"60%",position:"absolute",bg:"primary.500",bottom:"22%",left:"22%",transform:"translate(-50%, 50%)"}),(0,Nv.jsx)(Au,{w:"60%",h:"60%",position:"absolute",bg:"red.500",bottom:"22%",right:"22%",transform:"translate(50%, 50%)"})]})})})}))})},static:function(e){var t=ae({},e),r=Ax({base:!0,md:!1});return(0,Nv.jsx)(Nv.Fragment,{children:(0,Nv.jsx)(_u,Kx(Kx({ratio:1298/468},t),{},{children:(0,Nv.jsx)(Au,{overflow:"visible!important",bg:"linear-gradient(180deg, #0098EE 0%, #FF1CCD 140.5%)",opacity:[.5,.5,.2],filter:r?"blur(100px)":"blur(200px)",borderRadius:"full"})}))})}},nb=function(t){var r=t.childrenOnRightSide,n=t.title,i=t.subtitle,a=t.isDark,o=t.children,s=t.bottomGradient,l=t.topGradient,u=t.id,c=t.mainAction,h=t.leftAlignedTitle,d=t.hero,p=t.subtitleMd,f=t.titleSm,m=t.paddingBottom,g=t.color,v=t.bg,y=t.y,x=cx(t,$x),b=l?rb[l]:null,w=s?rb[s]:null,S=Ax({base:!0,md:!1}),_=e.useMemo((function(){return c&&c.MainActionButton}),[c]);return(0,Nv.jsx)(Nv.Fragment,{children:(0,Nv.jsxs)(Au,tb(tb({w:"100%",position:"relative",h:"220%",as:"section",overflow:"hidden",id:u,pb:m?[44,44,80]:[],mb:[0,16,16],pt:12},x),{},{children:[" ",(0,Nv.jsxs)(Cu,{position:"relative",zIndex:0,maxW:"container.page",py:["75px","75px","150px"],children:[" ",b&&(0,Nv.jsx)(b,{zIndex:-1,position:"absolute",top:0,left:"50%",w:"100%",transform:"translate(-50%, -66%)",hero:d,style:{top:"1000px"}}),(0,Nv.jsxs)(ju,tb(tb({columns:[1,1,r?2:1],spacing:[6,6,12]},y),{},{children:[" ",(0,Nv.jsxs)(Wu,{spacing:[6,6,8],align:r?"flex-start":"center",justifyContent:"center",children:[" ",(0,Nv.jsxs)(Ru,{align:"flex-end",justify:"space-between",w:"100%",children:[(0,Nv.jsx)(Cu,{maxW:"container.lg",px:0,children:(0,Nv.jsx)(Bu,{as:"h2",fontSize:["1.4em","1.4em","2em","3em"],w:["100%","100%",_&&!r?"50%":"100%"],color:g||"whiteAlpha.700",textAlign:_&&!S||h?"left":"center",size:d?"display.lg":f?"display.sm":"display.md",children:n})}),S||null!=c&&c.forceBelow?null:_]}),i&&(0,Nv.jsx)(Cu,{maxW:"container.lg",px:0,children:(0,Nv.jsx)(Bu,{as:"h3",textAlign:_&&!S?"left":"center",color:g||"whiteAlpha.600",size:p?"subtitle.md":"subtitle.lg",fontSize:["1em","1em","1em","1.5em"],fontWeight:"thin",px:[34,16,16],pb:[34,16,16],children:i})}),r?null:o,S||null!=c&&c.forceBelow?_:null]}),r?o:null]})),w&&(0,Nv.jsx)(w,{zIndex:-1,position:"absolute",bottom:0,left:"50%",w:"100%",transform:"translate(-50%, ".concat(d?"3%":"66%",")"),hero:d})]}),(0,Nv.jsx)(Au,{zIndex:1,bg:a?v:"transparent",position:"absolute",top:0,bottom:0,left:0,right:0,mixBlendMode:"multiply"})]}))})};function ib(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ab(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ib(Object(r),!0).forEach((function(t){Hv(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ib(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ob=function(e){return(0,Nv.jsx)(Nv.Fragment,{children:(0,Nv.jsx)(Ru,ab(ab({},e),{},{clipPath:{base:"polygon(0 0, 100% 4%, 100% 100%, 0% 100%)",md:"polygon(0 0, 100% 25%, 100% 100%, 0% 100%)"},h:"100%",w:"100%",align:"flex-end",bg:"blackAlpha.900",zIndex:9,boxShadow:"0px 0px 40px red",children:(0,Nv.jsxs)(yu,{position:"absolute",left:"50%",transform:"translateX(-50%)",h:"auto",flexGrow:1,w:{base:"300vw",md:"100vw"},maxW:"1920px",as:"svg",viewBox:"0 0 1920 774",xmlns:"http://www.w3.org/2000/svg",children:[(0,Nv.jsx)("path",{d:"M0 773.258h1920",stroke:"url(#paint0_linear_1641:2314)",strokeOpacity:1}),(0,Nv.jsx)("path",{d:"M0 583.361h1920",stroke:"url(#paint1_linear_1641:2314)",strokeOpacity:.3}),(0,Nv.jsx)("path",{d:"M206 773l242-190",stroke:"url(#paint2_linear_1641:2314)",strokeOpacity:1.3}),(0,Nv.jsx)("path",{d:"M467 773l161-189",stroke:"url(#paint3_linear_1641:2314)",strokeOpacity:.3}),(0,Nv.jsx)("path",{d:"M666 774l97-190",stroke:"url(#paint4_linear_1641:2314)",strokeOpacity:1}),(0,Nv.jsx)("path",{d:"M826 774l60-190",stroke:"url(#paint6_linear_1641:2314)",strokeOpacity:.3}),(0,Nv.jsx)("path",{d:"M973 586v188",stroke:"url(#paint7_linear_1641:2314)",strokeOpacity:.3}),(0,Nv.jsx)("path",{d:"M1313 584l165 194",stroke:"url(#paint8_linear_1641:2314)",strokeOpacity:.3}),(0,Nv.jsx)("path",{d:"M1172 584l97 190",stroke:"url(#paint9_linear_1641:2314)",strokeOpacity:1}),(0,Nv.jsx)("path",{d:"M1069 584l44 190",stroke:"url(#paint10_linear_1641:2314)",strokeOpacity:.3}),(0,Nv.jsxs)("defs",{children:[(0,Nv.jsxs)("linearGradient",{id:"paint0_linear_1641:2314",x1:960,y1:773.258,x2:960,y2:774.258,gradientUnits:"userSpaceOnUse",children:[(0,Nv.jsx)("stop",{stopColor:"#DD2FBE"}),(0,Nv.jsx)("stop",{offset:1,stopColor:"#0098EE"})]}),(0,Nv.jsxs)("linearGradient",{id:"paint1_linear_1641:2314",x1:960,y1:583.361,x2:960,y2:584.361,gradientUnits:"userSpaceOnUse",children:[(0,Nv.jsx)("stop",{stopColor:"#DD2FBE"}),(0,Nv.jsx)("stop",{offset:1,stopColor:"#0098EE"})]}),(0,Nv.jsxs)("linearGradient",{id:"paint2_linear_1641:2314",x1:327,y1:583,x2:327,y2:773,gradientUnits:"userSpaceOnUse",children:[(0,Nv.jsx)("stop",{stopColor:"#DD2FBE"}),(0,Nv.jsx)("stop",{offset:1,stopColor:"#0098EE"})]}),(0,Nv.jsxs)("linearGradient",{id:"paint3_linear_1641:2314",x1:547.5,y1:584,x2:547.5,y2:773,gradientUnits:"userSpaceOnUse",children:[(0,Nv.jsx)("stop",{stopColor:"#DD2FBE"}),(0,Nv.jsx)("stop",{offset:1,stopColor:"#0098EE"})]}),(0,Nv.jsxs)("linearGradient",{id:"paint4_linear_1641:2314",x1:714.5,y1:584,x2:714.5,y2:774,gradientUnits:"userSpaceOnUse",children:[(0,Nv.jsx)("stop",{stopColor:"#DD2FBE"}),(0,Nv.jsx)("stop",{offset:1,stopColor:"#0098EE"})]}),(0,Nv.jsxs)("linearGradient",{id:"paint5_linear_1641:2314",x1:856,y1:584,x2:856,y2:774,gradientUnits:"userSpaceOnUse",children:[(0,Nv.jsx)("stop",{stopColor:"#DD2FBE"}),(0,Nv.jsx)("stop",{offset:1,stopColor:"#0098EE"})]}),(0,Nv.jsxs)("linearGradient",{id:"paint6_linear_1641:2314",x1:1599,y1:583,x2:1599,y2:773,gradientUnits:"userSpaceOnUse",children:[(0,Nv.jsx)("stop",{stopColor:"#DD2FBE"}),(0,Nv.jsx)("stop",{offset:1,stopColor:"#0098EE"})]}),(0,Nv.jsxs)("linearGradient",{id:"paint7_linear_1641:2314",x1:973.5,y1:586,x2:973.5,y2:774,gradientUnits:"userSpaceOnUse",children:[(0,Nv.jsx)("stop",{stopColor:"#DD2FBE"}),(0,Nv.jsx)("stop",{offset:1,stopColor:"#0098EE"})]}),(0,Nv.jsxs)("linearGradient",{id:"paint8_linear_1641:2314",x1:1395.5,y1:584,x2:1395.5,y2:778,gradientUnits:"userSpaceOnUse",children:[(0,Nv.jsx)("stop",{stopColor:"#DD2FBE"}),(0,Nv.jsx)("stop",{offset:1,stopColor:"#0098EE"})]}),(0,Nv.jsxs)("linearGradient",{id:"paint9_linear_1641:2314",x1:1220.5,y1:584,x2:1220.5,y2:774,gradientUnits:"userSpaceOnUse",children:[(0,Nv.jsx)("stop",{stopColor:"#DD2FBE"}),(0,Nv.jsx)("stop",{offset:1,stopColor:"#0098EE"})]}),(0,Nv.jsxs)("linearGradient",{id:"paint10_linear_1641:2314",x1:1091,y1:584,x2:1091,y2:774,gradientUnits:"userSpaceOnUse",children:[(0,Nv.jsx)("stop",{stopColor:"#DD2FBE"}),(0,Nv.jsx)("stop",{offset:1,stopColor:"#0098EE"})]})]})]})}))})};function sb(e){return sb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sb(e)}var lb=["quality","layout","placeholder","src","alt","width","height","objectFit","objectPosition","priority","sizes"];function ub(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function cb(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ub(Object(r),!0).forEach((function(t){Hv(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ub(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var hb="undefined"!==("undefined"==typeof window?"undefined":sb(window));"undefined"==typeof document||sb(document);var db=pi($v,{shouldForwardProp:function(e){return["width","height","src","alt","quality","placeholder","blurDataURL","loader ","layout","sizes","onLoadingComplete","priority"].includes(e)}}),pb=new Set,fb=function(t){var r=t.quality,n=void 0===r?90:r,i=t.layout,a=void 0===i?"responsive":i,o=t.placeholder,s=void 0===o?"string"==typeof l?"empty":"blur":o,l=t.src,u=t.alt,c=t.width,h=(t.height,t.objectFit),d=t.objectPosition,p=t.priority,f=t.sizes,m=cx(t,lb),g=e.useMemo((function(){var e,t="string"==typeof t?t:(null==t||null===(e=t.default)||void 0===e?void 0:e.src)||(null==t?void 0:t.src)||"";return"".concat(t,"_w=").concat(c)}),[c,l]),v=f||(hb&&void 0!==c?"".concat(c/window.innerWidth*100,"vw"):"100vw");return(0,Nv.jsx)(Nv.Fragment,{children:(0,Nv.jsx)(Au,cb(cb({maxW:"100%",pos:"relative"},m),{},{children:(0,Nv.jsx)(db,{onLoadingComplete:function(){pb.add(g)},objectFit:h,objectPosition:d,w:"auto",h:"auto",layout:a,sizes:v,quality:n,width:"20",height:"20",placeholder:s,src:l,alt:u,priority:p,transition:pb.has(g)?void 0:"all 0.2s",ml:[4,8,8]})}))})},mb=function(e){var t=e.type;return(0,Nv.jsx)(Nv.Fragment,{children:(0,Nv.jsxs)(Ru,{bgGradient:t.bg,overflow:"hidden",position:"relative",borderRadius:6,p:8,flexDir:"column",__css:{backdropFilter:"blur(150px)",border:"1px solid rgb(255, 255, 255, 0.1)"},children:[" ",(0,Nv.jsx)(Wu,{mb:4,spacing:4,direction:{base:"row",lg:"column"},align:{base:"center",lg:"flex-start"},children:(0,Nv.jsx)(Bu,{as:"h4",color:"whiteAlpha.900",fontWeight:"bold",fontSize:{base:"md",md:"xl"},pt:20,children:t.title})}),(0,Nv.jsx)(Bu,{as:"p",size:"subtitle.md",fontSize:"1.2em",fontWeight:"thin",color:"whiteAlpha.900",textAlign:"left",children:t.description}),t.gradientBg&&(0,Nv.jsx)(fb,{position:"absolute",alt:"",borderRadius:6,overflow:"hidden",pointerEvents:"none",top:4,left:0,bottom:0,right:0,layout:"fill",pt:2,src:t.gradientBg.url,w:{base:40,lg:40},h:{base:40,lg:40},objectFit:"cover",objectPosition:t.gradientBg.position})]})})},gb=i(351),vb=i(504),yb=i(370),xb=i(289),bb=i(877),wb=i(359),Sb=i(479),_b={title:"CUSTOM SOFTWARE AND MARKETING SOLUTIONS",description:"We develop software to simplify your processes, you get a software that is tailor-fit for your business needs without features that are not useful for you. Meanwhile, we market your business using the latest technology and strategies that fit your niche.",icon:yb,gradientBg:{url:yb,blendMode:"normal",position:"bottom right"},bg:"transparent"},Ab={title:"SMART LONG TERM INVESTMENT",icon:xb,description:"We turn your concepts into sellable products, reap the benefits long after you have recovered its development costs by selling your software or applying it in your business to simplify processes and more. This is in contrast to subscribing to a third-party software and marketing tools.",gradientBg:{url:xb,blendMode:"normal",position:"bottom right"},bg:"transparent"},Mb=Hv({title:"FLEXIBILITY",icon:vb,description:"We develop software to simplify your processes, You can integrate new tools or new software that becomes available that suits your business.",gradientBg:{url:vb,blendMode:"normal",position:"bottom right"},bg:"linear(to-l, #7928CA, #FF0080)"},"bg","transparent"),Eb={title:"SECURITY",icon:bb,bg:"transparent",description:"We incorporate the latest technology to make sure youre always on top, you are guaranteed that any services rendered are safe and secure. Keeping your private information while reaching out to the public is our priority.",gradientBg:{url:bb,blendMode:"normal",position:"bottom right"}},Cb={title:"SCABILITY AND COMPETITIVE ADVANTAGE",icon:wb,description:"We visualize your ideas for your profit, custom made IT services can easily accommodate process changes, increased workloads, additional integrations, and more. we initiate trendy steps to market your business You can easily differentiate yourself from competitors giving you more brand recognition.  ",gradientBg:{url:wb,blendMode:"normal",position:"bottom right"},bg:"transparent"},Tb={title:"TURNING YOUR VISION INTO REALITY!",icon:Sb,description:"Helping you keep up with changes, and bringing you out of tradition and into the evolving world of information technology. With businesses growing at light speed, lets recreate your business with Gamma Web Limiteds expert IT Services!",gradientBg:{url:Sb,blendMode:"normal",position:"bottom right"},bg:"transparent"},Db=function(){return(0,Nv.jsxs)(Nv.Fragment,{children:[(0,Nv.jsxs)(Ru,{justify:"center",flexDir:"column",as:"main",bg:"#400c60",h:["300hv","280hv","280hv","230vh"],mb:96,children:[(0,Nv.jsxs)(nb,{id:"home",hero:"true",title:"SOFTWARE DESIGN AND DEVELOPMENT",subtitle:(0,Nv.jsxs)(Nv.Fragment,{children:[" From idea conceptualization, research, creation, and marketing, we do it all for you! We develop software and apps that will go beyond your needs.",(0,Nv.jsx)(Au,{display:{base:"none",md:"block"}})," Reinventing ways to make sure that your business is on the path of success. With strategic planning and meticulous application, we implement the latest techniques to launch your business in a worldwide platform."]}),bottomGradient:"animated",paddingBottom:!0,children:["   ",(0,Nv.jsx)(Wu,{w:"100%",spacing:["64px","64px","100px"],pb:["10rem","10rem","20rem"]})]}),(0,Nv.jsxs)(Ru,{position:"relative",mt:{base:"-18rem",md:"-18rem"},py:{base:"2em",md:"5em"},id:"features",borderRadius:"md",children:[(0,Nv.jsx)(ob,{position:"absolute"}),(0,Nv.jsx)(Cu,{maxW:"container.page",position:"relative",pt:["600px","48px","88px"],pb:[48,48,0],children:(0,Nv.jsx)(Wu,{w:"100%",align:"center",spacing:{base:"2.5rem",md:"5.5rem"},maxW:"1400px",margin:"auto",children:(0,Nv.jsxs)(ju,{w:"100%",placeItems:"stretch",zIndex:10,columns:{base:1,md:2,lg:3},spacing:6,mt:-48,children:[(0,Nv.jsx)(mb,{type:_b}),(0,Nv.jsx)(mb,{type:Ab}),(0,Nv.jsx)(mb,{type:Mb}),(0,Nv.jsx)(mb,{type:Eb}),(0,Nv.jsx)(mb,{type:Cb}),(0,Nv.jsx)(mb,{type:Tb})]})})})]})]}),(0,Nv.jsx)(nb,{id:"home",hero:"true",title:"PC, MOBILE MARKETING AND APP OPTIMISATION",color:"black",isDark:!0,bg:"#da034c",subtitle:(0,Nv.jsxs)(Nv.Fragment,{children:[" Keeple Independient is the love den of innovation, learning, and utility hailing from Colombia. We are a complete digital solutions services going beyond customer expectations and reaching goals beyond ones limits. We aim to deliver convenience for all businesses out there by providing our services from creating software and products, developing platforms to boost revenue, and marketing your business to a global community."," ",(0,Nv.jsx)("b",{children:"THE INNOVATIVE TEAM BEHIND KEEP IT SIMPLE"})," ","Composed of talented creators, Keeple Indie is home to some of the worlds greatest digital innovators! From creating apps for various devices to developing software customized for your needs, we tailor all our services to maximize efficiency for your business and boost your ROI.",(0,Nv.jsx)($v,{src:gb,w:"600px",mt:[20,20,48],margin:"auto"})]}),topGradient:"animated",paddingBottom:!0,bottom:"400px",pt:[48,48,"-400px"],mb:["-800px","-800px","-1200px"]})]})},Lb=i(379),Pb=i.n(Lb),Rb=i(795),Ob=i.n(Rb),kb=i(569),Ib=i.n(kb),Bb=i(565),zb=i.n(Bb),Nb=i(216),Fb=i.n(Nb),Ub=i(589),jb=i.n(Ub),Hb=i(133),Vb={};Vb.styleTagTransform=jb(),Vb.setAttributes=zb(),Vb.insert=Ib().bind(null,"head"),Vb.domAPI=Ob(),Vb.insertStyleElement=Fb(),Pb()(Hb.Z,Vb),Hb.Z&&Hb.Z.locals&&Hb.Z.locals;var Gb={color:"#61afef",fontFamily:"consolas",textDecoration:"none",fontSize:"0.9em",marginTop:"14px"},Wb={color:"cyan",fontSize:"0.9em",marginTop:"14px"};function qb(){var t,r=Gv(e.useState(Gb),2),n=r[0],i=r[1];return(0,Nv.jsx)(Nv.Fragment,{children:(0,Nv.jsxs)(Uv,{children:[" ",(0,Nv.jsxs)(Au,{bg:"white",as:"section",children:["  ",(0,Nv.jsxs)("div",{style:{textAlign:"center"},children:[(0,Nv.jsxs)("section",{style:(t={backgroundColor:"#400c60",background:"rgb(64,12,96)"},Hv(t,"background","linear-gradient(153deg, rgba(64,12,96,1) 7%, rgba(64,12,96,1) 47%, rgba(18,167,252,1) 90%, rgba(64,12,96,1) 96%)"),Hv(t,"background","rgb(64,12,96)"),Hv(t,"background","linear-gradient(153deg, rgba(64,12,96,1) 7%, rgba(64,12,96,1) 77%, rgba(18,167,252,1) 90%, rgba(64,12,96,1) 96%)"),Hv(t,"background","radial-gradient(circle at 50% 58%, rgba(21, 10, 255, 0.61) 0%, rgba(61, 12, 96, 0.94) 39%, rgba(64, 12, 96, 100) 100%)"),Hv(t,"color","white"),Hv(t,"minHeight","100vh"),Hv(t,"display","flex"),Hv(t,"flexDirection","column"),Hv(t,"alignItems","center"),Hv(t,"justifyContent","center"),Hv(t,"fontSize","calc(10px + 2.2vmin)"),Hv(t,"boxShadow","0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)"),Hv(t,"position","relative"),Hv(t,"zIndex","1"),Hv(t,"paddingBottom","50px"),t),children:[(0,Nv.jsxs)(Bu,{as:"h1",mt:[28,16,16],pb:5,fontWeight:"bolder",color:"#dbd0bf",sx:{filter:"blur(0.4px)"},fontSize:["1.4em","1.4em","2em","3em"],px:[48,4,4],children:["We create apps, easily.",(0,Nv.jsx)("br",{})]}),(0,Nv.jsxs)(Qu,{mt:[8,2,1],fontSize:["0.6em","0.6em","0.7em","0.9em"],px:[56,4,4],fontWeight:"thin",sx:{filter:"contrast(0.5) blur(0.34px)"},children:[" Bridging the gap between your business and the world!",(0,Nv.jsx)("br",{}),"Transforming the user experience and generating value through software development."]}),(0,Nv.jsx)(pu,{to:"/register",children:(0,Nv.jsx)(hc,{mt:8,fontSize:"24px",mb:9,bg:"#f03",px:"20",size:"lg",_hover:{color:"black",background:"red"},sx:{backdropFilter:"blur(10px)",boxShadow:"0px 0px 10px #f03"},mixBlendMode:"lighten",rounded:"full",children:"Start with us"})}),(0,Nv.jsx)("img",{src:gb,alt:"logo",style:{height:"40vmin",WebkitFilter:"blur(0.3px) saturate(2)",marginBottom:"50px"},className:"App-logo imgSpinner",position:"relative",zIndex:"-1"}),(0,Nv.jsxs)(Au,{display:"flex",children:[(0,Nv.jsx)("a",{href:"https://reactjs.org",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0999",fontFamily:"monospace",textDecoration:"none",fontSize:"1.3em"},children:" Using"}),(0,Nv.jsxs)("a",{href:"https://github.com/rroderickk/nodemachine",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0999",fontFamily:"monospace",textDecoration:"none",fontSize:"1.3em"},children:[" ",(0,Nv.jsx)("strong",{style:{color:"#98c379"},children:"NodeMachine"})]})]}),(0,Nv.jsxs)("a",{href:"https://twitter.com/cheatmodes4",target:"_blank",rel:"noopener noreferrer",onMouseOver:function(){return i(Wb)},onMouseLeave:function(){return i(Gb)},style:n,children:[" @CheatModes4",(0,Nv.jsx)("br",{}),(0,Nv.jsx)("br",{}),(0,Nv.jsx)("br",{})]})]}),(0,Nv.jsx)(Db,{})]})]})]})})}var Yb=function(){return(0,Nv.jsx)(Fx,{children:(0,Nv.jsxs)(ql,{children:[(0,Nv.jsx)(Gl,{exact:!0,path:"/",element:(0,Nv.jsx)(qb,{})}),(0,Nv.jsx)(Gl,{exact:!0,path:"/pricing",element:(0,Nv.jsx)(fx,{})}),(0,Nv.jsx)(Gl,{exact:!0,path:"/register",element:(0,Nv.jsx)(Hy,{})}),(0,Nv.jsx)(Gl,{exact:!0,path:"/about",element:(0,Nv.jsx)(Gx,{})}),(0,Nv.jsx)(Gl,{exact:!0,path:"/features",element:(0,Nv.jsx)(ux,{})}),(0,Nv.jsx)(Gl,{exact:!0,path:"/thanks",element:(0,Nv.jsx)(Ux,{})}),(0,Nv.jsx)(Gl,{exact:!0,path:"*",element:(0,Nv.jsx)(jv,{})})]})})};r.render((0,Nv.jsx)(e.StrictMode,{children:(0,Nv.jsx)(Ol,{resetCSS:!0,children:(0,Nv.jsx)(du,{children:(0,Nv.jsx)(Yb,{})})})}),document.getElementById("root"))})()})();